var N=Object.defineProperty,I=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var R=(e,a,t)=>a in e?N(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,m=(e,a)=>{for(var t in a||(a={}))A.call(a,t)&&R(e,t,a[t]);if(E)for(var t of E(a))j.call(a,t)&&R(e,t,a[t]);return e},h=(e,a)=>I(e,V(a));import{ap as w,D as L,aq as b}from"./index.js";import{_ as M}from"./NumberChart.vue_vue_type_script_setup_true_lang-DibYDM6X.js";import{_ as T}from"./CommonChart.vue_vue_type_script_setup_true_lang-CoH2LoLT.js";import{_ as U}from"./PieChart.vue_vue_type_script_setup_true_lang-B2jf__bZ.js";import{_ as q}from"./LineChart.vue_vue_type_script_setup_true_lang-CDPczWvM.js";import{_ as z}from"./BarChart.vue_vue_type_script_setup_true_lang-BlW9SvKQ.js";import{k as u,d as G,aj as O,f as d,Z as v,_ as k,a6 as c,u as i,a5 as y,a9 as P,F as Z,a8 as H,G as J,a0 as K,ag as Q}from"./vue-C-fXn5x4.js";import{g as W,_ as X}from"./useForm-RgYvicpQ.js";import"./index-Ct8wWWt8.js";import"./index-CIFLoaXD.js";import"./index-sb4rP5N6.js";import{ab as x,V as B,U as Y,ac as ee}from"./antd-Dxxf6MN8.js";function D(e,a,t){let l={title:e.name,valueFunc:()=>ae(e,a,t),type:e.type,render:{}};return e.type==="NUMBER"?h(m({},l),{render:u(M,{valueFetch:l.valueFunc,anChartField:e},null)}):e.type=="PIE"?h(m({},l),{render:u(U,{valueFetch:l.valueFunc,anChartField:e},null)}):e.type=="BAR"?h(m({},l),{render:u(z,{valueFetch:l.valueFunc,anChartField:e},null)}):e.type==="LINE"?h(m({},l),{render:u(q,{valueFetch:l.valueFunc,anChartField:e},null)}):h(m({},l),{render:u(T,{valueFetch:l.valueFunc,anChartField:e},null)})}const ae=(e,a,t)=>w(a,e.id,t),te={class:"p-4"},ve=G({__name:"index",props:{entityClass:{type:String,default:""}},setup(e){const{getIsMobile:a}=L(),t=e,S=O().name,p=d("");t.entityClass?p.value=t.entityClass:p.value=S;const g=d([]),_=d([]),s=d(),C=d([]);b(p.value).then(f=>{s.value=f.annoChart;let o=s.value.layout;s.value.searchForm&&b(s.value.searchForm).then(r=>{g.value=W(r.columns,a)}),o.forEach(r=>{for(let F=0;F<r;F++)C.value.push(24/r)});for(let r=0;r<s.value.chartFields.length;r++){let F=s.value.chartFields[r];_.value.push({chartRenderField:D(F,p.value,{}),anChartField:F,span:C.value[r]||24})}});function $(f){if(s.value){_.value=[];for(let o=0;o<s.value.chartFields.length;o++){let n=s.value.chartFields[o];_.value.push({chartRenderField:D(n,p.value,f),anChartField:n,span:C.value[o]||24})}}}return(f,o)=>(v(),k("div",te,[u(i(ee),null,{default:c(()=>[u(i(x),{span:"24"},{default:c(()=>{var n,r;return[(n=s.value)!=null&&n.searchForm&&((r=s.value)==null?void 0:r.searchForm)!="DefaultBaseForm"?(v(),y(i(B),{key:0,title:"搜索"},{default:c(()=>[u(i(X),{ref:"formRef",schemas:g.value,onSubmit:$},null,8,["schemas"])]),_:1})):P("",!0)]}),_:1}),(v(!0),k(Z,null,H(_.value,(n,r)=>(v(),y(i(x),{key:r,span:n.span},{default:c(()=>[u(i(B),{title:n.anChartField.name,bodyStyle:{}},{extra:c(()=>[u(i(Y),{color:n.anChartField.actionColor||"blue"},{default:c(()=>[J(K(n.anChartField.action),1)]),_:2},1032,["color"])]),default:c(()=>[(v(),y(Q(n.chartRenderField.render)))]),_:2},1032,["title"])]),_:2},1032,["span"]))),128))]),_:1})]))}});export{ve as _};
