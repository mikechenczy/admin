var hq=Object.defineProperty,gq=Object.defineProperties;var bq=Object.getOwnPropertyDescriptors;var B$=Object.getOwnPropertySymbols;var yq=Object.prototype.hasOwnProperty,wq=Object.prototype.propertyIsEnumerable;var P$=(v,y,C)=>y in v?hq(v,y,{enumerable:!0,configurable:!0,writable:!0,value:C}):v[y]=C,ua=(v,y)=>{for(var C in y||(y={}))yq.call(y,C)&&P$(v,C,y[C]);if(B$)for(var C of B$(y))wq.call(y,C)&&P$(v,C,y[C]);return v},Mu=(v,y)=>gq(v,bq(y));var no=(v,y,C)=>new Promise((A,We)=>{var Ge=P=>{try{Ve(C.next(P))}catch(Te){We(Te)}},Xe=P=>{try{Ve(C.throw(P))}catch(Te){We(Te)}},Ve=P=>P.done?A(P.value):Promise.resolve(P.value).then(Ge,Xe);Ve((C=C.apply(v,y)).next())});import{f as ref,c as computed,u as unref,d as defineComponent,h as watchEffect,w as watch,Z as openBlock,a5 as createBlock,a6 as withCtx,ae as normalizeStyle,a1 as normalizeClass,k as createVNode,$ as createBaseVNode,_ as createElementBlock,F as Fragment,a8 as renderList,a9 as createCommentVNode,B as withModifiers,a0 as toDisplayString,an as withKeys,ap as pushScopeId,aq as popScopeId,q as Transition,E as Teleport,o as onMounted,e as inject,a7 as resolveComponent,y as nextTick,j as onBeforeUnmount,p as provide,b as onUnmounted,J as toRaw,aa as mergeProps,H as isRef,G as createTextVNode,ab as createSlots,ac as renderSlot,ah as normalizeProps,ai as guardReactiveProps,K as useAttrs$1,I as toRefs,Q as onDeactivated,m as withDirectives,i as isVNode,A as vShow,g as getCurrentInstance,ar as shallowReactive,r as reactive,l as h,n as resolveDirective,af as useSlots}from"./vue-ae6a2213.js";import{u as useRuleFormItem}from"./useFormItem-e445be9f.js";import{f as useDesign,z as useDebounceFn,u as useI18n,S as ScrollContainer,aZ as SvgIcon,_ as _sfc_main$G,p as propTypes,a6 as useAttrs,aJ as isArray,a_ as componentSetting,a$ as usePermission,a2 as Dropdown,b0 as PopConfirmButton,b1 as isDef,au as useMessage,b2 as warn,w as isObject$1,aa as withInstall,k as useRootSetting,b3 as uploadApi,aP as getDict,aO as getSlot,b4 as BasicHelp,b5 as dateUtil,aX as useBreakpoint,a9 as error,d as deepMerge,s as createContext,a8 as isProdMode,b6 as getDynamicProps,b7 as _sfc_main$H,a0 as ClickOutside,aL as treeToList,b8 as formatToDate,m as useTimeoutFn,b9 as findNodeAll,az as getViewportOffset,ba as getPopupContainer,L as useFullscreen,a5 as BasicTitle,aW as useEventListener,aA as PageWrapperFixedHeightKey,aq as getEntity,ar as getTableData,bb as transOne,Y as useGlobSetting,W as _export_sfc,i as useAppStore,N as useLocale,ax as getToken,bc as Api}from"./index.js";import{E as Input,aM as Pagination,am as Empty,X as Popover,o as omit,az as Radio,e as isFunction$1,an as get,aD as Select,aN as LoadingOutlined,ad as Tree,aE as TreeSelect,aG as Cascader,ae as Transfer,W as isBoolean,T as Tooltip,a8 as Divider,aO as MoreOutlined,k as isString,w as Image$1,aP as Progress,Q as Tag,aQ as Alert,aw as Upload,aR as Space,M as Modal,aS as PlusOutlined,c as commonjsGlobal,b as getDefaultExportFromCjs,aT as RadioButton,aL as RadioGroup,v as isEmpty,a7 as isNumber$1,aa as Col,ap as Form,f as cloneDeep,r as isNull,aU as upperFirst,s as set,aV as unset,d as isNil,a3 as uniqBy,ab as Row,B as Button,aW as FormOutlined,aX as LeftOutlined,aY as RightOutlined,aB as InputNumber,aC as AutoComplete,aF as Switch,aq as Checkbox,aJ as DatePicker,aK as TimePicker,aZ as CloseOutlined,a_ as CheckOutlined,G as Spin,p as pick,a as isEqual,a$ as isMap,b0 as merge,b1 as DragOutlined,b2 as SettingOutlined,x as Menu,b3 as ColumnHeightOutlined,D as Dropdown$1,a5 as RedoOutlined,a1 as FullscreenOutlined,a2 as FullscreenExitOutlined,b4 as Table,b5 as Badge,as as Avatar,aH as Slider,aI as Rate}from"./antd-8e9c6fb8.js";import{_ as _sfc_main$I}from"./RadioButtonGroup.vue_vue_type_script_setup_true_lang-e84e3d3d.js";import{b as useModalContext,a as useModalInner,B as BasicModal,u as useModal}from"./index-470a7b7c.js";import{u as useSortable}from"./useSortable-1cd8f8b5.js";import{d as downloadByUrl,Q as QrCode}from"./index-949a3570.js";import{o as onMountedOrActivated}from"./onMountedOrActivated-d6e0a436.js";import{S as StrengthMeter}from"./index-81505b2a.js";import{c as copyText}from"./copyTextToClipboard-6d09c6e8.js";import{C as CountdownInput}from"./index-58c143a0.js";import{C as CodeEditor}from"./index-ca06cd68.js";import{u as useWindowSizeFn}from"./useWindowSizeFn-be729167.js";import Sortable from"./sortable.esm-9a942543.js";const iconsData={prefix:"ant-design",icons:["account-book-filled","account-book-outlined","account-book-twotone","aim-outlined","alert-filled","alert-outlined","alert-twotone","alibaba-outlined","align-center-outlined","align-left-outlined","align-right-outlined","alipay-circle-filled","alipay-circle-outlined","alipay-outlined","alipay-square-filled","aliwangwang-filled","aliwangwang-outlined","aliyun-outlined","amazon-circle-filled","amazon-outlined","amazon-square-filled","android-filled","android-outlined","ant-cloud-outlined","ant-design-outlined","apartment-outlined","api-filled","api-outlined","api-twotone","apple-filled","apple-outlined","appstore-add-outlined","appstore-filled","appstore-outlined","appstore-twotone","area-chart-outlined","arrow-down-outlined","arrow-left-outlined","arrow-right-outlined","arrow-up-outlined","arrows-alt-outlined","audio-filled","audio-muted-outlined","audio-outlined","audio-twotone","audit-outlined","backward-filled","backward-outlined","bank-filled","bank-outlined","bank-twotone","bar-chart-outlined","barcode-outlined","bars-outlined","behance-circle-filled","behance-outlined","behance-square-filled","behance-square-outlined","bell-filled","bell-outlined","bell-twotone","bg-colors-outlined","block-outlined","bold-outlined","book-filled","book-outlined","book-twotone","border-bottom-outlined","border-horizontal-outlined","border-inner-outlined","border-left-outlined","border-outer-outlined","border-outlined","border-right-outlined","border-top-outlined","border-verticle-outlined","borderless-table-outlined","box-plot-filled","box-plot-outlined","box-plot-twotone","branches-outlined","bug-filled","bug-outlined","bug-twotone","build-filled","build-outlined","build-twotone","bulb-filled","bulb-outlined","bulb-twotone","calculator-filled","calculator-outlined","calculator-twotone","calendar-filled","calendar-outlined","calendar-twotone","camera-filled","camera-outlined","camera-twotone","car-filled","car-outlined","car-twotone","caret-down-filled","caret-down-outlined","caret-left-filled","caret-left-outlined","caret-right-filled","caret-right-outlined","caret-up-filled","caret-up-outlined","carry-out-filled","carry-out-outlined","carry-out-twotone","check-circle-filled","check-circle-outlined","check-circle-twotone","check-outlined","check-square-filled","check-square-outlined","check-square-twotone","chrome-filled","chrome-outlined","ci-circle-filled","ci-circle-outlined","ci-circle-twotone","ci-outlined","ci-twotone","clear-outlined","clock-circle-filled","clock-circle-outlined","clock-circle-twotone","close-circle-filled","close-circle-outlined","close-circle-twotone","close-outlined","close-square-filled","close-square-outlined","close-square-twotone","cloud-download-outlined","cloud-filled","cloud-outlined","cloud-server-outlined","cloud-sync-outlined","cloud-twotone","cloud-upload-outlined","cluster-outlined","code-filled","code-outlined","code-sandbox-circle-filled","code-sandbox-outlined","code-sandbox-square-filled","code-twotone","codepen-circle-filled","codepen-circle-outlined","codepen-outlined","codepen-square-filled","coffee-outlined","column-height-outlined","column-width-outlined","comment-outlined","compass-filled","compass-outlined","compass-twotone","compress-outlined","console-sql-outlined","contacts-filled","contacts-outlined","contacts-twotone","container-filled","container-outlined","container-twotone","control-filled","control-outlined","control-twotone","copy-filled","copy-outlined","copy-twotone","copyright-circle-filled","copyright-circle-outlined","copyright-circle-twotone","copyright-outlined","copyright-twotone","credit-card-filled","credit-card-outlined","credit-card-twotone","crown-filled","crown-outlined","crown-twotone","customer-service-filled","customer-service-outlined","customer-service-twotone","dash-outlined","dashboard-filled","dashboard-outlined","dashboard-twotone","database-filled","database-outlined","database-twotone","delete-column-outlined","delete-filled","delete-outlined","delete-row-outlined","delete-twotone","delivered-procedure-outlined","deployment-unit-outlined","desktop-outlined","diff-filled","diff-outlined","diff-twotone","dingding-outlined","dingtalk-circle-filled","dingtalk-outlined","dingtalk-square-filled","disconnect-outlined","dislike-filled","dislike-outlined","dislike-twotone","dollar-circle-filled","dollar-circle-outlined","dollar-circle-twotone","dollar-outlined","dollar-twotone","dot-chart-outlined","double-left-outlined","double-right-outlined","down-circle-filled","down-circle-outlined","down-circle-twotone","down-outlined","down-square-filled","down-square-outlined","down-square-twotone","download-outlined","drag-outlined","dribbble-circle-filled","dribbble-outlined","dribbble-square-filled","dribbble-square-outlined","dropbox-circle-filled","dropbox-outlined","dropbox-square-filled","edit-filled","edit-outlined","edit-twotone","ellipsis-outlined","enter-outlined","environment-filled","environment-outlined","environment-twotone","euro-circle-filled","euro-circle-outlined","euro-circle-twotone","euro-outlined","euro-twotone","exception-outlined","exclamation-circle-filled","exclamation-circle-outlined","exclamation-circle-twotone","exclamation-outlined","expand-alt-outlined","expand-outlined","experiment-filled","experiment-outlined","experiment-twotone","export-outlined","eye-filled","eye-invisible-filled","eye-invisible-outlined","eye-invisible-twotone","eye-outlined","eye-twotone","facebook-filled","facebook-outlined","fall-outlined","fast-backward-filled","fast-backward-outlined","fast-forward-filled","fast-forward-outlined","field-binary-outlined","field-number-outlined","field-string-outlined","field-time-outlined","file-add-filled","file-add-outlined","file-add-twotone","file-done-outlined","file-excel-filled","file-excel-outlined","file-excel-twotone","file-exclamation-filled","file-exclamation-outlined","file-exclamation-twotone","file-filled","file-gif-outlined","file-image-filled","file-image-outlined","file-image-twotone","file-jpg-outlined","file-markdown-filled","file-markdown-outlined","file-markdown-twotone","file-outlined","file-pdf-filled","file-pdf-outlined","file-pdf-twotone","file-ppt-filled","file-ppt-outlined","file-ppt-twotone","file-protect-outlined","file-search-outlined","file-sync-outlined","file-text-filled","file-text-outlined","file-text-twotone","file-twotone","file-unknown-filled","file-unknown-outlined","file-unknown-twotone","file-word-filled","file-word-outlined","file-word-twotone","file-zip-filled","file-zip-outlined","file-zip-twotone","filter-filled","filter-outlined","filter-twotone","fire-filled","fire-outlined","fire-twotone","flag-filled","flag-outlined","flag-twotone","folder-add-filled","folder-add-outlined","folder-add-twotone","folder-filled","folder-open-filled","folder-open-outlined","folder-open-twotone","folder-outlined","folder-twotone","folder-view-outlined","font-colors-outlined","font-size-outlined","fork-outlined","form-outlined","format-painter-filled","format-painter-outlined","forward-filled","forward-outlined","frown-filled","frown-outlined","frown-twotone","fullscreen-exit-outlined","fullscreen-outlined","function-outlined","fund-filled","fund-outlined","fund-projection-screen-outlined","fund-twotone","fund-view-outlined","funnel-plot-filled","funnel-plot-outlined","funnel-plot-twotone","gateway-outlined","gif-outlined","gift-filled","gift-outlined","gift-twotone","github-filled","github-outlined","gitlab-filled","gitlab-outlined","global-outlined","gold-filled","gold-outlined","gold-twotone","golden-filled","google-circle-filled","google-outlined","google-plus-circle-filled","google-plus-outlined","google-plus-square-filled","google-square-filled","group-outlined","hdd-filled","hdd-outlined","hdd-twotone","heart-filled","heart-outlined","heart-twotone","heat-map-outlined","highlight-filled","highlight-outlined","highlight-twotone","history-outlined","home-filled","home-outlined","home-twotone","hourglass-filled","hourglass-outlined","hourglass-twotone","html5-filled","html5-outlined","html5-twotone","idcard-filled","idcard-outlined","idcard-twotone","ie-circle-filled","ie-outlined","ie-square-filled","import-outlined","inbox-outlined","info-circle-filled","info-circle-outlined","info-circle-twotone","info-outlined","insert-row-above-outlined","insert-row-below-outlined","insert-row-left-outlined","insert-row-right-outlined","instagram-filled","instagram-outlined","insurance-filled","insurance-outlined","insurance-twotone","interaction-filled","interaction-outlined","interaction-twotone","issues-close-outlined","italic-outlined","key-outlined","laptop-outlined","layout-filled","layout-outlined","layout-twotone","left-circle-filled","left-circle-outlined","left-circle-twotone","left-outlined","left-square-filled","left-square-outlined","left-square-twotone","like-filled","like-outlined","like-twotone","line-chart-outlined","line-height-outlined","line-outlined","link-outlined","linkedin-filled","linkedin-outlined","loading-3-quarters-outlined","loading-outlined","lock-filled","lock-outlined","lock-twotone","login-outlined","logout-outlined","mac-command-filled","mac-command-outlined","mail-filled","mail-outlined","mail-twotone","man-outlined","medicine-box-filled","medicine-box-outlined","medicine-box-twotone","medium-circle-filled","medium-outlined","medium-square-filled","medium-workmark-outlined","meh-filled","meh-outlined","meh-twotone","menu-fold-outlined","menu-outlined","menu-unfold-outlined","merge-cells-outlined","message-filled","message-outlined","message-twotone","minus-circle-filled","minus-circle-outlined","minus-circle-twotone","minus-outlined","minus-square-filled","minus-square-outlined","minus-square-twotone","mobile-filled","mobile-outlined","mobile-twotone","money-collect-filled","money-collect-outlined","money-collect-twotone","monitor-outlined","more-outlined","node-collapse-outlined","node-expand-outlined","node-index-outlined","notification-filled","notification-outlined","notification-twotone","number-outlined","one-to-one-outlined","ordered-list-outlined","paper-clip-outlined","partition-outlined","pause-circle-filled","pause-circle-outlined","pause-circle-twotone","pause-outlined","pay-circle-filled","pay-circle-outlined","percentage-outlined","phone-filled","phone-outlined","phone-twotone","pic-center-outlined","pic-left-outlined","pic-right-outlined","picture-filled","picture-outlined","picture-twotone","pie-chart-filled","pie-chart-outlined","pie-chart-twotone","play-circle-filled","play-circle-outlined","play-circle-twotone","play-square-filled","play-square-outlined","play-square-twotone","plus-circle-filled","plus-circle-outlined","plus-circle-twotone","plus-outlined","plus-square-filled","plus-square-outlined","plus-square-twotone","pound-circle-filled","pound-circle-outlined","pound-circle-twotone","pound-outlined","poweroff-outlined","printer-filled","printer-outlined","printer-twotone","profile-filled","profile-outlined","profile-twotone","project-filled","project-outlined","project-twotone","property-safety-filled","property-safety-outlined","property-safety-twotone","pull-request-outlined","pushpin-filled","pushpin-outlined","pushpin-twotone","qq-circle-filled","qq-outlined","qq-square-filled","qrcode-outlined","question-circle-filled","question-circle-outlined","question-circle-twotone","question-outlined","radar-chart-outlined","radius-bottomleft-outlined","radius-bottomright-outlined","radius-setting-outlined","radius-upleft-outlined","radius-upright-outlined","read-filled","read-outlined","reconciliation-filled","reconciliation-outlined","reconciliation-twotone","red-envelope-filled","red-envelope-outlined","red-envelope-twotone","reddit-circle-filled","reddit-outlined","reddit-square-filled","redo-outlined","reload-outlined","rest-filled","rest-outlined","rest-twotone","retweet-outlined","right-circle-filled","right-circle-outlined","right-circle-twotone","right-outlined","right-square-filled","right-square-outlined","right-square-twotone","rise-outlined","robot-filled","robot-outlined","rocket-filled","rocket-outlined","rocket-twotone","rollback-outlined","rotate-left-outlined","rotate-right-outlined","safety-certificate-filled","safety-certificate-outlined","safety-certificate-twotone","safety-outlined","save-filled","save-outlined","save-twotone","scan-outlined","schedule-filled","schedule-outlined","schedule-twotone","scissor-outlined","search-outlined","security-scan-filled","security-scan-outlined","security-scan-twotone","select-outlined","send-outlined","setting-filled","setting-outlined","setting-twotone","shake-outlined","share-alt-outlined","shop-filled","shop-outlined","shop-twotone","shopping-cart-outlined","shopping-filled","shopping-outlined","shopping-twotone","shrink-outlined","signal-filled","sisternode-outlined","sketch-circle-filled","sketch-outlined","sketch-square-filled","skin-filled","skin-outlined","skin-twotone","skype-filled","skype-outlined","slack-circle-filled","slack-outlined","slack-square-filled","slack-square-outlined","sliders-filled","sliders-outlined","sliders-twotone","small-dash-outlined","smile-filled","smile-outlined","smile-twotone","snippets-filled","snippets-outlined","snippets-twotone","solution-outlined","sort-ascending-outlined","sort-descending-outlined","sound-filled","sound-outlined","sound-twotone","split-cells-outlined","star-filled","star-outlined","star-twotone","step-backward-filled","step-backward-outlined","step-forward-filled","step-forward-outlined","stock-outlined","stop-filled","stop-outlined","stop-twotone","strikethrough-outlined","subnode-outlined","swap-left-outlined","swap-outlined","swap-right-outlined","switcher-filled","switcher-outlined","switcher-twotone","sync-outlined","table-outlined","tablet-filled","tablet-outlined","tablet-twotone","tag-filled","tag-outlined","tag-twotone","tags-filled","tags-outlined","tags-twotone","taobao-circle-filled","taobao-circle-outlined","taobao-outlined","taobao-square-filled","team-outlined","thunderbolt-filled","thunderbolt-outlined","thunderbolt-twotone","to-top-outlined","tool-filled","tool-outlined","tool-twotone","trademark-circle-filled","trademark-circle-outlined","trademark-circle-twotone","trademark-outlined","transaction-outlined","translation-outlined","trophy-filled","trophy-outlined","trophy-twotone","twitter-circle-filled","twitter-outlined","twitter-square-filled","underline-outlined","undo-outlined","ungroup-outlined","unlock-filled","unlock-outlined","unlock-twotone","unordered-list-outlined","up-circle-filled","up-circle-outlined","up-circle-twotone","up-outlined","up-square-filled","up-square-outlined","up-square-twotone","upload-outlined","usb-filled","usb-outlined","usb-twotone","user-add-outlined","user-delete-outlined","user-outlined","user-switch-outlined","usergroup-add-outlined","usergroup-delete-outlined","verified-outlined","vertical-align-bottom-outlined","vertical-align-middle-outlined","vertical-align-top-outlined","vertical-left-outlined","vertical-right-outlined","video-camera-add-outlined","video-camera-filled","video-camera-outlined","video-camera-twotone","wallet-filled","wallet-outlined","wallet-twotone","warning-filled","warning-outlined","warning-twotone","wechat-filled","wechat-outlined","weibo-circle-filled","weibo-circle-outlined","weibo-outlined","weibo-square-filled","weibo-square-outlined","whats-app-outlined","wifi-outlined","windows-filled","windows-outlined","woman-outlined","yahoo-filled","yahoo-outlined","youtube-filled","youtube-outlined","yuque-filled","yuque-outlined","zhihu-circle-filled","zhihu-outlined","zhihu-square-filled","zoom-in-outlined","zoom-out-outlined"]};function pagination(v,y,C){const A=(y-1)*Number(C);return A+Number(C)>=v.length?v.slice(A,v.length):v.slice(A,A+Number(C))}function usePagination$1(v,y){const C=ref(1),A=ref(y),We=computed(()=>pagination(unref(v),unref(C),unref(A))),Ge=computed(()=>unref(v).length);function Xe(P){C.value=P}function Ve(P){A.value=P}return{setCurrentPage:Xe,getTotal:Ge,setPageSize:Ve,getPaginationList:We}}const svgIcons=["icon-download-count","icon-dynamic-avatar-1","icon-dynamic-avatar-2","icon-dynamic-avatar-3","icon-dynamic-avatar-4","icon-dynamic-avatar-5","icon-dynamic-avatar-6","icon-moon","icon-sun","icon-test","icon-total-sales","icon-transaction","icon-visit-count"],_hoisted_1$d={class:"flex justify-between"},_hoisted_2$3={key:0},_hoisted_3$3={class:"flex flex-wrap px-2"},_hoisted_4=["onClick","title"],_hoisted_5={key:0,class:"flex py-2 items-center justify-center"},_hoisted_6={key:1,class:"p-5"},_hoisted_7={key:0,class:"cursor-pointer px-2 py-1 flex items-center"},_sfc_main$F=defineComponent({inheritAttrs:!1,__name:"IconPicker",props:{value:{default:""},width:{default:"100%"},pageSize:{default:140},copy:{type:Boolean,default:!1},mode:{default:"iconify"}},emits:["change","update:value"],setup(v,{emit:y}){function C(){const et=iconsData.prefix;return iconsData.icons.map(Ot=>`${et}:${Ot}`)}function A(){return svgIcons.map(et=>et.replace("icon-",""))}const We=v,Ge=y,Xe=We.mode==="svg",Ve=Xe?A():C(),P=ref(""),Te=ref(!1),j=ref(Ve),x=ref(),qe=()=>{x.value&&x.value.click()},{t:Be}=useI18n(),{prefixCls:De}=useDesign("icon-picker"),He=useDebounceFn(at,100),{getPaginationList:Ye,getTotal:st,setCurrentPage:rt}=usePagination$1(j,We.pageSize);watchEffect(()=>{P.value=We.value}),watch(()=>P.value,et=>{Ge("update:value",et),Ge("change",et)});function Ke(et){rt(et)}function tt(et){P.value=et,We.copy&&copyText(et,Be("component.icon.copy"))}function at(et){const Ot=et.target.value;if(!Ot){rt(1),j.value=Ve;return}j.value=Ve.filter(wt=>wt.includes(Ot))}return(et,Ot)=>(openBlock(),createBlock(unref(Input),{readonly:"",style:normalizeStyle({width:et.width}),placeholder:unref(Be)("component.icon.placeholder"),class:normalizeClass(unref(De)),value:P.value,"onUpdate:value":Ot[1]||(Ot[1]=wt=>P.value=wt),onClick:qe},{addonAfter:withCtx(()=>[createVNode(unref(Popover),{placement:"bottomLeft",trigger:"click",modelValue:Te.value,"onUpdate:modelValue":Ot[0]||(Ot[0]=wt=>Te.value=wt),overlayClassName:`${unref(De)}-popover`},{title:withCtx(()=>[createBaseVNode("div",_hoisted_1$d,[createVNode(unref(Input),{placeholder:unref(Be)("component.icon.search"),onChange:unref(He),allowClear:""},null,8,["placeholder","onChange"])])]),content:withCtx(()=>[unref(Ye).length?(openBlock(),createElementBlock("div",_hoisted_2$3,[createVNode(unref(ScrollContainer),{class:"border border-solid border-t-0"},{default:withCtx(()=>[createBaseVNode("ul",_hoisted_3$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ye),wt=>(openBlock(),createElementBlock("li",{key:wt,class:normalizeClass([P.value===wt?"border border-primary":"","p-2 w-1/8 cursor-pointer mr-1 mt-1 flex justify-center items-center border border-solid hover:border-primary"]),onClick:xt=>tt(wt),title:wt},[Xe?(openBlock(),createBlock(SvgIcon,{key:0,name:wt},null,8,["name"])):(openBlock(),createBlock(_sfc_main$G,{key:1,icon:wt},null,8,["icon"]))],10,_hoisted_4))),128))])]),_:1}),unref(st)>=et.pageSize?(openBlock(),createElementBlock("div",_hoisted_5,[createVNode(unref(Pagination),{showLessItems:"",size:"small",pageSize:et.pageSize,total:unref(st),onChange:Ke},null,8,["pageSize","total"])])):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_6,[createVNode(unref(Empty))]))]),default:withCtx(()=>[createBaseVNode("div",{ref_key:"trigger",ref:x},[Xe&&P.value?(openBlock(),createElementBlock("span",_hoisted_7,[createVNode(SvgIcon,{name:P.value},null,8,["name"])])):(openBlock(),createBlock(_sfc_main$G,{key:1,icon:P.value||"ion:apps-outline",class:"cursor-pointer px-2 py-1"},null,8,["icon"]))],512)]),_:1},8,["modelValue","overlayClassName"])]),_:1},8,["style","placeholder","class","value"]))}});var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(v,y){return v.concat([y+"-"+start,y+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(v,y){return v.concat([y,y+"-"+start,y+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(v){return v?(v.nodeName||"").toLowerCase():null}function getWindow(v){if(v==null)return window;if(v.toString()!=="[object Window]"){var y=v.ownerDocument;return y&&y.defaultView||window}return v}function isElement(v){var y=getWindow(v).Element;return v instanceof y||v instanceof Element}function isHTMLElement(v){var y=getWindow(v).HTMLElement;return v instanceof y||v instanceof HTMLElement}function isShadowRoot(v){if(typeof ShadowRoot=="undefined")return!1;var y=getWindow(v).ShadowRoot;return v instanceof y||v instanceof ShadowRoot}function applyStyles(v){var y=v.state;Object.keys(y.elements).forEach(function(C){var A=y.styles[C]||{},We=y.attributes[C]||{},Ge=y.elements[C];!isHTMLElement(Ge)||!getNodeName(Ge)||(Object.assign(Ge.style,A),Object.keys(We).forEach(function(Xe){var Ve=We[Xe];Ve===!1?Ge.removeAttribute(Xe):Ge.setAttribute(Xe,Ve===!0?"":Ve)}))})}function effect$2(v){var y=v.state,C={popper:{position:y.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(y.elements.popper.style,C.popper),y.styles=C,y.elements.arrow&&Object.assign(y.elements.arrow.style,C.arrow),function(){Object.keys(y.elements).forEach(function(A){var We=y.elements[A],Ge=y.attributes[A]||{},Xe=Object.keys(y.styles.hasOwnProperty(A)?y.styles[A]:C[A]),Ve=Xe.reduce(function(P,Te){return P[Te]="",P},{});!isHTMLElement(We)||!getNodeName(We)||(Object.assign(We.style,Ve),Object.keys(Ge).forEach(function(P){We.removeAttribute(P)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(v){return v.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var v=navigator.userAgentData;return v!=null&&v.brands&&Array.isArray(v.brands)?v.brands.map(function(y){return y.brand+"/"+y.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(v,y,C){y===void 0&&(y=!1),C===void 0&&(C=!1);var A=v.getBoundingClientRect(),We=1,Ge=1;y&&isHTMLElement(v)&&(We=v.offsetWidth>0&&round(A.width)/v.offsetWidth||1,Ge=v.offsetHeight>0&&round(A.height)/v.offsetHeight||1);var Xe=isElement(v)?getWindow(v):window,Ve=Xe.visualViewport,P=!isLayoutViewport()&&C,Te=(A.left+(P&&Ve?Ve.offsetLeft:0))/We,j=(A.top+(P&&Ve?Ve.offsetTop:0))/Ge,x=A.width/We,qe=A.height/Ge;return{width:x,height:qe,top:j,right:Te+x,bottom:j+qe,left:Te,x:Te,y:j}}function getLayoutRect(v){var y=getBoundingClientRect(v),C=v.offsetWidth,A=v.offsetHeight;return Math.abs(y.width-C)<=1&&(C=y.width),Math.abs(y.height-A)<=1&&(A=y.height),{x:v.offsetLeft,y:v.offsetTop,width:C,height:A}}function contains(v,y){var C=y.getRootNode&&y.getRootNode();if(v.contains(y))return!0;if(C&&isShadowRoot(C)){var A=y;do{if(A&&v.isSameNode(A))return!0;A=A.parentNode||A.host}while(A)}return!1}function getComputedStyle$1(v){return getWindow(v).getComputedStyle(v)}function isTableElement(v){return["table","td","th"].indexOf(getNodeName(v))>=0}function getDocumentElement(v){return((isElement(v)?v.ownerDocument:v.document)||window.document).documentElement}function getParentNode(v){return getNodeName(v)==="html"?v:v.assignedSlot||v.parentNode||(isShadowRoot(v)?v.host:null)||getDocumentElement(v)}function getTrueOffsetParent(v){return!isHTMLElement(v)||getComputedStyle$1(v).position==="fixed"?null:v.offsetParent}function getContainingBlock(v){var y=/firefox/i.test(getUAString()),C=/Trident/i.test(getUAString());if(C&&isHTMLElement(v)){var A=getComputedStyle$1(v);if(A.position==="fixed")return null}var We=getParentNode(v);for(isShadowRoot(We)&&(We=We.host);isHTMLElement(We)&&["html","body"].indexOf(getNodeName(We))<0;){var Ge=getComputedStyle$1(We);if(Ge.transform!=="none"||Ge.perspective!=="none"||Ge.contain==="paint"||["transform","perspective"].indexOf(Ge.willChange)!==-1||y&&Ge.willChange==="filter"||y&&Ge.filter&&Ge.filter!=="none")return We;We=We.parentNode}return null}function getOffsetParent(v){for(var y=getWindow(v),C=getTrueOffsetParent(v);C&&isTableElement(C)&&getComputedStyle$1(C).position==="static";)C=getTrueOffsetParent(C);return C&&(getNodeName(C)==="html"||getNodeName(C)==="body"&&getComputedStyle$1(C).position==="static")?y:C||getContainingBlock(v)||y}function getMainAxisFromPlacement(v){return["top","bottom"].indexOf(v)>=0?"x":"y"}function within(v,y,C){return max(v,min(y,C))}function withinMaxClamp(v,y,C){var A=within(v,y,C);return A>C?C:A}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(v){return Object.assign({},getFreshSideObject(),v)}function expandToHashMap(v,y){return y.reduce(function(C,A){return C[A]=v,C},{})}var toPaddingObject=function(y,C){return y=typeof y=="function"?y(Object.assign({},C.rects,{placement:C.placement})):y,mergePaddingObject(typeof y!="number"?y:expandToHashMap(y,basePlacements))};function arrow(v){var y,C=v.state,A=v.name,We=v.options,Ge=C.elements.arrow,Xe=C.modifiersData.popperOffsets,Ve=getBasePlacement(C.placement),P=getMainAxisFromPlacement(Ve),Te=[left,right].indexOf(Ve)>=0,j=Te?"height":"width";if(!(!Ge||!Xe)){var x=toPaddingObject(We.padding,C),qe=getLayoutRect(Ge),Be=P==="y"?top:left,De=P==="y"?bottom:right,He=C.rects.reference[j]+C.rects.reference[P]-Xe[P]-C.rects.popper[j],Ye=Xe[P]-C.rects.reference[P],st=getOffsetParent(Ge),rt=st?P==="y"?st.clientHeight||0:st.clientWidth||0:0,Ke=He/2-Ye/2,tt=x[Be],at=rt-qe[j]-x[De],et=rt/2-qe[j]/2+Ke,Ot=within(tt,et,at),wt=P;C.modifiersData[A]=(y={},y[wt]=Ot,y.centerOffset=Ot-et,y)}}function effect$1(v){var y=v.state,C=v.options,A=C.element,We=A===void 0?"[data-popper-arrow]":A;We!=null&&(typeof We=="string"&&(We=y.elements.popper.querySelector(We),!We)||contains(y.elements.popper,We)&&(y.elements.arrow=We))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(v){return v.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(v,y){var C=v.x,A=v.y,We=y.devicePixelRatio||1;return{x:round(C*We)/We||0,y:round(A*We)/We||0}}function mapToStyles(v){var y,C=v.popper,A=v.popperRect,We=v.placement,Ge=v.variation,Xe=v.offsets,Ve=v.position,P=v.gpuAcceleration,Te=v.adaptive,j=v.roundOffsets,x=v.isFixed,qe=Xe.x,Be=qe===void 0?0:qe,De=Xe.y,He=De===void 0?0:De,Ye=typeof j=="function"?j({x:Be,y:He}):{x:Be,y:He};Be=Ye.x,He=Ye.y;var st=Xe.hasOwnProperty("x"),rt=Xe.hasOwnProperty("y"),Ke=left,tt=top,at=window;if(Te){var et=getOffsetParent(C),Ot="clientHeight",wt="clientWidth";if(et===getWindow(C)&&(et=getDocumentElement(C),getComputedStyle$1(et).position!=="static"&&Ve==="absolute"&&(Ot="scrollHeight",wt="scrollWidth")),et=et,We===top||(We===left||We===right)&&Ge===end){tt=bottom;var xt=x&&et===at&&at.visualViewport?at.visualViewport.height:et[Ot];He-=xt-A.height,He*=P?1:-1}if(We===left||(We===top||We===bottom)&&Ge===end){Ke=right;var it=x&&et===at&&at.visualViewport?at.visualViewport.width:et[wt];Be-=it-A.width,Be*=P?1:-1}}var yt=Object.assign({position:Ve},Te&&unsetSides),ut=j===!0?roundOffsetsByDPR({x:Be,y:He},getWindow(C)):{x:Be,y:He};if(Be=ut.x,He=ut.y,P){var Et;return Object.assign({},yt,(Et={},Et[tt]=rt?"0":"",Et[Ke]=st?"0":"",Et.transform=(at.devicePixelRatio||1)<=1?"translate("+Be+"px, "+He+"px)":"translate3d("+Be+"px, "+He+"px, 0)",Et))}return Object.assign({},yt,(y={},y[tt]=rt?He+"px":"",y[Ke]=st?Be+"px":"",y.transform="",y))}function computeStyles(v){var y=v.state,C=v.options,A=C.gpuAcceleration,We=A===void 0?!0:A,Ge=C.adaptive,Xe=Ge===void 0?!0:Ge,Ve=C.roundOffsets,P=Ve===void 0?!0:Ve,Te={placement:getBasePlacement(y.placement),variation:getVariation(y.placement),popper:y.elements.popper,popperRect:y.rects.popper,gpuAcceleration:We,isFixed:y.options.strategy==="fixed"};y.modifiersData.popperOffsets!=null&&(y.styles.popper=Object.assign({},y.styles.popper,mapToStyles(Object.assign({},Te,{offsets:y.modifiersData.popperOffsets,position:y.options.strategy,adaptive:Xe,roundOffsets:P})))),y.modifiersData.arrow!=null&&(y.styles.arrow=Object.assign({},y.styles.arrow,mapToStyles(Object.assign({},Te,{offsets:y.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:P})))),y.attributes.popper=Object.assign({},y.attributes.popper,{"data-popper-placement":y.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(v){var y=v.state,C=v.instance,A=v.options,We=A.scroll,Ge=We===void 0?!0:We,Xe=A.resize,Ve=Xe===void 0?!0:Xe,P=getWindow(y.elements.popper),Te=[].concat(y.scrollParents.reference,y.scrollParents.popper);return Ge&&Te.forEach(function(j){j.addEventListener("scroll",C.update,passive)}),Ve&&P.addEventListener("resize",C.update,passive),function(){Ge&&Te.forEach(function(j){j.removeEventListener("scroll",C.update,passive)}),Ve&&P.removeEventListener("resize",C.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(v){return v.replace(/left|right|bottom|top/g,function(y){return hash$1[y]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(v){return v.replace(/start|end/g,function(y){return hash[y]})}function getWindowScroll(v){var y=getWindow(v),C=y.pageXOffset,A=y.pageYOffset;return{scrollLeft:C,scrollTop:A}}function getWindowScrollBarX(v){return getBoundingClientRect(getDocumentElement(v)).left+getWindowScroll(v).scrollLeft}function getViewportRect(v,y){var C=getWindow(v),A=getDocumentElement(v),We=C.visualViewport,Ge=A.clientWidth,Xe=A.clientHeight,Ve=0,P=0;if(We){Ge=We.width,Xe=We.height;var Te=isLayoutViewport();(Te||!Te&&y==="fixed")&&(Ve=We.offsetLeft,P=We.offsetTop)}return{width:Ge,height:Xe,x:Ve+getWindowScrollBarX(v),y:P}}function getDocumentRect(v){var y,C=getDocumentElement(v),A=getWindowScroll(v),We=(y=v.ownerDocument)==null?void 0:y.body,Ge=max(C.scrollWidth,C.clientWidth,We?We.scrollWidth:0,We?We.clientWidth:0),Xe=max(C.scrollHeight,C.clientHeight,We?We.scrollHeight:0,We?We.clientHeight:0),Ve=-A.scrollLeft+getWindowScrollBarX(v),P=-A.scrollTop;return getComputedStyle$1(We||C).direction==="rtl"&&(Ve+=max(C.clientWidth,We?We.clientWidth:0)-Ge),{width:Ge,height:Xe,x:Ve,y:P}}function isScrollParent(v){var y=getComputedStyle$1(v),C=y.overflow,A=y.overflowX,We=y.overflowY;return/auto|scroll|overlay|hidden/.test(C+We+A)}function getScrollParent(v){return["html","body","#document"].indexOf(getNodeName(v))>=0?v.ownerDocument.body:isHTMLElement(v)&&isScrollParent(v)?v:getScrollParent(getParentNode(v))}function listScrollParents(v,y){var C;y===void 0&&(y=[]);var A=getScrollParent(v),We=A===((C=v.ownerDocument)==null?void 0:C.body),Ge=getWindow(A),Xe=We?[Ge].concat(Ge.visualViewport||[],isScrollParent(A)?A:[]):A,Ve=y.concat(Xe);return We?Ve:Ve.concat(listScrollParents(getParentNode(Xe)))}function rectToClientRect(v){return Object.assign({},v,{left:v.x,top:v.y,right:v.x+v.width,bottom:v.y+v.height})}function getInnerBoundingClientRect(v,y){var C=getBoundingClientRect(v,!1,y==="fixed");return C.top=C.top+v.clientTop,C.left=C.left+v.clientLeft,C.bottom=C.top+v.clientHeight,C.right=C.left+v.clientWidth,C.width=v.clientWidth,C.height=v.clientHeight,C.x=C.left,C.y=C.top,C}function getClientRectFromMixedType(v,y,C){return y===viewport?rectToClientRect(getViewportRect(v,C)):isElement(y)?getInnerBoundingClientRect(y,C):rectToClientRect(getDocumentRect(getDocumentElement(v)))}function getClippingParents(v){var y=listScrollParents(getParentNode(v)),C=["absolute","fixed"].indexOf(getComputedStyle$1(v).position)>=0,A=C&&isHTMLElement(v)?getOffsetParent(v):v;return isElement(A)?y.filter(function(We){return isElement(We)&&contains(We,A)&&getNodeName(We)!=="body"}):[]}function getClippingRect(v,y,C,A){var We=y==="clippingParents"?getClippingParents(v):[].concat(y),Ge=[].concat(We,[C]),Xe=Ge[0],Ve=Ge.reduce(function(P,Te){var j=getClientRectFromMixedType(v,Te,A);return P.top=max(j.top,P.top),P.right=min(j.right,P.right),P.bottom=min(j.bottom,P.bottom),P.left=max(j.left,P.left),P},getClientRectFromMixedType(v,Xe,A));return Ve.width=Ve.right-Ve.left,Ve.height=Ve.bottom-Ve.top,Ve.x=Ve.left,Ve.y=Ve.top,Ve}function computeOffsets(v){var y=v.reference,C=v.element,A=v.placement,We=A?getBasePlacement(A):null,Ge=A?getVariation(A):null,Xe=y.x+y.width/2-C.width/2,Ve=y.y+y.height/2-C.height/2,P;switch(We){case top:P={x:Xe,y:y.y-C.height};break;case bottom:P={x:Xe,y:y.y+y.height};break;case right:P={x:y.x+y.width,y:Ve};break;case left:P={x:y.x-C.width,y:Ve};break;default:P={x:y.x,y:y.y}}var Te=We?getMainAxisFromPlacement(We):null;if(Te!=null){var j=Te==="y"?"height":"width";switch(Ge){case start:P[Te]=P[Te]-(y[j]/2-C[j]/2);break;case end:P[Te]=P[Te]+(y[j]/2-C[j]/2);break}}return P}function detectOverflow(v,y){y===void 0&&(y={});var C=y,A=C.placement,We=A===void 0?v.placement:A,Ge=C.strategy,Xe=Ge===void 0?v.strategy:Ge,Ve=C.boundary,P=Ve===void 0?clippingParents:Ve,Te=C.rootBoundary,j=Te===void 0?viewport:Te,x=C.elementContext,qe=x===void 0?popper:x,Be=C.altBoundary,De=Be===void 0?!1:Be,He=C.padding,Ye=He===void 0?0:He,st=mergePaddingObject(typeof Ye!="number"?Ye:expandToHashMap(Ye,basePlacements)),rt=qe===popper?reference:popper,Ke=v.rects.popper,tt=v.elements[De?rt:qe],at=getClippingRect(isElement(tt)?tt:tt.contextElement||getDocumentElement(v.elements.popper),P,j,Xe),et=getBoundingClientRect(v.elements.reference),Ot=computeOffsets({reference:et,element:Ke,strategy:"absolute",placement:We}),wt=rectToClientRect(Object.assign({},Ke,Ot)),xt=qe===popper?wt:et,it={top:at.top-xt.top+st.top,bottom:xt.bottom-at.bottom+st.bottom,left:at.left-xt.left+st.left,right:xt.right-at.right+st.right},yt=v.modifiersData.offset;if(qe===popper&&yt){var ut=yt[We];Object.keys(it).forEach(function(Et){var Ht=[right,bottom].indexOf(Et)>=0?1:-1,an=[top,bottom].indexOf(Et)>=0?"y":"x";it[Et]+=ut[an]*Ht})}return it}function computeAutoPlacement(v,y){y===void 0&&(y={});var C=y,A=C.placement,We=C.boundary,Ge=C.rootBoundary,Xe=C.padding,Ve=C.flipVariations,P=C.allowedAutoPlacements,Te=P===void 0?placements:P,j=getVariation(A),x=j?Ve?variationPlacements:variationPlacements.filter(function(De){return getVariation(De)===j}):basePlacements,qe=x.filter(function(De){return Te.indexOf(De)>=0});qe.length===0&&(qe=x);var Be=qe.reduce(function(De,He){return De[He]=detectOverflow(v,{placement:He,boundary:We,rootBoundary:Ge,padding:Xe})[getBasePlacement(He)],De},{});return Object.keys(Be).sort(function(De,He){return Be[De]-Be[He]})}function getExpandedFallbackPlacements(v){if(getBasePlacement(v)===auto)return[];var y=getOppositePlacement(v);return[getOppositeVariationPlacement(v),y,getOppositeVariationPlacement(y)]}function flip(v){var y=v.state,C=v.options,A=v.name;if(!y.modifiersData[A]._skip){for(var We=C.mainAxis,Ge=We===void 0?!0:We,Xe=C.altAxis,Ve=Xe===void 0?!0:Xe,P=C.fallbackPlacements,Te=C.padding,j=C.boundary,x=C.rootBoundary,qe=C.altBoundary,Be=C.flipVariations,De=Be===void 0?!0:Be,He=C.allowedAutoPlacements,Ye=y.options.placement,st=getBasePlacement(Ye),rt=st===Ye,Ke=P||(rt||!De?[getOppositePlacement(Ye)]:getExpandedFallbackPlacements(Ye)),tt=[Ye].concat(Ke).reduce(function(Nt,ln){return Nt.concat(getBasePlacement(ln)===auto?computeAutoPlacement(y,{placement:ln,boundary:j,rootBoundary:x,padding:Te,flipVariations:De,allowedAutoPlacements:He}):ln)},[]),at=y.rects.reference,et=y.rects.popper,Ot=new Map,wt=!0,xt=tt[0],it=0;it<tt.length;it++){var yt=tt[it],ut=getBasePlacement(yt),Et=getVariation(yt)===start,Ht=[top,bottom].indexOf(ut)>=0,an=Ht?"width":"height",Mt=detectOverflow(y,{placement:yt,boundary:j,rootBoundary:x,altBoundary:qe,padding:Te}),vn=Ht?Et?right:left:Et?bottom:top;at[an]>et[an]&&(vn=getOppositePlacement(vn));var Wn=getOppositePlacement(vn),$e=[];if(Ge&&$e.push(Mt[ut]<=0),Ve&&$e.push(Mt[vn]<=0,Mt[Wn]<=0),$e.every(function(Nt){return Nt})){xt=yt,wt=!1;break}Ot.set(yt,$e)}if(wt)for(var Dt=De?3:1,vt=function(ln){var on=tt.find(function(dt){var ur=Ot.get(dt);if(ur)return ur.slice(0,ln).every(function(dn){return dn})});if(on)return xt=on,"break"},nn=Dt;nn>0;nn--){var _t=vt(nn);if(_t==="break")break}y.placement!==xt&&(y.modifiersData[A]._skip=!0,y.placement=xt,y.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(v,y,C){return C===void 0&&(C={x:0,y:0}),{top:v.top-y.height-C.y,right:v.right-y.width+C.x,bottom:v.bottom-y.height+C.y,left:v.left-y.width-C.x}}function isAnySideFullyClipped(v){return[top,right,bottom,left].some(function(y){return v[y]>=0})}function hide(v){var y=v.state,C=v.name,A=y.rects.reference,We=y.rects.popper,Ge=y.modifiersData.preventOverflow,Xe=detectOverflow(y,{elementContext:"reference"}),Ve=detectOverflow(y,{altBoundary:!0}),P=getSideOffsets(Xe,A),Te=getSideOffsets(Ve,We,Ge),j=isAnySideFullyClipped(P),x=isAnySideFullyClipped(Te);y.modifiersData[C]={referenceClippingOffsets:P,popperEscapeOffsets:Te,isReferenceHidden:j,hasPopperEscaped:x},y.attributes.popper=Object.assign({},y.attributes.popper,{"data-popper-reference-hidden":j,"data-popper-escaped":x})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(v,y,C){var A=getBasePlacement(v),We=[left,top].indexOf(A)>=0?-1:1,Ge=typeof C=="function"?C(Object.assign({},y,{placement:v})):C,Xe=Ge[0],Ve=Ge[1];return Xe=Xe||0,Ve=(Ve||0)*We,[left,right].indexOf(A)>=0?{x:Ve,y:Xe}:{x:Xe,y:Ve}}function offset(v){var y=v.state,C=v.options,A=v.name,We=C.offset,Ge=We===void 0?[0,0]:We,Xe=placements.reduce(function(j,x){return j[x]=distanceAndSkiddingToXY(x,y.rects,Ge),j},{}),Ve=Xe[y.placement],P=Ve.x,Te=Ve.y;y.modifiersData.popperOffsets!=null&&(y.modifiersData.popperOffsets.x+=P,y.modifiersData.popperOffsets.y+=Te),y.modifiersData[A]=Xe}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(v){var y=v.state,C=v.name;y.modifiersData[C]=computeOffsets({reference:y.rects.reference,element:y.rects.popper,strategy:"absolute",placement:y.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(v){return v==="x"?"y":"x"}function preventOverflow(v){var y=v.state,C=v.options,A=v.name,We=C.mainAxis,Ge=We===void 0?!0:We,Xe=C.altAxis,Ve=Xe===void 0?!1:Xe,P=C.boundary,Te=C.rootBoundary,j=C.altBoundary,x=C.padding,qe=C.tether,Be=qe===void 0?!0:qe,De=C.tetherOffset,He=De===void 0?0:De,Ye=detectOverflow(y,{boundary:P,rootBoundary:Te,padding:x,altBoundary:j}),st=getBasePlacement(y.placement),rt=getVariation(y.placement),Ke=!rt,tt=getMainAxisFromPlacement(st),at=getAltAxis(tt),et=y.modifiersData.popperOffsets,Ot=y.rects.reference,wt=y.rects.popper,xt=typeof He=="function"?He(Object.assign({},y.rects,{placement:y.placement})):He,it=typeof xt=="number"?{mainAxis:xt,altAxis:xt}:Object.assign({mainAxis:0,altAxis:0},xt),yt=y.modifiersData.offset?y.modifiersData.offset[y.placement]:null,ut={x:0,y:0};if(et){if(Ge){var Et,Ht=tt==="y"?top:left,an=tt==="y"?bottom:right,Mt=tt==="y"?"height":"width",vn=et[tt],Wn=vn+Ye[Ht],$e=vn-Ye[an],Dt=Be?-wt[Mt]/2:0,vt=rt===start?Ot[Mt]:wt[Mt],nn=rt===start?-wt[Mt]:-Ot[Mt],_t=y.elements.arrow,Nt=Be&&_t?getLayoutRect(_t):{width:0,height:0},ln=y.modifiersData["arrow#persistent"]?y.modifiersData["arrow#persistent"].padding:getFreshSideObject(),on=ln[Ht],dt=ln[an],ur=within(0,Ot[Mt],Nt[Mt]),dn=Ke?Ot[Mt]/2-Dt-ur-on-it.mainAxis:vt-ur-on-it.mainAxis,en=Ke?-Ot[Mt]/2+Dt+ur+dt+it.mainAxis:nn+ur+dt+it.mainAxis,Nn=y.elements.arrow&&getOffsetParent(y.elements.arrow),fn=Nn?tt==="y"?Nn.clientTop||0:Nn.clientLeft||0:0,cn=(Et=yt==null?void 0:yt[tt])!=null?Et:0,hn=vn+dn-cn-fn,er=vn+en-cn,Fn=within(Be?min(Wn,hn):Wn,vn,Be?max($e,er):$e);et[tt]=Fn,ut[tt]=Fn-vn}if(Ve){var Gn,va=tt==="x"?top:left,tn=tt==="x"?bottom:right,Mn=et[at],Rr=at==="y"?"height":"width",Yr=Mn+Ye[va],oa=Mn-Ye[tn],pa=[top,left].indexOf(st)!==-1,Ga=(Gn=yt==null?void 0:yt[at])!=null?Gn:0,fo=pa?Yr:Mn-Ot[Rr]-wt[Rr]-Ga+it.altAxis,oo=pa?Mn+Ot[Rr]+wt[Rr]-Ga-it.altAxis:oa,fr=Be&&pa?withinMaxClamp(fo,Mn,oo):within(Be?fo:Yr,Mn,Be?oo:oa);et[at]=fr,ut[at]=fr-Mn}y.modifiersData[A]=ut}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(v){return{scrollLeft:v.scrollLeft,scrollTop:v.scrollTop}}function getNodeScroll(v){return v===getWindow(v)||!isHTMLElement(v)?getWindowScroll(v):getHTMLElementScroll(v)}function isElementScaled(v){var y=v.getBoundingClientRect(),C=round(y.width)/v.offsetWidth||1,A=round(y.height)/v.offsetHeight||1;return C!==1||A!==1}function getCompositeRect(v,y,C){C===void 0&&(C=!1);var A=isHTMLElement(y),We=isHTMLElement(y)&&isElementScaled(y),Ge=getDocumentElement(y),Xe=getBoundingClientRect(v,We,C),Ve={scrollLeft:0,scrollTop:0},P={x:0,y:0};return(A||!A&&!C)&&((getNodeName(y)!=="body"||isScrollParent(Ge))&&(Ve=getNodeScroll(y)),isHTMLElement(y)?(P=getBoundingClientRect(y,!0),P.x+=y.clientLeft,P.y+=y.clientTop):Ge&&(P.x=getWindowScrollBarX(Ge))),{x:Xe.left+Ve.scrollLeft-P.x,y:Xe.top+Ve.scrollTop-P.y,width:Xe.width,height:Xe.height}}function order(v){var y=new Map,C=new Set,A=[];v.forEach(function(Ge){y.set(Ge.name,Ge)});function We(Ge){C.add(Ge.name);var Xe=[].concat(Ge.requires||[],Ge.requiresIfExists||[]);Xe.forEach(function(Ve){if(!C.has(Ve)){var P=y.get(Ve);P&&We(P)}}),A.push(Ge)}return v.forEach(function(Ge){C.has(Ge.name)||We(Ge)}),A}function orderModifiers(v){var y=order(v);return modifierPhases.reduce(function(C,A){return C.concat(y.filter(function(We){return We.phase===A}))},[])}function debounce(v){var y;return function(){return y||(y=new Promise(function(C){Promise.resolve().then(function(){y=void 0,C(v())})})),y}}function mergeByName(v){var y=v.reduce(function(C,A){var We=C[A.name];return C[A.name]=We?Object.assign({},We,A,{options:Object.assign({},We.options,A.options),data:Object.assign({},We.data,A.data)}):A,C},{});return Object.keys(y).map(function(C){return y[C]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var v=arguments.length,y=new Array(v),C=0;C<v;C++)y[C]=arguments[C];return!y.some(function(A){return!(A&&typeof A.getBoundingClientRect=="function")})}function popperGenerator(v){v===void 0&&(v={});var y=v,C=y.defaultModifiers,A=C===void 0?[]:C,We=y.defaultOptions,Ge=We===void 0?DEFAULT_OPTIONS:We;return function(Ve,P,Te){Te===void 0&&(Te=Ge);var j={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,Ge),modifiersData:{},elements:{reference:Ve,popper:P},attributes:{},styles:{}},x=[],qe=!1,Be={state:j,setOptions:function(st){var rt=typeof st=="function"?st(j.options):st;He(),j.options=Object.assign({},Ge,j.options,rt),j.scrollParents={reference:isElement(Ve)?listScrollParents(Ve):Ve.contextElement?listScrollParents(Ve.contextElement):[],popper:listScrollParents(P)};var Ke=orderModifiers(mergeByName([].concat(A,j.options.modifiers)));return j.orderedModifiers=Ke.filter(function(tt){return tt.enabled}),De(),Be.update()},forceUpdate:function(){if(!qe){var st=j.elements,rt=st.reference,Ke=st.popper;if(areValidElements(rt,Ke)){j.rects={reference:getCompositeRect(rt,getOffsetParent(Ke),j.options.strategy==="fixed"),popper:getLayoutRect(Ke)},j.reset=!1,j.placement=j.options.placement,j.orderedModifiers.forEach(function(it){return j.modifiersData[it.name]=Object.assign({},it.data)});for(var tt=0;tt<j.orderedModifiers.length;tt++){if(j.reset===!0){j.reset=!1,tt=-1;continue}var at=j.orderedModifiers[tt],et=at.fn,Ot=at.options,wt=Ot===void 0?{}:Ot,xt=at.name;typeof et=="function"&&(j=et({state:j,options:wt,name:xt,instance:Be})||j)}}}},update:debounce(function(){return new Promise(function(Ye){Be.forceUpdate(),Ye(j)})}),destroy:function(){He(),qe=!0}};if(!areValidElements(Ve,P))return Be;Be.setOptions(Te).then(function(Ye){!qe&&Te.onFirstUpdate&&Te.onFirstUpdate(Ye)});function De(){j.orderedModifiers.forEach(function(Ye){var st=Ye.name,rt=Ye.options,Ke=rt===void 0?{}:rt,tt=Ye.effect;if(typeof tt=="function"){var at=tt({state:j,name:st,instance:Be,options:Ke}),et=function(){};x.push(at||et)}})}function He(){x.forEach(function(Ye){return Ye()}),x=[]}return Be}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function N(v,y){(y==null||y>v.length)&&(y=v.length);for(var C=0,A=new Array(y);C<y;C++)A[C]=v[C];return A}function E(v,y){if(v){if(typeof v=="string")return N(v,y);var C=Object.prototype.toString.call(v).slice(8,-1);return C==="Object"&&v.constructor&&(C=v.constructor.name),C==="Map"||C==="Set"?Array.from(v):C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C)?N(v,y):void 0}}function F(v){return function(y){if(Array.isArray(y))return N(y)}(v)||function(y){if(typeof Symbol!="undefined"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}(v)||E(v)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function L(v){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},L(v)}function z(v,y,C,A,We,Ge,Xe){try{var Ve=v[Ge](Xe),P=Ve.value}catch(Te){return void C(Te)}Ve.done?y(P):Promise.resolve(P).then(A,We)}function M(v){return function(){var y=this,C=arguments;return new Promise(function(A,We){var Ge=v.apply(y,C);function Xe(P){z(Ge,A,We,Xe,Ve,"next",P)}function Ve(P){z(Ge,A,We,Xe,Ve,"throw",P)}Xe(void 0)})}}var R={exports:{}},B={exports:{}};(function(v){function y(C){return v.exports=y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},v.exports.__esModule=!0,v.exports.default=v.exports,y(C)}v.exports=y,v.exports.__esModule=!0,v.exports.default=v.exports})(B),function(v){var y=B.exports.default;function C(){v.exports=C=function(){return We},v.exports.__esModule=!0,v.exports.default=v.exports;var A,We={},Ge=Object.prototype,Xe=Ge.hasOwnProperty,Ve=Object.defineProperty||function($e,Dt,vt){$e[Dt]=vt.value},P=typeof Symbol=="function"?Symbol:{},Te=P.iterator||"@@iterator",j=P.asyncIterator||"@@asyncIterator",x=P.toStringTag||"@@toStringTag";function qe($e,Dt,vt){return Object.defineProperty($e,Dt,{value:vt,enumerable:!0,configurable:!0,writable:!0}),$e[Dt]}try{qe({},"")}catch($e){qe=function(Dt,vt,nn){return Dt[vt]=nn}}function Be($e,Dt,vt,nn){var _t=Dt&&Dt.prototype instanceof tt?Dt:tt,Nt=Object.create(_t.prototype),ln=new vn(nn||[]);return Ve(Nt,"_invoke",{value:Et($e,vt,ln)}),Nt}function De($e,Dt,vt){try{return{type:"normal",arg:$e.call(Dt,vt)}}catch(nn){return{type:"throw",arg:nn}}}We.wrap=Be;var He="suspendedStart",Ye="suspendedYield",st="executing",rt="completed",Ke={};function tt(){}function at(){}function et(){}var Ot={};qe(Ot,Te,function(){return this});var wt=Object.getPrototypeOf,xt=wt&&wt(wt(Wn([])));xt&&xt!==Ge&&Xe.call(xt,Te)&&(Ot=xt);var it=et.prototype=tt.prototype=Object.create(Ot);function yt($e){["next","throw","return"].forEach(function(Dt){qe($e,Dt,function(vt){return this._invoke(Dt,vt)})})}function ut($e,Dt){function vt(_t,Nt,ln,on){var dt=De($e[_t],$e,Nt);if(dt.type!=="throw"){var ur=dt.arg,dn=ur.value;return dn&&y(dn)=="object"&&Xe.call(dn,"__await")?Dt.resolve(dn.__await).then(function(en){vt("next",en,ln,on)},function(en){vt("throw",en,ln,on)}):Dt.resolve(dn).then(function(en){ur.value=en,ln(ur)},function(en){return vt("throw",en,ln,on)})}on(dt.arg)}var nn;Ve(this,"_invoke",{value:function(_t,Nt){function ln(){return new Dt(function(on,dt){vt(_t,Nt,on,dt)})}return nn=nn?nn.then(ln,ln):ln()}})}function Et($e,Dt,vt){var nn=He;return function(_t,Nt){if(nn===st)throw new Error("Generator is already running");if(nn===rt){if(_t==="throw")throw Nt;return{value:A,done:!0}}for(vt.method=_t,vt.arg=Nt;;){var ln=vt.delegate;if(ln){var on=Ht(ln,vt);if(on){if(on===Ke)continue;return on}}if(vt.method==="next")vt.sent=vt._sent=vt.arg;else if(vt.method==="throw"){if(nn===He)throw nn=rt,vt.arg;vt.dispatchException(vt.arg)}else vt.method==="return"&&vt.abrupt("return",vt.arg);nn=st;var dt=De($e,Dt,vt);if(dt.type==="normal"){if(nn=vt.done?rt:Ye,dt.arg===Ke)continue;return{value:dt.arg,done:vt.done}}dt.type==="throw"&&(nn=rt,vt.method="throw",vt.arg=dt.arg)}}}function Ht($e,Dt){var vt=Dt.method,nn=$e.iterator[vt];if(nn===A)return Dt.delegate=null,vt==="throw"&&$e.iterator.return&&(Dt.method="return",Dt.arg=A,Ht($e,Dt),Dt.method==="throw")||vt!=="return"&&(Dt.method="throw",Dt.arg=new TypeError("The iterator does not provide a '"+vt+"' method")),Ke;var _t=De(nn,$e.iterator,Dt.arg);if(_t.type==="throw")return Dt.method="throw",Dt.arg=_t.arg,Dt.delegate=null,Ke;var Nt=_t.arg;return Nt?Nt.done?(Dt[$e.resultName]=Nt.value,Dt.next=$e.nextLoc,Dt.method!=="return"&&(Dt.method="next",Dt.arg=A),Dt.delegate=null,Ke):Nt:(Dt.method="throw",Dt.arg=new TypeError("iterator result is not an object"),Dt.delegate=null,Ke)}function an($e){var Dt={tryLoc:$e[0]};1 in $e&&(Dt.catchLoc=$e[1]),2 in $e&&(Dt.finallyLoc=$e[2],Dt.afterLoc=$e[3]),this.tryEntries.push(Dt)}function Mt($e){var Dt=$e.completion||{};Dt.type="normal",delete Dt.arg,$e.completion=Dt}function vn($e){this.tryEntries=[{tryLoc:"root"}],$e.forEach(an,this),this.reset(!0)}function Wn($e){if($e||$e===""){var Dt=$e[Te];if(Dt)return Dt.call($e);if(typeof $e.next=="function")return $e;if(!isNaN($e.length)){var vt=-1,nn=function _t(){for(;++vt<$e.length;)if(Xe.call($e,vt))return _t.value=$e[vt],_t.done=!1,_t;return _t.value=A,_t.done=!0,_t};return nn.next=nn}}throw new TypeError(y($e)+" is not iterable")}return at.prototype=et,Ve(it,"constructor",{value:et,configurable:!0}),Ve(et,"constructor",{value:at,configurable:!0}),at.displayName=qe(et,x,"GeneratorFunction"),We.isGeneratorFunction=function($e){var Dt=typeof $e=="function"&&$e.constructor;return!!Dt&&(Dt===at||(Dt.displayName||Dt.name)==="GeneratorFunction")},We.mark=function($e){return Object.setPrototypeOf?Object.setPrototypeOf($e,et):($e.__proto__=et,qe($e,x,"GeneratorFunction")),$e.prototype=Object.create(it),$e},We.awrap=function($e){return{__await:$e}},yt(ut.prototype),qe(ut.prototype,j,function(){return this}),We.AsyncIterator=ut,We.async=function($e,Dt,vt,nn,_t){_t===void 0&&(_t=Promise);var Nt=new ut(Be($e,Dt,vt,nn),_t);return We.isGeneratorFunction(Dt)?Nt:Nt.next().then(function(ln){return ln.done?ln.value:Nt.next()})},yt(it),qe(it,x,"Generator"),qe(it,Te,function(){return this}),qe(it,"toString",function(){return"[object Generator]"}),We.keys=function($e){var Dt=Object($e),vt=[];for(var nn in Dt)vt.push(nn);return vt.reverse(),function _t(){for(;vt.length;){var Nt=vt.pop();if(Nt in Dt)return _t.value=Nt,_t.done=!1,_t}return _t.done=!0,_t}},We.values=Wn,vn.prototype={constructor:vn,reset:function($e){if(this.prev=0,this.next=0,this.sent=this._sent=A,this.done=!1,this.delegate=null,this.method="next",this.arg=A,this.tryEntries.forEach(Mt),!$e)for(var Dt in this)Dt.charAt(0)==="t"&&Xe.call(this,Dt)&&!isNaN(+Dt.slice(1))&&(this[Dt]=A)},stop:function(){this.done=!0;var $e=this.tryEntries[0].completion;if($e.type==="throw")throw $e.arg;return this.rval},dispatchException:function($e){if(this.done)throw $e;var Dt=this;function vt(dt,ur){return Nt.type="throw",Nt.arg=$e,Dt.next=dt,ur&&(Dt.method="next",Dt.arg=A),!!ur}for(var nn=this.tryEntries.length-1;nn>=0;--nn){var _t=this.tryEntries[nn],Nt=_t.completion;if(_t.tryLoc==="root")return vt("end");if(_t.tryLoc<=this.prev){var ln=Xe.call(_t,"catchLoc"),on=Xe.call(_t,"finallyLoc");if(ln&&on){if(this.prev<_t.catchLoc)return vt(_t.catchLoc,!0);if(this.prev<_t.finallyLoc)return vt(_t.finallyLoc)}else if(ln){if(this.prev<_t.catchLoc)return vt(_t.catchLoc,!0)}else{if(!on)throw new Error("try statement without catch or finally");if(this.prev<_t.finallyLoc)return vt(_t.finallyLoc)}}}},abrupt:function($e,Dt){for(var vt=this.tryEntries.length-1;vt>=0;--vt){var nn=this.tryEntries[vt];if(nn.tryLoc<=this.prev&&Xe.call(nn,"finallyLoc")&&this.prev<nn.finallyLoc){var _t=nn;break}}_t&&($e==="break"||$e==="continue")&&_t.tryLoc<=Dt&&Dt<=_t.finallyLoc&&(_t=null);var Nt=_t?_t.completion:{};return Nt.type=$e,Nt.arg=Dt,_t?(this.method="next",this.next=_t.finallyLoc,Ke):this.complete(Nt)},complete:function($e,Dt){if($e.type==="throw")throw $e.arg;return $e.type==="break"||$e.type==="continue"?this.next=$e.arg:$e.type==="return"?(this.rval=this.arg=$e.arg,this.method="return",this.next="end"):$e.type==="normal"&&Dt&&(this.next=Dt),Ke},finish:function($e){for(var Dt=this.tryEntries.length-1;Dt>=0;--Dt){var vt=this.tryEntries[Dt];if(vt.finallyLoc===$e)return this.complete(vt.completion,vt.afterLoc),Mt(vt),Ke}},catch:function($e){for(var Dt=this.tryEntries.length-1;Dt>=0;--Dt){var vt=this.tryEntries[Dt];if(vt.tryLoc===$e){var nn=vt.completion;if(nn.type==="throw"){var _t=nn.arg;Mt(vt)}return _t}}throw new Error("illegal catch attempt")},delegateYield:function($e,Dt,vt){return this.delegate={iterator:Wn($e),resultName:Dt,nextLoc:vt},this.method==="next"&&(this.arg=A),Ke}},We}v.exports=C,v.exports.__esModule=!0,v.exports.default=v.exports}(R);var D=R.exports(),T=D;try{regeneratorRuntime=D}catch(v){typeof globalThis=="object"?globalThis.regeneratorRuntime=D:Function("r","regeneratorRuntime = r")(D)}function H(v){var y=function(C,A){if(L(C)!=="object"||C===null)return C;var We=C[Symbol.toPrimitive];if(We!==void 0){var Ge=We.call(C,A||"default");if(L(Ge)!=="object")return Ge;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(C)}(v,"string");return L(y)==="symbol"?y:String(y)}function G(v,y,C){return(y=H(y))in v?Object.defineProperty(v,y,{value:C,enumerable:!0,configurable:!0,writable:!0}):v[y]=C,v}var $=defineComponent({name:"Saturation",props:{size:{type:Number,default:160},hue:{type:Number,default:0},saturation:{type:Number,default:0},value:{type:Number,default:0}},emits:["change"],setup:function(v,y){var C=y.emit,A=computed(function(){return{width:"".concat(v.size,"px"),height:"".concat(v.size,"px"),background:"hsl(".concat(v.hue,", 100%, 50%)")}});return{saturationStyle:A,sliderStyle:computed(function(){return{top:"".concat((100-v.value)/100*v.size-5,"px"),left:"".concat(v.saturation*v.size/100-5,"px"),width:"".concat(10,"px"),height:"".concat(10,"px")}}),onSelect:function(We){var Ge=We.target.getBoundingClientRect(),Xe=Ge.left,Ve=Ge.top,P=function(Te){var j=Te.clientX,x=Te.clientY,qe=j-Xe,Be=x-Ve;qe<0&&(qe=0),Be<0&&(Be=0),qe>v.size&&(qe=v.size),Be>v.size&&(Be=v.size);var De=qe/v.size*100,He=100-Be/v.size*100;C("change",De,He)};P(We),document.addEventListener("mousemove",P),document.addEventListener("mouseup",function Te(){document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",Te)})}}}}),V=function(v){return pushScopeId("data-v-24517fec"),v=v(),popScopeId(),v},Y=V(function(){return createBaseVNode("div",{class:"saturation-white"},null,-1)}),J=V(function(){return createBaseVNode("div",{class:"saturation-black"},null,-1)});function W(v,y){y===void 0&&(y={});var C=y.insertAt;if(v&&typeof document!="undefined"){var A=document.head||document.getElementsByTagName("head")[0],We=document.createElement("style");We.type="text/css",C==="top"&&A.firstChild?A.insertBefore(We,A.firstChild):A.appendChild(We),We.styleSheet?We.styleSheet.cssText=v:We.appendChild(document.createTextNode(v))}}W(".saturation[data-v-24517fec]{position:relative}.saturation-black[data-v-24517fec],.saturation-white[data-v-24517fec]{cursor:pointer;height:100%;left:0;position:absolute;top:0;width:100%}.saturation-white[data-v-24517fec]{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.saturation-black[data-v-24517fec]{background:linear-gradient(0deg,#000,transparent)}.slider[data-v-24517fec]{border:1px solid #fff;border-radius:50%;box-shadow:0 0 1px 1px rgba(0,0,0,.3);left:0;pointer-events:none;position:absolute;top:0;z-index:1}"),$.render=function(v,y,C,A,We,Ge){return openBlock(),createElementBlock("div",{class:"saturation",style:normalizeStyle(v.saturationStyle),onMousedown:y[0]||(y[0]=withModifiers(function(){return v.onSelect&&v.onSelect.apply(v,arguments)},["prevent","stop"]))},[Y,J,createBaseVNode("div",{class:"slider",style:normalizeStyle(v.sliderStyle)},null,4)],36)},$.__scopeId="data-v-24517fec",$.__file="src/picker/Saturation.vue";var X=defineComponent({name:"Hue",props:{width:{type:Number,default:15},height:{type:Number,default:160},hue:{type:Number,default:0}},emits:["change"],setup:function(v,y){var C=y.emit,A=computed(function(){return{top:"".concat((1-v.hue/360)*v.height-2,"px"),height:"".concat(4,"px")}}),We=ref();return onMounted(function(){(function(){We.value.width=v.width,We.value.height=v.height;var Ge=We.value.getContext("2d"),Xe=Ge.createLinearGradient(0,0,0,v.height);Xe.addColorStop(0,"#FF0000"),Xe.addColorStop(.17,"#FF00FF"),Xe.addColorStop(.34,"#0000FF"),Xe.addColorStop(.51,"#00FFFF"),Xe.addColorStop(.68,"#00FF00"),Xe.addColorStop(.17*5,"#FFFF00"),Xe.addColorStop(1,"#FF0000"),Ge.fillStyle=Xe,Ge.fillRect(0,0,v.width,v.height)})()}),{canvas:We,sliderStyle:A,onSelect:function(Ge){var Xe=Ge.target.getBoundingClientRect().top,Ve=function(P){var Te=P.clientY-Xe;Te<0&&(Te=0),Te>v.height&&(Te=v.height);var j=-100*Te/v.height+100;C("change",360*j/100)};Ve(Ge),document.addEventListener("mousemove",Ve),document.addEventListener("mouseup",function P(){document.removeEventListener("mousemove",Ve),document.removeEventListener("mouseup",P)})}}}}),q={ref:"canvas"};W(".hue[data-v-78b9f4f0]{position:relative}.slider[data-v-78b9f4f0]{background:#fff;box-shadow:0 0 1px 0 rgba(0,0,0,.3);left:0;pointer-events:none;position:absolute;width:100%;z-index:1}"),X.render=function(v,y,C,A,We,Ge){return openBlock(),createElementBlock("div",{class:"hue",onMousedown:y[0]||(y[0]=withModifiers(function(){return v.onSelect&&v.onSelect.apply(v,arguments)},["prevent","stop"]))},[createBaseVNode("canvas",q,null,512),createBaseVNode("div",{class:"slider",style:normalizeStyle(v.sliderStyle)},null,4)],32)},X.__scopeId="data-v-78b9f4f0",X.__file="src/picker/Hue.vue";var U=defineComponent({name:"Alpha",props:{width:{type:Number,default:15},height:{type:Number,default:160},color:{type:String,default:"#000000"},alpha:{type:Number,default:1}},setup:function(v,y){var C=y.emit,A=computed(function(){return{top:"".concat(v.alpha*v.height-2,"px"),height:"".concat(4,"px")}}),We=ref(),Ge=function(){var Xe=We.value.getContext("2d");We.value.width=v.width,We.value.height=v.height;var Ve=function(Te){var j=document.createElement("canvas"),x=j.getContext("2d"),qe=2*Te;return j.width=qe,j.height=qe,x.fillStyle="#ffffff",x.fillRect(0,0,qe,qe),x.fillStyle="#ccd5db",x.fillRect(0,0,Te,Te),x.fillRect(Te,Te,Te,Te),j}(5);Xe.fillStyle=Xe.createPattern(Ve,"repeat"),Xe.fillRect(0,0,v.width,v.height);var P=Xe.createLinearGradient(0,0,0,v.height);P.addColorStop(.01,"rgba(255,255,255,0)"),P.addColorStop(.99,v.color),Xe.fillStyle=P,Xe.fillRect(0,0,v.width,v.height)};return watch(function(){return v.color},function(){Ge()}),onMounted(function(){Ge()}),{canvas:We,sliderStyle:A,onSelect:function(Xe){var Ve=Xe.target.getBoundingClientRect().top,P=function(Te){var j=Te.clientY-Ve;j<0&&(j=0),j>v.height&&(j=v.height);var x=parseFloat((j/v.height).toFixed(2));C("change",x)};P(Xe),document.addEventListener("mousemove",P),document.addEventListener("mouseup",function Te(){document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",Te)})}}}}),K={ref:"canvas"};W(".alpha[data-v-24dc9656]{position:relative}.slider[data-v-24dc9656]{background:#fff;box-shadow:0 0 1px 0 rgba(0,0,0,.3);left:0;pointer-events:none;position:absolute;width:100%;z-index:1}"),U.render=function(v,y,C,A,We,Ge){return openBlock(),createElementBlock("div",{class:"alpha",onMousedown:y[0]||(y[0]=withModifiers(function(){return v.onSelect&&v.onSelect.apply(v,arguments)},["prevent","stop"]))},[createBaseVNode("canvas",K,null,512),createBaseVNode("div",{class:"slider",style:normalizeStyle(v.sliderStyle)},null,4)],32)},U.__scopeId="data-v-24dc9656",U.__file="src/picker/Alpha.vue";var Q=defineComponent({name:"Input",props:{label:{type:String,default:"RGBA"},value:{type:String,default:""},width:{type:Number,default:168}},emits:["change","focus","blur","enter"],setup:function(v,y){var C=y.emit;return{onInput:function(A){var We;C("change",(We=A.target)===null||We===void 0?void 0:We.value)},valueStyle:computed(function(){return{minWidth:"".concat(v.width,"px"),maxWidth:"".concat(v.width,"px"),width:"".concat(v.width,"px")}}),onFocus:function(){C("focus")},onBlur:function(){C("blur")},onEnter:function(){C("enter")}}}}),Z={class:"input"},ee={class:"label"},te=[".value"];function re(v,y){return function(C){if(Array.isArray(C))return C}(v)||function(C,A){var We=C==null?null:typeof Symbol!="undefined"&&C[Symbol.iterator]||C["@@iterator"];if(We!=null){var Ge,Xe,Ve,P,Te=[],j=!0,x=!1;try{if(Ve=(We=We.call(C)).next,A===0){if(Object(We)!==We)return;j=!1}else for(;!(j=(Ge=Ve.call(We)).done)&&(Te.push(Ge.value),Te.length!==A);j=!0);}catch(qe){x=!0,Xe=qe}finally{try{if(!j&&We.return!=null&&(P=We.return(),Object(P)!==P))return}finally{if(x)throw Xe}}return Te}}(v,y)||E(v,y)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ne(v,y){var C=Object.keys(v);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(v);y&&(A=A.filter(function(We){return Object.getOwnPropertyDescriptor(v,We).enumerable})),C.push.apply(C,A)}return C}function oe(v){for(var y=1;y<arguments.length;y++){var C=arguments[y]!=null?arguments[y]:{};y%2?ne(Object(C),!0).forEach(function(A){G(v,A,C[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(C)):ne(Object(C)).forEach(function(A){Object.defineProperty(v,A,Object.getOwnPropertyDescriptor(C,A))})}return v}W(".input[data-v-d52a4d02]{display:inline-block;font-size:12px}.label[data-v-d52a4d02]{align-items:center;background:#e7e8e9;color:#999;display:flex;float:left;font-weight:500;height:30px;justify-content:center;width:45px}[pick-colors-theme=dark] .label[data-v-d52a4d02]{background:#252930;color:#999}.value[data-v-d52a4d02]{background:#eceef0;border:1px solid #eceef0;box-sizing:border-box;color:#666;flex:1;height:30px;text-align:center}[pick-colors-theme=dark] .value[data-v-d52a4d02]{background:#2e333a;border:1px solid #2e333a;color:#fff}.value[data-v-d52a4d02]:focus{border:1px solid #1890ff;outline:none}"),Q.render=function(v,y,C,A,We,Ge){return openBlock(),createElementBlock("div",Z,[createBaseVNode("span",ee,toDisplayString(v.label),1),createBaseVNode("input",{class:"value",style:normalizeStyle(v.valueStyle),".value":v.value,onFocus:y[0]||(y[0]=function(){return v.onFocus&&v.onFocus.apply(v,arguments)}),onInput:y[1]||(y[1]=function(){return v.onInput&&v.onInput.apply(v,arguments)}),onBlur:y[2]||(y[2]=function(){return v.onBlur&&v.onBlur.apply(v,arguments)}),onKeydown:y[3]||(y[3]=withKeys(function(){return v.onEnter&&v.onEnter.apply(v,arguments)},["enter"]))},null,44,te)])},Q.__scopeId="data-v-d52a4d02",Q.__file="src/picker/InputValue.vue";var ae=function(v,y,C){return[v,y*C/((v=(2-y)*C)<1?v:2-v)||0,v/2]},ie={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},le=function(v){v=Math.min(Math.round(v),255);var y=Math.floor(v/16),C=v%16;return"".concat(ie[y]||y).concat(ie[C]||C)},ce=function(v){var y=v.r,C=v.g,A=v.b;return isNaN(y)||isNaN(C)||isNaN(A)?"":"#".concat(le(y)).concat(le(C)).concat(le(A))},ue=function(v,y){var C;typeof(C=v)=="string"&&C.indexOf(".")!==-1&&parseFloat(C)===1&&(v="100%");var A=function(We){return typeof We=="string"&&We.indexOf("%")!==-1}(v);return v=Math.min(y,Math.max(0,parseFloat("".concat(v)))),A&&(v=parseInt("".concat(v*y),10)/100),Math.abs(v-y)<1e-6?1:v%y/parseFloat(y)},se=function(v,y,C){v=6*ue(v,360),y=ue(y,100),C=ue(C,100);var A=Math.floor(v),We=v-A,Ge=C*(1-y),Xe=C*(1-We*y),Ve=C*(1-(1-We)*y),P=A%6,Te=[C,Xe,Ge,Ge,Ve,C][P],j=[Ve,C,C,Xe,Ge,Ge][P],x=[Ge,Ge,Ve,C,C,Xe][P];return{r:Math.round(255*Te),g:Math.round(255*j),b:Math.round(255*x)}},fe=function(v,y,C){var A=v.h,We=v.s,Ge=v.v,Xe=v.a;if(C)switch(y){case"hsl":var Ve=ae(A,We/100,Ge/100);return"hsla(".concat(A.toFixed(0),", ").concat(Math.round(100*Ve[1]),"%, ").concat(Math.round(100*Ve[2]),"%, ").concat(Xe,")");case"hsv":return"hsva(".concat(A.toFixed(0),", ").concat(Math.round(We),"%, ").concat(Math.round(Ge),"%, ").concat(Xe,")");case"rgb":var P=se(A,We,Ge),Te=P.r,j=P.g,x=P.b;return"rgba(".concat(Te,", ").concat(j,", ").concat(x,", ").concat(Xe,")");default:return"".concat(ce(se(A,We,Ge))).concat(le(255*Xe))}else switch(y){case"hsl":var qe=ae(A,We/100,Ge/100);return"hsl(".concat(A.toFixed(0),", ").concat(Math.round(100*qe[1]),"%, ").concat(Math.round(100*qe[2]),"%)");case"hsv":return"hsv(".concat(A.toFixed(0),", ").concat(Math.round(We),"%, ").concat(Math.round(Ge),"%)");case"rgb":var Be=se(A,We,Ge),De=Be.r,He=Be.g,Ye=Be.b;return"rgb(".concat(De,", ").concat(He,", ").concat(Ye,")");default:return ce(se(A,We,Ge))}},de=function(v){var y=v.r,C=v.g,A=v.b;y=ue(y,255),C=ue(C,255),A=ue(A,255);var We,Ge=Math.max(y,C,A),Xe=Math.min(y,C,A),Ve=Ge,P=Ge-Xe,Te=Ge===0?0:P/Ge;if(Ge===Xe)We=0;else{switch(Ge){case y:We=(C-A)/P+(C<A?6:0);break;case C:We=(A-y)/P+2;break;case A:We=(y-C)/P+4}We/=6}return{h:360*We,s:100*Te,v:100*Ve}},pe=function(v){var y=v.h,C=v.s,A=v.l;A/=100;var We=C/=100,Ge=Math.max(A,.01);return C*=(A*=2)<=1?A:2-A,We*=Ge<=1?Ge:2-Ge,{h:+y,s:100*(A===0?2*We/(Ge+We):2*C/(A+C)),v:100*((A+C)/2)}},he=function(v){var y=[];if(v.match(/^#([0-9a-fA-f]{3,4})$/g))for(var C=1;C<v.length;C++)y.push(parseInt("0x"+v[C].repeat(2)));else if(v.match(/^#([0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/g))for(var A=1;A<v.length;A+=2)y.push(parseInt("0x"+v.slice(A,A+2)));return{r:y[0],g:y[1],b:y[2],a:y[3]}},ve=function(v,y,C){if(typeof v=="string"&&v!==""){var A=be(v,we(v),C),We=xe(A);return fe(We,y,C)}return""},me=function(v){var y=re(v.match(/(\d(\.\d+)?)+/g),4);return{r:y[0],g:y[1],b:y[2],a:y[3]}},ge=function(v){var y=re(v.match(/(\d(\.\d+)?)+/g),4),C=y[0],A=y[1],We=y[2],Ge=y[3];return{h:C,s:parseFloat(A),l:parseFloat(We),a:Ge}},ye=function(v){var y=re(v.match(/(\d(\.\d+)?)+/g),4),C=y[0],A=y[1],We=y[2],Ge=y[3];return{h:parseFloat(C),s:parseFloat(A),v:parseFloat(We),a:parseFloat(Ge)}},be=function(v,y){if(!(arguments.length>2&&arguments[2]!==void 0)||arguments[2])switch(y){case"rgb":var C=me(v),A=C.r,We=C.g,Ge=C.b,Xe=C.a;return oe(oe({},de({r:A,g:We,b:Ge})),{},{a:+Xe});case"hsv":var Ve=ye(v);return{h:Ve.h,s:Ve.s,v:Ve.v,a:Ve.a};case"hsl":var P=ge(v),Te=P.h,j=P.s,x=P.l,qe=P.a;return oe(oe({},pe({h:Te,s:j,l:x})),{},{a:+qe});default:var Be=he(v),De=Be.r,He=Be.g,Ye=Be.b,st=Be.a;return oe(oe({},de({r:De,g:He,b:Ye})),{},{a:st/255})}else switch(y){case"rgb":return oe(oe({},de(me(v))),{},{a:1});case"hsv":var rt=ye(v);return{h:rt.h,s:rt.s,v:rt.v,a:1};case"hsl":return oe(oe({},pe(ge(v))),{},{a:1});default:return oe(oe({},de(he(v))),{},{a:1})}},we=function(v){return v.match(/^#/)?"hex":v.match(/^rgb/)?"rgb":v.match(/^hsl/)?"hsl":v.match(/^hsv/)?"hsv":"hex"},xe=function(v){var y=v.h,C=v.s,A=v.v,We=v.a;return isNaN(y)&&(y=0),isNaN(C)&&(C=0),isNaN(A)&&(A=0),isNaN(We)&&(We=1),{h:y,s:C,v:A,a:We}},Se=defineComponent({name:"ColorItem",props:{size:{type:[Number,String],default:20},width:{type:[Number,String]},height:{type:[Number,String]},value:{type:String,default:""},border:{type:Boolean,default:!0},borderRadius:{type:Number,default:5},selected:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1}},emits:["select"],setup:function(v){var y=ref(),C=inject("theme",{theme:"light"}).theme,A=computed(function(){return parseFloat((v.width||v.size)+"")}),We=computed(function(){return parseFloat((v.height||v.size)+"")}),Ge=computed(function(){return{width:"".concat(unref(A),"px"),height:"".concat(unref(We),"px"),border:v.border?"1px solid ".concat(unref(C)==="dark"?"#434345":"#d9d9d9"):"",borderRadius:"".concat(v.borderRadius,"px"),boxShadow:v.selected?"0 0 3px 2px ".concat(unref(C)==="dark"?"#2681ff":"#1890ff"):""}}),Xe=function(){var Ve=y.value.getContext("2d");y.value.width=unref(A),y.value.height=unref(We);var P=function(Te){var j=document.createElement("canvas"),x=j.getContext("2d"),qe=2*Te;return j.width=qe,j.height=qe,x.fillStyle="#ffffff",x.fillRect(0,0,qe,qe),x.fillStyle="#ccd5db",x.fillRect(0,0,Te,Te),x.fillRect(Te,Te,Te,Te),j}(5);Ve.fillStyle=Ve.createPattern(P,"repeat"),Ve.fillRect(0,0,unref(A),unref(We)),Ve.fillStyle=v.value,Ve.fillRect(0,0,unref(A),unref(We))};return watch(function(){return v.value},function(){Xe()}),onMounted(function(){Xe()}),{canvas:y,colorItemStyle:Ge}}}),ke=["draggable"];W(".color-item[data-v-02da71fd]{display:inline-block;vertical-align:top}"),Se.render=function(v,y,C,A,We,Ge){return openBlock(),createElementBlock("canvas",{class:"color-item",style:normalizeStyle(v.colorItemStyle),ref:"canvas",draggable:v.draggable},null,12,ke)},Se.__scopeId="data-v-02da71fd",Se.__file="src/color-item/ColorItem.vue";var Ce=defineComponent({name:"Colors",components:{ColorItem:Se},props:{colors:{type:Array,default:function(){return[]}},selectedIndex:{type:Number,default:-1}},emits:["change"],setup:function(v,y){var C=y.emit;return{onSelectColor:function(A,We){C("change",A,We)},useColors:computed(function(){return v.colors.map(function(A){return ve(A,"hex",!0)})})}}}),Oe={class:"colors"};function Ie(v,y){var C=Object.keys(v);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(v);y&&(A=A.filter(function(We){return Object.getOwnPropertyDescriptor(v,We).enumerable})),C.push.apply(C,A)}return C}function Ae(v){for(var y=1;y<arguments.length;y++){var C=arguments[y]!=null?arguments[y]:{};y%2?Ie(Object(C),!0).forEach(function(A){G(v,A,C[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(C)):Ie(Object(C)).forEach(function(A){Object.defineProperty(v,A,Object.getOwnPropertyDescriptor(C,A))})}return v}W(".colors[data-v-0f8b52a8]{align-items:center;display:flex;flex-wrap:wrap;margin-top:5px}.color-item[data-v-0f8b52a8]{margin:5px}"),Ce.render=function(v,y,C,A,We,Ge){var Xe=resolveComponent("color-item");return openBlock(),createElementBlock("div",Oe,[(openBlock(!0),createElementBlock(Fragment,null,renderList(v.useColors,function(Ve,P){return openBlock(),createBlock(Xe,{key:P,class:"color-item",size:16,value:Ve,border:!1,"border-radius":3,selected:v.selectedIndex===P,onClick:withModifiers(function(Te){return v.onSelectColor(Ve,+P)},["stop","prevent"])},null,8,["value","selected","onClick"])}),128))])},Ce.__scopeId="data-v-0f8b52a8",Ce.__file="src/picker/Colors.vue";var Pe=defineComponent({name:"Picker",components:{Colors:Ce,Saturation:$,Hue:X,Alpha:U,InputValue:Q},props:{format:{type:String,default:"hex"},showAlpha:{type:Boolean,default:!1},value:{type:String,default:""},colors:{type:Array,default:function(){return[]}},style:{type:Object,default:function(){return{}}}},emits:["change","update:value"],setup:function(v,y){var C=y.emit,A=computed(function(){return Ae(Ae({},v.style),{},{width:v.showAlpha?"230px":"205px"})}),We=computed(function(){return v.showAlpha?165:140}),Ge=ref(),Xe=ref(),Ve=ref(),P=function(){var rt,Ke=(rt=v.value)===null||rt===void 0?void 0:rt.trim();if(Ke!=null&&Ke!==""){var tt=we(Ke);return xe(be(Ke,tt,v.showAlpha))}return null};watch(function(){return v.value},function(){v.value!==unref(Ve)&&(Ge.value=P())},{immediate:!0}),watch(Ge,function(rt,Ke){var tt="";rt!=null?(tt=fe(Ae({},rt),v.format,v.showAlpha),Xe.value=Ae({},rt)):Xe.value=null,Ve.value=tt;var at=P();JSON.stringify(rt)!==JSON.stringify(at)&&JSON.stringify(rt)!==JSON.stringify(Ke)&&C("change",tt)},{immediate:!0});var Te=computed(function(){var rt;return((rt=unref(Ge))===null||rt===void 0?void 0:rt.h)||0}),j=computed(function(){var rt;return((rt=unref(Ge))===null||rt===void 0?void 0:rt.s)||0}),x=computed(function(){var rt;return((rt=unref(Ge))===null||rt===void 0?void 0:rt.v)||0}),qe=computed(function(){var rt,Ke;return((rt=unref(Ge))===null||rt===void 0?void 0:rt.a)!=null?(Ke=unref(Ge))===null||Ke===void 0?void 0:Ke.a:1}),Be=computed(function(){return se(unref(Te),unref(j),unref(x))}),De=computed(function(){return"rgb(".concat(unref(Be).r,", ").concat(unref(Be).g,", ").concat(unref(Be).b,")")}),He=computed(function(){var rt=v.format;if(v.showAlpha)switch(rt){case"hsv":return"HSVA";case"hsl":return"HSLA";case"rgb":return"RGBA";default:return"HEX"}else switch(rt){case"hsv":return"HSV";case"hsl":return"HSL";case"rgb":return"RGB";default:return"HEX"}}),Ye=ref(-1),st=function(rt,Ke,tt){if(rt.length!==0){var at=be(rt,Ke,tt),et=at.h,Ot=at.s,wt=at.v;if(!(isNaN(et)||isNaN(Ot)||isNaN(wt))){var xt=1,it=at.a;isNaN(it)||(xt=it),Ge.value={h:et,s:Ot,v:wt,a:xt}}}};return{h:Te,s:j,v:x,a:qe,rgbStr:De,onSelectSaturation:function(rt,Ke){Ye.value=-1,unref(Ge)==null?Ge.value={h:unref(Te),s:rt,v:Ke,a:unref(qe)}:Ge.value=Ae(Ae({},unref(Ge)),{},{s:rt,v:Ke})},onSelectHue:function(rt){Ye.value=-1,unref(Ge)==null&&(Ge.value={h:rt,s:unref(j),v:unref(x),a:unref(qe)}),Ge.value=Ae(Ae({},unref(Ge)),{},{h:rt})},onSelectAlpha:function(rt){Ye.value=-1,unref(Ge)==null?Ge.value={h:unref(Te),s:unref(j),v:unref(x),a:rt}:Ge.value=Ae(Ae({},unref(Ge)),{},{a:rt})},label:He,colorValue:Ve,pickerStyle:A,inputWidth:We,onInputChange:function(rt){Ye.value=-1,Ve.value=rt},handleChange:function(){var rt,Ke=(rt=unref(Ve))===null||rt===void 0?void 0:rt.trim();if(Ke!==""){var tt=v.showAlpha,at=v.format,et=function(Ot,wt,xt){if(xt)switch(wt){case"rgb":return/^[rR][gG][Bb][Aa][(]([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*(1|1.0|0|0.[0-9]|0.[0-9][0-9])[\s]*[)]{1}$/.test(Ot);case"hsv":return/^[hH][Ss][Vv][Aa][(]([\s]*(2[0-9][0-9]|360｜3[0-5][0-9]|[01]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*(1|1.0|0|0.[0-9]|0.[0-9][0-9])[\s]*)[)]$/.test(Ot);case"hsl":return/^[hH][Ss][Ll][Aa][(]([\s]*(2[0-9][0-9]|360｜3[0-5][0-9]|[01]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*(1|1.0|0|0.[0-9]|0.[0-9][0-9])[\s]*)[)]$/.test(Ot);default:return/^#([0-9a-fA-f]{4}|[0-9a-fA-F]{8})$/g.test(Ot)}else switch(wt){case"rgb":return/^[rR][gG][Bb][(]([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){2}[\s]*(2[0-4]\d|25[0-5]|[01]?\d\d?)[\s]*[)]{1}$/.test(Ot);case"hsv":return/^[hH][Ss][Vv][(]([\s]*(2[0-9][0-9]|360｜3[0-5][0-9]|[01]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*)[)]$/.test(Ot);case"hsl":return/^[hH][Ss][Ll][(]([\s]*(2[0-9][0-9]|360｜3[0-5][0-9]|[01]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*)[)]$/.test(Ot);default:return/^#([0-9a-fA-f]{3}|[0-9a-fA-F]{6})$/g.test(Ot)}}(Ke,at,tt);et?st(Ke,at,tt):unref(Xe)!=null?Ge.value=unref(Xe):Ve.value=""}else Ge.value=null},selectColorIndex:Ye,onSelectColor:function(rt,Ke){if(Ye.value=Ke,(rt=rt.trim())==="")Ge.value=null;else{var tt=we(rt);tt?st(rt,tt,!0):Ge.value=null}}}}}),je={class:"picker-inner"},_e={class:"picker-header"};W(".picker[data-v-6ceadec6]{background:#f7f8f9;border-radius:4px;box-shadow:0 0 16px 0 rgba(0,0,0,.16)}.picker-inner[data-v-6ceadec6]{padding:10px}[pick-colors-theme=dark] .picker-inner[data-v-6ceadec6]{background:#1d2024;box-shadow:0 0 16px 0 rgba(0,0,0,.16)}.picker-header[data-v-6ceadec6]{display:flex;margin-bottom:5px}.alpha[data-v-6ceadec6],.hue[data-v-6ceadec6]{margin-left:10px}.colors[data-v-6ceadec6]{margin-top:5px}"),Pe.render=function(v,y,C,A,We,Ge){var Xe=resolveComponent("saturation"),Ve=resolveComponent("hue"),P=resolveComponent("alpha"),Te=resolveComponent("input-value"),j=resolveComponent("Colors");return openBlock(),createElementBlock("div",{class:"picker",style:normalizeStyle(v.pickerStyle)},[createBaseVNode("div",je,[createBaseVNode("div",_e,[createVNode(Xe,{class:"saturation",hue:v.h,saturation:v.s,value:v.v,onChange:v.onSelectSaturation},null,8,["hue","saturation","value","onChange"]),createVNode(Ve,{class:"hue",hue:v.h,onChange:v.onSelectHue},null,8,["hue","onChange"]),v.showAlpha?(openBlock(),createBlock(P,{key:0,class:"alpha",alpha:v.a,color:v.rgbStr,onChange:v.onSelectAlpha},null,8,["alpha","color","onChange"])):createCommentVNode("v-if",!0)]),createVNode(Te,{label:v.label,value:v.colorValue,width:v.inputWidth,onChange:v.onInputChange,onBlur:v.handleChange,onEnter:v.handleChange},null,8,["label","value","width","onChange","onBlur","onEnter"]),v.colors.length>0?(openBlock(),createBlock(j,{key:0,class:"colors",colors:v.colors,"selected-index":v.selectColorIndex,onChange:v.onSelectColor},null,8,["colors","selected-index","onChange"])):createCommentVNode("v-if",!0)])],4)},Pe.__scopeId="data-v-6ceadec6",Pe.__file="src/picker/Picker.vue";var Ne=defineComponent({name:"AddColorItem",props:{size:{type:Number,default:20},selected:{type:Boolean,default:!1}},setup:function(v){var y=inject("theme",{theme:"light"}).theme;return{addColorItemStyle:computed(function(){return{width:"".concat(v.size,"px"),height:"".concat(v.size,"px"),lineHeight:"".concat(v.size,"px"),boxShadow:v.selected?"0 0 3px 2px ".concat(unref(y)==="dark"?"#2681ff":"#1890ff"):""}})}}}),Ee=[function(v){return pushScopeId("data-v-ceb1719c"),v=v(),popScopeId(),v}(function(){return createBaseVNode("g",{class:"container"},[createBaseVNode("path",{d:"M544 464V160h-80v304H160v80h304v304h80V544h304v-80z"})],-1)})];function Fe(v,y){var C=Object.keys(v);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(v);y&&(A=A.filter(function(We){return Object.getOwnPropertyDescriptor(v,We).enumerable})),C.push.apply(C,A)}return C}function Le(v){for(var y=1;y<arguments.length;y++){var C=arguments[y]!=null?arguments[y]:{};y%2?Fe(Object(C),!0).forEach(function(A){G(v,A,C[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(C)):Fe(Object(C)).forEach(function(A){Object.defineProperty(v,A,Object.getOwnPropertyDescriptor(C,A))})}return v}W(".add-color-item[data-v-ceb1719c]{background:#fff;border:1px solid #d9d9d9;border-radius:5px;vertical-align:top}.container[data-v-ceb1719c]{pointer-events:none;transform:scale(.9);transform-origin:center}[pick-colors-theme=dark] .add-color-item[data-v-ceb1719c]{background:#141414;border:1px solid #434343}path[data-v-ceb1719c]{fill:#000}[pick-colors-theme=dark] path[data-v-ceb1719c]{fill:#fff}"),Ne.render=function(v,y,C,A,We,Ge){return openBlock(),createElementBlock("svg",{style:normalizeStyle(v.addColorItemStyle),class:"add-color-item",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[].concat(Ee),4)},Ne.__scopeId="data-v-ceb1719c",Ne.__file="src/add-color-item/AddColorItem.vue";var ze=null,Me=defineComponent({name:"ColorPicker",components:{ColorItem:Se,Picker:Pe,AddColorItem:Ne},props:{value:{type:[String,Array]},theme:{type:String,default:"light"},size:{type:[Number,String],default:20},width:{type:[Number,String]},height:{type:[Number,String]},format:{type:String,default:"hex"},showPicker:{type:Boolean,default:void 0},showAlpha:{type:Boolean,default:!1},addColor:{type:Boolean,default:!1},deleteColor:{type:Boolean,default:!0},max:{type:Number,default:13},popupContainer:{type:[String,Object,Boolean]},zIndex:{type:Number,default:1e3},colors:{type:Array,default:function(){return["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","#ff4500","#ff7d4d","#00babd","#1f93ff","#fa64c3"]}}},emits:["change","update:value","update:showPicker","overflowMax","closePicker"],setup:function(v,y){var C=y.emit,A=ref([]),We=computed(function(){return unref(A).map(function(Ht){return ve(Ht,"hex",v.showAlpha)})});watch(function(){return v.value},function(){var Ht=v.value||"",an=Array.isArray(Ht)?Ht:[Ht];A.value=an.map(function(Mt){return ve(Mt,v.format,v.showAlpha)})},{immediate:!0});var Ge=ref(void 0),Xe=computed(function(){return unref(A)[unref(Ge)]}),Ve=ref(!1);watch(function(){return v.showPicker},function(){Ve.value=v.showPicker},{immediate:!0});var P,Te,j,x,qe,Be,De,He=ref(null),Ye=ref(null),st=(P=He,Te=Ye,j={zIndex:v.zIndex},x=ref({}),qe={strategy:"absolute",placement:"auto",onFirstUpdate:function(){ze.update()},modifiers:[{name:"offset",options:{offset:[0,5]}},{name:"computeStyles",options:{gpuAcceleration:!1,adaptive:!0}},{name:"flip",options:{fallbackPlacements:["top"],allowedAutoPlacements:["top","bottom"]}},{name:"applyStyles",enabled:!1},{name:"updateState",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(Ht){var an=Ht.state,Mt=an.styles,vn=an.placement,Wn=Mt.popper;x.value=Le(Le(Le({},Wn),j),{},{transformOrigin:vn==="top"?"center bottom":""})}}]},watch(function(){return[unref(P),unref(Te)]},function(Ht,an){var Mt,vn=re(Ht,2),Wn=vn[0],$e=vn[1],Dt=re(an,2),vt=Dt[0],nn=Dt[1];if(Wn&&$e&&(vt!==Wn||nn!==vt)){(Mt=ze)===null||Mt===void 0||Mt.destroy();var _t=Wn.$el||Wn,Nt=$e.$el||$e;nextTick(function(){ze=createPopper(_t,Nt,qe)})}}),onBeforeUnmount(function(){var Ht;ze&&((Ht=ze)===null||Ht===void 0||Ht.destroy(),ze=null)}),{instance:ze,style:x}),rt=st.style,Ke=function(){unref(He)==null&&(He.value=unref(Et)[0],Ge.value=0),v.showPicker===void 0?Ve.value=!0:C("update:showPicker",!0)},tt=function(){Ge.value=void 0,v.showPicker===void 0?Ve.value=!1:C("update:showPicker",!1),C("closePicker",toRaw(Array.isArray(v.value)||v.addColor?unref(A):unref(A)[0]))},at=ref(),et=function(){var Ht=M(T.mark(function an(Mt){var vn,Wn,$e,Dt;return T.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:if(Wn=Mt.target,($e=(vn=Wn.dataset)===null||vn===void 0?void 0:vn.index)!=null&&$e!==""){vt.next=4;break}return vt.abrupt("return");case 4:if(Dt=+$e,unref(Ge)!==Dt){vt.next=7;break}return vt.abrupt("return");case 7:unref(Ge)!=null&&unref(Ge)!==Dt?(tt(),Be&&clearTimeout(Be),Be=setTimeout(function(){Ke(),clearTimeout(Be)},100)):Ke(),Ge.value=Dt,He.value=Wn;case 10:case"end":return vt.stop()}},an)}));return function(an){return Ht.apply(this,arguments)}}(),Ot=function(){var Ht=M(T.mark(function an(Mt){var vn,Wn,$e,Dt,vt;return T.wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(Dt=Mt.target,!(!((vn=unref(at))!==null&&vn!==void 0&&vn.isEqualNode(Dt))&&(!((Wn=unref(at))===null||Wn===void 0)&&Wn.contains(Dt)))){nn.next=4;break}return nn.abrupt("return");case 4:if(vt=($e=unref(Ye))===null||$e===void 0?void 0:$e.$el,!(vt!=null&&vt.contains(Dt))){nn.next=8;break}return nn.abrupt("return");case 8:De&&clearTimeout(De),De=setTimeout(function(){unref(Ve)&&tt()},0);case 10:case"end":return nn.stop()}},an)}));return function(an){return Ht.apply(this,arguments)}}();watch(Ve,function(){unref(Ve)&&(Ke(),clearTimeout(De))});var wt,xt=ref(v.max>unref(A).length),it=computed(function(){return typeof v.popupContainer=="string"||L(v.popupContainer)==="object"&&v.popupContainer!=null?v.popupContainer:"body"}),yt=computed(function(){return typeof v.popupContainer=="boolean"&&v.popupContainer===!1}),ut=computed(function(){return v.theme});watch(function(){return[v.theme,unref(Ye)]},function(){nextTick(function(){var Ht,an;(Ht=unref(at))===null||Ht===void 0||Ht.setAttribute("pick-colors-theme",unref(ut)),(an=unref(Ye))===null||an===void 0||(an=an.$el)===null||an===void 0||an.setAttribute("pick-colors-theme",unref(ut))})},{immediate:!0}),provide("theme",{theme:ut});var Et=ref([]);return onMounted(function(){document.addEventListener("mouseup",Ot,!1),v.showPicker&&Ke()}),onUnmounted(function(){document.removeEventListener("mouseup",Ot,!1),Be&&(clearTimeout(Be),Be=null),De&&(clearTimeout(De),De=null)}),{valueList:A,colorItemSelected:function(Ht){return(v.addColor?unref(A).length>0:unref(A).length>1)&&unref(Ge)===Ht},selectedColor:Xe,selectedIndex:Ge,isShowPicker:Ve,addColorItemShow:xt,onPickerChange:function(Ht){var an=unref(Ge),Mt=unref(A).slice(),vn=unref(A).length;if(an!=null){an>=0?Mt[an]=Ht:(Ge.value=vn,Mt.push(Ht));var Wn="";Wn=Array.isArray(v.value)||v.addColor?Mt:Ht,v.value===void 0?A.value=Array.isArray(Wn)?Wn:[Wn]:(C("update:value",Wn),C("change",Wn,Ht,an)),v.addColor&&vn>=v.max&&(xt.value=!1,C("overflowMax"))}},colorPicker:at,onColorClick:et,pickerRef:Ye,onColorItemDragStart:function(Ht){Ht.dataTransfer.effectAllowed="move";var an=Ht.target;wt=+an.dataset.index},onColorItemDragOver:function(Ht){},onColorItemDrop:function(Ht){var an=+Ht.target.dataset.index,Mt=F(unref(A)),vn=Mt[wt];Mt.splice(wt,1);var Wn=Mt.slice(0,an),$e=Mt.splice(an),Dt=Wn.concat([vn]).concat($e);C("update:value",Dt),C("change",Dt,Dt[wt],wt)},colorItemsRef:Et,pickerStyle:rt,values:We,teleportDisabled:yt,toPopupContainer:it}}});W(".color-picker[data-v-3c43ade8]{display:inline-block}.color-item[data-v-3c43ade8]{margin:5px}.add-color-item[data-v-3c43ade8]{display:inline-block;margin:5px}.picker[data-v-3c43ade8]{overflow:hidden}.v-enter-active[data-v-3c43ade8],.v-leave-active[data-v-3c43ade8]{opacity:1;transform:scaleY(1);transform-origin:center top;transition:opacity .2s ease-in-out,transform .2s ease-in-out}.v-enter-from[data-v-3c43ade8],.v-leave-to[data-v-3c43ade8]{opacity:0;transform:scaleY(0)}"),Me.render=function(v,y,C,A,We,Ge){var Xe=resolveComponent("color-item"),Ve=resolveComponent("add-color-item"),P=resolveComponent("picker");return openBlock(),createElementBlock("div",{class:"color-picker",ref:"colorPicker",onDragstart:y[0]||(y[0]=withModifiers(function(){return v.onColorItemDragStart&&v.onColorItemDragStart.apply(v,arguments)},["stop"])),onDragover:y[1]||(y[1]=withModifiers(function(){return v.onColorItemDragOver&&v.onColorItemDragOver.apply(v,arguments)},["prevent","stop"])),onDrop:y[2]||(y[2]=withModifiers(function(){return v.onColorItemDrop&&v.onColorItemDrop.apply(v,arguments)},["prevent","stop"])),onClick:y[3]||(y[3]=withModifiers(function(){return v.onColorClick&&v.onColorClick.apply(v,arguments)},["stop"]))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(v.values,function(Te,j){return openBlock(),createBlock(Xe,{class:"color-item",key:j,ref_for:!0,ref:function(x){return v.colorItemsRef[j]=x},size:v.size,width:v.width,height:v.height,value:Te,selected:v.colorItemSelected(j),"data-index":j,draggable:v.valueList.length>1,format:v.format},null,8,["size","width","height","value","selected","data-index","draggable","format"])}),128)),v.addColor&&v.addColorItemShow?(openBlock(),createBlock(Ve,{key:0,class:"add-color-item",ref:"addColorItem",selected:v.colorItemSelected(-1),"data-index":-1},null,8,["selected"])):createCommentVNode("v-if",!0),(openBlock(),createBlock(Teleport,{to:v.toPopupContainer,disabled:v.teleportDisabled},[createVNode(Transition,null,{default:withCtx(function(){return[v.isShowPicker?(openBlock(),createBlock(P,{key:0,class:"picker",style:normalizeStyle(v.pickerStyle),ref:"pickerRef",value:v.selectedColor,format:v.format,"show-alpha":v.showAlpha,colors:v.colors,onChange:v.onPickerChange},null,8,["style","value","format","show-alpha","colors","onChange"])):createCommentVNode("v-if",!0)]}),_:1})],8,["to","disabled"]))],544)},Me.__scopeId="data-v-3c43ade8",Me.__file="src/ColorPicker.vue";const _sfc_main$E=defineComponent({name:"ApiRadioGroup",__name:"ApiRadioGroup",props:{api:{type:Function,default:null},params:{type:[Object,String],default:()=>({})},value:{type:[String,Number,Boolean]},isBtn:{type:[Boolean],default:!1},numberToString:propTypes.bool,resultField:propTypes.string.def(""),labelField:propTypes.string.def("label"),valueField:propTypes.string.def("value"),immediate:propTypes.bool.def(!0)},emits:["options-change","change"],setup(v,{emit:y}){const C=v,A=y,We=ref([]),Ge=ref(!1),Xe=ref(!0),Ve=ref([]),P=useAttrs(),[Te]=useRuleFormItem(C,"value","change",Ve),j=computed(()=>{const{labelField:De,valueField:He,numberToString:Ye}=C;return unref(We).reduce((st,rt)=>{if(rt){const Ke=rt[He];st.push(ua({label:rt[De],value:Ye?`${Ke}`:Ke},omit(rt,[De,He])))}return st},[])});watchEffect(()=>{C.immediate&&x()}),watch(()=>C.params,()=>{!unref(Xe)&&x()},{deep:!0});function x(){return no(this,null,function*(){const De=C.api;if(!(!De||!isFunction$1(De))){We.value=[];try{Ge.value=!0;const He=yield De(C.params);if(Array.isArray(He)){We.value=He,qe();return}C.resultField&&(We.value=get(He,C.resultField)||[]),qe()}catch(He){}finally{Ge.value=!1}}})}function qe(){A("options-change",unref(j))}function Be(...De){Ve.value=De}return(De,He)=>(openBlock(),createBlock(unref(Radio).Group,mergeProps(unref(P),{value:unref(Te),"onUpdate:value":He[0]||(He[0]=Ye=>isRef(Te)?Te.value=Ye:null),"button-style":"solid"}),{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(j.value,Ye=>(openBlock(),createElementBlock(Fragment,{key:`${Ye.value}`},[C.isBtn?(openBlock(),createBlock(unref(Radio).Button,{key:0,value:Ye.value,disabled:Ye.disabled,onClick:st=>Be(Ye)},{default:withCtx(()=>[createTextVNode(toDisplayString(Ye.label),1)]),_:2},1032,["value","disabled","onClick"])):(openBlock(),createBlock(unref(Radio),{key:1,value:Ye.value,disabled:Ye.disabled,onClick:st=>Be(Ye)},{default:withCtx(()=>[createTextVNode(toDisplayString(Ye.label),1)]),_:2},1032,["value","disabled","onClick"]))],64))),128))]),_:1},16,["value"]))}}),_sfc_main$D=defineComponent({name:"ApiSelect",inheritAttrs:!1,__name:"ApiSelect",props:{value:{type:[Array,Object,String,Number]},numberToString:propTypes.bool,api:{type:Function,default:null},params:propTypes.any.def({}),resultField:propTypes.string.def(""),labelField:propTypes.string.def("label"),valueField:propTypes.string.def("value"),immediate:propTypes.bool.def(!0),alwaysLoad:propTypes.bool.def(!1),options:{type:Array,default:[]}},emits:["options-change","change","update:value"],setup(v,{emit:y}){const C=v,A=y,We=ref([]),Ge=ref(!1),Xe=ref(!1),Ve=ref([]),{t:P}=useI18n(),[Te]=useRuleFormItem(C,"value","change",Ve),j=computed(()=>{const{labelField:Ye,valueField:st,numberToString:rt}=C;let Ke=unref(We).reduce((tt,at)=>{if(at){const et=get(at,st);tt.push(Mu(ua({},omit(at,[Ye,st])),{label:get(at,Ye),value:rt?`${et}`:et}))}return tt},[]);return Ke.length>0?Ke:C.options}),x=(Ye,st)=>st.label.toLowerCase().indexOf(Ye.toLowerCase())>=0;watch(()=>Te.value,Ye=>{A("update:value",Ye)}),watch(()=>C.params,()=>{!unref(Xe)&&qe()},{deep:!0,immediate:C.immediate});function qe(){return no(this,null,function*(){const Ye=C.api;if(!(!Ye||!isFunction$1(Ye)||Ge.value)){We.value=[];try{Ge.value=!0;const st=yield Ye(C.params);if(Xe.value=!0,Array.isArray(st)){We.value=st,De();return}C.resultField&&(We.value=get(st,C.resultField)||[]),De()}catch(st){}finally{Ge.value=!1,Xe.value=!1}}})}function Be(Ye){return no(this,null,function*(){Ye&&(C.alwaysLoad?yield qe():!C.immediate&&!unref(Xe)&&(yield qe()))})}function De(){A("options-change",unref(j))}function He(Ye,...st){Ve.value=st}return(Ye,st)=>(openBlock(),createBlock(unref(Select),mergeProps({onDropdownVisibleChange:Be},Ye.$attrs,{"show-search":"","filter-option":x,onChange:He,options:j.value,value:unref(Te),"onUpdate:value":st[0]||(st[0]=rt=>isRef(Te)?Te.value=rt:null)}),createSlots({_:2},[renderList(Object.keys(Ye.$slots),rt=>({name:rt,fn:withCtx(Ke=>[renderSlot(Ye.$slots,rt,normalizeProps(guardReactiveProps(Ke||{})))])})),Ge.value?{name:"suffixIcon",fn:withCtx(()=>[createVNode(unref(LoadingOutlined),{spin:""})]),key:"0"}:void 0,Ge.value?{name:"notFoundContent",fn:withCtx(()=>[createBaseVNode("span",null,[createVNode(unref(LoadingOutlined),{spin:"",class:"mr-1"}),createTextVNode(" "+toDisplayString(unref(P)("component.form.apiSelectNotFound")),1)])]),key:"1"}:void 0]),1040,["options","value"]))}}),_sfc_main$C=defineComponent({name:"ApiTree",__name:"ApiTree",props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},resultField:{type:String,default:""},afterFetch:{type:Function},value:{type:Array}},emits:["options-change","change","update:value"],setup(v,{emit:y}){const C=v,A=y,We=useAttrs$1(),Ge=ref([]),Xe=ref(!1),Ve=ref(!1),P=ref([]),[Te]=useRuleFormItem(C,"value","change",P),j=computed(()=>ua(ua({},C.api?{treeData:unref(Ge)}:{}),We));watch(()=>Te.value,qe=>{A("update:value",qe)}),watch(()=>C.params,()=>{!unref(Xe)&&x()},{deep:!0}),watch(()=>C.immediate,qe=>{qe&&!Xe.value&&x()}),onMounted(()=>{C.immediate&&x()});function x(){return no(this,null,function*(){const{api:qe,afterFetch:Be}=C;if(!qe||!isFunction$1(qe))return;Ve.value=!0,Ge.value=[];let De;try{De=yield qe(C.params)}catch(He){}Be&&isFunction$1(Be)&&(De=Be(De)),Ve.value=!1,De&&(isArray(De)||(De=get(De,C.resultField)),Ge.value=De||[],Xe.value=!0,A("options-change",Ge.value))})}return(qe,Be)=>(openBlock(),createBlock(unref(Tree),mergeProps(j.value,{selectedKeys:unref(Te),"onUpdate:selectedKeys":Be[0]||(Be[0]=De=>isRef(Te)?Te.value=De:null)}),createSlots({_:2},[renderList(Object.keys(qe.$slots),De=>({name:De,fn:withCtx(He=>[renderSlot(qe.$slots,De,normalizeProps(guardReactiveProps(He||{})))])}))]),1040,["selectedKeys"]))}}),_sfc_main$B=defineComponent({name:"ApiTreeSelect",__name:"ApiTreeSelect",props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},async:{type:Boolean,default:!1},resultField:propTypes.string.def(""),labelField:propTypes.string.def("title"),valueField:propTypes.string.def("value"),childrenField:propTypes.string.def("children")},emits:["options-change","change","load-data"],setup(v,{emit:y}){const C=v,A=y,We=useAttrs$1(),Ge=ref([]),Xe=ref(!1),Ve=ref(!1),P=computed(()=>ua(ua({},C.api?{treeData:unref(Ge)}:{}),We)),Te={children:C.childrenField,value:C.valueField,label:C.labelField};function j(...Be){A("change",...Be)}watch(()=>C.params,()=>{!unref(Xe)&&qe()},{deep:!0}),watch(()=>C.immediate,Be=>{Be&&!Xe.value&&qe()}),onMounted(()=>{C.immediate&&qe()});function x(Be){return new Promise(De=>{if(isArray(Be.children)&&Be.children.length>0){De();return}A("load-data",{treeData:Ge,treeNode:Be,resolve:De})})}function qe(){return no(this,null,function*(){const{api:Be}=C;if(!Be||!isFunction$1(Be)||Ve.value)return;Ve.value=!0,Ge.value=[];let De;try{De=yield Be(C.params)}catch(He){}Ve.value=!1,De&&(isArray(De)||(De=get(De,C.resultField)),Ge.value=De||[],Xe.value=!0,A("options-change",Ge.value))})}return(Be,De)=>(openBlock(),createBlock(unref(TreeSelect),mergeProps(P.value,{"show-search":"","tree-node-filter-prop":Te==null?void 0:Te.label,onChange:j,"field-names":Te,"load-data":v.async?x:void 0}),createSlots({_:2},[renderList(Object.keys(Be.$slots),He=>({name:He,fn:withCtx(Ye=>[renderSlot(Be.$slots,He,normalizeProps(guardReactiveProps(Ye||{})))])})),Ve.value?{name:"suffixIcon",fn:withCtx(()=>[createVNode(unref(LoadingOutlined),{spin:""})]),key:"0"}:void 0]),1040,["tree-node-filter-prop","load-data"]))}}),_sfc_main$A=defineComponent({name:"ApiCascader",__name:"ApiCascader",props:{value:{type:Array},api:{type:Function,default:null},numberToString:propTypes.bool,resultField:propTypes.string.def(""),labelField:propTypes.string.def("label"),valueField:propTypes.string.def("value"),childrenField:propTypes.string.def("children"),apiParamKey:propTypes.string.def("parentCode"),immediate:propTypes.bool.def(!0),initFetchParams:{type:Object,default:()=>({})},isLeaf:{type:Function,default:null},displayRenderArray:{type:Array}},emits:["change","defaultChange"],setup(v,{emit:y}){const C=v,A=y,We=ref([]),Ge=ref([]),Xe=ref(!1),Ve=ref([]),P=ref(!0),{t:Te}=useI18n(),[j]=useRuleFormItem(C,"value","change",Ve);watch(We,Ye=>{const st=x(Ye);Ge.value=st},{deep:!0});function x(Ye){const{labelField:st,valueField:rt,numberToString:Ke,childrenField:tt,isLeaf:at}=C;return Ye.reduce((et,Ot)=>{if(Ot){const wt=Ot[rt],xt=Mu(ua({},omit(Ot,[st,rt])),{label:Ot[st],value:Ke?`${wt}`:wt,isLeaf:at&&typeof at=="function"?at(Ot):!1}),it=Reflect.get(Ot,tt);it&&Reflect.set(xt,tt,x(it)),et.push(xt)}return et},[])}function qe(){return no(this,null,function*(){const Ye=C.api;if(!(!Ye||!isFunction$1(Ye))){We.value=[],Xe.value=!0;try{const st=yield Ye(C.initFetchParams);if(Array.isArray(st)){We.value=st;return}C.resultField&&(We.value=get(st,C.resultField)||[])}catch(st){}finally{Xe.value=!1}}})}const Be=Ye=>no(this,null,function*(){const st=Ye[Ye.length-1];st.loading=!0;const rt=C.api;if(!(!rt||!isFunction$1(rt)))try{const Ke=yield rt({[C.apiParamKey]:Reflect.get(st,"value")});if(Array.isArray(Ke)){const tt=x(Ke);st.children=tt;return}if(C.resultField){const tt=x(get(Ke,C.resultField)||[]);st.children=tt}}catch(Ke){}finally{st.loading=!1}});watchEffect(()=>{C.immediate&&qe()}),watch(()=>C.initFetchParams,()=>{!unref(P)&&qe()},{deep:!0});function De(Ye,st){Ve.value=st,A("defaultChange",Ye,st)}const He=({labels:Ye,selectedOptions:st})=>unref(Ve).length===(st==null?void 0:st.length)?Ye.join(" / "):C.displayRenderArray?C.displayRenderArray.join(" / "):"";return(Ye,st)=>(openBlock(),createBlock(unref(Cascader),{value:unref(j),"onUpdate:value":st[0]||(st[0]=rt=>isRef(j)?j.value=rt:null),options:Ge.value,"load-data":Be,"change-on-select":"",onChange:De,displayRender:He},createSlots({_:2},[Xe.value?{name:"suffixIcon",fn:withCtx(()=>[createVNode(unref(LoadingOutlined),{spin:""})]),key:"0"}:void 0,Xe.value?{name:"notFoundContent",fn:withCtx(()=>[createBaseVNode("span",null,[createVNode(unref(LoadingOutlined),{spin:"",class:"mr-1"}),createTextVNode(" "+toDisplayString(unref(Te)("component.form.apiSelectNotFound")),1)])]),key:"1"}:void 0]),1032,["value","options"]))}}),_sfc_main$z=defineComponent({name:"ApiTransfer",__name:"ApiTransfer",props:{value:{type:Array},api:{type:Function,default:null},params:{type:Object},dataSource:{type:Array},immediate:propTypes.bool.def(!0),alwaysLoad:propTypes.bool.def(!1),afterFetch:{type:Function},resultField:propTypes.string.def(""),labelField:propTypes.string.def("title"),valueField:propTypes.string.def("key"),showSearch:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filterOption:{type:Function},selectedKeys:{type:Array},showSelectAll:{type:Boolean,default:!1},targetKeys:{type:Array}},emits:["options-change","change"],setup(v,{emit:y}){const C=v,A=y,We=ref([]),Ge=ref([]),Xe=computed(()=>{const{labelField:x,valueField:qe}=C;return unref(We).reduce((Be,De)=>(De&&Be.push(Mu(ua({},omit(De,[x,qe])),{title:De[x],key:De[qe]})),Be),[])}),Ve=computed(()=>Array.isArray(C.value)?C.value:Array.isArray(C.targetKeys)?C.targetKeys:[]);function P(x,qe,Be){Ge.value=x,A("change",x)}watchEffect(()=>{C.immediate&&!C.alwaysLoad&&Te()}),watch(()=>C.params,()=>{Te()},{deep:!0});function Te(){return no(this,null,function*(){const x=C.api;if(!x||!isFunction$1(x)){Array.isArray(C.dataSource)&&(We.value=C.dataSource);return}We.value=[];try{const qe=yield x(C.params);if(Array.isArray(qe)){We.value=qe,j();return}C.resultField&&(We.value=get(qe,C.resultField)||[]),j()}catch(qe){}})}function j(){A("options-change",unref(Xe))}return(x,qe)=>(openBlock(),createBlock(unref(Transfer),{"data-source":Xe.value,"filter-option":v.filterOption,render:Be=>Be.title,showSelectAll:v.showSelectAll,selectedKeys:v.selectedKeys,targetKeys:Ve.value,showSearch:v.showSearch,disabled:v.disabled,onChange:P},null,8,["data-source","filter-option","render","showSelectAll","selectedKeys","targetKeys","showSearch","disabled"]))}}),basicProps$2={listType:{type:String,default:"picture-card"},helpText:{type:String,default:""},maxSize:{type:Number,default:2},maxNumber:{type:Number,default:1},accept:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},uploadParams:{type:Object,default:()=>({})},api:{type:Function,default:null,required:!0},name:{type:String,default:"file"},filename:{type:String,default:null},fileListOpenDrag:{type:Boolean,default:!0},fileListDragOptions:{type:Object,default:()=>({})}},uploadContainerProps=Mu(ua({value:{type:[String,Array],default:()=>[]}},basicProps$2),{showPreviewNumber:{type:Boolean,default:!0},emptyHidePreview:{type:Boolean,default:!1}}),previewProps={value:{type:Array,default:()=>[]}},fileListProps={columns:{type:Array,default:null},actionColumn:{type:Object,default:null},dataSource:{type:Array,default:null},openDrag:{type:Boolean,default:!1},dragOptions:{type:Object,default:()=>({})}},{t:t$3}=useI18n();function useUploadType({acceptRef:v,helpTextRef:y,maxNumberRef:C,maxSizeRef:A}){const We=computed(()=>{const Ve=unref(v);return Ve&&Ve.length>0?Ve:[]}),Ge=computed(()=>unref(We).map(Ve=>Ve.indexOf("/")>0||Ve.startsWith(".")?Ve:`.${Ve}`).join(",")),Xe=computed(()=>{const Ve=unref(y);if(Ve)return Ve;const P=[],Te=unref(v);Te.length>0&&P.push(t$3("component.upload.accept",[Te.join(",")]));const j=unref(A);j&&P.push(t$3("component.upload.maxSize",[j]));const x=unref(C);return x&&x!==1/0&&P.push(t$3("component.upload.maxNumber",[x])),P.join("，")});return{getAccept:We,getStringAccept:Ge,getHelpText:Xe}}var UploadResultStatus=(v=>(v.DONE="done",v.SUCCESS="success",v.ERROR="error",v.UPLOADING="uploading",v))(UploadResultStatus||{});function checkImgType(v){return isImgTypeByName(v.name)}function isImgTypeByName(v){return/\.(jpg|jpeg|png|gif|webp)$/i.test(v)}function isAudioTypeByName(v){return/\.(mp3|acc|ogg|wav|wma|ape|flac)$/i.test(v)}function getBase64WithFile(v){return new Promise((y,C)=>{const A=new FileReader;A.readAsDataURL(v),A.onload=()=>y({result:A.result,file:v}),A.onerror=We=>C(We)})}const key$1=Symbol("basic-table");function createTableContext(v){provide(key$1,v)}function useTableContext(){return inject(key$1)}const{table}=componentSetting,{pageSizeOptions,defaultPageSize,fetchSetting,defaultSize,defaultSortFn,defaultFilterFn}=table,ROW_KEY="key",PAGE_SIZE_OPTIONS=pageSizeOptions,PAGE_SIZE=defaultPageSize,FETCH_SETTING=fetchSetting,DEFAULT_SIZE=defaultSize,DEFAULT_SORT_FN=defaultSortFn,DEFAULT_FILTER_FN=defaultFilterFn,DEFAULT_ALIGN="center",INDEX_COLUMN_FLAG="INDEX",ACTION_COLUMN_FLAG="ACTION",_sfc_main$y=defineComponent({name:"TableAction",__name:"TableAction",props:{actions:{type:Array,default:null},dropDownActions:{type:Array,default:null},divider:propTypes.bool.def(!0),outside:propTypes.bool,stopButtonPropagation:propTypes.bool.def(!1)},setup(v){const y=v,{prefixCls:C}=useDesign("basic-table-action");let A={};y.outside||(A=useTableContext());const{hasPermission:We}=usePermission();function Ge(x){const qe=x.ifShow;let Be=!0;return isBoolean(qe)&&(Be=qe),isFunction$1(qe)&&(Be=qe(x)),Be}const Xe=computed(()=>(toRaw(y.actions)||[]).filter(x=>We(x.auth)&&Ge(x)).map(x=>{const{popConfirm:qe}=x;return Mu(ua(ua({getPopupContainer:()=>{var Be;return(Be=unref(A==null?void 0:A.wrapRef))!=null?Be:document.body},type:"link",size:"small"},x),qe||{}),{onConfirm:qe==null?void 0:qe.confirm,onCancel:qe==null?void 0:qe.cancel,enable:!!qe})})),Ve=computed(()=>{const x=(toRaw(y.dropDownActions)||[]).filter(qe=>We(qe.auth)&&Ge(qe));return x.map((qe,Be)=>{const{label:De,popConfirm:He}=qe;return Mu(ua(ua({},qe),He),{onConfirm:He==null?void 0:He.confirm,onCancel:He==null?void 0:He.cancel,text:De,divider:Be<x.length-1?y.divider:!1})})}),P=computed(()=>{var Be,De;const qe=(((Be=A==null?void 0:A.getColumns)==null?void 0:Be.call(A))||[]).find(He=>He.flag===ACTION_COLUMN_FLAG);return(De=qe==null?void 0:qe.align)!=null?De:"left"});function Te(x){return ua({getPopupContainer:()=>{var qe;return(qe=unref(A==null?void 0:A.wrapRef))!=null?qe:document.body},placement:"bottom"},isString(x)?{title:x}:x)}function j(x){if(!y.stopButtonPropagation)return;x.composedPath().find(De=>{var He;return((He=De.tagName)==null?void 0:He.toUpperCase())==="BUTTON"})&&x.stopPropagation()}return(x,qe)=>{const Be=resolveComponent("a-button");return openBlock(),createElementBlock("div",{class:normalizeClass([unref(C),P.value]),onClick:j},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Xe.value,(De,He)=>(openBlock(),createElementBlock(Fragment,{key:`${He}-${De.label}`},[De.tooltip?(openBlock(),createBlock(unref(Tooltip),mergeProps({key:0,ref_for:!0},Te(De.tooltip)),{default:withCtx(()=>[createVNode(unref(PopConfirmButton),mergeProps({ref_for:!0},De),{default:withCtx(()=>[De.icon?(openBlock(),createBlock(_sfc_main$G,{key:0,icon:De.icon,class:normalizeClass({"mr-1":!!De.label})},null,8,["icon","class"])):createCommentVNode("",!0),De.label?(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(De.label),1)],64)):createCommentVNode("",!0)]),_:2},1040)]),_:2},1040)):(openBlock(),createBlock(unref(PopConfirmButton),mergeProps({key:1,ref_for:!0},De),{default:withCtx(()=>[De.icon?(openBlock(),createBlock(_sfc_main$G,{key:0,icon:De.icon,class:normalizeClass({"mr-1":!!De.label})},null,8,["icon","class"])):createCommentVNode("",!0),De.label?(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(De.label),1)],64)):createCommentVNode("",!0)]),_:2},1040)),v.divider&&He<Xe.value.length-1?(openBlock(),createBlock(unref(Divider),{key:2,type:"vertical",class:"action-divider"})):createCommentVNode("",!0)],64))),128)),v.dropDownActions&&Ve.value.length>0?(openBlock(),createBlock(unref(Dropdown),{key:0,trigger:["hover"],dropMenuList:Ve.value,popconfirm:""},{default:withCtx(()=>[renderSlot(x.$slots,"more"),x.$slots.more?createCommentVNode("",!0):(openBlock(),createBlock(Be,{key:0,type:"link",size:"small"},{default:withCtx(()=>[createVNode(unref(MoreOutlined),{class:"icon-more"})]),_:1}))]),_:3},8,["dropMenuList"])):createCommentVNode("",!0)],2)}}}),TableAction_vue_vue_type_style_index_0_lang="",_hoisted_1$c={class:"thumb"},_sfc_main$x=defineComponent({__name:"ThumbUrl",props:{fileUrl:propTypes.string.def(""),fileName:propTypes.string.def("")},setup(v){return(y,C)=>(openBlock(),createElementBlock("span",_hoisted_1$c,[v.fileUrl?(openBlock(),createBlock(unref(Image$1),{key:0,src:v.fileUrl,width:104},null,8,["src"])):createCommentVNode("",!0)]))}}),ThumbUrl_vue_vue_type_style_index_0_lang="",{t:t$2}=useI18n();function createTableColumns(){return[{dataIndex:"thumbUrl",title:t$2("component.upload.legend"),width:100,customRender:({record:v})=>{const{thumbUrl:y}=v||{};return y&&createVNode(_sfc_main$x,{fileUrl:y},null)}},{dataIndex:"name",title:t$2("component.upload.fileName"),align:"left",customRender:({text:v,record:y})=>{const{percent:C,status:A}=y||{};let We="normal";return A===UploadResultStatus.ERROR?We="exception":A===UploadResultStatus.UPLOADING?We="active":A===UploadResultStatus.SUCCESS&&(We="success"),createVNode("div",null,[createVNode("p",{class:"truncate mb-1 max-w-[280px]",title:v},[v]),createVNode(Progress,{percent:C,size:"small",status:We},null)])}},{dataIndex:"size",title:t$2("component.upload.fileSize"),width:100,customRender:({text:v=0})=>v&&(v/1024).toFixed(2)+"KB"},{dataIndex:"status",title:t$2("component.upload.fileStatue"),width:100,customRender:({text:v})=>v===UploadResultStatus.SUCCESS?createVNode(Tag,{color:"green"},{default:()=>t$2("component.upload.uploadSuccess")}):v===UploadResultStatus.ERROR?createVNode(Tag,{color:"red"},{default:()=>t$2("component.upload.uploadError")}):v===UploadResultStatus.UPLOADING?createVNode(Tag,{color:"blue"},{default:()=>t$2("component.upload.uploading")}):v||t$2("component.upload.pending")}]}function createActionColumn(v){return{width:120,title:t$2("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:y})=>{const C=[{label:t$2("component.upload.del"),color:"error",onClick:v.bind(null,y)}];return createVNode(_sfc_main$y,{actions:C,outside:!0},null)}}}function createPreviewColumns(){return[{dataIndex:"url",title:"缩略",width:100,customRender:({record:v})=>{const{url:y}=v||{};if(isImgTypeByName(y))return createVNode(_sfc_main$x,{fileUrl:y},null);if(isAudioTypeByName(y))return createVNode("audio",{controls:!0,src:y},null)}},{dataIndex:"name",title:t$2("component.upload.fileName"),align:"left"}]}function createPreviewActionColumn({handleRemove:v,handleDownload:y}){return{width:160,title:t$2("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:C})=>{const A=[{label:t$2("component.upload.del"),color:"error",onClick:v.bind(null,C)},{label:t$2("component.upload.download"),onClick:y.bind(null,C)}];return createVNode(_sfc_main$y,{actions:A,outside:!0},null)}}}const hexList=[];for(let v=0;v<=15;v++)hexList[v]=v.toString(16);function buildUUID(){let v="";for(let y=1;y<=36;y++)y===9||y===14||y===19||y===24?v+="-":y===15?v+=4:y===20?v+=hexList[Math.random()*4|8]:v+=hexList[Math.random()*16|0];return v.replace(/-/g,"")}let unique=0;function buildShortUUID(v=""){const y=Date.now(),C=Math.floor(Math.random()*1e9);return unique++,v+"_"+C+unique+String(y)}const _sfc_main$w=defineComponent({name:"FileList",props:fileListProps,setup(v,{emit:y}){const C=useModalContext(),A=ref();return watch(()=>v.dataSource,()=>{nextTick(()=>{var We;(We=C==null?void 0:C.redoModalHeight)==null||We.call(C)})}),v.openDrag&&onMounted(()=>useSortable(A,Mu(ua({},v.dragOptions),{onEnd:({oldIndex:We,newIndex:Ge})=>{if(We===Ge)return;const{onAfterEnd:Xe}=v.dragOptions;if(isDef(We)&&isDef(Ge)){const Ve=[...v.dataSource],[P]=Ve.splice(We,1);Ve.splice(Ge,0,P),nextTick(()=>{y("update:dataSource",Ve),isFunction$1(Xe)&&Xe(Ve)})}}})).initSortable()),()=>{const{columns:We,actionColumn:Ge,dataSource:Xe}=v,Ve=[...We,Ge];return createVNode("div",{class:"overflow-x-auto"},[createVNode("table",{class:"file-table"},[createVNode("colgroup",null,[Ve.map(P=>{const{width:Te=0,dataIndex:j}=P,x={width:`${Te}px`,minWidth:`${Te}px`};return createVNode("col",{style:Te?x:{},key:j},null)})]),createVNode("thead",null,[createVNode("tr",{class:"file-table-tr"},[Ve.map(P=>{const{title:Te="",align:j="center",dataIndex:x}=P;return createVNode("th",{class:["file-table-th",j],key:x},[Te])})])]),createVNode("tbody",{ref:A},[Xe.map((P={},Te)=>createVNode("tr",{class:"file-table-tr",key:`${Te+P.name||""}`},[Ve.map(j=>{const{dataIndex:x="",customRender:qe,align:Be="center"}=j,De=qe&&isFunction$1(qe);return createVNode("td",{class:["file-table-td break-all",Be],key:x},[De?qe==null?void 0:qe({text:P[x],record:P}):P[x]])})]))])])])}}}),FileList_vue_vue_type_style_index_0_lang="",_hoisted_1$b={class:"upload-modal-toolbar"},_sfc_main$v=defineComponent({__name:"UploadModal",props:Mu(ua({},basicProps$2),{previewFileList:{type:Array,default:()=>[]}}),emits:["change","register","delete"],setup(v,{emit:y}){const C=v,A=y,We=createTableColumns(),Ge=createActionColumn(et),Xe=ref(!1),Ve=ref([]),{accept:P,helpText:Te,maxNumber:j,maxSize:x}=toRefs(C),{t:qe}=useI18n(),[Be,{closeModal:De}]=useModalInner(),{getStringAccept:He,getHelpText:Ye}=useUploadType({acceptRef:P,helpTextRef:Te,maxNumberRef:j,maxSizeRef:x}),{createMessage:st}=useMessage(),rt=computed(()=>Ve.value.length>0&&!Ve.value.every(yt=>yt.status===UploadResultStatus.SUCCESS)),Ke=computed(()=>{const yt=Ve.value.some(ut=>ut.status===UploadResultStatus.SUCCESS);return{disabled:Xe.value||Ve.value.length===0||!yt}}),tt=computed(()=>{const yt=Ve.value.some(ut=>ut.status===UploadResultStatus.ERROR);return Xe.value?qe("component.upload.uploading"):qe(yt?"component.upload.reUploadFailed":"component.upload.startUpload")});function at(yt){const{size:ut,name:Et}=yt,{maxSize:Ht}=C;if(Ht&&yt.size/1024/1024>=Ht)return st.error(qe("component.upload.maxSizeMultiple",[Ht])),!1;const an={uuid:buildUUID(),file:yt,size:ut,name:Et,percent:0,type:Et.split(".").pop()};return checkImgType(yt)?getBase64WithFile(yt).then(({result:Mt})=>{Ve.value=[...unref(Ve),ua({thumbUrl:Mt},an)]}):Ve.value=[...unref(Ve),an],!1}function et(yt){const ut=Ve.value.findIndex(Et=>Et.uuid===yt.uuid);ut!==-1&&Ve.value.splice(ut,1),A("delete",yt)}function Ot(yt){return no(this,null,function*(){var Et;const{api:ut}=C;if(!ut||!isFunction$1(ut))return warn();try{yt.status=UploadResultStatus.UPLOADING;const Ht=yield(Et=C.api)==null?void 0:Et.call(C,{data:ua({},C.uploadParams||{}),file:yt.file,name:C.name,filename:C.filename},function(Mt){const vn=Mt.loaded/Mt.total*100|0;yt.percent=vn});return yt.status=UploadResultStatus.SUCCESS,yt.response={url:Ht},{success:!0,error:null}}catch(Ht){return yt.status=UploadResultStatus.ERROR,{success:!1,error:Ht}}})}function wt(){return no(this,null,function*(){var ut;const{maxNumber:yt}=C;if(Ve.value.length+((ut=C.previewFileList)==null?void 0:ut.length)>yt)return st.warning(qe("component.upload.maxNumber",[yt]));try{Xe.value=!0;const Et=Ve.value.filter(Mt=>Mt.status!==UploadResultStatus.SUCCESS)||[],Ht=yield Promise.all(Et.map(Mt=>Ot(Mt)));Xe.value=!1;const an=Ht.filter(Mt=>!Mt.success);if(an.length>0)throw an}catch(Et){throw Xe.value=!1,Et}})}function xt(){const{maxNumber:yt}=C;if(Ve.value.length>yt)return st.warning(qe("component.upload.maxNumber",[yt]));if(Xe.value)return st.warning(qe("component.upload.saveWarn"));const ut=[];for(const Et of Ve.value){const{status:Ht,response:an}=Et;if(Ht===UploadResultStatus.SUCCESS&&an){const Mt=(an==null?void 0:an.url)||(an==null?void 0:an.data);ut.push(Mt)}}if(ut.length<=0)return st.warning(qe("component.upload.saveError"));Ve.value=[],De(),A("change",ut)}function it(){return no(this,null,function*(){return Xe.value?(st.warning(qe("component.upload.uploadWait")),!1):(Ve.value=[],!0)})}return(yt,ut)=>{const Et=resolveComponent("a-button");return openBlock(),createBlock(unref(BasicModal),mergeProps({width:"800px",title:unref(qe)("component.upload.upload"),okText:unref(qe)("component.upload.save")},yt.$attrs,{onRegister:unref(Be),onOk:xt,closeFunc:it,maskClosable:!1,keyboard:!1,class:"upload-modal",okButtonProps:Ke.value,cancelButtonProps:{disabled:Xe.value}}),{centerFooter:withCtx(()=>[createVNode(Et,{onClick:wt,color:"success",disabled:!rt.value,loading:Xe.value},{default:withCtx(()=>[createTextVNode(toDisplayString(tt.value),1)]),_:1},8,["disabled","loading"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$b,[createVNode(unref(Alert),{message:unref(Ye),type:"info",banner:"",class:"upload-modal-toolbar__text"},null,8,["message"]),createVNode(unref(Upload),{accept:unref(He),multiple:yt.multiple,"before-upload":at,"show-upload-list":!1,class:"upload-modal-toolbar__btn"},{default:withCtx(()=>[createVNode(Et,{type:"primary"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(qe)("component.upload.choose")),1)]),_:1})]),_:1},8,["accept","multiple"])]),createVNode(_sfc_main$w,{dataSource:Ve.value,"onUpdate:dataSource":ut[0]||(ut[0]=Ht=>Ve.value=Ht),columns:unref(We),actionColumn:unref(Ge),openDrag:yt.fileListOpenDrag,dragOptions:yt.fileListDragOptions},null,8,["dataSource","columns","actionColumn","openDrag","dragOptions"])]),_:1},16,["title","okText","onRegister","okButtonProps","cancelButtonProps"])}}}),UploadModal_vue_vue_type_style_index_0_lang="";function dataURLtoBlob(v){const y=v.split(","),A=y[0].match(/:(.*?);/)[1],We=window.atob(y[1]);let Ge=We.length;const Xe=new Uint8Array(Ge);for(;Ge--;)Xe[Ge]=We.charCodeAt(Ge);return new Blob([Xe],{type:A})}const _sfc_main$u=defineComponent({__name:"UploadPreviewModal",props:previewProps,emits:["list-change","register","delete"],setup(v,{emit:y}){const C=v,A=y,We=createPreviewColumns(),Ge=createPreviewActionColumn({handleRemove:Te,handleDownload:j}),[Xe]=useModalInner(),{t:Ve}=useI18n(),P=ref([]);watch(()=>C.value,x=>{isArray(x)||(x=[]),P.value=x.filter(qe=>!!qe).map(qe=>({url:qe,type:qe.split(".").pop()||"",name:qe.split("/").pop()||""}))},{immediate:!0});function Te(x){const qe=P.value.findIndex(Be=>Be.url===x.url);if(qe!==-1){const Be=P.value.splice(qe,1);A("delete",Be[0].url),A("list-change",P.value.map(De=>De.url))}}function j(x){const{url:qe=""}=x;downloadByUrl({url:qe})}return(x,qe)=>(openBlock(),createBlock(unref(BasicModal),mergeProps({width:"800px",title:unref(Ve)("component.upload.preview"),class:"upload-preview-modal"},x.$attrs,{onRegister:unref(Xe),showOkBtn:!1}),{default:withCtx(()=>[createVNode(_sfc_main$w,{dataSource:P.value,columns:unref(We),actionColumn:unref(Ge)},null,8,["dataSource","columns","actionColumn"])]),_:1},16,["title","onRegister"]))}}),UploadPreviewModal_vue_vue_type_style_index_0_lang="",_sfc_main$t=defineComponent({name:"BasicUpload",__name:"BasicUpload",props:uploadContainerProps,emits:["change","delete","preview-delete","update:value"],setup(v,{emit:y}){const C=v,A=y,We=useAttrs$1(),{t:Ge}=useI18n(),[Xe,{openModal:Ve}]=useModal(),[P,{openModal:Te}]=useModal(),j=ref([]),x=computed(()=>{const{emptyHidePreview:rt}=C;return rt&&rt?j.value.length>0:!0}),qe=computed(()=>{const rt=ua(ua({},We),C);return omit(rt,"onChange")});watch(()=>C.value,(rt=[])=>{j.value=isArray(rt)?rt:[rt]},{immediate:!0});function Be(rt){j.value=[...unref(j),...rt||[]],A("update:value",st()),A("change",st())}function De(rt){j.value=[...rt||[]],A("update:value",st()),A("change",st())}function He(rt){A("delete",rt)}function Ye(rt){A("preview-delete",rt)}function st(){return C.maxNumber==1&&j.value.length==1?j.value[0]:j.value}return(rt,Ke)=>{const tt=resolveComponent("a-button");return openBlock(),createElementBlock("div",null,[createVNode(unref(Space),null,{default:withCtx(()=>[createVNode(tt,{type:"primary",onClick:unref(Ve),preIcon:"carbon:cloud-upload"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(Ge)("component.upload.upload")),1)]),_:1},8,["onClick"]),x.value?(openBlock(),createBlock(unref(Tooltip),{key:0,placement:"bottom"},{title:withCtx(()=>[createTextVNode(toDisplayString(unref(Ge)("component.upload.uploaded"))+" ",1),j.value.length?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(j.value.length),1)],64)):createCommentVNode("",!0)]),default:withCtx(()=>[createVNode(tt,{onClick:unref(Te)},{default:withCtx(()=>[createVNode(_sfc_main$G,{icon:"bi:eye"}),j.value.length&&rt.showPreviewNumber?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(j.value.length),1)],64)):createCommentVNode("",!0)]),_:1},8,["onClick"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(_sfc_main$v,mergeProps(qe.value,{previewFileList:j.value,fileListOpenDrag:rt.fileListOpenDrag,fileListDragOptions:rt.fileListDragOptions,onRegister:unref(Xe),onChange:Be,onDelete:He}),null,16,["previewFileList","fileListOpenDrag","fileListDragOptions","onRegister"]),createVNode(_sfc_main$u,{value:j.value,onRegister:unref(P),onListChange:De,onDelete:Ye},null,8,["value","onRegister"])])}}}),_hoisted_1$a={key:0},_hoisted_2$2={style:{"margin-top":"8px"}},_hoisted_3$2=["src"],_sfc_main$s=defineComponent({name:"ImageUpload",__name:"ImageUpload",props:ua({},uploadContainerProps),emits:["change","update:value","delete"],setup(v,{emit:y}){const C=y,A=v,{t:We}=useI18n(),{createMessage:Ge}=useMessage(),{accept:Xe,helpText:Ve,maxNumber:P,maxSize:Te}=toRefs(A),j=ref(!1),{getStringAccept:x}=useUploadType({acceptRef:Xe,helpTextRef:Ve,maxNumberRef:P,maxSizeRef:Te}),qe=ref(!1),Be=ref(""),De=ref(""),He=ref([]),Ye=ref(!0),st=ref(!0);watch(()=>A.value,xt=>{if(j.value){j.value=!1;return}if(xt){let it=[];isArray(xt)?it=xt:it.push(xt),He.value=it.map((yt,ut)=>yt&&isString(yt)?{uid:-ut+"",name:yt.substring(yt.lastIndexOf("/")+1),status:"done",url:yt}:yt&&isObject$1(yt)?yt:void 0)}});function rt(xt){return new Promise((it,yt)=>{const ut=new FileReader;ut.readAsDataURL(xt),ut.onload=()=>{it(ut.result)},ut.onerror=Et=>yt(Et)})}const Ke=xt=>no(this,null,function*(){!xt.url&&!xt.preview&&(xt.preview=yield rt(xt.originFileObj)),Be.value=xt.url||xt.preview||"",qe.value=!0,De.value=xt.name||Be.value.substring(Be.value.lastIndexOf("/")+1)}),tt=xt=>no(this,null,function*(){if(He.value){const it=He.value.findIndex(ut=>ut.uid===xt.uid);it!==-1&&He.value.splice(it,1);const yt=wt();j.value=!0,C("change",yt),C("delete",xt)}}),at=()=>{qe.value=!1,De.value=""},et=xt=>{const{maxSize:it,accept:yt}=A,{name:ut}=xt,Et=isImgTypeByName(ut);Et||(Ge.error(We("component.upload.acceptUpload",[yt])),st.value=!1,setTimeout(()=>st.value=!0,1e3));const Ht=xt.size/1024/1024>it;return Ht&&(Ge.error(We("component.upload.maxSizeMultiple",[it])),Ye.value=!1,setTimeout(()=>Ye.value=!0,1e3)),Et&&!Ht||Upload.LIST_IGNORE};function Ot(xt){return no(this,null,function*(){var yt;const{api:it}=A;if(!it||!isFunction$1(it))return warn();try{const ut=yield(yt=A.api)==null?void 0:yt.call(A,{data:ua({},A.uploadParams||{}),file:xt.file,name:A.name,filename:A.filename});xt.onSuccess({data:ut,url:ut});const Et=wt();j.value=!0,C("change",Et)}catch(ut){xt.onError(ut)}})}function wt(){const xt=(He.value||[]).filter(it=>(it==null?void 0:it.status)===UploadResultStatus.DONE).map(it=>{var yt,ut;return(it==null?void 0:it.url)||((yt=it==null?void 0:it.response)==null?void 0:yt.url)||((ut=it==null?void 0:it.response)==null?void 0:ut.data)});return A.multiple?xt:xt.length>0?xt[0]:""}return(xt,it)=>(openBlock(),createElementBlock("div",null,[createVNode(unref(Upload),mergeProps(xt.$attrs,{"file-list":He.value,"onUpdate:fileList":it[0]||(it[0]=yt=>He.value=yt),"list-type":xt.listType,accept:unref(x),multiple:xt.multiple,maxCount:unref(P),"before-upload":et,"custom-request":Ot,onPreview:Ke,onRemove:tt}),{default:withCtx(()=>[He.value&&He.value.length<unref(P)?(openBlock(),createElementBlock("div",_hoisted_1$a,[createVNode(unref(PlusOutlined)),createBaseVNode("div",_hoisted_2$2,toDisplayString(unref(We)("component.upload.upload")),1)])):createCommentVNode("",!0)]),_:1},16,["file-list","list-type","accept","multiple","maxCount"]),createVNode(unref(Modal),{open:qe.value,title:De.value,footer:null,onCancel:at},{default:withCtx(()=>[createBaseVNode("img",{alt:"",style:{width:"100%"},src:Be.value},null,8,_hoisted_3$2)]),_:1},8,["open","title"])]))}}),ImageUpload_vue_vue_type_style_index_0_lang="",ImageUpload=withInstall(_sfc_main$s),BasicUpload=withInstall(_sfc_main$t);var method_min={exports:{}};(function(v,y){(function(C,A){v.exports=A()})(commonjsGlobal,()=>(()=>{var C={54:(Xe,Ve,P)=>{P.d(Ve,{g:()=>Te});var Te=function(){function j(){}return j.ZWSP="​",j.DROP_EDITOR="application/editor",j.MOBILE_WIDTH=520,j.CLASS_MENU_DISABLED="vditor-menu--disabled",j.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],j.CODE_THEME=["abap","algol","algol_nu","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode","ant-design"],j.CODE_LANGUAGES=["mermaid","echarts","mindmap","plantuml","abc","graphviz","flowchart","apache","js","ts","html","markmap","properties","apache","bash","c","csharp","cpp","css","coffeescript","diff","go","xml","http","json","java","javascript","kotlin","less","lua","makefile","markdown","nginx","objectivec","php","php-template","perl","plaintext","python","python-repl","r","ruby","rust","scss","sql","shell","swift","ini","typescript","vbnet","yaml","ada","clojure","dart","erb","fortran","gradle","haskell","julia","julia-repl","lisp","matlab","pgsql","powershell","sql_more","stata","cmake","mathematica","solidity","yul"],j.CDN="https://unpkg.com/vditor@3.10.4",j.MARKDOWN_OPTIONS={autoSpace:!1,gfmAutoLink:!0,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},j.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},j.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},j.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:j.CDN+"/dist/css/content-theme"},j}()},478:(Xe,Ve,P)=>{P.d(Ve,{Q:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De){Be===void 0&&(Be=document),De===void 0&&(De=Te.g.CDN);var He=x.abcRenderAdapter.getElements(Be);He.length>0&&(0,j.G)(De+"/dist/js/abcjs/abcjs_basic.min.js","vditorAbcjsScript").then(function(){He.forEach(function(Ye){Ye.parentElement.classList.contains("vditor-wysiwyg__pre")||Ye.parentElement.classList.contains("vditor-ir__marker--pre")||Ye.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(Ye,x.abcRenderAdapter.getCode(Ye).trim()),Ye.style.overflowX="auto",Ye.setAttribute("data-processed","true"))})})}},156:(Xe,Ve,P)=>{P.r(Ve),P.d(Ve,{abcRenderAdapter:()=>De,chartRenderAdapter:()=>Be,flowchartRenderAdapter:()=>Ye,graphvizRenderAdapter:()=>He,markmapRenderAdapter:()=>x,mathRenderAdapter:()=>Te,mermaidRenderAdapter:()=>j,mindmapRenderAdapter:()=>qe,plantumlRenderAdapter:()=>st});var Te={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-math")}},j={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-mermaid")}},x={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-markmap")}},qe={getCode:function(rt){return rt.getAttribute("data-code")},getElements:function(rt){return rt.querySelectorAll(".language-mindmap")}},Be={getCode:function(rt){return rt.innerText},getElements:function(rt){return rt.querySelectorAll(".language-echarts")}},De={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-abc")}},He={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-graphviz")}},Ye={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-flowchart")}},st={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-plantuml")}}},314:(Xe,Ve,P)=>{P.d(Ve,{p:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De,He){Be===void 0&&(Be=document),De===void 0&&(De=Te.g.CDN);var Ye=x.chartRenderAdapter.getElements(Be);Ye.length>0&&(0,j.G)(De+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){Ye.forEach(function(st){if(!st.parentElement.classList.contains("vditor-wysiwyg__pre")&&!st.parentElement.classList.contains("vditor-ir__marker--pre")){var rt=x.chartRenderAdapter.getCode(st).trim();if(rt)try{if(st.getAttribute("data-processed")==="true")return;var Ke=JSON.parse(rt);echarts.init(st,He==="dark"?"dark":void 0).setOption(Ke),st.setAttribute("data-processed","true")}catch(tt){st.className="vditor-reset--error",st.innerHTML="echarts render error: <br>"+tt}}})})}},730:(Xe,Ve,P)=>{P.d(Ve,{O:()=>x});var Te=P(51),j=P(54),x=function(qe,Be){Array.from(qe.querySelectorAll("pre > code")).filter(function(De,He){return!De.parentElement.classList.contains("vditor-wysiwyg__pre")&&!De.parentElement.classList.contains("vditor-ir__marker--pre")&&!(De.classList.contains("language-mermaid")||De.classList.contains("language-flowchart")||De.classList.contains("language-echarts")||De.classList.contains("language-mindmap")||De.classList.contains("language-plantuml")||De.classList.contains("language-markmap")||De.classList.contains("language-abc")||De.classList.contains("language-graphviz")||De.classList.contains("language-math"))&&!(De.style.maxHeight.indexOf("px")>-1)&&!(qe.classList.contains("vditor-preview")&&He>5)}).forEach(function(De){var He,Ye,st,rt=De.innerText;if(De.classList.contains("highlight-chroma")){var Ke=De.cloneNode(!0);Ke.querySelectorAll(".highlight-ln").forEach(function(Ot){Ot.remove()}),rt=Ke.innerText}else rt.endsWith(`
`)&&(rt=rt.substr(0,rt.length-1));var tt='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';document.getElementById("vditorIconScript")||(tt='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>');var at=document.createElement("div");at.className="vditor-copy",at.innerHTML='<span aria-label="'+(((He=window.VditorI18n)===null||He===void 0?void 0:He.copy)||"复制")+`"
onmouseover="this.setAttribute('aria-label', '`+(((Ye=window.VditorI18n)===null||Ye===void 0?void 0:Ye.copy)||"复制")+`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`+(((st=window.VditorI18n)===null||st===void 0?void 0:st.copied)||"已复制")+`');this.previousElementSibling.blur()">`+tt+"</span>";var et=document.createElement("textarea");et.value=(0,Te.X)(rt),at.insertAdjacentElement("afterbegin",et),Be&&Be.renderMenu&&Be.renderMenu(De,at),De.before(at),De.style.maxHeight=window.outerHeight-40+"px",De.insertAdjacentHTML("afterend",'<span style="position: absolute">'+j.g.ZWSP+"</span>")})}},66:(Xe,Ve,P)=>{P.d(Ve,{P:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De){De===void 0&&(De=Te.g.CDN);var He=x.flowchartRenderAdapter.getElements(Be);He.length!==0&&(0,j.G)(De+"/dist/js/flowchart.js/flowchart.min.js","vditorFlowchartScript").then(function(){He.forEach(function(Ye){if(Ye.getAttribute("data-processed")!=="true"){var st=flowchart.parse(x.flowchartRenderAdapter.getCode(Ye));Ye.innerHTML="",st.drawSVG(Ye),Ye.setAttribute("data-processed","true")}})})}},218:(Xe,Ve,P)=>{P.d(Ve,{v:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De){De===void 0&&(De=Te.g.CDN);var He=x.graphvizRenderAdapter.getElements(Be);He.length!==0&&(0,j.G)(De+"/dist/js/graphviz/viz.js","vditorGraphVizScript").then(function(){He.forEach(function(Ye){var st=x.graphvizRenderAdapter.getCode(Ye);if(!Ye.parentElement.classList.contains("vditor-wysiwyg__pre")&&!Ye.parentElement.classList.contains("vditor-ir__marker--pre")&&Ye.getAttribute("data-processed")!=="true"&&st.trim()!==""){try{var rt=new Blob(["importScripts('"+document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js")+"');"],{type:"application/javascript"}),Ke=(window.URL||window.webkitURL).createObjectURL(rt),tt=new Worker(Ke);new Viz({worker:tt}).renderSVGElement(st).then(function(at){Ye.innerHTML=at.outerHTML}).catch(function(at){Ye.innerHTML="graphviz render error: <br>"+at,Ye.className="vditor-reset--error"})}catch(at){}Ye.setAttribute("data-processed","true")}})})}},702:(Xe,Ve,P)=>{P.d(Ve,{s:()=>qe});var Te=P(54),j=P(526),x=P(578),qe=function(Be,De,He){De===void 0&&(De=document),He===void 0&&(He=Te.g.CDN);var Ye=Be.style;Te.g.CODE_THEME.includes(Ye)||(Ye="github");var st=document.getElementById("vditorHljsStyle"),rt=He+"/dist/js/highlight.js/styles/"+Ye+".css";st&&st.getAttribute("href")!==rt&&st.remove(),(0,x.c)(He+"/dist/js/highlight.js/styles/"+Ye+".css","vditorHljsStyle"),Be.enable!==!1&&De.querySelectorAll("pre > code").length!==0&&(0,j.G)(He+"/dist/js/highlight.js/highlight.pack.js","vditorHljsScript").then(function(){(0,j.G)(He+"/dist/js/highlight.js/solidity.min.js","vditorHljsSolidityScript").then(function(){(0,j.G)(He+"/dist/js/highlight.js/yul.min.js","vditorHljsYulScript").then(function(){De.querySelectorAll("pre > code").forEach(function(Ke){if(!Ke.parentElement.classList.contains("vditor-ir__marker--pre")&&!Ke.parentElement.classList.contains("vditor-wysiwyg__pre")&&!(Ke.classList.contains("language-mermaid")||Ke.classList.contains("language-flowchart")||Ke.classList.contains("language-echarts")||Ke.classList.contains("language-mindmap")||Ke.classList.contains("language-plantuml")||Ke.classList.contains("language-abc")||Ke.classList.contains("language-graphviz")||Ke.classList.contains("language-math"))&&(Be.defaultLang!==""&&Ke.className.indexOf("language-")===-1&&Ke.classList.add("language-"+Be.defaultLang),hljs.highlightElement(Ke),Be.lineNumber)){Ke.classList.add("vditor-linenumber");var tt=Ke.querySelector(".vditor-linenumber__temp");tt||((tt=document.createElement("div")).className="vditor-linenumber__temp",Ke.insertAdjacentElement("beforeend",tt));var at=getComputedStyle(Ke).whiteSpace,et=!1;at!=="pre-wrap"&&at!=="pre-line"||(et=!0);var Ot="",wt=Ke.textContent.split(/\r\n|\r|\n/g);wt.pop(),wt.map(function(xt){var it="";et&&(tt.textContent=xt||`
`,it=' style="height:'+tt.getBoundingClientRect().height+'px"'),Ot+="<span"+it+"></span>"}),tt.style.display="none",Ot='<span class="vditor-linenumber__rows">'+Ot+"</span>",Ke.insertAdjacentHTML("beforeend",Ot)}})})})})}},563:(Xe,Ve,P)=>{P.d(Ve,{K:()=>De});var Te=P(54),j=P(526),x=P(156),qe={},Be=function(He,Ye){var st=window.markmap,rt=st.Transformer,Ke=st.Markmap,tt=st.deriveOptions,at=(st.globalCSS,new rt);He.innerHTML='<svg style="width:100%"></svg>';var et=He.firstChild,Ot=Ke.create(et,null),wt=function(ut,Et){var Ht=ut.transform(Et),an=Object.keys(Ht.features).filter(function(Dt){return!qe[Dt]});an.forEach(function(Dt){qe[Dt]=!0});var Mt=ut.getAssets(an),vn=Mt.styles,Wn=Mt.scripts,$e=window.markmap;return vn&&$e.loadCSS(vn),Wn&&$e.loadJS(Wn),Ht}(at,Ye),xt=wt.root,it=wt.frontmatter,yt=tt(it==null?void 0:it.markmap);Ot.setData(xt,yt),Ot.fit()},De=function(He,Ye,st){Ye===void 0&&(Ye=Te.g.CDN);var rt=x.markmapRenderAdapter.getElements(He);rt.length!==0&&(0,j.G)(Ye+"/dist/js/markmap/markmap.min.js","vditorMermaidScript").then(function(){rt.forEach(function(Ke){var tt=x.markmapRenderAdapter.getCode(Ke);if(Ke.getAttribute("data-processed")!=="true"&&tt.trim()!==""){var at=document.createElement("div");at.className="language-markmap",Ke.parentNode.appendChild(at),Be(at,tt),Ke.parentNode.childNodes[0].nodeName=="CODE"&&Ke.parentNode.removeChild(Ke.parentNode.childNodes[0])}})})}},466:(Xe,Ve,P)=>{P.d(Ve,{H:()=>De});var Te=P(54),j=P(526),x=P(578),qe=P(51),Be=P(156),De=function(He,Ye){var st=Be.mathRenderAdapter.getElements(He);if(st.length!==0){var rt={cdn:Te.g.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(Ye&&Ye.math&&(Ye.math=Object.assign({},rt.math,Ye.math)),(Ye=Object.assign({},rt,Ye)).math.engine==="KaTeX")(0,x.c)(Ye.cdn+"/dist/js/katex/katex.min.css?v=0.16.9","vditorKatexStyle"),(0,j.G)(Ye.cdn+"/dist/js/katex/katex.min.js?v=0.16.9","vditorKatexScript").then(function(){(0,j.G)(Ye.cdn+"/dist/js/katex/mhchem.min.js?v=0.16.9","vditorKatexChemScript").then(function(){st.forEach(function(tt){if(!tt.parentElement.classList.contains("vditor-wysiwyg__pre")&&!tt.parentElement.classList.contains("vditor-ir__marker--pre")&&!tt.getAttribute("data-math")){var at=(0,qe.X)(Be.mathRenderAdapter.getCode(tt));tt.setAttribute("data-math",at);try{tt.innerHTML=katex.renderToString(at,{displayMode:tt.tagName==="DIV",output:"html",macros:Ye.math.macros})}catch(et){tt.innerHTML=et.message,tt.className="language-math vditor-reset--error"}tt.addEventListener("copy",function(et){et.stopPropagation(),et.preventDefault();var Ot=et.currentTarget.closest(".language-math");et.clipboardData.setData("text/html",Ot.innerHTML),et.clipboardData.setData("text/plain",Ot.getAttribute("data-math"))})}})})});else if(Ye.math.engine==="MathJax"){window.MathJax||(window.MathJax={loader:{paths:{mathjax:Ye.cdn+"/dist/js/mathjax"}},startup:{typeset:!1},tex:{macros:Ye.math.macros}},Object.assign(window.MathJax,Ye.math.mathJaxOptions)),(0,j.J)(Ye.cdn+"/dist/js/mathjax/tex-svg-full.js","protyleMathJaxScript");var Ke=function(tt,at){var et=(0,qe.X)(tt.textContent).trim(),Ot=window.MathJax.getMetricsFor(tt);Ot.display=tt.tagName==="DIV",window.MathJax.tex2svgPromise(et,Ot).then(function(wt){tt.innerHTML="",tt.setAttribute("data-math",et),tt.append(wt),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var xt=wt.querySelector('[data-mml-node="merror"]');xt&&xt.textContent.trim()!==""&&(tt.innerHTML=xt.textContent.trim(),tt.className="vditor-reset--error"),at&&at()})};window.MathJax.startup.promise.then(function(){for(var tt=[],at=function(Ot){var wt=st[Ot];wt.parentElement.classList.contains("vditor-wysiwyg__pre")||wt.parentElement.classList.contains("vditor-ir__marker--pre")||wt.getAttribute("data-math")||!(0,qe.X)(wt.textContent).trim()||tt.push(function(xt){Ot===st.length-1?Ke(wt):Ke(wt,xt)})},et=0;et<st.length;et++)at(et);(function(Ot){if(Ot.length!==0){var wt=0,xt=Ot[Ot.length-1],it=function(){var yt=Ot[wt++];yt===xt?yt():yt(it)};it()}})(tt)})}}}},554:(Xe,Ve,P)=>{P.d(Ve,{Y:()=>j});var Te=P(835),j=function(x){x&&x.querySelectorAll("a").forEach(function(qe){var Be=qe.getAttribute("href");Be&&(Be.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?function(De,He){De.insertAdjacentHTML("afterend",'<video controls="controls" src="'+He+'"></video>'),De.remove()}(qe,Be):Be.match(/^.+.(mp3|wav|flac)$/)?function(De,He){De.insertAdjacentHTML("afterend",'<audio controls="controls" src="'+He+'"></audio>'),De.remove()}(qe,Be):function(De,He){var Ye=He.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),st=He.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),rt=He.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),Ke=He.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),tt=He.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),at=He.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),et=He.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),Ot=He.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);if(Ye&&Ye[1].length===11)De.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'+Ye[1]+(Ye[2]?"?start="+Ye[2]:"")+'"></iframe>'),De.remove();else if(st&&st[1])De.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'+st[1]+'"></iframe>'),De.remove();else if(rt&&rt[1])De.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='+rt[1]+'"></iframe>'),De.remove();else if(Ke&&Ke[1])De.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`+Ke[1]+'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>'),De.remove();else if(tt&&tt[0])De.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`+encodeURIComponent(tt[0])+'"></iframe>'),De.remove();else if(at&&at[2])De.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`+at[2]+'"></iframe>'),De.remove();else if(He.indexOf("bilibili.com")>-1&&(He.indexOf("bvid=")>-1||et&&et[1])){var wt={bvid:(0,Te.o)("bvid",He)||et&&et[1],page:"1",high_quality:"1",as_wide:"1",allowfullscreen:"true",autoplay:"0"};new URL(He.startsWith("http")?He:"https:"+He).search.split("&").forEach(function(yt,ut){if(yt){ut===0&&(yt=yt.substr(1));var Et=yt.split("=");wt[Et[0]]=Et[1]}});var xt="https://player.bilibili.com/player.html?",it=Object.keys(wt);it.forEach(function(yt,ut){xt+=yt+"="+wt[yt],ut<it.length-1&&(xt+="&")}),De.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="'+xt+'"></iframe>'),De.remove()}else Ot&&Ot[1]&&(De.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'+Ot[1]+'"></iframe>'),De.remove())}(qe,Be))})}},40:(Xe,Ve,P)=>{P.d(Ve,{i:()=>He});var Te=P(54),j=P(526),x=P(156),qe=P(835),Be=function(Ye,st,rt,Ke){return new(rt||(rt=Promise))(function(tt,at){function et(xt){try{wt(Ke.next(xt))}catch(it){at(it)}}function Ot(xt){try{wt(Ke.throw(xt))}catch(it){at(it)}}function wt(xt){var it;xt.done?tt(xt.value):(it=xt.value,it instanceof rt?it:new rt(function(yt){yt(it)})).then(et,Ot)}wt((Ke=Ke.apply(Ye,st||[])).next())})},De=function(Ye,st){var rt,Ke,tt,at,et={label:0,sent:function(){if(1&tt[0])throw tt[1];return tt[1]},trys:[],ops:[]};return at={next:Ot(0),throw:Ot(1),return:Ot(2)},typeof Symbol=="function"&&(at[Symbol.iterator]=function(){return this}),at;function Ot(wt){return function(xt){return function(it){if(rt)throw new TypeError("Generator is already executing.");for(;et;)try{if(rt=1,Ke&&(tt=2&it[0]?Ke.return:it[0]?Ke.throw||((tt=Ke.return)&&tt.call(Ke),0):Ke.next)&&!(tt=tt.call(Ke,it[1])).done)return tt;switch(Ke=0,tt&&(it=[2&it[0],tt.value]),it[0]){case 0:case 1:tt=it;break;case 4:return et.label++,{value:it[1],done:!1};case 5:et.label++,Ke=it[1],it=[0];continue;case 7:it=et.ops.pop(),et.trys.pop();continue;default:if(tt=et.trys,!((tt=tt.length>0&&tt[tt.length-1])||it[0]!==6&&it[0]!==2)){et=0;continue}if(it[0]===3&&(!tt||it[1]>tt[0]&&it[1]<tt[3])){et.label=it[1];break}if(it[0]===6&&et.label<tt[1]){et.label=tt[1],tt=it;break}if(tt&&et.label<tt[2]){et.label=tt[2],et.ops.push(it);break}tt[2]&&et.ops.pop(),et.trys.pop();continue}it=st.call(Ye,et)}catch(yt){it=[6,yt],Ke=0}finally{rt=tt=0}if(5&it[0])throw it[1];return{value:it[0]?it[1]:void 0,done:!0}}([wt,xt])}}},He=function(Ye,st,rt){st===void 0&&(st=Te.g.CDN);var Ke=x.mermaidRenderAdapter.getElements(Ye);Ke.length!==0&&(0,j.G)(st+"/dist/js/mermaid/mermaid.min.js","vditorMermaidScript").then(function(){var tt={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8,showSequenceNumbers:!0},gantt:{leftPadding:75,rightPadding:20}};rt==="dark"&&(tt.theme="dark"),mermaid.initialize(tt),Ke.forEach(function(at){return Be(void 0,void 0,void 0,function(){var et,Ot,wt,xt,it;return De(this,function(yt){switch(yt.label){case 0:if(et=x.mermaidRenderAdapter.getCode(at),at.getAttribute("data-processed")==="true"||et.trim()==="")return[2];Ot="mermaid"+(0,qe.W)(),yt.label=1;case 1:return yt.trys.push([1,3,,4]),[4,mermaid.render(Ot,at.textContent)];case 2:return wt=yt.sent(),at.innerHTML=wt.svg,[3,4];case 3:return xt=yt.sent(),it=document.querySelector("#"+Ot),at.innerHTML=it.outerHTML+`<br>
<div style="text-align: left"><small>`+xt.message.replace(/\n/,"<br>")+"</small></div>",it.parentElement.remove(),[3,4];case 4:return at.setAttribute("data-processed","true"),[2]}})})})})}},749:(Xe,Ve,P)=>{P.d(Ve,{P:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De,He){Be===void 0&&(Be=document),De===void 0&&(De=Te.g.CDN);var Ye=x.mindmapRenderAdapter.getElements(Be);Ye.length>0&&(0,j.G)(De+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){Ye.forEach(function(st){if(!st.parentElement.classList.contains("vditor-wysiwyg__pre")&&!st.parentElement.classList.contains("vditor-ir__marker--pre")){var rt=x.mindmapRenderAdapter.getCode(st);if(rt)try{if(st.getAttribute("data-processed")==="true")return;echarts.init(st,He==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(rt))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(Ke,tt){var at;return!((at=tt==null?void 0:tt.data)===null||at===void 0)&&at.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),st.setAttribute("data-processed","true")}catch(Ke){st.className="vditor-reset--error",st.innerHTML="mindmap render error: <br>"+Ke}}})})}},818:(Xe,Ve,P)=>{P.d(Ve,{k:()=>x});var Te=P(64),j=P(466),x=function(qe,Be,De){var He="",Ye=[];if(Array.from(qe.children).forEach(function(tt,at){if((0,Te.W)(tt)){if(De){var et=tt.id.lastIndexOf("_");tt.id=tt.id.substring(0,et===-1?void 0:et)+"_"+at}Ye.push(tt.id),He+=tt.outerHTML.replace("<wbr>","")}}),He==="")return Be.innerHTML="","";var st=document.createElement("div");if(De)De.lute.SetToC(!0),De.currentMode!=="wysiwyg"||De.preview.element.contains(qe)?De.currentMode!=="ir"||De.preview.element.contains(qe)?st.innerHTML=De.lute.HTML2VditorDOM("<p>[ToC]</p>"+He):st.innerHTML=De.lute.SpinVditorIRDOM("<p>[ToC]</p>"+He):st.innerHTML=De.lute.SpinVditorDOM("<p>[ToC]</p>"+He),De.lute.SetToC(De.options.preview.markdown.toc);else{Be.classList.add("vditor-outline");var rt=Lute.New();rt.SetToC(!0),st.innerHTML=rt.HTML2VditorDOM("<p>[ToC]</p>"+He)}var Ke=st.firstElementChild.querySelectorAll("li > span[data-target-id]");return Ke.forEach(function(tt,at){if(tt.nextElementSibling&&tt.nextElementSibling.tagName==="UL"){var et="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";document.getElementById("vditorIconScript")||(et='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),tt.innerHTML=et+"<span>"+tt.innerHTML+"</span>"}else tt.innerHTML="<svg></svg><span>"+tt.innerHTML+"</span>";tt.setAttribute("data-target-id",Ye[at])}),He=st.firstElementChild.innerHTML,Ke.length===0?(Be.innerHTML="",He):(Be.innerHTML=He,De&&(0,j.H)(Be,{cdn:De.options.cdn,math:De.options.preview.math}),Be.firstElementChild.addEventListener("click",function(tt){for(var at=tt.target;at&&!at.isEqualNode(Be);){if(at.classList.contains("vditor-outline__action")){at.classList.contains("vditor-outline__action--close")?(at.classList.remove("vditor-outline__action--close"),at.parentElement.nextElementSibling.setAttribute("style","display:block")):(at.classList.add("vditor-outline__action--close"),at.parentElement.nextElementSibling.setAttribute("style","display:none")),tt.preventDefault(),tt.stopPropagation();break}if(at.getAttribute("data-target-id")){tt.preventDefault(),tt.stopPropagation();var et=document.getElementById(at.getAttribute("data-target-id"));if(!et)return;if(De)if(De.options.height==="auto"){var Ot=et.offsetTop+De.element.offsetTop;De.options.toolbarConfig.pin||(Ot+=De.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,Ot)}else De.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,De.element.offsetTop),De.preview.element.contains(qe)?qe.parentElement.scrollTop=et.offsetTop:qe.scrollTop=et.offsetTop;else window.scrollTo(window.scrollX,et.offsetTop);break}at=at.parentElement}}),He)}},408:(Xe,Ve,P)=>{P.d(Ve,{B:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De){Be===void 0&&(Be=document),De===void 0&&(De=Te.g.CDN);var He=x.plantumlRenderAdapter.getElements(Be);He.length!==0&&(0,j.G)(De+"/dist/js/plantuml/plantuml-encoder.min.js","vditorPlantumlScript").then(function(){He.forEach(function(Ye){if(!Ye.parentElement.classList.contains("vditor-wysiwyg__pre")&&!Ye.parentElement.classList.contains("vditor-ir__marker--pre")){var st=x.plantumlRenderAdapter.getCode(Ye).trim();if(st)try{Ye.innerHTML='<object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/~1'+plantumlEncoder.encode(st)+'"/>'}catch(rt){Ye.className="vditor-reset--error",Ye.innerHTML="plantuml render error: <br>"+rt}}})})}},895:(Xe,Ve,P)=>{P.d(Ve,{X:()=>Te});var Te=function(j){var x=Lute.New();return x.PutEmojis(j.emojis),x.SetEmojiSite(j.emojiSite),x.SetHeadingAnchor(j.headingAnchor),x.SetInlineMathAllowDigitAfterOpenMarker(j.inlineMathDigit),x.SetAutoSpace(j.autoSpace),x.SetToC(j.toc),x.SetFootnotes(j.footnotes),x.SetFixTermTypo(j.fixTermTypo),x.SetVditorCodeBlockPreview(j.codeBlockPreview),x.SetVditorMathBlockPreview(j.mathBlockPreview),x.SetSanitize(j.sanitize),x.SetChineseParagraphBeginningSpace(j.paragraphBeginningSpace),x.SetRenderListStyle(j.listStyle),x.SetLinkBase(j.linkBase),x.SetLinkPrefix(j.linkPrefix),x.SetMark(j.mark),x.SetGFMAutoLink(j.gfmAutoLink),j.lazyLoadImage&&x.SetImageLazyLoading(j.lazyLoadImage),x}},863:(Xe,Ve,P)=>{P.d(Ve,{E:()=>Te});var Te=function(j,x,qe){qe===void 0&&(qe="classic");var Be=j.getBoundingClientRect();document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'+(qe==="dark"?" vditor--dark":"")+`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `+window.VditorI18n.spin+`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`+window.VditorI18n.close+`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `+j.width+"px;height:"+j.height+"px;transform: translate3d("+Be.left+"px, "+(Be.top-36)+'px, 0)" src="'+j.getAttribute("src")+`">
    </div>
</div>`),document.body.style.overflow="hidden";var De=document.querySelector(".vditor-img img"),He="translate3d("+Math.max(0,window.innerWidth-j.naturalWidth)/2+"px, "+Math.max(0,window.innerHeight-36-j.naturalHeight)/2+"px, 0)";setTimeout(function(){De.setAttribute("style","transition: transform .3s ease-in-out;transform: "+He),setTimeout(function(){De.parentElement.scrollTo((De.parentElement.scrollWidth-De.parentElement.clientWidth)/2,(De.parentElement.scrollHeight-De.parentElement.clientHeight)/2)},400)});var Ye=document.querySelector(".vditor-img__btn");Ye.addEventListener("click",function(){var st=parseInt(Ye.getAttribute("data-deg"),10)+90;st/90%2==1&&j.naturalWidth>De.parentElement.clientHeight?De.style.transform="translate3d("+Math.max(0,window.innerWidth-j.naturalWidth)/2+"px, "+(j.naturalWidth/2-j.naturalHeight/2)+"px, 0) rotateZ("+st+"deg)":De.style.transform=He+" rotateZ("+st+"deg)",Ye.setAttribute("data-deg",st.toString()),setTimeout(function(){De.parentElement.scrollTo((De.parentElement.scrollWidth-De.parentElement.clientWidth)/2,(De.parentElement.scrollHeight-De.parentElement.clientHeight)/2)},400)})}},312:(Xe,Ve,P)=>{P.d(Ve,{Y:()=>x});var Te=P(54),j=P(578),x=function(qe,Be){Be===void 0&&(Be=Te.g.CDN),Te.g.CODE_THEME.includes(qe)||(qe="github");var De=document.getElementById("vditorHljsStyle"),He=Be+"/dist/js/highlight.js/styles/"+qe+".css";De?De.getAttribute("href")!==He&&(De.remove(),(0,j.c)(He,"vditorHljsStyle")):(0,j.c)(He,"vditorHljsStyle")}},227:(Xe,Ve,P)=>{P.d(Ve,{Z:()=>j});var Te=P(578),j=function(x,qe){if(x&&qe){var Be=document.getElementById("vditorContentTheme"),De=qe+"/"+x+".css";Be?Be.getAttribute("href")!==De&&(Be.remove(),(0,Te.c)(De,"vditorContentTheme")):(0,Te.c)(De,"vditorContentTheme")}}},526:(Xe,Ve,P)=>{P.d(Ve,{G:()=>j,J:()=>Te});var Te=function(x,qe){if(document.getElementById(qe))return!1;var Be=new XMLHttpRequest;Be.open("GET",x,!1),Be.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),Be.send("");var De=document.createElement("script");De.type="text/javascript",De.text=Be.responseText,De.id=qe,document.head.appendChild(De)},j=function(x,qe){return new Promise(function(Be,De){if(document.getElementById(qe))return Be(),!1;var He=document.createElement("script");He.src=x,He.async=!0,document.head.appendChild(He),He.onerror=function(Ye){De(Ye)},He.onload=function(){if(document.getElementById(qe))return He.remove(),Be(),!1;He.id=qe,Be()}})}},578:(Xe,Ve,P)=>{P.d(Ve,{c:()=>Te});var Te=function(j,x){if(!document.getElementById(x)){var qe=document.createElement("link");qe.id=x,qe.rel="stylesheet",qe.type="text/css",qe.href=j,document.getElementsByTagName("head")[0].appendChild(qe)}}},51:(Xe,Ve,P)=>{P.d(Ve,{X:()=>Te});var Te=function(j){return j.replace(/\u00a0/g," ")}},835:(Xe,Ve,P)=>{P.d(Ve,{W:()=>Te,o:()=>j});var Te=function(){return([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(x){return(parseInt(x,10)^window.crypto.getRandomValues(new Uint32Array(1))[0]&15>>parseInt(x,10)/4).toString(16)})},j=function(x,qe){qe===void 0&&(qe=window.location.search);var Be=qe.substring(qe.indexOf("?")),De=Be.indexOf("#");return new URLSearchParams(Be.substring(0,De>=0?De:void 0)).get(x)}},827:(Xe,Ve,P)=>{P.d(Ve,{fb:()=>j,lG:()=>Te});var Te=function(x,qe){if(!x)return!1;x.nodeType===3&&(x=x.parentElement);for(var Be=x,De=!1;Be&&!De&&!Be.classList.contains("vditor-reset");)Be.nodeName===qe?De=!0:Be=Be.parentElement;return De&&Be},j=function(x,qe){if(!x)return!1;x.nodeType===3&&(x=x.parentElement);for(var Be=x,De=!1;Be&&!De&&!Be.classList.contains("vditor-reset");)Be.classList.contains(qe)?De=!0:Be=Be.parentElement;return De&&Be}},64:(Xe,Ve,P)=>{P.d(Ve,{W:()=>Te});var Te=function(j){var x=function(qe,Be){if(!qe)return!1;qe.nodeType===3&&(qe=qe.parentElement);for(var De=qe,He=!1;De&&!He&&!De.classList.contains("vditor-reset");)De.nodeName.indexOf(Be)===0?He=!0:De=De.parentElement;return He&&De}(j,"H");return!(!x||x.tagName.length!==2||x.tagName==="HR")&&x}},640:(Xe,Ve,P)=>{P.d(Ve,{T:()=>Te});var Te=function(){for(var j=[],x=0;x<arguments.length;x++)j[x]=arguments[x];for(var qe={},Be=function(He){for(var Ye in He)He.hasOwnProperty(Ye)&&(Object.prototype.toString.call(He[Ye])==="[object Object]"?qe[Ye]=Te(qe[Ye],He[Ye]):qe[Ye]=He[Ye])},De=0;De<j.length;De++)Be(j[De]);return qe}},393:(Xe,Ve,P)=>{P.d(Ve,{Hc:()=>Te}),P(54);var Te=function(j){var x=window.getSelection();x.removeAllRanges(),x.addRange(j)}}},A={};function We(Xe){var Ve=A[Xe];if(Ve!==void 0)return Ve.exports;var P=A[Xe]={exports:{}};return C[Xe](P,P.exports,We),P.exports}We.d=(Xe,Ve)=>{for(var P in Ve)We.o(Ve,P)&&!We.o(Xe,P)&&Object.defineProperty(Xe,P,{enumerable:!0,get:Ve[P]})},We.o=(Xe,Ve)=>Object.prototype.hasOwnProperty.call(Xe,Ve),We.r=Xe=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(Xe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Xe,"__esModule",{value:!0})};var Ge={};return(()=>{We.d(Ge,{default:()=>Dt});var Xe=We(478),Ve=We(156),P=We(314),Te=We(730),j=We(66),x=We(218),qe=We(702),Be=function(vt){vt===void 0&&(vt=document);var nn=function(_t){var Nt=document.createElement("img");Nt.src=_t.getAttribute("data-src"),Nt.addEventListener("load",function(){_t.getAttribute("style")||_t.getAttribute("class")||_t.getAttribute("width")||_t.getAttribute("height")||Nt.naturalHeight>Nt.naturalWidth&&Nt.naturalWidth/Nt.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&Nt.naturalHeight>window.innerHeight-40&&(_t.style.height=window.innerHeight-40+"px"),_t.src=Nt.src}),_t.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return vt.querySelectorAll("img").forEach(function(_t){_t.getAttribute("data-src")&&nn(_t)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),vt.querySelectorAll("img").forEach(function(_t){window.vditorImageIntersectionObserver.observe(_t)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(_t){_t.forEach(function(Nt){(Nt.isIntersecting===void 0?Nt.intersectionRatio!==0:Nt.isIntersecting)&&Nt.target.getAttribute("data-src")&&nn(Nt.target)})}),vt.querySelectorAll("img").forEach(function(_t){window.vditorImageIntersectionObserver.observe(_t)}))},De=We(466),He=We(554),Ye=We(40),st=We(563),rt=We(749),Ke=We(818),tt=We(408),at=We(54),et=We(227),Ot=We(526),wt=We(827),xt=We(640),it=We(895),yt=We(393),ut=function(vt,nn){if(nn===void 0&&(nn="zh_CN"),typeof speechSynthesis!="undefined"&&typeof SpeechSynthesisUtterance!="undefined"){var _t=function(){var dn,en;return speechSynthesis.getVoices().forEach(function(Nn){Nn.lang===nn.replace("_","-")&&(dn=Nn),Nn.default&&(en=Nn)}),dn||(dn=en),dn},Nt='<svg><use xlink:href="#vditor-icon-play"></use></svg>',ln='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';document.getElementById("vditorIconScript")||(Nt='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',ln='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>');var on=document.querySelector(".vditor-speech");on||((on=document.createElement("button")).className="vditor-speech",vt.insertAdjacentElement("beforeend",on),speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=_t));var dt=_t(),ur=new SpeechSynthesisUtterance;ur.voice=dt,ur.onend=ur.onerror=function(){on.style.display="none",speechSynthesis.cancel(),on.classList.remove("vditor-speech--current"),on.innerHTML=Nt},vt.addEventListener(window.ontouchstart!==void 0?"touchend":"click",function(dn){var en=dn.target;if(en.classList.contains("vditor-speech")||en.parentElement.classList.contains("vditor-speech"))return on.classList.contains("vditor-speech--current")?speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),on.innerHTML=ln):(speechSynthesis.pause(),on.innerHTML=Nt)):(ur.text=on.getAttribute("data-text"),speechSynthesis.speak(ur),on.classList.add("vditor-speech--current"),on.innerHTML=ln),(0,yt.Hc)(window.vditorSpeechRange),void vt.focus();if(on.style.display="none",speechSynthesis.cancel(),on.classList.remove("vditor-speech--current"),on.innerHTML=Nt,getSelection().rangeCount!==0){var Nn=getSelection().getRangeAt(0),fn=Nn.toString().trim();if(fn){window.vditorSpeechRange=Nn.cloneRange();var cn=Nn.getBoundingClientRect();on.innerHTML=Nt,on.style.display="block",on.style.top=cn.top+cn.height+document.querySelector("html").scrollTop-20+"px",window.ontouchstart!==void 0?on.style.left=dn.changedTouches[dn.changedTouches.length-1].pageX+2+"px":on.style.left=dn.clientX+2+"px",on.setAttribute("data-text",fn)}}})}},Et=function(vt,nn,_t,Nt){return new(_t||(_t=Promise))(function(ln,on){function dt(en){try{dn(Nt.next(en))}catch(Nn){on(Nn)}}function ur(en){try{dn(Nt.throw(en))}catch(Nn){on(Nn)}}function dn(en){var Nn;en.done?ln(en.value):(Nn=en.value,Nn instanceof _t?Nn:new _t(function(fn){fn(Nn)})).then(dt,ur)}dn((Nt=Nt.apply(vt,nn||[])).next())})},Ht=function(vt,nn){var _t,Nt,ln,on,dt={label:0,sent:function(){if(1&ln[0])throw ln[1];return ln[1]},trys:[],ops:[]};return on={next:ur(0),throw:ur(1),return:ur(2)},typeof Symbol=="function"&&(on[Symbol.iterator]=function(){return this}),on;function ur(dn){return function(en){return function(Nn){if(_t)throw new TypeError("Generator is already executing.");for(;dt;)try{if(_t=1,Nt&&(ln=2&Nn[0]?Nt.return:Nn[0]?Nt.throw||((ln=Nt.return)&&ln.call(Nt),0):Nt.next)&&!(ln=ln.call(Nt,Nn[1])).done)return ln;switch(Nt=0,ln&&(Nn=[2&Nn[0],ln.value]),Nn[0]){case 0:case 1:ln=Nn;break;case 4:return dt.label++,{value:Nn[1],done:!1};case 5:dt.label++,Nt=Nn[1],Nn=[0];continue;case 7:Nn=dt.ops.pop(),dt.trys.pop();continue;default:if(ln=dt.trys,!((ln=ln.length>0&&ln[ln.length-1])||Nn[0]!==6&&Nn[0]!==2)){dt=0;continue}if(Nn[0]===3&&(!ln||Nn[1]>ln[0]&&Nn[1]<ln[3])){dt.label=Nn[1];break}if(Nn[0]===6&&dt.label<ln[1]){dt.label=ln[1],ln=Nn;break}if(ln&&dt.label<ln[2]){dt.label=ln[2],dt.ops.push(Nn);break}ln[2]&&dt.ops.pop(),dt.trys.pop();continue}Nn=nn.call(vt,dt)}catch(fn){Nn=[6,fn],Nt=0}finally{_t=ln=0}if(5&Nn[0])throw Nn[1];return{value:Nn[0]?Nn[1]:void 0,done:!0}}([dn,en])}}},an=function(vt){var nn,_t={anchor:0,cdn:at.g.CDN,customEmoji:{},emojiPath:at.g.CDN+"/dist/images/emoji",hljs:at.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:at.g.MARKDOWN_OPTIONS,math:at.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},render:{media:{enable:!0}},theme:at.g.THEME_OPTIONS};return vt.cdn&&(!((nn=vt.theme)===null||nn===void 0)&&nn.path||(_t.theme.path=vt.cdn+"/dist/css/content-theme"),vt.emojiPath||(_t.emojiPath=vt.cdn+"/dist/images/emoji")),(0,xt.T)(_t,vt)},Mt=function(vt,nn){var _t=an(nn);return(0,Ot.G)(_t.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then(function(){var Nt=(0,it.X)({autoSpace:_t.markdown.autoSpace,gfmAutoLink:_t.markdown.gfmAutoLink,codeBlockPreview:_t.markdown.codeBlockPreview,emojiSite:_t.emojiPath,emojis:_t.customEmoji,fixTermTypo:_t.markdown.fixTermTypo,footnotes:_t.markdown.footnotes,headingAnchor:_t.anchor!==0,inlineMathDigit:_t.math.inlineDigit,lazyLoadImage:_t.lazyLoadImage,linkBase:_t.markdown.linkBase,linkPrefix:_t.markdown.linkPrefix,listStyle:_t.markdown.listStyle,mark:_t.markdown.mark,mathBlockPreview:_t.markdown.mathBlockPreview,paragraphBeginningSpace:_t.markdown.paragraphBeginningSpace,sanitize:_t.markdown.sanitize,toc:_t.markdown.toc});return nn!=null&&nn.renderers&&Nt.SetJSRenderers({renderers:{Md2HTML:nn.renderers}}),Nt.SetHeadingID(!0),Nt.Md2HTML(vt)})},vn=function(vt,nn,_t){return Et(void 0,void 0,void 0,function(){var Nt,ln,on;return Ht(this,function(dt){switch(dt.label){case 0:return Nt=an(_t),[4,Mt(nn,Nt)];case 1:if(ln=dt.sent(),Nt.transform&&(ln=Nt.transform(ln)),vt.innerHTML=ln,vt.classList.add("vditor-reset"),Nt.i18n)return[3,5];if(["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(Nt.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return on="vditorI18nScript"+Nt.lang,document.querySelectorAll('head script[id^="vditorI18nScript"]').forEach(function(dn){dn.id!==on&&document.head.removeChild(dn)}),[4,(0,Ot.G)(Nt.cdn+"/dist/js/i18n/"+Nt.lang+".js",on)];case 3:dt.sent(),dt.label=4;case 4:return[3,6];case 5:window.VditorI18n=Nt.i18n,dt.label=6;case 6:return Nt.icon?[4,(0,Ot.G)(Nt.cdn+"/dist/js/icons/"+Nt.icon+".js","vditorIconScript")]:[3,8];case 7:dt.sent(),dt.label=8;case 8:return(0,et.Z)(Nt.theme.current,Nt.theme.path),Nt.anchor===1&&vt.classList.add("vditor-reset--anchor"),(0,Te.O)(vt,Nt.hljs),(0,qe.s)(Nt.hljs,vt,Nt.cdn),(0,De.H)(vt,{cdn:Nt.cdn,math:Nt.math}),(0,Ye.i)(vt,Nt.cdn,Nt.mode),(0,st.K)(vt,Nt.cdn,Nt.mode),(0,j.P)(vt,Nt.cdn),(0,x.v)(vt,Nt.cdn),(0,P.p)(vt,Nt.cdn,Nt.mode),(0,rt.P)(vt,Nt.cdn,Nt.mode),(0,tt.B)(vt,Nt.cdn),(0,Xe.Q)(vt,Nt.cdn),Nt.render.media.enable&&(0,He.Y)(vt),Nt.speech.enable&&ut(vt),Nt.anchor!==0&&(ur=Nt.anchor,document.querySelectorAll(".vditor-anchor").forEach(function(dn){ur===1&&dn.classList.add("vditor-anchor--left"),dn.onclick=function(){var en=dn.getAttribute("href").substr(1),Nn=document.getElementById("vditorAnchor-"+en).offsetTop;document.querySelector("html").scrollTop=Nn}}),window.onhashchange=function(){var dn=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));dn&&(document.querySelector("html").scrollTop=dn.offsetTop)}),Nt.after&&Nt.after(),Nt.lazyLoadImage&&Be(vt),vt.addEventListener("click",function(dn){var en=(0,wt.lG)(dn.target,"SPAN");if(en&&(0,wt.fb)(en,"vditor-toc")){var Nn=vt.querySelector("#"+en.getAttribute("data-target-id"));Nn&&window.scrollTo(window.scrollX,Nn.offsetTop)}}),[2]}var ur})})},Wn=We(863),$e=We(312);const Dt=function(){function vt(){}return vt.adapterRender=Ve,vt.previewImage=Wn.E,vt.codeRender=Te.O,vt.graphvizRender=x.v,vt.highlightRender=qe.s,vt.mathRender=De.H,vt.mermaidRender=Ye.i,vt.markmapRender=st.K,vt.flowchartRender=j.P,vt.chartRender=P.p,vt.abcRender=Xe.Q,vt.mindmapRender=rt.P,vt.plantumlRender=tt.B,vt.outlineRender=Ke.k,vt.mediaRender=He.Y,vt.speechRender=ut,vt.lazyLoadImageRender=Be,vt.md2html=Mt,vt.preview=vn,vt.setCodeTheme=$e.Y,vt.setContentTheme=et.Z,vt}()})(),Ge=Ge.default})())})(method_min);var method_minExports=method_min.exports;const VditorPreview=getDefaultExportFromCjs(method_minExports),getTheme=(v,y="default")=>{const C=v==="dark";switch(y){case"default":return C?"dark":"classic";case"content":return C?"dark":"light";case"code":return C?"dracula":"github"}},_sfc_main$r=defineComponent({__name:"MarkdownViewer",props:{value:{type:String},class:{type:String}},setup(v){const y=v,C=ref(null),A=ref(null),{getDarkMode:We}=useRootSetting();function Ge(){const Ve=unref(C);A.value=VditorPreview.preview(Ve,y.value,{mode:getTheme(We.value,"content"),theme:{current:getTheme(We.value,"content")},hljs:{style:getTheme(We.value,"code")}})}watch(()=>We.value,Ve=>{VditorPreview.setContentTheme(getTheme(Ve,"content")),VditorPreview.setCodeTheme(getTheme(Ve,"code")),Ge()}),watch(()=>y.value,(Ve,P)=>{Ve!==P&&Ge()});function Xe(){var P;const Ve=unref(A);if(Ve){try{(P=Ve==null?void 0:Ve.destroy)==null||P.call(Ve)}catch(Te){}A.value=null}}return onMountedOrActivated(Ge),onBeforeUnmount(Xe),onDeactivated(Xe),(Ve,P)=>(openBlock(),createElementBlock("div",{ref_key:"viewerRef",ref:C,id:"markdownViewer",class:normalizeClass(Ve.$props.class)},null,2))}}),_hoisted_1$9={key:0,class:"h-screen"},_hoisted_2$1=["src","srcdoc"],_hoisted_3$1={key:1,class:"h-screen"},_sfc_main$q=defineComponent({__name:"index",setup(v){const[y,{setModalProps:C,closeModal:A}]=useModalInner(Be=>no(this,null,function*(){We.value=toRaw(Be.modalTitle),Ge.value=toRaw(Be.modalMinHeight),Xe.value=toRaw(Be.modalHeight),Ve.value=toRaw(Be.modalWidth),P.value=toRaw(Be.iframeSrc),Te.value=toRaw(Be.iframeSrcDoc),j.value=toRaw(Be.markdownDoc),C({confirmLoading:!1,title:We,width:Ve,minHeight:Xe,height:Xe,showOkBtn:!1,cancelText:"关闭"})})),We=ref("Iframe Modal"),Ge=ref("500px"),Xe=ref("500px"),Ve=ref("800px"),P=ref(""),Te=ref(),j=ref();function x(){}function qe(){return no(this,null,function*(){C({confirmLoading:!1}),A()})}return(Be,De)=>(openBlock(),createBlock(unref(BasicModal),mergeProps(Be.$attrs,{onRegister:unref(y),title:"测试",onOk:qe,onCancel:x}),{default:withCtx(()=>[Te.value||P.value?(openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("iframe",{src:P.value,srcdoc:Te.value,style:{width:"100%",height:"100%",border:"none"}},null,8,_hoisted_2$1)])):createCommentVNode("",!0),j.value?(openBlock(),createElementBlock("div",_hoisted_3$1,[createVNode(_sfc_main$r,{value:j.value,style:{width:"100%",height:"100%",border:"none"}},null,8,["value"])])):createCommentVNode("",!0)]),_:1},16,["onRegister"]))}}),_sfc_main$p=defineComponent({__name:"index",props:{doc:{type:Object,default:null},link:{type:Object,default:null},markdownDoc:{type:Object,default:null}},setup(v){const[y,{openModal:C}]=useModal(),A=v,We=()=>{C(!0,{modalTitle:"预览框",modalWidth:900,modalMinHeight:600,iframeSrcDoc:A.doc,iframeSrc:A.link,markdownDoc:A.markdownDoc})},Ge=()=>{window.open(A.link)};return(Xe,Ve)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(unref(RadioGroup),{size:"small"},{default:withCtx(()=>[createVNode(unref(RadioButton),{disabled:!v.doc&&!v.link&&!v.markdownDoc,onClick:We},{default:withCtx(()=>[createTextVNode(" 预览 ")]),_:1},8,["disabled"]),createVNode(unref(RadioButton),{disabled:!v.link,onClick:Ge},{default:withCtx(()=>[createTextVNode(" 跳转 ")]),_:1},8,["disabled"])]),_:1}),createVNode(_sfc_main$q,{onRegister:unref(y)},null,8,["onRegister"])],64))}}),_sfc_main$o=defineComponent({name:"BasicUpload",__name:"BasicPreview",props:uploadContainerProps,emits:["change","delete","preview-delete","update:value"],setup(v,{emit:y}){const C=v,A=y,{t:We}=useI18n(),[Ge,{openModal:Xe}]=useModal(),Ve=ref([]),P=computed(()=>{const{emptyHidePreview:x}=C;return x&&x?Ve.value.length>0:!0});function Te(x){Ve.value=[...x||[]],A("update:value",Ve.value),A("change",Ve.value)}function j(x){A("preview-delete",x)}return(x,qe)=>{const Be=resolveComponent("a-button");return openBlock(),createElementBlock("div",null,[createVNode(unref(Space),null,{default:withCtx(()=>[P.value?(openBlock(),createBlock(unref(Tooltip),{key:0,placement:"bottom"},{title:withCtx(()=>[createTextVNode(toDisplayString(unref(We)("component.upload.uploaded"))+" ",1),C.value.length?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(C.value.length),1)],64)):createCommentVNode("",!0)]),default:withCtx(()=>[createVNode(Be,{onClick:unref(Xe)},{default:withCtx(()=>[createVNode(_sfc_main$G,{icon:"bi:eye"}),C.value.length&&x.showPreviewNumber?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(C.value.length),1)],64)):createCommentVNode("",!0)]),_:1},8,["onClick"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(_sfc_main$u,{value:C.value,onRegister:unref(Ge),onListChange:Te,onDelete:j},null,8,["value","onRegister"])])}}}),ImageType=["IMAGE","AVATAR"],IconType=["ICON"],FilesType=["FILE"],TransType=["PICKER","OPTIONS","TREE","RADIO","CLASS_OPTIONS"];function getColumns(v){return v&&v.length>0?v.map(y=>{let C={title:y.title,width:120,annoType:y.dataType};return C.dataIndex=y.fieldName,C.defaultHidden=!y.show,C.sorter={multiple:1},TransType.includes(y.dataType)&&(C.customRender=({value:A,record:We})=>We.joinResMap[`${y.fieldName.toLowerCase()}_label`]),ImageType.includes(y.dataType)&&(C.customRender=({value:A,record:We})=>{let Ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==";return createVNode(Image$1,{style:{width:y.imageWidth+"px",height:y.imageHeight+"px"},preview:A?y.imageEnlargeAble:!1,src:A||Ge,fallback:Ge},null)}),y.dataType=="COLOR"&&(C.customRender=({value:A,record:We})=>createVNode(Me,{"show-picker":!1,showAlpha:!0,width:80,height:20,value:A},null)),y.dataType=="RICH_TEXT"&&(C.customRender=({value:A,record:We})=>createVNode(_sfc_main$p,{doc:A},null)),y.dataType=="MARK_DOWN"&&(C.customRender=({value:A,record:We})=>createVNode(_sfc_main$p,{markdownDoc:A},null)),y.dataType=="LINK"&&(C.customRender=({value:A,record:We})=>createVNode(_sfc_main$p,{link:A},null)),y.dataType=="QR_CODE"&&(C.customRender=({value:A,record:We})=>createVNode(QrCode,{value:A,previewWidth:"60px",width:"600"},null)),IconType.includes(y.dataType)&&(C.customRender=({value:A,record:We})=>createVNode(_sfc_main$G,{icon:A},null)),FilesType.includes(y.dataType)&&(C.customRender=({value:A,record:We})=>A instanceof Array?createVNode(_sfc_main$o,{value:A},{default:()=>[createTextVNode(" ")]}):A?createVNode(_sfc_main$o,{value:[A]},null):createVNode(_sfc_main$o,null,null)),C}):[]}const SearchFormItemDict={STRING:"Input",LINK:"Input",NUMBER:"InputNumber",DATE:"DatePicker",DATETIME:"DatePicker",OPTIONS:"ApiSelect",PICKER:"ApiSelect",TREE:"ApiTreeSelect",RADIO:"ApiSelect",QR_CODE:"Input",TEXT_AREA:"Input",MarkDown:"Input",CLASS_OPTIONS:"ExpertInput"},EditFormItemDict={STRING:"Input",NUMBER:"InputNumber",FILE:"Upload",DATE:"DatePicker",DATETIME:"DatePicker",OPTIONS:"ApiSelect",PICKER:"ApiSelect",TREE:"ApiTreeSelect",IMAGE:"ImageUpload",AVATAR:"CropperAvatar",ICON:"IconPicker",RICH_TEXT:"Tinymce",CODE_EDITOR:"CodeEditor",RADIO:"ApiRadioGroup",COLOR:"ColorPicker",LINK:"Input",QR_CODE:"Input",TEXT_AREA:"InputTextArea",MARK_DOWN:"MarkDown",CLASS_OPTIONS:"ExpertInput"},fieldsName={resultfield:"data",labelfield:"label",valuefield:"value"},labelAlign="left",formatterDictKey=v=>v?v.map(y=>({label:y.label,value:y.value.toString(),key:y.value,children:formatterDictKey(y.children)})):[];function getAnnoAddForm(v){const y=v.filter(C=>C.addEnable&&EditFormItemDict[C.dataType]);return getFields(y,"add")}function getAnnoEditForm(v){const y=v.filter(C=>C.editEnable&&EditFormItemDict[C.dataType]);return getFields(y,"edit")}function getAnnoDescriptionForm(v){return getColumns(v).map(C=>({label:C.title,field:C.dataIndex,span:getDescriptionCmpSpan(C),render:(A,We)=>C.customRender==null?A:C.customRender({value:A,record:We,column:void 0,index:void 0,renderIndex:void 0,text:void 0})}))}function getAnnoSearchForm(v){return getFields(v,"search")}const getFields=(fields,type)=>fields.map(item=>ua({field:item.fieldName,label:item.title,component:getFormItemDict(type,item),labelWidth:getCmpWidth(item),colProps:{span:getCmpSpan(item,type)},show:formData=>item.editShowBy.enable?eval(item.editShowBy.expr.replace("annoDataForm","formData.model")):type=="search"?item.searchEnable&&SearchFormItemDict[item.dataType]:!0,required:type=="search"?item.searchNotNull:item.editNotNull},getDictComponentProps(item,type)));function getFormItemDict(v,y){return v=="search"?SearchFormItemDict[y.dataType]:EditFormItemDict[y.dataType]}const getCmpWidth=(v,y)=>v.title.length>6?"auto":100,getDescriptionCmpSpan=v=>{let y=1;return["IMAGE","FILE","CODE_EDITOR","RICH_TEXT","TEXT_AREA","AVATAR","MARK_DOWN"].includes(v.annoType)&&(y=3),y},getCmpSpan=(v,y)=>{let C=12;return y=="search"&&(C=8),["IMAGE","FILE","CODE_EDITOR","RICH_TEXT","TEXT_AREA","AVATAR","MARK_DOWN"].includes(v.dataType)&&(C=24),v.editSpan&&y!="search"&&(C=v.editSpan),C},getDictComponentProps=(v,y)=>{let C=null,A=null;switch(v.dataType){case"DATE":C=!1,A="YYYY-MM-DD";break;case"DATETIME":C=!0,A="YYYY-MM-DD HH:mm:ss";break}if(["OPTIONS","PICKER","TREE","RADIO"].includes(v.dataType))return getPickDictComponentProps(v,y);if(["CLASS_OPTIONS"].includes(v.dataType))return{componentProps:{api:uploadApi,valueKey:v.optionAnnoClass.idKey,labelKey:v.optionAnnoClass.labelKey,annoClass:v.optionAnnoClass.annoClass}};if(v.dataType==="COLOR")return{defaultValue:"",componentProps:{width:100,height:30,showAlpha:!0}};if(["IMAGE","FILE","AVATAR"].includes(v.dataType)){if(v.dataType=="IMAGE")return{componentProps:{api:uploadApi,accept:["png","jpeg","jpg"],maxNumber:1}};if(v.dataType=="FILE"){let We=v.fileType.split(","),Ge={api:uploadApi,maxNumber:v.fileMaxCount,maxSize:v.fileMaxSize};return We.length==1&&We[0]=="*"||(Ge.accept=We),{componentProps:Ge}}else if(v.dataType=="AVATAR")return{componentProps:{uploadApi,width:"100px"}}}return{componentProps:{showTime:C,valueFormat:A,labelAlign,placeholder:v[`${y}PlaceHolder`]}}},getPickDictComponentProps=(v,y)=>{let C=null,A=null,We=null;v.optionDatas&&!isEmpty(v.optionDatas)?(A=formatterDictKey(v.optionDatas),We=v.optionIsMultiple):v.treeDatas&&!isEmpty(v.treeDatas)?(A=formatterDictKey(v.treeDatas),We=v.optionIsMultiple):v.optionTypeSql?(C=()=>getDict({sqlKey:v.optionTypeSql}),We=v.optionIsMultiple):v.treeTypeSql?(C=()=>getDict({sqlKey:v.treeTypeSql}),We=v.treeOptionIsMultiple):v.treeOptionAnnoClass&&v.treeOptionAnnoClass.annoClass!="Object"?(C=()=>getDict(Mu(ua({},v.treeOptionAnnoClass),{annoClazz:v.treeOptionAnnoClass.annoClass})),We=v.treeOptionIsMultiple):v.optionAnnoClass&&v.optionAnnoClass.annoClass!="Object"&&(C=()=>getDict(Mu(ua({},v.optionAnnoClass),{annoClazz:v.optionAnnoClass.annoClass})),We=v.treeOptionIsMultiple);let Ge={componentProps:Mu(ua({placeholder:v[`${y}PlaceHolder`]},fieldsName),{immediate:!0,multiple:We,showCheckedStrategy:We?"SHOW_ALL":null,mode:We?"multiple":null})};return C&&(Ge.componentProps.api=C),A&&(Ge.componentProps.options=A),Ge};function isSlotFormSchema(v){return"slot"in v}function isComponentFormSchema(v){return!isSlotFormSchema(v)}const{t:t$1}=useI18n();function createPlaceholderMessage$1(v){return v.includes("Input")||v.includes("Complete")?t$1("common.inputText"):v.includes("Picker")||v.includes("Select")||v.includes("Cascader")||v.includes("Checkbox")||v.includes("Radio")||v.includes("Switch")?t$1("common.chooseText"):""}const DATE_TYPE=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function genType(){return[...DATE_TYPE,"RangePicker"]}function setComponentRuleType(v,y,C){Reflect.has(v,"type")||(["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(y)?v.type=C?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(y)?v.type="array":["InputNumber"].includes(y)&&(v.type="number"))}const defaultValueComponents=["Input","InputPassword","InputNumber","InputSearch","InputTextArea"];function handleInputNumberValue(v,y){return v&&defaultValueComponents.includes(v)&&y&&isNumber$1(y)?`${y}`:y}const dateItemType=genType(),NO_AUTO_LINK_COMPONENTS=["Upload","ApiTransfer","ApiTree","ApiTreeSelect","ApiRadioGroup","ApiCascader","AutoComplete","RadioButtonGroup","ImageUpload","ApiSelect"];function useItemLabelWidth(v,y){return computed(()=>{const C=unref(v),{labelCol:A={},wrapperCol:We={}}=C.itemProps||{},{labelWidth:Ge,disabledLabelWidth:Xe}=C,{labelWidth:Ve,labelCol:P,wrapperCol:Te,layout:j}=unref(y);if(!Ve&&!Ge&&!P||Xe)return A.style={textAlign:"left"},{labelCol:A,wrapperCol:We};let x=Ge||Ve;const qe=ua(ua({},P),A),Be=ua(ua({},Te),We);return x&&(x=isNumber$1(x)?`${x}px`:x),{labelCol:ua({style:{width:x}},qe),wrapperCol:ua({style:{width:j==="vertical"?"100%":`calc(100% - ${x})`}},Be)}})}function _isSlot(v){return typeof v=="function"||Object.prototype.toString.call(v)==="[object Object]"&&!isVNode(v)}const _sfc_main$n=defineComponent({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(v,{slots:y}){const{t:C}=useI18n(),{schema:A,formProps:We}=toRefs(v),Ge=useItemLabelWidth(A,We),Xe=computed(()=>{const{allDefaultValues:He,formModel:Ye,schema:st}=v,{mergeDynamicData:rt}=v.formProps;return{field:st.field,model:Ye,values:ua(ua(ua({},rt),He),Ye),schema:st}}),Ve=computed(()=>{var tt;const{schema:He,tableAction:Ye,formModel:st,formActionType:rt}=v;let{componentProps:Ke={}}=He;return isFunction$1(Ke)&&(Ke=(tt=Ke({schema:He,tableAction:Ye,formModel:st,formActionType:rt}))!=null?tt:{}),He.component==="Divider"&&(Ke=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},Ke)),Ke}),P=computed(()=>{const{disabled:He}=v.formProps,{dynamicDisabled:Ye}=v.schema,{disabled:st=!1}=unref(Ve);let rt=!!He||st;return isBoolean(Ye)&&(rt=Ye),isFunction$1(Ye)&&(rt=Ye(unref(Xe))),rt}),Te=computed(()=>{const{readonly:He}=v.formProps,{dynamicReadonly:Ye}=v.schema,{readonly:st=!1}=unref(Ve);let rt=He||st;return isBoolean(Ye)&&(rt=Ye),isFunction$1(Ye)&&(rt=Ye(unref(Xe))),rt});function j(){const{show:He,ifShow:Ye}=v.schema,{showAdvancedButton:st}=v.formProps,rt=st&&isBoolean(v.isAdvanced)?v.isAdvanced:!0;let Ke=!0,tt=!0;return isBoolean(He)&&(Ke=He),isBoolean(Ye)&&(tt=Ye),isFunction$1(He)&&(Ke=He(unref(Xe))),isFunction$1(Ye)&&(tt=Ye(unref(Xe))),Ke=Ke&&rt,{isShow:Ke,isIfShow:tt}}function x(){var Ht;const{rules:He=[],component:Ye,rulesMessageJoinLabel:st,label:rt,dynamicRules:Ke,required:tt}=v.schema;if(isFunction$1(Ke))return Ke(unref(Xe));let at=cloneDeep(He);const{rulesMessageJoinLabel:et}=v.formProps,wt=(Reflect.has(v.schema,"rulesMessageJoinLabel")?st:et)?rt:"",xt=Ye?createPlaceholderMessage$1(Ye)+wt:wt;function it(an,Mt){const vn=an.message||xt;return Mt===void 0||isNull(Mt)||Array.isArray(Mt)&&Mt.length===0||typeof Mt=="string"&&Mt.trim()===""||typeof Mt=="object"&&Reflect.has(Mt,"checked")&&Reflect.has(Mt,"halfChecked")&&Array.isArray(Mt.checked)&&Array.isArray(Mt.halfChecked)&&Mt.checked.length===0&&Mt.halfChecked.length===0?Promise.reject(vn):Promise.resolve()}const yt=isFunction$1(tt)?tt(unref(Xe)):tt;yt&&(!at||at.length===0?at=[{required:yt,validator:it}]:at.findIndex(Mt=>Reflect.has(Mt,"required"))===-1&&at.push({required:yt,validator:it}));const ut=at.findIndex(an=>Reflect.has(an,"required")&&!Reflect.has(an,"validator"));if(ut!==-1){const an=at[ut],{isShow:Mt}=j();if(Mt||(an.required=!1),Ye){an.message=an.message||xt,(Ye.includes("Input")||Ye.includes("Textarea"))&&(an.whitespace=!0);const vn=(Ht=unref(Ve))==null?void 0:Ht.valueFormat;setComponentRuleType(an,Ye,vn)}}const Et=at.findIndex(an=>an.max);return Et!==-1&&!at[Et].validator&&(at[Et].message=at[Et].message||C("component.form.maxTip",[at[Et].max])),at}function qe(){var an;if(!isComponentFormSchema(v.schema))return null;const{renderComponentContent:He,component:Ye,field:st,changeEvent:rt="change",valueField:Ke}=v.schema,tt=Ye&&["Switch","Checkbox"].includes(Ye),at=`on${upperFirst(rt)}`,et={[at]:(...Mt)=>{const[vn]=Mt;it[at]&&it[at](...Mt);const Wn=vn?vn.target:null,$e=Wn?tt?Wn.checked:Wn.value:vn;v.setFormModel(st,$e,v.schema)}},Ot=componentMap.get(Ye),{autoSetPlaceHolder:wt,size:xt}=v.formProps,it=Mu(ua({allowClear:!0,size:xt},unref(Ve)),{disabled:unref(P),readonly:unref(Te)});!it.disabled&&wt&&Ye!=="RangePicker"&&Ye&&(it.placeholder=((an=unref(Ve))==null?void 0:an.placeholder)||createPlaceholderMessage$1(Ye)),it.codeField=st,it.formValues=unref(Xe);const ut={[Ke||(tt?"checked":"value")]:v.formModel[st]},Et=ua(ua(ua({},it),et),ut);if(!He)return createVNode(Ot,Et,null);const Ht=isFunction$1(He)?ua({},He(unref(Xe),{disabled:unref(P),readonly:unref(Te)})):{default:()=>He};return createVNode(Ot,Et,_isSlot(Ht)?Ht:{default:()=>[Ht]})}function Be(){const{label:He,helpMessage:Ye,helpComponentProps:st,subLabel:rt}=v.schema,Ke=rt?createVNode("span",null,[He,createTextVNode(" "),createVNode("span",{class:"text-secondary"},[rt])]):He,tt=isFunction$1(Ye)?Ye(unref(Xe)):Ye;return!tt||Array.isArray(tt)&&tt.length===0?Ke:createVNode("span",null,[Ke,createVNode(BasicHelp,mergeProps({placement:"top",class:"mx-1",text:tt},st),null)])}function De(){const{itemProps:He,slot:Ye,render:st,field:rt,suffix:Ke,component:tt}=v.schema,{labelCol:at,wrapperCol:et}=unref(Ge),{colon:Ot}=v.formProps,wt={disabled:unref(P),readonly:unref(Te)};if(tt==="Divider"){let xt;return createVNode(Col,{span:24},{default:()=>[createVNode(Divider,unref(Ve),_isSlot(xt=Be())?xt:{default:()=>[xt]})]})}else{const xt=()=>Ye?getSlot(y,Ye,unref(Xe),wt):st?st(unref(Xe),wt):qe(),it=!!Ke,yt=isFunction$1(Ke)?Ke(unref(Xe)):Ke;return tt&&NO_AUTO_LINK_COMPONENTS.includes(tt)&&v.schema&&(v.schema.itemProps=ua({autoLink:!1},v.schema.itemProps)),createVNode(Form.Item,mergeProps({name:rt,colon:Ot,class:{"suffix-item":it}},He,{label:Be(),rules:x(),labelCol:at,wrapperCol:et}),{default:()=>[createVNode("div",{style:"display:flex"},[createVNode("div",{style:"flex:1;"},[xt()]),it&&createVNode("span",{class:"suffix"},[yt])])]})}}return()=>{let He;const{colProps:Ye={},colSlot:st,renderColContent:rt,component:Ke,slot:tt}=v.schema;if(!Ke||!componentMap.has(Ke)&&!tt)return null;const{baseColProps:at={}}=v.formProps,et=ua(ua({},at),Ye),{isIfShow:Ot,isShow:wt}=j(),xt=unref(Xe),it={disabled:unref(P),readonly:unref(Te)};return Ot&&withDirectives(createVNode(Col,et,_isSlot(He=(()=>st?getSlot(y,st,xt,it):rt?rt(xt,it):De())())?He:{default:()=>[He]}),[[vShow,wt]])}}});function tryDeconstructArray(v,y,C){const A=/^\[(.+)\]$/;if(A.test(v)){const We=v.match(A);if(We&&We[1]){const Ge=We[1].split(",");return y=Array.isArray(y)?y:[y],Ge.forEach((Xe,Ve)=>{set(C,Xe.trim(),y[Ve])}),!0}}}function tryDeconstructObject(v,y,C){const A=/^\{(.+)\}$/;if(A.test(v)){const We=v.match(A);if(We&&We[1]){const Ge=We[1].split(",");return y=isObject$1(y)?y:{},Ge.forEach(Xe=>{set(C,Xe.trim(),y[Xe.trim()])}),!0}}}function useFormValues({defaultValueRef:v,getSchema:y,formModel:C,getProps:A}){function We(P){var j,x;if(!isObject$1(P))return{};const Te={};for(const qe of Object.entries(P)){let[,Be]=qe;const[De]=qe;if(!De||isArray(Be)&&Be.length===0||isFunction$1(Be))continue;const He=unref(A).transformDateFunc;isObject$1(Be)&&(Be=He==null?void 0:He(Be)),isArray(Be)&&((j=Be[0])!=null&&j.format)&&((x=Be[1])!=null&&x.format)&&(Be=Be.map(Ye=>He==null?void 0:He(Ye))),isString(Be)&&(Be===""?Be=void 0:Be=Be.trim()),!tryDeconstructArray(De,Be,Te)&&!tryDeconstructObject(De,Be,Te)&&set(Te,De,Be)}return Ge(Te)}function Ge(P){const Te=unref(A).fieldMapToTime;if(!Te||!Array.isArray(Te))return P;for(const[j,[x,qe],Be="YYYY-MM-DD"]of Te){if(!j||!x||!qe)continue;if(!get(P,j)){unset(P,j);continue}const[De,He]=get(P,j),[Ye,st]=Array.isArray(Be)?Be:[Be,Be];!isNil(De)&&!isEmpty(De)&&set(P,x,Xe(De,Ye)),!isNil(He)&&!isEmpty(He)&&set(P,qe,Xe(He,st)),unset(P,j)}return P}function Xe(P,Te){return Te==="timestamp"?dateUtil(P).unix():Te==="timestampStartDay"?dateUtil(P).startOf("day").unix():dateUtil(P).format(Te)}function Ve(){const P=unref(y),Te={};P.forEach(j=>{const{defaultValue:x,defaultValueObj:qe}=j,Be=Object.keys(qe||{});Be.length&&Be.map(De=>{Te[De]=qe[De],C[De]===void 0&&(C[De]=qe[De])}),isNil(x)||(Te[j.field]=x,C[j.field]===void 0&&(C[j.field]=x))}),v.value=cloneDeep(Te)}return{handleFormValues:We,initDefault:Ve}}const BASIC_COL_LEN=24;function useAdvanced({advanceState:v,emit:y,getProps:C,getSchema:A,formModel:We,defaultValueRef:Ge}){const Xe=getCurrentInstance(),{realWidthRef:Ve,screenEnum:P,screenRef:Te}=useBreakpoint(),j=computed(()=>{if(!v.isAdvanced)return 0;const Ye=unref(C).emptySpan||0;if(isNumber$1(Ye))return Ye;if(isObject$1(Ye)){const{span:st=0}=Ye,rt=unref(Te);return Ye[rt.toLowerCase()]||st||0}return 0}),x=useDebounceFn(De,30);watch([()=>unref(A),()=>v.isAdvanced,()=>unref(Ve)],()=>{const{showAdvancedButton:Ye}=unref(C);Ye&&x()},{immediate:!0});function qe(Ye,st=0,rt=!1){const Ke=unref(Ve),tt=parseInt(Ye.md)||parseInt(Ye.xs)||parseInt(Ye.sm)||Ye.span||BASIC_COL_LEN,at=parseInt(Ye.lg)||tt,et=parseInt(Ye.xl)||at,Ot=parseInt(Ye.xxl)||et;return Ke<=P.LG?st+=tt:Ke<P.XL?st+=at:Ke<P.XXL?st+=et:st+=Ot,rt?(v.hideAdvanceBtn=!1,st<=BASIC_COL_LEN*2?(v.hideAdvanceBtn=!0,v.isAdvanced=!0):st>BASIC_COL_LEN*2&&st<=BASIC_COL_LEN*(unref(C).autoAdvancedLine||3)?v.hideAdvanceBtn=!1:v.isLoad||(v.isLoad=!0,v.isAdvanced=!v.isAdvanced),{isAdvanced:v.isAdvanced,itemColSum:st}):st>BASIC_COL_LEN*(unref(C).alwaysShowLines||1)?{isAdvanced:v.isAdvanced,itemColSum:st}:{isAdvanced:!0,itemColSum:st}}const Be=shallowReactive({});function De(){var Ke;let Ye=0,st=0;const{baseColProps:rt={}}=unref(C);for(const tt of unref(A)){const{show:at,colProps:et}=tt;let Ot=!0;if(isBoolean(at)&&(Ot=at),isFunction$1(at)&&(Ot=at({schema:tt,model:We,field:tt.field,values:ua(ua({},unref(Ge)),We)})),Ot&&(et||rt)){const{itemColSum:wt,isAdvanced:xt}=qe(ua(ua({},rt),et),Ye);Ye=wt||0,xt&&(st=Ye),Be[tt.field]=xt}}(Ke=Xe==null?void 0:Xe.proxy)==null||Ke.$forceUpdate(),v.actionSpan=st%BASIC_COL_LEN+unref(j),qe(unref(C).actionColOptions||{span:BASIC_COL_LEN},Ye,!0),y("advanced-change")}function He(){v.isAdvanced=!v.isAdvanced}return{handleToggleAdvanced:He,fieldsIsAdvancedMap:Be}}function tryConstructArray(v,y={}){const C=/^\[(.+)\]$/;if(C.test(v)){const A=v.match(C);if(A&&A[1]){const We=A[1].split(",");if(!We.length)return;const Ge=[];return We.forEach((Xe,Ve)=>{set(Ge,Ve,y[Xe.trim()])}),Ge.filter(Boolean).length?Ge:void 0}}}function tryConstructObject(v,y={}){const C=/^\{(.+)\}$/;if(C.test(v)){const A=v.match(C);if(A&&A[1]){const We=A[1].split(",");if(!We.length)return;const Ge={};return We.forEach(Xe=>{set(Ge,Xe.trim(),y[Xe.trim()])}),Object.values(Ge).filter(Boolean).length?Ge:void 0}}}function useFormEvents({emit:v,getProps:y,formModel:C,getSchema:A,defaultValueRef:We,formElRef:Ge,schemaRef:Xe,handleFormValues:Ve}){function P(){return no(this,null,function*(){const{resetFunc:it,submitOnReset:yt}=unref(y);it&&isFunction$1(it)&&(yield it()),unref(Ge)&&(Object.keys(C).forEach(Et=>{const Ht=unref(A).find(vn=>vn.field===Et),an=Ht==null?void 0:Ht.defaultValueObj,Mt=Object.keys(an||{});Mt.length&&Mt.map(vn=>{C[vn]=an[vn]}),C[Et]=getDefaultValue(Ht,We,Et)}),nextTick(()=>et()),v("reset",toRaw(C)),yt&&wt())})}const Te=()=>unref(A).map(it=>[...it.fields||[],it.field]).flat(1).filter(Boolean);function j(it){return no(this,null,function*(){if(Object.keys(it).length===0)return;const yt=Te(),ut=".",Et=yt.filter(an=>String(an).indexOf(ut)>=0),Ht=[];yt.forEach(an=>{const Mt=unref(A).find(nn=>nn.field===an);let vn=get(it,an);const Wn=Reflect.has(it,an);vn=handleInputNumberValue(Mt==null?void 0:Mt.component,vn);const{componentProps:$e}=Mt||{};let Dt=$e;typeof $e=="function"&&(Dt=Dt({formModel:unref(C),formActionType:xt}));const vt=tryConstructArray(an,it)||tryConstructObject(an,it);if(Wn||vt){const nn=vt||vn;if(rt(an))if(Array.isArray(nn)){const _t=[];for(const Nt of nn)_t.push(Nt?dateUtil(Nt):null);unref(C)[an]=_t}else unref(C)[an]=nn?Dt!=null&&Dt.valueFormat?nn:dateUtil(nn):null;else unref(C)[an]=nn;Dt!=null&&Dt.onChange&&(Dt==null||Dt.onChange(nn)),Ht.push(an)}else Et.forEach(nn=>{try{const _t=nn.split(".").reduce((Nt,ln)=>Nt[ln],it);isDef(_t)&&(unref(C)[nn]=unref(_t),Ht.push(nn))}catch(_t){isDef(We.value[nn])&&(unref(C)[nn]=cloneDeep(unref(We.value[nn])))}})}),Ke(Ht).catch(an=>{})})}function x(it){return no(this,null,function*(){const yt=cloneDeep(unref(A));if(!it)return;let ut=isString(it)?[it]:it;isString(it)&&(ut=[it]);for(const Et of ut)qe(Et,yt);Xe.value=yt})}function qe(it,yt){if(isString(it)){const ut=yt.findIndex(Et=>Et.field===it);ut!==-1&&(delete C[it],yt.splice(ut,1))}}function Be(it,yt,ut=!1){return no(this,null,function*(){const Et=cloneDeep(unref(A)),Ht=Array.isArray(it)?it.map(vn=>vn.field):[it.field];if(Et.find(vn=>Ht.includes(vn.field))){error("There are schemas that have already been added");return}const an=Et.findIndex(vn=>vn.field===yt),Mt=isObject$1(it)?[it]:it;!yt||an===-1||ut?ut?Et.unshift(...Mt):Et.push(...Mt):an!==-1&&Et.splice(an+1,0,...Mt),Xe.value=Et,Ye(it)})}function De(it){return no(this,null,function*(){let yt=[];if(isObject$1(it)&&yt.push(it),isArray(it)&&(yt=[...it]),!yt.every(Et=>Et.component==="Divider"||Reflect.has(Et,"field")&&Et.field)){error("All children of the form Schema array that need to be updated must contain the `field` field");return}Xe.value=yt})}function He(it){return no(this,null,function*(){let yt=[];if(isObject$1(it)&&yt.push(it),isArray(it)&&(yt=[...it]),!yt.every(Ht=>Ht.component==="Divider"||Reflect.has(Ht,"field")&&Ht.field)){error("All children of the form Schema array that need to be updated must contain the `field` field");return}const Et=[];unref(A).forEach(Ht=>{let an;if(yt.forEach(Mt=>{Ht.field===Mt.field&&(an=Mt)}),an!==void 0&&Ht.field===an.field){const Mt=deepMerge(Ht,an);Et.push(Mt)}else Et.push(Ht)}),Ye(Et),Xe.value=uniqBy(Et,"field")})}function Ye(it){let yt=[];isObject$1(it)&&yt.push(it),isArray(it)&&(yt=[...it]);const ut={},Et=st();yt.forEach(Ht=>{Ht.component!="Divider"&&Reflect.has(Ht,"field")&&Ht.field&&!isNil(Ht.defaultValue)&&(!(Ht.field in Et)||isNil(Et[Ht.field]))&&(ut[Ht.field]=Ht.defaultValue)}),j(ut)}function st(){return unref(Ge)?Ve(toRaw(unref(C))):{}}function rt(it){return unref(A).some(yt=>yt.field===it&&yt.component?dateItemType.includes(yt.component):!1)}function Ke(it){return no(this,null,function*(){var ut;const yt=yield(ut=unref(Ge))==null?void 0:ut.validateFields(it);return Ve(yt)})}function tt(it){return no(this,null,function*(){var yt;yield(yt=unref(Ge))==null?void 0:yt.setProps(it)})}function at(it){return no(this,null,function*(){var Et;let yt;it===void 0?yt=Te():yt=it===Array.isArray(it)?it:void 0;const ut=yield(Et=unref(Ge))==null?void 0:Et.validate(yt);return Ve(ut)})}function et(it){return no(this,null,function*(){var yt;yield(yt=unref(Ge))==null?void 0:yt.clearValidate(it)})}function Ot(it,yt){return no(this,null,function*(){var ut;yield(ut=unref(Ge))==null?void 0:ut.scrollToField(it,yt)})}function wt(it){return no(this,null,function*(){it&&it.preventDefault();const{submitFunc:yt}=unref(y);if(yt&&isFunction$1(yt)){yield yt();return}if(unref(Ge))try{const Et=yield at();v("submit",Et)}catch(Et){if((Et==null?void 0:Et.outOfDate)===!1&&(Et!=null&&Et.errorFields))return;throw new Error(Et)}})}const xt={getFieldsValue:st,setFieldsValue:j,resetFields:P,updateSchema:He,resetSchema:De,setProps:tt,removeSchemaByField:x,appendSchemaByField:Be,clearValidate:et,validateFields:Ke,validate:at,submit:wt,scrollToField:Ot};return{handleSubmit:wt,clearValidate:et,validate:at,validateFields:Ke,getFieldsValue:st,updateSchema:He,resetSchema:De,appendSchemaByField:Be,removeSchemaByField:x,resetFields:P,setFieldsValue:j,scrollToField:Ot}}function getDefaultValue(v,y,C){let A=cloneDeep(y.value[C]);return checkIsInput(v)?A||"":(!A&&v&&checkIsRangeSlider(v)&&(A=[0,0]),!A&&v&&v.component==="ApiTree"&&(A=[]),A)}function checkIsRangeSlider(v){if(v.component==="Slider"&&v.componentProps&&"range"in v.componentProps)return!0}function checkIsInput(v){return(v==null?void 0:v.component)&&defaultValueComponents.includes(v.component)}const key=Symbol();function createFormContext(v){return createContext(v,key)}function useAutoFocus(We){return no(this,arguments,function*({getSchema:v,getProps:y,formElRef:C,isInitedDefault:A}){watchEffect(()=>no(this,null,function*(){if(unref(A)||!unref(y).autoFocusFirstItem)return;yield nextTick();const Ge=unref(v),Xe=unref(C),Ve=Xe==null?void 0:Xe.$el;if(!Xe||!Ve||!Ge||Ge.length===0)return;const P=Ge[0];if(!P.component||!P.component.includes("Input"))return;const Te=Ve.querySelector(".ant-row:first-child input");Te&&(Te==null||Te.focus())}))})}const basicProps$1={model:{type:Object,default:()=>({})},labelWidth:{type:[Number,String],default:0},fieldMapToTime:{type:Array,default:()=>[]},compact:propTypes.bool,schemas:{type:Array,default:()=>[]},mergeDynamicData:{type:Object,default:null},baseRowStyle:{type:Object},baseColProps:{type:Object},autoSetPlaceHolder:propTypes.bool.def(!0),autoSubmitOnEnter:propTypes.bool.def(!1),submitOnReset:propTypes.bool,submitOnChange:propTypes.bool,size:propTypes.oneOf(["default","small","large"]).def("default"),disabled:propTypes.bool,emptySpan:{type:[Number,Object],default:0},showAdvancedButton:propTypes.bool,transformDateFunc:{type:Function,default:v=>{var y,C;return(C=(y=v==null?void 0:v.format)==null?void 0:y.call(v,"YYYY-MM-DD HH:mm:ss"))!=null?C:v}},rulesMessageJoinLabel:propTypes.bool.def(!0),autoAdvancedLine:propTypes.number.def(3),alwaysShowLines:propTypes.number.def(1),showActionButtonGroup:propTypes.bool.def(!0),actionColOptions:Object,showResetButton:propTypes.bool.def(!0),autoFocusFirstItem:propTypes.bool,resetButtonOptions:Object,showSubmitButton:propTypes.bool.def(!0),submitButtonOptions:Object,resetFunc:Function,submitFunc:Function,hideRequiredMark:propTypes.bool,labelCol:Object,layout:propTypes.oneOf(["horizontal","vertical","inline"]).def("horizontal"),tableAction:{type:Object},wrapperCol:Object,colon:propTypes.bool,labelAlign:propTypes.string,rowProps:Object},_sfc_main$m=defineComponent({name:"BasicForm",__name:"BasicForm",props:basicProps$1,emits:["advanced-change","reset","submit","register","field-value-change"],setup(v,{expose:y,emit:C}){const A=v,We=C,Ge=useAttrs$1(),Xe=reactive({}),Ve=useModalContext(),P=reactive({isAdvanced:!0,hideAdvanceBtn:!1,isLoad:!1,actionSpan:6}),Te=ref({}),j=ref(!1),x=ref(),qe=ref(null),Be=ref(null),{prefixCls:De}=useDesign("basic-form"),He=computed(()=>ua(ua({},A),unref(x))),Ye=computed(()=>[De,{[`${De}--compact`]:unref(He).compact}]),st=computed(()=>{const{baseRowStyle:_t={},rowProps:Nt}=unref(He);return ua({style:_t},Nt)}),rt=computed(()=>ua(ua(ua({},Ge),A),unref(He))),Ke=computed(()=>{const _t=unref(qe)||unref(He).schemas;for(const Nt of _t){const{defaultValue:ln,component:on,componentProps:dt,isHandleDateDefaultValue:ur=!0}=Nt;if(ur&&ln&&on&&dateItemType.includes(on)){const dn=dt?dt.valueFormat:null;if(!Array.isArray(ln))Nt.defaultValue=dn?dateUtil(ln).format(dn):dateUtil(ln);else{const en=[];ln.forEach(Nn=>{en.push(dn?dateUtil(Nn).format(dn):dateUtil(Nn))}),Nt.defaultValue=en}}}return unref(He).showAdvancedButton?cloneDeep(_t.filter(Nt=>Nt.component!=="Divider")):cloneDeep(_t)}),{fieldsIsAdvancedMap:tt}=useAdvanced({advanceState:P,emit:We,getProps:He,getSchema:Ke,formModel:Xe,defaultValueRef:Te}),{handleFormValues:at,initDefault:et}=useFormValues({getProps:He,defaultValueRef:Te,getSchema:Ke,formModel:Xe});useAutoFocus({getSchema:Ke,getProps:He,isInitedDefault:j,formElRef:Be});const{handleSubmit:Ot,setFieldsValue:wt,clearValidate:xt,validate:it,validateFields:yt,getFieldsValue:ut,updateSchema:Et,resetSchema:Ht,appendSchemaByField:an,removeSchemaByField:Mt,resetFields:vn,scrollToField:Wn}=useFormEvents({emit:We,getProps:He,formModel:Xe,getSchema:Ke,defaultValueRef:Te,formElRef:Be,schemaRef:qe,handleFormValues:at});createFormContext({resetAction:vn,submitAction:Ot}),watch(()=>unref(He).model,()=>{const{model:_t}=unref(He);_t&&wt(_t)},{immediate:!0}),watch(()=>A.schemas,_t=>{Ht(_t!=null?_t:[])}),watch(()=>Ke.value,_t=>{nextTick(()=>{var Nt;(Nt=Ve==null?void 0:Ve.redoModalHeight)==null||Nt.call(Ve)}),!unref(j)&&_t!=null&&_t.length&&(et(),j.value=!0)}),watch(()=>Xe,useDebounceFn(()=>{unref(He).submitOnChange&&Ot()},300),{deep:!0});function $e(_t){return no(this,null,function*(){x.value=deepMerge(unref(x)||{},_t)})}function Dt(_t,Nt,ln){Xe[_t]=Nt,We("field-value-change",_t,Nt),ln&&ln.itemProps&&!ln.itemProps.autoLink&&yt([_t]).catch(on=>{})}function vt(_t){const{autoSubmitOnEnter:Nt}=unref(He);if(Nt&&_t.key==="Enter"&&_t.target&&_t.target instanceof HTMLElement){const ln=_t.target;ln&&ln.tagName&&ln.tagName.toUpperCase()=="INPUT"&&Ot()}}const nn={getFieldsValue:ut,setFieldsValue:wt,resetFields:vn,updateSchema:Et,resetSchema:Ht,setProps:$e,removeSchemaByField:Mt,appendSchemaByField:an,clearValidate:xt,validateFields:yt,validate:it,submit:Ot,scrollToField:Wn};return y(ua({},nn)),onMounted(()=>{et(),We("register",nn)}),(_t,Nt)=>(openBlock(),createBlock(unref(Form),mergeProps(rt.value,{class:Ye.value,ref_key:"formElRef",ref:Be,model:Xe,onKeypress:withKeys(vt,["enter"])}),{default:withCtx(()=>[createVNode(unref(Row),normalizeProps(guardReactiveProps(st.value)),{default:withCtx(()=>[renderSlot(_t.$slots,"formHeader"),(openBlock(!0),createElementBlock(Fragment,null,renderList(Ke.value,ln=>(openBlock(),createBlock(_sfc_main$n,{key:ln.field,isAdvanced:unref(tt)[ln.field],tableAction:_t.tableAction,formActionType:nn,schema:ln,formProps:He.value,allDefaultValues:Te.value,formModel:Xe,setFormModel:Dt},createSlots({_:2},[renderList(Object.keys(_t.$slots),on=>({name:on,fn:withCtx(dt=>[renderSlot(_t.$slots,on,mergeProps({ref_for:!0},dt||{}))])}))]),1032,["isAdvanced","tableAction","schema","formProps","allDefaultValues","formModel"]))),128)),renderSlot(_t.$slots,"formFooter")]),_:3},16),createVNode(unref(Space),{class:"m-2 w-full justify-end p-r-5"},{default:withCtx(()=>[He.value.showSubmitButton?(openBlock(),createBlock(unref(Button),{key:0,type:"primary",onClick:unref(Ot)},{default:withCtx(()=>[createTextVNode("查询")]),_:1},8,["onClick"])):createCommentVNode("",!0),He.value.showResetButton?(openBlock(),createBlock(unref(Button),{key:1,onClick:unref(vn)},{default:withCtx(()=>[createTextVNode("重置")]),_:1},8,["onClick"])):createCommentVNode("",!0)]),_:1})]),_:3},16,["class","model"]))}}),BasicForm_vue_vue_type_style_index_0_lang="";function useForm(v){const y=ref(null),C=ref(!1);function A(){return no(this,null,function*(){const Xe=unref(y);return Xe||error("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),yield nextTick(),Xe})}function We(Xe){onUnmounted(()=>{y.value=null,C.value=null}),!(unref(C)&&isProdMode()&&Xe===unref(y))&&(y.value=Xe,C.value=!0,watch(()=>v,()=>{v&&Xe.setProps(getDynamicProps(v))},{immediate:!0,deep:!0}))}return[We,{scrollToField:(Xe,Ve)=>no(this,null,function*(){(yield A()).scrollToField(Xe,Ve)}),setProps:Xe=>no(this,null,function*(){(yield A()).setProps(Xe)}),updateSchema:Xe=>no(this,null,function*(){(yield A()).updateSchema(Xe)}),resetSchema:Xe=>no(this,null,function*(){(yield A()).resetSchema(Xe)}),clearValidate:Xe=>no(this,null,function*(){(yield A()).clearValidate(Xe)}),resetFields:()=>no(this,null,function*(){A().then(Xe=>no(this,null,function*(){yield Xe.resetFields()}))}),removeSchemaByField:Xe=>no(this,null,function*(){var Ve;(Ve=unref(y))==null||Ve.removeSchemaByField(Xe)}),getFieldsValue:()=>{var Xe;return(Xe=unref(y))==null?void 0:Xe.getFieldsValue()},setFieldsValue:Xe=>no(this,null,function*(){(yield A()).setFieldsValue(Xe)}),appendSchemaByField:(Xe,Ve,P)=>no(this,null,function*(){(yield A()).appendSchemaByField(Xe,Ve,P)}),submit:()=>no(this,null,function*(){return(yield A()).submit()}),validate:Xe=>no(this,null,function*(){return(yield A()).validate(Xe)}),validateFields:Xe=>no(this,null,function*(){return(yield A()).validateFields(Xe)})}]}const _hoisted_1$8={class:"edit-header-cell"},_sfc_main$l=defineComponent({name:"EditTableHeaderIcon",__name:"EditTableHeaderIcon",props:{title:{type:String,default:""}},setup(v){return(y,C)=>(openBlock(),createElementBlock("span",_hoisted_1$8,[renderSlot(y.$slots,"default"),createTextVNode(" "+toDisplayString(v.title)+" ",1),createVNode(unref(FormOutlined))]))}}),_sfc_main$k=defineComponent({name:"TableHeaderCell",components:{EditTableHeaderCell:_sfc_main$l,BasicHelp:_sfc_main$H},props:{column:{type:Object,default:()=>({})}},setup(v){const{prefixCls:y}=useDesign("basic-table-header-cell"),C=computed(()=>{var Ge;return!!((Ge=v.column)!=null&&Ge.edit)}),A=computed(()=>{var Xe;const Ge=v.column;return typeof Ge.customHeaderRender=="function"?Ge.customHeaderRender(Ge):(Ge==null?void 0:Ge.customTitle)||((Xe=v.column)==null?void 0:Xe.title)}),We=computed(()=>{var Ge;return(Ge=v.column)==null?void 0:Ge.helpMessage});return()=>createVNode("div",null,[C.value?createVNode(_sfc_main$l,null,{default:()=>[A.value]}):createVNode("span",{class:"default-header-cell"},[A.value]),We.value&&createVNode(_sfc_main$H,{text:We.value,class:`${y}__help`},null)])}}),HeaderCell_vue_vue_type_style_index_0_lang="";function itemRender({page:v,type:y,originalElement:C}){return y==="prev"?v===0?null:createVNode(LeftOutlined,null,null):y==="next"?v===1?null:createVNode(RightOutlined,null,null):C}function usePagination(v){const{t:y}=useI18n(),C=ref({}),A=ref(!0);watch(()=>unref(v).pagination,Te=>{!isBoolean(Te)&&Te&&(C.value=ua(ua({},unref(C)),Te!=null?Te:{}))});const We=computed(()=>{const{pagination:Te}=unref(v);return!unref(A)||isBoolean(Te)&&!Te?!1:ua(ua({current:1,size:"small",defaultPageSize:PAGE_SIZE,showTotal:j=>y("component.table.total",{total:j}),showSizeChanger:!0,pageSizeOptions:PAGE_SIZE_OPTIONS,itemRender,showQuickJumper:!0},isBoolean(Te)?{}:Te),unref(C))});function Ge(Te){const j=unref(We);C.value=ua(ua({},isBoolean(j)?{}:j),Te)}function Xe(){return unref(We)}function Ve(){return unref(A)}function P(Te){return no(this,null,function*(){A.value=Te})}return{getPagination:Xe,getPaginationInfo:We,setShowPagination:P,getShowPagination:Ve,setPagination:Ge}}const componentMap$1=new Map;componentMap$1.set("Input",Input);componentMap$1.set("InputNumber",InputNumber);componentMap$1.set("Select",Select);componentMap$1.set("ApiSelect",_sfc_main$D);componentMap$1.set("AutoComplete",AutoComplete);componentMap$1.set("ApiTreeSelect",_sfc_main$B);componentMap$1.set("Switch",Switch);componentMap$1.set("Checkbox",Checkbox);componentMap$1.set("DatePicker",DatePicker);componentMap$1.set("TimePicker",TimePicker);componentMap$1.set("RadioGroup",Radio.Group);componentMap$1.set("RadioButtonGroup",_sfc_main$I);componentMap$1.set("ApiRadioGroup",_sfc_main$E);const CellComponent=({component:v="Input",rule:y=!0,ruleMessage:C,popoverVisible:A,getPopupContainer:We},{attrs:Ge})=>{const Xe=componentMap$1.get(v),Ve=h(Xe,Ge);return y?h(Popover,ua({overlayClassName:"edit-cell-rule-popover",open:!!A},We?{getPopupContainer:We}:{}),{default:()=>Ve,content:()=>C}):Ve},{t}=useI18n();function createPlaceholderMessage(v){return v.includes("Input")||v.includes("AutoComplete")?t("common.inputText"):v.includes("Picker")||v.includes("Select")||v.includes("Checkbox")||v.includes("Radio")||v.includes("Switch")||v.includes("DatePicker")||v.includes("TimePicker")?t("common.chooseText"):""}const _sfc_main$j=defineComponent({name:"EditableCell",components:{FormOutlined,CloseOutlined,CheckOutlined,CellComponent,Spin},directives:{clickOutside:ClickOutside},props:{value:{type:[String,Number,Boolean,Object],default:""},record:{type:Object},column:{type:Object,default:()=>({})},index:propTypes.number},setup(v){const y=useTableContext(),C=ref(!1),A=ref(),We=ref(!1),Ge=ref(""),Xe=ref([]),Ve=ref(v.value),P=ref(v.value),Te=ref(!1),{prefixCls:j}=useDesign("editable-cell"),x=computed(()=>{var Mt;return((Mt=v.column)==null?void 0:Mt.editComponent)||"Input"}),qe=computed(()=>{var Mt;return(Mt=v.column)==null?void 0:Mt.editRule}),Be=computed(()=>unref(Ge)&&unref(We)),De=computed(()=>{const Mt=unref(x);return["Checkbox","Switch"].includes(Mt)}),He=computed(()=>{var on,dt,ur;const Mt=unref(De),vn=Mt?"checked":"value",Wn=unref(Ve),$e=Mt?isNumber$1(Wn)||isBoolean(Wn)?Wn:!!Wn:Wn;let Dt=(dt=(on=v.column)==null?void 0:on.editComponentProps)!=null?dt:{};const{record:vt,column:nn,index:_t}=v;isFunction$1(Dt)&&(Dt=(ur=Dt({text:Wn,record:vt,column:nn,index:_t}))!=null?ur:{}),Dt.onChangeTemp=Dt.onChange,delete Dt.onChange;const Nt=unref(x),ln={};return Nt==="ApiSelect"&&(ln.cache=!0),Ye(vt,nn,$e),Mu(ua(ua({size:"small",getPopupContainer:()=>{var dn;return(dn=unref(y==null?void 0:y.wrapRef.value))!=null?dn:document.body},placeholder:createPlaceholderMessage(unref(x))},ln),Dt),{[vn]:$e,disabled:unref(st)})});function Ye(Mt,vn,Wn){if(!Mt)return!1;const{key:$e,dataIndex:Dt}=vn;if(!$e&&!Dt)return;set(Mt,Dt||$e,Wn)}const st=computed(()=>{const{editDynamicDisabled:Mt}=v.column;let vn=!1;if(isBoolean(Mt)&&(vn=Mt),isFunction$1(Mt)){const{record:Wn}=v;vn=Mt({record:Wn})}return vn}),rt=computed(()=>{var vt,nn,_t;const{editValueMap:Mt}=v.column,vn=unref(Ve);if(Mt&&isFunction$1(Mt))return Mt(vn);const Wn=unref(x);if(!Wn.includes("Select")&&!Wn.includes("Radio"))return vn;const Dt=((nn=(vt=unref(He))==null?void 0:vt.options)!=null?nn:unref(Xe)||[]).find(Nt=>`${Nt.value}`==`${vn}`);return(_t=Dt==null?void 0:Dt.label)!=null?_t:vn}),Ke=computed(()=>unref(De)||unref(at)?{}:{width:"calc(100% - 48px)"}),tt=computed(()=>{const{align:Mt="center"}=v.column;return`edit-cell-align-${Mt}`}),at=computed(()=>{const{editable:Mt}=v.record||{};return!!Mt});watchEffect(()=>{Ve.value=v.value}),watchEffect(()=>{const{editable:Mt}=v.column;(isBoolean(Mt)||isBoolean(unref(at)))&&(C.value=!!Mt||unref(at))});function et(){var Mt;unref(at)||unref((Mt=v.column)==null?void 0:Mt.editRow)||(Ge.value="",C.value=!0,nextTick(()=>{var Wn;const vn=unref(A);(Wn=vn==null?void 0:vn.focus)==null||Wn.call(vn)}))}function Ot(vn){return no(this,arguments,function*(Mt){var Dt,vt;const Wn=unref(x);Mt?Wn==="Checkbox"?Ve.value=Mt.target.checked:Wn==="Switch"?Ve.value=Mt:Mt!=null&&Mt.target&&Reflect.has(Mt.target,"value")?Ve.value=Mt.target.value:(isString(Mt)||isBoolean(Mt)||isNumber$1(Mt)||isArray(Mt))&&(Ve.value=Mt):Ve.value=Mt;const $e=(Dt=unref(He))==null?void 0:Dt.onChangeTemp;$e&&isFunction$1($e)&&$e(...arguments),(vt=y.emit)==null||vt.call(y,"edit-change",{column:v.column,value:unref(Ve),record:toRaw(v.record)}),wt()})}function wt(){return no(this,null,function*(){const{column:Mt,record:vn}=v,{editRule:Wn}=Mt,$e=unref(Ve);if(Wn){if(isBoolean(Wn)&&!$e&&!isNumber$1($e)){We.value=!0;const Dt=unref(x);return Ge.value=createPlaceholderMessage(Dt),!1}if(isFunction$1(Wn)){const Dt=yield Wn($e,vn);return Dt?(Ge.value=Dt,We.value=!0,!1):(Ge.value="",!0)}}return Ge.value="",!0})}function xt(Mt=!0,vn=!0){return no(this,null,function*(){var ln;if(vn&&!(yield wt()))return!1;const{column:Wn,index:$e,record:Dt}=v;if(!Dt)return!1;const{key:vt,dataIndex:nn}=Wn,_t=unref(Ve);if(!vt&&!nn)return;const Nt=nn||vt;if(!Dt.editable){const{getBindValues:on}=y,{beforeEditSubmit:dt,columns:ur}=unref(on);if(dt&&isFunction$1(dt)){Te.value=!0;const dn=ur.map(Nn=>Nn.dataIndex).filter(Nn=>!!Nn);let en=!0;try{en=yield dt({record:pick(Dt,dn),index:$e,key:Nt,value:_t})}catch(Nn){en=!1}finally{Te.value=!1}if(en===!1)return}}set(Dt,Nt,_t),P.value=_t,Mt&&((ln=y.emit)==null||ln.call(y,"edit-end",{record:Dt,index:$e,key:Nt,value:_t})),C.value=!1})}function it(){return no(this,null,function*(){var Mt;(Mt=v.column)!=null&&Mt.editRow||xt()})}function yt(){xt()}function ut(){var vt;C.value=!1,Ve.value=P.value;const{column:Mt,index:vn,record:Wn}=v,{key:$e,dataIndex:Dt}=Mt;(vt=y.emit)==null||vt.call(y,"edit-cancel",{record:Wn,index:vn,key:Dt||$e,value:unref(Ve)})}function Et(){var vn;if((vn=v.column)!=null&&vn.editable||unref(at))return;unref(x).includes("Input")&&ut()}function Ht(Mt){const{replaceFields:vn}=unref(He);if(unref(x)==="ApiTreeSelect"){const{title:$e="title",value:Dt="value",children:vt="children"}=vn||{};let nn=treeToList(Mt,{children:vt});nn=nn.map(_t=>({label:_t[$e],value:_t[Dt]})),Xe.value=nn}else Xe.value=Mt}function an(Mt,vn){var Wn;v.record&&(isArray(v.record[Mt])?(Wn=v.record[Mt])==null||Wn.push(vn):v.record[Mt]=[vn])}return v.record&&(an("submitCbs",xt),an("validCbs",wt),an("cancelCbs",ut),v.column.dataIndex&&(v.record.editValueRefs||(v.record.editValueRefs={}),v.record.editValueRefs[v.column.dataIndex]=Ve),v.record.onCancelEdit=()=>{var Mt,vn;isArray((Mt=v.record)==null?void 0:Mt.cancelCbs)&&((vn=v.record)==null||vn.cancelCbs.forEach(Wn=>Wn()))},v.record.onSubmitEdit=()=>no(this,null,function*(){var Mt,vn,Wn,$e,Dt;if(isArray((Mt=v.record)==null?void 0:Mt.submitCbs))return(Wn=(vn=v.record)==null?void 0:vn.onValid)!=null&&Wn.call(vn)?(((($e=v.record)==null?void 0:$e.submitCbs)||[]).forEach(nn=>nn(!1,!1)),(Dt=y.emit)==null||Dt.call(y,"edit-row-end"),!0):void 0})),{isEdit:C,prefixCls:j,handleEdit:et,currentValueRef:Ve,handleSubmit:xt,handleChange:Ot,handleCancel:ut,elRef:A,getComponent:x,getRule:qe,onClickOutside:Et,ruleMessage:Ge,getRuleVisible:Be,getComponentProps:He,handleOptionsChange:Ht,getWrapperStyle:Ke,getWrapperClass:tt,getRowEditable:at,getValues:rt,handleEnter:it,handleSubmitClick:yt,spinning:Te}},render(){var v,y;return createVNode("div",{class:this.prefixCls},[withDirectives(createVNode("div",{class:{[`${this.prefixCls}__normal`]:!0,"ellipsis-cell":this.column.ellipsis},onClick:this.handleEdit},[createVNode("div",{class:"cell-content",title:this.column.ellipsis&&(v=this.getValues)!=null?v:""},[this.column.editRender?this.column.editRender({text:this.value,record:this.record,column:this.column,index:this.index}):(y=this.getValues)!=null?y:" "]),!this.column.editRow&&createVNode(FormOutlined,{class:`${this.prefixCls}__normal-icon`},null)]),[[vShow,!this.isEdit]]),this.isEdit&&createVNode(Spin,{spinning:this.spinning},{default:()=>[withDirectives(createVNode("div",{class:`${this.prefixCls}__wrapper`},[createVNode(CellComponent,mergeProps(this.getComponentProps,{component:this.getComponent,style:this.getWrapperStyle,popoverVisible:this.getRuleVisible,rule:this.getRule,ruleMessage:this.ruleMessage,class:this.getWrapperClass,ref:"elRef",onChange:this.handleChange,onOptionsChange:this.handleOptionsChange,onPressEnter:this.handleEnter}),null),!this.getRowEditable&&createVNode("div",{class:`${this.prefixCls}__action`},[createVNode(CheckOutlined,{class:[`${this.prefixCls}__icon`,"mx-2"],onClick:this.handleSubmitClick},null),createVNode(CloseOutlined,{class:`${this.prefixCls}__icon `,onClick:this.handleCancel},null)])]),[[resolveDirective("click-outside"),this.onClickOutside]])]})])}}),EditableCell_vue_vue_type_style_index_0_lang="";function renderEditCell(v){return({text:y,record:C,index:A})=>(toRaw(C).onValid=()=>no(this,null,function*(){if(isArray(C==null?void 0:C.validCbs)){const We=((C==null?void 0:C.validCbs)||[]).map(Xe=>Xe());return(yield Promise.all(We)).every(Xe=>!!Xe)}else return!1}),toRaw(C).onEdit=(We,Ge=!1)=>no(this,null,function*(){var Xe,Ve;return Ge||(C.editable=We),!We&&Ge?(yield C.onValid())&&(yield(Xe=C.onSubmitEdit)==null?void 0:Xe.call(C))?(C.editable=!1,!0):!1:(!We&&!Ge&&((Ve=C.onCancelEdit)==null||Ve.call(C)),!0)}),h(_sfc_main$j,{value:y,record:C,column:v,index:A}))}function handleItem(v,y){const{key:C,dataIndex:A,children:We}=v;v.align=v.align||DEFAULT_ALIGN,y&&(C||(v.key=typeof A=="object"?A.join("-"):A),isBoolean(v.ellipsis)||Object.assign(v,{ellipsis:y})),We&&We.length&&handleChildren(We,!!y)}function handleChildren(v,y){v&&v.forEach(C=>{const{children:A}=C;handleItem(C,y),handleChildren(A,y)})}function handleIndexColumn(v,y,C){const{t:A}=useI18n(),{showIndexColumn:We,indexColumnProps:Ge,isTreeTable:Xe}=unref(v);let Ve=!1;if(unref(Xe)||(C.forEach(()=>{const Te=C.findIndex(j=>j.flag===INDEX_COLUMN_FLAG);We?Ve=Te===-1:!We&&Te!==-1&&C.splice(Te,1)}),!Ve))return;const P=C.some(Te=>Te.fixed==="left");C.unshift(ua(ua({flag:INDEX_COLUMN_FLAG,width:60,title:A("component.table.index"),align:"center",customRender:({index:Te})=>{const j=unref(y);if(isBoolean(j))return`${Te+1}`;const{current:x=1,pageSize:qe=PAGE_SIZE}=j;return((x<1?1:x)-1)*qe+Te+1}},P?{fixed:"left"}:{}),Ge))}function handleActionColumn(v,y){const{actionColumn:C}=unref(v);if(!C)return;const A=y.findIndex(We=>We.flag===ACTION_COLUMN_FLAG);A===-1&&y.push(Mu(ua(Mu(ua({},y[A]),{fixed:"right"}),C),{flag:ACTION_COLUMN_FLAG}))}function useColumns(v,y){const C=ref(unref(v).columns);let A=unref(v).columns;const We=computed(()=>{const De=cloneDeep(unref(C));if(handleIndexColumn(v,y,De),handleActionColumn(v,De),!De)return[];const{ellipsis:He}=unref(v);return De.forEach(Ye=>{const{customRender:st,slots:rt}=Ye;handleItem(Ye,Reflect.has(Ye,"ellipsis")?!!Ye.ellipsis:!!He&&!st&&!rt)}),De});function Ge(De){const He=De.ifShow;let Ye=!0;return isBoolean(He)&&(Ye=He),isFunction$1(He)&&(Ye=He(De)),Ye}const{hasPermission:Xe}=usePermission(),Ve=computed(()=>{const De=sortFixedColumn(unref(We)),He=st=>{const{slots:rt,customRender:Ke,format:tt,edit:at,editRow:et,flag:Ot}=st;(!rt||!(rt!=null&&rt.title))&&(st.customTitle=st.title);const wt=[INDEX_COLUMN_FLAG,ACTION_COLUMN_FLAG].includes(Ot);return!Ke&&tt&&!at&&!wt&&(st.customRender=({text:xt,record:it,index:yt})=>formatCell(xt,tt,it,yt)),(at||et)&&!wt&&(st.customRender=renderEditCell(st)),reactive(st)};return cloneDeep(De).filter(st=>Xe(st.auth)&&Ge(st)).map(st=>{var rt;return(rt=st.children)!=null&&rt.length&&(st.children=st.children.map(He)),He(st)})});watch(()=>unref(v).columns,De=>{var He;C.value=De,A=(He=De==null?void 0:De.filter(Ye=>!Ye.flag))!=null?He:[]});function P(De,He){!De||!He||A.forEach(Ye=>{if(Ye.dataIndex===De){Object.assign(Ye,He);return}})}function Te(De){const He=cloneDeep(De);if(!isArray(He))return;if(He.length<=0){C.value=[];return}const Ye=He[0],st=A.map(rt=>rt.dataIndex);if(!isString(Ye)&&!isArray(Ye))C.value=He;else{const rt=He.map(tt=>tt.toString()),Ke=[];A.forEach(tt=>{var at;Ke.push(Mu(ua({},tt),{defaultHidden:!rt.includes(((at=tt.dataIndex)==null?void 0:at.toString())||tt.key)}))}),isEqual(st,He)||Ke.sort((tt,at)=>{var et,Ot;return rt.indexOf((et=tt.dataIndex)==null?void 0:et.toString())-rt.indexOf((Ot=at.dataIndex)==null?void 0:Ot.toString())}),C.value=Ke}}function j(De){const{ignoreIndex:He,ignoreAction:Ye,sort:st}=De||{};let rt=toRaw(unref(We));return He&&(rt=rt.filter(Ke=>Ke.flag!==INDEX_COLUMN_FLAG)),Ye&&(rt=rt.filter(Ke=>Ke.flag!==ACTION_COLUMN_FLAG)),st&&(rt=sortFixedColumn(rt)),rt}function x(){return A}function qe(De){isArray(De)&&(A=De.filter(He=>!He.flag))}function Be(De,He){He.width=De}return{getColumnsRef:We,getCacheColumns:x,getColumns:j,setColumns:Te,setColumnWidth:Be,getViewColumns:Ve,setCacheColumnsByField:P,setCacheColumns:qe}}function sortFixedColumn(v){const y=[],C=[],A=[];for(const We of v){if(We.fixed==="left"){y.push(We);continue}if(We.fixed==="right"){C.push(We);continue}A.push(We)}return[...y,...A,...C].filter(We=>!We.defaultHidden)}function formatCell(v,y,C,A){if(!y)return v;if(isFunction$1(y))return y(v,C,A);try{const We="date|";if(isString(y)&&y.startsWith(We)&&v){const Ge=y.replace(We,"");return Ge?formatToDate(v,Ge):v}if(isMap(y))return y.get(v)}catch(We){return v}}function useDataSource(v,{getPaginationInfo:y,setPagination:C,setLoading:A,getFieldsValue:We,clearSelectedRowKeys:Ge,tableData:Xe},Ve){const P=reactive({sortInfo:{},filterInfo:{}}),Te=ref([]),j=ref({});watchEffect(()=>{Xe.value=unref(Te)}),watch(()=>unref(v).dataSource,()=>{const{dataSource:it,api:yt}=unref(v);!yt&&it&&(Te.value=it)},{immediate:!0});function x(it,yt,ut){const{clearSelectOnPageChange:Et,sortFn:Ht,filterFn:an}=unref(v);Et&&Ge(),C(it);const Mt={};if(ut&&isFunction$1(Ht)){const vn=Ht(ut);P.sortInfo=vn,Mt.sortInfo=vn}if(yt&&isFunction$1(an)){const vn=an(yt);P.filterInfo=vn,Mt.filterInfo=vn}at(Mt)}function qe(it){!it||!Array.isArray(it)||it.forEach(yt=>{yt[ROW_KEY]||(yt[ROW_KEY]=buildUUID()),yt.children&&yt.children.length&&qe(yt.children)})}const Be=computed(()=>unref(v).autoCreateKey&&!unref(v).rowKey),De=computed(()=>{const{rowKey:it}=unref(v);return unref(Be)?ROW_KEY:it}),He=computed(()=>{const it=unref(Te);if(!it||it.length===0)return unref(Te);if(unref(Be)){const yt=it[0],ut=it[it.length-1];if(yt&&ut&&(!yt[ROW_KEY]||!ut[ROW_KEY])){const Et=cloneDeep(unref(Te));Et.forEach(Ht=>{Ht[ROW_KEY]||(Ht[ROW_KEY]=buildUUID()),Ht.children&&Ht.children.length&&qe(Ht.children)}),Te.value=Et}}return unref(Te)});function Ye(it,yt,ut){return no(this,null,function*(){return Te.value[it]&&(Te.value[it][yt]=ut),Te.value[it]})}function st(it,yt){const ut=tt(it);if(ut){for(const Et in ut)Reflect.has(yt,Et)&&(ut[Et]=yt[Et]);return ut}}function rt(it){var Ht;if(!Te.value||Te.value.length==0)return;const yt=unref(De);if(!yt)return;const ut=Array.isArray(it)?it:[it];function Et(an,Mt){const vn=Wn(an,Mt);if(vn===null||vn.index===-1)return;vn.data.splice(vn.index,1);function Wn($e,Dt){var vt;if($e==null)return null;for(let nn=0;nn<$e.length;nn++){const _t=$e[nn];let Nt=yt;if(isFunction$1(yt)&&(Nt=yt(_t)),_t[Nt]===Dt)return{index:nn,data:$e};if(((vt=_t.children)==null?void 0:vt.length)>0){const ln=Wn(_t.children,Dt);if(ln!=null)return ln}}return null}}for(const an of ut)Et(Te.value,an),Et(unref(v).dataSource,an);C({total:(Ht=unref(v).dataSource)==null?void 0:Ht.length})}function Ke(it,yt){var Et;yt=yt!=null?yt:(Et=Te.value)==null?void 0:Et.length;const ut=isObject$1(it)?[it]:it;return unref(Te).splice(yt,0,...ut),unref(Te)}function tt(it){if(!Te.value||Te.value.length==0)return;const yt=unref(De);if(!yt)return;const{childrenColumnName:ut="children"}=unref(v);return(Ht=>{let an;return Ht.some(function Mt(vn){if(typeof yt=="function"){if(yt(vn)===it)return an=vn,!0}else if(Reflect.has(vn,yt)&&vn[yt]===it)return an=vn,!0;return vn[ut]&&vn[ut].some(Mt)}),an})(Te.value)}function at(it){return no(this,null,function*(){var $e,Dt,vt;const{api:yt,searchInfo:ut,defSort:Et,fetchSetting:Ht,beforeFetch:an,afterFetch:Mt,useSearchForm:vn,pagination:Wn}=unref(v);if(!(!yt||!isFunction$1(yt)))try{A(!0);const{pageField:nn,sizeField:_t,listField:Nt,totalField:ln}=Object.assign({},FETCH_SETTING,Ht);let on={};const{current:dt=1,pageSize:ur=PAGE_SIZE}=unref(y);isBoolean(Wn)&&!Wn||isBoolean(y)?on={}:(on[nn]=it&&it.page||dt,on[_t]=ur);const{sortInfo:dn={},filterInfo:en}=P;let Nn=merge(on,vn?We():{},ut,($e=it==null?void 0:it.searchInfo)!=null?$e:{},Et,dn,en,(Dt=it==null?void 0:it.sortInfo)!=null?Dt:{},(vt=it==null?void 0:it.filterInfo)!=null?vt:{});an&&isFunction$1(an)&&(Nn=(yield an(Nn))||Nn);const fn=yield yt(Nn);j.value=fn;const cn=Array.isArray(fn);let hn=cn?fn:get(fn,Nt);const er=cn?fn.length:get(fn,ln);if(Number(er)){const Fn=Math.ceil(er/ur);if(dt>Fn)return C({current:Fn}),yield at(it)}return Mt&&isFunction$1(Mt)&&(hn=(yield Mt(hn))||hn),Te.value=hn,C({total:er||0}),it&&it.page&&C({current:it.page||1}),Ve("fetch-success",{items:unref(hn),total:er}),hn}catch(nn){Ve("fetch-error",nn),Te.value=[],C({total:0})}finally{A(!1)}})}function et(it){Te.value=it}function Ot(){return He.value}function wt(){return j.value}function xt(it){return no(this,null,function*(){return yield at(it)})}return onMounted(()=>{useTimeoutFn(()=>{unref(v).immediate&&at()},16)}),{getDataSourceRef:He,getDataSource:Ot,getRawDataSource:wt,getRowKey:De,setTableData:et,getAutoCreateKey:Be,fetch:at,reload:xt,updateTableData:Ye,updateTableDataRecord:st,deleteTableDataRecord:rt,insertTableDataRecord:Ke,findTableDataRecord:tt,handleTableChange:x}}function useLoading(v){const y=ref(unref(v).loading);watch(()=>unref(v).loading,We=>{y.value=We});const C=computed(()=>unref(y));function A(We){y.value=We}return{getLoading:C,setLoading:A}}function useRowSelection(v,y,C){const A=ref([]),We=ref([]),Ge=computed(()=>{const{rowSelection:He}=unref(v);return He?ua({selectedRowKeys:unref(A),onChange:Ye=>{P(Ye)}},omit(He,["onChange"])):null});watch(()=>{var He;return(He=unref(v).rowSelection)==null?void 0:He.selectedRowKeys},He=>{P(He)}),watch(()=>unref(A),()=>{nextTick(()=>{const{rowSelection:He}=unref(v);if(He){const{onChange:Ye}=He;Ye&&isFunction$1(Ye)&&Ye(qe(),Be())}C("selection-change",{keys:qe(),rows:Be()})})},{deep:!0});const Xe=computed(()=>unref(v).autoCreateKey&&!unref(v).rowKey),Ve=computed(()=>{const{rowKey:He}=unref(v);return unref(Xe)?ROW_KEY:He});function P(He){var rt;A.value=He||[];const Ye=findNodeAll(toRaw(unref(y)).concat(toRaw(unref(We))),Ke=>He==null?void 0:He.includes(Ke[unref(Ve)]),{children:(rt=v.value.childrenColumnName)!=null?rt:"children"}),st=[];He==null||He.forEach(Ke=>{const tt=Ye.find(at=>at[unref(Ve)]===Ke);tt&&st.push(tt)}),We.value=st}function Te(He){We.value=He}function j(){We.value=[],A.value=[]}function x(He){const st=unref(A).findIndex(rt=>rt===He);st!==-1&&unref(A).splice(st,1)}function qe(){return unref(A)}function Be(){return unref(We)}function De(){return unref(Ge)}return{getRowSelection:De,getRowSelectionRef:Ge,getSelectRows:Be,getSelectRowKeys:qe,setSelectedRowKeys:P,clearSelectedRowKeys:j,deleteSelectRowByKey:x,setSelectedRows:Te}}function useTableScroll(v,y,C,A,We,Ge,Xe){const Ve=ref(167),P=useModalContext(),Te=useDebounceFn(x,100),j=computed(()=>{const{canResize:wt,scroll:xt}=unref(v);return wt&&!(xt||{}).y});watch(()=>{var wt;return[unref(j),(wt=unref(We))==null?void 0:wt.length]},()=>{Te()},{flush:"post"});function x(){nextTick(()=>{at()})}function qe(wt){var xt;Ve.value=wt,(xt=P==null?void 0:P.redoModalHeight)==null||xt.call(P)}let Be,De,He;function Ye(wt,xt){const it=wt.scrollHeight>wt.clientHeight,yt=wt.scrollWidth>wt.clientWidth;it?xt.classList.contains("hide-scrollbar-y")&&xt.classList.remove("hide-scrollbar-y"):!xt.classList.contains("hide-scrollbar-y")&&xt.classList.add("hide-scrollbar-y"),yt?xt.classList.contains("hide-scrollbar-x")&&xt.classList.remove("hide-scrollbar-x"):!xt.classList.contains("hide-scrollbar-x")&&xt.classList.add("hide-scrollbar-x")}function st(wt){const{pagination:xt}=unref(v);let it=2;if(isBoolean(xt))it=-8;else if(Be=wt.querySelector(".ant-pagination"),Be){const yt=Be.offsetHeight;it+=yt||0}else it+=24;return it}function rt(wt){const{pagination:xt}=unref(v);let it=0;if(!isBoolean(xt))if(!De)De=wt.querySelector(".ant-table-footer");else{const yt=De.offsetHeight;it+=yt||0}return it}function Ke(wt){let xt=0;return wt&&(xt=wt.offsetHeight),xt}function tt(wt,xt){var an,Mt,vn,Wn,$e,Dt;const{pagination:it,isCanResizeParent:yt,useSearchForm:ut}=unref(v);let Et=30,Ht=0;if(unref(Ge)&&yt){let _t=10;const Nt=(Mt=(an=unref(Ge))==null?void 0:an.offsetHeight)!=null?Mt:0;let ln=(Wn=(vn=unref(Xe))==null?void 0:vn.$el.offsetHeight)!=null?Wn:0;ln&&(ln+=16),isBoolean(it)&&!it&&(_t=0),isBoolean(ut)&&!ut&&(Et=0);const on=(Dt=($e=wt.querySelector(".ant-table-title"))==null?void 0:$e.offsetHeight)!=null?Dt:0;Ht=Nt-ln-on-12-_t}else Ht=getViewportOffset(xt).bottomIncludeBody;return{paddingHeight:Et,bottomIncludeBody:Ht}}function at(){return no(this,null,function*(){var Dt;const{resizeHeightOffset:wt,maxHeight:xt}=unref(v),it=unref(We),yt=unref(y);if(!yt)return;const ut=yt.$el;if(!ut||!He&&(He=ut.querySelector(".ant-table-body"),!He)||(Ye(He,ut),He.style.height="unset",!unref(j)||!unref(it)||it.length===0))return;yield nextTick();const Et=ut.querySelector(".ant-table-thead ");if(!Et)return;const Ht=st(ut),an=rt(ut),Mt=Ke(Et),{paddingHeight:vn,bottomIncludeBody:Wn}=tt(ut,Et);let $e=Wn-(wt||0)-vn-Ht-an-Mt;$e=(Dt=$e>xt?xt:$e)!=null?Dt:$e,qe($e),He.style.height=`${$e}px`})}useWindowSizeFn(at,{wait:280}),onMountedOrActivated(()=>{at(),nextTick(()=>{Te()})});const et=computed(()=>{var an,Mt;let wt=0;unref(A)&&(wt+=60);const xt=150,it=unref(C).filter(vn=>!vn.defaultHidden);it.forEach(vn=>{wt+=Number.parseFloat(vn.width)||0});const ut=it.filter(vn=>!Reflect.has(vn,"width")).length;ut!==0&&(wt+=ut*xt);const Et=unref(y);return((Mt=(an=Et==null?void 0:Et.$el)==null?void 0:an.offsetWidth)!=null?Mt:0)>wt?"100%":wt});return{getScrollRef:computed(()=>{const wt=unref(Ve),{canResize:xt,scroll:it}=unref(v);return ua({x:unref(et),y:xt?wt:null,scrollToFirstRowOnChange:!1},it)}),redoHeight:x}}function useTableScrollTo(v,y){let C;function A(Ge){return no(this,null,function*(){var P;const{id:Xe}=Ge,Ve=C==null?void 0:C.querySelector(`[data-row-key="${Xe}"]`);yield nextTick(),C==null||C.scrollTo({top:(P=Ve==null?void 0:Ve.offsetTop)!=null?P:0,behavior:"smooth"})})}function We(Ge){const Xe=unref(v);if(!Xe)return;const Ve=Xe.$el;if(!Ve||!C&&(C=Ve.querySelector(".ant-table-body"),!C))return;const P=unref(y);if(P)if(Ge==="top")A(P[0]);else if(Ge==="bottom")A(P[P.length-1]);else{const Te=P.find(j=>j.id===Ge);Te&&A(Te)}}return{scrollTo:We}}function getKey(v,y,C){return!y||C?v[ROW_KEY]:isString(y)?v[y]:isFunction$1(y)?v[y(v)]:null}function useCustomRow(v,{setSelectedRowKeys:y,getSelectRowKeys:C,getAutoCreateKey:A,clearSelectedRowKeys:We,emit:Ge}){return{customRow:(Ve,P)=>({onClick:Te=>{Te==null||Te.stopPropagation();function j(){var rt;const{rowSelection:x,rowKey:qe,clickToRowSelect:Be}=unref(v);if(!x||!Be)return;const De=C()||[],He=getKey(Ve,qe,unref(A));if(He===null)return;if(x.type==="checkbox"){const Ke=(rt=Te.composedPath)==null?void 0:rt.call(Te).find(et=>et.tagName==="TR");if(!Ke)return;const tt=Ke.querySelector("input[type=checkbox]");if(!tt||tt.hasAttribute("disabled"))return;if(!De.includes(He)){De.push(He),y(De);return}const at=De.findIndex(et=>et===He);De.splice(at,1),y(De);return}if(x.type==="radio"){if(!De.includes(He)){De.length&&We(),y([He]);return}We()}}j(),Ge("row-click",Ve,P,Te)},onDblclick:Te=>{Ge("row-dbClick",Ve,P,Te)},onContextmenu:Te=>{Ge("row-contextmenu",Ve,P,Te)},onMouseenter:Te=>{Ge("row-mouseenter",Ve,P,Te)},onMouseleave:Te=>{Ge("row-mouseleave",Ve,P,Te)}})}}function useTableStyle(v,y){function C(A,We){const{striped:Ge,rowClassName:Xe}=unref(v),Ve=[];return Ge&&Ve.push((We||0)%2===1?`${y}-row__striped`:""),Xe&&isFunction$1(Xe)&&Ve.push(Xe(A,We)),Ve.filter(P=>!!P).join(" ")}return{getRowClassName:C}}const _sfc_main$i=defineComponent({name:"ColumnSetting",__name:"ColumnSetting",emits:["columns-change"],setup(v,{emit:y}){const C=y,A=useAttrs$1(),{t:We}=useI18n(),Ge=useTableContext(),Xe=omit(Ge.getRowSelection(),"selectedRowKeys");let Ve=!1,P=!1,Te=!1;const j=ref([]),x=ref([]),qe=ref([]),Be=ref(null),De=reactive({checkAll:!0,checkedList:[],defaultCheckList:[]});let He={};const Ye=ref(!1),st=ref(!1),{prefixCls:rt}=useDesign("basic-column-setting"),Ke=computed(()=>unref(Ge==null?void 0:Ge.getBindValues)||{});watchEffect(()=>{const $e=Ge.getColumns();setTimeout(()=>{P?P=!1:$e.length&&at()},0)}),watchEffect(()=>{const $e=unref(Ke);Te?Te=!1:He=cloneDeep($e),Ye.value=!!$e.showIndexColumn,st.value=!!$e.rowSelection});function tt(){const $e=[];return Ge.getColumns({ignoreIndex:!0,ignoreAction:!0}).forEach(Dt=>{$e.push(ua({label:Dt.title||Dt.customTitle,value:Dt.dataIndex||Dt.title},Dt))}),$e}function at($e=!1){return no(this,null,function*(){var _t;x.value=[];const Dt=unref(Be);if(Dt&&Dt.$el){const Nt=Dt.$el;Array.from(Nt.children).forEach(ln=>Nt.removeChild(ln))}yield nextTick();const vt=$e?cloneDeep(j.value):tt(),nn=Ge.getColumns({ignoreAction:!0,ignoreIndex:!0}).map(Nt=>Nt.defaultHidden?"":Nt.dataIndex||Nt.title).filter(Boolean);x.value=vt,qe.value=vt,(_t=Ge.setCacheColumns)==null||_t.call(Ge,vt),!$e&&(j.value=cloneDeep(vt)),De.defaultCheckList=nn,De.checkedList=nn,De.checkAll=nn.length===vt.length,Ve=!1,ut()})}function et($e){const Dt=qe.value.map(vt=>vt.value);qe.value.forEach(vt=>vt.defaultHidden=!$e.target.checked),$e.target.checked?(De.checkedList=Dt,Mt(Dt)):(De.checkedList=[],Mt([]))}const Ot=computed(()=>{const $e=x.value.length;let Dt=De.checkedList.length;return Dt>0&&Dt<$e});function wt($e){const Dt=qe.value.length;De.checkAll=$e.length===Dt;const vt=unref(qe).map(nn=>nn.value);$e.sort((nn,_t)=>vt.indexOf(String(nn))-vt.indexOf(String(_t))),unref(qe).forEach(nn=>{nn.defaultHidden=!$e.includes(nn.value)}),Mt($e)}let xt,it=[];function yt(){Mt(j.value),at(!0),Ye.value=!!He.showIndexColumn,st.value=!!He.rowSelection,Ge.setProps({showIndexColumn:Ye.value,rowSelection:st.value?Xe:void 0}),xt.sort(it)}function ut(){Ve||nextTick(()=>{const $e=unref(Be);if(!$e)return;const Dt=$e.$el;Dt&&(xt=Sortable.create(unref(Dt),{animation:500,delay:400,delayOnTouchOnly:!0,handle:".table-column-drag-icon ",onEnd:vt=>{const{oldIndex:nn,newIndex:_t}=vt;if(isNil(nn)||isNil(_t)||nn===_t)return;const Nt=cloneDeep(qe.value);nn>_t?(Nt.splice(_t,0,Nt[nn]),Nt.splice(nn+1,1)):(Nt.splice(_t+1,0,Nt[nn]),Nt.splice(nn,1)),qe.value=Nt,Mt(Nt.filter(ln=>De.checkedList.includes(ln.value)))}}),it=xt.toArray(),Ve=!0)})}function Et($e){Te=!0,P=!0,Ge.setProps({showIndexColumn:$e.target.checked})}function Ht($e){Te=!0,P=!0,Ge.setProps({rowSelection:$e.target.checked?Xe:void 0})}function an($e,Dt){var Nt;if(!De.checkedList.includes($e.dataIndex))return;const vt=tt().filter(ln=>De.checkedList.includes(ln.dataIndex)),nn=$e.fixed===Dt?!1:Dt,_t=vt.findIndex(ln=>ln.dataIndex===$e.dataIndex);_t!==-1&&(vt[_t].fixed=nn),$e.fixed=nn,nn&&!$e.width&&($e.width=100),Wn($e),(Nt=Ge.setCacheColumnsByField)==null||Nt.call(Ge,$e.dataIndex,{fixed:nn}),Mt(vt)}function Mt($e){Te=!0,P=!0,Ge.setColumns($e);const Dt=unref(qe).map(vt=>{const nn=$e.findIndex(_t=>_t===vt.value||typeof _t!="string"&&_t.dataIndex===vt.value)!==-1;return{dataIndex:vt.value,fixed:vt.fixed,visible:nn}});C("columns-change",Dt)}function vn(){return isFunction$1(A.getPopupContainer)?A.getPopupContainer():getPopupContainer()}function Wn($e){qe.value.forEach(Dt=>{Dt.value===$e.dataIndex&&Object.assign(Dt,$e)})}return($e,Dt)=>{const vt=resolveComponent("a-button");return openBlock(),createBlock(unref(Tooltip),{placement:"top"},{title:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(We)("component.table.settingColumn")),1)]),default:withCtx(()=>[createVNode(unref(Popover),{placement:"bottomLeft",trigger:"click",onOpenChange:ut,overlayClassName:`${unref(rt)}__column-list`,getPopupContainer:vn},{title:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(`${unref(rt)}__popover-title`)},[createVNode(unref(Checkbox),{indeterminate:Ot.value,checked:De.checkAll,"onUpdate:checked":Dt[0]||(Dt[0]=nn=>De.checkAll=nn),onChange:et},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(We)("component.table.settingColumnShow")),1)]),_:1},8,["indeterminate","checked"]),createVNode(unref(Checkbox),{checked:Ye.value,"onUpdate:checked":Dt[1]||(Dt[1]=nn=>Ye.value=nn),onChange:Et},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(We)("component.table.settingIndexColumnShow")),1)]),_:1},8,["checked"]),createVNode(unref(Checkbox),{checked:st.value,"onUpdate:checked":Dt[2]||(Dt[2]=nn=>st.value=nn),onChange:Ht,disabled:!unref(Xe)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(We)("component.table.settingSelectColumnShow")),1)]),_:1},8,["checked","disabled"]),createVNode(vt,{size:"small",type:"link",onClick:yt},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(We)("common.resetText")),1)]),_:1})],2)]),content:withCtx(()=>[createVNode(unref(ScrollContainer),null,{default:withCtx(()=>[createVNode(unref(Checkbox).Group,{value:De.checkedList,"onUpdate:value":Dt[3]||(Dt[3]=nn=>De.checkedList=nn),onChange:wt,ref_key:"columnListRef",ref:Be},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(x.value,nn=>(openBlock(),createElementBlock(Fragment,{key:nn.value},["ifShow"in nn&&!nn.ifShow?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${unref(rt)}__check-item`)},[createVNode(unref(DragOutlined),{class:"table-column-drag-icon"}),createVNode(unref(Checkbox),{value:nn.value},{default:withCtx(()=>[createTextVNode(toDisplayString(nn.label),1)]),_:2},1032,["value"]),createVNode(unref(Tooltip),{placement:"bottomLeft",mouseLeaveDelay:.4,getPopupContainer:vn},{title:withCtx(()=>[createTextVNode(toDisplayString(unref(We)("component.table.settingFixedLeft")),1)]),default:withCtx(()=>[createVNode(_sfc_main$G,{icon:"line-md:arrow-align-left",class:normalizeClass([`${unref(rt)}__fixed-left`,{active:nn.fixed==="left",disabled:!De.checkedList.includes(nn.value)}]),onClick:_t=>an(nn,"left")},null,8,["class","onClick"])]),_:2},1024),createVNode(unref(Divider),{type:"vertical"}),createVNode(unref(Tooltip),{placement:"bottomLeft",mouseLeaveDelay:.4,getPopupContainer:vn},{title:withCtx(()=>[createTextVNode(toDisplayString(unref(We)("component.table.settingFixedRight")),1)]),default:withCtx(()=>[createVNode(_sfc_main$G,{icon:"line-md:arrow-align-left",class:normalizeClass([`${unref(rt)}__fixed-right`,{active:nn.fixed==="right",disabled:!De.checkedList.includes(nn.value)}]),onClick:_t=>an(nn,"right")},null,8,["class","onClick"])]),_:2},1024)],2))],64))),128))]),_:1},8,["value"])]),_:1})]),default:withCtx(()=>[createVNode(unref(SettingOutlined))]),_:1},8,["overlayClassName"])]),_:1})}}}),ColumnSetting_vue_vue_type_style_index_0_lang="",_sfc_main$h=defineComponent({name:"SizeSetting",__name:"SizeSetting",setup(v){const y=useTableContext(),{t:C}=useI18n(),A=ref([y.getSize()]),We=({key:Ge})=>{A.value=[Ge],y.setProps({size:Ge})};return(Ge,Xe)=>(openBlock(),createBlock(unref(Tooltip),{placement:"top"},{title:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(C)("component.table.settingDens")),1)]),default:withCtx(()=>[createVNode(unref(Dropdown$1),{placement:"bottom",trigger:["click"],getPopupContainer:unref(getPopupContainer)},{overlay:withCtx(()=>[createVNode(unref(Menu),{onClick:We,selectable:"",selectedKeys:A.value,"onUpdate:selectedKeys":Xe[0]||(Xe[0]=Ve=>A.value=Ve)},{default:withCtx(()=>[createVNode(unref(Menu).Item,{key:"default"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(C)("component.table.settingDensDefault")),1)]),_:1}),createVNode(unref(Menu).Item,{key:"middle"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(C)("component.table.settingDensMiddle")),1)]),_:1}),createVNode(unref(Menu).Item,{key:"small"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(C)("component.table.settingDensSmall")),1)]),_:1})]),_:1},8,["selectedKeys"])]),default:withCtx(()=>[createVNode(unref(ColumnHeightOutlined))]),_:1},8,["getPopupContainer"])]),_:1}))}}),_sfc_main$g=defineComponent({name:"RedoSetting",__name:"RedoSetting",setup(v){const y=useTableContext(),{t:C}=useI18n();function A(){y.reload()}return(We,Ge)=>(openBlock(),createBlock(unref(Tooltip),{placement:"top"},{title:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(C)("common.redo")),1)]),default:withCtx(()=>[createVNode(unref(RedoOutlined),{onClick:A})]),_:1}))}}),_sfc_main$f=defineComponent({name:"FullScreenSetting",__name:"FullScreenSetting",setup(v){const y=useTableContext(),{t:C}=useI18n(),{toggle:A,isFullscreen:We}=useFullscreen(y.wrapRef);return(Ge,Xe)=>(openBlock(),createBlock(unref(Tooltip),{placement:"top"},{title:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(C)("component.table.settingFullScreen")),1)]),default:withCtx(()=>[unref(We)?(openBlock(),createBlock(unref(FullscreenExitOutlined),{key:1,onClick:unref(A)},null,8,["onClick"])):(openBlock(),createBlock(unref(FullscreenOutlined),{key:0,onClick:unref(A)},null,8,["onClick"]))]),_:1}))}}),_hoisted_1$7={class:"table-settings"},_sfc_main$e=defineComponent({name:"TableSetting",__name:"index",props:{setting:{type:Object,default:()=>({})}},emits:["columns-change"],setup(v,{emit:y}){const C=v,A=y,We=useTableContext(),Ge=computed(()=>ua({redo:!0,size:!0,setting:!0,fullScreen:!1},C.setting));function Xe(P){A("columns-change",P)}function Ve(){return We?unref(We.wrapRef):document.body}return(P,Te)=>(openBlock(),createElementBlock("div",_hoisted_1$7,[Ge.value.redo?(openBlock(),createBlock(_sfc_main$g,{key:0,getPopupContainer:Ve})):createCommentVNode("",!0),Ge.value.size?(openBlock(),createBlock(_sfc_main$h,{key:1,getPopupContainer:Ve})):createCommentVNode("",!0),Ge.value.setting?(openBlock(),createBlock(_sfc_main$i,{key:2,onColumnsChange:Xe,getPopupContainer:Ve})):createCommentVNode("",!0),Ge.value.fullScreen?(openBlock(),createBlock(_sfc_main$f,{key:3,getPopupContainer:Ve})):createCommentVNode("",!0)]))}}),index_vue_vue_type_style_index_0_lang="",_sfc_main$d=defineComponent({name:"BasicTableTitle",__name:"TableTitle",props:{title:{type:[Function,String]},getSelectRows:{type:Function},helpMessage:{type:[String,Array]}},setup(v){const y=v,{prefixCls:C}=useDesign("basic-table-title"),A=computed(()=>{const{title:We,getSelectRows:Ge=()=>{}}=y;let Xe=We;return isFunction$1(We)&&(Xe=We({selectRows:Ge()})),Xe});return(We,Ge)=>A.value?(openBlock(),createBlock(unref(BasicTitle),{key:0,class:normalizeClass(unref(C)),helpMessage:v.helpMessage},{default:withCtx(()=>[createTextVNode(toDisplayString(A.value),1)]),_:1},8,["class","helpMessage"])):createCommentVNode("",!0)}}),TableTitle_vue_vue_type_style_index_0_lang="",_hoisted_1$6={style:{width:"100%"}},_hoisted_2={key:0,style:{margin:"5px"}},_hoisted_3={class:"flex items-center"},_sfc_main$c=defineComponent({name:"BasicTableHeader",__name:"TableHeader",props:{title:{type:[Function,String]},tableSetting:{type:Object},showTableSetting:{type:Boolean},titleHelpMessage:{type:[String,Array],default:""}},emits:["columns-change"],setup(v,{emit:y}){const C=y,{prefixCls:A}=useDesign("basic-table-header");function We(Ge){C("columns-change",Ge)}return(Ge,Xe)=>(openBlock(),createElementBlock("div",_hoisted_1$6,[Ge.$slots.headerTop?(openBlock(),createElementBlock("div",_hoisted_2,[renderSlot(Ge.$slots,"headerTop")])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3,[Ge.$slots.tableTitle?renderSlot(Ge.$slots,"tableTitle",{key:0}):createCommentVNode("",!0),!Ge.$slots.tableTitle&&v.title?(openBlock(),createBlock(_sfc_main$d,{key:1,helpMessage:v.titleHelpMessage,title:v.title},null,8,["helpMessage","title"])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(`${unref(A)}__toolbar`)},[renderSlot(Ge.$slots,"toolbar"),Ge.$slots.toolbar&&v.showTableSetting?(openBlock(),createBlock(unref(Divider),{key:0,type:"vertical"})):createCommentVNode("",!0),v.showTableSetting?(openBlock(),createBlock(_sfc_main$e,{key:1,setting:v.tableSetting,onColumnsChange:We},null,8,["setting"])):createCommentVNode("",!0)],2)])]))}}),TableHeader_vue_vue_type_style_index_0_lang="";function useTableHeader(v,y,C){return{getHeaderProps:computed(()=>{const{title:We,showTableSetting:Ge,titleHelpMessage:Xe,tableSetting:Ve}=unref(v),P=!y.tableTitle&&!We&&!y.toolbar&&!Ge;return P&&!isString(We)?{}:{title:P?null:()=>h(_sfc_main$c,{title:We,titleHelpMessage:Xe,showTableSetting:Ge,tableSetting:Ve,onColumnsChange:C.onColumnsChange},ua(ua(ua({},y.toolbar?{toolbar:()=>getSlot(y,"toolbar")}:{}),y.tableTitle?{tableTitle:()=>getSlot(y,"tableTitle")}:{}),y.headerTop?{headerTop:()=>getSlot(y,"headerTop")}:{}))}})}}function useTableExpand(v,y,C){const A=ref([]),We=computed(()=>unref(v).autoCreateKey&&!unref(v).rowKey),Ge=computed(()=>{const{rowKey:x}=unref(v);return unref(We)?ROW_KEY:x}),Xe=computed(()=>{const{isTreeTable:x}=unref(v);return x?{expandedRowKeys:unref(A),onExpandedRowsChange:qe=>{A.value=qe,C("expanded-rows-change",qe)}}:{}});function Ve(){const x=Te();A.value=x}function P(x){const{isTreeTable:qe}=unref(v);qe&&(A.value=[...A.value,...x])}function Te(x){const qe=[],{childrenColumnName:Be}=unref(v);return toRaw(x||unref(y)).forEach(De=>{qe.push(De[unref(Ge)]);const He=De[Be||"children"];He!=null&&He.length&&qe.push(...Te(He))}),qe}function j(){A.value=[]}return{getExpandOption:Xe,expandAll:Ve,expandRows:P,collapseAll:j}}const SUMMARY_ROW_KEY="_row",SUMMARY_INDEX_KEY="_index",_sfc_main$b=defineComponent({name:"BasicTableFooter",__name:"TableFooter",props:{summaryFunc:{type:Function},summaryData:{type:Array},scroll:{type:Object},rowKey:propTypes.string.def("key")},setup(v){const y=v,C=useTableContext(),A=computed(()=>{const{summaryFunc:Ge,summaryData:Xe}=y;if(Xe!=null&&Xe.length)return Xe.forEach((P,Te)=>P[y.rowKey]=`${Te}`),Xe;if(!isFunction$1(Ge))return[];let Ve=toRaw(unref(C.getDataSource()));return Ve=Ge(Ve),Ve.forEach((P,Te)=>{P[y.rowKey]=`${Te}`}),Ve}),We=computed(()=>{const Ge=unref(A),Xe=cloneDeep(C.getColumns()),Ve=Xe.findIndex(j=>j.flag===INDEX_COLUMN_FLAG),P=Ge.some(j=>Reflect.has(j,SUMMARY_ROW_KEY)),Te=Ge.some(j=>Reflect.has(j,SUMMARY_INDEX_KEY));if(Ve!==-1&&(Te?(Xe[Ve].customRender=({record:j})=>j[SUMMARY_INDEX_KEY],Xe[Ve].ellipsis=!1):Reflect.deleteProperty(Xe[Ve],"customRender")),C.getRowSelection()&&P){const j=Xe.some(x=>x.fixed==="left");Xe.unshift(Mu(ua({width:60,title:"selection",key:"selectionKey",align:"center"},j?{fixed:"left"}:{}),{customRender:({record:x})=>x[SUMMARY_ROW_KEY]}))}return Xe});return(Ge,Xe)=>v.summaryFunc||v.summaryData?(openBlock(),createBlock(unref(Table),{key:0,showHeader:!1,bordered:!1,pagination:!1,dataSource:A.value,rowKey:Ve=>Ve[v.rowKey],columns:We.value,tableLayout:"fixed",scroll:v.scroll},null,8,["dataSource","rowKey","columns","scroll"])):createCommentVNode("",!0)}});function useTableFooter(v,y,C,A){const We=computed(()=>(unref(A)||[]).length===0),Ge=computed(()=>{const{summaryFunc:Ve,showSummary:P,summaryData:Te}=unref(v);return P&&!unref(We)?()=>h(_sfc_main$b,{summaryFunc:Ve,summaryData:Te,scroll:unref(y)}):void 0});watchEffect(()=>{Xe()});function Xe(){const{showSummary:Ve}=unref(v);!Ve||unref(We)||nextTick(()=>{const P=unref(C);if(!P)return;const Te=P.$el.querySelector(".ant-table-content");useEventListener({el:Te,name:"scroll",listener:()=>{const j=P.$el.querySelector(".ant-table-footer .ant-table-content");!j||!Te||(j.scrollLeft=Te.scrollLeft)},wait:0,options:!0})})}return{getFooterProps:Ge}}function useTableForm(v,y,C,A){const We=computed(()=>{const{formConfig:P}=unref(v),{submitButtonOptions:Te}=P||{};return Mu(ua({showAdvancedButton:!0},P),{submitButtonOptions:ua({loading:unref(A)},Te),compact:!0})}),Ge=computed(()=>Object.keys(y).map(Te=>Te.startsWith("form-")?Te:null).filter(Te=>!!Te));function Xe(P){var Te,j;return P&&(j=(Te=P==null?void 0:P.replace)==null?void 0:Te.call(P,/form-/,""))!=null?j:""}function Ve(P){const{handleSearchInfoFn:Te}=unref(v);Te&&isFunction$1(Te)&&(P=Te(P)||P),C({searchInfo:P,page:1})}return{getFormProps:We,replaceFormSlotKey:Xe,getFormSlotKeys:Ge,handleSearchInfoChange:Ve}}const basicProps={clickToRowSelect:{type:Boolean,default:!0},isTreeTable:Boolean,tableSetting:propTypes.shape({}),inset:Boolean,sortFn:{type:Function,default:DEFAULT_SORT_FN},filterFn:{type:Function,default:DEFAULT_FILTER_FN},showTableSetting:Boolean,autoCreateKey:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},showSummary:Boolean,summaryFunc:{type:[Function,Array],default:null},summaryData:{type:Array,default:null},indentSize:propTypes.number.def(24),canColDrag:{type:Boolean,default:!0},api:{type:Function,default:null},beforeFetch:{type:Function,default:null},afterFetch:{type:Function,default:null},handleSearchInfoFn:{type:Function,default:null},fetchSetting:{type:Object,default:()=>FETCH_SETTING},immediate:{type:Boolean,default:!0},emptyDataIsShowTable:{type:Boolean,default:!0},searchInfo:{type:Object,default:null},defSort:{type:Object,default:null},useSearchForm:propTypes.bool,formConfig:{type:Object,default:null},columns:{type:Array,default:()=>[]},showIndexColumn:{type:Boolean,default:!1},indexColumnProps:{type:Object,default:null},actionColumn:{type:Object,default:null},ellipsis:{type:Boolean,default:!0},isCanResizeParent:{type:Boolean,default:!1},canResize:{type:Boolean,default:!0},clearSelectOnPageChange:propTypes.bool,resizeHeightOffset:propTypes.number.def(0),rowSelection:{type:Object,default:null},title:{type:[String,Function],default:null},titleHelpMessage:{type:[String,Array]},maxHeight:propTypes.number,dataSource:{type:Array,default:null},rowKey:{type:[String,Function],default:""},bordered:propTypes.bool,pagination:{type:[Object,Boolean],default:null},loading:propTypes.bool,rowClassName:{type:Function},scroll:{type:Object,default:null},beforeEditSubmit:{type:Function},size:{type:String,default:DEFAULT_SIZE}},_sfc_main$a=defineComponent({name:"BasicTable",__name:"BasicTable",props:basicProps,emits:["fetch-success","fetch-error","selection-change","register","row-click","row-dbClick","row-contextmenu","row-mouseenter","row-mouseleave","edit-end","edit-cancel","edit-row-end","edit-change","expanded-rows-change","change","columns-change"],setup(v,{expose:y,emit:C}){const A=v,We=C,Ge=useAttrs$1(),Xe=useSlots(),Ve=ref(null),P=ref([]),Te=ref(null),j=ref(null),x=ref(),{prefixCls:qe}=useDesign("basic-table"),[Be,De]=useForm(),He=computed(()=>ua(ua({},A),unref(x))),Ye=inject(PageWrapperFixedHeightKey,!1);watchEffect(()=>{unref(Ye)&&A.canResize&&warn()});const{getLoading:st,setLoading:rt}=useLoading(He),{getPaginationInfo:Ke,getPagination:tt,setPagination:at,setShowPagination:et,getShowPagination:Ot}=usePagination(He),{getRowSelection:wt,getRowSelectionRef:xt,getSelectRows:it,setSelectedRows:yt,clearSelectedRowKeys:ut,getSelectRowKeys:Et,deleteSelectRowByKey:Ht,setSelectedRowKeys:an}=useRowSelection(He,P,We),{handleTableChange:Mt,getDataSourceRef:vn,getDataSource:Wn,getRawDataSource:$e,setTableData:Dt,updateTableDataRecord:vt,deleteTableDataRecord:nn,insertTableDataRecord:_t,findTableDataRecord:Nt,fetch:ln,getRowKey:on,reload:dt,getAutoCreateKey:ur,updateTableData:dn}=useDataSource(He,{tableData:P,getPaginationInfo:Ke,setLoading:rt,setPagination:at,getFieldsValue:De.getFieldsValue,clearSelectedRowKeys:ut},We);function en(Ar,sn,Un,jn){Mt(Ar,sn,Un),We("change",Ar,sn,Un);const{onChange:pr}=unref(He);pr&&isFunction$1(pr)&&pr(Ar,sn,Un,jn)}const{getViewColumns:Nn,getColumns:fn,setCacheColumnsByField:cn,setCacheColumns:hn,setColumnWidth:er,setColumns:Fn,getColumnsRef:Gn,getCacheColumns:va}=useColumns(He,Ke),{getScrollRef:tn,redoHeight:Mn}=useTableScroll(He,Ve,Gn,xt,vn,Te,j),{scrollTo:Rr}=useTableScrollTo(Ve,vn),{customRow:Yr}=useCustomRow(He,{setSelectedRowKeys:an,getSelectRowKeys:Et,clearSelectedRowKeys:ut,getAutoCreateKey:ur,emit:We}),{getRowClassName:oa}=useTableStyle(He,qe),{getExpandOption:pa,expandAll:Ga,expandRows:fo,collapseAll:oo}=useTableExpand(He,P,We),fr={onColumnsChange:Ar=>{var sn,Un;We("columns-change",Ar),(Un=(sn=unref(He)).onColumnsChange)==null||Un.call(sn,Ar)}},{getHeaderProps:sr}=useTableHeader(He,Xe,fr),{getFooterProps:mr}=useTableFooter(He,tn,Ve,vn),{getFormProps:Tn,replaceFormSlotKey:Rn,getFormSlotKeys:dr,handleSearchInfoChange:Pr}=useTableForm(He,Xe,ln,st),br=computed(()=>{const Ar=unref(vn);let sn=ua(Mu(ua(ua(Mu(ua({},Ge),{customRow:Yr}),unref(He)),unref(sr)),{scroll:unref(tn),loading:unref(st),tableLayout:"fixed",rowSelection:unref(xt),rowKey:unref(on),columns:toRaw(unref(Nn)),pagination:toRaw(unref(Ke)),dataSource:Ar,footer:unref(mr)}),unref(pa));return sn=omit(sn,["class","onChange"]),sn}),Cn=computed(()=>{const Ar=unref(br);return[qe,Ge.class,{[`${qe}-form-container`]:Ar.useSearchForm,[`${qe}--inset`]:Ar.inset}]}),cr=computed(()=>{const{emptyDataIsShowTable:Ar,useSearchForm:sn}=unref(He);return Ar||!sn?!0:!!unref(vn).length});function zr(Ar){x.value=ua(ua({},unref(x)),Ar)}const Nr={reload:dt,getSelectRows:it,setSelectedRows:yt,clearSelectedRowKeys:ut,getSelectRowKeys:Et,deleteSelectRowByKey:Ht,setPagination:at,setTableData:Dt,updateTableDataRecord:vt,deleteTableDataRecord:nn,insertTableDataRecord:_t,findTableDataRecord:Nt,redoHeight:Mn,setSelectedRowKeys:an,setColumns:Fn,setLoading:rt,getDataSource:Wn,getRawDataSource:$e,setProps:zr,getRowSelection:wt,getPaginationRef:tt,getColumns:fn,getCacheColumns:va,emit:We,updateTableData:dn,setShowPagination:et,getShowPagination:Ot,setCacheColumnsByField:cn,expandAll:Ga,expandRows:fo,collapseAll:oo,scrollTo:Rr,getSize:()=>unref(br).size,setCacheColumns:hn};return createTableContext(Mu(ua({},Nr),{wrapRef:Te,getBindValues:br})),We("register",Nr,De),y(ua({tableElRef:Ve},Nr)),(Ar,sn)=>(openBlock(),createElementBlock("div",{ref_key:"wrapRef",ref:Te,class:normalizeClass(Cn.value)},[br.value.useSearchForm?(openBlock(),createBlock(unref(_sfc_main$m),mergeProps({key:0,ref_key:"formRef",ref:j,submitOnReset:""},unref(Tn),{tableAction:Nr,onRegister:unref(Be),onSubmit:unref(Pr),onAdvancedChange:unref(Mn)}),createSlots({_:2},[renderList(unref(dr),Un=>({name:unref(Rn)(Un),fn:withCtx(jn=>[renderSlot(Ar.$slots,Un,normalizeProps(guardReactiveProps(jn||{})))])}))]),1040,["onRegister","onSubmit","onAdvancedChange"])):createCommentVNode("",!0),createVNode(unref(Divider),{style:{margin:"0"}}),withDirectives(createVNode(unref(Table),mergeProps({ref_key:"tableElRef",ref:Ve},br.value,{rowClassName:unref(oa),onChange:en,onResizeColumn:unref(er)}),createSlots({headerCell:withCtx(({column:Un})=>[renderSlot(Ar.$slots,"headerCell",normalizeProps(guardReactiveProps({column:Un})),()=>[createVNode(_sfc_main$k,{column:Un},null,8,["column"])])]),bodyCell:withCtx(Un=>[renderSlot(Ar.$slots,"bodyCell",normalizeProps(guardReactiveProps(Un||{})))]),_:2},[renderList(Object.keys(Ar.$slots),Un=>({name:Un,fn:withCtx(jn=>[renderSlot(Ar.$slots,Un,normalizeProps(guardReactiveProps(jn||{})))])}))]),1040,["rowClassName","onResizeColumn"]),[[vShow,cr.value]])],2))}}),BasicTable_vue_vue_type_style_index_0_lang="",_hoisted_1$5={class:"img-div"};propTypes.arrayOf(propTypes.string),propTypes.number.def(40),propTypes.bool,propTypes.bool.def(!0),propTypes.number.def(4),propTypes.string.def(""),propTypes.string.def("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==");const TableImg_vue_vue_type_style_index_0_lang="";function useTable(v){const y=ref(null),C=ref(!1),A=ref(null);let We;function Ge(P,Te){onUnmounted(()=>{y.value=null,C.value=null}),!(unref(C)&&isProdMode()&&P===unref(y))&&(y.value=P,A.value=Te,v&&P.setProps(getDynamicProps(v)),C.value=!0,We==null||We(),We=watch(()=>v,()=>{v&&P.setProps(getDynamicProps(v)),P.reload()},{immediate:!0,deep:!0}))}function Xe(){const P=unref(y);return P||error("The table instance has not been obtained yet, please make sure the table is presented when performing the table operation!"),P}return[Ge,{reload:P=>no(this,null,function*(){return yield Xe().reload(P)}),setProps:P=>{Xe().setProps(P)},redoHeight:()=>{Xe().redoHeight()},setSelectedRows:P=>toRaw(Xe().setSelectedRows(P)),setLoading:P=>{Xe().setLoading(P)},getDataSource:()=>Xe().getDataSource(),getRawDataSource:()=>Xe().getRawDataSource(),getColumns:({ignoreIndex:P=!1}={})=>{const Te=Xe().getColumns({ignoreIndex:P})||[];return toRaw(Te)},setColumns:P=>{Xe().setColumns(P)},setTableData:P=>Xe().setTableData(P),setPagination:P=>Xe().setPagination(P),deleteSelectRowByKey:P=>{Xe().deleteSelectRowByKey(P)},getSelectRowKeys:()=>toRaw(Xe().getSelectRowKeys()),getSelectRows:()=>toRaw(Xe().getSelectRows()),clearSelectedRowKeys:()=>{Xe().clearSelectedRowKeys()},setSelectedRowKeys:P=>{Xe().setSelectedRowKeys(P)},getPaginationRef:()=>Xe().getPaginationRef(),getSize:()=>toRaw(Xe().getSize()),updateTableData:(P,Te,j)=>Xe().updateTableData(P,Te,j),deleteTableDataRecord:P=>Xe().deleteTableDataRecord(P),insertTableDataRecord:(P,Te)=>Xe().insertTableDataRecord(P,Te),updateTableDataRecord:(P,Te)=>Xe().updateTableDataRecord(P,Te),findTableDataRecord:P=>Xe().findTableDataRecord(P),getRowSelection:()=>toRaw(Xe().getRowSelection()),getCacheColumns:()=>toRaw(Xe().getCacheColumns()),getForm:()=>unref(A),setShowPagination:P=>no(this,null,function*(){Xe().setShowPagination(P)}),getShowPagination:()=>toRaw(Xe().getShowPagination()),expandAll:()=>{Xe().expandAll()},expandRows:P=>{Xe().expandRows(P)},collapseAll:()=>{Xe().collapseAll()},scrollTo:P=>{Xe().scrollTo(P)}}]}const _sfc_main$9=defineComponent({__name:"AnnoSearchTable",props:{tableConfig:{},data:{}},emits:["addSearch","deleteRows"],setup(v,{expose:y,emit:C}){const A=v,[We,{reload:Ge,setProps:Xe,getSelectRowKeys:Ve,clearSelectedRowKeys:P}]=useTable(null);return watch(()=>A.tableConfig.tableKey,()=>{A.tableConfig.tableKey&&nextTick(()=>{Xe(toRaw(A.tableConfig)),Ge()})},{immediate:!0}),watch(()=>A.tableConfig.searchInfo,()=>{nextTick(()=>{Ge(),P()})}),y({reload:Ge,getSelectRowKeys:Ve,clearSelectedRowKeys:P,setProps:Xe}),(Te,j)=>(openBlock(),createBlock(unref(_sfc_main$a),{onRegister:unref(We),style:{"box-sizing":"border-box"}},null,8,["onRegister"]))}}),_hoisted_1$4={class:"w-full justify-center flex"},_sfc_main$8=defineComponent({__name:"AnnoSearch",props:{annoClassName:{}},setup(v,{expose:y}){const C=v;watch(()=>C.annoClassName,x=>{x&&We(x)},{immediate:!0});const A=reactive({});function We(x){getEntity(x).then(qe=>{Object.assign(A,qe),nextTick(()=>{Ve(qe)})})}const Ge=reactive({}),Xe=ref(null);function Ve(x){P(x)}const P=x=>{const qe=getTableData(x.entityName,x.treeParentKey,x.treeKey,x.treeDisplayAsTree),Be=getAnnoSearchForm(x.fields);Object.assign(Ge,{tableKey:C.annoClassName,pagination:{pageSize:20},api:qe,size:"small",rowSelection:{type:"radio"},clickToRowSelect:!0,scroll:{x:!0,y:250},isTreeTable:x.treeDisplayAsTree,rowKey:De=>De,columns:getColumns(x.fields),formConfig:{rowProps:{gutter:16,justify:"start"},labelWidth:100,showAdvancedButton:!1,labelAlign:"left",autoAdvancedLine:50,schemas:Be,autoSubmitOnEnter:!0},useSearchForm:Be.length>0,showTableSetting:!0,bordered:!0,handleSearchInfoFn(De){return De}})};return y({getAddRows:()=>{const x=Xe.value.getSelectRowKeys();if(!(x.length<1))return x},clearSelectedRowKeys:()=>{Xe.value.clearSelectedRowKeys()}}),(x,qe)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$4,[createVNode(_sfc_main$9,{tableConfig:unref(Ge),ref_key:"SearchTable",ref:Xe},null,8,["tableConfig"])])]))}}),_sfc_main$7=defineComponent({__name:"AnnoSearchModal",emits:["success","register"],setup(v,{emit:y}){const C=y,A=ref(!1),We=ref(null),[Ge,{setModalProps:Xe,closeModal:Ve}]=useModalInner(j=>no(this,null,function*(){const{annoClassName:x}=j;A.value=toRaw(x),Xe({confirmLoading:!1,title:"选择",width:920,height:600,okText:"确认",showOkBtn:!0,cancelText:"取消"})}));function P(){We.value.clearSelectedRowKeys()}function Te(){return no(this,null,function*(){try{const j=We.value.getAddRows();We.value.clearSelectedRowKeys(),C("success",j),Xe({confirmLoading:!0}),Ve()}finally{Xe({confirmLoading:!1})}})}return(j,x)=>(openBlock(),createBlock(unref(BasicModal),mergeProps(j.$attrs,{onRegister:unref(Ge),title:"选择",onOk:Te,onCancel:P}),{default:withCtx(()=>[createVNode(_sfc_main$8,{ref_key:"AnnoSearchRef",ref:We,"anno-class-name":unref(A)},null,8,["anno-class-name"])]),_:1},16,["onRegister"]))}}),_sfc_main$6=defineComponent({inheritAttrs:!1,__name:"index",props:{value:{default:""},displayValue:{default:""},labelKey:{},valueKey:{},annoClass:{default:"AnUser"},width:{default:"100%"}},emits:["change","update:value"],setup(v,{emit:y}){const[C,{openModal:A}]=useModal(),We=ref(!0),Ge=x=>{x.length>0&&(Te.value=x[0][Ve.valueKey],j.value=x[0][Ve.labelKey],We.value=!1)};function Xe(){A(!0,{props:Ve,annoClassName:Ve.annoClass,isAdd:!1})}const Ve=v,P=y,Te=ref(""),j=ref("");return watchEffect(()=>{Te.value=Ve.value}),watch(()=>Te.value,x=>{x?We.value&&transOne({annoClazz:Ve.annoClass,idKey:Ve.valueKey,idValue:x,labelKey:Ve.labelKey}).then(qe=>{j.value=String(qe)}):j.value="",We.value=!0,P("update:value",x),P("change",x)}),(x,qe)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(unref(Input),{readonly:"",style:normalizeStyle({width:x.width}),placeholder:"请选择",value:j.value,"onUpdate:value":qe[0]||(qe[0]=Be=>j.value=Be),onClick:Xe},null,8,["style","value"]),createVNode(unref(Input),{style:normalizeStyle([{display:"none"},{width:x.width}]),placeholder:"请选择",value:Te.value,"onUpdate:value":qe[1]||(qe[1]=Be=>Te.value=Be),onClick:Xe},null,8,["style","value"]),createVNode(_sfc_main$7,{onRegister:unref(C),onSuccess:Ge},null,8,["onRegister"])],64))}});var tinymce$2={exports:{}};(function(v){(function(){var y=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var r=typeof e;return r==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":r==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":r},C=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},A=function(e,r){var o=Array.prototype.slice.call(e);return o.sort(r)},We=function(e,r){return Ge(function(o,u){return e.eq(r(o),r(u))})},Ge=function(e){return{eq:e}},Xe=Ge(function(e,r){return e===r}),Ve=Xe,P=function(e){return Ge(function(r,o){if(r.length!==o.length)return!1;for(var u=r.length,l=0;l<u;l++)if(!e.eq(r[l],o[l]))return!1;return!0})},Te=function(e,r){return We(P(e),function(o){return A(o,r)})},j=function(e){return Ge(function(r,o){var u=Object.keys(r),l=Object.keys(o);if(!Te(Ve).eq(u,l))return!1;for(var c=u.length,m=0;m<c;m++){var S=u[m];if(!e.eq(r[S],o[S]))return!1}return!0})},x=Ge(function(e,r){if(e===r)return!0;var o=y(e),u=y(r);return o!==u?!1:C(o)?e===r:o==="array"?P(x).eq(e,r):o==="object"?j(x).eq(e,r):!1}),qe=function(e){var r=typeof e;return e===null?"null":r==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":r==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":r},Be=function(e){return function(r){return qe(r)===e}},De=function(e){return function(r){return typeof r===e}},He=function(e){return function(r){return e===r}},Ye=Be("string"),st=Be("object"),rt=Be("array"),Ke=He(null),tt=De("boolean"),at=He(void 0),et=function(e){return e==null},Ot=function(e){return!et(e)},wt=De("function"),xt=De("number"),it=function(){},yt=function(e,r){return function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return e(r.apply(null,o))}},ut=function(e,r){return function(o){return e(r(o))}},Et=function(e){return function(){return e}},Ht=function(e){return e},an=function(e,r){return e===r};function Mt(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=r.concat(u);return e.apply(null,c)}}var vn=function(e){return function(r){return!e(r)}},Wn=function(e){return function(){throw new Error(e)}},$e=function(e){return e()},Dt=function(e){e()},vt=Et(!1),nn=Et(!0),_t=function(){return Nt},Nt=function(){var e=function(u){return u()},r=Ht,o={fold:function(u,l){return u()},isSome:vt,isNone:nn,getOr:r,getOrThunk:e,getOrDie:function(u){throw new Error(u||"error: getOrDie called on none.")},getOrNull:Et(null),getOrUndefined:Et(void 0),or:r,orThunk:e,map:_t,each:it,bind:_t,exists:vt,forall:nn,filter:function(){return _t()},toArray:function(){return[]},toString:Et("none()")};return o}(),ln=function(e){var r=Et(e),o=function(){return l},u=function(c){return c(e)},l={fold:function(c,m){return m(e)},isSome:nn,isNone:vt,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:o,orThunk:o,map:function(c){return ln(c(e))},each:function(c){c(e)},bind:u,exists:u,forall:u,filter:function(c){return c(e)?l:Nt},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l},on=function(e){return e==null?Nt:ln(e)},dt={some:ln,none:_t,from:on},ur=Array.prototype.slice,dn=Array.prototype.indexOf,en=Array.prototype.push,Nn=function(e,r){return dn.call(e,r)},fn=function(e,r){var o=Nn(e,r);return o===-1?dt.none():dt.some(o)},cn=function(e,r){return Nn(e,r)>-1},hn=function(e,r){for(var o=0,u=e.length;o<u;o++){var l=e[o];if(r(l,o))return!0}return!1},er=function(e,r){for(var o=e.length,u=new Array(o),l=0;l<o;l++){var c=e[l];u[l]=r(c,l)}return u},Fn=function(e,r){for(var o=0,u=e.length;o<u;o++){var l=e[o];r(l,o)}},Gn=function(e,r){for(var o=e.length-1;o>=0;o--){var u=e[o];r(u,o)}},va=function(e,r){for(var o=[],u=[],l=0,c=e.length;l<c;l++){var m=e[l],S=r(m,l)?o:u;S.push(m)}return{pass:o,fail:u}},tn=function(e,r){for(var o=[],u=0,l=e.length;u<l;u++){var c=e[u];r(c,u)&&o.push(c)}return o},Mn=function(e,r,o){return Gn(e,function(u,l){o=r(o,u,l)}),o},Rr=function(e,r,o){return Fn(e,function(u,l){o=r(o,u,l)}),o},Yr=function(e,r,o){for(var u=0,l=e.length;u<l;u++){var c=e[u];if(r(c,u))return dt.some(c);if(o(c,u))break}return dt.none()},oa=function(e,r){return Yr(e,r,vt)},pa=function(e,r){for(var o=0,u=e.length;o<u;o++){var l=e[o];if(r(l,o))return dt.some(o)}return dt.none()},Ga=function(e){for(var r=[],o=0,u=e.length;o<u;++o){if(!rt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);en.apply(r,e[o])}return r},fo=function(e,r){return Ga(er(e,r))},oo=function(e,r){for(var o=0,u=e.length;o<u;++o){var l=e[o];if(r(l,o)!==!0)return!1}return!0},fr=function(e){var r=ur.call(e,0);return r.reverse(),r},sr=function(e,r){return tn(e,function(o){return!cn(r,o)})},mr=function(e,r){for(var o={},u=0,l=e.length;u<l;u++){var c=e[u];o[String(c)]=r(c,u)}return o},Tn=function(e,r){var o=ur.call(e,0);return o.sort(r),o},Rn=function(e,r){return r>=0&&r<e.length?dt.some(e[r]):dt.none()},dr=function(e){return Rn(e,0)},Pr=function(e){return Rn(e,e.length-1)},br=wt(Array.from)?Array.from:function(e){return ur.call(e)},Cn=function(e,r){for(var o=0;o<e.length;o++){var u=r(e[o],o);if(u.isSome())return u}return dt.none()},cr=Object.keys,zr=Object.hasOwnProperty,Nr=function(e,r){for(var o=cr(e),u=0,l=o.length;u<l;u++){var c=o[u],m=e[c];r(m,c)}},Ar=function(e,r){return sn(e,function(o,u){return{k:u,v:r(o,u)}})},sn=function(e,r){var o={};return Nr(e,function(u,l){var c=r(u,l);o[c.k]=c.v}),o},Un=function(e){return function(r,o){e[o]=r}},jn=function(e,r,o,u){var l={};return Nr(e,function(c,m){(r(c,m)?o:u)(c,m)}),l},pr=function(e,r){var o={},u={};return jn(e,r,Un(o),Un(u)),{t:o,f:u}},aa=function(e,r){var o={};return jn(e,r,Un(o),it),o},Ua=function(e,r){var o=[];return Nr(e,function(u,l){o.push(r(u,l))}),o},jo=function(e){return Ua(e,Ht)},Xa=function(e,r){return Ka(e,r)?dt.from(e[r]):dt.none()},Ka=function(e,r){return zr.call(e,r)},Yo=function(e,r){return Ka(e,r)&&e[r]!==void 0&&e[r]!==null},Io=function(e,r,o){return o===void 0&&(o=x),j(o).eq(e,r)},pi=Array.isArray,oi=function(e){if(pi(e))return e;for(var r=[],o=0,u=e.length;o<u;o++)r[o]=e[o];return r},Si=function(e,r,o){var u,l;if(!e)return!1;if(o=o||e,e.length!==void 0){for(u=0,l=e.length;u<l;u++)if(r.call(o,e[u],u,e)===!1)return!1}else for(u in e)if(Ka(e,u)&&r.call(o,e[u],u,e)===!1)return!1;return!0},Ii=function(e,r){var o=[];return Si(e,function(u,l){o.push(r(u,l,e))}),o},xi=function(e,r){var o=[];return Si(e,function(u,l){(!r||r(u,l,e))&&o.push(u)}),o},Ei=function(e,r){if(e){for(var o=0,u=e.length;o<u;o++)if(e[o]===r)return o}return-1},Fo=function(e,r,o,u){for(var l=at(o)?e[0]:o,c=0;c<e.length;c++)l=r.call(u,l,e[c],c);return l},wo=function(e,r,o){var u,l;for(u=0,l=e.length;u<l;u++)if(r.call(o,e[u],u,e))return u;return-1},ji=function(e){return e[e.length-1]},Ca=function(){return Ca=Object.assign||function(r){for(var o,u=1,l=arguments.length;u<l;u++){o=arguments[u];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])}return r},Ca.apply(this,arguments)};function Hu(e,r){var o={};for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&r.indexOf(u)<0&&(o[u]=e[u]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,u=Object.getOwnPropertySymbols(e);l<u.length;l++)r.indexOf(u[l])<0&&Object.prototype.propertyIsEnumerable.call(e,u[l])&&(o[u[l]]=e[u[l]]);return o}function Fi(e,r,o){if(o||arguments.length===2)for(var u=0,l=r.length,c;u<l;u++)(c||!(u in r))&&(c||(c=Array.prototype.slice.call(r,0,u)),c[u]=r[u]);return e.concat(c||Array.prototype.slice.call(r))}var lu=function(e){var r=!1,o;return function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return r||(r=!0,o=e.apply(null,u)),o}},Xu=function(e,r,o,u){var l=e.isiOS()&&/ipad/i.test(o)===!0,c=e.isiOS()&&!l,m=e.isiOS()||e.isAndroid(),S=m||u("(pointer:coarse)"),_=l||!c&&m&&u("(min-device-width:768px)"),nt=c||m&&!_,pt=r.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,bt=!nt&&!_&&!pt;return{isiPad:Et(l),isiPhone:Et(c),isTablet:Et(_),isPhone:Et(nt),isTouch:Et(S),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Et(pt),isDesktop:Et(bt)}},nu=function(e,r){for(var o=0;o<e.length;o++){var u=e[o];if(u.test(r))return u}},hu=function(e,r){var o=nu(e,r);if(!o)return{major:0,minor:0};var u=function(l){return Number(r.replace(o,"$"+l))};return qt(u(1),u(2))},Yu=function(e,r){var o=String(r).toLowerCase();return e.length===0?Ss():hu(e,o)},Ss=function(){return qt(0,0)},qt=function(e,r){return{major:e,minor:r}},xn={nu:qt,detect:Yu,unknown:Ss},Gt=function(e,r){return Cn(r.brands,function(o){var u=o.brand.toLowerCase();return oa(e,function(l){var c;return u===((c=l.brand)===null||c===void 0?void 0:c.toLowerCase())}).map(function(l){return{current:l.name,version:xn.nu(parseInt(o.version,10),0)}})})},Pn=function(e,r){var o=String(r).toLowerCase();return oa(e,function(u){return u.search(o)})},Br=function(e,r){return Pn(e,r).map(function(o){var u=xn.detect(o.versionRegexes,r);return{current:o.name,version:u}})},ta=function(e,r){return Pn(e,r).map(function(o){var u=xn.detect(o.versionRegexes,r);return{current:o.name,version:u}})},$t=function(e,r){return e.substring(r)},Zt=function(e,r,o){return r===""||e.length>=r.length&&e.substr(o,o+r.length)===r},In=function(e,r){return mt(e,r)?$t(e,r.length):e},Qn=function(e,r){return e.indexOf(r)!==-1},mt=function(e,r){return Zt(e,r,0)},Rt=function(e){return function(r){return r.replace(e,"")}},Jt=Rt(/^\s+|\s+$/g),gn=Rt(/^\s+/g),Dn=Rt(/\s+$/g),Bn=function(e){return e.length>0},rr=function(e){return!Bn(e)},Qr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,La=function(e){return function(r){return Qn(r,e)}},Fa=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Qn(e,"edge/")&&Qn(e,"chrome")&&Qn(e,"safari")&&Qn(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Qr],search:function(e){return Qn(e,"chrome")&&!Qn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Qn(e,"msie")||Qn(e,"trident")}},{name:"Opera",versionRegexes:[Qr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:La("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:La("firefox")},{name:"Safari",versionRegexes:[Qr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Qn(e,"safari")||Qn(e,"mobile/"))&&Qn(e,"applewebkit")}}],Ha=[{name:"Windows",search:La("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Qn(e,"iphone")||Qn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:La("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:La("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:La("linux"),versionRegexes:[]},{name:"Solaris",search:La("sunos"),versionRegexes:[]},{name:"FreeBSD",search:La("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:La("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ya={browsers:Et(Fa),oses:Et(Ha)},Lo="Edge",ki="Chrome",Du="IE",is="Opera",Qu="Firefox",Ai="Safari",dl=function(){return Ls({current:void 0,version:xn.unknown()})},Ls=function(e){var r=e.current,o=e.version,u=function(l){return function(){return r===l}};return{current:r,version:o,isEdge:u(Lo),isChrome:u(ki),isIE:u(Du),isOpera:u(is),isFirefox:u(Qu),isSafari:u(Ai)}},zu={unknown:dl,nu:Ls,edge:Et(Lo),chrome:Et(ki),ie:Et(Du),opera:Et(is),firefox:Et(Qu),safari:Et(Ai)},Wi="Windows",Rs="iOS",xs="Android",Nu="Linux",Bs="OSX",Ju="Solaris",us="FreeBSD",Ql="ChromeOS",vl=function(){return Dl({current:void 0,version:xn.unknown()})},Dl=function(e){var r=e.current,o=e.version,u=function(l){return function(){return r===l}};return{current:r,version:o,isWindows:u(Wi),isiOS:u(Rs),isAndroid:u(xs),isOSX:u(Bs),isLinux:u(Nu),isSolaris:u(Ju),isFreeBSD:u(us),isChromeOS:u(Ql)}},Tt={unknown:vl,nu:Dl,windows:Et(Wi),ios:Et(Rs),android:Et(xs),linux:Et(Nu),osx:Et(Bs),solaris:Et(Ju),freebsd:Et(us),chromeos:Et(Ql)},pn=function(e,r,o){var u=Ya.browsers(),l=Ya.oses(),c=r.bind(function(_){return Gt(u,_)}).orThunk(function(){return Br(u,e)}).fold(zu.unknown,zu.nu),m=ta(l,e).fold(Tt.unknown,Tt.nu),S=Xu(m,c,e,o);return{browser:c,os:m,deviceType:S}},_n={detect:pn},or=function(e){return window.matchMedia(e).matches},Mr=lu(function(){return _n.detect(navigator.userAgent,dt.from(navigator.userAgentData),or)}),Ea=function(){return Mr()},Ro=navigator.userAgent,Qo=Ea(),so=Qo.browser,ri=Qo.os,ci=Qo.deviceType,Ps=/WebKit/.test(Ro)&&!so.isEdge(),bc="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,yc=Ro.indexOf("Windows Phone")!==-1,Ra={opera:so.isOpera(),webkit:Ps,ie:so.isIE()||so.isEdge()?so.version.major:!1,gecko:so.isFirefox(),mac:ri.isOSX()||ri.isiOS(),iOS:ci.isiPad()||ci.isiPhone(),android:ri.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:so.isIE()?document.documentMode||7:10,fileApi:bc,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!so.isIE(),desktop:ci.isDesktop(),windowsPhone:yc,browser:{current:so.current,version:so.version,isChrome:so.isChrome,isEdge:so.isEdge,isFirefox:so.isFirefox,isIE:so.isIE,isOpera:so.isOpera,isSafari:so.isSafari},os:{current:ri.current,version:ri.version,isAndroid:ri.isAndroid,isChromeOS:ri.isChromeOS,isFreeBSD:ri.isFreeBSD,isiOS:ri.isiOS,isLinux:ri.isLinux,isOSX:ri.isOSX,isSolaris:ri.isSolaris,isWindows:ri.isWindows},deviceType:{isDesktop:ci.isDesktop,isiPad:ci.isiPad,isiPhone:ci.isiPhone,isPhone:ci.isPhone,isTablet:ci.isTablet,isTouch:ci.isTouch,isWebView:ci.isWebView}},Zs=/^\s*|\s*$/g,zc=function(e){return e==null?"":(""+e).replace(Zs,"")},Es=function(e,r){return r?r==="array"&&pi(e)?!0:typeof e===r:e!==void 0},$c=function(e,r,o){var u;for(e=e||[],r=r||",",typeof e=="string"&&(e=e.split(r)),o=o||{},u=e.length;u--;)o[e[u]]={};return o},td=Ka,Mf=function(e,r,o){var u=this,l,c,m,S=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);var _=e[3].match(/(^|\.)(\w+)$/i)[2],nt=u.createNS(e[3].replace(/\.\w+$/,""),o);if(!nt[_]){if(e[2]==="static"){nt[_]=r,this.onCreate&&this.onCreate(e[2],e[3],nt[_]);return}r[_]||(r[_]=function(){},S=1),nt[_]=r[_],u.extend(nt[_].prototype,r),e[5]&&(l=u.resolve(e[5]).prototype,c=e[5].match(/\.(\w+)$/i)[1],m=nt[_],S?nt[_]=function(){return l[c].apply(this,arguments)}:nt[_]=function(){return this.parent=l[c],m.apply(this,arguments)},nt[_].prototype[_]=nt[_],u.each(l,function(pt,bt){nt[_].prototype[bt]=l[bt]}),u.each(r,function(pt,bt){l[bt]?nt[_].prototype[bt]=function(){return this.parent=l[bt],pt.apply(this,arguments)}:bt!==_&&(nt[_].prototype[bt]=pt)})),u.each(r.static,function(pt,bt){nt[_][bt]=pt})}},bi=function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];for(var u=0;u<r.length;u++){var l=r[u];for(var c in l)if(Ka(l,c)){var m=l[c];m!==void 0&&(e[c]=m)}}return e},Jl=function(e,r,o,u){u=u||this,e&&(o&&(e=e[o]),Si(e,function(l,c){if(r.call(u,l,c,o)===!1)return!1;Jl(l,r,o,u)}))},nd=function(e,r){var o,u;for(r=r||window,e=e.split("."),o=0;o<e.length;o++)u=e[o],r[u]||(r[u]={}),r=r[u];return r},ss=function(e,r){var o,u;for(r=r||window,e=e.split("."),o=0,u=e.length;o<u&&(r=r[e[o]],!!r);o++);return r},$u=function(e,r){return!e||Es(e,"array")?e:Ii(e.split(r||","),zc)},wc=function(e){var r=Ra.cacheSuffix;return r&&(e+=(e.indexOf("?")===-1?"?":"&")+r),e},Zn={trim:zc,isArray:pi,is:Es,toArray:oi,makeMap:$c,each:Si,map:Ii,grep:xi,inArray:Ei,hasOwn:td,extend:bi,create:Mf,walk:Jl,createNS:nd,resolve:ss,explode:$u,_addCacheSuffix:wc},Zl=function(e,r){var o=r||document,u=o.createElement("div");if(u.innerHTML=e,!u.hasChildNodes()||u.childNodes.length>1)throw new Error("HTML must have a single root node");return ml(u.childNodes[0])},ru=function(e,r){var o=r||document,u=o.createElement(e);return ml(u)},Vc=function(e,r){var o=r||document,u=o.createTextNode(e);return ml(u)},ml=function(e){if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ec=function(e,r,o){return dt.from(e.dom.elementFromPoint(r,o)).map(ml)},lt={fromHtml:Zl,fromTag:ru,fromText:Vc,fromDom:ml,fromPoint:ec},Je=function(e,r){var o=[],u=function(c){return o.push(c),r(c)},l=r(e);do l=l.bind(u);while(l.isSome());return o},ht=function(e,r,o){return(e.compareDocumentPosition(r)&o)!==0},Lt=function(e,r){return ht(e,r,Node.DOCUMENT_POSITION_CONTAINED_BY)},un=8,Hn=9,Er=11,Aa=1,ja=3,Kr=function(e,r){var o=e.dom;if(o.nodeType!==Aa)return!1;var u=o;if(u.matches!==void 0)return u.matches(r);if(u.msMatchesSelector!==void 0)return u.msMatchesSelector(r);if(u.webkitMatchesSelector!==void 0)return u.webkitMatchesSelector(r);if(u.mozMatchesSelector!==void 0)return u.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")},Sa=function(e){return e.nodeType!==Aa&&e.nodeType!==Hn&&e.nodeType!==Er||e.childElementCount===0},ro=function(e,r){var o=r===void 0?document:r.dom;return Sa(o)?[]:er(o.querySelectorAll(e),lt.fromDom)},Co=function(e,r){var o=r===void 0?document:r.dom;return Sa(o)?dt.none():dt.from(o.querySelector(e)).map(lt.fromDom)},Wa=function(e,r){return e.dom===r.dom},fi=function(e,r){var o=e.dom,u=r.dom;return o===u?!1:o.contains(u)},Ja=function(e,r){return Lt(e.dom,r.dom)},ei=function(e,r){return Ea().browser.isIE()?Ja(e,r):fi(e,r)};typeof window!="undefined"||Function("return this;")();var Jo=function(e){var r=e.dom.nodeName;return r.toLowerCase()},Vu=function(e){return e.dom.nodeType},ho=function(e){return function(r){return Vu(r)===e}},Ed=function(e){return Vu(e)===un||Jo(e)==="#comment"},Ti=ho(Aa),qi=ho(ja),Mm=ho(Hn),gu=ho(Er),Av=function(e){return function(r){return Ti(r)&&Jo(r)===e}},kd=function(e){return lt.fromDom(e.dom.ownerDocument)},Qa=function(e){return Mm(e)?e:kd(e)},tc=function(e){return lt.fromDom(Qa(e).dom.documentElement)},Cc=function(e){return lt.fromDom(Qa(e).dom.defaultView)},Hi=function(e){return dt.from(e.dom.parentNode).map(lt.fromDom)},Dm=function(e,r){for(var o=wt(r)?r:vt,u=e.dom,l=[];u.parentNode!==null&&u.parentNode!==void 0;){var c=u.parentNode,m=lt.fromDom(c);if(l.push(m),o(m)===!0)break;u=c}return l},bu=function(e){var r=function(o){return tn(o,function(u){return!Wa(e,u)})};return Hi(e).map(I).map(r).getOr([])},Uc=function(e){return dt.from(e.dom.previousSibling).map(lt.fromDom)},p=function(e){return dt.from(e.dom.nextSibling).map(lt.fromDom)},g=function(e){return fr(Je(e,Uc))},w=function(e){return Je(e,p)},I=function(e){return er(e.dom.childNodes,lt.fromDom)},k=function(e,r){var o=e.dom.childNodes;return dt.from(o[r]).map(lt.fromDom)},Ue=function(e){return k(e,0)},ft=function(e){return k(e,e.dom.childNodes.length-1)},Bt=function(e){return e.dom.childNodes.length},Xt=function(e){var r=e.dom.head;if(r==null)throw new Error("Head is not available yet");return lt.fromDom(r)},Ut=function(e){return gu(e)&&Ot(e.dom.host)},Wt=wt(Element.prototype.attachShadow)&&wt(Node.prototype.getRootNode),tr=Et(Wt),Vr=Wt?function(e){return lt.fromDom(e.dom.getRootNode())}:Qa,ba=function(e){return Ut(e)?e:Xt(Qa(e))},Vn=function(e){var r=Vr(e);return Ut(r)?dt.some(r):dt.none()},ha=function(e){return lt.fromDom(e.dom.host)},na=function(e){if(tr()&&Ot(e.target)){var r=lt.fromDom(e.target);if(Ti(r)&&Gr(r)&&e.composed&&e.composedPath){var o=e.composedPath();if(o)return dr(o)}}return dt.from(e.target)},Gr=function(e){return Ot(e.dom.shadowRoot)},sa=function(e,r){var o=Hi(e);o.each(function(u){u.dom.insertBefore(r.dom,e.dom)})},la=function(e,r){var o=p(e);o.fold(function(){var u=Hi(e);u.each(function(l){xa(l,r)})},function(u){sa(u,r)})},$r=function(e,r){var o=Ue(e);o.fold(function(){xa(e,r)},function(u){e.dom.insertBefore(r.dom,u.dom)})},xa=function(e,r){e.dom.appendChild(r.dom)},vo=function(e,r){sa(e,r),xa(r,e)},io=function(e,r){Fn(r,function(o){sa(e,o)})},lo=function(e,r){Fn(r,function(o){xa(e,o)})},co=function(e){e.dom.textContent="",Fn(I(e),function(r){ca(r)})},ca=function(e){var r=e.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},To=function(e){var r=I(e);r.length>0&&io(e,r),ca(e)},di=function(e){var r=qi(e)?e.dom.parentNode:e.dom;if(r==null||r.ownerDocument===null)return!1;var o=r.ownerDocument;return Vn(lt.fromDom(r)).fold(function(){return o.body.contains(r)},ut(di,ha))},Wo=function(e,r){var o=function(u,l){return Wo(e+u,r+l)};return{left:e,top:r,translate:o}},ls=Wo,ks=function(e){var r=e.getBoundingClientRect();return ls(r.left,r.top)},yu=function(e,r){return e!==void 0?e:r!==void 0?r:0},Ki=function(e){var r=e.dom.ownerDocument,o=r.body,u=r.defaultView,l=r.documentElement;if(o===e.dom)return ls(o.offsetLeft,o.offsetTop);var c=yu(u==null?void 0:u.pageYOffset,l.scrollTop),m=yu(u==null?void 0:u.pageXOffset,l.scrollLeft),S=yu(l.clientTop,o.clientTop),_=yu(l.clientLeft,o.clientLeft);return Uu(e).translate(m-_,c-S)},Uu=function(e){var r=e.dom,o=r.ownerDocument,u=o.body;return u===r?ls(u.offsetLeft,u.offsetTop):di(e)?ks(r):ls(0,0)},Df=function(e){var r=e!==void 0?e.dom:document,o=r.body.scrollLeft||r.documentElement.scrollLeft,u=r.body.scrollTop||r.documentElement.scrollTop;return ls(o,u)},Ji=function(e,r,o){var u=o!==void 0?o.dom:document,l=u.defaultView;l&&l.scrollTo(e,r)},Sc=function(e,r){var o=Ea().browser.isSafari();o&&wt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(r)},el=function(e){var r=e===void 0?window:e;return Ea().browser.isFirefox()?dt.none():dt.from(r.visualViewport)},Nl=function(e,r,o,u){return{x:e,y:r,width:o,height:u,right:e+o,bottom:r+u}},Ll=function(e){var r=e===void 0?window:e,o=r.document,u=Df(lt.fromDom(o));return el(r).fold(function(){var l=r.document.documentElement,c=l.clientWidth,m=l.clientHeight;return Nl(u.left,u.top,c,m)},function(l){return Nl(Math.max(l.pageLeft,u.left),Math.max(l.pageTop,u.top),l.width,l.height)})},jc=function(e){return function(r){return!!r&&r.nodeType===e}},Ta=function(e){return!!e&&!Object.getPrototypeOf(e)},ma=jc(1),Lu=function(e){var r=e.map(function(o){return o.toLowerCase()});return function(o){if(o&&o.nodeName){var u=o.nodeName.toLowerCase();return cn(r,u)}return!1}},tl=function(e,r){var o=r.toLowerCase().split(" ");return function(u){if(ma(u))for(var l=0;l<o.length;l++){var c=u.ownerDocument.defaultView.getComputedStyle(u,null),m=c?c.getPropertyValue(e):null;if(m===o[l])return!0}return!1}},rd=function(e){return function(r){return ma(r)&&r.hasAttribute(e)}},Nf=function(e,r){return function(o){return ma(o)&&o.getAttribute(e)===r}},xc=function(e){return ma(e)&&e.hasAttribute("data-mce-bogus")},Zi=function(e){return ma(e)&&e.getAttribute("data-mce-bogus")==="all"},au=function(e){return ma(e)&&e.tagName==="TABLE"},Rl=function(e){return function(r){return!!(ma(r)&&(r.contentEditable===e||r.getAttribute("data-mce-contenteditable")===e))}},ju=Lu(["textarea","input"]),ia=jc(3),ad=jc(8),bh=jc(9),So=jc(11),ui=Lu(["br"]),yh=Lu(["img"]),Ec=Rl("true"),Mi=Rl("false"),Nm=Lu(["td","th"]),nl=Lu(["video","audio","object","embed"]),Tv=function(e,r,o){return o===void 0&&(o=an),e.exists(function(u){return o(u,r)})},ab=function(e){for(var r=[],o=function(l){r.push(l)},u=0;u<e.length;u++)e[u].each(o);return r},As=function(e,r,o){return e.isSome()&&r.isSome()?dt.some(o(e.getOrDie(),r.getOrDie())):dt.none()},Ny=function(e,r,o,u){return e.isSome()&&r.isSome()&&o.isSome()?dt.some(u(e.getOrDie(),r.getOrDie(),o.getOrDie())):dt.none()},Ly=function(e,r){return e?dt.some(r):dt.none()},Li=function(e){return e.style!==void 0&&wt(e.style.getPropertyValue)},wh=function(e,r,o){if(Ye(o)||tt(o)||xt(o))e.setAttribute(r,o+"");else throw new Error("Attribute value was not simple")},Ze=function(e,r,o){wh(e.dom,r,o)},gt=function(e,r){var o=e.dom;Nr(r,function(u,l){wh(o,l,u)})},kt=function(e,r){var o=e.dom.getAttribute(r);return o===null?void 0:o},Kt=function(e,r){return dt.from(kt(e,r))},An=function(e,r){var o=e.dom;return o&&o.hasAttribute?o.hasAttribute(r):!1},nr=function(e,r){e.dom.removeAttribute(r)},Ma=function(e){return Rr(e.dom.attributes,function(r,o){return r[o.name]=o.value,r},{})},ao=function(e,r,o){if(!Ye(o))throw new Error("CSS value must be a string: "+o);Li(e)&&e.style.setProperty(r,o)},Po=function(e,r){var o=e.dom;Nr(r,function(u,l){ao(o,l,u)})},_o=function(e,r){var o=e.dom,u=window.getComputedStyle(o),l=u.getPropertyValue(r);return l===""&&!di(e)?_i(o,r):l},_i=function(e,r){return Li(e)?e.style.getPropertyValue(r):""},Ts=function(e,r){var o=e.dom,u=_i(o,r);return dt.from(u).filter(function(l){return l.length>0})},ob=function(e){var r={},o=e.dom;if(Li(o))for(var u=0;u<o.style.length;u++){var l=o.style.item(u);r[l]=o.style[l]}return r},WN=function(e){return e.dom.offsetWidth},o2=Ea().browser,i2=function(e){return oa(e,Ti)},qN=function(e){return o2.isFirefox()&&Jo(e)==="table"?i2(I(e)).filter(function(r){return Jo(r)==="caption"}).bind(function(r){return i2(w(r)).map(function(o){var u=o.dom.offsetTop,l=r.dom.offsetTop,c=r.dom.offsetHeight;return u<=l?-c:0})}).getOr(0):0},Ry=function(e,r){return e.children&&cn(e.children,r)},By=function(e,r,o){var u=0,l=0,c=e.ownerDocument;if(o=o||e,r){if(o===e&&r.getBoundingClientRect&&_o(lt.fromDom(e),"position")==="static"){var m=r.getBoundingClientRect();return u=m.left+(c.documentElement.scrollLeft||e.scrollLeft)-c.documentElement.clientLeft,l=m.top+(c.documentElement.scrollTop||e.scrollTop)-c.documentElement.clientTop,{x:u,y:l}}for(var S=r;S&&S!==o&&S.nodeType&&!Ry(S,o);){var _=S;u+=_.offsetLeft||0,l+=_.offsetTop||0,S=_.offsetParent}for(S=r.parentNode;S&&S!==o&&S.nodeType&&!Ry(S,o);)u-=S.scrollLeft||0,l-=S.scrollTop||0,S=S.parentNode;l+=qN(lt.fromDom(r))}return{x:u,y:l}},u2={},Lm={exports:u2};(function(e,r,o,u){(function(l,c){typeof r=="object"&&typeof o!="undefined"?o.exports=c():typeof e=="function"&&e.amd?e(c):(l=typeof globalThis!="undefined"?globalThis:l||self,l.EphoxContactWrapper=c())})(this,function(){var l=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof commonjsGlobal!="undefined"?commonjsGlobal:typeof self!="undefined"?self:{},c={exports:{}};(function(nt){(function(pt){var bt=setTimeout;function Ct(){}function Pt(mn,Ln){return function(){mn.apply(Ln,arguments)}}function Ft(mn){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof mn!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],kn(mn,this)}function zt(mn,Ln){for(;mn._state===3;)mn=mn._value;if(mn._state===0){mn._deferreds.push(Ln);return}mn._handled=!0,Ft._immediateFn(function(){var lr=mn._state===1?Ln.onFulfilled:Ln.onRejected;if(lr===null){(mn._state===1?Vt:rn)(Ln.promise,mn._value);return}var Tr;try{Tr=lr(mn._value)}catch($a){rn(Ln.promise,$a);return}Vt(Ln.promise,Tr)})}function Vt(mn,Ln){try{if(Ln===mn)throw new TypeError("A promise cannot be resolved with itself.");if(Ln&&(typeof Ln=="object"||typeof Ln=="function")){var lr=Ln.then;if(Ln instanceof Ft){mn._state=3,mn._value=Ln,Qt(mn);return}else if(typeof lr=="function"){kn(Pt(lr,Ln),mn);return}}mn._state=1,mn._value=Ln,Qt(mn)}catch(Tr){rn(mn,Tr)}}function rn(mn,Ln){mn._state=2,mn._value=Ln,Qt(mn)}function Qt(mn){mn._state===2&&mn._deferreds.length===0&&Ft._immediateFn(function(){mn._handled||Ft._unhandledRejectionFn(mn._value)});for(var Ln=0,lr=mn._deferreds.length;Ln<lr;Ln++)zt(mn,mn._deferreds[Ln]);mn._deferreds=null}function On(mn,Ln,lr){this.onFulfilled=typeof mn=="function"?mn:null,this.onRejected=typeof Ln=="function"?Ln:null,this.promise=lr}function kn(mn,Ln){var lr=!1;try{mn(function(Tr){lr||(lr=!0,Vt(Ln,Tr))},function(Tr){lr||(lr=!0,rn(Ln,Tr))})}catch(Tr){if(lr)return;lr=!0,rn(Ln,Tr)}}Ft.prototype.catch=function(mn){return this.then(null,mn)},Ft.prototype.then=function(mn,Ln){var lr=new this.constructor(Ct);return zt(this,new On(mn,Ln,lr)),lr},Ft.all=function(mn){var Ln=Array.prototype.slice.call(mn);return new Ft(function(lr,Tr){if(Ln.length===0)return lr([]);var $a=Ln.length;function Zr(_a,Or){try{if(Or&&(typeof Or=="object"||typeof Or=="function")){var Jr=Or.then;if(typeof Jr=="function"){Jr.call(Or,function(Dr){Zr(_a,Dr)},Tr);return}}Ln[_a]=Or,--$a===0&&lr(Ln)}catch(Dr){Tr(Dr)}}for(var vr=0;vr<Ln.length;vr++)Zr(vr,Ln[vr])})},Ft.resolve=function(mn){return mn&&typeof mn=="object"&&mn.constructor===Ft?mn:new Ft(function(Ln){Ln(mn)})},Ft.reject=function(mn){return new Ft(function(Ln,lr){lr(mn)})},Ft.race=function(mn){return new Ft(function(Ln,lr){for(var Tr=0,$a=mn.length;Tr<$a;Tr++)mn[Tr].then(Ln,lr)})},Ft._immediateFn=typeof setImmediate=="function"?function(mn){setImmediate(mn)}:function(mn){bt(mn,0)},Ft._unhandledRejectionFn=function(Ln){},Ft._setImmediateFn=function(Ln){Ft._immediateFn=Ln},Ft._setUnhandledRejectionFn=function(Ln){Ft._unhandledRejectionFn=Ln},nt.exports?nt.exports=Ft:pt.Promise||(pt.Promise=Ft)})(l)})(c);var m=c.exports,S=function(){return typeof window!="undefined"?window:Function("return this;")()}(),_={boltExport:S.Promise||m};return _})})(void 0,u2,Lm);var Py=Lm.exports.boltExport,Iy=function(e){var r=dt.none(),o=[],u=function(nt){return Iy(function(pt){l(function(bt){pt(nt(bt))})})},l=function(nt){m()?_(nt):o.push(nt)},c=function(nt){m()||(r=dt.some(nt),S(o),o=[])},m=function(){return r.isSome()},S=function(nt){Fn(nt,_)},_=function(nt){r.each(function(pt){setTimeout(function(){nt(pt)},0)})};return e(c),{get:l,map:u,isReady:m}},KN=function(e){return Iy(function(r){r(e)})},GN={nu:Iy,pure:KN},XN=function(e){setTimeout(function(){throw e},0)},Wc=function(e){var r=function(_){e().then(_,XN)},o=function(_){return Wc(function(){return e().then(_)})},u=function(_){return Wc(function(){return e().then(function(nt){return _(nt).toPromise()})})},l=function(_){return Wc(function(){return e().then(function(){return _.toPromise()})})},c=function(){return GN.nu(r)},m=function(){var _=null;return Wc(function(){return _===null&&(_=e()),_})},S=e;return{map:o,bind:u,anonBind:l,toLazy:c,toCached:m,toPromise:S,get:r}},s2=function(e){return Wc(function(){return new Py(e)})},YN=function(e){return Wc(function(){return Py.resolve(e)})},Fy={nu:s2,pure:YN},QN=function(e,r){return r(function(o){var u=[],l=0,c=function(m){return function(S){u[m]=S,l++,l>=e.length&&o(u)}};e.length===0?o([]):Fn(e,function(m,S){m.get(c(S))})})},JN=function(e){return QN(e,Fy.nu)},Rm=function(e){var r=function(bt){return Rm(e)},o=function(bt){return Rm(e)},u=function(bt){return Rm(bt(e))},l=function(bt){return Rm(e)},c=function(bt){bt(e)},m=function(bt){return bt(e)},S=function(bt,Ct){return Ct(e)},_=function(bt){return bt(e)},nt=function(bt){return bt(e)},pt=function(){return dt.some(e)};return{isValue:nn,isError:vt,getOr:Et(e),getOrThunk:Et(e),getOrDie:Et(e),or:r,orThunk:o,fold:S,map:u,mapError:l,each:c,bind:m,exists:_,forall:nt,toOptional:pt}},Ch=function(e){var r=function(nt){return nt()},o=function(){return Wn(String(e))()},u=Ht,l=function(nt){return nt()},c=function(nt){return Ch(e)},m=function(nt){return Ch(nt(e))},S=function(nt){return Ch(e)},_=function(nt,pt){return nt(e)};return{isValue:vt,isError:nn,getOr:Ht,getOrThunk:r,getOrDie:o,or:u,orThunk:l,fold:_,map:c,mapError:m,each:it,bind:S,exists:vt,forall:nn,toOptional:dt.none}},l2=function(e,r){return e.fold(function(){return Ch(r)},Rm)},c2={value:Rm,error:Ch,fromOption:l2},Bl=function(e){if(!rt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");var r=[],o={};return Fn(e,function(u,l){var c=cr(u);if(c.length!==1)throw new Error("one and only one name per case");var m=c[0],S=u[m];if(o[m]!==void 0)throw new Error("duplicate key detected:"+m);if(m==="cata")throw new Error("cannot have a case named cata (sorry)");if(!rt(S))throw new Error("case arguments must be an array");r.push(m),o[m]=function(){for(var _=[],nt=0;nt<arguments.length;nt++)_[nt]=arguments[nt];var pt=_.length;if(pt!==S.length)throw new Error("Wrong number of arguments to case "+m+". Expected "+S.length+" ("+S+"), got "+pt);var bt=function(Ct){var Pt=cr(Ct);if(r.length!==Pt.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+Pt.join(","));var Ft=oo(r,function(zt){return cn(Pt,zt)});if(!Ft)throw new Error("Not all branches were specified when using match. Specified: "+Pt.join(", ")+`
Required: `+r.join(", "));return Ct[m].apply(null,_)};return{fold:function(){for(var Ct=[],Pt=0;Pt<arguments.length;Pt++)Ct[Pt]=arguments[Pt];if(Ct.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+Ct.length);var Ft=Ct[l];return Ft.apply(null,_)},match:bt,log:function(Ct){}}}}),o},Ba={generate:Bl};Ba.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var od=function(e){return e.fold(Ht,Ht)};function Hy(e,r,o,u,l){return e(o,u)?dt.some(o):wt(l)&&l(o)?dt.none():r(o,u,l)}var Sh=function(e,r,o){for(var u=e.dom,l=wt(o)?o:vt;u.parentNode;){u=u.parentNode;var c=lt.fromDom(u);if(r(c))return dt.some(c);if(l(c))break}return dt.none()},ib=function(e,r,o){var u=function(l,c){return c(l)};return Hy(u,Sh,e,r,o)},zy=function(e,r){var o=e.dom;return o.parentNode?qc(lt.fromDom(o.parentNode),function(u){return!Wa(e,u)&&r(u)}):dt.none()},qc=function(e,r){var o=function(l){return r(lt.fromDom(l))},u=oa(e.dom.childNodes,o);return u.map(lt.fromDom)},_v=function(e,r,o){return Sh(e,function(u){return Kr(u,r)},o)},Bm=function(e,r){return Co(r,e)},ou=function(e,r,o){var u=function(l,c){return Kr(l,c)};return Hy(u,_v,e,r,o)},Wu=window.Promise?window.Promise:Py,xh,f2=function(e,r){for(var o=window.requestAnimationFrame,u=["ms","moz","webkit"],l=function(m){window.setTimeout(m,0)},c=0;c<u.length&&!o;c++)o=window[u[c]+"RequestAnimationFrame"];o||(o=l),o(e,r)},$y=function(e,r){return typeof r!="number"&&(r=0),setTimeout(e,r)},d2=function(e,r){return typeof r!="number"&&(r=1),setInterval(e,r)},ub=function(e){return clearTimeout(e)},ZN=function(e){return clearInterval(e)},Pm=function(e,r){var o,u=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];clearTimeout(o),o=$y(function(){e.apply(this,l)},r)};return u.stop=function(){clearTimeout(o)},u},cs={requestAnimationFrame:function(e,r){if(xh){xh.then(e);return}xh=new Wu(function(o){r||(r=document.body),f2(o,r)}).then(e)},setTimeout:$y,setInterval:d2,setEditorTimeout:function(e,r,o){return $y(function(){e.removed||r()},o)},setEditorInterval:function(e,r,o){var u=d2(function(){e.removed?clearInterval(u):r()},o);return u},debounce:Pm,throttle:Pm,clearInterval:ZN,clearTimeout:ub},v2=function(e,r){r===void 0&&(r={});var o=0,u={},l=lt.fromDom(e),c=Qa(l),m=r.maxLoadTime||5e3,S=function(Vt){r.referrerPolicy=Vt},_=function(Vt){xa(ba(l),Vt)},nt=function(Vt){var rn=ba(l);Bm(rn,"#"+Vt).each(ca)},pt=function(Vt){return Xa(u,Vt).getOrThunk(function(){return{id:"mce-u"+o++,passed:[],failed:[],count:0}})},bt=function(Vt,rn,Qt){var On,kn=Zn._addCacheSuffix(Vt),mn=pt(kn);u[kn]=mn,mn.count++;var Ln=function(Or,Jr){for(var Dr=Or.length;Dr--;)Or[Dr]();mn.status=Jr,mn.passed=[],mn.failed=[],On&&(On.onload=null,On.onerror=null,On=null)},lr=function(){return Ln(mn.passed,2)},Tr=function(){return Ln(mn.failed,3)},$a=function(Or,Jr){Or()||(Date.now()-_a<m?cs.setTimeout(Jr):Tr())},Zr=function(){$a(function(){for(var Or=e.styleSheets,Jr=Or.length;Jr--;){var Dr=Or[Jr],Ur=Dr.ownerNode;if(Ur&&Ur.id===On.id)return lr(),!0}return!1},Zr)};if(rn&&mn.passed.push(rn),Qt&&mn.failed.push(Qt),mn.status!==1){if(mn.status===2){lr();return}if(mn.status===3){Tr();return}mn.status=1;var vr=lt.fromTag("link",c.dom);gt(vr,{rel:"stylesheet",type:"text/css",id:mn.id});var _a=Date.now();r.contentCssCors&&Ze(vr,"crossOrigin","anonymous"),r.referrerPolicy&&Ze(vr,"referrerpolicy",r.referrerPolicy),On=vr.dom,On.onload=Zr,On.onerror=Tr,_(vr),Ze(vr,"href",kn)}},Ct=function(Vt){return Fy.nu(function(rn){bt(Vt,yt(rn,Et(c2.value(Vt))),yt(rn,Et(c2.error(Vt))))})},Pt=function(Vt,rn,Qt){JN(er(Vt,Ct)).get(function(On){var kn=va(On,function(mn){return mn.isValue()});kn.fail.length>0?Qt(kn.fail.map(od)):rn(kn.pass.map(od))})},Ft=function(Vt){var rn=Zn._addCacheSuffix(Vt);Xa(u,rn).each(function(Qt){var On=--Qt.count;On===0&&(delete u[rn],nt(Qt.id))})},zt=function(Vt){Fn(Vt,function(rn){Ft(rn)})};return{load:bt,loadAll:Pt,unload:Ft,unloadAll:zt,_setReferrerPolicy:S}},zi=function(){var e=new WeakMap,r=function(o,u){var l=Vr(o),c=l.dom;return dt.from(e.get(c)).getOrThunk(function(){var m=v2(c,u);return e.set(c,m),m})};return{forElement:r}},Kc=zi(),vi=function(){function e(r,o){this.node=r,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return e.prototype.current=function(){return this.node},e.prototype.next=function(r){return this.node=this.findSibling(this.node,"firstChild","nextSibling",r),this.node},e.prototype.prev=function(r){return this.node=this.findSibling(this.node,"lastChild","previousSibling",r),this.node},e.prototype.prev2=function(r){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",r),this.node},e.prototype.findSibling=function(r,o,u,l){var c,m;if(r){if(!l&&r[o])return r[o];if(r!==this.rootNode){if(c=r[u],c)return c;for(m=r.parentNode;m&&m!==this.rootNode;m=m.parentNode)if(c=m[u],c)return c}}},e.prototype.findPreviousNode=function(r,o,u,l){var c,m,S;if(r){if(c=r[u],this.rootNode&&c===this.rootNode)return;if(c){if(!l){for(S=c[o];S;S=S[o])if(!S[o])return S}return c}if(m=r.parentNode,m&&m!==this.rootNode)return m}},e}(),Im=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],nc=["td","th"],eL=["thead","tbody","tfoot"],Ru=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],rl=["h1","h2","h3","h4","h5","h6"],m2=["li","dd","dt"],yr=["ul","ol","dl"],pl=["pre","script","textarea","style"],Ad=function(e){var r;return function(o){return r=r||mr(e,nn),Ka(r,Jo(o))}},Za=Ad(rl),rc=Ad(Im),tL=function(e){return Jo(e)==="table"},_s=function(e){return Ti(e)&&!rc(e)},Fm=function(e){return Ti(e)&&Jo(e)==="br"},id=Ad(Ru),sb=Ad(yr),Is=Ad(m2),ti=Ad(eL),Gc=Ad(nc),Eh=Ad(pl),yi=function(e,r,o){return _v(e,r,o).isSome()},Ov="\uFEFF",hl=" ",Pl=function(e){return e===Ov},nL=function(e){return e.replace(/\uFEFF/g,"")},En=Ov,gl=Pl,bl=nL,Hm=ma,ac=ia,$i=function(e){return ac(e)&&(e=e.parentNode),Hm(e)&&e.hasAttribute("data-mce-caret")},hi=function(e){return ac(e)&&gl(e.data)},oc=function(e){return $i(e)||hi(e)},kh=function(e){return e.firstChild!==e.lastChild||!ui(e.firstChild)},Vy=function(e,r){var o=e.ownerDocument,u=o.createTextNode(En),l=e.parentNode;if(r){var c=e.previousSibling;if(ac(c)){if(oc(c))return c;if(cb(c))return c.splitText(c.data.length-1)}l.insertBefore(u,e)}else{var c=e.nextSibling;if(ac(c)){if(oc(c))return c;if(lb(c))return c.splitText(1),c}e.nextSibling?l.insertBefore(u,e.nextSibling):l.appendChild(u)}return u},Va=function(e){var r=e.container();return ia(r)?r.data.charAt(e.offset())===En||e.isAtStart()&&hi(r.previousSibling):!1},Uy=function(e){var r=e.container();return ia(r)?r.data.charAt(e.offset()-1)===En||e.isAtEnd()&&hi(r.nextSibling):!1},ic=function(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},rL=function(e,r,o){var u=r.ownerDocument,l=u.createElement(e);l.setAttribute("data-mce-caret",o?"before":"after"),l.setAttribute("data-mce-bogus","all"),l.appendChild(ic());var c=r.parentNode;return o?c.insertBefore(l,r):r.nextSibling?c.insertBefore(l,r.nextSibling):c.appendChild(l),l},lb=function(e){return ac(e)&&e.data[0]===En},cb=function(e){return ac(e)&&e.data[e.data.length-1]===En},aL=function(e){var r=e.getElementsByTagName("br"),o=r[r.length-1];xc(o)&&o.parentNode.removeChild(o)},jy=function(e){return e&&e.hasAttribute("data-mce-caret")?(aL(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},Lf=function(e){return $i(e.startContainer)},Mv=Ec,oL=Mi,iL=ui,uL=ia,p2=Lu(["script","style","textarea"]),Wy=Lu(["img","input","textarea","hr","iframe","video","audio","object","embed"]),qy=Lu(["table"]),h2=oc,Rf=function(e){return h2(e)?!1:uL(e)?!p2(e.parentNode):Wy(e)||iL(e)||qy(e)||Ky(e)},zm=function(e){return ma(e)&&e.getAttribute("unselectable")==="true"},Ky=function(e){return zm(e)===!1&&oL(e)},sL=function(e,r){for(e=e.parentNode;e&&e!==r;e=e.parentNode){if(Ky(e))return!1;if(Mv(e))return!0}return!0},lL=function(e){return Ky(e)?Rr(br(e.getElementsByTagName("*")),function(r,o){return r||Mv(o)},!1)!==!0:!1},cL=function(e){return Wy(e)||lL(e)},wu=function(e,r){return Rf(e)&&sL(e,r)},ud=/^[ \t\r\n]*$/,Xc=function(e){return ud.test(e)},Ah=function(e,r){var o=lt.fromDom(r),u=lt.fromDom(e);return yi(u,"pre,code",Mt(Wa,o))},g2=function(e,r){return ia(e)&&Xc(e.data)&&Ah(e,r)===!1},kc=function(e){return ma(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id"))},Dv=function(e,r){return Rf(e)&&g2(e,r)===!1||kc(e)||Gy(e)},Gy=rd("data-mce-bookmark"),Xy=rd("data-mce-bogus"),Td=Nf("data-mce-bogus","all"),_d=function(e,r){var o=0;if(Dv(e,e))return!1;var u=e.firstChild;if(!u)return!0;var l=new vi(u,e);do{if(r){if(Td(u)){u=l.next(!0);continue}if(Xy(u)){u=l.next();continue}}if(ui(u)){o++,u=l.next();continue}if(Dv(u,e))return!1;u=l.next()}while(u);return o<=1},Zu=function(e,r){return r===void 0&&(r=!0),_d(e.dom,r)},fb=function(e){return e.nodeName.toLowerCase()==="span"},b2=function(e,r){return Ot(e)&&(Dv(e,r)||_s(lt.fromDom(e)))},$m=function(e,r){var o=new vi(e,r).prev(!1),u=new vi(e,r).next(!1),l=at(o)||b2(o,r),c=at(u)||b2(u,r);return l&&c},Vm=function(e){return fb(e)&&e.getAttribute("data-mce-type")==="bookmark"},Th=function(e,r){return ia(e)&&e.data.length>0&&$m(e,r)},fL=function(e){return ma(e)?e.childNodes.length>0:!1},_h=function(e){return So(e)||bh(e)},Yy=function(e,r,o){var u=o||r;if(ma(r)&&Vm(r))return r;for(var l=r.childNodes,c=l.length-1;c>=0;c--)Yy(e,l[c],u);if(ma(r)){var m=r.childNodes;m.length===1&&Vm(m[0])&&r.parentNode.insertBefore(m[0],r)}return!_h(r)&&!Dv(r,u)&&!fL(r)&&!Th(r,u)&&e.remove(r),r},dL=Zn.makeMap,Vi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,db=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Um=/[<>&\"\']/g,Qy=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Jy={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},uc={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Il={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Oh=function(e){var r=lt.fromTag("div").dom;return r.innerHTML=e,r.textContent||r.innerText||e},jm=function(e,r){var o,u,l,c={};if(e){for(e=e.split(","),r=r||10,o=0;o<e.length;o+=2)u=String.fromCharCode(parseInt(e[o],r)),uc[u]||(l="&"+e[o+1]+";",c[u]=l,c[l]=u);return c}},Zy=jm("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Mh=function(e,r){return e.replace(r?Vi:db,function(o){return uc[o]||o})},ew=function(e){return(""+e).replace(Um,function(r){return uc[r]||r})},Dh=function(e,r){return e.replace(r?Vi:db,function(o){return o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":uc[o]||"&#"+o.charCodeAt(0)+";"})},tw=function(e,r,o){return o=o||Zy,e.replace(r?Vi:db,function(u){return uc[u]||o[u]||u})},vL=function(e,r){var o=jm(r)||Zy,u=function(m,S){return m.replace(S?Vi:db,function(_){return uc[_]!==void 0?uc[_]:o[_]!==void 0?o[_]:_.length>1?"&#"+((_.charCodeAt(0)-55296)*1024+(_.charCodeAt(1)-56320)+65536)+";":"&#"+_.charCodeAt(0)+";"})},l=function(m,S){return tw(m,S,o)},c=dL(e.replace(/\+/g,","));return c.named&&c.numeric?u:c.named?r?l:tw:c.numeric?Dh:Mh},nw=function(e){return e.replace(Qy,function(r,o){return o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Jy[o]||String.fromCharCode(o)):Il[r]||Zy[r]||Oh(r)})},Yc={encodeRaw:Mh,encodeAllRaw:ew,encodeNumeric:Dh,encodeNamed:tw,getEncodeFunc:vL,decode:nw},Fl={},Nh={},Qc=Zn.makeMap,fs=Zn.each,vb=Zn.extend,mb=Zn.explode,y2=Zn.inArray,es=function(e,r){return e=Zn.trim(e),e?e.split(r||" "):[]},rw=function(e,r){var o=Qc(e," ",Qc(e.toUpperCase()," "));return vb(o,r)},pb=function(e){return rw("td th li dt dd figcaption caption details summary",e.getTextBlockElements())},$o=function(e){var r={},o,u,l,c,m,S,_=function(pt,bt,Ct){var Pt,Ft,zt,Vt=function(Qt,On){var kn={},mn,Ln;for(mn=0,Ln=Qt.length;mn<Ln;mn++)kn[Qt[mn]]=On||{};return kn};Ct=Ct||[],bt=bt||"",typeof Ct=="string"&&(Ct=es(Ct));var rn=es(pt);for(Pt=rn.length;Pt--;)Ft=es([o,bt].join(" ")),zt={attributes:Vt(Ft),attributesOrder:Ft,children:Vt(Ct,Nh)},r[rn[Pt]]=zt},nt=function(pt,bt){var Ct,Pt,Ft,zt,Vt=es(pt);Ct=Vt.length;for(var rn=es(bt);Ct--;)for(Pt=r[Vt[Ct]],Ft=0,zt=rn.length;Ft<zt;Ft++)Pt.attributes[rn[Ft]]={},Pt.attributesOrder.push(rn[Ft])};return Fl[e]?Fl[e]:(o="id accesskey class dir lang style tabindex title role",u="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",l="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",u+=" article aside details dialog figure main header footer hgroup section nav",l+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"&&(o+=" xml:lang",S="acronym applet basefont big font strike tt",l=[l,S].join(" "),fs(es(S),function(pt){_(pt,"",l)}),m="center dir isindex noframes",u=[u,m].join(" "),c=[u,l].join(" "),fs(es(m),function(pt){_(pt,"",c)})),c=c||[u,l].join(" "),_("html","manifest","head body"),_("head","","base command link meta noscript script style title"),_("title hr noscript br"),_("base","href target"),_("link","href rel media hreflang type sizes hreflang"),_("meta","name http-equiv content charset"),_("style","media type scoped"),_("script","src async defer type charset"),_("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",c),_("address dt dd div caption","",c),_("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",l),_("blockquote","cite",c),_("ol","reversed start type","li"),_("ul","","li"),_("li","value",c),_("dl","","dt dd"),_("a","href target rel media hreflang type",l),_("q","cite",l),_("ins del","cite datetime",c),_("img","src sizes srcset alt usemap ismap width height"),_("iframe","src name width height",c),_("embed","src type width height"),_("object","data type typemustmatch name usemap form width height",[c,"param"].join(" ")),_("param","name value"),_("map","name",[c,"area"].join(" ")),_("area","alt coords shape href target rel media hreflang type"),_("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),_("colgroup","span","col"),_("col","span"),_("tbody thead tfoot","","tr"),_("tr","","td th"),_("td","colspan rowspan headers",c),_("th","colspan rowspan headers scope abbr",c),_("form","accept-charset action autocomplete enctype method name novalidate target",c),_("fieldset","disabled form name",[c,"legend"].join(" ")),_("label","form for",l),_("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),_("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?c:l),_("select","disabled form multiple name required size","option optgroup"),_("optgroup","disabled label","option"),_("option","disabled label selected value"),_("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),_("menu","type label",[c,"li"].join(" ")),_("noscript","",c),e!=="html4"&&(_("wbr"),_("ruby","",[l,"rt rp"].join(" ")),_("figcaption","",c),_("mark rt rp summary bdi","",l),_("canvas","width height",c),_("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[c,"track source"].join(" ")),_("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[c,"track source"].join(" ")),_("picture","","img source"),_("source","src srcset type media sizes"),_("track","kind src srclang label default"),_("datalist","",[l,"option"].join(" ")),_("article section nav aside main header footer","",c),_("hgroup","","h1 h2 h3 h4 h5 h6"),_("figure","",[c,"figcaption"].join(" ")),_("time","datetime",l),_("dialog","open",c),_("command","type label icon disabled checked radiogroup command"),_("output","for form name",l),_("progress","value max",l),_("meter","value min max low high optimum",l),_("details","open",[c,"summary"].join(" ")),_("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(nt("script","language xml:space"),nt("style","xml:space"),nt("object","declare classid code codebase codetype archive standby align border hspace vspace"),nt("embed","align name hspace vspace"),nt("param","valuetype type"),nt("a","charset name rev shape coords"),nt("br","clear"),nt("applet","codebase archive code object alt name width height align hspace vspace"),nt("img","name longdesc align border hspace vspace"),nt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),nt("font basefont","size color face"),nt("input","usemap align"),nt("select"),nt("textarea"),nt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),nt("ul","type compact"),nt("li","type"),nt("ol dl menu dir","compact"),nt("pre","width xml:space"),nt("hr","align noshade size width"),nt("isindex","prompt"),nt("table","summary width frame rules cellspacing cellpadding align bgcolor"),nt("col","width align char charoff valign"),nt("colgroup","width align char charoff valign"),nt("thead","align char charoff valign"),nt("tr","align char charoff valign bgcolor"),nt("th","axis align char charoff valign nowrap bgcolor width height"),nt("form","accept"),nt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),nt("tfoot","align char charoff valign"),nt("tbody","align char charoff valign"),nt("area","nohref"),nt("body","background bgcolor text link vlink alink")),e!=="html4"&&(nt("input button select textarea","autofocus"),nt("input textarea","placeholder"),nt("a","download"),nt("link script img","crossorigin"),nt("img","loading"),nt("iframe","sandbox seamless allowfullscreen loading")),fs(es("a form meter progress dfn"),function(pt){r[pt]&&delete r[pt].children[pt]}),delete r.caption.children.table,delete r.script,Fl[e]=r,r)},za=function(e,r){var o;return e&&(o={},typeof e=="string"&&(e={"*":e}),fs(e,function(u,l){o[l]=o[l.toUpperCase()]=r==="map"?Qc(u,/[, ]/):mb(u,/[, ]/)})),o},Hl=function(e){var r={},o={},u=[],l={},c={},m=function(xr,Fr,Oa){var zn=e[xr];return zn?zn=Qc(zn,/[, ]/,Qc(zn.toUpperCase(),/[, ]/)):(zn=Fl[xr],zn||(zn=rw(Fr,Oa),Fl[xr]=zn)),zn};e=e||{};var S=$o(e.schema);e.verify_html===!1&&(e.valid_elements="*[*]");var _=za(e.valid_styles),nt=za(e.invalid_styles,"map"),pt=za(e.valid_classes,"map"),bt=m("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Ct=m("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Pt=m("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Ft=m("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),zt="td th iframe video audio object script code",Vt=m("non_empty_elements",zt+" pre",Pt),rn=m("move_caret_before_on_enter_elements",zt+" table",Pt),Qt=m("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),On=m("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",Qt),kn=m("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");fs((e.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(xr){c[xr]=new RegExp("</"+xr+"[^>]*>","gi")});var mn=function(xr){return new RegExp("^"+xr.replace(/([?+*])/g,".$1")+"$")},Ln=function(xr){var Fr,Oa,zn,_r,kr,Na,Ia,ii,Au,mu,ys,ws,Xs,pu,Xl,Ys,Jf,Uo,Ci=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Tu=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,Ef=/[*?+]/;if(xr){var kf=es(xr,",");for(r["@"]&&(Ys=r["@"].attributes,Jf=r["@"].attributesOrder),Fr=0,Oa=kf.length;Fr<Oa;Fr++)if(kr=Ci.exec(kf[Fr]),kr){if(pu=kr[1],Au=kr[2],Xl=kr[3],ii=kr[5],ws={},Xs=[],Na={attributes:ws,attributesOrder:Xs},pu==="#"&&(Na.paddEmpty=!0),pu==="-"&&(Na.removeEmpty=!0),kr[4]==="!"&&(Na.removeEmptyAttrs=!0),Ys&&(Nr(Ys,function(Af,Cv){ws[Cv]=Af}),Xs.push.apply(Xs,Jf)),ii){for(ii=es(ii,"|"),zn=0,_r=ii.length;zn<_r;zn++)if(kr=Tu.exec(ii[zn]),kr){if(Ia={},ys=kr[1],mu=kr[2].replace(/[\\:]:/g,":"),pu=kr[3],Uo=kr[4],ys==="!"&&(Na.attributesRequired=Na.attributesRequired||[],Na.attributesRequired.push(mu),Ia.required=!0),ys==="-"){delete ws[mu],Xs.splice(y2(Xs,mu),1);continue}pu&&(pu==="="&&(Na.attributesDefault=Na.attributesDefault||[],Na.attributesDefault.push({name:mu,value:Uo}),Ia.defaultValue=Uo),pu===":"&&(Na.attributesForced=Na.attributesForced||[],Na.attributesForced.push({name:mu,value:Uo}),Ia.forcedValue=Uo),pu==="<"&&(Ia.validValues=Qc(Uo,"?"))),Ef.test(mu)?(Na.attributePatterns=Na.attributePatterns||[],Ia.pattern=mn(mu),Na.attributePatterns.push(Ia)):(ws[mu]||Xs.push(mu),ws[mu]=Ia)}}!Ys&&Au==="@"&&(Ys=ws,Jf=Xs),Xl&&(Na.outputName=Au,r[Xl]=Na),Ef.test(Au)?(Na.pattern=mn(Au),u.push(Na)):r[Au]=Na}}},lr=function(xr){r={},u=[],Ln(xr),fs(S,function(Fr,Oa){o[Oa]=Fr.children})},Tr=function(xr){var Fr=/^(~)?(.+)$/;xr&&(Fl.text_block_elements=Fl.block_elements=null,fs(es(xr,","),function(Oa){var zn=Fr.exec(Oa),_r=zn[1]==="~",kr=_r?"span":"div",Na=zn[2];if(o[Na]=o[kr],l[Na]=kr,_r||(On[Na.toUpperCase()]={},On[Na]={}),!r[Na]){var Ia=r[kr];Ia=vb({},Ia),delete Ia.removeEmptyAttrs,delete Ia.removeEmpty,r[Na]=Ia}fs(o,function(ii,Au){ii[kr]&&(o[Au]=ii=vb({},o[Au]),ii[Na]=ii[kr])})}))},$a=function(xr){var Fr=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;Fl[e.schema]=null,xr&&fs(es(xr,","),function(Oa){var zn=Fr.exec(Oa),_r,kr;zn&&(kr=zn[1],kr?_r=o[zn[2]]:_r=o[zn[2]]={"#comment":{}},_r=o[zn[2]],fs(es(zn[3],"|"),function(Na){kr==="-"?delete _r[Na]:_r[Na]={}}))})},Zr=function(xr){var Fr=r[xr],Oa;if(Fr)return Fr;for(Oa=u.length;Oa--;)if(Fr=u[Oa],Fr.pattern.test(xr))return Fr};e.valid_elements?lr(e.valid_elements):(fs(S,function(xr,Fr){r[Fr]={attributes:xr.attributes,attributesOrder:xr.attributesOrder},o[Fr]=xr.children}),e.schema!=="html5"&&fs(es("strong/b em/i"),function(xr){var Fr=es(xr,"/");r[Fr[1]].outputName=Fr[0]}),fs(kn,function(xr,Fr){r[Fr]&&(e.padd_empty_block_inline_children&&(r[Fr].paddInEmptyBlock=!0),r[Fr].removeEmpty=!0)}),fs(es("ol ul blockquote a table tbody"),function(xr){r[xr]&&(r[xr].removeEmpty=!0)}),fs(es("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(xr){r[xr].paddEmpty=!0}),fs(es("span"),function(xr){r[xr].removeEmptyAttrs=!0})),Tr(e.custom_elements),$a(e.valid_children),Ln(e.extended_valid_elements),$a("+ol[ul|ol],+ul[ul|ol]"),fs({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(xr,Fr){r[Fr]&&(r[Fr].parentsRequired=es(xr))}),e.invalid_elements&&fs(mb(e.invalid_elements),function(xr){r[xr]&&delete r[xr]}),Zr("span")||Ln("span[!data-mce-type|*]");var vr=Et(_),_a=Et(nt),Or=Et(pt),Jr=Et(Ft),Dr=Et(On),Ur=Et(Qt),fa=Et(kn),Sr=Et(Pt),ra=Et(Ct),xo=Et(Vt),Vo=Et(rn),zo=Et(bt),Iu=Et(c),Ri=function(xr,Fr){var Oa=o[xr.toLowerCase()];return!!(Oa&&Oa[Fr.toLowerCase()])},Ms=function(xr,Fr){var Oa,zn,_r=Zr(xr);if(_r)if(Fr){if(_r.attributes[Fr])return!0;if(Oa=_r.attributePatterns,Oa){for(zn=Oa.length;zn--;)if(Oa[zn].pattern.test(xr))return!0}}else return!0;return!1},Tl=Et(l);return{children:o,elements:r,getValidStyles:vr,getValidClasses:Or,getBlockElements:Dr,getInvalidStyles:_a,getShortEndedElements:Sr,getTextBlockElements:Ur,getTextInlineElements:fa,getBoolAttrs:Jr,getElementRule:Zr,getSelfClosingElements:ra,getNonEmptyElements:xo,getMoveCaretBeforeOnEnterElements:Vo,getWhiteSpaceElements:zo,getSpecialElements:Iu,isValidChild:Ri,isValid:Ms,getCustomElements:Tl,addValidElements:Ln,setValidElements:lr,addCustomElements:Tr,addValidChildren:$a}},hb=function(e,r,o,u){var l=function(c){return c=parseInt(c,10).toString(16),c.length>1?c:"0"+c};return"#"+l(r)+l(o)+l(u)},Lh=function(e,r){var o=this,u=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,m=/\s+$/,S,_={},nt,pt,bt=Ov;e=e||{},r&&(nt=r.getValidStyles(),pt=r.getInvalidStyles());var Ct=(`\\" \\' \\; \\: ; : `+bt).split(" ");for(S=0;S<Ct.length;S++)_[Ct[S]]=bt+S,_[bt+S]=Ct[S];return{toHex:function(Pt){return Pt.replace(u,hb)},parse:function(Pt){var Ft={},zt,Vt,rn,Qt,On=e.url_converter,kn=e.url_converter_scope||o,mn=function(Or,Jr,Dr){var Ur=Ft[Or+"-top"+Jr];if(Ur){var fa=Ft[Or+"-right"+Jr];if(fa){var Sr=Ft[Or+"-bottom"+Jr];if(Sr){var ra=Ft[Or+"-left"+Jr];if(ra){var xo=[Ur,fa,Sr,ra];for(S=xo.length-1;S--&&xo[S]===xo[S+1];);S>-1&&Dr||(Ft[Or+Jr]=S===-1?xo[0]:xo.join(" "),delete Ft[Or+"-top"+Jr],delete Ft[Or+"-right"+Jr],delete Ft[Or+"-bottom"+Jr],delete Ft[Or+"-left"+Jr])}}}}},Ln=function(Or){var Jr=Ft[Or],Dr;if(Jr){for(Jr=Jr.split(" "),Dr=Jr.length;Dr--;)if(Jr[Dr]!==Jr[0])return!1;return Ft[Or]=Jr[0],!0}},lr=function(Or,Jr,Dr,Ur){Ln(Jr)&&Ln(Dr)&&Ln(Ur)&&(Ft[Or]=Ft[Jr]+" "+Ft[Dr]+" "+Ft[Ur],delete Ft[Jr],delete Ft[Dr],delete Ft[Ur])},Tr=function(Or){return Qt=!0,_[Or]},$a=function(Or,Jr){return Qt&&(Or=Or.replace(/\uFEFF[0-9]/g,function(Dr){return _[Dr]})),Jr||(Or=Or.replace(/\\([\'\";:])/g,"$1")),Or},Zr=function(Or){return String.fromCharCode(parseInt(Or.slice(1),16))},vr=function(Or){return Or.replace(/\\[0-9a-f]+/gi,Zr)},_a=function(Or,Jr,Dr,Ur,fa,Sr){if(fa=fa||Sr,fa)return fa=$a(fa),"'"+fa.replace(/\'/g,"\\'")+"'";if(Jr=$a(Jr||Dr||Ur),!e.allow_script_urls){var ra=Jr.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(ra)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(ra))return""}return On&&(Jr=On.call(kn,Jr,"style")),"url('"+Jr.replace(/\'/g,"\\'")+"')"};if(Pt){for(Pt=Pt.replace(/[\u0000-\u001F]/g,""),Pt=Pt.replace(/\\[\"\';:\uFEFF]/g,Tr).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(Or){return Or.replace(/[;:]/g,Tr)});zt=c.exec(Pt);)if(c.lastIndex=zt.index+zt[0].length,Vt=zt[1].replace(m,"").toLowerCase(),rn=zt[2].replace(m,""),Vt&&rn){if(Vt=vr(Vt),rn=vr(rn),Vt.indexOf(bt)!==-1||Vt.indexOf('"')!==-1||!e.allow_script_urls&&(Vt==="behavior"||/expression\s*\(|\/\*|\*\//.test(rn)))continue;Vt==="font-weight"&&rn==="700"?rn="bold":(Vt==="color"||Vt==="background-color")&&(rn=rn.toLowerCase()),rn=rn.replace(u,hb),rn=rn.replace(l,_a),Ft[Vt]=Qt?$a(rn,!0):rn}mn("border","",!0),mn("border","-width"),mn("border","-color"),mn("border","-style"),mn("padding",""),mn("margin",""),lr("border","border-width","border-style","border-color"),Ft.border==="medium none"&&delete Ft.border,Ft["border-image"]==="none"&&delete Ft["border-image"]}return Ft},serialize:function(Pt,Ft){var zt="",Vt=function(Qt){var On,kn=nt[Qt];if(kn)for(var mn=0,Ln=kn.length;mn<Ln;mn++)Qt=kn[mn],On=Pt[Qt],On&&(zt+=(zt.length>0?" ":"")+Qt+": "+On+";")},rn=function(Qt,On){var kn=pt["*"];return kn&&kn[Qt]?!1:(kn=pt[On],!(kn&&kn[Qt]))};return Ft&&nt?(Vt("*"),Vt(Ft)):Nr(Pt,function(Qt,On){Qt&&(!pt||rn(On,Ft))&&(zt+=(zt.length>0?" ":"")+On+": "+Qt+";")}),zt}}},w2={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},si=function(e){return e instanceof Event||wt(e.initEvent)},C2=function(e){return e.isDefaultPrevented===nn||e.isDefaultPrevented===vt},mL=function(e){return et(e.preventDefault)||si(e)},S2=function(e,r){var o=r!=null?r:{};for(var u in e)Ka(w2,u)||(o[u]=e[u]);return Ot(o.composedPath)&&(o.composedPath=function(){return e.composedPath()}),o},wr=function(e,r,o,u){var l,c=S2(r,u);return c.type=e,et(c.target)&&(c.target=(l=c.srcElement)!==null&&l!==void 0?l:o),mL(r)&&(c.preventDefault=function(){c.defaultPrevented=!0,c.isDefaultPrevented=nn,wt(r.preventDefault)?r.preventDefault():si(r)&&(r.returnValue=!1)},c.stopPropagation=function(){c.cancelBubble=!0,c.isPropagationStopped=nn,wt(r.stopPropagation)?r.stopPropagation():si(r)&&(r.cancelBubble=!0)},c.stopImmediatePropagation=function(){c.isImmediatePropagationStopped=nn,c.stopPropagation()},C2(c)||(c.isDefaultPrevented=c.defaultPrevented===!0?nn:vt,c.isPropagationStopped=c.cancelBubble===!0?nn:vt,c.isImmediatePropagationStopped=vt)),c},aw="mce-data-",pL=/^(?:mouse|contextmenu)|click/,Wm=function(e,r,o,u){e.addEventListener?e.addEventListener(r,o,u||!1):e.attachEvent&&e.attachEvent("on"+r,o)},gb=function(e,r,o,u){e.removeEventListener?e.removeEventListener(r,o,u||!1):e.detachEvent&&e.detachEvent("on"+r,o)},qm=function(e){return Ot(e)&&pL.test(e.type)},Od=function(e,r){var o=wr(e.type,e,document,r);if(qm(e)&&at(e.pageX)&&!at(e.clientX)){var u=o.target.ownerDocument||document,l=u.documentElement,c=u.body,m=o;m.pageX=e.clientX+(l&&l.scrollLeft||c&&c.scrollLeft||0)-(l&&l.clientLeft||c&&c.clientLeft||0),m.pageY=e.clientY+(l&&l.scrollTop||c&&c.scrollTop||0)-(l&&l.clientTop||c&&c.clientTop||0)}return at(o.metaKey)&&(o.metaKey=!1),o},Nv=function(e,r,o){var u=e.document,l={type:"ready"};if(o.domLoaded){r(l);return}var c=function(){return u.readyState==="complete"||u.readyState==="interactive"&&u.body},m=function(){gb(e,"DOMContentLoaded",m),gb(e,"load",m),o.domLoaded||(o.domLoaded=!0,r(l)),e=null};c()?m():Wm(e,"DOMContentLoaded",m),o.domLoaded||Wm(e,"load",m)},Km=function(){function e(){this.domLoaded=!1,this.events={},this.count=1,this.expando=aw+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}return e.prototype.bind=function(r,o,u,l){var c=this,m,S,_,nt,pt,bt,Ct,Pt=window,Ft=function(Vt){c.executeHandlers(Od(Vt||Pt.event),m)};if(!(!r||r.nodeType===3||r.nodeType===8)){r[c.expando]?m=r[c.expando]:(m=c.count++,r[c.expando]=m,c.events[m]={}),l=l||r;var zt=o.split(" ");for(_=zt.length;_--;){if(nt=zt[_],bt=Ft,pt=Ct=!1,nt==="DOMContentLoaded"&&(nt="ready"),c.domLoaded&&nt==="ready"&&r.readyState==="complete"){u.call(l,Od({type:nt}));continue}c.hasMouseEnterLeave||(pt=c.mouseEnterLeave[nt],pt&&(bt=function(Vt){var rn=Vt.currentTarget,Qt=Vt.relatedTarget;if(Qt&&rn.contains)Qt=rn.contains(Qt);else for(;Qt&&Qt!==rn;)Qt=Qt.parentNode;Qt||(Vt=Od(Vt||Pt.event),Vt.type=Vt.type==="mouseout"?"mouseleave":"mouseenter",Vt.target=rn,c.executeHandlers(Vt,m))})),!c.hasFocusIn&&(nt==="focusin"||nt==="focusout")&&(Ct=!0,pt=nt==="focusin"?"focus":"blur",bt=function(Vt){Vt=Od(Vt||Pt.event),Vt.type=Vt.type==="focus"?"focusin":"focusout",c.executeHandlers(Vt,m)}),S=c.events[m][nt],S?nt==="ready"&&c.domLoaded?u(Od({type:nt})):S.push({func:u,scope:l}):(c.events[m][nt]=S=[{func:u,scope:l}],S.fakeName=pt,S.capture=Ct,S.nativeHandler=bt,nt==="ready"?Nv(r,bt,c):Wm(r,pt||nt,bt,Ct))}return r=S=null,u}},e.prototype.unbind=function(r,o,u){var l,c,m,S,_;if(!r||r.nodeType===3||r.nodeType===8)return this;var nt=r[this.expando];if(nt){if(_=this.events[nt],o){var pt=o.split(" ");for(c=pt.length;c--;)if(S=pt[c],l=_[S],l){if(u){for(m=l.length;m--;)if(l[m].func===u){var bt=l.nativeHandler,Ct=l.fakeName,Pt=l.capture;l=l.slice(0,m).concat(l.slice(m+1)),l.nativeHandler=bt,l.fakeName=Ct,l.capture=Pt,_[S]=l}}(!u||l.length===0)&&(delete _[S],gb(r,l.fakeName||S,l.nativeHandler,l.capture))}}else Nr(_,function(Ft,zt){gb(r,Ft.fakeName||zt,Ft.nativeHandler,Ft.capture)}),_={};for(S in _)if(Ka(_,S))return this;delete this.events[nt];try{delete r[this.expando]}catch(Ft){r[this.expando]=null}}return this},e.prototype.fire=function(r,o,u){var l;if(!r||r.nodeType===3||r.nodeType===8)return this;var c=Od({type:o,target:r},u);do l=r[this.expando],l&&this.executeHandlers(c,l),r=r.parentNode||r.ownerDocument||r.defaultView||r.parentWindow;while(r&&!c.isPropagationStopped());return this},e.prototype.clean=function(r){var o,u;if(!r||r.nodeType===3||r.nodeType===8)return this;if(r[this.expando]&&this.unbind(r),r.getElementsByTagName||(r=r.document),r&&r.getElementsByTagName)for(this.unbind(r),u=r.getElementsByTagName("*"),o=u.length;o--;)r=u[o],r[this.expando]&&this.unbind(r);return this},e.prototype.destroy=function(){this.events={}},e.prototype.cancel=function(r){return r&&(r.preventDefault(),r.stopImmediatePropagation()),!1},e.prototype.executeHandlers=function(r,o){var u=this.events[o],l=u&&u[r.type];if(l)for(var c=0,m=l.length;c<m;c++){var S=l[c];if(S&&S.func.call(S.scope,r)===!1&&r.preventDefault(),r.isImmediatePropagationStopped())return}},e.Event=new e,e}(),iu,go,sc,x2,lc,ow,bb,Md,Dd,Gm,Nd,cc,Ld,Bf,Rd,Xm,E2,ya,Os="sizzle"+-new Date,Jc=window.document,Pf=0,k2=0,A2=dw(),yb=dw(),Ym=dw(),Bd=function(e,r){return e===r&&(Gm=!0),0},wb="undefined",Rh=1<<31,hL={}.hasOwnProperty,Pd=[],iw=Pd.pop,uw=Pd.push,Id=Pd.push,sw=Pd.slice,Fd=Pd.indexOf||function(e){for(var r=0,o=this.length;r<o;r++)if(this[r]===e)return r;return-1},gL="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Gi="[\\x20\\t\\r\\n\\f]",Fs="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",yl="\\["+Gi+"*("+Fs+")(?:"+Gi+"*([*^$|!~]?=)"+Gi+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Fs+"))|)"+Gi+"*\\]",T2=":("+Fs+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+yl+")*)|.*)\\)|)",Cb=new RegExp("^"+Gi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Gi+"+$","g"),bL=new RegExp("^"+Gi+"*,"+Gi+"*"),_2=new RegExp("^"+Gi+"*([>+~]|"+Gi+")"+Gi+"*"),Ac=new RegExp("="+Gi+`*([^\\]'"]*?)`+Gi+"*\\]","g"),yL=new RegExp(T2),wL=new RegExp("^"+Fs+"$"),Sb={ID:new RegExp("^#("+Fs+")"),CLASS:new RegExp("^\\.("+Fs+")"),TAG:new RegExp("^("+Fs+"|[*])"),ATTR:new RegExp("^"+yl),PSEUDO:new RegExp("^"+T2),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Gi+"*(even|odd|(([+-]|)(\\d*)n|)"+Gi+"*(?:([+-]|)"+Gi+"*(\\d+)|))"+Gi+"*\\)|)","i"),bool:new RegExp("^(?:"+gL+")$","i"),needsContext:new RegExp("^"+Gi+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Gi+"*((?:-\\d)?\\d*)"+Gi+"*\\)|)(?=[^-]|$)","i")},CL=/^(?:input|select|textarea|button)$/i,SL=/^h\d$/i,lw=/^[^{]+\{\s*\[native \w/,cw=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,fw=/[+~]/,xL=/'|\\/g,Hd=new RegExp("\\\\([\\da-f]{1,6}"+Gi+"?|("+Gi+")|.)","ig"),zd=function(e,r,o){var u="0x"+r-65536;return u!==u||o?r:u<0?String.fromCharCode(u+65536):String.fromCharCode(u>>10|55296,u&1023|56320)};try{Id.apply(Pd=sw.call(Jc.childNodes),Jc.childNodes),Pd[Jc.childNodes.length].nodeType}catch(e){Id={apply:Pd.length?function(r,o){uw.apply(r,sw.call(o))}:function(r,o){for(var u=r.length,l=0;r[u++]=o[l++];);r.length=u-1}}}var mi=function(e,r,o,u){var l,c,m,S,_,nt,pt,bt,Ct,Pt;if((r?r.ownerDocument||r:Jc)!==cc&&Nd(r),r=r||cc,o=o||[],!e||typeof e!="string")return o;if((S=r.nodeType)!==1&&S!==9)return[];if(Bf&&!u){if(l=cw.exec(e))if(m=l[1]){if(S===9)if(c=r.getElementById(m),c&&c.parentNode){if(c.id===m)return o.push(c),o}else return o;else if(r.ownerDocument&&(c=r.ownerDocument.getElementById(m))&&ya(r,c)&&c.id===m)return o.push(c),o}else{if(l[2])return Id.apply(o,r.getElementsByTagName(e)),o;if((m=l[3])&&iu.getElementsByClassName)return Id.apply(o,r.getElementsByClassName(m)),o}if(iu.qsa&&(!Rd||!Rd.test(e))){if(bt=pt=Os,Ct=r,Pt=S===9&&e,S===1&&r.nodeName.toLowerCase()!=="object"){for(nt=lc(e),(pt=r.getAttribute("id"))?bt=pt.replace(xL,"\\$&"):r.setAttribute("id",bt),bt="[id='"+bt+"'] ",_=nt.length;_--;)nt[_]=bt+xb(nt[_]);Ct=fw.test(e)&&vw(r.parentNode)||r,Pt=nt.join(",")}if(Pt)try{return Id.apply(o,Ct.querySelectorAll(Pt)),o}catch(Ft){}finally{pt||r.removeAttribute("id")}}}return bb(e.replace(Cb,"$1"),r,o,u)};function dw(){var e=[];function r(o,u){return e.push(o+" ")>go.cacheLength&&delete r[e.shift()],r[o+" "]=u}return r}function Zc(e){return e[Os]=!0,e}function O2(e,r){var o=r&&e,u=o&&e.nodeType===1&&r.nodeType===1&&(~r.sourceIndex||Rh)-(~e.sourceIndex||Rh);if(u)return u;if(o){for(;o=o.nextSibling;)if(o===r)return-1}return e?1:-1}function ef(e){return function(r){var o=r.nodeName.toLowerCase();return o==="input"&&r.type===e}}function Lv(e){return function(r){var o=r.nodeName.toLowerCase();return(o==="input"||o==="button")&&r.type===e}}function Rv(e){return Zc(function(r){return r=+r,Zc(function(o,u){for(var l,c=e([],o.length,r),m=c.length;m--;)o[l=c[m]]&&(o[l]=!(u[l]=o[l]))})})}function vw(e){return e&&typeof e.getElementsByTagName!==wb&&e}iu=mi.support={},x2=mi.isXML=function(e){var r=e&&(e.ownerDocument||e).documentElement;return r?r.nodeName!=="HTML":!1},Nd=mi.setDocument=function(e){var r,o=e?e.ownerDocument||e:Jc,u=o.defaultView;function l(c){try{return c.top}catch(m){}return null}return o===cc||o.nodeType!==9||!o.documentElement?cc:(cc=o,Ld=o.documentElement,Bf=!x2(o),u&&u!==l(u)&&(u.addEventListener?u.addEventListener("unload",function(){Nd()},!1):u.attachEvent&&u.attachEvent("onunload",function(){Nd()})),iu.attributes=!0,iu.getElementsByTagName=!0,iu.getElementsByClassName=lw.test(o.getElementsByClassName),iu.getById=!0,go.find.ID=function(c,m){if(typeof m.getElementById!==wb&&Bf){var S=m.getElementById(c);return S&&S.parentNode?[S]:[]}},go.filter.ID=function(c){var m=c.replace(Hd,zd);return function(S){return S.getAttribute("id")===m}},go.find.TAG=iu.getElementsByTagName?function(c,m){if(typeof m.getElementsByTagName!==wb)return m.getElementsByTagName(c)}:function(c,m){var S,_=[],nt=0,pt=m.getElementsByTagName(c);if(c==="*"){for(;S=pt[nt++];)S.nodeType===1&&_.push(S);return _}return pt},go.find.CLASS=iu.getElementsByClassName&&function(c,m){if(Bf)return m.getElementsByClassName(c)},Xm=[],Rd=[],iu.disconnectedMatch=!0,Rd=Rd.length&&new RegExp(Rd.join("|")),Xm=Xm.length&&new RegExp(Xm.join("|")),r=lw.test(Ld.compareDocumentPosition),ya=r||lw.test(Ld.contains)?function(c,m){var S=c.nodeType===9?c.documentElement:c,_=m&&m.parentNode;return c===_||!!(_&&_.nodeType===1&&(S.contains?S.contains(_):c.compareDocumentPosition&&c.compareDocumentPosition(_)&16))}:function(c,m){if(m){for(;m=m.parentNode;)if(m===c)return!0}return!1},Bd=r?function(c,m){if(c===m)return Gm=!0,0;var S=!c.compareDocumentPosition-!m.compareDocumentPosition;return S||(S=(c.ownerDocument||c)===(m.ownerDocument||m)?c.compareDocumentPosition(m):1,S&1||!iu.sortDetached&&m.compareDocumentPosition(c)===S?c===o||c.ownerDocument===Jc&&ya(Jc,c)?-1:m===o||m.ownerDocument===Jc&&ya(Jc,m)?1:Dd?Fd.call(Dd,c)-Fd.call(Dd,m):0:S&4?-1:1)}:function(c,m){if(c===m)return Gm=!0,0;var S,_=0,nt=c.parentNode,pt=m.parentNode,bt=[c],Ct=[m];if(!nt||!pt)return c===o?-1:m===o?1:nt?-1:pt?1:Dd?Fd.call(Dd,c)-Fd.call(Dd,m):0;if(nt===pt)return O2(c,m);for(S=c;S=S.parentNode;)bt.unshift(S);for(S=m;S=S.parentNode;)Ct.unshift(S);for(;bt[_]===Ct[_];)_++;return _?O2(bt[_],Ct[_]):bt[_]===Jc?-1:Ct[_]===Jc?1:0},o)},mi.matches=function(e,r){return mi(e,null,null,r)},mi.matchesSelector=function(e,r){if((e.ownerDocument||e)!==cc&&Nd(e),r=r.replace(Ac,"='$1']"),iu.matchesSelector&&Bf&&(!Xm||!Xm.test(r))&&(!Rd||!Rd.test(r)))try{var o=E2.call(e,r);if(o||iu.disconnectedMatch||e.document&&e.document.nodeType!==11)return o}catch(u){}return mi(r,cc,null,[e]).length>0},mi.contains=function(e,r){return(e.ownerDocument||e)!==cc&&Nd(e),ya(e,r)},mi.attr=function(e,r){(e.ownerDocument||e)!==cc&&Nd(e);var o=go.attrHandle[r.toLowerCase()],u=o&&hL.call(go.attrHandle,r.toLowerCase())?o(e,r,!Bf):void 0;return u!==void 0?u:iu.attributes||!Bf?e.getAttribute(r):(u=e.getAttributeNode(r))&&u.specified?u.value:null},mi.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},mi.uniqueSort=function(e){var r,o=[],u=0,l=0;if(Gm=!iu.detectDuplicates,Dd=!iu.sortStable&&e.slice(0),e.sort(Bd),Gm){for(;r=e[l++];)r===e[l]&&(u=o.push(l));for(;u--;)e.splice(o[u],1)}return Dd=null,e},sc=mi.getText=function(e){var r,o="",u=0,l=e.nodeType;if(l){if(l===1||l===9||l===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)o+=sc(e)}else if(l===3||l===4)return e.nodeValue}else for(;r=e[u++];)o+=sc(r);return o},go=mi.selectors={cacheLength:50,createPseudo:Zc,match:Sb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Hd,zd),e[3]=(e[3]||e[4]||e[5]||"").replace(Hd,zd),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||mi.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&mi.error(e[0]),e},PSEUDO:function(e){var r,o=!e[6]&&e[2];return Sb.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":o&&yL.test(o)&&(r=lc(o,!0))&&(r=o.indexOf(")",o.length-r)-o.length)&&(e[0]=e[0].slice(0,r),e[2]=o.slice(0,r)),e.slice(0,3))}},filter:{TAG:function(e){var r=e.replace(Hd,zd).toLowerCase();return e==="*"?function(){return!0}:function(o){return o.nodeName&&o.nodeName.toLowerCase()===r}},CLASS:function(e){var r=A2[e+" "];return r||(r=new RegExp("(^|"+Gi+")"+e+"("+Gi+"|$)"))&&A2(e,function(o){return r.test(typeof o.className=="string"&&o.className||typeof o.getAttribute!==wb&&o.getAttribute("class")||"")})},ATTR:function(e,r,o){return function(u){var l=mi.attr(u,e);return l==null?r==="!=":r?(l+="",r==="="?l===o:r==="!="?l!==o:r==="^="?o&&l.indexOf(o)===0:r==="*="?o&&l.indexOf(o)>-1:r==="$="?o&&l.slice(-o.length)===o:r==="~="?(" "+l+" ").indexOf(o)>-1:r==="|="?l===o||l.slice(0,o.length+1)===o+"-":!1):!0}},CHILD:function(e,r,o,u,l){var c=e.slice(0,3)!=="nth",m=e.slice(-4)!=="last",S=r==="of-type";return u===1&&l===0?function(_){return!!_.parentNode}:function(_,nt,pt){var bt,Ct,Pt,Ft,zt,Vt,rn=c!==m?"nextSibling":"previousSibling",Qt=_.parentNode,On=S&&_.nodeName.toLowerCase(),kn=!pt&&!S;if(Qt){if(c){for(;rn;){for(Pt=_;Pt=Pt[rn];)if(S?Pt.nodeName.toLowerCase()===On:Pt.nodeType===1)return!1;Vt=rn=e==="only"&&!Vt&&"nextSibling"}return!0}if(Vt=[m?Qt.firstChild:Qt.lastChild],m&&kn){for(Ct=Qt[Os]||(Qt[Os]={}),bt=Ct[e]||[],zt=bt[0]===Pf&&bt[1],Ft=bt[0]===Pf&&bt[2],Pt=zt&&Qt.childNodes[zt];Pt=++zt&&Pt&&Pt[rn]||(Ft=zt=0)||Vt.pop();)if(Pt.nodeType===1&&++Ft&&Pt===_){Ct[e]=[Pf,zt,Ft];break}}else if(kn&&(bt=(_[Os]||(_[Os]={}))[e])&&bt[0]===Pf)Ft=bt[1];else for(;(Pt=++zt&&Pt&&Pt[rn]||(Ft=zt=0)||Vt.pop())&&!((S?Pt.nodeName.toLowerCase()===On:Pt.nodeType===1)&&++Ft&&(kn&&((Pt[Os]||(Pt[Os]={}))[e]=[Pf,Ft]),Pt===_)););return Ft-=l,Ft===u||Ft%u===0&&Ft/u>=0}}},PSEUDO:function(e,r){var o,u=go.pseudos[e]||go.setFilters[e.toLowerCase()]||mi.error("unsupported pseudo: "+e);return u[Os]?u(r):u.length>1?(o=[e,e,"",r],go.setFilters.hasOwnProperty(e.toLowerCase())?Zc(function(l,c){for(var m,S=u(l,r),_=S.length;_--;)m=Fd.call(l,S[_]),l[m]=!(c[m]=S[_])}):function(l){return u(l,0,o)}):u}},pseudos:{not:Zc(function(e){var r=[],o=[],u=ow(e.replace(Cb,"$1"));return u[Os]?Zc(function(l,c,m,S){for(var _,nt=u(l,null,S,[]),pt=l.length;pt--;)(_=nt[pt])&&(l[pt]=!(c[pt]=_))}):function(l,c,m){return r[0]=l,u(r,null,m,o),r[0]=null,!o.pop()}}),has:Zc(function(e){return function(r){return mi(e,r).length>0}}),contains:Zc(function(e){return e=e.replace(Hd,zd),function(r){return(r.textContent||r.innerText||sc(r)).indexOf(e)>-1}}),lang:Zc(function(e){return wL.test(e||"")||mi.error("unsupported lang: "+e),e=e.replace(Hd,zd).toLowerCase(),function(r){var o;do if(o=Bf?r.lang:r.getAttribute("xml:lang")||r.getAttribute("lang"))return o=o.toLowerCase(),o===e||o.indexOf(e+"-")===0;while((r=r.parentNode)&&r.nodeType===1);return!1}}),target:function(e){var r=window.location&&window.location.hash;return r&&r.slice(1)===e.id},root:function(e){return e===Ld},focus:function(e){return e===cc.activeElement&&(!cc.hasFocus||cc.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var r=e.nodeName.toLowerCase();return r==="input"&&!!e.checked||r==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!go.pseudos.empty(e)},header:function(e){return SL.test(e.nodeName)},input:function(e){return CL.test(e.nodeName)},button:function(e){var r=e.nodeName.toLowerCase();return r==="input"&&e.type==="button"||r==="button"},text:function(e){var r;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((r=e.getAttribute("type"))==null||r.toLowerCase()==="text")},first:Rv(function(){return[0]}),last:Rv(function(e,r){return[r-1]}),eq:Rv(function(e,r,o){return[o<0?o+r:o]}),even:Rv(function(e,r){for(var o=0;o<r;o+=2)e.push(o);return e}),odd:Rv(function(e,r){for(var o=1;o<r;o+=2)e.push(o);return e}),lt:Rv(function(e,r,o){for(var u=o<0?o+r:o;--u>=0;)e.push(u);return e}),gt:Rv(function(e,r,o){for(var u=o<0?o+r:o;++u<r;)e.push(u);return e})}},go.pseudos.nth=go.pseudos.eq,Fn(["radio","checkbox","file","password","image"],function(e){go.pseudos[e]=ef(e)}),Fn(["submit","reset"],function(e){go.pseudos[e]=Lv(e)});function M2(){}M2.prototype=go.filters=go.pseudos,go.setFilters=new M2,lc=mi.tokenize=function(e,r){var o,u,l,c,m,S,_,nt=yb[e+" "];if(nt)return r?0:nt.slice(0);for(m=e,S=[],_=go.preFilter;m;){(!o||(u=bL.exec(m)))&&(u&&(m=m.slice(u[0].length)||m),S.push(l=[])),o=!1,(u=_2.exec(m))&&(o=u.shift(),l.push({value:o,type:u[0].replace(Cb," ")}),m=m.slice(o.length));for(c in go.filter)go.filter.hasOwnProperty(c)&&(u=Sb[c].exec(m))&&(!_[c]||(u=_[c](u)))&&(o=u.shift(),l.push({value:o,type:c,matches:u}),m=m.slice(o.length));if(!o)break}return r?m.length:m?mi.error(e):yb(e,S).slice(0)};function xb(e){for(var r=0,o=e.length,u="";r<o;r++)u+=e[r].value;return u}function mw(e,r,o){var u=r.dir,l=o&&u==="parentNode",c=k2++;return r.first?function(m,S,_){for(;m=m[u];)if(m.nodeType===1||l)return e(m,S,_)}:function(m,S,_){var nt,pt,bt=[Pf,c];if(_){for(;m=m[u];)if((m.nodeType===1||l)&&e(m,S,_))return!0}else for(;m=m[u];)if(m.nodeType===1||l){if(pt=m[Os]||(m[Os]={}),(nt=pt[u])&&nt[0]===Pf&&nt[1]===c)return bt[2]=nt[2];if(pt[u]=bt,bt[2]=e(m,S,_))return!0}}}function Bh(e){return e.length>1?function(r,o,u){for(var l=e.length;l--;)if(!e[l](r,o,u))return!1;return!0}:e[0]}function EL(e,r,o){for(var u=0,l=r.length;u<l;u++)mi(e,r[u],o);return o}function Eb(e,r,o,u,l){for(var c,m=[],S=0,_=e.length,nt=r!=null;S<_;S++)(c=e[S])&&(!o||o(c,u,l))&&(m.push(c),nt&&r.push(S));return m}function Qm(e,r,o,u,l,c){return u&&!u[Os]&&(u=Qm(u)),l&&!l[Os]&&(l=Qm(l,c)),Zc(function(m,S,_,nt){var pt,bt,Ct,Pt=[],Ft=[],zt=S.length,Vt=m||EL(r||"*",_.nodeType?[_]:_,[]),rn=e&&(m||!r)?Eb(Vt,Pt,e,_,nt):Vt,Qt=o?l||(m?e:zt||u)?[]:S:rn;if(o&&o(rn,Qt,_,nt),u)for(pt=Eb(Qt,Ft),u(pt,[],_,nt),bt=pt.length;bt--;)(Ct=pt[bt])&&(Qt[Ft[bt]]=!(rn[Ft[bt]]=Ct));if(m){if(l||e){if(l){for(pt=[],bt=Qt.length;bt--;)(Ct=Qt[bt])&&pt.push(rn[bt]=Ct);l(null,Qt=[],pt,nt)}for(bt=Qt.length;bt--;)(Ct=Qt[bt])&&(pt=l?Fd.call(m,Ct):Pt[bt])>-1&&(m[pt]=!(S[pt]=Ct))}}else Qt=Eb(Qt===S?Qt.splice(zt,Qt.length):Qt),l?l(null,S,Qt,nt):Id.apply(S,Qt)})}function pw(e){for(var r,o,u,l=e.length,c=go.relative[e[0].type],m=c||go.relative[" "],S=c?1:0,_=mw(function(bt){return bt===r},m,!0),nt=mw(function(bt){return Fd.call(r,bt)>-1},m,!0),pt=[function(bt,Ct,Pt){var Ft=!c&&(Pt||Ct!==Md)||((r=Ct).nodeType?_(bt,Ct,Pt):nt(bt,Ct,Pt));return r=null,Ft}];S<l;S++)if(o=go.relative[e[S].type])pt=[mw(Bh(pt),o)];else{if(o=go.filter[e[S].type].apply(null,e[S].matches),o[Os]){for(u=++S;u<l&&!go.relative[e[u].type];u++);return Qm(S>1&&Bh(pt),S>1&&xb(e.slice(0,S-1).concat({value:e[S-2].type===" "?"*":""})).replace(Cb,"$1"),o,S<u&&pw(e.slice(S,u)),u<l&&pw(e=e.slice(u)),u<l&&xb(e))}pt.push(o)}return Bh(pt)}function kL(e,r){var o=r.length>0,u=e.length>0,l=function(c,m,S,_,nt){var pt,bt,Ct,Pt=0,Ft="0",zt=c&&[],Vt=[],rn=Md,Qt=c||u&&go.find.TAG("*",nt),On=Pf+=rn==null?1:Math.random()||.1,kn=Qt.length;for(nt&&(Md=m!==cc&&m);Ft!==kn&&(pt=Qt[Ft])!=null;Ft++){if(u&&pt){for(bt=0;Ct=e[bt++];)if(Ct(pt,m,S)){_.push(pt);break}nt&&(Pf=On)}o&&((pt=!Ct&&pt)&&Pt--,c&&zt.push(pt))}if(Pt+=Ft,o&&Ft!==Pt){for(bt=0;Ct=r[bt++];)Ct(zt,Vt,m,S);if(c){if(Pt>0)for(;Ft--;)zt[Ft]||Vt[Ft]||(Vt[Ft]=iw.call(_));Vt=Eb(Vt)}Id.apply(_,Vt),nt&&!c&&Vt.length>0&&Pt+r.length>1&&mi.uniqueSort(_)}return nt&&(Pf=On,Md=rn),zt};return o?Zc(l):l}ow=mi.compile=function(e,r){var o,u=[],l=[],c=Ym[e+" "];if(!c){for(r||(r=lc(e)),o=r.length;o--;)c=pw(r[o]),c[Os]?u.push(c):l.push(c);c=Ym(e,kL(l,u)),c.selector=e}return c},bb=mi.select=function(e,r,o,u){var l,c,m,S,_,nt=typeof e=="function"&&e,pt=!u&&lc(e=nt.selector||e);if(o=o||[],pt.length===1){if(c=pt[0]=pt[0].slice(0),c.length>2&&(m=c[0]).type==="ID"&&iu.getById&&r.nodeType===9&&Bf&&go.relative[c[1].type]){if(r=(go.find.ID(m.matches[0].replace(Hd,zd),r)||[])[0],r)nt&&(r=r.parentNode);else return o;e=e.slice(c.shift().value.length)}for(l=Sb.needsContext.test(e)?0:c.length;l--&&(m=c[l],!go.relative[S=m.type]);)if((_=go.find[S])&&(u=_(m.matches[0].replace(Hd,zd),fw.test(c[0].type)&&vw(r.parentNode)||r))){if(c.splice(l,1),e=u.length&&xb(c),!e)return Id.apply(o,u),o;break}}return(nt||ow(e,pt))(u,r,!Bf,o,fw.test(e)&&vw(r.parentNode)||r),o},iu.sortStable=Os.split("").sort(Bd).join("")===Os,iu.detectDuplicates=!!Gm,Nd(),iu.sortDetached=!0;var D2=document,Cu=Array.prototype.push,AL=Array.prototype.slice,cu=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Hs=Km.Event,Bv=Zn.makeMap("children,contents,next,prev"),zl=function(e){return typeof e!="undefined"},hw=function(e){return typeof e=="string"},$d=function(e){return e&&e===e.window},Jm=function(e,r){r=r||D2;var o=r.createElement("div"),u=r.createDocumentFragment();o.innerHTML=e;for(var l;l=o.firstChild;)u.appendChild(l);return u},Zm=function(e,r,o,u){var l;if(hw(r))r=Jm(r,kb(e[0]));else if(r.length&&!r.nodeType){if(r=bo.makeArray(r),u)for(l=r.length-1;l>=0;l--)Zm(e,r[l],o,u);else for(l=0;l<r.length;l++)Zm(e,r[l],o,u);return e}if(r.nodeType)for(l=e.length;l--;)o.call(e[l],r);return e},N2=function(e,r){return e&&r&&(" "+e.className+" ").indexOf(" "+r+" ")!==-1},L2=function(e,r,o){var u,l;return r=bo(r)[0],e.each(function(){var c=this;(!o||u!==c.parentNode)&&(u=c.parentNode,l=r.cloneNode(!1),c.parentNode.insertBefore(l,c)),l.appendChild(c)}),e},TL=Zn.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),_L=Zn.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),OL={for:"htmlFor",class:"className",readonly:"readOnly"},ML={float:"cssFloat"},gw={},bw={},ds=function(e,r){return new bo.fn.init(e,r)},yw=function(e,r){var o;if(r.indexOf)return r.indexOf(e);for(o=r.length;o--;)if(r[o]===e)return o;return-1},DL=/^\s*|\s*$/g,R2=function(e){return e==null?"":(""+e).replace(DL,"")},uu=function(e,r){var o,u,l,c;if(e)if(o=e.length,o===void 0){for(u in e)if(e.hasOwnProperty(u)&&(c=e[u],r.call(c,u,c)===!1))break}else for(l=0;l<o&&(c=e[l],r.call(c,l,c)!==!1);l++);return e},$l=function(e,r){var o=[];return uu(e,function(u,l){r(l,u)&&o.push(l)}),o},kb=function(e){return e?e.nodeType===9?e:e.ownerDocument:D2};ds.fn=ds.prototype={constructor:ds,selector:"",context:null,length:0,init:function(e,r){var o=this,u,l;if(!e)return o;if(e.nodeType)return o.context=o[0]=e,o.length=1,o;if(r&&r.nodeType)o.context=r;else{if(r)return bo(e).attr(r);o.context=r=document}if(hw(e))if(o.selector=e,e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?u=[null,e,null]:u=cu.exec(e),u)if(u[1])for(l=Jm(e,kb(r)).firstChild;l;)Cu.call(o,l),l=l.nextSibling;else{if(l=kb(r).getElementById(u[2]),!l)return o;if(l.id!==u[2])return o.find(e);o.length=1,o[0]=l}else return bo(r).find(e);else this.add(e,!1);return o},toArray:function(){return Zn.toArray(this)},add:function(e,r){var o=this,u,l;if(hw(e))return o.add(bo(e));if(r!==!1)for(u=bo.unique(o.toArray().concat(bo.makeArray(e))),o.length=u.length,l=0;l<u.length;l++)o[l]=u[l];else Cu.apply(o,bo.makeArray(e));return o},attr:function(e,r){var o=this,u;if(typeof e=="object")uu(e,function(l,c){o.attr(l,c)});else if(zl(r))this.each(function(){var l;if(this.nodeType===1){if(l=gw[e],l&&l.set){l.set(this,r);return}r===null?this.removeAttribute(e,2):this.setAttribute(e,r,2)}});else{if(o[0]&&o[0].nodeType===1){if(u=gw[e],u&&u.get)return u.get(o[0],e);if(_L[e])return o.prop(e)?e:void 0;r=o[0].getAttribute(e,2),r===null&&(r=void 0)}return r}return o},removeAttr:function(e){return this.attr(e,null)},prop:function(e,r){var o=this;if(e=OL[e]||e,typeof e=="object")uu(e,function(u,l){o.prop(u,l)});else if(zl(r))this.each(function(){this.nodeType===1&&(this[e]=r)});else return o[0]&&o[0].nodeType&&e in o[0]?o[0][e]:r;return o},css:function(e,r){var o=this,u,l,c=function(S){return S.replace(/-(\D)/g,function(_,nt){return nt.toUpperCase()})},m=function(S){return S.replace(/[A-Z]/g,function(_){return"-"+_})};if(typeof e=="object")uu(e,function(S,_){o.css(S,_)});else if(zl(r))e=c(e),typeof r=="number"&&!TL[e]&&(r=r.toString()+"px"),o.each(function(){var S=this.style;if(l=bw[e],l&&l.set){l.set(this,r);return}try{this.style[ML[e]||e]=r}catch(_){}(r===null||r==="")&&(S.removeProperty?S.removeProperty(m(e)):S.removeAttribute(e))});else{if(u=o[0],l=bw[e],l&&l.get)return l.get(u);if(u.ownerDocument.defaultView)try{return u.ownerDocument.defaultView.getComputedStyle(u,null).getPropertyValue(m(e))}catch(S){return}else return u.currentStyle?u.currentStyle[c(e)]:""}return o},remove:function(){for(var e=this,r,o=this.length;o--;)r=e[o],Hs.clean(r),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=this,r,o=this.length;o--;)for(r=e[o];r.firstChild;)r.removeChild(r.firstChild);return this},html:function(e){var r=this,o;if(zl(e)){o=r.length;try{for(;o--;)r[o].innerHTML=e}catch(u){bo(r[o]).empty().append(e)}return r}return r[0]?r[0].innerHTML:""},text:function(e){var r=this,o;if(zl(e)){for(o=r.length;o--;)"innerText"in r[o]?r[o].innerText=e:r[0].textContent=e;return r}return r[0]?r[0].innerText||r[0].textContent:""},append:function(){return Zm(this,arguments,function(e){(this.nodeType===1||this.host&&this.host.nodeType===1)&&this.appendChild(e)})},prepend:function(){return Zm(this,arguments,function(e){(this.nodeType===1||this.host&&this.host.nodeType===1)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?Zm(e,arguments,function(r){this.parentNode.insertBefore(r,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?Zm(e,arguments,function(r){this.parentNode.insertBefore(r,this.nextSibling)},!0):e},appendTo:function(e){return bo(e).append(this),this},prependTo:function(e){return bo(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return L2(this,e)},wrapAll:function(e){return L2(this,e,!0)},wrapInner:function(e){return this.each(function(){bo(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){bo(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),bo(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,r){var o=this;return typeof e!="string"||(e.indexOf(" ")!==-1?uu(e.split(" "),function(){o.toggleClass(this,r)}):o.each(function(u,l){var c=N2(l,e);if(c!==r){var m=l.className;c?l.className=R2((" "+m+" ").replace(" "+e+" "," ")):l.className+=m?" "+e:e}})),o},hasClass:function(e){return N2(this[0],e)},each:function(e){return uu(this,e)},on:function(e,r){return this.each(function(){Hs.bind(this,e,r)})},off:function(e,r){return this.each(function(){Hs.unbind(this,e,r)})},trigger:function(e){return this.each(function(){typeof e=="object"?Hs.fire(this,e.type,e):Hs.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return bo(AL.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var r,o,u=[];for(r=0,o=this.length;r<o;r++)bo.find(e,this[r],u);return bo(u)},filter:function(e){return bo(typeof e=="function"?$l(this.toArray(),function(r,o){return e(o,r)}):bo.filter(e,this.toArray()))},closest:function(e){var r=[];return e instanceof bo&&(e=e[0]),this.each(function(o,u){for(;u;){if(typeof e=="string"&&bo(u).is(e)){r.push(u);break}else if(u===e){r.push(u);break}u=u.parentNode}}),bo(r)},offset:function(e){var r,o,u,l=0,c=0,m;return e?this.css(e):(r=this[0],r&&(o=r.ownerDocument,u=o.documentElement,r.getBoundingClientRect&&(m=r.getBoundingClientRect(),l=m.left+(u.scrollLeft||o.body.scrollLeft)-u.clientLeft,c=m.top+(u.scrollTop||o.body.scrollTop)-u.clientTop)),{left:l,top:c})},push:Cu,sort:Array.prototype.sort,splice:Array.prototype.splice},Zn.extend(ds,{extend:Zn.extend,makeArray:function(e){return $d(e)||e.nodeType?[e]:Zn.toArray(e)},inArray:yw,isArray:Zn.isArray,each:uu,trim:R2,grep:$l,find:mi,expr:mi.selectors,unique:mi.uniqueSort,text:mi.getText,contains:mi.contains,filter:function(e,r,o){var u=r.length;for(o&&(e=":not("+e+")");u--;)r[u].nodeType!==1&&r.splice(u,1);return r.length===1?r=bo.find.matchesSelector(r[0],e)?[r[0]]:[]:r=bo.find.matches(e,r),r}});var ww=function(e,r,o){var u=[],l=e[r];for(typeof o!="string"&&o instanceof bo&&(o=o[0]);l&&l.nodeType!==9&&!(o!==void 0&&(l===o||typeof o=="string"&&bo(l).is(o)));)l.nodeType===1&&u.push(l),l=l[r];return u},Ab=function(e,r,o,u){var l=[];for(u instanceof bo&&(u=u[0]);e;e=e[r])if(!(o&&e.nodeType!==o)){if(u!==void 0&&(e===u||typeof u=="string"&&bo(e).is(u)))break;l.push(e)}return l},B2=function(e,r,o){for(e=e[r];e;e=e[r])if(e.nodeType===o)return e;return null};uu({parent:function(e){var r=e.parentNode;return r&&r.nodeType!==11?r:null},parents:function(e){return ww(e,"parentNode")},next:function(e){return B2(e,"nextSibling",1)},prev:function(e){return B2(e,"previousSibling",1)},children:function(e){return Ab(e.firstChild,"nextSibling",1)},contents:function(e){return Zn.toArray((e.nodeName==="iframe"?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,r){ds.fn[e]=function(o){var u=this,l=[];u.each(function(){var m=r.call(l,this,o,l);m&&(bo.isArray(m)?l.push.apply(l,m):l.push(m))}),this.length>1&&(Bv[e]||(l=bo.unique(l)),e.indexOf("parents")===0&&(l=l.reverse()));var c=bo(l);return o?c.filter(o):c}}),uu({parentsUntil:function(e,r){return ww(e,"parentNode",r)},nextUntil:function(e,r){return Ab(e,"nextSibling",1,r).slice(1)},prevUntil:function(e,r){return Ab(e,"previousSibling",1,r).slice(1)}},function(e,r){ds.fn[e]=function(o,u){var l=this,c=[];l.each(function(){var S=r.call(c,this,o,c);S&&(bo.isArray(S)?c.push.apply(c,S):c.push(S))}),this.length>1&&(c=bo.unique(c),(e.indexOf("parents")===0||e==="prevUntil")&&(c=c.reverse()));var m=bo(c);return u?m.filter(u):m}}),ds.fn.is=function(e){return!!e&&this.filter(e).length>0},ds.fn.init.prototype=ds.fn,ds.overrideDefaults=function(e){var r,o=function(u,l){return r=r||e(),arguments.length===0&&(u=r.element),l||(l=r.context),new o.fn.init(u,l)};return bo.extend(o,this),o},ds.attrHooks=gw,ds.cssHooks=bw;var bo=ds,ep=Zn.each,Tb=Zn.grep,Cw=Ra.ie,Su=/^([a-z0-9],?)+$/i,tf=function(e,r,o){var u=r.keep_values,l={set:function(m,S,_){r.url_converter&&S!==null&&(S=r.url_converter.call(r.url_converter_scope||o(),S,_,m[0])),m.attr("data-mce-"+_,S).attr(_,S)},get:function(m,S){return m.attr("data-mce-"+S)||m.attr(S)}},c={style:{set:function(m,S){if(S!==null&&typeof S=="object"){m.css(S);return}u&&m.attr("data-mce-style",S),S!==null&&typeof S=="string"?(m.removeAttr("style"),m.css(e.parse(S))):m.attr("style",S)},get:function(m){var S=m.attr("data-mce-style")||m.attr("style");return S=e.serialize(e.parse(S),m[0].nodeName),S}}};return u&&(c.href=c.src=l),c},P2=function(e,r){var o=r.attr("style"),u=e.serialize(e.parse(o),r[0].nodeName);u||(u=null),r.attr("data-mce-style",u)},Pv=function(e,r){var o=0,u,l;if(e)for(u=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)l=e.nodeType,!(r&&l===3&&(l===u||!e.nodeValue.length))&&(o++,u=l);return o},Oi=function(e,r){r===void 0&&(r={});var o={},u=window,l={},c=0,m=!0,S=!0,_=Kc.forElement(lt.fromDom(e),{contentCssCors:r.contentCssCors,referrerPolicy:r.referrerPolicy}),nt=[],pt=r.schema?r.schema:Hl({}),bt=Lh({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),Ct=r.ownEvents?new Km:Km.Event,Pt=pt.getBlockElements(),Ft=bo.overrideDefaults(function(){return{context:e,element:Cm.getRoot()}}),zt=function(yn){if(typeof yn=="string")return!!Pt[yn];if(yn){var qn=yn.nodeType;if(qn)return!!(qn===1&&Pt[yn.nodeName])}return!1},Vt=function(yn){return yn&&e&&Ye(yn)?e.getElementById(yn):yn},rn=function(yn){return Ft(typeof yn=="string"?Vt(yn):yn)},Qt=function(yn,qn,Lr){var jr,yo,Go=rn(yn);return Go.length&&(jr=Zf[qn],jr&&jr.get?yo=jr.get(Go,qn):yo=Go.attr(qn)),typeof yo=="undefined"&&(yo=Lr||""),yo},On=function(yn){var qn=Vt(yn);return qn?qn.attributes:[]},kn=function(yn,qn,Lr){Lr===""&&(Lr=null);var jr=rn(yn),yo=jr.attr(qn);if(jr.length){var Go=Zf[qn];Go&&Go.set?Go.set(jr,Lr,qn):jr.attr(qn,Lr),yo!==Lr&&r.onSetAttrib&&r.onSetAttrib({attrElm:jr,attrName:qn,attrValue:Lr})}},mn=function(yn,qn){if(!Cw||yn.nodeType!==1||qn)return yn.cloneNode(qn);var Lr=e.createElement(yn.nodeName);return ep(On(yn),function(jr){kn(Lr,jr.nodeName,Qt(yn,jr.nodeName))}),Lr},Ln=function(){return r.root_element||e.body},lr=function(yn){var qn=Ll(yn);return{x:qn.x,y:qn.y,w:qn.width,h:qn.height}},Tr=function(yn,qn){return By(e.body,Vt(yn),qn)},$a=function(yn,qn,Lr){var jr=Ye(qn)?rn(yn).css(qn,Lr):rn(yn).css(qn);r.update_styles&&P2(bt,jr)},Zr=function(yn,qn){var Lr=rn(yn).css(qn);r.update_styles&&P2(bt,Lr)},vr=function(yn,qn,Lr){var jr=rn(yn);return Lr?jr.css(qn):(qn=qn.replace(/-(\D)/g,function(yo,Go){return Go.toUpperCase()}),qn==="float"&&(qn=Ra.browser.isIE()?"styleFloat":"cssFloat"),jr[0]&&jr[0].style?jr[0].style[qn]:void 0)},_a=function(yn){var qn,Lr;return yn=Vt(yn),qn=vr(yn,"width"),Lr=vr(yn,"height"),qn.indexOf("px")===-1&&(qn=0),Lr.indexOf("px")===-1&&(Lr=0),{w:parseInt(qn,10)||yn.offsetWidth||yn.clientWidth,h:parseInt(Lr,10)||yn.offsetHeight||yn.clientHeight}},Or=function(yn){yn=Vt(yn);var qn=Tr(yn),Lr=_a(yn);return{x:qn.x,y:qn.y,w:Lr.w,h:Lr.h}},Jr=function(yn,qn){var Lr;if(!yn)return!1;if(!Array.isArray(yn)){if(qn==="*")return yn.nodeType===1;if(Su.test(qn)){var jr=qn.toLowerCase().split(/,/),yo=yn.nodeName.toLowerCase();for(Lr=jr.length-1;Lr>=0;Lr--)if(jr[Lr]===yo)return!0;return!1}if(yn.nodeType&&yn.nodeType!==1)return!1}var Go=Array.isArray(yn)?yn:[yn];return mi(qn,Go[0].ownerDocument||Go[0],null,Go).length>0},Dr=function(yn,qn,Lr,jr){var yo=[],Go,Di=Vt(yn);for(jr=jr===void 0,Lr=Lr||(Ln().nodeName!=="BODY"?Ln().parentNode:null),Zn.is(qn,"string")&&(Go=qn,qn==="*"?qn=function(Sv){return Sv.nodeType===1}:qn=function(Sv){return Jr(Sv,Go)});Di&&!(Di===Lr||et(Di.nodeType)||bh(Di)||So(Di));){if(!qn||typeof qn=="function"&&qn(Di))if(jr)yo.push(Di);else return[Di];Di=Di.parentNode}return jr?yo:null},Ur=function(yn,qn,Lr){var jr=Dr(yn,qn,Lr,!1);return jr&&jr.length>0?jr[0]:null},fa=function(yn,qn,Lr){var jr=qn;if(yn){for(typeof qn=="string"&&(jr=function(yo){return Jr(yo,qn)}),yn=yn[Lr];yn;yn=yn[Lr])if(typeof jr=="function"&&jr(yn))return yn}return null},Sr=function(yn,qn){return fa(yn,qn,"nextSibling")},ra=function(yn,qn){return fa(yn,qn,"previousSibling")},xo=function(yn,qn){return mi(yn,Vt(qn)||r.root_element||e,[])},Vo=function(yn,qn,Lr){var jr,yo=typeof yn=="string"?Vt(yn):yn;if(!yo)return!1;if(Zn.isArray(yo)&&(yo.length||yo.length===0))return jr=[],ep(yo,function(Di,Sv){Di&&jr.push(qn.call(Lr,typeof Di=="string"?Vt(Di):Di,Sv))}),jr;var Go=Lr||this;return qn.call(Go,yo)},zo=function(yn,qn){rn(yn).each(function(Lr,jr){ep(qn,function(yo,Go){kn(jr,Go,yo)})})},Iu=function(yn,qn){var Lr=rn(yn);Cw?Lr.each(function(jr,yo){if(yo.canHaveHTML!==!1){for(;yo.firstChild;)yo.removeChild(yo.firstChild);try{yo.innerHTML="<br>"+qn,yo.removeChild(yo.firstChild)}catch(Go){bo("<div></div>").html("<br>"+qn).contents().slice(1).appendTo(yo)}return qn}}):Lr.html(qn)},Ri=function(yn,qn,Lr,jr,yo){return Vo(yn,function(Go){var Di=typeof qn=="string"?e.createElement(qn):qn;return zo(Di,Lr),jr&&(typeof jr!="string"&&jr.nodeType?Di.appendChild(jr):typeof jr=="string"&&Iu(Di,jr)),yo?Di:Go.appendChild(Di)})},Ms=function(yn,qn,Lr){return Ri(e.createElement(yn),yn,qn,Lr,!0)},Tl=Yc.decode,xr=Yc.encodeAllRaw,Fr=function(yn,qn,Lr){var jr="",yo;jr+="<"+yn;for(yo in qn)Yo(qn,yo)&&(jr+=" "+yo+'="'+xr(qn[yo])+'"');return typeof Lr!="undefined"?jr+">"+Lr+"</"+yn+">":jr+" />"},Oa=function(yn){var qn,Lr=e.createElement("div"),jr=e.createDocumentFragment();for(jr.appendChild(Lr),yn&&(Lr.innerHTML=yn);qn=Lr.firstChild;)jr.appendChild(qn);return jr.removeChild(Lr),jr},zn=function(yn,qn){var Lr=rn(yn);return qn?Lr.each(function(){for(var jr;jr=this.firstChild;)jr.nodeType===3&&jr.data.length===0?this.removeChild(jr):this.parentNode.insertBefore(jr,this)}).remove():Lr.remove(),Lr.length>1?Lr.toArray():Lr[0]},_r=function(yn){return Vo(yn,function(qn){var Lr,jr=qn.attributes;for(Lr=jr.length-1;Lr>=0;Lr--)qn.removeAttributeNode(jr.item(Lr))})},kr=function(yn){return bt.parse(yn)},Na=function(yn,qn){return bt.serialize(yn,qn)},Ia=function(yn){var qn,Lr;if(Cm!==Oi.DOM&&e===document){if(o[yn])return;o[yn]=!0}Lr=e.getElementById("mceDefaultStyles"),Lr||(Lr=e.createElement("style"),Lr.id="mceDefaultStyles",Lr.type="text/css",qn=e.getElementsByTagName("head")[0],qn.firstChild?qn.insertBefore(Lr,qn.firstChild):qn.appendChild(Lr)),Lr.styleSheet?Lr.styleSheet.cssText+=yn:Lr.appendChild(e.createTextNode(yn))},ii=function(yn){yn||(yn=""),Fn(yn.split(","),function(qn){l[qn]=!0,_.load(qn,it)})},Au=function(yn,qn,Lr){rn(yn).toggleClass(qn,Lr).each(function(){this.className===""&&bo(this).attr("class",null)})},mu=function(yn,qn){rn(yn).addClass(qn)},ys=function(yn,qn){Au(yn,qn,!1)},ws=function(yn,qn){return rn(yn).hasClass(qn)},Xs=function(yn){rn(yn).show()},pu=function(yn){rn(yn).hide()},Xl=function(yn){return rn(yn).css("display")==="none"},Ys=function(yn){return(yn||"mce_")+c++},Jf=function(yn){var qn=typeof yn=="string"?Vt(yn):yn;return ma(qn)?qn.outerHTML:bo("<div></div>").append(bo(qn).clone()).html()},Uo=function(yn,qn){rn(yn).each(function(){try{if("outerHTML"in this){this.outerHTML=qn;return}}catch(Lr){}zn(bo(this).html(qn),!0)})},Ci=function(yn,qn){var Lr=Vt(qn);return Vo(yn,function(jr){var yo=Lr.parentNode,Go=Lr.nextSibling;return Go?yo.insertBefore(jr,Go):yo.appendChild(jr),jr})},Tu=function(yn,qn,Lr){return Vo(qn,function(jr){return Zn.is(jr,"array")&&(yn=yn.cloneNode(!0)),Lr&&ep(Tb(jr.childNodes),function(yo){yn.appendChild(yo)}),jr.parentNode.replaceChild(yn,jr)})},Ef=function(yn,qn){var Lr;return yn.nodeName!==qn.toUpperCase()&&(Lr=Ms(qn),ep(On(yn),function(jr){kn(Lr,jr.nodeName,Qt(yn,jr.nodeName))}),Tu(Lr,yn,!0)),Lr||yn},kf=function(yn,qn){for(var Lr=yn,jr;Lr;){for(jr=qn;jr&&Lr!==jr;)jr=jr.parentNode;if(Lr===jr)break;Lr=Lr.parentNode}return!Lr&&yn.ownerDocument?yn.ownerDocument.documentElement:Lr},Af=function(yn){return bt.toHex(Zn.trim(yn))},Cv=function(yn){if(ma(yn)){var qn=yn.nodeName.toLowerCase()==="a"&&!Qt(yn,"href")&&Qt(yn,"id");if(Qt(yn,"name")||Qt(yn,"data-mce-bookmark")||qn)return!0}return!1},JE=function(yn,qn){var Lr,jr,yo=0;if(Cv(yn))return!1;if(yn=yn.firstChild,yn){var Go=new vi(yn,yn.parentNode),Di=pt?pt.getWhiteSpaceElements():{};qn=qn||(pt?pt.getNonEmptyElements():null);do{if(Lr=yn.nodeType,ma(yn)){var Sv=yn.getAttribute("data-mce-bogus");if(Sv){yn=Go.next(Sv==="all");continue}if(jr=yn.nodeName.toLowerCase(),qn&&qn[jr]){if(jr==="br"){yo++,yn=Go.next();continue}return!1}if(Cv(yn))return!1}if(Lr===8||Lr===3&&!Xc(yn.nodeValue)||Lr===3&&yn.parentNode&&Di[yn.parentNode.nodeName]&&Xc(yn.nodeValue))return!1;yn=Go.next()}while(yn)}return yo<=1},ZE=function(){return e.createRange()},D6=function(yn,qn,Lr){var jr=ZE(),yo,Go,Di;if(yn&&qn)return jr.setStart(yn.parentNode,Pv(yn)),jr.setEnd(qn.parentNode,Pv(qn)),yo=jr.extractContents(),jr=ZE(),jr.setStart(qn.parentNode,Pv(qn)+1),jr.setEnd(yn.parentNode,Pv(yn)+1),Go=jr.extractContents(),Di=yn.parentNode,Di.insertBefore(Yy(Cm,yo),yn),Lr?Di.insertBefore(Lr,yn):Di.insertBefore(qn,yn),Di.insertBefore(Yy(Cm,Go),yn),zn(yn),Lr||qn},Ey=function(yn,qn,Lr,jr){if(Zn.isArray(yn)){for(var yo=yn.length,Go=[];yo--;)Go[yo]=Ey(yn[yo],qn,Lr,jr);return Go}r.collect&&(yn===e||yn===u)&&nt.push([yn,qn,Lr,jr]);var Di=Ct.bind(yn,qn,Lr,jr||Cm);return Di},ky=function(yn,qn,Lr){if(Zn.isArray(yn)){for(var jr=yn.length,yo=[];jr--;)yo[jr]=ky(yn[jr],qn,Lr);return yo}else{if(nt.length>0&&(yn===e||yn===u))for(var jr=nt.length;jr--;){var Go=nt[jr];yn===Go[0]&&(!qn||qn===Go[1])&&(!Lr||Lr===Go[2])&&Ct.unbind(Go[0],Go[1],Go[2])}return Ct.unbind(yn,qn,Lr)}},N6=function(yn,qn,Lr){return Ct.fire(yn,qn,Lr)},EN=function(yn){if(yn&&ma(yn)){var qn=yn.getAttribute("data-mce-contenteditable");return qn&&qn!=="inherit"?qn:yn.contentEditable!=="inherit"?yn.contentEditable:null}else return null},L6=function(yn){for(var qn=Ln(),Lr=null;yn&&yn!==qn&&(Lr=EN(yn),Lr===null);yn=yn.parentNode);return Lr},R6=function(){if(nt.length>0)for(var yn=nt.length;yn--;){var qn=nt[yn];Ct.unbind(qn[0],qn[1],qn[2])}Nr(l,function(Lr,jr){_.unload(jr),delete l[jr]}),mi.setDocument&&mi.setDocument()},B6=function(yn,qn){if(Cw){for(;yn;){if(qn===yn)return!0;yn=yn.parentNode}return!1}else return yn===qn||qn.contains(yn)},P6=function(yn){return"startContainer: "+yn.startContainer.nodeName+", startOffset: "+yn.startOffset+", endContainer: "+yn.endContainer.nodeName+", endOffset: "+yn.endOffset},Cm={doc:e,settings:r,win:u,files:l,stdMode:m,boxModel:S,styleSheetLoader:_,boundEvents:nt,styles:bt,schema:pt,events:Ct,isBlock:zt,$:Ft,$$:rn,root:null,clone:mn,getRoot:Ln,getViewPort:lr,getRect:Or,getSize:_a,getParent:Ur,getParents:Dr,get:Vt,getNext:Sr,getPrev:ra,select:xo,is:Jr,add:Ri,create:Ms,createHTML:Fr,createFragment:Oa,remove:zn,setStyle:$a,getStyle:vr,setStyles:Zr,removeAllAttribs:_r,setAttrib:kn,setAttribs:zo,getAttrib:Qt,getPos:Tr,parseStyle:kr,serializeStyle:Na,addStyle:Ia,loadCSS:ii,addClass:mu,removeClass:ys,hasClass:ws,toggleClass:Au,show:Xs,hide:pu,isHidden:Xl,uniqueId:Ys,setHTML:Iu,getOuterHTML:Jf,setOuterHTML:Uo,decode:Tl,encode:xr,insertAfter:Ci,replace:Tu,rename:Ef,findCommonAncestor:kf,toHex:Af,run:Vo,getAttribs:On,isEmpty:JE,createRng:ZE,nodeIndex:Pv,split:D6,bind:Ey,unbind:ky,fire:N6,getContentEditable:EN,getContentEditableParent:L6,destroy:R6,isChildOf:B6,dumpRng:P6},Zf=tf(bt,r,Et(Cm));return Cm};Oi.DOM=Oi(document),Oi.nodeIndex=Pv;var Iv=Oi.DOM,_b=Zn.each,tp=Zn.grep,Sw=0,I2=1,Ob=2,F2=3,sd=function(){function e(r){r===void 0&&(r={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=r}return e.prototype._setReferrerPolicy=function(r){this.settings.referrerPolicy=r},e.prototype.loadScript=function(r,o,u){var l=Iv,c,m=function(){l.remove(nt),c&&(c.onerror=c.onload=c=null)},S=function(){m(),o()},_=function(){m(),wt(u)&&u()},nt=l.uniqueId();c=document.createElement("script"),c.id=nt,c.type="text/javascript",c.src=Zn._addCacheSuffix(r),this.settings.referrerPolicy&&l.setAttrib(c,"referrerpolicy",this.settings.referrerPolicy),c.onload=S,c.onerror=_,(document.getElementsByTagName("head")[0]||document.body).appendChild(c)},e.prototype.isDone=function(r){return this.states[r]===Ob},e.prototype.markDone=function(r){this.states[r]=Ob},e.prototype.add=function(r,o,u,l){var c=this.states[r];this.queue.push(r),c===void 0&&(this.states[r]=Sw),o&&(this.scriptLoadedCallbacks[r]||(this.scriptLoadedCallbacks[r]=[]),this.scriptLoadedCallbacks[r].push({success:o,failure:l,scope:u||this}))},e.prototype.load=function(r,o,u,l){return this.add(r,o,u,l)},e.prototype.remove=function(r){delete this.states[r],delete this.scriptLoadedCallbacks[r]},e.prototype.loadQueue=function(r,o,u){this.loadScripts(this.queue,r,o,u)},e.prototype.loadScripts=function(r,o,u,l){var c=this,m=[],S=function(nt,pt){_b(c.scriptLoadedCallbacks[pt],function(bt){wt(bt[nt])&&bt[nt].call(bt.scope)}),c.scriptLoadedCallbacks[pt]=void 0};c.queueLoadedCallbacks.push({success:o,failure:l,scope:u||this});var _=function(){var nt=tp(r);if(r.length=0,_b(nt,function(bt){if(c.states[bt]===Ob){S("success",bt);return}if(c.states[bt]===F2){S("failure",bt);return}c.states[bt]!==I2&&(c.states[bt]=I2,c.loading++,c.loadScript(bt,function(){c.states[bt]=Ob,c.loading--,S("success",bt),_()},function(){c.states[bt]=F2,c.loading--,m.push(bt),S("failure",bt),_()}))}),!c.loading){var pt=c.queueLoadedCallbacks.slice(0);c.queueLoadedCallbacks.length=0,_b(pt,function(bt){m.length===0?wt(bt.success)&&bt.success.call(bt.scope):wt(bt.failure)&&bt.failure.call(bt.scope,m)})}};_()},e.ScriptLoader=new e,e}(),zs=function(e){var r=e,o=function(){return r},u=function(l){r=l};return{get:o,set:u}},xw=function(e){return st(e)&&Ka(e,"raw")},NL=function(e){return rt(e)&&e.length>1},np={},Ph=zs("en"),H2=function(){return Xa(np,Ph.get())},LL=function(){return Ar(np,function(e){return Ca({},e)})},RL=function(e){e&&Ph.set(e)},Mb=function(){return Ph.get()},Fv=function(e,r){var o=np[e];o||(np[e]=o={}),Nr(r,function(u,l){o[l.toLowerCase()]=u})},Db=function(e){var r=H2().getOr({}),o=function(_){return wt(_)?Object.prototype.toString.call(_):u(_)?"":""+_},u=function(_){return _===""||_===null||_===void 0},l=function(_){var nt=o(_);return Xa(r,nt.toLowerCase()).map(o).getOr(nt)},c=function(_){return _.replace(/{context:\w+}$/,"")};if(u(e))return"";if(xw(e))return o(e.raw);if(NL(e)){var m=e.slice(1),S=l(e[0]).replace(/\{([0-9]+)\}/g,function(_,nt){return Ka(m,nt)?o(m[nt]):_});return c(S)}return c(l(e))},qo=function(){return H2().bind(function(e){return Xa(e,"_dir")}).exists(function(e){return e==="rtl"})},wl=function(e){return Ka(np,e)},$s={getData:LL,setCode:RL,getCode:Mb,add:Fv,translate:Db,isRtl:qo,hasCode:wl},al=function(){var e=[],r={},o={},u=[],l=function(zt,Vt){var rn=tn(u,function(Qt){return Qt.name===zt&&Qt.state===Vt});Fn(rn,function(Qt){return Qt.callback()})},c=function(zt){if(o[zt])return o[zt].instance},m=function(zt){var Vt;return o[zt]&&(Vt=o[zt].dependencies),Vt||[]},S=function(zt,Vt){al.languageLoad!==!1&&Ft(zt,function(){var rn=$s.getCode(),Qt=","+(Vt||"")+",";!rn||Vt&&Qt.indexOf(","+rn+",")===-1||sd.ScriptLoader.add(r[zt]+"/langs/"+rn+".js")},"loaded")},_=function(zt,Vt,rn){var Qt=Vt;return e.push(Qt),o[zt]={instance:Qt,dependencies:rn},l(zt,"added"),Qt},nt=function(zt){delete r[zt],delete o[zt]},pt=function(zt,Vt){return typeof Vt=="object"?Vt:typeof zt=="string"?{prefix:"",resource:Vt,suffix:""}:{prefix:zt.prefix,resource:Vt,suffix:zt.suffix}},bt=function(zt,Vt){var rn=r[zt];Fn(Vt,function(Qt){sd.ScriptLoader.add(rn+"/"+Qt)})},Ct=function(zt,Vt,rn,Qt){var On=m(zt);Fn(On,function(kn){var mn=pt(Vt,kn);Pt(mn.resource,mn,void 0,void 0)}),rn&&(Qt?rn.call(Qt):rn.call(sd))},Pt=function(zt,Vt,rn,Qt,On){if(!r[zt]){var kn=typeof Vt=="string"?Vt:Vt.prefix+Vt.resource+Vt.suffix;kn.indexOf("/")!==0&&kn.indexOf("://")===-1&&(kn=al.baseURL+"/"+kn),r[zt]=kn.substring(0,kn.lastIndexOf("/"));var mn=function(){l(zt,"loaded"),Ct(zt,Vt,rn,Qt)};o[zt]?mn():sd.ScriptLoader.add(kn,mn,Qt,On)}},Ft=function(zt,Vt,rn){rn===void 0&&(rn="added"),Ka(o,zt)&&rn==="added"||Ka(r,zt)&&rn==="loaded"?Vt():u.push({name:zt,state:rn,callback:Vt})};return{items:e,urls:r,lookup:o,_listeners:u,get:c,dependencies:m,requireLangPack:S,add:_,remove:nt,createUrl:pt,addComponents:bt,load:Pt,waitFor:Ft}};al.languageLoad=!0,al.baseURL="",al.PluginManager=al(),al.ThemeManager=al();var wi=function(e){var r=zs(dt.none()),o=function(){return r.get().each(e)},u=function(){o(),r.set(dt.none())},l=function(){return r.get().isSome()},c=function(){return r.get()},m=function(S){o(),r.set(dt.some(S))};return{clear:u,isSet:l,get:c,set:m}},Hv=function(){var e=wi(it),r=function(o){return e.get().each(o)};return Ca(Ca({},e),{on:r})},Nb=function(e,r){var o=null,u=function(){Ke(o)||(clearTimeout(o),o=null)},l=function(){for(var c=[],m=0;m<arguments.length;m++)c[m]=arguments[m];Ke(o)&&(o=setTimeout(function(){o=null,e.apply(null,c)},r))};return{cancel:u,throttle:l}},qu=function(e,r){var o=null,u=function(){Ke(o)||(clearTimeout(o),o=null)},l=function(){for(var c=[],m=0;m<arguments.length;m++)c[m]=arguments[m];u(),o=setTimeout(function(){o=null,e.apply(null,c)},r)};return{cancel:u,throttle:l}},If=function(e,r){var o=kt(e,r);return o===void 0||o===""?[]:o.split(" ")},BL=function(e,r,o){var u=If(e,r),l=u.concat([o]);return Ze(e,r,l.join(" ")),!0},PL=function(e,r,o){var u=tn(If(e,r),function(l){return l!==o});return u.length>0?Ze(e,r,u.join(" ")):nr(e,r),!1},Lb=function(e){return e.dom.classList!==void 0},Rb=function(e){return If(e,"class")},Ew=function(e,r){return BL(e,"class",r)},kw=function(e,r){return PL(e,"class",r)},rp=function(e,r){Lb(e)?e.dom.classList.add(r):Ew(e,r)},z2=function(e){var r=Lb(e)?e.dom.classList:Rb(e);r.length===0&&nr(e,"class")},$2=function(e,r){if(Lb(e)){var o=e.dom.classList;o.remove(r)}else kw(e,r);z2(e)},Aw=function(e,r){return Lb(e)&&e.dom.classList.contains(r)},Tw=function(e,r){var o=[];return Fn(I(e),function(u){r(u)&&(o=o.concat([u])),o=o.concat(Tw(u,r))}),o},ts=function(e,r){return ro(r,e)},Cl=Et("mce-annotation"),Ih=Et("data-mce-annotation"),xu=Et("data-mce-annotation-uid"),V2=function(e,r){var o=e.selection.getRng(),u=lt.fromDom(o.startContainer),l=lt.fromDom(e.getBody()),c=r.fold(function(){return"."+Cl()},function(nt){return"["+Ih()+'="'+nt+'"]'}),m=k(u,o.startOffset).getOr(u),S=ou(m,c,function(nt){return Wa(nt,l)}),_=function(nt,pt){return An(nt,pt)?dt.some(kt(nt,pt)):dt.none()};return S.bind(function(nt){return _(nt,""+xu()).bind(function(pt){return _(nt,""+Ih()).map(function(bt){var Ct=U2(e,pt);return{uid:pt,name:bt,elements:Ct}})})})},Vd=function(e){return Ti(e)&&Aw(e,Cl())},U2=function(e,r){var o=lt.fromDom(e.getBody());return ts(o,"["+xu()+'="'+r+'"]')},j2=function(e,r){var o=lt.fromDom(e.getBody()),u=ts(o,"["+Ih()+'="'+r+'"]'),l={};return Fn(u,function(c){var m=kt(c,xu()),S=Xa(l,m).getOr([]);l[m]=S.concat([c])}),l},W2=function(e,r){var o=zs({}),u=function(){return{listeners:[],previous:Hv()}},l=function(pt,bt){c(pt,function(Ct){return bt(Ct),Ct})},c=function(pt,bt){var Ct=o.get(),Pt=Xa(Ct,pt).getOrThunk(u),Ft=bt(Pt);Ct[pt]=Ft,o.set(Ct)},m=function(pt,bt,Ct){l(pt,function(Pt){Fn(Pt.listeners,function(Ft){return Ft(!0,pt,{uid:bt,nodes:er(Ct,function(zt){return zt.dom})})})})},S=function(pt){l(pt,function(bt){Fn(bt.listeners,function(Ct){return Ct(!1,pt)})})},_=qu(function(){var pt=o.get(),bt=Tn(cr(pt));Fn(bt,function(Ct){c(Ct,function(Pt){var Ft=Pt.previous.get();return V2(e,dt.some(Ct)).fold(function(){Ft.isSome()&&(S(Ct),Pt.previous.clear())},function(zt){var Vt=zt.uid,rn=zt.name,Qt=zt.elements;Tv(Ft,Vt)||(m(rn,Vt,Qt),Pt.previous.set(Vt))}),{previous:Pt.previous,listeners:Pt.listeners}})})},30);e.on("remove",function(){_.cancel()}),e.on("NodeChange",function(){_.throttle()});var nt=function(pt,bt){c(pt,function(Ct){return{previous:Ct.previous,listeners:Ct.listeners.concat([bt])}})};return{addListener:nt}},_w=function(e,r){var o=function(u){return dt.from(u.attr(Ih())).bind(r.lookup)};e.on("init",function(){e.serializer.addNodeFilter("span",function(u){Fn(u,function(l){o(l).each(function(c){c.persistent===!1&&l.unwrap()})})})})},Ow=function(){var e={},r=function(u,l){e[u]={name:u,settings:l}},o=function(u){return Xa(e,u).map(function(l){return l.settings})};return{register:r,lookup:o}},Mw=0,q2=function(e){var r=new Date,o=r.getTime(),u=Math.floor(Math.random()*1e9);return Mw++,e+"_"+u+Mw+String(o)},IL=function(e,r){Fn(r,function(o){rp(e,o)})},vs=function(e,r){var o=r||document,u=o.createElement("div");return u.innerHTML=e,I(lt.fromDom(u))},ms=function(e){return er(e,lt.fromDom)},ol=function(e){return e.dom.innerHTML},Vs=function(e,r){var o=kd(e),u=o.dom,l=lt.fromDom(u.createDocumentFragment()),c=vs(r,u);lo(l,c),co(e),xa(e,l)},il=function(e,r){return lt.fromDom(e.dom.cloneNode(r))},fu=function(e){return il(e,!1)},Bb=function(e){return il(e,!0)},Pb=function(e,r,o){o===void 0&&(o=vt);var u=new vi(e,r),l=function(c){var m;do m=u[c]();while(m&&!ia(m)&&!o(m));return dt.from(m).filter(ia)};return{current:function(){return dt.from(u.current()).filter(ia)},next:function(){return l("next")},prev:function(){return l("prev")},prev2:function(){return l("prev2")}}},Dw=function(e,r){var o=r||function(m){return e.isBlock(m)||ui(m)||Mi(m)},u=function(m,S,_,nt){if(ia(m)){var pt=nt(m,S,m.data);if(pt!==-1)return dt.some({container:m,offset:pt})}return _().bind(function(bt){return u(bt.container,bt.offset,_,nt)})},l=function(m,S,_,nt){var pt=Pb(m,nt,o);return u(m,S,function(){return pt.prev().map(function(bt){return{container:bt,offset:bt.length}})},_).getOrNull()},c=function(m,S,_,nt){var pt=Pb(m,nt,o);return u(m,S,function(){return pt.next().map(function(bt){return{container:bt,offset:0}})},_).getOrNull()};return{backwards:l,forwards:c}},zv=Math.round,Ud=function(e){return e?{left:zv(e.left),top:zv(e.top),bottom:zv(e.bottom),right:zv(e.right),width:zv(e.width),height:zv(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Nw=function(e,r){return e=Ud(e),r||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},Lw=function(e,r){return e.left===r.left&&e.top===r.top&&e.bottom===r.bottom&&e.right===r.right},Ib=function(e,r,o){return e>=0&&e<=Math.min(r.height,o.height)/2},ap=function(e,r){var o=Math.min(r.height/2,e.height/2);return e.bottom-o<r.top?!0:e.top>r.bottom?!1:Ib(r.top-e.bottom,e,r)},op=function(e,r){return e.top>r.bottom?!0:e.bottom<r.top?!1:Ib(r.bottom-e.top,e,r)},K2=function(e,r,o){return r>=e.left&&r<=e.right&&o>=e.top&&o<=e.bottom},FL=function(e,r,o){return Math.min(Math.max(e,r),o)},Fb=function(e){var r=e.startContainer,o=e.startOffset;return r.hasChildNodes()&&e.endOffset===o+1?r.childNodes[o]:null},Ff=function(e,r){if(ma(e)&&e.hasChildNodes()){var o=e.childNodes,u=FL(r,0,o.length-1);return o[u]}else return e},HL=function(e,r){if(!(r<0&&ma(e)&&e.hasChildNodes()))return Ff(e,r)},zL=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),G2=function(e){return typeof e=="string"&&e.charCodeAt(0)>=768&&zL.test(e)},$L=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(o){for(var u=0;u<e.length;u++)if(e[u](o))return!0;return!1}},X2=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(o){for(var u=0;u<e.length;u++)if(!e[u](o))return!1;return!0}},Hr=ma,VL=Rf,Bu=tl("display","block table"),UL=tl("float","left right"),ip=X2(Hr,VL,vn(UL)),jL=vn(tl("white-space","pre pre-line pre-wrap")),ul=ia,Rw=ui,Y2=Oi.nodeIndex,Fh=HL,nf=function(e){return"createRange"in e?e.createRange():Oi.DOM.createRng()},Bw=function(e){return e&&/[\r\n\t ]/.test(e)},Pw=function(e){return!!e.setStart&&!!e.setEnd},rf=function(e){var r=e.startContainer,o=e.startOffset;if(Bw(e.toString())&&jL(r.parentNode)&&ia(r)){var u=r.data;if(Bw(u[o-1])||Bw(u[o+1]))return!0}return!1},af=function(e){var r=e.ownerDocument,o=nf(r),u=r.createTextNode(hl),l=e.parentNode;l.insertBefore(u,e),o.setStart(u,0),o.setEnd(u,1);var c=Ud(o.getBoundingClientRect());return l.removeChild(u),c},Q2=function(e){var r=e.startContainer,o=e.endContainer,u=e.startOffset,l=e.endOffset;if(r===o&&ia(o)&&u===0&&l===1){var c=e.cloneRange();return c.setEndAfter(o),jd(c)}else return null},Tc=function(e){return e.left===0&&e.right===0&&e.top===0&&e.bottom===0},jd=function(e){var r,o=e.getClientRects();return o.length>0?r=Ud(o[0]):r=Ud(e.getBoundingClientRect()),!Pw(e)&&Rw(e)&&Tc(r)?af(e):Tc(r)&&Pw(e)?Q2(e):r},Wd=function(e,r){var o=Nw(e,r);return o.width=1,o.right=o.left+1,o},Iw=function(e){var r=[],o=function(_){_.height!==0&&(r.length>0&&Lw(_,r[r.length-1])||r.push(_))},u=function(_,nt){var pt=nf(_.ownerDocument);if(nt<_.data.length){if(G2(_.data[nt]))return r;if(G2(_.data[nt-1])&&(pt.setStart(_,nt),pt.setEnd(_,nt+1),!rf(pt)))return o(Wd(jd(pt),!1)),r}nt>0&&(pt.setStart(_,nt-1),pt.setEnd(_,nt),rf(pt)||o(Wd(jd(pt),!1))),nt<_.data.length&&(pt.setStart(_,nt),pt.setEnd(_,nt+1),rf(pt)||o(Wd(jd(pt),!0)))},l=e.container(),c=e.offset();if(ul(l))return u(l,c),r;if(Hr(l))if(e.isAtEnd()){var m=Fh(l,c);ul(m)&&u(m,m.data.length),ip(m)&&!Rw(m)&&o(Wd(jd(m),!1))}else{var m=Fh(l,c);if(ul(m)&&u(m,0),ip(m)&&e.isAtEnd())return o(Wd(jd(m),!1)),r;var S=Fh(e.container(),e.offset()-1);ip(S)&&!Rw(S)&&(Bu(S)||Bu(m)||!ip(m))&&o(Wd(jd(S),!1)),ip(m)&&o(Wd(jd(m),!0))}return r},Jn=function(e,r,o){var u=function(){return ul(e),r===0},l=function(){return ul(e)?r>=e.data.length:r>=e.childNodes.length},c=function(){var pt=nf(e.ownerDocument);return pt.setStart(e,r),pt.setEnd(e,r),pt},m=function(){return o||(o=Iw(Jn(e,r))),o},S=function(){return m().length>0},_=function(pt){return pt&&e===pt.container()&&r===pt.offset()},nt=function(pt){return Fh(e,pt?r-1:r)};return{container:Et(e),offset:Et(r),toRange:c,getClientRects:m,isVisible:S,isAtStart:u,isAtEnd:l,isEqual:_,getNode:nt}};Jn.fromRangeStart=function(e){return Jn(e.startContainer,e.startOffset)},Jn.fromRangeEnd=function(e){return Jn(e.endContainer,e.endOffset)},Jn.after=function(e){return Jn(e.parentNode,Y2(e)+1)},Jn.before=function(e){return Jn(e.parentNode,Y2(e))},Jn.isAbove=function(e,r){return As(dr(r.getClientRects()),Pr(e.getClientRects()),ap).getOr(!1)},Jn.isBelow=function(e,r){return As(Pr(r.getClientRects()),dr(e.getClientRects()),op).getOr(!1)},Jn.isAtStart=function(e){return e?e.isAtStart():!1},Jn.isAtEnd=function(e){return e?e.isAtEnd():!1},Jn.isTextPosition=function(e){return e?ia(e.container()):!1},Jn.isElementPosition=function(e){return Jn.isTextPosition(e)===!1};var Hh=function(e,r){ia(r)&&r.data.length===0&&e.remove(r)},Fw=function(e,r,o){r.insertNode(o),Hh(e,o.previousSibling),Hh(e,o.nextSibling)},WL=function(e,r,o){var u=dt.from(o.firstChild),l=dt.from(o.lastChild);r.insertNode(o),u.each(function(c){return Hh(e,c.previousSibling)}),l.each(function(c){return Hh(e,c.nextSibling)})},Hb=function(e,r,o){So(o)?WL(e,r,o):Fw(e,r,o)},of=ia,J2=xc,Z2=Oi.nodeIndex,ek=function(e){var r=e.parentNode;return J2(r)?ek(r):r},Hw=function(e){return e?Fo(e.childNodes,function(r,o){return J2(o)&&o.nodeName!=="BR"?r=r.concat(Hw(o)):r.push(o),r},[]):[]},zw=function(e,r){for(;(e=e.previousSibling)&&of(e);)r+=e.data.length;return r},tk=function(e){return function(r){return e===r}},nk=function(e){var r,o;r=Hw(ek(e)),o=wo(r,tk(e),e),r=r.slice(0,o+1);var u=Fo(r,function(l,c,m){return of(c)&&of(r[m-1])&&l++,l},0);return r=xi(r,Lu([e.nodeName])),o=wo(r,tk(e),e),o-u},rk=function(e){var r;return of(e)?r="text()":r=e.nodeName.toLowerCase(),r+"["+nk(e)+"]"},zb=function(e,r,o){var u=[];for(r=r.parentNode;r!==e&&!(o&&o(r));r=r.parentNode)u.push(r);return u},ak=function(e,r){var o,u,l=[],c,m,S;return o=r.container(),u=r.offset(),of(o)?c=zw(o,u):(m=o.childNodes,u>=m.length?(c="after",u=m.length-1):c="before",o=m[u]),l.push(rk(o)),S=zb(e,o),S=xi(S,vn(xc)),l=l.concat(Ii(S,function(_){return rk(_)})),l.reverse().join("/")+","+c},qL=function(e,r,o){var u=Hw(e);return u=xi(u,function(l,c){return!of(l)||!of(u[c-1])}),u=xi(u,Lu([r])),u[o]},KL=function(e,r){for(var o=e,u=0,l;of(o);){if(l=o.data.length,r>=u&&r<=u+l){e=o,r=r-u;break}if(!of(o.nextSibling)){e=o,r=l;break}u+=l,o=o.nextSibling}return of(e)&&r>e.data.length&&(r=e.data.length),Jn(e,r)},ok=function(e,r){var o;if(!r)return null;var u=r.split(","),l=u[0].split("/");o=u.length>1?u[1]:"before";var c=Fo(l,function(m,S){var _=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(S);return _?(_[1]==="text()"&&(_[1]="#text"),qL(m,_[1],parseInt(_[2],10))):null},e);return c?of(c)?KL(c,parseInt(o,10)):(o==="after"?o=Z2(c)+1:o=Z2(c),Jn(c.parentNode,o)):null},$b=Mi,$w=function(e,r,o){var u,l;for(l=e(r.data.slice(0,o)).length,u=r.previousSibling;u&&ia(u);u=u.previousSibling)l+=e(u.data).length;return l},Vw=function(e,r,o,u,l){var c=u[l?"startContainer":"endContainer"],m=u[l?"startOffset":"endOffset"],S=[],_,nt=0,pt=e.getRoot();for(ia(c)?S.push(o?$w(r,c,m):m):(_=c.childNodes,m>=_.length&&_.length&&(nt=1,m=Math.max(0,_.length-1)),S.push(e.nodeIndex(_[m],o)+nt));c&&c!==pt;c=c.parentNode)S.push(e.nodeIndex(c,o));return S},up=function(e,r,o,u){var l=r.dom,c={};return c.start=Vw(l,e,o,u,!0),r.isCollapsed()||(c.end=Vw(l,e,o,u,!1)),Lf(u)&&(c.isFakeCaret=!0),c},Uw=function(e,r,o){var u=0;return Zn.each(e.select(r),function(l){if(l.getAttribute("data-mce-bogus")!=="all"){if(l===o)return!1;u++}}),u},Xi=function(e,r){var o,u,l,c=r?"start":"end";o=e[c+"Container"],u=e[c+"Offset"],ma(o)&&o.nodeName==="TR"&&(l=o.childNodes,o=l[Math.min(r?u:u-1,l.length-1)],o&&(u=r?0:o.childNodes.length,e["set"+(r?"Start":"End")](o,u)))},jw=function(e){return Xi(e,!0),Xi(e,!1),e},su=function(e,r){var o;if(ma(e)&&(e=Ff(e,r),$b(e)))return e;if(oc(e)&&(ia(e)&&$i(e)&&(e=e.parentNode),o=e.previousSibling,$b(o)||(o=e.nextSibling,$b(o))))return o},Vb=function(e){return su(e.startContainer,e.startOffset)||su(e.endContainer,e.endOffset)},Ww=function(e,r,o){var u=o.getNode(),l=u?u.nodeName:null,c=o.getRng();if($b(u)||l==="IMG")return{name:l,index:Uw(o.dom,l,u)};var m=Vb(c);return m?(l=m.tagName,{name:l,index:Uw(o.dom,l,m)}):up(e,o,r,c)},ik=function(e){var r=e.getRng();return{start:ak(e.dom.getRoot(),Jn.fromRangeStart(r)),end:ak(e.dom.getRoot(),Jn.fromRangeEnd(r))}},Ub=function(e){return{rng:e.getRng()}},uk=function(e,r,o){var u={"data-mce-type":"bookmark",id:r,style:"overflow:hidden;line-height:0px"};return o?e.create("span",u,"&#xFEFF;"):e.create("span",u)},sk=function(e,r){var o=e.dom,u=e.getRng(),l=o.uniqueId(),c=e.isCollapsed(),m=e.getNode(),S=m.nodeName;if(S==="IMG")return{name:S,index:Uw(o,S,m)};var _=jw(u.cloneRange());if(!c){_.collapse(!1);var nt=uk(o,l+"_end",r);Hb(o,_,nt)}u=jw(u),u.collapse(!0);var pt=uk(o,l+"_start",r);return Hb(o,u,pt),e.moveToBookmark({id:l,keep:!0}),{id:l}},GL=function(e,r,o){return r===2?Ww(bl,o,e):r===3?ik(e):r?Ub(e):sk(e,!1)},lk=Mt(Ww,Ht,!0),XL=Oi.DOM,YL="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow",ck=function(e,r,o){var u=e.getParam(r,o);if(u.indexOf("=")!==-1){var l=e.getParam(r,"","hash");return Xa(l,e.id).getOr(o)}else return u},QL=function(e){return e.getParam("iframe_attrs",{})},JL=function(e){return e.getParam("doctype","<!DOCTYPE html>")},ZL=function(e){return e.getParam("document_base_url","")},e3=function(e){return ck(e,"body_id","tinymce")},t3=function(e){return ck(e,"body_class","")},fk=function(e){return e.getParam("content_security_policy","")},n3=function(e){return e.getParam("br_in_pre",!0)},ps=function(e){if(e.getParam("force_p_newlines",!1))return"p";var r=e.getParam("forced_root_block","p");return r===!1?"":r===!0?"p":r},zh=function(e){return e.getParam("forced_root_block_attrs",{})},$h=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},dk=function(e){return e.getParam("no_newline_selector","")},r3=function(e){return e.getParam("keep_styles",!0)},a3=function(e){return e.getParam("end_container_on_empty_block",!1)},o3=function(e){return Zn.explode(e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))},sp=function(e){return Zn.explode(e.getParam("font_size_classes",""))},jb=function(e){return e.getParam("images_dataimg_filter",nn,"function")},Vh=function(e){return e.getParam("automatic_uploads",!0,"boolean")},qw=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},i3=function(e){return e.getParam("images_replace_blob_uris",!0,"boolean")},Hf=function(e){return e.getParam("icons","","string")},Kw=function(e){return e.getParam("icons_url","","string")},u3=function(e){return e.getParam("images_upload_url","","string")},qd=function(e){return e.getParam("images_upload_base_path","","string")},Wb=function(e){return e.getParam("images_upload_credentials",!1,"boolean")},s3=function(e){return e.getParam("images_upload_handler",null,"function")},l3=function(e){return e.getParam("content_css_cors",!1,"boolean")},vk=function(e){return e.getParam("referrer_policy","","string")},mk=function(e){return e.getParam("language","en","string")},pk=function(e){return e.getParam("language_url","","string")},hk=function(e){return e.getParam("indent_use_margin",!1)},c3=function(e){return e.getParam("indentation","40px","string")},gk=function(e){var r=e.getParam("content_css");return Ye(r)?er(r.split(","),Jt):rt(r)?r:r===!1||e.inline?[]:["default"]},bk=function(e){var r=e.getParam("font_css",[]);return rt(r)?r:er(r.split(","),Jt)},yk=function(e){return e.getParam("directionality",$s.isRtl()?"rtl":void 0)},f3=function(e){return e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")},wk=function(e){var r=e.getParam("object_resizing");return r===!1||Ra.iOS?!1:Ye(r)?r:"table,img,figure.image,div,video,iframe"},d3=function(e){return e.getParam("resize_img_proportional",!0,"boolean")},Ck=function(e){return e.getParam("placeholder",XL.getAttrib(e.getElement(),"placeholder"),"string")},Gw=function(e){return e.getParam("event_root")},Sk=function(e){return e.getParam("service_message")},Uh=function(e){return e.getParam("theme")},v3=function(e){return e.getParam("validate")},jh=function(e){return e.getParam("inline_boundaries")!==!1},m3=function(e){return e.getParam("formats")},p3=function(e){var r=e.getParam("preview_styles",YL);return Ye(r)?r:""},Xw=function(e){return e.getParam("format_empty_lines",!1,"boolean")},Yw=function(e){return e.getParam("custom_ui_selector","","string")},h3=function(e){return e.getParam("theme_url")},g3=function(e){return e.getParam("inline")},b3=function(e){return e.getParam("hidden_input")},y3=function(e){return e.getParam("submit_patch")},w3=function(e){return e.getParam("encoding")==="xml"},C3=function(e){return e.getParam("add_form_submit_trigger")},qb=function(e){return e.getParam("add_unload_trigger")},S3=function(e){return ps(e)!==""},x3=function(e){return e.getParam("custom_undo_redo_levels",0,"number")},E3=function(e){return e.getParam("disable_nodechange")},k3=function(e){return e.getParam("readonly")},A3=function(e){return e.getParam("content_css_cors")},Qw=function(e){return e.getParam("plugins","","string")},T3=function(e){return e.getParam("external_plugins")},Wh=function(e){return e.getParam("block_unsupported_drop",!0,"boolean")},_3=function(e){return e.getParam("visual",!0,"boolean")},O3=function(e){return e.getParam("visual_table_class","mce-item-table","string")},xk=function(e){return e.getParam("visual_anchor_class","mce-item-anchor","string")},Ek=function(e){return e.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string")},kk=ma,Ak=ia,Tk=function(e){var r=e.parentNode;r&&r.removeChild(e)},lp=function(e){var r=bl(e);return{count:e.length-r.length,text:r}},Jw=function(e){for(var r;(r=e.data.lastIndexOf(En))!==-1;)e.deleteData(r,1)},_k=function(e,r){return $v(e),r},M3=function(e,r){var o=lp(e.data.substr(0,r.offset())),u=lp(e.data.substr(r.offset())),l=o.text+u.text;return l.length>0?(Jw(e),Jn(e,r.offset()-o.count)):r},D3=function(e,r){var o=r.container(),u=fn(br(o.childNodes),e).map(function(l){return l<r.offset()?Jn(o,r.offset()-1):r}).getOr(r);return $v(e),u},Ok=function(e,r){return Ak(e)&&r.container()===e?M3(e,r):_k(e,r)},N3=function(e,r){return r.container()===e.parentNode?D3(e,r):_k(e,r)},Mk=function(e,r){return Jn.isTextPosition(r)?Ok(e,r):N3(e,r)},$v=function(e){kk(e)&&oc(e)&&(kh(e)?e.removeAttribute("data-mce-caret"):Tk(e)),Ak(e)&&(Jw(e),e.data.length===0&&Tk(e))},Kb=Ea().browser,L3=Mi,R3=nl,B3=Nm,P3="*[contentEditable=false],video,audio,embed,object",Dk=function(e,r,o){var u=Nw(r.getBoundingClientRect(),o),l,c;if(e.tagName==="BODY"){var m=e.ownerDocument.documentElement;l=e.scrollLeft||m.scrollLeft,c=e.scrollTop||m.scrollTop}else{var S=e.getBoundingClientRect();l=e.scrollLeft-S.left,c=e.scrollTop-S.top}u.left+=l,u.right+=l,u.top+=c,u.bottom+=c,u.width=1;var _=r.offsetWidth-r.clientWidth;return _>0&&(o&&(_*=-1),u.left+=_,u.right+=_),u},I3=function(e){for(var r=ts(lt.fromDom(e),P3),o=0;o<r.length;o++){var u=r[o].dom,l=u.previousSibling;if(cb(l)){var c=l.data;c.length===1?l.parentNode.removeChild(l):l.deleteData(c.length-1,1)}if(l=u.nextSibling,lb(l)){var c=l.data;c.length===1?l.parentNode.removeChild(l):l.deleteData(0,1)}}},Us=function(e,r,o,u){var l=Hv(),c,m,S=ps(e),_=S.length>0?S:"p",nt=function(zt,Vt){var rn;if(pt(),B3(Vt))return null;if(o(Vt)){m=rL(_,Vt,zt);var Qt=Dk(r,Vt,zt);bo(m).css("top",Qt.top);var On=bo('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(Ca({},Qt)).appendTo(r)[0];l.set({caret:On,element:Vt,before:zt}),zt&&bo(On).addClass("mce-visual-caret-before"),bt(),rn=Vt.ownerDocument.createRange(),rn.setStart(m,0),rn.setEnd(m,0)}else return m=Vy(Vt,zt),rn=Vt.ownerDocument.createRange(),qh(m.nextSibling)?(rn.setStart(m,0),rn.setEnd(m,0)):(rn.setStart(m,1),rn.setEnd(m,1)),rn;return rn},pt=function(){I3(r),m&&($v(m),m=null),l.on(function(zt){bo(zt.caret).remove(),l.clear()}),c&&(cs.clearInterval(c),c=void 0)},bt=function(){c=cs.setInterval(function(){u()?bo("div.mce-visual-caret",r).toggleClass("mce-visual-caret-hidden"):bo("div.mce-visual-caret",r).addClass("mce-visual-caret-hidden")},500)},Ct=function(){l.on(function(zt){var Vt=Dk(r,zt.element,zt.before);bo(zt.caret).css(Ca({},Vt))})},Pt=function(){return cs.clearInterval(c)},Ft=function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"};return{show:nt,hide:pt,getCss:Ft,reposition:Ct,destroy:Pt}},Nk=function(){return Kb.isIE()||Kb.isEdge()||Kb.isFirefox()},qh=function(e){return L3(e)||R3(e)},Vv=function(e){return qh(e)||au(e)&&Nk()},Gb=Mi,F3=nl,H3=tl("display","block table table-cell table-caption list-item"),Zw=oc,Lk=$i,Kh=ma,z3=Rf,Uv=function(e){return e>0},Kd=function(e){return e<0},Xb=function(e,r){for(var o;o=e(r);)if(!Lk(o))return o;return null},cp=function(e,r,o,u,l){var c=new vi(e,u),m=Gb(e)||Lk(e);if(Kd(r)){if(m&&(e=Xb(c.prev.bind(c),!0),o(e)))return e;for(;e=Xb(c.prev.bind(c),l);)if(o(e))return e}if(Uv(r)){if(m&&(e=Xb(c.next.bind(c),!0),o(e)))return e;for(;e=Xb(c.next.bind(c),l);)if(o(e))return e}return null},uf=function(e,r){for(;e&&e!==r;){if(H3(e))return e;e=e.parentNode}return null},sf=function(e,r,o){return uf(e.container(),o)===uf(r.container(),o)},Yb=function(e,r){if(!r)return null;var o=r.container(),u=r.offset();return Kh(o)?o.childNodes[u+e]:null},eC=function(e,r){var o=r.ownerDocument.createRange();return e?(o.setStartBefore(r),o.setEndBefore(r)):(o.setStartAfter(r),o.setEndAfter(r)),o},Rk=function(e,r,o){return uf(r,e)===uf(o,e)},tC=function(e,r,o){for(var u=e?"previousSibling":"nextSibling";o&&o!==r;){var l=o[u];if(Zw(l)&&(l=l[u]),Gb(l)||F3(l)){if(Rk(r,l,o))return l;break}if(z3(l))break;o=o.parentNode}return null},fp=Mt(eC,!0),dp=Mt(eC,!1),Qb=function(e,r,o){var u,l=Mt(tC,!0,r),c=Mt(tC,!1,r),m=o.startContainer,S=o.startOffset;if($i(m)){Kh(m)||(m=m.parentNode);var _=m.getAttribute("data-mce-caret");if(_==="before"&&(u=m.nextSibling,Vv(u)))return fp(u);if(_==="after"&&(u=m.previousSibling,Vv(u)))return dp(u)}if(!o.collapsed)return o;if(ia(m)){if(Zw(m)){if(e===1){if(u=c(m),u)return fp(u);if(u=l(m),u)return dp(u)}if(e===-1){if(u=l(m),u)return dp(u);if(u=c(m),u)return fp(u)}return o}if(cb(m)&&S>=m.data.length-1)return e===1&&(u=c(m),u)?fp(u):o;if(lb(m)&&S<=1)return e===-1&&(u=l(m),u)?dp(u):o;if(S===m.data.length)return u=c(m),u?fp(u):o;if(S===0)return u=l(m),u?dp(u):o}return o},nC=function(e,r){return dt.from(Yb(e?0:-1,r)).filter(Gb)},vp=function(e,r,o){var u=Qb(e,r,o);return e===-1?Jn.fromRangeStart(u):Jn.fromRangeEnd(u)},Jb=function(e){return dt.from(e.getNode()).map(lt.fromDom)},$3=function(e){return dt.from(e.getNode(!0)).map(lt.fromDom)},rC=function(e,r){for(;r=e(r);)if(r.isVisible())return r;return r},Zb=function(e,r){var o=sf(e,r);return!o&&ui(e.getNode())?!0:o},ns;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(ns||(ns={}));var V3=Mi,zf=ia,Bk=ma,aC=ui,mp=Rf,oC=cL,Gh=wu,U3=function(e,r){for(var o=[];e&&e!==r;)o.push(e),e=e.parentNode;return o},Pk=function(e,r){return e.hasChildNodes()&&r<e.childNodes.length?e.childNodes[r]:null},Ik=function(e,r){if(Uv(e)){if(mp(r.previousSibling)&&!zf(r.previousSibling))return Jn.before(r);if(zf(r))return Jn(r,0)}if(Kd(e)){if(mp(r.nextSibling)&&!zf(r.nextSibling))return Jn.after(r);if(zf(r))return Jn(r,r.data.length)}return Kd(e)?aC(r)?Jn.before(r):Jn.after(r):Jn.before(r)},j3=function(e,r){var o=r.nextSibling;return o&&mp(o)?zf(o)?Jn(o,0):Jn.before(o):iC(ns.Forwards,Jn.after(r),e)},iC=function(e,r,o){var u,l,c,m;if(!Bk(o)||!r)return null;if(r.isEqual(Jn.after(o))&&o.lastChild){if(m=Jn.after(o.lastChild),Kd(e)&&mp(o.lastChild)&&Bk(o.lastChild))return aC(o.lastChild)?Jn.before(o.lastChild):m}else m=r;var S=m.container(),_=m.offset();if(zf(S)){if(Kd(e)&&_>0)return Jn(S,--_);if(Uv(e)&&_<S.length)return Jn(S,++_);u=S}else{if(Kd(e)&&_>0&&(l=Pk(S,_-1),mp(l)))return!oC(l)&&(c=cp(l,e,Gh,l),c)?zf(c)?Jn(c,c.data.length):Jn.after(c):zf(l)?Jn(l,l.data.length):Jn.before(l);if(Uv(e)&&_<S.childNodes.length&&(l=Pk(S,_),mp(l)))return aC(l)?j3(o,l):!oC(l)&&(c=cp(l,e,Gh,l),c)?zf(c)?Jn(c,0):Jn.before(c):zf(l)?Jn(l,0):Jn.after(l);u=l||m.getNode()}if((Uv(e)&&m.isAtEnd()||Kd(e)&&m.isAtStart())&&(u=cp(u,e,nn,o,!0),Gh(u,o)))return Ik(e,u);l=cp(u,e,Gh,o);var nt=ji(tn(U3(S,o),V3));return nt&&(!l||!nt.contains(l))?(Uv(e)?m=Jn.after(nt):m=Jn.before(nt),m):l?Ik(e,l):null},Yi=function(e){return{next:function(r){return iC(ns.Forwards,r,e)},prev:function(r){return iC(ns.Backwards,r,e)}}},e0=function(e,r,o){var u=e?Jn.before(o):Jn.after(o);return Vl(e,r,u)},t0=function(e){return ui(e)?Jn.before(e):Jn.after(e)},uC=function(e){return Jn.isTextPosition(e)?e.offset()===0:Rf(e.getNode())},Fk=function(e){if(Jn.isTextPosition(e)){var r=e.container();return e.offset()===r.data.length}else return Rf(e.getNode(!0))},sC=function(e,r){return!Jn.isTextPosition(e)&&!Jn.isTextPosition(r)&&e.getNode()===r.getNode(!0)},jv=function(e){return!Jn.isTextPosition(e)&&ui(e.getNode())},Hk=function(e,r,o){return e?!sC(r,o)&&!jv(r)&&Fk(r)&&uC(o):!sC(o,r)&&uC(r)&&Fk(o)},Vl=function(e,r,o){var u=Yi(r);return dt.from(e?u.next(o):u.prev(o))},$f=function(e,r,o){return Vl(e,r,o).bind(function(u){return sf(o,u,r)&&Hk(e,o,u)?Vl(e,r,u):dt.some(u)})},lC=function(e,r,o,u){return $f(e,r,o).bind(function(l){return u(l)?lC(e,r,l,u):dt.some(l)})},Gd=function(e,r){var o=e?r.firstChild:r.lastChild;return ia(o)?dt.some(Jn(o,e?0:o.data.length)):o?Rf(o)?dt.some(e?Jn.before(o):t0(o)):e0(e,r,o):dt.none()},lf=Mt(Vl,!0),cf=Mt(Vl,!1),js=Mt(Gd,!0),ff=Mt(Gd,!1),cC="_mce_caret",Vf=function(e){return ma(e)&&e.id===cC},Wv=function(e,r){for(;r&&r!==e;){if(r.id===cC)return r;r=r.parentNode}return null},zk=function(e){return Ye(e.start)},$k=function(e){return Ka(e,"rng")},W3=function(e){return Ka(e,"id")},q3=function(e){return Ka(e,"name")},Vk=function(e){return Zn.isArray(e.start)},Uk=function(e,r){return ma(r)&&e.isBlock(r)&&!r.innerHTML&&!Ra.ie&&(r.innerHTML='<br data-mce-bogus="1" />'),r},jk=function(e,r){var o,u=e.createRng();return o=ok(e.getRoot(),r.start),u.setStart(o.container(),o.offset()),o=ok(e.getRoot(),r.end),u.setEnd(o.container(),o.offset()),u},K3=function(e,r){var o=e.ownerDocument.createTextNode(En);e.appendChild(o),r.setStart(o,0),r.setEnd(o,0)},Wk=function(e){return e.hasChildNodes()===!1},G3=function(e,r){return ff(e).fold(vt,function(o){return r.setStart(o.container(),o.offset()),r.setEnd(o.container(),o.offset()),!0})},qk=function(e,r,o){return Wk(r)&&Wv(e,r)?(K3(r,o),!0):!1},Kk=function(e,r,o,u){var l=o[r?"start":"end"],c,m,S,_,nt=e.getRoot();if(l){for(S=l[0],m=nt,c=l.length-1;c>=1;c--){if(_=m.childNodes,qk(nt,m,u))return!0;if(l[c]>_.length-1)return qk(nt,m,u)?!0:G3(m,u);m=_[l[c]]}m.nodeType===3&&(S=Math.min(l[0],m.nodeValue.length)),m.nodeType===1&&(S=Math.min(l[0],m.childNodes.length)),r?u.setStart(m,S):u.setEnd(m,S)}return!0},fC=function(e){return ia(e)&&e.data.length>0},Gk=function(e,r,o){var u=e.get(o.id+"_"+r),l,c,m,S,_=o.keep,nt,pt;if(u){if(l=u.parentNode,r==="start"?(_?u.hasChildNodes()?(l=u.firstChild,c=1):fC(u.nextSibling)?(l=u.nextSibling,c=0):fC(u.previousSibling)?(l=u.previousSibling,c=u.previousSibling.data.length):(l=u.parentNode,c=e.nodeIndex(u)+1):c=e.nodeIndex(u),nt=l,pt=c):(_?u.hasChildNodes()?(l=u.firstChild,c=1):fC(u.previousSibling)?(l=u.previousSibling,c=u.previousSibling.data.length):(l=u.parentNode,c=e.nodeIndex(u)):c=e.nodeIndex(u),nt=l,pt=c),!_){for(S=u.previousSibling,m=u.nextSibling,Zn.each(Zn.grep(u.childNodes),function(bt){ia(bt)&&(bt.nodeValue=bt.nodeValue.replace(/\uFEFF/g,""))});u=e.get(o.id+"_"+r);)e.remove(u,!0);S&&m&&S.nodeType===m.nodeType&&ia(S)&&!Ra.opera&&(c=S.nodeValue.length,S.appendData(m.nodeValue),e.remove(m),nt=S,pt=c)}return dt.some(Jn(nt,pt))}else return dt.none()},X3=function(e,r){var o=e.createRng();return Kk(e,!0,r,o)&&Kk(e,!1,r,o)?dt.some(o):dt.none()},Do=function(e,r){var o=Gk(e,"start",r),u=Gk(e,"end",r);return As(o,u.or(o),function(l,c){var m=e.createRng();return m.setStart(Uk(e,l.container()),l.offset()),m.setEnd(Uk(e,c.container()),c.offset()),m})},qv=function(e,r){return dt.from(e.select(r.name)[r.index]).map(function(o){var u=e.createRng();return u.selectNode(o),u})},pp=function(e,r){var o=e.dom;if(r){if(Vk(r))return X3(o,r);if(zk(r))return dt.some(jk(o,r));if(W3(r))return Do(o,r);if(q3(r))return qv(o,r);if($k(r))return dt.some(r.rng)}return dt.none()},dC=function(e,r,o){return GL(e,r,o)},Y3=function(e,r){pp(e,r).each(function(o){e.setRng(o)})},Sl=function(e){return ma(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"},Q3=function(e){return function(r){return e===r}},Kv=Q3(hl),Xd=function(e){return e!==""&&` \f
\r	\v`.indexOf(e)!==-1},n0=function(e){return!Xd(e)&&!Kv(e)},r0=function(e){return!!e.nodeType},J3=function(e){return e&&/^(IMG)$/.test(e.nodeName)},Xk=function(e,r,o){var u=o.startOffset,l=o.startContainer;if(!(l===o.endContainer&&J3(l.childNodes[u]))&&ma(l)){var c=l.childNodes,m=void 0;u<c.length?(l=c[u],m=new vi(l,e.getParent(l,e.isBlock))):(l=c[c.length-1],m=new vi(l,e.getParent(l,e.isBlock)),m.next(!0));for(var S=m.current();S;S=m.next())if(ia(S)&&!a0(S)){o.setStart(S,0),r.setRng(o);return}}},vC=function(e,r,o){if(e){var u=r?"nextSibling":"previousSibling";for(e=o?e:e[u];e;e=e[u])if(ma(e)||!a0(e))return e}},mC=function(e,r){return r0(r)&&(r=r.nodeName),!!e.schema.getTextBlockElements()[r.toLowerCase()]},hp=function(e,r,o){return e.schema.isValidChild(r,o)},a0=function(e,r){if(r===void 0&&(r=!1),Ot(e)&&ia(e)){var o=r?e.data.replace(/ /g," "):e.data;return Xc(o)}else return!1},Z3=function(e){return Ot(e)&&ia(e)&&e.length===0},Uf=function(e,r){return wt(e)?e=e(r):Ot(r)&&(e=e.replace(/%(\w+)/g,function(o,u){return r[u]||o})),e},pC=function(e,r){return e=e||"",r=r||"",e=""+(e.nodeName||e),r=""+(r.nodeName||r),e.toLowerCase()===r.toLowerCase()},hC=function(e,r,o){return(o==="color"||o==="backgroundColor")&&(r=e.toHex(r)),o==="fontWeight"&&r===700&&(r="bold"),o==="fontFamily"&&(r=r.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+r},Xh=function(e,r,o){return hC(e,e.getStyle(r,o),o)},Yk=function(e,r){var o;return e.getParent(r,function(u){return o=e.getStyle(u,"text-decoration"),o&&o!=="none"}),o},o0=function(e,r,o){return e.getParents(r,o,e.getRoot())},eR=function(e,r){var o=function(u){var l=function(c){return c.length>1&&c.charAt(0)==="%"};return hn(["styles","attributes"],function(c){return Xa(u,c).exists(function(m){var S=rt(m)?m:jo(m);return hn(S,l)})})};return hn(e.formatter.get(r),o)},tR=function(e,r,o){var u=["inline","block","selector","attributes","styles","classes"],l=function(c){return aa(c,function(m,S){return hn(u,function(_){return _===S})})};return hn(e.formatter.get(r),function(c){var m=l(c);return hn(e.formatter.get(o),function(S){var _=l(S);return Io(m,_)})})},jf=function(e){return Yo(e,"block")},Ul=function(e){return Yo(e,"selector")},rs=function(e){return Yo(e,"inline")},nR=function(e){return Ul(e)&&rs(e)&&Tv(Xa(e,"mixed"),!0)},gC=function(e){return Ul(e)&&e.expand!==!1&&!rs(e)},gp=Sl,Qk=o0,Jk=a0,rR=mC,aR=function(e){return ui(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},Xr=function(e,r){for(var o=r;o;){if(ma(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:r;o=o.parentNode}return r},Eu=function(e,r,o,u){for(var l=r.data,c=o;e?c>=0:c<l.length;e?c--:c++)if(u(l.charAt(c)))return e?c+1:c;return-1},i0=function(e,r,o){return Eu(e,r,o,function(u){return Kv(u)||Xd(u)})},Ku=function(e,r,o){return Eu(e,r,o,n0)},fc=function(e,r,o,u,l,c){var m,S=e.getParent(o,e.isBlock)||r,_=function(pt,bt,Ct){var Pt=Dw(e),Ft=l?Pt.backwards:Pt.forwards;return dt.from(Ft(pt,bt,function(zt,Vt){return gp(zt.parentNode)?-1:(m=zt,Ct(l,zt,Vt))},S))},nt=_(o,u,i0);return nt.bind(function(pt){return c?_(pt.container,pt.offset+(l?-1:0),Ku):dt.some(pt)}).orThunk(function(){return m?dt.some({container:m,offset:l?0:m.length}):dt.none()})},bC=function(e,r,o,u,l){ia(u)&&rr(u.data)&&u[l]&&(u=u[l]);for(var c=Qk(e,u),m=0;m<c.length;m++)for(var S=0;S<r.length;S++){var _=r[S];if(!(Ot(_.collapsed)&&_.collapsed!==o.collapsed)&&Ul(_)&&e.is(c[m],_.selector))return c[m]}return u},Yh=function(e,r,o,u){var l=o,c=e.dom,m=c.getRoot(),S=r[0];if(jf(S)&&(l=S.wrapper?null:c.getParent(o,S.block,m)),!l){var _=c.getParent(o,"LI,TD,TH");l=c.getParent(ia(o)?o.parentNode:o,function(nt){return nt!==m&&rR(e,nt)},_)}if(l&&jf(S)&&S.wrapper&&(l=Qk(c,l,"ul,ol").reverse()[0]||l),!l)for(l=o;l[u]&&!c.isBlock(l[u])&&(l=l[u],!pC(l,"br")););return l||o},u0=function(e,r,o,u){var l=o.parentNode;return Ot(o[u])?!1:l===r||et(l)||e.isBlock(l)?!0:u0(e,r,l,u)},s0=function(e,r,o,u,l){var c=o,m=l?"previousSibling":"nextSibling",S=e.getRoot();if(ia(o)&&!Jk(o)&&(l?u>0:u<o.data.length))return o;for(;;){if(!r[0].block_expand&&e.isBlock(c))return c;for(var _=c[m];_;_=_[m]){var nt=ia(_)&&!u0(e,S,_,m);if(!gp(_)&&!aR(_)&&!Jk(_,nt))return c}if(c===S||c.parentNode===S){o=c;break}c=c.parentNode}return o},Zk=function(e){return gp(e.parentNode)||gp(e)},Gv=function(e,r,o,u){u===void 0&&(u=!1);var l=r.startContainer,c=r.startOffset,m=r.endContainer,S=r.endOffset,_=e.dom,nt=o[0];if(ma(l)&&l.hasChildNodes()&&(l=Ff(l,c),ia(l)&&(c=0)),ma(m)&&m.hasChildNodes()&&(m=Ff(m,r.collapsed?S:S-1),ia(m)&&(S=m.nodeValue.length)),l=Xr(_,l),m=Xr(_,m),Zk(l)&&(l=gp(l)?l:l.parentNode,r.collapsed?l=l.previousSibling||l:l=l.nextSibling||l,ia(l)&&(c=r.collapsed?l.length:0)),Zk(m)&&(m=gp(m)?m:m.parentNode,r.collapsed?m=m.nextSibling||m:m=m.previousSibling||m,ia(m)&&(S=r.collapsed?0:m.length)),r.collapsed){var pt=fc(_,e.getBody(),l,c,!0,u);pt.each(function(Ct){var Pt=Ct.container,Ft=Ct.offset;l=Pt,c=Ft});var bt=fc(_,e.getBody(),m,S,!1,u);bt.each(function(Ct){var Pt=Ct.container,Ft=Ct.offset;m=Pt,S=Ft})}return(rs(nt)||nt.block_expand)&&((!rs(nt)||!ia(l)||c===0)&&(l=s0(_,o,l,c,!0)),(!rs(nt)||!ia(m)||S===m.nodeValue.length)&&(m=s0(_,o,m,S,!1))),gC(nt)&&(l=bC(_,o,r,l,"previousSibling"),m=bC(_,o,r,m,"nextSibling")),(jf(nt)||Ul(nt))&&(l=Yh(e,o,l,"previousSibling"),m=Yh(e,o,m,"nextSibling"),jf(nt)&&(_.isBlock(l)||(l=s0(_,o,l,c,!0)),_.isBlock(m)||(m=s0(_,o,m,S,!1)))),ma(l)&&(c=_.nodeIndex(l),l=l.parentNode),ma(m)&&(S=_.nodeIndex(m)+1,m=m.parentNode),{startContainer:l,startOffset:c,endContainer:m,endOffset:S}},Qh=function(e,r,o){var u=r.startOffset,l=Ff(r.startContainer,u),c=r.endOffset,m=Ff(r.endContainer,c-1),S=function(zt){var Vt=zt[0];ia(Vt)&&Vt===l&&u>=Vt.data.length&&zt.splice(0,1);var rn=zt[zt.length-1];return c===0&&zt.length>0&&rn===m&&ia(rn)&&zt.splice(zt.length-1,1),zt},_=function(zt,Vt,rn){for(var Qt=[];zt&&zt!==rn;zt=zt[Vt])Qt.push(zt);return Qt},nt=function(zt,Vt){return e.getParent(zt,function(rn){return rn.parentNode===Vt},Vt)},pt=function(zt,Vt,rn){for(var Qt=rn?"nextSibling":"previousSibling",On=zt,kn=On.parentNode;On&&On!==Vt;On=kn){kn=On.parentNode;var mn=_(On===zt?On:On[Qt],Qt);mn.length&&(rn||mn.reverse(),o(S(mn)))}};if(l===m)return o(S([l]));var bt=e.findCommonAncestor(l,m);if(e.isChildOf(l,m))return pt(l,bt,!0);if(e.isChildOf(m,l))return pt(m,bt);var Ct=nt(l,bt)||l,Pt=nt(m,bt)||m;pt(l,Ct,!0);var Ft=_(Ct===l?Ct:Ct.nextSibling,"nextSibling",Pt===m?Pt.nextSibling:Pt);Ft.length&&o(S(Ft)),pt(m,Pt)},yC=function(e){var r=[];if(e)for(var o=0;o<e.rangeCount;o++)r.push(e.getRangeAt(o));return r},oR=function(e){return fo(e,function(r){var o=Fb(r);return o?[lt.fromDom(o)]:[]})},eA=function(e){return yC(e).length>1},iR=function(e){return tn(oR(e),Gc)},tA=function(e){return ts(e,"td[data-mce-selected],th[data-mce-selected]")},Jh=function(e,r){var o=tA(r);return o.length>0?o:iR(e)},ld=function(e){return Jh(yC(e.selection.getSel()),lt.fromDom(e.getBody()))},Xv=function(e,r){return _v(e,"table",r)},l0=function(e){var r=e.startContainer,o=e.startOffset;return ia(r)?o===0?dt.some(lt.fromDom(r)):dt.none():dt.from(r.childNodes[o]).map(lt.fromDom)},wC=function(e){var r=e.endContainer,o=e.endOffset;return ia(r)?o===r.data.length?dt.some(lt.fromDom(r)):dt.none():dt.from(r.childNodes[o-1]).map(lt.fromDom)},nA=function(e){return Ue(e).fold(Et([e]),function(r){return[e].concat(nA(r))})},bp=function(e){return ft(e).fold(Et([e]),function(r){return Jo(r)==="br"?Uc(r).map(function(o){return[e].concat(bp(o))}).getOr([]):[e].concat(bp(r))})},yp=function(e,r){return As(l0(r),wC(r),function(o,u){var l=oa(nA(e),Mt(Wa,o)),c=oa(bp(e),Mt(Wa,u));return l.isSome()&&c.isSome()}).getOr(!1)},CC=function(e,r,o,u){var l=o,c=new vi(o,l),m=aa(e.schema.getMoveCaretBeforeOnEnterElements(),function(S,_){return!cn(["td","th","table"],_.toLowerCase())});do{if(ia(o)&&Zn.trim(o.nodeValue).length!==0){u?r.setStart(o,0):r.setEnd(o,o.nodeValue.length);return}if(m[o.nodeName]){u?r.setStartBefore(o):o.nodeName==="BR"?r.setEndBefore(o):r.setEndAfter(o);return}}while(o=u?c.next():c.prev());l.nodeName==="BODY"&&(u?r.setStart(l,0):r.setEnd(l,l.childNodes.length))},c0=function(e){var r=e.selection.getSel();return r&&r.rangeCount>0},SC=function(e,r){var o=ld(e);o.length>0?Fn(o,function(u){var l=u.dom,c=e.dom.createRng();c.setStartBefore(l),c.setEndAfter(l),r(c,!0)}):r(e.selection.getRng(),!1)},xC=function(e,r,o){var u=sk(e,r);o(u),e.moveToBookmark(u)},rA=function(e,r){var o=function(c){if(!e(c))throw new Error("Can only get "+r+" value of a "+r+" node");return u(c).getOr("")},u=function(c){return e(c)?dt.from(c.dom.nodeValue):dt.none()},l=function(c,m){if(!e(c))throw new Error("Can only set raw "+r+" value of a "+r+" node");c.dom.nodeValue=m};return{get:o,getOption:u,set:l}},aA=rA(qi,"text"),EC=function(e){return aA.get(e)},f0=function(e){return qi(e)&&EC(e)===En},hs=function(e,r,o,u){return Hi(r).fold(function(){return"skipping"},function(l){return u==="br"||f0(r)?"valid":Vd(r)?"existing":Vf(r.dom)?"caret":!hp(e,o,u)||!hp(e,Jo(l),o)?"invalid-child":"valid"})},_c=function(e,r){var o=Gv(e,r,[{inline:"span"}]);r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),e.selection.setRng(r)},Oc=function(e,r,o,u){var l=r.uid,c=l===void 0?q2("mce-annotation"):l,m=Hu(r,["uid"]),S=lt.fromTag("span",e);rp(S,Cl()),Ze(S,""+xu(),c),Ze(S,""+Ih(),o);var _=u(c,m),nt=_.attributes,pt=nt===void 0?{}:nt,bt=_.classes,Ct=bt===void 0?[]:bt;return gt(S,pt),IL(S,Ct),S},d0=function(e,r,o,u,l){var c=[],m=Oc(e.getDoc(),l,o,u),S=Hv(),_=function(){S.clear()},nt=function(){return S.get().getOrThunk(function(){var Pt=fu(m);return c.push(Pt),S.set(Pt),Pt})},pt=function(Pt){Fn(Pt,bt)},bt=function(Pt){var Ft=hs(e,Pt,"span",Jo(Pt));switch(Ft){case"invalid-child":{_();var zt=I(Pt);pt(zt),_();break}case"valid":{var Vt=nt();vo(Pt,Vt);break}}},Ct=function(Pt){var Ft=er(Pt,lt.fromDom);pt(Ft)};return Qh(e.dom,r,function(Pt){_(),Ct(Pt)}),c},kC=function(e,r,o,u){e.undoManager.transact(function(){var l=e.selection,c=l.getRng(),m=ld(e).length>0;if(c.collapsed&&!m&&_c(e,c),l.getRng().collapsed&&!m){var S=Oc(e.getDoc(),u,r,o.decorate);Vs(S,hl),l.getRng().insertNode(S.dom),l.select(S.dom)}else xC(l,!1,function(){SC(e,function(_){d0(e,_,r,o.decorate,u)})})})},oA=function(e){var r=Ow();_w(e,r);var o=W2(e);return{register:function(u,l){r.register(u,l)},annotate:function(u,l){r.lookup(u).each(function(c){kC(e,u,c,l)})},annotationChanged:function(u,l){o.addListener(u,l)},remove:function(u){V2(e,dt.some(u)).each(function(l){var c=l.elements;Fn(c,To)})},getAll:function(u){var l=j2(e,u);return Ar(l,function(c){return er(c,function(m){return m.dom})})}}},Yv=function(e){return{getBookmark:Mt(dC,e),moveToBookmark:Mt(Y3,e)}};Yv.isBookmarkNode=Sl;var wp=function(e,r){for(;r&&r!==e;){if(Ec(r)||Mi(r))return r;r=r.parentNode}return null},Zh=function(e,r,o){if(o.collapsed)return!1;if(Ra.browser.isIE()&&o.startOffset===o.endOffset-1&&o.startContainer===o.endContainer){var u=o.startContainer.childNodes[o.startOffset];if(ma(u))return hn(u.getClientRects(),function(l){return K2(l,e,r)})}return hn(o.getClientRects(),function(l){return K2(l,e,r)})},uR=function(e,r){return e.fire("PreProcess",r)},AC=function(e,r){return e.fire("PostProcess",r)},iA=function(e){return e.fire("remove")},uA=function(e){return e.fire("detach")},TC=function(e,r){return e.fire("SwitchMode",{mode:r})},_C=function(e,r,o,u,l){e.fire("ObjectResizeStart",{target:r,width:o,height:u,origin:l})},li=function(e,r,o,u,l){e.fire("ObjectResized",{target:r,width:o,height:u,origin:l})},Wf=function(e){return e.fire("PreInit")},sA=function(e){return e.fire("PostRender")},lA=function(e){return e.fire("Init")},cA=function(e,r){return e.fire("PlaceholderToggle",{state:r})},v0=function(e,r,o){return e.fire(r,o)},OC=function(e,r,o,u){return e.fire("FormatApply",{format:r,node:o,vars:u})},eg=function(e,r,o,u){return e.fire("FormatRemove",{format:r,node:o,vars:u})},qa={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||qa.metaKeyPressed(e)},metaKeyPressed:function(e){return Ra.mac?e.metaKey:e.ctrlKey&&!e.altKey}},sR=Mi,MC=function(e,r){var o="data-mce-selected",u=r.dom,l=Zn.each,c,m,S,_,nt,pt,bt,Ct,Pt,Ft,zt,Vt,rn,Qt,On,kn=r.getDoc(),mn=document,Ln=Math.abs,lr=Math.round,Tr=r.getBody(),$a,Zr,vr={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},_a=function(zn){return zn&&(zn.nodeName==="IMG"||r.dom.is(zn,"figure.image"))},Or=function(zn){return nl(zn)||u.hasClass(zn,"mce-preview-object")},Jr=function(zn,_r){if(zn.type==="longpress"||zn.type.indexOf("touch")===0){var kr=zn.touches[0];return _a(zn.target)&&!Zh(kr.clientX,kr.clientY,_r)}else return _a(zn.target)&&!Zh(zn.clientX,zn.clientY,_r)},Dr=function(zn){var _r=zn.target;Jr(zn,r.selection.getRng())&&!zn.isDefaultPrevented()&&r.selection.select(_r)},Ur=function(zn){return u.is(zn,"figure.image")?[zn.querySelector("img")]:u.hasClass(zn,"mce-preview-object")&&Ot(zn.firstElementChild)?[zn,zn.firstElementChild]:[zn]},fa=function(zn){var _r=wk(r);return!_r||zn.getAttribute("data-mce-resize")==="false"||zn===r.getBody()?!1:u.hasClass(zn,"mce-preview-object")?Kr(lt.fromDom(zn.firstElementChild),_r):Kr(lt.fromDom(zn),_r)},Sr=function(zn){return Or(zn)?u.create("img",{src:Ra.transparentSrc}):zn.cloneNode(!0)},ra=function(zn,_r,kr){if(Ot(kr)){var Na=Ur(zn);Fn(Na,function(Ia){Ia.style[_r]||!r.schema.isValid(Ia.nodeName.toLowerCase(),_r)?u.setStyle(Ia,_r,kr):u.setAttrib(Ia,_r,""+kr)})}},xo=function(zn,_r,kr){ra(zn,"width",_r),ra(zn,"height",kr)},Vo=function(zn){var _r,kr,Na,Ia,ii;_r=zn.screenX-pt,kr=zn.screenY-bt,Qt=_r*_[2]+Ft,On=kr*_[3]+zt,Qt=Qt<5?5:Qt,On=On<5?5:On,(_a(c)||Or(c))&&d3(r)!==!1?Na=!qa.modifierPressed(zn):Na=qa.modifierPressed(zn),Na&&(Ln(_r)>Ln(kr)?(On=lr(Qt*Vt),Qt=lr(On/Vt)):(Qt=lr(On/Vt),On=lr(Qt*Vt))),xo(m,Qt,On),Ia=_.startPos.x+_r,ii=_.startPos.y+kr,Ia=Ia>0?Ia:0,ii=ii>0?ii:0,u.setStyles(S,{left:Ia,top:ii,display:"block"}),S.innerHTML=Qt+" &times; "+On,_[2]<0&&m.clientWidth<=Qt&&u.setStyle(m,"left",Ct+(Ft-Qt)),_[3]<0&&m.clientHeight<=On&&u.setStyle(m,"top",Pt+(zt-On)),_r=Tr.scrollWidth-$a,kr=Tr.scrollHeight-Zr,_r+kr!==0&&u.setStyles(S,{left:Ia-_r,top:ii-kr}),rn||(_C(r,c,Ft,zt,"corner-"+_.name),rn=!0)},zo=function(){var zn=rn;rn=!1,zn&&(ra(c,"width",Qt),ra(c,"height",On)),u.unbind(kn,"mousemove",Vo),u.unbind(kn,"mouseup",zo),mn!==kn&&(u.unbind(mn,"mousemove",Vo),u.unbind(mn,"mouseup",zo)),u.remove(m),u.remove(S),u.remove(nt),Iu(c),zn&&(li(r,c,Qt,On,"corner-"+_.name),u.setAttrib(c,"style",u.getAttrib(c,"style"))),r.nodeChanged()},Iu=function(zn){xr();var _r=u.getPos(zn,Tr),kr=_r.x,Na=_r.y,Ia=zn.getBoundingClientRect(),ii=Ia.width||Ia.right-Ia.left,Au=Ia.height||Ia.bottom-Ia.top;c!==zn&&(Ri(),c=zn,Qt=On=0);var mu=r.fire("ObjectSelected",{target:zn}),ys=u.getAttrib(c,o,"1");fa(zn)&&!mu.isDefaultPrevented()?l(vr,function(ws,Xs){var pu,Xl=function(Ys){var Jf=Ur(c)[0];pt=Ys.screenX,bt=Ys.screenY,Ft=Jf.clientWidth,zt=Jf.clientHeight,Vt=zt/Ft,_=ws,_.name=Xs,_.startPos={x:ii*ws[0]+kr,y:Au*ws[1]+Na},$a=Tr.scrollWidth,Zr=Tr.scrollHeight,nt=u.add(Tr,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),u.setStyles(nt,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),m=Sr(c),u.addClass(m,"mce-clonedresizable"),u.setAttrib(m,"data-mce-bogus","all"),m.contentEditable="false",u.setStyles(m,{left:kr,top:Na,margin:0}),xo(m,ii,Au),m.removeAttribute(o),Tr.appendChild(m),u.bind(kn,"mousemove",Vo),u.bind(kn,"mouseup",zo),mn!==kn&&(u.bind(mn,"mousemove",Vo),u.bind(mn,"mouseup",zo)),S=u.add(Tr,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},Ft+" &times; "+zt)};pu=u.get("mceResizeHandle"+Xs),pu&&u.remove(pu),pu=u.add(Tr,"div",{id:"mceResizeHandle"+Xs,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Xs+"-resize; margin:0; padding:0"}),Ra.ie===11&&(pu.contentEditable=!1),u.bind(pu,"mousedown",function(Ys){Ys.stopImmediatePropagation(),Ys.preventDefault(),Xl(Ys)}),ws.elm=pu,u.setStyles(pu,{left:ii*ws[0]+kr-pu.offsetWidth/2,top:Au*ws[1]+Na-pu.offsetHeight/2})}):Ri(),u.getAttrib(c,o)||c.setAttribute(o,ys)},Ri=function(){xr(),c&&c.removeAttribute(o),Nr(vr,function(zn,_r){var kr=u.get("mceResizeHandle"+_r);kr&&(u.unbind(kr),u.remove(kr))})},Ms=function(zn){var _r,kr,Na=function(Ia,ii){if(Ia)do if(Ia===ii)return!0;while(Ia=Ia.parentNode)};if(!(rn||r.removed)){if(l(u.select("img[data-mce-selected],hr[data-mce-selected]"),function(Ia){Ia.removeAttribute(o)}),kr=zn.type==="mousedown"?zn.target:e.getNode(),kr=u.$(kr).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],Na(kr,Tr)&&(Fr(),_r=e.getStart(!0),Na(_r,kr)&&Na(e.getEnd(!0),kr))){Iu(kr);return}Ri()}},Tl=function(zn){return sR(wp(r.getBody(),zn))},xr=function(){Nr(vr,function(zn){zn.elm&&(u.unbind(zn.elm),delete zn.elm)})},Fr=function(){try{r.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(zn){}};r.on("init",function(){if(Fr(),Ra.browser.isIE()||Ra.browser.isEdge()){r.on("mousedown click",function(kr){var Na=kr.target,Ia=Na.nodeName;!rn&&/^(TABLE|IMG|HR)$/.test(Ia)&&!Tl(Na)&&(kr.button!==2&&r.selection.select(Na,Ia==="TABLE"),kr.type==="mousedown"&&r.nodeChanged())});var zn=function(kr){var Na=function(Ia){cs.setEditorTimeout(r,function(){return r.selection.select(Ia)})};if(Tl(kr.target)||nl(kr.target)){kr.preventDefault(),Na(kr.target);return}/^(TABLE|IMG|HR)$/.test(kr.target.nodeName)&&(kr.preventDefault(),kr.target.tagName==="IMG"&&Na(kr.target))};u.bind(Tr,"mscontrolselect",zn),r.on("remove",function(){return u.unbind(Tr,"mscontrolselect",zn)})}var _r=cs.throttle(function(kr){r.composing||Ms(kr)});r.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",_r),r.on("keyup compositionend",function(kr){c&&c.nodeName==="TABLE"&&_r(kr)}),r.on("hide blur",Ri),r.on("contextmenu longpress",Dr,!0)}),r.on("remove",xr);var Oa=function(){c=m=nt=null};return{isResizable:fa,showResizeRect:Iu,hideResizeRect:Ri,updateResizeRect:Ms,destroy:Oa}},lR=function(e){return Ec(e)||Mi(e)},DC=function(e,r,o){for(;e&&e!==r;){if(o(e))return e;e=e.parentNode}return null},cR=function(e,r,o){var u,l=o.elementFromPoint(e,r),c=o.body.createTextRange();if((!l||l.tagName==="HTML")&&(l=o.body),c.moveToElementText(l),u=Zn.toArray(c.getClientRects()),u=u.sort(function(m,S){return m=Math.abs(Math.max(m.top-r,m.bottom-r)),S=Math.abs(Math.max(S.top-r,S.bottom-r)),m-S}),u.length>0){r=(u[0].bottom+u[0].top)/2;try{return c.moveToPoint(e,r),c.collapse(!0),c}catch(m){}}return null},fA=function(e,r){var o=e&&e.parentElement?e.parentElement():null;return Mi(DC(o,r,lR))?null:e},NC=function(e,r,o){var u,l,c=o;if(c.caretPositionFromPoint)l=c.caretPositionFromPoint(e,r),l&&(u=o.createRange(),u.setStart(l.offsetNode,l.offset),u.collapse(!0));else if(c.caretRangeFromPoint)u=c.caretRangeFromPoint(e,r);else if(c.body.createTextRange){u=c.body.createTextRange();try{u.moveToPoint(e,r),u.collapse(!0)}catch(m){u=cR(e,r,o)}return fA(u,o.body)}return u},LC=function(e,r){return e&&r&&e.startContainer===r.startContainer&&e.startOffset===r.startOffset&&e.endContainer===r.endContainer&&e.endOffset===r.endOffset},fR=function(e,r,o){for(;e&&e!==r;){if(o(e))return e;e=e.parentNode}return null},jl=function(e,r,o){return fR(e,r,o)!==null},Ws=function(e,r,o){return jl(e,r,function(u){return u.nodeName===o})},Yd=function(e){return e&&e.nodeName==="TABLE"},dR=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},vR=function(e,r){return oc(e)&&jl(e,r,Vf)===!1},dA=function(e,r,o){for(var u=new vi(r,e.getParent(r.parentNode,e.isBlock)||e.getRoot());r=u[o?"prev":"next"]();)if(ui(r))return!0},Oo=function(e,r){return e.previousSibling&&e.previousSibling.nodeName===r},mR=function(e,r){for(;r&&r!==e;){if(Mi(r))return!0;r=r.parentNode}return!1},m0=function(e,r,o,u,l){var c,m=e.getRoot(),S,_=e.schema.getNonEmptyElements(),nt=e.getParent(l.parentNode,e.isBlock)||m;if(u&&ui(l)&&r&&e.isEmpty(nt))return dt.some(Jn(l.parentNode,e.nodeIndex(l)));for(var pt=new vi(l,nt);S=pt[u?"prev":"next"]();){if(e.getContentEditableParent(S)==="false"||vR(S,m))return dt.none();if(ia(S)&&S.nodeValue.length>0)return Ws(S,m,"A")===!1?dt.some(Jn(S,u?S.nodeValue.length:0)):dt.none();if(e.isBlock(S)||_[S.nodeName.toLowerCase()])return dt.none();c=S}return o&&c?dt.some(Jn(c,0)):dt.none()},p0=function(e,r,o,u){var l,c,m=e.getRoot(),S,_,nt=!1;l=u[(o?"start":"end")+"Container"],c=u[(o?"start":"end")+"Offset"];var pt=ma(l)&&c===l.childNodes.length,bt=e.schema.getNonEmptyElements();if(_=o,oc(l))return dt.none();if(ma(l)&&c>l.childNodes.length-1&&(_=!1),bh(l)&&(l=m,c=0),l===m){if(_&&(S=l.childNodes[c>0?c-1:0],S&&(oc(S)||bt[S.nodeName]||Yd(S))))return dt.none();if(l.hasChildNodes()){if(c=Math.min(!_&&c>0?c-1:c,l.childNodes.length-1),l=l.childNodes[c],c=ia(l)&&pt?l.data.length:0,!r&&l===m.lastChild&&Yd(l)||mR(m,l)||oc(l))return dt.none();if(l.hasChildNodes()&&Yd(l)===!1){S=l;var Ct=new vi(l,m);do{if(Mi(S)||oc(S)){nt=!1;break}if(ia(S)&&S.nodeValue.length>0){c=_?0:S.nodeValue.length,l=S,nt=!0;break}if(bt[S.nodeName.toLowerCase()]&&!dR(S)){c=e.nodeIndex(S),l=S.parentNode,_||c++,nt=!0;break}}while(S=_?Ct.next():Ct.prev())}}}return r&&(ia(l)&&c===0&&m0(e,pt,r,!0,l).each(function(Pt){l=Pt.container(),c=Pt.offset(),nt=!0}),ma(l)&&(S=l.childNodes[c],S||(S=l.childNodes[c-1]),S&&ui(S)&&!Oo(S,"A")&&!dA(e,S,!1)&&!dA(e,S,!0)&&m0(e,pt,r,!0,S).each(function(Pt){l=Pt.container(),c=Pt.offset(),nt=!0}))),_&&!r&&ia(l)&&c===l.nodeValue.length&&m0(e,pt,r,!1,l).each(function(Pt){l=Pt.container(),c=Pt.offset(),nt=!0}),nt?dt.some(Jn(l,c)):dt.none()},h0=function(e,r){var o=r.collapsed,u=r.cloneRange(),l=Jn.fromRangeStart(r);return p0(e,o,!0,u).each(function(c){(!o||!Jn.isAbove(l,c))&&u.setStart(c.container(),c.offset())}),o||p0(e,o,!1,u).each(function(c){u.setEnd(c.container(),c.offset())}),o&&u.collapse(!0),LC(r,u)?dt.none():dt.some(u)},g0=function(e,r){return e.splitText(r)},b0=function(e){var r=e.startContainer,o=e.startOffset,u=e.endContainer,l=e.endOffset;return r===u&&ia(r)?o>0&&o<r.nodeValue.length&&(u=g0(r,o),r=u.previousSibling,l>o?(l=l-o,r=u=g0(u,l).previousSibling,l=u.nodeValue.length,o=0):l=0):(ia(r)&&o>0&&o<r.nodeValue.length&&(r=g0(r,o),o=0),ia(u)&&l>0&&l<u.nodeValue.length&&(u=g0(u,l).previousSibling,l=u.nodeValue.length)),{startContainer:r,startOffset:o,endContainer:u,endOffset:l}},tg=function(e){var r=function(l,c){return Qh(e,l,c)},o=b0,u=function(l){return h0(e,l).fold(vt,function(c){return l.setStart(c.startContainer,c.startOffset),l.setEnd(c.endContainer,c.endOffset),!0})};return{walk:r,split:o,normalize:u}};tg.compareRanges=LC,tg.getCaretRangeFromPoint=NC,tg.getSelectedNode=Fb,tg.getNode=Ff;var pR=function(e,r){var o=function(S,_){if(!xt(_)&&!_.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+_);var nt=S.dom;Li(nt)&&(nt.style[e]=_+"px")},u=function(S){var _=r(S);if(_<=0||_===null){var nt=_o(S,e);return parseFloat(nt)||0}return _},l=u,c=function(S,_){return Rr(_,function(nt,pt){var bt=_o(S,pt),Ct=bt===void 0?0:parseInt(bt,10);return isNaN(Ct)?nt:nt+Ct},0)},m=function(S,_,nt){var pt=c(S,nt),bt=_>pt?_-pt:0;return bt};return{set:o,get:u,getOuter:l,aggregate:c,max:m}},hR=pR("height",function(e){var r=e.dom;return di(e)?r.getBoundingClientRect().height:r.offsetHeight}),RC=function(e){return hR.get(e)},y0=function(e,r){var o=e.view(r);return o.fold(Et([]),function(u){var l=e.owner(u),c=y0(e,l);return[u].concat(c)})},vA=function(e,r){var o=r.owner(e);return y0(r,o)},gR=function(e){var r,o=e.dom===document?dt.none():dt.from((r=e.dom.defaultView)===null||r===void 0?void 0:r.frameElement);return o.map(lt.fromDom)},bR=function(e){return Qa(e)},yR=Object.freeze({__proto__:null,view:gR,owner:bR}),wR=function(e){var r=lt.fromDom(document),o=Df(r),u=vA(e,yR),l=Uu(e),c=Mn(u,function(m,S){var _=Uu(S);return{left:m.left+_.left,top:m.top+_.top}},{left:0,top:0});return ls(c.left+l.left+o.left,c.top+l.top+o.top)},BC=function(e){return Jo(e)==="textarea"},CR=function(e,r){var o=e.fire("ScrollIntoView",r);return o.isDefaultPrevented()},Pa=function(e,r){e.fire("AfterScrollIntoView",r)},mA=function(e,r){var o=I(e);if(o.length===0||BC(e))return{element:e,offset:r};if(r<o.length&&!BC(o[r]))return{element:o[r],offset:0};var u=o[o.length-1];return BC(u)?{element:e,offset:r}:Jo(u)==="img"?{element:u,offset:1}:qi(u)?{element:u,offset:EC(u).length}:{element:u,offset:I(u).length}},pA=function(e,r){var o=Ki(e),u=RC(e);return{element:e,bottom:o.top+u,height:u,pos:o,cleanup:r}},SR=function(e,r){var o=mA(e,r),u=lt.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+En+"</span>");return sa(o.element,u),pA(u,function(){return ca(u)})},ng=function(e){return pA(lt.fromDom(e),it)},hA=function(e,r,o,u){PC(e,function(l,c){return xR(e,r,o,u)},o)},gA=function(e,r,o,u,l){var c={elm:u.element.dom,alignToTop:l};if(!CR(e,c)){var m=Df(r).top;o(r,m,u,l),Pa(e,c)}},xR=function(e,r,o,u){var l=lt.fromDom(e.getBody()),c=lt.fromDom(e.getDoc());WN(l);var m=SR(lt.fromDom(o.startContainer),o.startOffset);gA(e,c,r,m,u),m.cleanup()},bA=function(e,r,o,u){var l=lt.fromDom(e.getDoc());gA(e,l,o,ng(r),u)},PC=function(e,r,o){var u=o.startContainer,l=o.startOffset,c=o.endContainer,m=o.endOffset;r(lt.fromDom(u),lt.fromDom(c));var S=e.dom.createRng();S.setStart(u,l),S.setEnd(c,m),e.selection.setRng(o)},IC=function(e,r,o,u){var l=e.pos;if(o)Ji(l.left,l.top,u);else{var c=l.top-r+e.height;Ji(l.left,c,u)}},yA=function(e,r,o,u,l){var c=o+r,m=u.pos.top,S=u.bottom,_=S-m>=o;if(m<r)IC(u,o,l!==!1,e);else if(m>c){var nt=_?l!==!1:l===!0;IC(u,o,nt,e)}else S>c&&!_&&IC(u,o,l===!0,e)},FC=function(e,r,o,u){var l=e.dom.defaultView.innerHeight;yA(e,r,l,o,u)},HC=function(e,r,o,u){var l=e.dom.defaultView.innerHeight;yA(e,r,l,o,u);var c=wR(o.element),m=Ll(window);c.top<m.y?Sc(o.element,u!==!1):c.top>m.bottom&&Sc(o.element,u===!0)},wA=function(e,r,o){return hA(e,FC,r,o)},ER=function(e,r,o){return bA(e,r,FC,o)},kR=function(e,r,o){return hA(e,HC,r,o)},CA=function(e,r,o){return bA(e,r,HC,o)},AR=function(e,r,o){var u=e.inline?ER:CA;u(e,r,o)},rg=function(e,r,o){var u=e.inline?wA:kR;u(e,r,o)},ni=function(){return lt.fromDom(document)},TR=function(e){return e.dom.focus()},cd=function(e){var r=Vr(e).dom;return e.dom===r.activeElement},Mc=function(e){return e===void 0&&(e=ni()),dt.from(e.dom.activeElement).map(lt.fromDom)},w0=function(e){return Mc(Vr(e)).filter(function(r){return e.dom.contains(r.dom)})},xl=function(e,r,o,u){return{start:e,soffset:r,finish:o,foffset:u}},C0={create:xl},Qv=Ba.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),S0=function(e,r,o,u){return e.fold(r,o,u)},Cp=function(e){return e.fold(Ht,Ht,Ht)},_R=Qv.before,OR=Qv.on,MR=Qv.after,DR={before:_R,on:OR,after:MR,cata:S0,getStart:Cp},ko=Ba.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),df=function(e){return ko.exact(e.start,e.soffset,e.finish,e.foffset)},Sp=function(e){return e.match({domRange:function(r){return lt.fromDom(r.startContainer)},relative:function(r,o){return DR.getStart(r)},exact:function(r,o,u,l){return r}})},NR=ko.domRange,ag=ko.relative,Bo=ko.exact,LR=function(e){var r=Sp(e);return Cc(r)},SA=C0.create,og={domRange:NR,relative:ag,exact:Bo,exactFromRange:df,getWin:LR,range:SA},xA=Ea().browser,ig=function(e,r){var o=qi(r)?EC(r).length:I(r).length+1;return e>o?o:e<0?0:e},Jv=function(e){return og.range(e.start,ig(e.soffset,e.start),e.finish,ig(e.foffset,e.finish))},zC=function(e,r){return!Ta(r.dom)&&(ei(e,r)||Wa(e,r))},$C=function(e){return function(r){return zC(e,r.start)&&zC(e,r.finish)}},EA=function(e){return e.inline===!0||xA.isIE()},kA=function(e){return og.range(lt.fromDom(e.startContainer),e.startOffset,lt.fromDom(e.endContainer),e.endOffset)},ug=function(e){var r=e.getSelection(),o=!r||r.rangeCount===0?dt.none():dt.from(r.getRangeAt(0));return o.map(kA)},xp=function(e){var r=Cc(e);return ug(r.dom).filter($C(e))},RR=function(e,r){return dt.from(r).filter($C(e)).map(Jv)},AA=function(e){var r=document.createRange();try{return r.setStart(e.start.dom,e.soffset),r.setEnd(e.finish.dom,e.foffset),dt.some(r)}catch(o){return dt.none()}},x0=function(e){var r=EA(e)?xp(lt.fromDom(e.getBody())):dt.none();e.bookmark=r.isSome()?r:e.bookmark},BR=function(e,r){var o=lt.fromDom(e.getBody()),u=EA(e)?dt.from(r):dt.none(),l=u.map(kA).filter($C(o));e.bookmark=l.isSome()?l:e.bookmark},VC=function(e){var r=e.bookmark?e.bookmark:dt.none();return r.bind(function(o){return RR(lt.fromDom(e.getBody()),o)}).bind(AA)},TA=function(e){VC(e).each(function(r){return e.selection.setRng(r)})},PR=function(e){var r=e.className.toString();return r.indexOf("tox-")!==-1||r.indexOf("mce-")!==-1},_A={isEditorUIElement:PR},OA=function(e){return e.type==="nodechange"&&e.selectionChange},UC=function(e,r){var o=function(){r.throttle()};Oi.DOM.bind(document,"mouseup",o),e.on("remove",function(){Oi.DOM.unbind(document,"mouseup",o)})},jC=function(e){e.on("focusout",function(){x0(e)})},WC=function(e,r){e.on("mouseup touchend",function(o){r.throttle()})},MA=function(e,r){var o=Ea().browser;o.isIE()?jC(e):WC(e,r),e.on("keyup NodeChange",function(u){OA(u)||x0(e)})},DA=function(e){var r=Nb(function(){x0(e)},0);e.on("init",function(){e.inline&&UC(e,r),MA(e,r)}),e.on("remove",function(){r.cancel()})},Ep,kp=Oi.DOM,IR=function(e){return _A.isEditorUIElement(e)},NA=function(e){var r=e.classList;return r!==void 0?r.contains("tox-edit-area")||r.contains("tox-edit-area__iframe")||r.contains("mce-content-body"):!1},E0=function(e,r){var o=Yw(e),u=kp.getParent(r,function(l){return IR(l)||(o?e.dom.is(l,o):!1)});return u!==null},LA=function(e){try{var r=Vr(lt.fromDom(e.getElement()));return Mc(r).fold(function(){return document.body},function(o){return o.dom})}catch(o){return document.body}},RA=function(e,r){var o=r.editor;DA(o),o.on("focusin",function(){var u=e.focusedEditor;u!==o&&(u&&u.fire("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.fire("focus",{blurredEditor:u}),o.focus(!0))}),o.on("focusout",function(){cs.setEditorTimeout(o,function(){var u=e.focusedEditor;!E0(o,LA(o))&&u===o&&(o.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Ep||(Ep=function(u){var l=e.activeEditor;l&&na(u).each(function(c){c.ownerDocument===document&&c!==document.body&&!E0(l,c)&&e.focusedEditor===l&&(l.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})},kp.bind(document,"focusin",Ep))},BA=function(e,r){e.focusedEditor===r.editor&&(e.focusedEditor=null),e.activeEditor||(kp.unbind(document,"focusin",Ep),Ep=null)},PA=function(e){e.on("AddEditor",Mt(RA,e)),e.on("RemoveEditor",Mt(BA,e))},IA=function(e,r){return e.dom.getParent(r,function(o){return e.dom.getContentEditable(o)==="true"})},FR=function(e){return e.collapsed?dt.from(Ff(e.startContainer,e.startOffset)).map(lt.fromDom):dt.none()},HR=function(e,r){return FR(r).bind(function(o){return ti(o)?dt.some(o):ei(e,o)===!1?dt.some(e):dt.none()})},FA=function(e,r){HR(lt.fromDom(e.getBody()),r).bind(function(o){return js(o.dom)}).fold(function(){e.selection.normalize()},function(o){return e.selection.setRng(o.toRange())})},qC=function(e){if(e.setActive)try{e.setActive()}catch(r){e.focus()}else e.focus()},zR=function(e){return cd(e)||w0(e).isSome()},$R=function(e){return e.iframeElement&&cd(lt.fromDom(e.iframeElement))},VR=function(e){var r=e.getBody();return r&&zR(lt.fromDom(r))},UR=function(e){var r=Vr(lt.fromDom(e.getElement()));return Mc(r).filter(function(o){return!NA(o.dom)&&E0(e,o.dom)}).isSome()},qf=function(e){return e.inline?VR(e):$R(e)},HA=function(e){return qf(e)||UR(e)},jR=function(e){var r=e.selection,o=e.getBody(),u=r.getRng();e.quirks.refreshContentEditable(),e.bookmark!==void 0&&qf(e)===!1&&VC(e).each(function(c){e.selection.setRng(c),u=c});var l=IA(e,r.getNode());if(e.$.contains(o,l)){qC(l),FA(e,u),k0(e);return}e.inline||(Ra.opera||qC(o),e.getWin().focus()),(Ra.gecko||e.inline)&&(qC(o),FA(e,u)),k0(e)},k0=function(e){return e.editorManager.setActive(e)},zA=function(e,r){e.removed||(r?k0(e):jR(e))},$A=function(e,r,o,u,l){var c=o?r.startContainer:r.endContainer,m=o?r.startOffset:r.endOffset;return dt.from(c).map(lt.fromDom).map(function(S){return!u||!r.collapsed?k(S,l(S,m)).getOr(S):S}).bind(function(S){return Ti(S)?dt.some(S):Hi(S).filter(Ti)}).map(function(S){return S.dom}).getOr(e)},VA=function(e,r,o){return $A(e,r,!0,o,function(u,l){return Math.min(Bt(u),l)})},UA=function(e,r,o){return $A(e,r,!1,o,function(u,l){return l>0?l-1:l})},jA=function(e,r){for(var o=e;e&&ia(e)&&e.length===0;)e=r?e.nextSibling:e.previousSibling;return e||o},WR=function(e,r){var o,u,l;if(!r)return e;u=r.startContainer,l=r.endContainer;var c=r.startOffset,m=r.endOffset;return o=r.commonAncestorContainer,!r.collapsed&&(u===l&&m-c<2&&u.hasChildNodes()&&(o=u.childNodes[c]),u.nodeType===3&&l.nodeType===3&&(u.length===c?u=jA(u.nextSibling,!0):u=u.parentNode,m===0?l=jA(l.previousSibling,!1):l=l.parentNode,u&&u===l))?u:o&&o.nodeType===3?o.parentNode:o},A0=function(e,r,o,u){var l,c=[],m=e.getRoot();if(o=e.getParent(o||VA(m,r,r.collapsed),e.isBlock),u=e.getParent(u||UA(m,r,r.collapsed),e.isBlock),o&&o!==m&&c.push(o),o&&u&&o!==u){l=o;for(var S=new vi(o,m);(l=S.next())&&l!==u;)e.isBlock(l)&&c.push(l)}return u&&o!==u&&u!==m&&c.push(u),c},qR=function(e,r,o){return dt.from(r).map(function(u){var l=e.nodeIndex(u),c=e.createRng();return c.setStart(u.parentNode,l),c.setEnd(u.parentNode,l+1),o&&(CC(e,c,u,!0),CC(e,c,u,!1)),c})},KC=function(e,r){return er(r,function(o){var u=e.fire("GetSelectionRange",{range:o});return u.range!==o?u.range:o})},GC={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},T0=function(e,r,o){var u=o?"lastChild":"firstChild",l=o?"prev":"next";if(e[u])return e[u];if(e!==r){var c=e[l];if(c)return c;for(var m=e.parent;m&&m!==r;m=m.parent)if(c=m[l],c)return c}},WA=function(e){if(!Xc(e.value))return!1;var r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(e.value))},XC=function(e){var r=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||r},dc=function(){function e(r,o){this.name=r,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}return e.create=function(r,o){var u=new e(r,GC[r]||1);return o&&Nr(o,function(l,c){u.attr(c,l)}),u},e.prototype.replace=function(r){var o=this;return r.parent&&r.remove(),o.insert(r,o),o.remove(),o},e.prototype.attr=function(r,o){var u=this,l;if(typeof r!="string")return r!=null&&Nr(r,function(m,S){u.attr(S,m)}),u;if(l=u.attributes){if(o!==void 0){if(o===null){if(r in l.map){delete l.map[r];for(var c=l.length;c--;)if(l[c].name===r)return l.splice(c,1),u}return u}if(r in l.map){for(var c=l.length;c--;)if(l[c].name===r){l[c].value=o;break}}else l.push({name:r,value:o});return l.map[r]=o,u}return l.map[r]}},e.prototype.clone=function(){var r=this,o=new e(r.name,r.type),u;if(u=r.attributes){var l=[];l.map={};for(var c=0,m=u.length;c<m;c++){var S=u[c];S.name!=="id"&&(l[l.length]={name:S.name,value:S.value},l.map[S.name]=S.value)}o.attributes=l}return o.value=r.value,o.shortEnded=r.shortEnded,o},e.prototype.wrap=function(r){var o=this;return o.parent.insert(r,o),r.append(o),o},e.prototype.unwrap=function(){for(var r=this,o=r.firstChild;o;){var u=o.next;r.insert(o,r,!0),o=u}r.remove()},e.prototype.remove=function(){var r=this,o=r.parent,u=r.next,l=r.prev;return o&&(o.firstChild===r?(o.firstChild=u,u&&(u.prev=null)):l.next=u,o.lastChild===r?(o.lastChild=l,l&&(l.next=null)):u.prev=l,r.parent=r.next=r.prev=null),r},e.prototype.append=function(r){var o=this;r.parent&&r.remove();var u=o.lastChild;return u?(u.next=r,r.prev=u,o.lastChild=r):o.lastChild=o.firstChild=r,r.parent=o,r},e.prototype.insert=function(r,o,u){r.parent&&r.remove();var l=o.parent||this;return u?(o===l.firstChild?l.firstChild=r:o.prev.next=r,r.prev=o.prev,r.next=o,o.prev=r):(o===l.lastChild?l.lastChild=r:o.next.prev=r,r.next=o.next,r.prev=o,o.next=r),r.parent=l,r},e.prototype.getAll=function(r){for(var o=this,u=[],l=o.firstChild;l;l=T0(l,o))l.name===r&&u.push(l);return u},e.prototype.children=function(){for(var r=this,o=[],u=r.firstChild;u;u=u.next)o.push(u);return o},e.prototype.empty=function(){var r=this;if(r.firstChild){for(var o=[],u=r.firstChild;u;u=T0(u,r))o.push(u);for(var l=o.length;l--;){var u=o[l];u.parent=u.firstChild=u.lastChild=u.next=u.prev=null}}return r.firstChild=r.lastChild=null,r},e.prototype.isEmpty=function(r,o,u){o===void 0&&(o={});var l=this,c=l.firstChild;if(XC(l))return!1;if(c)do{if(c.type===1){if(c.attr("data-mce-bogus"))continue;if(r[c.name]||XC(c))return!1}if(c.type===8||c.type===3&&!WA(c)||c.type===3&&c.parent&&o[c.parent.name]&&Xc(c.value)||u&&u(c))return!1}while(c=T0(c,l));return!0},e.prototype.walk=function(r){return T0(this,null,r)},e}(),KR=Zn.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),qA=function(e){return Ye(e.nodeValue)&&Qn(e.nodeValue,En)},KA=function(e){return(e.length===0?"":er(e,function(r){return"["+r+"]"}).join(",")+",")+'[data-mce-bogus="all"]'},GR=function(e,r){return r.querySelectorAll(KA(e))},sg=function(e,r,o){return document.createTreeWalker(e,r,o,!1)},YC=function(e){return sg(e,NodeFilter.SHOW_COMMENT,function(r){return qA(r)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP})},QC=function(e){return sg(e,NodeFilter.SHOW_TEXT,function(r){if(qA(r)){var o=r.parentNode;return o&&Ka(KR,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP})},GA=function(e){return YC(e).nextNode()!==null},XA=function(e){return QC(e).nextNode()!==null},XR=function(e,r){return r.querySelector(KA(e))!==null},YR=function(e,r){Fn(GR(e,r),function(o){var u=lt.fromDom(o);kt(u,"data-mce-bogus")==="all"?ca(u):Fn(e,function(l){An(u,l)&&nr(u,l)})})},YA=function(e){for(var r=e.nextNode();r!==null;)r.nodeValue=null,r=e.nextNode()},QR=yt(YA,YC),JR=yt(YA,QC),QA=function(e,r){var o=[{condition:Mt(XR,r),action:Mt(YR,r)},{condition:GA,action:QR},{condition:XA,action:JR}],u=e,l=!1;return Fn(o,function(c){var m=c.condition,S=c.action;m(u)&&(l||(u=e.cloneNode(!0),l=!0),S(u))}),u},ZR=function(e,r){var o=ps(e),u=new RegExp("^(<"+o+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+o+`>[\r
]*|<br \\/>[\r
]*)$`);return r.replace(u,"")},e4=function(e,r){return Ca(Ca({},e),{format:r,get:!0,getInner:!0})},t4=function(e,r,o,u){var l=e4(r,o),c=r.no_events?l:e.fire("BeforeGetContent",l),m;return c.format==="raw"?m=Zn.trim(bl(QA(u,e.serializer.getTempAttrs()).innerHTML)):c.format==="text"?m=e.dom.isEmpty(u)?"":bl(u.innerText||u.textContent):c.format==="tree"?m=e.serializer.serialize(u,c):m=ZR(e,e.serializer.serialize(u,c)),!cn(["text","tree"],c.format)&&!Eh(lt.fromDom(u))?c.content=Zn.trim(m):c.content=m,c.no_events?c.content:e.fire("GetContent",c).content},n4=function(e,r,o){return dt.from(e.getBody()).fold(Et(r.format==="tree"?new dc("body",11):""),function(u){return t4(e,r,o,u)})},r4=Zn.each,JA=function(e){var r=function(o,u){if(o.nodeName!==u.nodeName)return!1;var l=function(m){var S={};return r4(e.getAttribs(m),function(_){var nt=_.nodeName.toLowerCase();nt.indexOf("_")!==0&&nt!=="style"&&nt.indexOf("data-")!==0&&(S[nt]=e.getAttrib(m,nt))}),S},c=function(m,S){var _,nt;for(nt in m)if(Ka(m,nt)){if(_=S[nt],typeof _=="undefined"||m[nt]!==_)return!1;delete S[nt]}for(nt in S)if(Ka(S,nt))return!1;return!0};return!c(l(o),l(u))||!c(e.parseStyle(e.getAttrib(o,"style")),e.parseStyle(e.getAttrib(u,"style")))?!1:!Sl(o)&&!Sl(u)};return{compare:r}},lg=Zn.makeMap,JC=function(e){var r=[];e=e||{};var o=e.indent,u=lg(e.indent_before||""),l=lg(e.indent_after||""),c=Yc.getEncodeFunc(e.entity_encoding||"raw",e.entities),m=e.element_format==="html";return{start:function(S,_,nt){var pt,bt,Ct,Pt;if(o&&u[S]&&r.length>0&&(Pt=r[r.length-1],Pt.length>0&&Pt!==`
`&&r.push(`
`)),r.push("<",S),_)for(pt=0,bt=_.length;pt<bt;pt++)Ct=_[pt],r.push(" ",Ct.name,'="',c(Ct.value,!0),'"');!nt||m?r[r.length]=">":r[r.length]=" />",nt&&o&&l[S]&&r.length>0&&(Pt=r[r.length-1],Pt.length>0&&Pt!==`
`&&r.push(`
`))},end:function(S){var _;r.push("</",S,">"),o&&l[S]&&r.length>0&&(_=r[r.length-1],_.length>0&&_!==`
`&&r.push(`
`))},text:function(S,_){S.length>0&&(r[r.length]=_?S:c(S))},cdata:function(S){r.push("<![CDATA[",S,"]]>")},comment:function(S){r.push("<!--",S,"-->")},pi:function(S,_){_?r.push("<?",S," ",c(_),"?>"):r.push("<?",S,"?>"),o&&r.push(`
`)},doctype:function(S){r.push("<!DOCTYPE",S,">",o?`
`:"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}},Zv=function(e,r){r===void 0&&(r=Hl());var o=JC(e);e=e||{},e.validate="validate"in e?e.validate:!0;var u=function(l){var c=e.validate,m={3:function(_){o.text(_.value,_.raw)},8:function(_){o.comment(_.value)},7:function(_){o.pi(_.name,_.value)},10:function(_){o.doctype(_.value)},4:function(_){o.cdata(_.value)},11:function(_){if(_=_.firstChild)do S(_);while(_=_.next)}};o.reset();var S=function(_){var nt=m[_.type];if(nt)nt(_);else{var pt=_.name,bt=_.shortEnded,Ct=_.attributes;if(c&&Ct&&Ct.length>1){var Pt=[];Pt.map={};var Ft=r.getElementRule(_.name);if(Ft){for(var zt=0,Vt=Ft.attributesOrder.length;zt<Vt;zt++){var rn=Ft.attributesOrder[zt];if(rn in Ct.map){var Qt=Ct.map[rn];Pt.map[rn]=Qt,Pt.push({name:rn,value:Qt})}}for(var zt=0,Vt=Ct.length;zt<Vt;zt++){var rn=Ct[zt].name;if(!(rn in Pt.map)){var Qt=Ct.map[rn];Pt.map[rn]=Qt,Pt.push({name:rn,value:Qt})}}Ct=Pt}}if(o.start(_.name,Ct,bt),!bt){if(_=_.firstChild)do S(_);while(_=_.next);o.end(pt)}}};return l.type===1&&!e.inner?S(l):m[11](l),o.getContent()};return{serialize:u}},ZA=new Set;(function(){var e=["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"];Fn(e,function(r){ZA.add(r)})})();var eT=["font","text-decoration","text-emphasis"],ZC=function(e,r){return cr(e.parseStyle(e.getAttrib(r,"style")))},a4=function(e){return ZA.has(e)},o4=function(e,r){return oo(ZC(e,r),function(o){return!a4(o)})},i4=function(e){return tn(e,function(r){return hn(eT,function(o){return mt(r,o)})})},tT=function(e,r,o){var u=ZC(e,r),l=ZC(e,o),c=function(m){var S=e.getStyle(r,m),_=e.getStyle(o,m);return Bn(S)&&Bn(_)&&S!==_};return hn(u,function(m){var S=function(nt){return hn(nt,function(pt){return pt===m})};if(!S(l)&&S(eT)){var _=i4(l);return hn(_,c)}else return c(m)})},nT=function(e,r,o){return dt.from(o.container()).filter(ia).exists(function(u){var l=e?0:-1;return r(u.data.charAt(o.offset()+l))})},_0=Mt(nT,!0,Xd),O0=Mt(nT,!1,Xd),u4=function(e){var r=e.container();return ia(r)&&(r.data.length===0||gl(r.data)&&Yv.isBookmarkNode(r.parentNode))},Qd=function(e,r){return function(o){return dt.from(Yb(e?0:-1,o)).filter(r).isSome()}},rT=function(e){return yh(e)&&_o(lt.fromDom(e),"display")==="block"},aT=function(e){return Mi(e)&&!Zi(e)},s4=Qd(!0,rT),l4=Qd(!1,rT),Ap=Qd(!0,nl),Tp=Qd(!1,nl),oT=Qd(!0,au),iT=Qd(!1,au),Jd=Qd(!0,aT),Zd=Qd(!1,aT),c4=function(e){for(var r=[],o=e.dom;o;)r.push(lt.fromDom(o)),o=o.lastChild;return r},f4=function(e){var r=ts(e,"br"),o=tn(c4(e).slice(-1),Fm);r.length===o.length&&Fn(o,ca)},em=function(e){co(e),xa(e,lt.fromHtml('<br data-mce-bogus="1">'))},d4=function(e){ft(e).each(function(r){Uc(r).each(function(o){rc(e)&&Fm(r)&&rc(o)&&ca(r)})})},v4=function(e){return e.slice(0,-1)},m4=function(e,r,o){return ei(r,e)?v4(Dm(e,function(u){return o(u)||Wa(u,r)})):[]},uT=function(e,r){return m4(e,r,vt)},Da=function(e,r){return[e].concat(uT(e,r))},eS=function(e,r,o){return lC(e,r,o,u4)},M0=function(e,r){return oa(Da(lt.fromDom(r.container()),e),rc)},sT=function(e,r,o){return eS(e,r.dom,o).forall(function(u){return M0(r,o).fold(function(){return sf(u,o,r.dom)===!1},function(l){return sf(u,o,r.dom)===!1&&ei(l,lt.fromDom(u.container()))})})},lT=function(e,r,o){return M0(r,o).fold(function(){return eS(e,r.dom,o).forall(function(u){return sf(u,o,r.dom)===!1})},function(u){return eS(e,u.dom,o).isNone()})},D0=Mt(lT,!1),cg=Mt(lT,!0),cT=Mt(sT,!1),p4=Mt(sT,!0),h4=function(e){return Jb(e).exists(Fm)},eo=function(e,r,o){var u=tn(Da(lt.fromDom(o.container()),r),rc),l=dr(u).getOr(r);return Vl(e,l.dom,o).filter(h4)},tS=function(e,r){return Jb(r).exists(Fm)||eo(!0,e,r).isSome()},mo=function(e,r){return $3(r).exists(Fm)||eo(!1,e,r).isSome()},fT=Mt(eo,!1),g4=Mt(eo,!0),dT=function(e){return Jn.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},vT=function(e,r){var o=tn(Da(lt.fromDom(r.container()),e),rc);return dr(o).getOr(e)},mT=function(e,r){return dT(r)?O0(r):O0(r)||cf(vT(e,r).dom,r).exists(O0)},pT=function(e,r){return dT(r)?_0(r):_0(r)||lf(vT(e,r).dom,r).exists(_0)},b4=function(e){return cn(["pre","pre-wrap"],e)},nS=function(e){return Jb(e).bind(function(r){return ib(r,Ti)}).exists(function(r){return b4(_o(r,"white-space"))})},to=function(e,r){return cf(e.dom,r).isNone()},y4=function(e,r){return lf(e.dom,r).isNone()},hT=function(e,r){return to(e,r)||y4(e,r)||D0(e,r)||cg(e,r)||mo(e,r)||tS(e,r)},gT=function(e,r){return nS(r)?!1:hT(e,r)||mT(e,r)||pT(e,r)},fg=function(e,r){return nS(r)?!1:D0(e,r)||cT(e,r)||mo(e,r)||mT(e,r)},bT=function(e){var r=e.container(),o=e.offset();return ia(r)&&o<r.data.length?Jn(r,o+1):e},dg=function(e,r){return nS(r)?!1:cg(e,r)||p4(e,r)||tS(e,r)||pT(e,r)},N0=function(e,r){return fg(e,r)||dg(e,bT(r))},yT=function(e,r){return Kv(e.charAt(r))},wT=function(e){var r=e.container();return ia(r)&&Qn(r.data,hl)},w4=function(e){var r=e.split("");return er(r,function(o,u){return Kv(o)&&u>0&&u<r.length-1&&n0(r[u-1])&&n0(r[u+1])?" ":o}).join("")},C4=function(e,r){var o=r.data,u=Jn(r,0);return yT(o,0)&&!N0(e,u)?(r.data=" "+o.slice(1),!0):!1},S4=function(e){var r=e.data,o=w4(r);return o!==r?(e.data=o,!0):!1},x4=function(e,r){var o=r.data,u=Jn(r,o.length-1);return yT(o,o.length-1)&&!N0(e,u)?(r.data=o.slice(0,-1)+" ",!0):!1},E4=function(e,r){return dt.some(r).filter(wT).bind(function(o){var u=o.container(),l=C4(e,u)||S4(u)||x4(e,u);return l?dt.some(o):dt.none()})},CT=function(e){var r=lt.fromDom(e.getBody());e.selection.isCollapsed()&&E4(r,Jn.fromRangeStart(e.selection.getRng())).each(function(o){e.selection.setRng(o.toRange())})},k4=function(e,r,o){var u=Rr(e,function(l,c){return Xd(c)||Kv(c)?l.previousCharIsSpace||l.str===""&&r||l.str.length===e.length-1&&o?{previousCharIsSpace:!1,str:l.str+hl}:{previousCharIsSpace:!0,str:l.str+" "}:{previousCharIsSpace:!1,str:l.str+c}},{previousCharIsSpace:!1,str:""});return u.str},rS=function(e,r,o){if(o!==0){var u=lt.fromDom(e),l=Sh(u,rc).getOr(u),c=e.data.slice(r,r+o),m=r+o>=e.data.length&&dg(l,Jn(e,e.data.length)),S=r===0&&fg(l,Jn(e,0));e.replaceData(r,o,k4(c,S,m))}},L0=function(e,r){var o=e.data.slice(r),u=o.length-gn(o).length;rS(e,r,u)},Mo=function(e,r){var o=e.data.slice(0,r),u=o.length-Dn(o).length;rS(e,r-u,u)},R0=function(e,r,o,u){u===void 0&&(u=!0);var l=Dn(e.data).length,c=u?e:r,m=u?r:e;return u?c.appendData(m.data):c.insertData(0,m.data),ca(lt.fromDom(m)),o&&L0(c,l),c},B0=function(e,r){var o=e.container(),u=e.offset();return Jn.isTextPosition(e)===!1&&o===r.parentNode&&u>Jn.before(r).offset()},ST=function(e,r){return B0(r,e)?Jn(r.container(),r.offset()-1):r},xT=function(e){return ia(e)?Jn(e,0):Jn.before(e)},ET=function(e){return ia(e)?Jn(e,e.data.length):Jn.after(e)},aS=function(e){return Rf(e.previousSibling)?dt.some(ET(e.previousSibling)):e.previousSibling?ff(e.previousSibling):dt.none()},oS=function(e){return Rf(e.nextSibling)?dt.some(xT(e.nextSibling)):e.nextSibling?js(e.nextSibling):dt.none()},A4=function(e,r){var o=Jn.before(r.previousSibling?r.previousSibling:r.parentNode);return cf(e,o).fold(function(){return lf(e,Jn.after(r))},dt.some)},T4=function(e,r){return lf(e,Jn.after(r)).fold(function(){return cf(e,Jn.before(r))},dt.some)},_4=function(e,r){return aS(r).orThunk(function(){return oS(r)}).orThunk(function(){return A4(e,r)})},O4=function(e,r){return oS(r).orThunk(function(){return aS(r)}).orThunk(function(){return T4(e,r)})},M4=function(e,r,o){return e?O4(r,o):_4(r,o)},iS=function(e,r,o){return M4(e,r,o).map(Mt(ST,o))},P0=function(e,r,o){o.fold(function(){e.focus()},function(u){e.selection.setRng(u.toRange(),r)})},D4=function(e){return function(r){return r.dom===e}},N4=function(e,r){return r&&Ka(e.schema.getBlockElements(),Jo(r))},L4=function(e){if(Zu(e)){var r=lt.fromHtml('<br data-mce-bogus="1">');return co(e),xa(e,r),dt.some(Jn.before(r.dom))}else return dt.none()},R4=function(e,r,o){var u=Uc(e).filter(qi),l=p(e).filter(qi);return ca(e),Ny(u,l,r,function(c,m,S){var _=c.dom,nt=m.dom,pt=_.data.length;return R0(_,nt,o),S.container()===nt?Jn(_,pt):S}).orThunk(function(){return o&&(u.each(function(c){return Mo(c.dom,c.dom.length)}),l.each(function(c){return L0(c.dom,0)})),r})},B4=function(e,r){return Ka(e.schema.getTextInlineElements(),Jo(r))},tm=function(e,r,o,u){u===void 0&&(u=!0);var l=iS(r,e.getBody(),o.dom),c=Sh(o,Mt(N4,e),D4(e.getBody())),m=R4(o,l,B4(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):c.bind(L4).fold(function(){u&&P0(e,r,m)},function(S){u&&P0(e,r,dt.some(S))})},P4=function(e){return function(r){return Wa(e,r)}},uS=function(e){return ts(e,"td,th")},kT=function(e,r){var o=function(nt){return Xv(lt.fromDom(nt),r)},u=o(e.startContainer),l=o(e.endContainer),c=u.isSome(),m=l.isSome(),S=As(u,l,Wa).getOr(!1),_=!S&&c&&m;return{startTable:u,endTable:l,isStartInTable:c,isEndInTable:m,isSameTable:S,isMultiTable:_}},sS=function(e,r){return{start:e,end:r}},ev=function(e,r,o){return{rng:e,table:r,cells:o}},vg=Ba.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),mg=function(e,r){return ou(lt.fromDom(e),"td,th",r)},AT=function(e){return!Wa(e.start,e.end)},TT=function(e,r){return Xv(e.start,r).bind(function(o){return Xv(e.end,r).bind(function(u){return Ly(Wa(o,u),o)})})},_T=function(e,r){return!AT(e)&&TT(e,r).exists(function(o){var u=o.dom.rows;return u.length===1&&u[0].cells.length===1})},OT=function(e,r){var o=mg(e.startContainer,r),u=mg(e.endContainer,r);return As(o,u,sS)},I4=function(e){return function(r){return Xv(r,e).bind(function(o){return Pr(uS(o)).map(function(u){return sS(r,u)})})}},F4=function(e){return function(r){return Xv(r,e).bind(function(o){return dr(uS(o)).map(function(u){return sS(u,r)})})}},lS=function(e){return function(r){return TT(r,e).map(function(o){return ev(r,o,uS(o))})}},MT=function(e,r,o,u){if(o.collapsed||!e.forall(AT))return dt.none();if(r.isSameTable){var l=e.bind(lS(u));return dt.some({start:l,end:l})}else{var c=mg(o.startContainer,u),m=mg(o.endContainer,u),S=c.bind(I4(u)).bind(lS(u)),_=m.bind(F4(u)).bind(lS(u));return dt.some({start:S,end:_})}},DT=function(e,r){return pa(e,function(o){return Wa(o,r)})},fd=function(e){return As(DT(e.cells,e.rng.start),DT(e.cells,e.rng.end),function(r,o){return e.cells.slice(r,o+1)})},H4=function(e,r,o){return e.exists(function(u){return _T(u,o)&&yp(u.start,r)})},NT=function(e,r){var o=r.startTable,u=r.endTable,l=e.cloneRange();return o.each(function(c){return l.setStartAfter(c.dom)}),u.each(function(c){return l.setEndBefore(c.dom)}),l},Pi=function(e,r,o,u){return MT(e,r,o,u).bind(function(l){var c=l.start,m=l.end;return c.or(m)}).bind(function(l){var c=r.isSameTable,m=fd(l).getOr([]);if(c&&l.cells.length===m.length)return dt.some(vg.fullTable(l.table));if(m.length>0){if(c)return dt.some(vg.partialTable(m,dt.none()));var S=NT(o,r);return dt.some(vg.partialTable(m,dt.some(Ca(Ca({},r),{rng:S}))))}else return dt.none()})},tv=function(e,r,o,u){return MT(e,r,o,u).bind(function(l){var c=l.start,m=l.end,S=c.bind(fd).getOr([]),_=m.bind(fd).getOr([]);if(S.length>0&&_.length>0){var nt=NT(o,r);return dt.some(vg.multiTable(S,_,nt))}else return dt.none()})},cS=function(e,r){var o=P4(e),u=OT(r,o),l=kT(r,o);return H4(u,r,o)?u.map(function(c){return vg.singleCellTable(r,c.start)}):l.isMultiTable?tv(u,l,r,o):Pi(u,l,r,o)},fS=function(e){var r=Ed(e)?Uc(e):ft(e);return r.bind(fS).orThunk(function(){return dt.some(e)})},I0=function(e){return Fn(e,function(r){nr(r,"contenteditable"),em(r)})},dS=function(e,r){return dt.from(e.dom.getParent(r,e.dom.isBlock)).map(lt.fromDom)},vS=function(e,r,o){o.each(function(u){r?ca(u):(em(u),e.selection.setCursorLocation(u.dom,0))})},F0=function(e,r,o,u){var l=o.cloneRange();u?(l.setStart(o.startContainer,o.startOffset),l.setEndAfter(r.dom.lastChild)):(l.setStartBefore(r.dom.firstChild),l.setEnd(o.endContainer,o.endOffset)),nm(e,l,r,!1)},pg=function(e){var r=ld(e),o=lt.fromDom(e.selection.getNode());Nm(o.dom)&&Zu(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),r.length>1&&hn(r,function(u){return Wa(u,o)})&&Ze(o,"data-mce-selected","1")},hg=function(e,r,o){var u=e.selection.getRng(),l=o.bind(function(c){var m=c.rng,S=c.isStartInTable,_=dS(e,S?m.endContainer:m.startContainer);m.deleteContents(),vS(e,S,_.filter(Zu));var nt=S?r[0]:r[r.length-1];return F0(e,nt,u,S),Zu(nt)?dt.none():dt.some(S?r.slice(1):r.slice(0,-1))}).getOr(r);return I0(l),pg(e),!0},gg=function(e,r,o,u){var l=e.selection.getRng(),c=r[0],m=o[o.length-1];F0(e,c,l,!0),F0(e,m,l,!1);var S=Zu(c)?r:r.slice(1),_=Zu(m)?o:o.slice(0,-1);return I0(S.concat(_)),u.deleteContents(),pg(e),!0},nm=function(e,r,o,u){u===void 0&&(u=!0),r.deleteContents();var l=fS(o).getOr(o),c=lt.fromDom(e.dom.getParent(l.dom,e.dom.isBlock));if(Zu(c)&&(em(c),u&&e.selection.setCursorLocation(c.dom,0)),!Wa(o,c)){var m=Tv(Hi(c),o)?[]:bu(c);Fn(m.concat(I(o)),function(S){!Wa(S,c)&&!ei(S,c)&&Zu(S)&&ca(S)})}return!0},vf=function(e,r){return tm(e,!1,r),!0},_p=function(e,r,o){return cS(r,o).map(function(u){return u.fold(Mt(nm,e),Mt(vf,e),Mt(hg,e),Mt(gg,e))})},LT=function(e,r){return mf(e,r)},RT=function(e,r,o,u){return pS(r,u).fold(function(){return _p(e,r,o)},function(l){return LT(e,l)}).getOr(!1)},z4=function(e,r,o){var u=lt.fromDom(e.getBody()),l=e.selection.getRng();return o.length!==0?hg(e,o,dt.none()):RT(e,u,l,r)},mS=function(e,r){return oa(Da(r,e),Gc)},pS=function(e,r){return oa(Da(r,e),Av("caption"))},$4=function(e,r,o,u,l){return $f(o,e.getBody(),l).bind(function(c){return mS(r,lt.fromDom(c.getNode())).map(function(m){return Wa(m,u)===!1})})},mf=function(e,r){return em(r),e.selection.setCursorLocation(r.dom,0),dt.some(!0)},V4=function(e,r,o,u){return js(e.dom).bind(function(l){return ff(e.dom).map(function(c){return r?o.isEqual(l)&&u.isEqual(c):o.isEqual(c)&&u.isEqual(l)})}).getOr(!0)},qs=function(e,r){return mf(e,r)},U4=function(e,r,o){return pS(e,lt.fromDom(o.getNode())).map(function(u){return Wa(u,r)===!1})},j4=function(e,r,o,u,l){return $f(o,e.getBody(),l).bind(function(c){return V4(u,o,l,c)?qs(e,u):U4(r,u,c)}).or(dt.some(!0))},dd=function(e,r,o,u){var l=Jn.fromRangeStart(e.selection.getRng());return mS(o,u).bind(function(c){return Zu(c)?mf(e,c):$4(e,o,r,c,l)}).getOr(!1)},Ko=function(e,r,o,u){var l=Jn.fromRangeStart(e.selection.getRng());return Zu(u)?mf(e,u):j4(e,o,r,u,l)},nv=function(e,r){return e?oT(r):iT(r)},hS=function(e,r){var o=Jn.fromRangeStart(e.selection.getRng());return nv(r,o)||Vl(r,e.getBody(),o).exists(function(u){return nv(r,u)})},W4=function(e,r,o){var u=lt.fromDom(e.getBody());return pS(u,o).fold(function(){return dd(e,r,u,o)||hS(e,r)},function(l){return Ko(e,r,u,l).getOr(!1)})},rm=function(e,r){var o=lt.fromDom(e.selection.getStart(!0)),u=ld(e);return e.selection.isCollapsed()&&u.length===0?W4(e,r,o):z4(e,o,u)},pf=function(e,r,o,u){var l=document.createRange();return l.setStart(e,r),l.setEnd(o,u),l},q4=function(e){var r=Jn.fromRangeStart(e),o=Jn.fromRangeEnd(e),u=e.commonAncestorContainer;return Vl(!1,u,o).map(function(l){return!sf(r,o,u)&&sf(r,l,u)?pf(r.container(),r.offset(),l.container(),l.offset()):e}).getOr(e)},gS=function(e){return e.collapsed?e:q4(e)},K4=function(e){return e.firstChild&&e.firstChild===e.lastChild},bS=function(e){return e.name==="br"||e.value===hl},G4=function(e,r){var o=e.getBlockElements();return o[r.name]&&K4(r)&&bS(r.firstChild)},X4=function(e,r){var o=e.getNonEmptyElements();return r&&(r.isEmpty(o)||G4(e,r))},BT=function(e,r){var o=r.firstChild,u=r.lastChild;return o&&o.name==="meta"&&(o=o.next),u&&u.attr("id")==="mce_marker"&&(u=u.prev),X4(e,u)&&(u=u.prev),!o||o!==u?!1:o.name==="ul"||o.name==="ol"},Y4=function(e){var r=e.firstChild,o=e.lastChild;return r&&r.nodeName==="META"&&r.parentNode.removeChild(r),o&&o.id==="mce_marker"&&o.parentNode.removeChild(o),e},Q4=function(e,r,o){var u=r.serialize(o),l=e.createFragment(u);return Y4(l)},J4=function(e){return tn(e.childNodes,function(r){return r.nodeName==="LI"})},El=function(e){return e.data===hl||ui(e)},Kf=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&El(e.firstChild)},Z4=function(e){return!e.firstChild||Kf(e)},PT=function(e){return e.length>0&&Z4(e[e.length-1])?e.slice(0,-1):e},Op=function(e,r){var o=e.getParent(r,e.isBlock);return o&&o.nodeName==="LI"?o:null},yS=function(e,r){return!!Op(e,r)},eB=function(e,r){var o=r.cloneRange(),u=r.cloneRange();return o.setStartBefore(e),u.setEndAfter(e),[o.cloneContents(),u.cloneContents()]},IT=function(e,r){var o=Jn.before(e),u=Yi(r),l=u.next(o);return l?l.toRange():null},Mp=function(e,r){var o=Jn.after(e),u=Yi(r),l=u.prev(o);return l?l.toRange():null},H0=function(e,r,o,u){var l=eB(e,u),c=e.parentNode;return c.insertBefore(l[0],e),Zn.each(r,function(m){c.insertBefore(m,e)}),c.insertBefore(l[1],e),c.removeChild(e),Mp(r[r.length-1],o)},tB=function(e,r,o){var u=e.parentNode;return Zn.each(r,function(l){u.insertBefore(l,e)}),IT(e,o)},rv=function(e,r,o,u){return u.insertAfter(r.reverse(),e),Mp(r[0],o)},nB=function(e,r,o,u){var l=Q4(r,e,u),c=Op(r,o.startContainer),m=PT(J4(l.firstChild)),S=1,_=2,nt=r.getRoot(),pt=function(bt){var Ct=Jn.fromRangeStart(o),Pt=Yi(r.getRoot()),Ft=bt===S?Pt.prev(Ct):Pt.next(Ct);return Ft?Op(r,Ft.getNode())!==c:!0};return pt(S)?tB(c,m,nt):pt(_)?rv(c,m,nt,r):H0(c,m,nt,o)},rB=function(e,r,o){var u=lt.fromDom(e.getRoot());return fg(u,Jn.fromRangeStart(r))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),dg(u,Jn.fromRangeEnd(r))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},Ks=Nm,wS=function(e,r,o){if(o!==null){var u=e.getParent(r.endContainer,Ks);return o===u&&yp(lt.fromDom(o),r)}else return!1},hf=function(e,r,o){if(o.getAttribute("data-mce-bogus")==="all")o.parentNode.insertBefore(e.dom.createFragment(r),o);else{var u=o.firstChild,l=o.lastChild;!u||u===l&&u.nodeName==="BR"?e.dom.setHTML(o,r):e.selection.setContent(r)}},aB=function(e,r){dt.from(e.getParent(r,"td,th")).map(lt.fromDom).each(d4)},ai=function(e,r){var o=e.schema.getTextInlineElements(),u=e.dom;if(r){var l=e.getBody(),c=JA(u);Zn.each(u.select("*[data-mce-fragment]"),function(m){var S=Ot(o[m.nodeName.toLowerCase()]);if(S&&o4(u,m))for(var _=m.parentNode;Ot(_)&&_!==l;_=_.parentNode){var nt=tT(u,m,_);if(nt)break;if(c.compare(_,m)){u.remove(m,!0);break}}})}},am=function(e){for(var r=e;r=r.walk();)r.type===1&&r.attr("data-mce-fragment","1")},z0=function(e){Zn.each(e.getElementsByTagName("*"),function(r){r.removeAttribute("data-mce-fragment")})},FT=function(e){return!!e.getAttribute("data-mce-fragment")},CS=function(e,r){return r&&!e.schema.getShortEndedElements()[r.nodeName]},SS=function(e,r){var o,u=e.dom,l=e.selection;if(r){l.scrollIntoView(r);var c=wp(e.getBody(),r);if(u.getContentEditable(c)==="false"){u.remove(r),l.select(c);return}var m=u.createRng(),S=r.previousSibling;if(ia(S)){if(m.setStart(S,S.nodeValue.length),!Ra.ie){var _=r.nextSibling;ia(_)&&(S.appendData(_.data),_.parentNode.removeChild(_))}}else m.setStartBefore(r),m.setEndBefore(r);var nt=function(bt){var Ct=Jn.fromRangeStart(bt),Pt=Yi(e.getBody());if(Ct=Pt.next(Ct),Ct)return Ct.toRange()},pt=u.getParent(r,u.isBlock);u.remove(r),pt&&u.isEmpty(pt)&&(e.$(pt).empty(),m.setStart(pt,0),m.setEnd(pt,0),!Ks(pt)&&!FT(pt)&&(o=nt(m))?(m=o,u.remove(pt)):u.add(pt,u.create("br",{"data-mce-bogus":"1"}))),l.setRng(m)}},oB=function(e){var r=e.dom,o=gS(e.selection.getRng());e.selection.setRng(o);var u=r.getParent(o.startContainer,Ks);wS(r,o,u)?nm(e,o,lt.fromDom(u)):e.getDoc().execCommand("Delete",!1,null)},xS=function(e,r,o){var u,l,c,m=e.selection,S=e.dom;/^ | $/.test(r)&&(r=rB(S,m.getRng(),r));var _=e.parser,nt=o.merge,pt=Zv({validate:v3(e)},e.schema),bt='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',Ct=e.fire("BeforeSetContent",{content:r,format:"html",selection:!0,paste:o.paste});if(Ct.isDefaultPrevented()){e.fire("SetContent",{content:Ct.content,format:"html",selection:!0,paste:o.paste});return}r=Ct.content,o.preserve_zwsp||(r=bl(r)),r.indexOf("{$caret}")===-1&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,bt),l=m.getRng();var Pt=l.startContainer||(l.parentElement?l.parentElement():null),Ft=e.getBody();Pt===Ft&&m.isCollapsed()&&S.isBlock(Ft.firstChild)&&CS(e,Ft.firstChild)&&S.isEmpty(Ft.firstChild)&&(l=S.createRng(),l.setStart(Ft.firstChild,0),l.setEnd(Ft.firstChild,0),m.setRng(l)),m.isCollapsed()||oB(e),u=m.getNode();var zt={context:u.nodeName.toLowerCase(),data:o.data,insert:!0},Vt=_.parse(r,zt);if(o.paste===!0&&BT(e.schema,Vt)&&yS(S,u)){l=nB(pt,S,m.getRng(),Vt),m.setRng(l),e.fire("SetContent",Ct);return}if(am(Vt),c=Vt.lastChild,c.attr("id")==="mce_marker"){var rn=c;for(c=c.prev;c;c=c.walk(!0))if(c.type===3||!S.isBlock(c.name)){e.schema.isValidChild(c.parent.name,"span")&&c.parent.insert(rn,c,c.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(u),!zt.invalid)r=pt.serialize(Vt),hf(e,r,u);else{e.selection.setContent(bt),u=m.getNode();var Qt=e.getBody();for(u.nodeType===9?u=c=Qt:c=u;c!==Qt;)u=c,c=c.parentNode;r=u===Qt?Qt.innerHTML:S.getOuterHTML(u),r=pt.serialize(_.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return pt.serialize(Vt)}))),u===Qt?S.setHTML(Qt,r):S.setOuterHTML(u,r)}ai(e,nt),SS(e,S.get("mce_marker")),z0(e.getBody()),aB(S,m.getStart()),e.fire("SetContent",Ct),e.addVisual()},ES=function(e,r){r(e),e.firstChild&&ES(e.firstChild,r),e.next&&ES(e.next,r)},HT=function(e,r,o){var u={},l={},c=[];o.firstChild&&ES(o.firstChild,function(_){Fn(e,function(nt){nt.name===_.name&&(u[nt.name]?u[nt.name].nodes.push(_):u[nt.name]={filter:nt,nodes:[_]})}),Fn(r,function(nt){typeof _.attr(nt.name)=="string"&&(l[nt.name]?l[nt.name].nodes.push(_):l[nt.name]={filter:nt,nodes:[_]})})});for(var m in u)Ka(u,m)&&c.push(u[m]);for(var S in l)Ka(l,S)&&c.push(l[S]);return c},zT=function(e,r,o){var u=HT(e,r,o);Fn(u,function(l){Fn(l.filter.callbacks,function(c){c(l.nodes,l.filter.name,{})})})},kS="html",$0=function(e){return e instanceof dc},V0=function(e){qf(e)&&js(e.getBody()).each(function(r){var o=r.getNode(),u=au(o)?js(o).getOr(r):r;e.selection.setRng(u.toRange())})},AS=function(e,r,o){e.dom.setHTML(e.getBody(),r),o!==!0&&V0(e)},iB=function(e,r,o,u){if(o=bl(o),o.length===0||/^\s+$/.test(o)){var l='<br data-mce-bogus="1">';r.nodeName==="TABLE"?o="<tr><td>"+l+"</td></tr>":/^(UL|OL)$/.test(r.nodeName)&&(o="<li>"+l+"</li>");var c=ps(e);c&&e.schema.isValidChild(r.nodeName.toLowerCase(),c.toLowerCase())?(o=l,o=e.dom.createHTML(c,zh(e),o)):o||(o='<br data-mce-bogus="1">'),AS(e,o,u.no_selection),e.fire("SetContent",u)}else u.format!=="raw"&&(o=Zv({validate:e.validate},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0}))),u.content=Eh(lt.fromDom(r))?o:Zn.trim(o),AS(e,u.content,u.no_selection),u.no_events||e.fire("SetContent",u);return u.content},uB=function(e,r,o,u){zT(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);var l=Zv({validate:e.validate},e.schema).serialize(o);return u.content=bl(Eh(lt.fromDom(r))?l:Zn.trim(l)),AS(e,u.content,u.no_selection),u.no_events||e.fire("SetContent",u),o},sB=function(e,r){return Ca(Ca({format:kS},e),{set:!0,content:$0(r)?"":r})},lB=function(e,r,o){var u=sB(o,r),l=o.no_events?u:e.fire("BeforeSetContent",u);return $0(r)||(r=l.content),dt.from(e.getBody()).fold(Et(r),function(c){return $0(r)?uB(e,c,r,l):iB(e,c,r,l)})},cB=function(e,r){return zy(e,r).isSome()},$T=function(e){return wt(e)?e:vt},fB=function(e,r,o){for(var u=e.dom,l=$T(o);u.parentNode;){u=u.parentNode;var c=lt.fromDom(u),m=r(c);if(m.isSome())return m;if(l(c))break}return dt.none()},TS=function(e,r,o){var u=r(e),l=$T(o);return u.orThunk(function(){return l(e)?dt.none():fB(e,r,l)})},_S=pC,OS=function(e,r,o){var u=e.formatter.get(o);if(u)for(var l=0;l<u.length;l++){var c=u[l];if(Ul(c)&&c.inherit===!1&&e.dom.is(r,c.selector))return!0}return!1},MS=function(e,r,o,u,l){var c=e.dom.getRoot();return r===c?!1:(r=e.dom.getParent(r,function(m){return OS(e,m,o)?!0:m.parentNode===c||!!Gf(e,m,o,u,!0)}),!!Gf(e,r,o,u,l))},U0=function(e,r,o){if(_S(r,o.inline)||_S(r,o.block))return!0;if(o.selector)return r.nodeType===1&&e.is(r,o.selector)},Dc=function(e,r,o,u,l,c){var m=o[u];if(wt(o.onmatch))return o.onmatch(r,o,u);if(m){if(at(m.length)){for(var S in m)if(Ka(m,S)){var _=u==="attributes"?e.getAttrib(r,S):Xh(e,r,S),nt=Uf(m[S],c),pt=et(_)||rr(_);if(pt&&et(nt))continue;if(l&&pt&&!o.exact||(!l||o.exact)&&!_S(_,hC(e,nt,S)))return!1}}else for(var bt=0;bt<m.length;bt++)if(u==="attributes"?e.getAttrib(r,m[bt]):Xh(e,r,m[bt]))return!0}return!0},Gf=function(e,r,o,u,l){var c=e.formatter.get(o),m=e.dom;if(c&&r)for(var S=0;S<c.length;S++){var _=c[S];if(U0(e.dom,r,_)&&Dc(m,r,_,"attributes",l,u)&&Dc(m,r,_,"styles",l,u)){var nt=_.classes;if(nt){for(var pt=0;pt<nt.length;pt++)if(!e.dom.hasClass(r,Uf(nt[pt],u)))return}return _}}},j0=function(e,r,o,u,l){if(u)return MS(e,u,r,o,l);if(u=e.selection.getNode(),MS(e,u,r,o,l))return!0;var c=e.selection.getStart();return!!(c!==u&&MS(e,c,r,o,l))},DS=function(e,r,o){var u=[],l={},c=e.selection.getStart();return e.dom.getParent(c,function(m){for(var S=0;S<r.length;S++){var _=r[S];!l[_]&&Gf(e,m,_,o)&&(l[_]=!0,u.push(_))}},e.dom.getRoot()),u},NS=function(e,r){var o=function(l){return Wa(l,lt.fromDom(e.getBody()))},u=function(l,c){return Gf(e,l.dom,c)?dt.some(c):dt.none()};return dt.from(e.selection.getStart(!0)).bind(function(l){return TS(lt.fromDom(l),function(c){return Cn(r,function(m){return u(c,m)})},o)}).getOrNull()},VT=function(e,r){var o=e.formatter.get(r),u=e.dom;if(o)for(var l=e.selection.getStart(),c=o0(u,l),m=o.length-1;m>=0;m--){var S=o[m];if(!Ul(S)||Ot(S.defaultBlock))return!0;for(var _=c.length-1;_>=0;_--)if(u.is(c[_],S.selector))return!0}return!1},UT=function(e,r,o){return Rr(o,function(u,l){var c=eR(e,l);return e.formatter.matchNode(r,l,{},c)?u.concat([l]):u},[])},Dp=En,jT="_mce_caret",LS=function(e,r){return e.importNode(r,!0)},WT=function(e){for(var r=[];e;){if(e.nodeType===3&&e.nodeValue!==Dp||e.childNodes.length>1)return[];e.nodeType===1&&r.push(e),e=e.firstChild}return r},Nc=function(e){return WT(e).length>0},qT=function(e){if(e){var r=new vi(e,e);for(e=r.current();e;e=r.next())if(ia(e))return e}return null},RS=function(e){var r=lt.fromTag("span");return gt(r,{id:jT,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&xa(r,lt.fromText(Dp)),r},dB=function(e){var r=qT(e);return r&&r.nodeValue.charAt(0)===Dp&&r.deleteData(0,1),r},bg=function(e,r,o){o===void 0&&(o=!0);var u=e.dom,l=e.selection;if(Nc(r))tm(e,!1,lt.fromDom(r),o);else{var c=l.getRng(),m=u.getParent(r,u.isBlock),S=c.startContainer,_=c.startOffset,nt=c.endContainer,pt=c.endOffset,bt=dB(r);u.remove(r,!0),S===bt&&_>0&&c.setStart(bt,_-1),nt===bt&&pt>0&&c.setEnd(bt,pt-1),m&&u.isEmpty(m)&&em(lt.fromDom(m)),l.setRng(c)}},BS=function(e,r,o){o===void 0&&(o=!0);var u=e.dom,l=e.selection;if(r)bg(e,r,o);else if(r=Wv(e.getBody(),l.getStart()),!r)for(;r=u.get(jT);)bg(e,r,!1)},vB=function(e,r,o){var u=e.dom,l=u.getParent(o,Mt(mC,e));l&&u.isEmpty(l)?o.parentNode.replaceChild(r,o):(f4(lt.fromDom(o)),u.isEmpty(o)?o.parentNode.replaceChild(r,o):u.insertAfter(r,o))},W0=function(e,r){return e.appendChild(r),r},KT=function(e,r){var o=Mn(e,function(u,l){return W0(u,l.cloneNode(!1))},r);return W0(o,o.ownerDocument.createTextNode(Dp))},mB=function(e,r,o,u,l,c){var m=e.formatter,S=e.dom,_=tn(cr(m.get()),function(Ct){return Ct!==u&&!Qn(Ct,"removeformat")}),nt=UT(e,o,_),pt=tn(nt,function(Ct){return!tR(e,Ct,u)});if(pt.length>0){var bt=o.cloneNode(!1);return S.add(r,bt),m.remove(u,l,bt,c),S.remove(bt),dt.some(bt)}else return dt.none()},GT=function(e,r,o){var u,l,c=e.selection,m=c.getRng(),S=m.startOffset,_=m.startContainer,nt=_.nodeValue;u=Wv(e.getBody(),c.getStart()),u&&(l=qT(u));var pt=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(nt&&S>0&&S<nt.length&&pt.test(nt.charAt(S))&&pt.test(nt.charAt(S-1))){var bt=c.getBookmark();m.collapse(!0);var Ct=Gv(e,m,e.formatter.get(r));Ct=b0(Ct),e.formatter.apply(r,o,Ct),c.moveToBookmark(bt)}else(!u||l.nodeValue!==Dp)&&(u=LS(e.getDoc(),RS(!0).dom),l=u.firstChild,m.insertNode(u),S=1),e.formatter.apply(r,o,u),c.setCursorLocation(l,S)},pB=function(e,r,o,u){var l=e.dom,c=e.selection,m,S,_,nt=[],pt=c.getRng(),bt=pt.startContainer,Ct=pt.startOffset;for(S=bt,bt.nodeType===3&&(Ct!==bt.nodeValue.length&&(m=!0),S=S.parentNode);S;){if(Gf(e,S,r,o,u)){_=S;break}S.nextSibling&&(m=!0),nt.push(S),S=S.parentNode}if(_)if(m){var Pt=c.getBookmark();pt.collapse(!0);var Ft=Gv(e,pt,e.formatter.get(r),!0);Ft=b0(Ft),e.formatter.remove(r,o,Ft,u),c.moveToBookmark(Pt)}else{var zt=Wv(e.getBody(),_),Vt=RS(!1).dom;vB(e,Vt,zt!==null?zt:_);var rn=mB(e,Vt,_,r,o,u),Qt=KT(nt.concat(rn.toArray()),Vt);bg(e,zt,!1),c.setCursorLocation(Qt,1),l.isEmpty(_)&&l.remove(_)}},hB=function(e,r){var o=e.selection,u=e.getBody();BS(e,null,!1),(r===8||r===46)&&o.isCollapsed()&&o.getStart().innerHTML===Dp&&BS(e,Wv(u,o.getStart())),(r===37||r===39)&&BS(e,Wv(u,o.getStart()))},q0=function(e){e.on("mouseup keydown",function(r){hB(e,r.keyCode)})},gB=function(e,r){var o=RS(!1),u=KT(r,o.dom);return sa(lt.fromDom(e),o),ca(lt.fromDom(e)),Jn(u,0)},XT=function(e,r){var o=e.schema.getTextInlineElements();return Ka(o,Jo(r))&&!Vf(r.dom)&&!xc(r.dom)},YT=function(e){return Vf(e.dom)&&Nc(e.dom)},Np={},QT=xi,JT=Si,PS=function(e,r){var o=Np[e];o||(Np[e]=[]),Np[e].push(r)},bB=function(e,r){JT(Np[e],function(o){o(r)})};PS("pre",function(e){var r=e.selection.getRng(),o,u=function(m){return c(m.previousSibling)&&Ei(o,m.previousSibling)!==-1},l=function(m,S){bo(S).remove(),bo(m).append("<br><br>").append(S.childNodes)},c=Lu(["pre"]);r.collapsed||(o=e.selection.getSelectedBlocks(),JT(QT(QT(o,c),u),function(m){l(m.previousSibling,m)}))});var IS=Zn.each,om=function(e){return ma(e)&&!Sl(e)&&!Vf(e)&&!xc(e)},K0=function(e,r){for(var o=e;o;o=o[r]){if(ia(o)&&Bn(o.data))return e;if(ma(o)&&!Sl(o))return o}return e},ZT=function(e,r,o){var u=JA(e);if(r&&o&&(r=K0(r,"previousSibling"),o=K0(o,"nextSibling"),u.compare(r,o))){for(var l=r.nextSibling;l&&l!==o;){var c=l;l=l.nextSibling,r.appendChild(c)}return e.remove(o),Zn.each(Zn.grep(o.childNodes),function(m){r.appendChild(m)}),r}return o},e_=function(e,r,o,u){if(u&&r.merge_siblings!==!1){var l=ZT(e,vC(u),u);ZT(e,l,vC(l,!0))}},t_=function(e,r,o){if(r.clear_child_styles){var u=r.links?"*:not(a)":"*";IS(e.select(u,o),function(l){om(l)&&IS(r.styles,function(c,m){e.setStyle(l,m,"")})})}},G0=function(e,r,o){IS(e.childNodes,function(u){om(u)&&(r(u)&&o(u),u.hasChildNodes()&&G0(u,r,o))})},yB=function(e,r){r.nodeName==="SPAN"&&e.getAttribs(r).length===0&&e.remove(r,!0)},n_=function(e,r){return function(o){return!!(o&&Xh(e,o,r))}},r_=function(e,r,o){return function(u){e.setStyle(u,r,o),u.getAttribute("style")===""&&u.removeAttribute("style"),yB(e,u)}},yg=Ba.generate([{keep:[]},{rename:["name"]},{removed:[]}]),a_=/^(src|href|style)$/,X0=Zn.each,Lp=pC,wB=function(e){return/^(TR|TH|TD)$/.test(e.nodeName)},o_=function(e,r,o){return e.isChildOf(r,o)&&r!==o&&!e.isBlock(o)},i_=function(e,r,o){var u=r[o?"startContainer":"endContainer"],l=r[o?"startOffset":"endOffset"];if(ma(u)){var c=u.childNodes.length-1;!o&&l&&l--,u=u.childNodes[l>c?c:l]}return ia(u)&&o&&l>=u.nodeValue.length&&(u=new vi(u,e.getBody()).next()||u),ia(u)&&!o&&l===0&&(u=new vi(u,e.getBody()).prev()||u),u},u_=function(e,r){var o=r?"firstChild":"lastChild";if(wB(e)&&e[o]){var u=e[o];return e.nodeName==="TR"&&u[o]||u}return e},FS=function(e,r,o,u){var l=e.create(o,u);return r.parentNode.insertBefore(l,r),l.appendChild(r),l},Rp=function(e,r,o,u,l){var c=lt.fromDom(r),m=lt.fromDom(e.create(u,l)),S=o?w(c):g(c);return lo(m,S),o?(sa(c,m),$r(m,c)):(la(c,m),xa(m,c)),m.dom},CB=function(e,r,o){if(rs(o)&&Lp(r,o.inline)||jf(o)&&Lp(r,o.block))return!0;if(Ul(o))return ma(r)&&e.is(r,o.selector)},s_=function(e,r){return r.links&&e.nodeName==="A"},Bp=function(e,r,o,u){var l=vC(r,o,u);return et(l)||l.nodeName==="BR"||e.isBlock(l)},SB=function(e,r,o){var u=r.parentNode,l,c=e.dom,m=ps(e);jf(o)&&(m?u===c.getRoot()&&(!o.list_block||!Lp(r,o.list_block))&&Fn(br(r.childNodes),function(S){hp(e,m,S.nodeName.toLowerCase())?l?l.appendChild(S):(l=FS(c,S,m),c.setAttribs(l,e.settings.forced_root_block_attrs)):l=null}):c.isBlock(r)&&!c.isBlock(u)&&(!Bp(c,r,!1)&&!Bp(c,r.firstChild,!0,!0)&&r.insertBefore(c.create("br"),r.firstChild),!Bp(c,r,!0)&&!Bp(c,r.lastChild,!1,!0)&&r.appendChild(c.create("br")))),!(nR(o)&&!Lp(o.inline,r))&&c.remove(r,!0)},HS=function(e,r,o,u,l){var c,m=e.dom;if(!CB(m,u,r)&&!s_(u,r))return yg.keep();var S=u;if(rs(r)&&r.remove==="all"&&rt(r.preserve_attributes)){var _=tn(m.getAttribs(S),function(Ct){return cn(r.preserve_attributes,Ct.name.toLowerCase())});if(m.removeAllAttribs(S),Fn(_,function(Ct){return m.setAttrib(S,Ct.name,Ct.value)}),_.length>0)return yg.rename("span")}if(r.remove!=="all"){X0(r.styles,function(Ct,Pt){Ct=hC(m,Uf(Ct,o),Pt+""),xt(Pt)&&(Pt=Ct,l=null),(r.remove_similar||!l||Lp(Xh(m,l,Pt),Ct))&&m.setStyle(S,Pt,""),c=!0}),c&&m.getAttrib(S,"style")===""&&(S.removeAttribute("style"),S.removeAttribute("data-mce-style")),X0(r.attributes,function(Ct,Pt){var Ft;if(Ct=Uf(Ct,o),xt(Pt)&&(Pt=Ct,l=null),r.remove_similar||!l||Lp(m.getAttrib(l,Pt),Ct)){if(Pt==="class"&&(Ct=m.getAttrib(S,Pt),Ct&&(Ft="",Fn(Ct.split(/\s+/),function(zt){/mce\-\w+/.test(zt)&&(Ft+=(Ft?" ":"")+zt)}),Ft))){m.setAttrib(S,Pt,Ft);return}if(a_.test(Pt)&&S.removeAttribute("data-mce-"+Pt),Pt==="style"&&Lu(["li"])(S)&&m.getStyle(S,"list-style-type")==="none"){S.removeAttribute(Pt),m.setStyle(S,"list-style-type","none");return}Pt==="class"&&S.removeAttribute("className"),S.removeAttribute(Pt)}}),X0(r.classes,function(Ct){Ct=Uf(Ct,o),(!l||m.hasClass(l,Ct))&&m.removeClass(S,Ct)});for(var nt=m.getAttribs(S),pt=0;pt<nt.length;pt++){var bt=nt[pt].nodeName;if(bt.indexOf("_")!==0&&bt.indexOf("data-")!==0)return yg.keep()}}return r.remove!=="none"?(SB(e,S,r),yg.removed()):yg.keep()},im=function(e,r,o,u,l){return HS(e,r,o,u,l).fold(vt,function(c){return e.dom.rename(u,c),!0},nn)},xB=function(e,r,o,u,l){var c;return Fn(o0(e.dom,r.parentNode).reverse(),function(m){if(!c&&m.id!=="_start"&&m.id!=="_end"){var S=Gf(e,m,o,u,l);S&&S.split!==!1&&(c=m)}}),c},EB=function(e,r,o,u){return HS(e,r,o,u,u).fold(Et(u),function(l){var c=e.dom.createFragment();return c.appendChild(u),e.dom.rename(u,l)},Et(null))},kB=function(e,r,o,u,l,c,m,S){var _,nt,pt,bt=e.dom;if(o){for(var Ct=o.parentNode,Pt=u.parentNode;Pt&&Pt!==Ct;Pt=Pt.parentNode){_=bt.clone(Pt,!1);for(var Ft=0;Ft<r.length&&(_=EB(e,r[Ft],S,_),_!==null);Ft++);_&&(nt&&_.appendChild(nt),pt||(pt=_),nt=_)}c&&(!m.mixed||!bt.isBlock(o))&&(u=bt.split(o,u)),nt&&(l.parentNode.insertBefore(nt,l),pt.appendChild(l),rs(m)&&e_(bt,m,S,nt))}return u},l_=function(e,r,o,u,l){var c=e.formatter.get(r),m=c[0],S=!0,_=e.dom,nt=e.selection,pt=function(Qt){var On=xB(e,Qt,r,o,l);return kB(e,c,On,Qt,Qt,!0,m,o)},bt=function(Qt){return Sl(Qt)&&ma(Qt)&&(Qt.id==="_start"||Qt.id==="_end")},Ct=function(Qt){return hn(c,function(On){return im(e,On,o,Qt,Qt)})},Pt=function(Qt){var On=!0,kn=!1;ma(Qt)&&_.getContentEditable(Qt)&&(On=S,S=_.getContentEditable(Qt)==="true",kn=!0);var mn=br(Qt.childNodes);if(S&&!kn){var Ln=Ct(Qt),lr=Ln||hn(c,function(vr){return U0(_,Qt,vr)}),Tr=Qt.parentNode;!lr&&Ot(Tr)&&gC(m)&&Ct(Tr)}if(m.deep&&mn.length){for(var $a=0;$a<mn.length;$a++)Pt(mn[$a]);kn&&(S=On)}var Zr=["underline","line-through","overline"];Fn(Zr,function(vr){ma(Qt)&&e.dom.getStyle(Qt,"text-decoration")===vr&&Qt.parentNode&&Yk(_,Qt.parentNode)===vr&&im(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:vr}},null,Qt)})},Ft=function(Qt){var On=_.get(Qt?"_start":"_end"),kn=On[Qt?"firstChild":"lastChild"];return bt(kn)&&(kn=kn[Qt?"firstChild":"lastChild"]),ia(kn)&&kn.data.length===0&&(kn=Qt?On.previousSibling||On.nextSibling:On.nextSibling||On.previousSibling),_.remove(On,!0),kn},zt=function(Qt){var On,kn,mn=Gv(e,Qt,c,Qt.collapsed);if(m.split){if(mn=b0(mn),On=i_(e,mn,!0),kn=i_(e,mn),On!==kn){if(On=u_(On,!0),kn=u_(kn,!1),o_(_,On,kn)){var Ln=dt.from(On.firstChild).getOr(On);pt(Rp(_,Ln,!0,"span",{id:"_start","data-mce-type":"bookmark"})),Ft(!0);return}if(o_(_,kn,On)){var Ln=dt.from(kn.lastChild).getOr(kn);pt(Rp(_,Ln,!1,"span",{id:"_end","data-mce-type":"bookmark"})),Ft(!1);return}On=FS(_,On,"span",{id:"_start","data-mce-type":"bookmark"}),kn=FS(_,kn,"span",{id:"_end","data-mce-type":"bookmark"});var lr=_.createRng();lr.setStartAfter(On),lr.setEndBefore(kn),Qh(_,lr,function(Tr){Fn(Tr,function($a){!Sl($a)&&!Sl($a.parentNode)&&pt($a)})}),pt(On),pt(kn),On=Ft(!0),kn=Ft()}else On=kn=pt(On);mn.startContainer=On.parentNode?On.parentNode:On,mn.startOffset=_.nodeIndex(On),mn.endContainer=kn.parentNode?kn.parentNode:kn,mn.endOffset=_.nodeIndex(kn)+1}Qh(_,mn,function(Tr){Fn(Tr,Pt)})};if(u){if(r0(u)){var Vt=_.createRng();Vt.setStartBefore(u),Vt.setEndAfter(u),zt(Vt)}else zt(u);eg(e,r,u,o);return}if(_.getContentEditable(nt.getNode())==="false"){u=nt.getNode();for(var rn=0;rn<c.length&&!(c[rn].ceFalseOverride&&im(e,c[rn],o,u,u));rn++);eg(e,r,u,o);return}!nt.isCollapsed()||!rs(m)||ld(e).length?(xC(nt,!0,function(){SC(e,zt)}),rs(m)&&j0(e,r,o,nt.getStart())&&Xk(_,nt,nt.getRng()),e.nodeChanged()):pB(e,r,o,l),eg(e,r,u,o)},c_=Zn.each,AB=function(e,r,o,u){var l=function(c){if(c.nodeType===1&&c.parentNode&&c.parentNode.nodeType===1){var m=Yk(e,c.parentNode);e.getStyle(c,"color")&&m?e.setStyle(c,"text-decoration",m):e.getStyle(c,"text-decoration")===m&&e.setStyle(c,"text-decoration",null)}};r.styles&&(r.styles.color||r.styles.textDecoration)&&(Zn.walk(u,l,"childNodes"),l(u))},TB=function(e,r,o,u){r.styles&&r.styles.backgroundColor&&G0(u,n_(e,"fontSize"),r_(e,"backgroundColor",Uf(r.styles.backgroundColor,o)))},_B=function(e,r,o,u){rs(r)&&(r.inline==="sub"||r.inline==="sup")&&(G0(u,n_(e,"fontSize"),r_(e,"fontSize","")),e.remove(e.select(r.inline==="sup"?"sub":"sup",u),!0))},OB=function(e,r,o,u){c_(r,function(l){rs(l)&&c_(e.dom.select(l.inline,u),function(c){om(c)&&im(e,l,o,c,l.exact?c:null)}),t_(e.dom,l,u)})},MB=function(e,r,o,u,l){Gf(e,l.parentNode,o,u)&&im(e,r,u,l)||r.merge_with_parents&&e.dom.getParent(l.parentNode,function(c){if(Gf(e,c,o,u))return im(e,r,u,l),!0})},Y0=Zn.each,zS=function(e){return ma(e)&&!Sl(e)&&!Vf(e)&&!xc(e)},gf=function(e,r,o,u){if(Xw(e)&&rs(r)){var l=pb(e.schema),c=cB(lt.fromDom(o),function(m){return Vf(m.dom)});return Yo(l,u)&&Zu(lt.fromDom(o.parentNode),!1)&&!c}else return!1},wg=function(e,r,o,u){var l=e.formatter.get(r),c=l[0],m=!u&&e.selection.isCollapsed(),S=e.dom,_=e.selection,nt=function(On,kn){if(kn===void 0&&(kn=c),wt(kn.onformat)&&kn.onformat(On,kn,o,u),Y0(kn.styles,function(Ln,lr){S.setStyle(On,lr,Uf(Ln,o))}),kn.styles){var mn=S.getAttrib(On,"style");mn&&S.setAttrib(On,"data-mce-style",mn)}Y0(kn.attributes,function(Ln,lr){S.setAttrib(On,lr,Uf(Ln,o))}),Y0(kn.classes,function(Ln){Ln=Uf(Ln,o),S.hasClass(On,Ln)||S.addClass(On,Ln)})},pt=function(On,kn){var mn=!1;return Y0(On,function(Ln){if(!Ul(Ln))return!1;if(!(Ot(Ln.collapsed)&&Ln.collapsed!==m)&&S.is(kn,Ln.selector)&&!Vf(kn))return nt(kn,Ln),mn=!0,!1}),mn},bt=function(On){if(Ye(On)){var kn=S.create(On);return nt(kn),kn}else return null},Ct=function(On,kn,mn){var Ln=[],lr=!0,Tr=c.inline||c.block,$a=bt(Tr);Qh(On,kn,function(Zr){var vr,_a=function(Or){var Jr=!1,Dr=lr,Ur=Or.nodeName.toLowerCase(),fa=Or.parentNode,Sr=fa.nodeName.toLowerCase();if(ma(Or)&&On.getContentEditable(Or)&&(Dr=lr,lr=On.getContentEditable(Or)==="true",Jr=!0),ui(Or)&&!gf(e,c,Or,Sr)){vr=null,jf(c)&&On.remove(Or);return}if(jf(c)&&c.wrapper&&Gf(e,Or,r,o)){vr=null;return}if(lr&&!Jr&&jf(c)&&!c.wrapper&&mC(e,Ur)&&hp(e,Sr,Tr)){var ra=On.rename(Or,Tr);nt(ra),Ln.push(ra),vr=null;return}if(Ul(c)){var xo=pt(l,Or);if(!xo&&Ot(fa)&&gC(c)&&(xo=pt(l,fa)),!rs(c)||xo){vr=null;return}}lr&&!Jr&&hp(e,Tr,Ur)&&hp(e,Sr,Tr)&&!(!mn&&ia(Or)&&gl(Or.data))&&!Vf(Or)&&(!rs(c)||!On.isBlock(Or))?(vr||(vr=On.clone($a,!1),Or.parentNode.insertBefore(vr,Or),Ln.push(vr)),vr.appendChild(Or)):(vr=null,Fn(br(Or.childNodes),_a),Jr&&(lr=Dr),vr=null)};Fn(Zr,_a)}),c.links===!0&&Fn(Ln,function(Zr){var vr=function(_a){_a.nodeName==="A"&&nt(_a,c),Fn(br(_a.childNodes),vr)};vr(Zr)}),Fn(Ln,function(Zr){var vr=function(Jr){var Dr=0;return Fn(Jr.childNodes,function(Ur){!Z3(Ur)&&!Sl(Ur)&&Dr++}),Dr},_a=function(Jr){var Dr=oa(Jr.childNodes,zS).filter(function(Ur){return U0(On,Ur,c)});return Dr.map(function(Ur){var fa=On.clone(Ur,!1);return nt(fa),On.replace(fa,Jr,!0),On.remove(Ur,!0),fa}).getOr(Jr)},Or=vr(Zr);if((Ln.length>1||!On.isBlock(Zr))&&Or===0){On.remove(Zr,!0);return}(rs(c)||jf(c)&&c.wrapper)&&(!c.exact&&Or===1&&(Zr=_a(Zr)),OB(e,l,o,Zr),MB(e,c,r,o,Zr),TB(On,c,o,Zr),AB(On,c,o,Zr),_B(On,c,o,Zr),e_(On,c,o,Zr))})};if(S.getContentEditable(_.getNode())==="false"){u=_.getNode();for(var Pt=0,Ft=l.length;Pt<Ft;Pt++){var zt=l[Pt];if(zt.ceFalseOverride&&Ul(zt)&&S.is(u,zt.selector)){nt(u,zt);break}}OC(e,r,u,o);return}if(c){if(u)if(r0(u)){if(!pt(l,u)){var Vt=S.createRng();Vt.setStartBefore(u),Vt.setEndAfter(u),Ct(S,Gv(e,Vt,l),!0)}}else Ct(S,u,!0);else if(!m||!rs(c)||ld(e).length){var rn=_.getNode(),Qt=l[0];!e.settings.forced_root_block&&Qt.defaultBlock&&!S.getParent(rn,S.isBlock)&&wg(e,Qt.defaultBlock),_.setRng(gS(_.getRng())),xC(_,!0,function(){SC(e,function(On,kn){var mn=kn?On:Gv(e,On,l);Ct(S,mn,!1)})}),Xk(S,_,_.getRng()),e.nodeChanged()}else GT(e,r,o);bB(r,e)}OC(e,r,u,o)},Q0=function(e){return Ka(e,"vars")},$S=function(e,r){e.set({}),r.on("NodeChange",function(o){US(r,o.element,e.get())}),r.on("FormatApply FormatRemove",function(o){var u=dt.from(o.node).map(function(l){return r0(l)?l:l.startContainer}).bind(function(l){return ma(l)?dt.some(l):dt.from(l.parentElement)}).getOrThunk(function(){return f_(r)});US(r,u,e.get())})},f_=function(e){return e.selection.getStart()},VS=function(e,r,o,u,l){var c=function(S){var _=e.formatter.matchNode(S,o,l!=null?l:{},u);return!at(_)},m=function(S){return OS(e,S,o)?!0:u?!1:Ot(e.formatter.matchNode(S,o,l,!0))};return Yr(r,c,m)},d_=function(e,r){var o=r!=null?r:f_(e);return tn(o0(e.dom,o),function(u){return ma(u)&&!xc(u)})},US=function(e,r,o){var u=d_(e,r);Nr(o,function(l,c){var m=function(S){var _=VS(e,u,c,S.similar,Q0(S)?S.vars:void 0),nt=_.isSome();if(S.state.get()!==nt){S.state.set(nt);var pt=_.getOr(r);Q0(S)?S.callback(nt,{node:pt,format:c,parents:u}):Fn(S.callbacks,function(bt){return bt(nt,{node:pt,format:c,parents:u})})}};Fn([l.withSimilar,l.withoutSimilar],m),Fn(l.withVars,m)})},jS=function(e,r,o,u,l,c){var m=r.get();Fn(o.split(","),function(S){var _=Xa(m,S).getOrThunk(function(){var bt={withSimilar:{state:zs(!1),similar:!0,callbacks:[]},withoutSimilar:{state:zs(!1),similar:!1,callbacks:[]},withVars:[]};return m[S]=bt,bt}),nt=function(){var bt=d_(e);return VS(e,bt,S,l,c).isSome()};if(at(c)){var pt=l?_.withSimilar:_.withoutSimilar;pt.callbacks.push(u),pt.callbacks.length===1&&pt.state.set(nt())}else _.withVars.push({state:zs(nt()),similar:l,vars:c,callback:u})}),r.set(m)},DB=function(e,r,o){var u=e.get();Fn(r.split(","),function(l){return Xa(u,l).each(function(c){u[l]={withSimilar:Ca(Ca({},c.withSimilar),{callbacks:tn(c.withSimilar.callbacks,function(m){return m!==o})}),withoutSimilar:Ca(Ca({},c.withoutSimilar),{callbacks:tn(c.withoutSimilar.callbacks,function(m){return m!==o})}),withVars:tn(c.withVars,function(m){return m.callback!==o})}})}),e.set(u)},v_=function(e,r,o,u,l,c){return r.get()===null&&$S(r,e),jS(e,r,o,u,l,c),{unbind:function(){return DB(r,o,u)}}},NB=function(e,r,o,u){var l=e.formatter.get(r);j0(e,r,o,u)&&(!("toggle"in l[0])||l[0].toggle)?l_(e,r,o,u):wg(e,r,o,u)},um=function(e,r){var o=r||document,u=o.createDocumentFragment();return Fn(e,function(l){u.appendChild(l.dom)}),lt.fromDom(u)},J0=function(e,r,o){return{element:e,width:r,rows:o}},m_=function(e,r){return{element:e,cells:r}},p_=function(e,r){return{x:e,y:r}},h_=function(e,r){var o=parseInt(kt(e,r),10);return isNaN(o)?1:o},LB=function(e,r,o,u,l){for(var c=h_(l,"rowspan"),m=h_(l,"colspan"),S=e.rows,_=o;_<o+c;_++){S[_]||(S[_]=m_(Bb(u),[]));for(var nt=r;nt<r+m;nt++){var pt=S[_].cells;pt[nt]=_===o&&nt===r?l:fu(l)}}},RB=function(e,r,o){var u=e.rows,l=u[o]?u[o].cells:[];return!!l[r]},BB=function(e,r,o){for(;RB(e,r,o);)r++;return r},g_=function(e){return Rr(e,function(r,o){return o.cells.length>r?o.cells.length:r},0)},WS=function(e,r){for(var o=e.rows,u=0;u<o.length;u++)for(var l=o[u].cells,c=0;c<l.length;c++)if(Wa(l[c],r))return dt.some(p_(c,u));return dt.none()},b_=function(e,r,o,u,l){for(var c=[],m=e.rows,S=o;S<=l;S++){var _=m[S].cells,nt=r<u?_.slice(r,u+1):_.slice(u,r+1);c.push(m_(m[S].element,nt))}return c},qS=function(e,r,o){var u=r.x,l=r.y,c=o.x,m=o.y,S=l<m?b_(e,u,l,c,m):b_(e,u,m,c,l);return J0(e.element,g_(S),S)},Pp=function(e,r){var o=fu(e.element),u=lt.fromTag("tbody");return lo(u,r),xa(o,u),o},PB=function(e){return er(e.rows,function(r){var o=er(r.cells,function(l){var c=Bb(l);return nr(c,"colspan"),nr(c,"rowspan"),c}),u=fu(r.element);return lo(u,o),u})},IB=function(e){var r=J0(fu(e),0,[]);return Fn(ts(e,"tr"),function(o,u){Fn(ts(o,"td,th"),function(l,c){LB(r,BB(r,c,u),u,o,l)})}),J0(r.element,g_(r.rows),r.rows)},Z0=function(e){return Pp(e,PB(e))},KS=function(e,r,o){return WS(e,r).bind(function(u){return WS(e,o).map(function(l){return qS(e,u,l)})})},FB=function(e){return oa(e,function(r){return Jo(r)==="ul"||Jo(r)==="ol"})},HB=function(e,r){return oa(e,function(o){return Jo(o)==="li"&&yp(o,r)}).fold(Et([]),function(o){return FB(e).map(function(u){var l=lt.fromTag(Jo(u)),c=aa(ob(u),function(m,S){return mt(S,"list-style")});return Po(l,c),[lt.fromTag("li"),l]}).getOr([])})},y_=function(e,r){var o=Rr(r,function(u,l){return xa(l,u),l},e);return r.length>0?um([o]):o},GS=function(e){return Is(e)?Hi(e).filter(sb).fold(Et([]),function(r){return[e,r]}):sb(e)?[e]:[]},zB=function(e,r){var o=lt.fromDom(r.commonAncestorContainer),u=Da(o,e),l=tn(u,function(S){return _s(S)||Za(S)}),c=HB(u,r),m=l.concat(c.length?c:GS(o));return er(m,fu)},Cg=function(){return um([])},vd=function(e,r){return y_(lt.fromDom(r.cloneContents()),zB(e,r))},$B=function(e,r){return _v(r,"table",Mt(Wa,e))},XS=function(e,r){return $B(e,r[0]).bind(function(o){var u=r[0],l=r[r.length-1],c=IB(o);return KS(c,u,l).map(function(m){return um([Z0(m)])})}).getOrThunk(Cg)},VB=function(e,r){return r.length>0&&r[0].collapsed?Cg():vd(e,r[0])},UB=function(e,r){var o=Jh(r,e);return o.length>0?XS(e,o):VB(e,r)},jB=function(e){return e.replace(/^[ \f\n\r\t\v]+/,"")},e1=function(e,r){return r>=0&&r<e.length&&Xd(e.charAt(r))},YS=function(e,r){var o=bl(e.innerText);return r?jB(o):o},WB=function(e){return e.map(function(r){return r.nodeName}).getOr("div").toLowerCase()},Ip=function(e){return dt.from(e.selection.getRng()).map(function(r){var o=dt.from(e.dom.getParent(r.commonAncestorContainer,e.dom.isBlock)),u=e.getBody(),l=WB(o),c=Ra.browser.isIE()&&l!=="pre",m=e.dom.add(u,l,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},r.cloneContents()),S=YS(m,c),_=bl(m.textContent);if(e.dom.remove(m),e1(_,0)||e1(_,_.length-1)){var nt=o.getOr(u),pt=YS(nt,c),bt=pt.indexOf(S);if(bt===-1)return S;var Ct=e1(pt,bt-1),Pt=e1(pt,bt+S.length);return(Ct?" ":"")+S+(Pt?" ":"")}else return S}).getOr("")},qB=function(e,r){var o=e.selection.getRng(),u=e.dom.create("body"),l=e.selection.getSel(),c=KC(e,yC(l)),m=r.contextual?UB(lt.fromDom(e.getBody()),c).dom:o.cloneContents();return m&&u.appendChild(m),e.selection.serializer.serialize(u,r)},KB=function(e,r){return Ca(Ca({},e),{format:r,get:!0,selection:!0})},GB=function(e,r,o){o===void 0&&(o={});var u=KB(o,r),l=e.fire("BeforeGetContent",u);if(l.isDefaultPrevented())return e.fire("GetContent",l),l.content;if(l.format==="text")return Ip(e);l.getInner=!0;var c=qB(e,l);return l.format==="tree"?c:(l.content=e.selection.isCollapsed()?"":c,e.fire("GetContent",l),l.content)},QS=0,JS=1,w_=2,XB=function(e,r){var o=e.length+r.length+2,u=new Array(o),l=new Array(o),c=function(pt,bt,Ct){return{start:pt,end:bt,diag:Ct}},m=function(pt,bt,Ct,Pt,Ft){var zt=_(pt,bt,Ct,Pt);if(zt===null||zt.start===bt&&zt.diag===bt-Pt||zt.end===pt&&zt.diag===pt-Ct)for(var Vt=pt,rn=Ct;Vt<bt||rn<Pt;)Vt<bt&&rn<Pt&&e[Vt]===r[rn]?(Ft.push([QS,e[Vt]]),++Vt,++rn):bt-pt>Pt-Ct?(Ft.push([w_,e[Vt]]),++Vt):(Ft.push([JS,r[rn]]),++rn);else{m(pt,zt.start,Ct,zt.start-zt.diag,Ft);for(var Qt=zt.start;Qt<zt.end;++Qt)Ft.push([QS,e[Qt]]);m(zt.end,bt,zt.end-zt.diag,Pt,Ft)}},S=function(pt,bt,Ct,Pt){for(var Ft=pt;Ft-bt<Pt&&Ft<Ct&&e[Ft]===r[Ft-bt];)++Ft;return c(pt,Ft,bt)},_=function(pt,bt,Ct,Pt){var Ft=bt-pt,zt=Pt-Ct;if(Ft===0||zt===0)return null;var Vt=Ft-zt,rn=zt+Ft,Qt=(rn%2===0?rn:rn+1)/2;u[1+Qt]=pt,l[1+Qt]=bt+1;var On,kn,mn,Ln,lr;for(On=0;On<=Qt;++On){for(kn=-On;kn<=On;kn+=2){for(mn=kn+Qt,kn===-On||kn!==On&&u[mn-1]<u[mn+1]?u[mn]=u[mn+1]:u[mn]=u[mn-1]+1,Ln=u[mn],lr=Ln-pt+Ct-kn;Ln<bt&&lr<Pt&&e[Ln]===r[lr];)u[mn]=++Ln,++lr;if(Vt%2!==0&&Vt-On<=kn&&kn<=Vt+On&&l[mn-Vt]<=u[mn])return S(l[mn-Vt],kn+pt-Ct,bt,Pt)}for(kn=Vt-On;kn<=Vt+On;kn+=2){for(mn=kn+Qt-Vt,kn===Vt-On||kn!==Vt+On&&l[mn+1]<=l[mn-1]?l[mn]=l[mn+1]-1:l[mn]=l[mn-1],Ln=l[mn]-1,lr=Ln-pt+Ct-kn;Ln>=pt&&lr>=Ct&&e[Ln]===r[lr];)l[mn]=Ln--,lr--;if(Vt%2===0&&-On<=kn&&kn<=On&&l[mn]<=u[mn+Vt])return S(l[mn],kn+pt-Ct,bt,Pt)}}},nt=[];return m(0,e.length,0,r.length,nt),nt},ZS=function(e){return ma(e)?e.outerHTML:ia(e)?Yc.encodeRaw(e.data,!1):ad(e)?"<!--"+e.data+"-->":""},YB=function(e){var r,o=document.createElement("div"),u=document.createDocumentFragment();for(e&&(o.innerHTML=e);r=o.firstChild;)u.appendChild(r);return u},QB=function(e,r,o){var u=YB(r);if(e.hasChildNodes()&&o<e.childNodes.length){var l=e.childNodes[o];l.parentNode.insertBefore(u,l)}else e.appendChild(u)},JB=function(e,r){if(e.hasChildNodes()&&r<e.childNodes.length){var o=e.childNodes[r];o.parentNode.removeChild(o)}},ZB=function(e,r){var o=0;Fn(e,function(u){u[0]===QS?o++:u[0]===JS?(QB(r,u[1],o),o++):u[0]===w_&&JB(r,o)})},eP=function(e,r){return tn(er(br(e.childNodes),r?yt(bl,ZS):ZS),function(o){return o.length>0})},tP=function(e,r){var o=er(br(r.childNodes),ZS);return ZB(XB(o,e),r),r},nP=lu(function(){return document.implementation.createHTMLDocument("undo")}),ex=function(e){return e.querySelector("iframe")!==null},C_=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},rP=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},Fp=function(e){var r=e.serializer.getTempAttrs(),o=QA(e.getBody(),r);return ex(o)?C_(eP(o,!0)):rP(bl(o.innerHTML))},t1=function(e,r,o){var u=o?r.beforeBookmark:r.bookmark;r.type==="fragmented"?tP(r.fragments,e.getBody()):e.setContent(r.content,{format:"raw",no_selection:Ot(u)&&Vk(u)?!u.isFakeCaret:!0}),e.selection.moveToBookmark(u)},sm=function(e){return e.type==="fragmented"?e.fragments.join(""):e.content},Hp=function(e){var r=lt.fromTag("body",nP());return Vs(r,sm(e)),Fn(ts(r,"*[data-mce-bogus]"),To),ol(r)},S_=function(e,r){return sm(e)===sm(r)},aP=function(e,r){return Hp(e)===Hp(r)},n1=function(e,r){return!e||!r?!1:S_(e,r)?!0:aP(e,r)},tx=function(e){return e.get()===0},r1=function(e,r,o){tx(o)&&(e.typing=r)},x_=function(e,r){e.typing&&(r1(e,!1,r),e.add())},oP=function(e){e.typing&&(e.typing=!1,e.add())},iP=function(e,r,o){tx(r)&&o.set(lk(e.selection))},E_=function(e,r,o,u,l,c,m){var S=Fp(e);if(c=c||{},c=Zn.extend(c,S),tx(u)===!1||e.removed)return null;var _=r.data[o.get()];if(e.fire("BeforeAddUndo",{level:c,lastLevel:_,originalEvent:m}).isDefaultPrevented()||_&&n1(_,c))return null;r.data[o.get()]&&l.get().each(function(Ct){r.data[o.get()].beforeBookmark=Ct});var nt=x3(e);if(nt&&r.data.length>nt){for(var pt=0;pt<r.data.length-1;pt++)r.data[pt]=r.data[pt+1];r.data.length--,o.set(r.data.length)}c.bookmark=lk(e.selection),o.get()<r.data.length-1&&(r.data.length=o.get()+1),r.data.push(c),o.set(r.data.length-1);var bt={level:c,lastLevel:_,originalEvent:m};return o.get()>0?(e.setDirty(!0),e.fire("AddUndo",bt),e.fire("change",bt)):e.fire("AddUndo",bt),c},uP=function(e,r,o){r.data=[],o.set(0),r.typing=!1,e.fire("ClearUndos")},Sg=function(e,r,o,u,l){if(r.transact(u)){var c=r.data[o.get()].bookmark,m=r.data[o.get()-1];t1(e,m,!0),r.transact(l)&&(r.data[o.get()-1].beforeBookmark=c)}},sP=function(e,r,o){var u;return r.get()<o.length-1&&(r.set(r.get()+1),u=o[r.get()],t1(e,u,!1),e.setDirty(!0),e.fire("Redo",{level:u})),u},lP=function(e,r,o,u){var l;return r.typing&&(r.add(),r.typing=!1,r1(r,!1,o)),u.get()>0&&(u.set(u.get()-1),l=r.data[u.get()],t1(e,l,!0),e.setDirty(!0),e.fire("Undo",{level:l})),l},cP=function(e){e.clear(),e.add()},fP=function(e,r,o){return o.get()>0||r.typing&&r.data[0]&&!n1(Fp(e),r.data[0])},k_=function(e,r){return r.get()<e.data.length-1&&!e.typing},A_=function(e,r,o){return x_(e,r),e.beforeChange(),e.ignore(o),e.add()},T_=function(e,r){try{e.set(e.get()+1),r()}finally{e.set(e.get()-1)}},__=function(e,r){var o=e.dom,u=Ot(r)?r:e.getBody();at(e.hasVisual)&&(e.hasVisual=_3(e)),Fn(o.select("table,a",u),function(l){switch(l.nodeName){case"TABLE":var c=O3(e),m=o.getAttrib(l,"border");(!m||m==="0")&&e.hasVisual?o.addClass(l,c):o.removeClass(l,c);break;case"A":if(!o.getAttrib(l,"href")){var S=o.getAttrib(l,"name")||l.id,_=xk(e);S&&e.hasVisual?o.addClass(l,_):o.removeClass(l,_)}break}}),e.fire("VisualAid",{element:r,hasVisual:e.hasVisual})},a1=function(e){return{undoManager:{beforeChange:function(r,o){return iP(e,r,o)},add:function(r,o,u,l,c,m){return E_(e,r,o,u,l,c,m)},undo:function(r,o,u){return lP(e,r,o,u)},redo:function(r,o){return sP(e,r,o)},clear:function(r,o){return uP(e,r,o)},reset:function(r){return cP(r)},hasUndo:function(r,o){return fP(e,r,o)},hasRedo:function(r,o){return k_(r,o)},transact:function(r,o,u){return A_(r,o,u)},ignore:function(r,o){return T_(r,o)},extra:function(r,o,u,l){return Sg(e,r,o,u,l)}},formatter:{match:function(r,o,u,l){return j0(e,r,o,u,l)},matchAll:function(r,o){return DS(e,r,o)},matchNode:function(r,o,u,l){return Gf(e,r,o,u,l)},canApply:function(r){return VT(e,r)},closest:function(r){return NS(e,r)},apply:function(r,o,u){return wg(e,r,o,u)},remove:function(r,o,u,l){return l_(e,r,o,u,l)},toggle:function(r,o,u){return NB(e,r,o,u)},formatChanged:function(r,o,u,l,c){return v_(e,r,o,u,l,c)}},editor:{getContent:function(r,o){return n4(e,r,o)},setContent:function(r,o){return lB(e,r,o)},insertContent:function(r,o){return xS(e,r,o)},addVisual:function(r){return __(e,r)}},selection:{getContent:function(r,o){return GB(e,r,o)}},raw:{getModel:function(){return dt.none()}}}},O_=function(e){var r=function(S){return st(S)?S:{}},o=e.undoManager,u=e.formatter,l=e.editor,c=e.selection,m=e.raw;return{undoManager:{beforeChange:o.beforeChange,add:o.add,undo:o.undo,redo:o.redo,clear:o.clear,reset:o.reset,hasUndo:o.hasUndo,hasRedo:o.hasRedo,transact:function(S,_,nt){return o.transact(nt)},ignore:function(S,_){return o.ignore(_)},extra:function(S,_,nt,pt){return o.extra(nt,pt)}},formatter:{match:function(S,_,nt,pt){return u.match(S,r(_),pt)},matchAll:u.matchAll,matchNode:u.matchNode,canApply:function(S){return u.canApply(S)},closest:function(S){return u.closest(S)},apply:function(S,_,nt){return u.apply(S,r(_))},remove:function(S,_,nt,pt){return u.remove(S,r(_))},toggle:function(S,_,nt){return u.toggle(S,r(_))},formatChanged:function(S,_,nt,pt,bt){return u.formatChanged(_,nt,pt,bt)}},editor:{getContent:function(S,_){return l.getContent(S)},setContent:function(S,_){return l.setContent(S,_)},insertContent:function(S,_){return l.insertContent(S)},addVisual:l.addVisual},selection:{getContent:function(S,_){return c.getContent(_)}},raw:{getModel:function(){return dt.some(m.getRawModel())}}}},dP=function(){var e=Et(null),r=Et("");return{undoManager:{beforeChange:it,add:e,undo:e,redo:e,clear:it,reset:it,hasUndo:vt,hasRedo:vt,transact:e,ignore:it,extra:it},formatter:{match:vt,matchAll:Et([]),matchNode:Et(void 0),canApply:vt,closest:r,apply:it,remove:it,toggle:it,formatChanged:Et({unbind:it})},editor:{getContent:r,setContent:r,insertContent:it,addVisual:it},selection:{getContent:r},raw:{getModel:Et(dt.none())}}},md=function(e){return Ka(e.plugins,"rtc")},vP=function(e){return Xa(e.plugins,"rtc").bind(function(r){return dt.from(r.setup)})},mP=function(e){var r=e;return vP(e).fold(function(){return r.rtcInstance=a1(e),dt.none()},function(o){return r.rtcInstance=dP(),dt.some(function(){return o().then(function(u){return r.rtcInstance=O_(u),u.rtc.isRemote})})})},nx=function(e){return e.rtcInstance?e.rtcInstance:a1(e)},du=function(e){var r=e.rtcInstance;if(r)return r;throw new Error("Failed to get RTC instance not yet initialized.")},rx=function(e,r,o){du(e).undoManager.beforeChange(r,o)},M_=function(e,r,o,u,l,c,m){return du(e).undoManager.add(r,o,u,l,c,m)},o1=function(e,r,o,u){return du(e).undoManager.undo(r,o,u)},Wl=function(e,r,o){return du(e).undoManager.redo(r,o)},xg=function(e,r,o){du(e).undoManager.clear(r,o)},lm=function(e,r){du(e).undoManager.reset(r)},pP=function(e,r,o){return du(e).undoManager.hasUndo(r,o)},D_=function(e,r,o){return du(e).undoManager.hasRedo(r,o)},N_=function(e,r,o,u){return du(e).undoManager.transact(r,o,u)},hP=function(e,r,o){du(e).undoManager.ignore(r,o)},gP=function(e,r,o,u,l){du(e).undoManager.extra(r,o,u,l)},bP=function(e,r,o,u,l){return du(e).formatter.match(r,o,u,l)},L_=function(e,r,o){return du(e).formatter.matchAll(r,o)},i1=function(e,r,o,u,l){return du(e).formatter.matchNode(r,o,u,l)},R_=function(e,r){return du(e).formatter.canApply(r)},B_=function(e,r){return du(e).formatter.closest(r)},u1=function(e,r,o,u){du(e).formatter.apply(r,o,u)},yP=function(e,r,o,u,l){du(e).formatter.remove(r,o,u,l)},wP=function(e,r,o,u){du(e).formatter.toggle(r,o,u)},CP=function(e,r,o,u,l,c){return du(e).formatter.formatChanged(r,o,u,l,c)},SP=function(e,r,o){return nx(e).editor.getContent(r,o)},xP=function(e,r,o){return nx(e).editor.setContent(r,o)},EP=function(e,r,o){return nx(e).editor.insertContent(r,o)},kP=function(e,r,o){return du(e).selection.getContent(r,o)},AP=function(e,r){return du(e).editor.addVisual(r)},TP=function(e,r){r===void 0&&(r={});var o=r.format?r.format:"html";return kP(e,o,r)},P_=function(e){return e.dom.length===0?(ca(e),dt.none()):dt.some(e)},_P=function(e,r){return e.filter(function(o){return Yv.isBookmarkNode(o.dom)}).bind(r?p:Uc)},OP=function(e,r,o,u){var l=e.dom,c=r.dom,m=u?l.length:c.length;u?(R0(l,c,!1,!u),o.setStart(c,m)):(R0(c,l,!1,!u),o.setEnd(c,m))},ax=function(e,r){Hi(e).each(function(o){var u=e.dom;r&&fg(o,Jn(u,0))?L0(u,0):!r&&dg(o,Jn(u,u.length))&&Mo(u,u.length)})},I_=function(e,r,o,u){e.bind(function(l){var c=u?Mo:L0;return c(l.dom,u?l.dom.length:0),r.filter(qi).map(function(m){return OP(l,m,o,u)})}).orThunk(function(){var l=_P(r,u).or(r).filter(qi);return l.map(function(c){return ax(c,u)})})},zp=function(e,r){var o=dt.from(r.firstChild).map(lt.fromDom),u=dt.from(r.lastChild).map(lt.fromDom);e.deleteContents(),e.insertNode(r);var l=o.bind(Uc).filter(qi).bind(P_),c=u.bind(p).filter(qi).bind(P_);I_(l,o,e,!0),I_(c,u,e,!1),e.collapse(!1)},F_=function(e,r){return Ca(Ca({format:"html"},e),{set:!0,selection:!0,content:r})},vu=function(e,r){if(r.format!=="raw"){var o=e.selection.getRng(),u=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),l=u?{context:u.nodeName.toLowerCase()}:{},c=e.parser.parse(r.content,Ca(Ca({isRootContent:!0,forced_root_block:!1},l),r));return Zv({validate:e.validate},e.schema).serialize(c)}else return r.content},MP=function(e,r,o){o===void 0&&(o={});var u=F_(o,r),l=u;if(!u.no_events){var c=e.fire("BeforeSetContent",u);if(c.isDefaultPrevented()){e.fire("SetContent",c);return}else l=c}l.content=vu(e,l);var m=e.selection.getRng();zp(m,m.createContextualFragment(l.content)),e.selection.setRng(m),rg(e,m),l.no_events||e.fire("SetContent",l)},H_=function(e,r,o){if(e&&Ka(e,r)){var u=tn(e[r],function(l){return l!==o});u.length===0?delete e[r]:e[r]=u}};function DP(e,r){var o,u,l=function(m,S){return oa(S,function(_){return e.is(_,m)})},c=function(m){return e.getParents(m,null,e.getRoot())};return{selectorChangedWithUnbind:function(m,S){return o||(o={},u={},r.on("NodeChange",function(_){var nt=_.element,pt=c(nt),bt={};Zn.each(o,function(Ct,Pt){l(Pt,pt).each(function(Ft){u[Pt]||(Fn(Ct,function(zt){zt(!0,{node:Ft,selector:Pt,parents:pt})}),u[Pt]=Ct),bt[Pt]=Ct})}),Zn.each(u,function(Ct,Pt){bt[Pt]||(delete u[Pt],Zn.each(Ct,function(Ft){Ft(!1,{node:nt,selector:Pt,parents:pt})}))})})),o[m]||(o[m]=[]),o[m].push(S),l(m,c(r.selection.getStart())).each(function(){u[m]=o[m]}),{unbind:function(){H_(o,m,S),H_(u,m,S)}}}}}var z_=function(e){return!!e.select},vc=function(e){return!!(e&&e.ownerDocument)&&ei(lt.fromDom(e.ownerDocument),lt.fromDom(e))},s1=function(e){return e?z_(e)?!0:vc(e.startContainer)&&vc(e.endContainer):!1},$p=function(e,r,o,u){var l,c,m=DP(e,u).selectorChangedWithUnbind,S=function(Sr,ra){var xo=e.createRng();Ot(Sr)&&Ot(ra)?(xo.setStart(Sr,ra),xo.setEnd(Sr,ra),On(xo),Vt(!1)):(CC(e,xo,u.getBody(),!0),On(xo))},_=function(Sr){return TP(u,Sr)},nt=function(Sr,ra){return MP(u,Sr,ra)},pt=function(Sr){return VA(u.getBody(),Qt(),Sr)},bt=function(Sr){return UA(u.getBody(),Qt(),Sr)},Ct=function(Sr,ra){return Ur.getBookmark(Sr,ra)},Pt=function(Sr){return Ur.moveToBookmark(Sr)},Ft=function(Sr,ra){return qR(e,Sr,ra).each(On),Sr},zt=function(){var Sr=Qt(),ra=rn();return!Sr||Sr.item?!1:Sr.compareEndPoints?Sr.compareEndPoints("StartToEnd",Sr)===0:!ra||Sr.collapsed},Vt=function(Sr){var ra=Qt();ra.collapse(!!Sr),On(ra)},rn=function(){return r.getSelection?r.getSelection():r.document.selection},Qt=function(){var Sr,ra,xo,Vo=function(Ri,Ms,Tl){try{return Ms.compareBoundaryPoints(Ri,Tl)}catch(xr){return-1}},zo=r.document;if(u.bookmark!==void 0&&qf(u)===!1){var Iu=VC(u);if(Iu.isSome())return Iu.map(function(Ri){return KC(u,[Ri])[0]}).getOr(zo.createRange())}try{(Sr=rn())&&!Ta(Sr.anchorNode)&&(Sr.rangeCount>0?ra=Sr.getRangeAt(0):ra=Sr.createRange?Sr.createRange():zo.createRange(),ra=KC(u,[ra])[0])}catch(Ri){}return ra||(ra=zo.createRange?zo.createRange():zo.body.createTextRange()),ra.setStart&&ra.startContainer.nodeType===9&&ra.collapsed&&(xo=e.getRoot(),ra.setStart(xo,0),ra.setEnd(xo,0)),l&&c&&(Vo(ra.START_TO_START,ra,l)===0&&Vo(ra.END_TO_END,ra,l)===0?ra=c:(l=null,c=null)),ra},On=function(Sr,ra){var xo;if(s1(Sr)){var Vo=z_(Sr)?Sr:null;if(Vo){c=null;try{Vo.select()}catch(Ri){}return}var zo=rn(),Iu=u.fire("SetSelectionRange",{range:Sr,forward:ra});if(Sr=Iu.range,zo){c=Sr;try{zo.removeAllRanges(),zo.addRange(Sr)}catch(Ri){}ra===!1&&zo.extend&&(zo.collapse(Sr.endContainer,Sr.endOffset),zo.extend(Sr.startContainer,Sr.startOffset)),l=zo.rangeCount>0?zo.getRangeAt(0):null}!Sr.collapsed&&Sr.startContainer===Sr.endContainer&&zo.setBaseAndExtent&&!Ra.ie&&Sr.endOffset-Sr.startOffset<2&&Sr.startContainer.hasChildNodes()&&(xo=Sr.startContainer.childNodes[Sr.startOffset],xo&&xo.tagName==="IMG"&&(zo.setBaseAndExtent(Sr.startContainer,Sr.startOffset,Sr.endContainer,Sr.endOffset),(zo.anchorNode!==Sr.startContainer||zo.focusNode!==Sr.endContainer)&&zo.setBaseAndExtent(xo,0,xo,1))),u.fire("AfterSetSelectionRange",{range:Sr,forward:ra})}},kn=function(Sr){return nt(e.getOuterHTML(Sr)),Sr},mn=function(){return WR(u.getBody(),Qt())},Ln=function(Sr,ra){return A0(e,Qt(),Sr,ra)},lr=function(){var Sr=rn(),ra=Sr==null?void 0:Sr.anchorNode,xo=Sr==null?void 0:Sr.focusNode;if(!Sr||!ra||!xo||Ta(ra)||Ta(xo))return!0;var Vo=e.createRng();Vo.setStart(ra,Sr.anchorOffset),Vo.collapse(!0);var zo=e.createRng();return zo.setStart(xo,Sr.focusOffset),zo.collapse(!0),Vo.compareBoundaryPoints(Vo.START_TO_START,zo)<=0},Tr=function(){var Sr=Qt(),ra=rn();if(!eA(ra)&&c0(u)){var xo=h0(e,Sr);return xo.each(function(Vo){On(Vo,lr())}),xo.getOr(Sr)}return Sr},$a=function(Sr,ra){return m(Sr,ra),Dr},Zr=function(){for(var Sr,ra=e.getRoot();ra&&ra.nodeName!=="BODY";){if(ra.scrollHeight>ra.clientHeight){Sr=ra;break}ra=ra.parentNode}return Sr},vr=function(Sr,ra){Ot(Sr)?AR(u,Sr,ra):rg(u,Qt(),ra)},_a=function(Sr,ra){return On(NC(Sr,ra,u.getDoc()))},Or=function(){var Sr=Qt();return Sr.collapsed?Jn.fromRangeStart(Sr).getClientRects()[0]:Sr.getBoundingClientRect()},Jr=function(){r=l=c=null,fa.destroy()},Dr={bookmarkManager:null,controlSelection:null,dom:e,win:r,serializer:o,editor:u,collapse:Vt,setCursorLocation:S,getContent:_,setContent:nt,getBookmark:Ct,moveToBookmark:Pt,select:Ft,isCollapsed:zt,isForward:lr,setNode:kn,getNode:mn,getSel:rn,setRng:On,getRng:Qt,getStart:pt,getEnd:bt,getSelectedBlocks:Ln,normalize:Tr,selectorChanged:$a,selectorChangedWithUnbind:m,getScrollContainer:Zr,scrollIntoView:vr,placeCaretAt:_a,getBoundingClientRect:Or,destroy:Jr},Ur=Yv(Dr),fa=MC(Dr,u);return Dr.bookmarkManager=Ur,Dr.controlSelection=fa,Dr},Eg=function(e,r){Fn(r,function(o){e.attr(o,null)})},ox=function(e,r,o){e.addNodeFilter("font",function(u){Fn(u,function(l){var c=r.parse(l.attr("style")),m=l.attr("color"),S=l.attr("face"),_=l.attr("size");m&&(c.color=m),S&&(c["font-family"]=S),_&&(c["font-size"]=o[parseInt(l.attr("size"),10)-1]),l.name="span",l.attr("style",r.serialize(c)),Eg(l,["color","face","size"])})})},NP=function(e,r){e.addNodeFilter("strike",function(o){Fn(o,function(u){var l=r.parse(u.attr("style"));l["text-decoration"]="line-through",u.name="span",u.attr("style",r.serialize(l))})})},LP=function(e,r){var o=Lh();r.convert_fonts_to_spans&&ox(e,o,Zn.explode(r.font_size_legacy_values)),NP(e,o)},Vp=function(e,r){r.inline_styles&&LP(e,r)},Up=function(e){return new Wu(function(r,o){var u=function(){o("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="blob",l.onload=function(){l.status===200?r(l.response):u()},l.onerror=u,l.send()}catch(c){u()}})},av=function(e){var r,o=decodeURIComponent(e).split(","),u=/data:([^;]+)/.exec(o[0]);return u&&(r=u[1]),{type:r,data:o[1]}},l1=function(e,r){var o;try{o=atob(r)}catch(c){return dt.none()}for(var u=new Uint8Array(o.length),l=0;l<u.length;l++)u[l]=o.charCodeAt(l);return dt.some(new Blob([u],{type:e}))},RP=function(e){return new Wu(function(r){var o=av(e),u=o.type,l=o.data;l1(u,l).fold(function(){return r(new Blob([]))},r)})},c1=function(e){return e.indexOf("blob:")===0?Up(e):e.indexOf("data:")===0?RP(e):null},$_=function(e){return new Wu(function(r){var o=new FileReader;o.onloadend=function(){r(o.result)},o.readAsDataURL(e)})},V_=0,ix=function(e){return(e||"blobid")+V_++},BP=function(e,r,o,u){var l,c;if(r.src.indexOf("blob:")===0){c=e.getByUri(r.src),c?o({image:r,blobInfo:c}):c1(r.src).then(function(nt){$_(nt).then(function(pt){l=av(pt).data,c=e.create(ix(),nt,l),e.add(c),o({image:r,blobInfo:c})})},function(nt){u(nt)});return}var m=av(r.src),S=m.data,_=m.type;l=S,c=e.getByData(l,_),c?o({image:r,blobInfo:c}):c1(r.src).then(function(nt){c=e.create(ix(),nt,l),e.add(c),o({image:r,blobInfo:c})},function(nt){u(nt)})},U_=function(e){return e?br(e.getElementsByTagName("img")):[]},PP=function(e,r){var o={},u=function(l,c){c||(c=nn);var m=tn(U_(l),function(_){var nt=_.src;return!Ra.fileApi||_.hasAttribute("data-mce-bogus")||_.hasAttribute("data-mce-placeholder")||!nt||nt===Ra.transparentSrc?!1:nt.indexOf("blob:")===0?!e.isUploaded(nt)&&c(_):nt.indexOf("data:")===0?c(_):!1}),S=er(m,function(_){if(o[_.src]!==void 0)return new Wu(function(pt){o[_.src].then(function(bt){if(typeof bt=="string")return bt;pt({image:_,blobInfo:bt.blobInfo})})});var nt=new Wu(function(pt,bt){BP(r,_,pt,bt)}).then(function(pt){return delete o[pt.image.src],pt}).catch(function(pt){return delete o[_.src],pt});return o[_.src]=nt,nt});return Wu.all(S)};return{findAll:u}},IP=function(e){for(var r=/data:[^;<"'\s]+;base64,([a-z0-9\+\/=\s]+)/gi,o=[],u={},l=q2("img"),c,m=0,S=0;c=r.exec(e);){var _=c[0],nt=l+"_"+S++;u[nt]=_,m<c.index&&o.push(e.substr(m,c.index-m)),o.push(nt),m=c.index+_.length}var pt=new RegExp(l+"_[0-9]+","g");return m===0?{prefix:l,uris:u,html:e,re:pt}:(m<e.length&&o.push(e.substr(m)),{prefix:l,uris:u,html:o.join(""),re:pt})},ux=function(e,r){return e.replace(r.re,function(o){return Xa(r.uris,o).getOr(o)})},FP=function(e){var r=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(e);return r?dt.some({type:r[1],data:decodeURIComponent(r[2])}):dt.none()},sx=function(e,r,o,u){var l=e.padd_empty_with_br||r.insert;l&&o[u.name]?u.empty().append(new dc("br",1)).shortEnded=!0:u.empty().append(new dc("#text",3)).value=hl},j_=function(e){return W_(e,"#text")&&e.firstChild.value===hl},W_=function(e,r){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===r},kg=function(e,r){var o=e.getElementRule(r.name);return o&&o.paddEmpty},jp=function(e,r,o,u){return u.isEmpty(r,o,function(l){return kg(e,l)})},HP=function(e,r){return e&&(Ka(r,e.name)||e.name==="br")},q_=function(e){return Ot(e.attr("data-mce-bogus"))},zP=function(e){return e.attr("src")===Ra.transparentSrc||Ot(e.attr("data-mce-placeholder"))},K_=function(e,r){if(r.images_dataimg_filter){var o=new Image;return o.src=e.attr("src"),Nr(e.attributes.map,function(u,l){o.setAttribute(l,u)}),r.images_dataimg_filter(o)}else return!0},$P=function(e,r){var o=r.blob_cache,u=function(l){var c=l.attr("src");zP(l)||q_(l)||FP(c).filter(function(){return K_(l,r)}).bind(function(m){var S=m.type,_=m.data;return dt.from(o.getByData(_,S)).orThunk(function(){return l1(S,_).map(function(nt){var pt=o.create(ix(),nt,_);return o.add(pt),pt})})}).each(function(m){l.attr("src",m.blobUri())})};o&&e.addAttributeFilter("src",function(l){return Fn(l,u)})},VP=function(e,r){var o=e.schema;r.remove_trailing_brs&&e.addNodeFilter("br",function(u,l,c){var m,S=u.length,_,nt=Zn.extend({},o.getBlockElements()),pt=o.getNonEmptyElements(),bt,Ct,Pt,Ft,zt=o.getWhiteSpaceElements(),Vt,rn;for(nt.body=1,m=0;m<S;m++)if(_=u[m],bt=_.parent,nt[_.parent.name]&&_===bt.lastChild){for(Pt=_.prev;Pt;){if(Ft=Pt.name,Ft!=="span"||Pt.attr("data-mce-type")!=="bookmark"){Ft==="br"&&(_=null);break}Pt=Pt.prev}_&&(_.remove(),jp(o,pt,zt,bt)&&(Vt=o.getElementRule(bt.name),Vt&&(Vt.removeEmpty?bt.remove():Vt.paddEmpty&&sx(r,c,nt,bt))))}else{for(Ct=_;bt&&bt.firstChild===Ct&&bt.lastChild===Ct&&(Ct=bt,!nt[bt.name]);)bt=bt.parent;Ct===bt&&r.padd_empty_with_br!==!0&&(rn=new dc("#text",3),rn.value=hl,_.replace(rn))}}),e.addAttributeFilter("href",function(u){var l=u.length,c=function(_){var nt=_.split(" ").filter(function(pt){return pt.length>0});return nt.concat(["noopener"]).sort().join(" ")},m=function(_){var nt=_?Zn.trim(_):"";return/\b(noopener)\b/g.test(nt)?nt:c(nt)};if(!r.allow_unsafe_link_target)for(;l--;){var S=u[l];S.name==="a"&&S.attr("target")==="_blank"&&S.attr("rel",m(S.attr("rel")))}}),r.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(u){for(var l=u.length,c,m,S,_;l--;)if(_=u[l],_.name==="a"&&_.firstChild&&!_.attr("href")){S=_.parent,c=_.lastChild;do m=c.prev,S.insert(c,_),c=m;while(c)}}),r.fix_list_elements&&e.addNodeFilter("ul,ol",function(u){for(var l=u.length,c,m;l--;)if(c=u[l],m=c.parent,m.name==="ul"||m.name==="ol")if(c.prev&&c.prev.name==="li")c.prev.append(c);else{var S=new dc("li",1);S.attr("style","list-style-type: none"),c.wrap(S)}}),r.validate&&o.getValidClasses()&&e.addAttributeFilter("class",function(u){for(var l=o.getValidClasses(),c=u.length;c--;){for(var m=u[c],S=m.attr("class").split(" "),_="",nt=0;nt<S.length;nt++){var pt=S[nt],bt=!1,Ct=l["*"];Ct&&Ct[pt]&&(bt=!0),Ct=l[m.name],!bt&&Ct&&Ct[pt]&&(bt=!0),bt&&(_&&(_+=" "),_+=pt)}_.length||(_=null),m.attr("class",_)}}),$P(e,r)},lx=Zn.each,G_=Zn.trim,X_="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Y_={ftp:21,http:80,https:443,mailto:25},Q_=["img","video"],UP=function(e,r){return Ot(e)?!e:Ot(r)?!cn(Q_,r):!0},jP=function(e,r,o){return e.allow_html_data_urls?!1:/^data:image\//i.test(r)?UP(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)},ov=function(){function e(r,o){r=G_(r),this.settings=o||{};var u=this.settings.base_uri,l=this;if(/^([\w\-]+):([^\/]{2})/i.test(r)||/^\s*#/.test(r)){l.source=r;return}var c=r.indexOf("//")===0;if(r.indexOf("/")===0&&!c&&(r=(u&&u.protocol||"http")+"://mce_host"+r),!/^[\w\-]*:?\/\//.test(r)){var m=this.settings.base_uri?this.settings.base_uri.path:new e(document.location.href).directory;if(this.settings.base_uri&&this.settings.base_uri.protocol=="")r="//mce_host"+l.toAbsPath(m,r);else{var S=/([^#?]*)([#?]?.*)/.exec(r);r=(u&&u.protocol||"http")+"://mce_host"+l.toAbsPath(m,S[1])+S[2]}}r=r.replace(/@@/g,"(mce_at)");var _=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(r);lx(X_,function(nt,pt){var bt=_[pt];bt&&(bt=bt.replace(/\(mce_at\)/g,"@@")),l[nt]=bt}),u&&(l.protocol||(l.protocol=u.protocol),l.userInfo||(l.userInfo=u.userInfo),!l.port&&l.host==="mce_host"&&(l.port=u.port),(!l.host||l.host==="mce_host")&&(l.host=u.host),l.source=""),c&&(l.protocol="")}return e.parseDataUri=function(r){var o,u=decodeURIComponent(r).split(","),l=/data:([^;]+)/.exec(u[0]);return l&&(o=l[1]),{type:o,data:u[1]}},e.isDomSafe=function(r,o,u){if(u===void 0&&(u={}),u.allow_script_urls)return!0;var l=Yc.decode(r).replace(/[\s\u0000-\u001F]+/g,"");try{l=decodeURIComponent(l)}catch(c){l=unescape(l)}return/((java|vb)script|mhtml):/i.test(l)?!1:!jP(u,l,o)},e.getDocumentBaseUrl=function(r){var o;return r.protocol.indexOf("http")!==0&&r.protocol!=="file:"?o=r.href:o=r.protocol+"//"+r.host+r.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o},e.prototype.setPath=function(r){var o=/^(.*?)\/?(\w+)?$/.exec(r);this.path=o[0],this.directory=o[1],this.file=o[2],this.source="",this.getURI()},e.prototype.toRelative=function(r){var o;if(r==="./")return r;var u=new e(r,{base_uri:this});if(u.host!=="mce_host"&&this.host!==u.host&&u.host||this.port!==u.port||this.protocol!==u.protocol&&u.protocol!=="")return u.getURI();var l=this.getURI(),c=u.getURI();return l===c||l.charAt(l.length-1)==="/"&&l.substr(0,l.length-1)===c?l:(o=this.toRelPath(this.path,u.path),u.query&&(o+="?"+u.query),u.anchor&&(o+="#"+u.anchor),o)},e.prototype.toAbsolute=function(r,o){var u=new e(r,{base_uri:this});return u.getURI(o&&this.isSameOrigin(u))},e.prototype.isSameOrigin=function(r){if(this.host==r.host&&this.protocol==r.protocol){if(this.port==r.port)return!0;var o=Y_[this.protocol];if(o&&(this.port||o)==(r.port||o))return!0}return!1},e.prototype.toRelPath=function(r,o){var u=0,l="",c,m,S=r.substring(0,r.lastIndexOf("/")).split("/"),_=o.split("/");if(S.length>=_.length){for(c=0,m=S.length;c<m;c++)if(c>=_.length||S[c]!==_[c]){u=c+1;break}}if(S.length<_.length){for(c=0,m=_.length;c<m;c++)if(c>=S.length||S[c]!==_[c]){u=c+1;break}}if(u===1)return o;for(c=0,m=S.length-(u-1);c<m;c++)l+="../";for(c=u-1,m=_.length;c<m;c++)c!==u-1?l+="/"+_[c]:l+=_[c];return l},e.prototype.toAbsPath=function(r,o){var u,l=0,c=[],m,S=/\/$/.test(o)?"/":"",_=r.split("/"),nt=o.split("/");for(lx(_,function(pt){pt&&c.push(pt)}),_=c,u=nt.length-1,c=[];u>=0;u--)if(!(nt[u].length===0||nt[u]===".")){if(nt[u]===".."){l++;continue}if(l>0){l--;continue}c.push(nt[u])}return u=_.length-l,u<=0?m=fr(c).join("/"):m=_.slice(0,u).join("/")+"/"+fr(c).join("/"),m.indexOf("/")!==0&&(m="/"+m),S&&m.lastIndexOf("/")!==m.length-1&&(m+=S),m},e.prototype.getURI=function(r){r===void 0&&(r=!1);var o;return(!this.source||r)&&(o="",r||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source},e}(),WP=Zn.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea"),cx=function(e){return e.indexOf("data-")===0||e.indexOf("aria-")===0},Ag=lu(function(){return document.implementation.createHTMLDocument("parser")}),f1=function(e,r,o){for(var u=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,l=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,c=e.getShortEndedElements(),m=1,S=o;m!==0;)for(u.lastIndex=S;;){var _=u.exec(r);if(_===null)return S;if(_[1]==="!"){mt(_[2],"--")?S=Wp(r,!1,_.index+3):S=Wp(r,!0,_.index+1);break}else{l.lastIndex=u.lastIndex;var nt=l.exec(r);if(Ke(nt)||nt.index!==u.lastIndex)continue;_[1]==="/"?m-=1:Ka(c,_[2])||(m+=1),S=u.lastIndex+nt[0].length;break}}return S},J_=function(e,r){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(r))},Wp=function(e,r,o){o===void 0&&(o=0);var u=e.toLowerCase();if(u.indexOf("[if ",o)!==-1&&J_(u,o)){var l=u.indexOf("[endif]",o);return u.indexOf(">",l)}else if(r){var c=u.indexOf(">",o);return c!==-1?c:u.length}else{var m=/--!?>/g;m.lastIndex=o;var S=m.exec(e);return S?S.index+S[0].length:u.length}},qP=function(e,r){var o=e.exec(r);if(o){var u=o[1],l=o[2];return typeof u=="string"&&u.toLowerCase()==="data-mce-bogus"?l:null}else return null},fx=function(e,r){r===void 0&&(r=Hl()),e=e||{};var o=Ag(),u=o.createElement("form");e.fix_self_closing!==!1&&(e.fix_self_closing=!0);var l=e.comment?e.comment:it,c=e.cdata?e.cdata:it,m=e.text?e.text:it,S=e.start?e.start:it,_=e.end?e.end:it,nt=e.pi?e.pi:it,pt=e.doctype?e.doctype:it,bt=function(Pt,Ft){Ft===void 0&&(Ft="html");for(var zt=Pt.html,Vt,rn=0,Qt,On,kn=[],mn,Ln,lr,Tr,$a,Zr,vr,_a,Or,Jr,Dr,Ur,fa,Sr,ra,xo,Vo,zo=0,Iu=Yc.decode,Ri=Zn.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Ms=Ft==="html"?0:1,Tl=function(Uo){var Ci,Tu;for(Ci=kn.length;Ci--&&kn[Ci].name!==Uo;);if(Ci>=0){for(Tu=kn.length-1;Tu>=Ci;Tu--)Uo=kn[Tu],Uo.valid&&_(Uo.name);kn.length=Ci}},xr=function(Uo,Ci){return m(ux(Uo,Pt),Ci)},Fr=function(Uo){Uo!==""&&(Uo.charAt(0)===">"&&(Uo=" "+Uo),!e.allow_conditional_comments&&Uo.substr(0,3).toLowerCase()==="[if"&&(Uo=" "+Uo),l(ux(Uo,Pt)))},Oa=function(Uo){return ux(Uo,Pt)},zn=function(Uo,Ci){var Tu=Uo||"",Ef=!mt(Tu,"--"),kf=Wp(zt,Ef,Ci);return Uo=zt.substr(Ci,kf-Ci),Fr(Ef?Tu+Uo:Uo),kf+1},_r=function(Uo,Ci,Tu,Ef,kf){if(Ci=Ci.toLowerCase(),Tu=Oa(Ci in Au?Ci:Iu(Tu||Ef||kf||"")),mu&&!$a&&cx(Ci)===!1){var Af=Dr[Ci];if(!Af&&Ur){for(var Cv=Ur.length;Cv--&&(Af=Ur[Cv],!Af.pattern.test(Ci)););Cv===-1&&(Af=null)}if(!Af||Af.validValues&&!(Tu in Af.validValues))return}var JE=Ci==="name"||Ci==="id";JE&&Uo in WP&&(Tu in o||Tu in u)||Ri[Ci]&&!ov.isDomSafe(Tu,Uo,e)||$a&&(Ci in Ri||Ci.indexOf("on")===0)||(mn.map[Ci]=Tu,mn.push({name:Ci,value:Tu}))},kr=new RegExp(`<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\\s*|\\/)>))`,"g"),Na=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,Ia=r.getShortEndedElements(),ii=e.self_closing_elements||r.getSelfClosingElements(),Au=r.getBoolAttrs(),mu=e.validate,ys=e.remove_internals,ws=e.fix_self_closing,Xs=r.getSpecialElements(),pu=zt+">";Vt=kr.exec(pu);){var Xl=Vt[0];if(rn<Vt.index&&xr(Iu(zt.substr(rn,Vt.index-rn))),Qt=Vt[7])Qt=Qt.toLowerCase(),Qt.charAt(0)===":"&&(Qt=Qt.substr(1)),Tl(Qt);else if(Qt=Vt[8]){if(Vt.index+Xl.length>zt.length){xr(Iu(zt.substr(Vt.index))),rn=Vt.index+Xl.length;continue}Qt=Qt.toLowerCase(),Qt.charAt(0)===":"&&(Qt=Qt.substr(1)),Zr=Qt in Ia,ws&&ii[Qt]&&kn.length>0&&kn[kn.length-1].name===Qt&&Tl(Qt);var Ys=qP(Na,Vt[9]);if(Ys!==null){if(Ys==="all"){rn=f1(r,zt,kr.lastIndex),kr.lastIndex=rn;continue}_a=!1}if(!mu||(vr=r.getElementRule(Qt))){if(_a=!0,mu&&(Dr=vr.attributes,Ur=vr.attributePatterns),(Jr=Vt[9])?($a=Jr.indexOf("data-mce-type")!==-1,$a&&ys&&(_a=!1),mn=[],mn.map={},Jr.replace(Na,function(Uo,Ci,Tu,Ef,kf){return _r(Qt,Ci,Tu,Ef,kf),""})):(mn=[],mn.map={}),mu&&!$a){if(fa=vr.attributesRequired,Sr=vr.attributesDefault,ra=vr.attributesForced,xo=vr.removeEmptyAttrs,xo&&!mn.length&&(_a=!1),ra)for(Ln=ra.length;Ln--;)Or=ra[Ln],Tr=Or.name,Vo=Or.value,Vo==="{$uid}"&&(Vo="mce_"+zo++),mn.map[Tr]=Vo,mn.push({name:Tr,value:Vo});if(Sr)for(Ln=Sr.length;Ln--;)Or=Sr[Ln],Tr=Or.name,Tr in mn.map||(Vo=Or.value,Vo==="{$uid}"&&(Vo="mce_"+zo++),mn.map[Tr]=Vo,mn.push({name:Tr,value:Vo}));if(fa){for(Ln=fa.length;Ln--&&!(fa[Ln]in mn.map););Ln===-1&&(_a=!1)}if(Or=mn.map["data-mce-bogus"]){if(Or==="all"){rn=f1(r,zt,kr.lastIndex),kr.lastIndex=rn;continue}_a=!1}}_a&&S(Qt,mn,Zr)}else _a=!1;if(On=Xs[Qt]){On.lastIndex=rn=Vt.index+Xl.length,(Vt=On.exec(zt))?(_a&&(lr=zt.substr(rn,Vt.index-rn)),rn=Vt.index+Vt[0].length):(lr=zt.substr(rn),rn=zt.length),_a&&(lr.length>0&&xr(lr,!0),_(Qt)),kr.lastIndex=rn;continue}Zr||(!Jr||Jr.indexOf("/")!==Jr.length-1?kn.push({name:Qt,valid:_a}):_a&&_(Qt))}else if(Qt=Vt[1])Fr(Qt);else if(Qt=Vt[2]){var Jf=Ms===1||e.preserve_cdata||kn.length>0&&r.isValidChild(kn[kn.length-1].name,"#cdata");if(Jf)c(Qt);else{rn=zn("",Vt.index+2),kr.lastIndex=rn;continue}}else if(Qt=Vt[3])pt(Qt);else if((Qt=Vt[4])||Xl==="<!"){rn=zn(Qt,Vt.index+Xl.length),kr.lastIndex=rn;continue}else if(Qt=Vt[5])if(Ms===1)nt(Qt,Vt[6]);else{rn=zn("?",Vt.index+2),kr.lastIndex=rn;continue}rn=Vt.index+Xl.length}for(rn<zt.length&&xr(Iu(zt.substr(rn))),Ln=kn.length-1;Ln>=0;Ln--)Qt=kn[Ln],Qt.valid&&_(Qt.name)},Ct=function(Pt,Ft){Ft===void 0&&(Ft="html"),bt(IP(Pt),Ft)};return{parse:Ct}};fx.findEndTag=f1;var pd=Zn.makeMap,d1=Zn.each,dx=Zn.explode,Tg=Zn.extend,v1=function(e,r){r===void 0&&(r=Hl());var o={},u=[],l={},c={};e=e||{},e.validate="validate"in e?e.validate:!0,e.root_name=e.root_name||"body";var m=function(Ft){for(var zt=pd("tr,td,th,tbody,thead,tfoot,table"),Vt=r.getNonEmptyElements(),rn=r.getWhiteSpaceElements(),Qt=r.getTextBlockElements(),On=r.getSpecialElements(),kn=function(Ur,fa){if(fa===void 0&&(fa=Ur.parent),On[Ur.name])Ur.empty().remove();else{for(var Sr=Ur.children(),ra=0,xo=Sr;ra<xo.length;ra++){var Vo=xo[ra];r.isValidChild(fa.name,Vo.name)||kn(Vo,fa)}Ur.unwrap()}},mn=0;mn<Ft.length;mn++){var Ln=Ft[mn],lr=void 0,Tr=void 0,$a=void 0;if(!(!Ln.parent||Ln.fixed)){if(Qt[Ln.name]&&Ln.parent.name==="li"){for(var Zr=Ln.next;Zr&&Qt[Zr.name];){Zr.name="li",Zr.fixed=!0,Ln.parent.insert(Zr,Ln.parent);Zr=Zr.next}Ln.unwrap();continue}var vr=[Ln];for(lr=Ln.parent;lr&&!r.isValidChild(lr.name,Ln.name)&&!zt[lr.name];lr=lr.parent)vr.push(lr);if(lr&&vr.length>1)if(r.isValidChild(lr.name,Ln.name)){vr.reverse(),Tr=S(vr[0].clone());for(var _a=Tr,Or=0;Or<vr.length-1;Or++){r.isValidChild(_a.name,vr[Or].name)?($a=S(vr[Or].clone()),_a.append($a)):$a=_a;for(var Jr=vr[Or].firstChild;Jr&&Jr!==vr[Or+1];){var Dr=Jr.next;$a.append(Jr),Jr=Dr}_a=$a}jp(r,Vt,rn,Tr)?lr.insert(Ln,vr[0],!0):(lr.insert(Tr,vr[0],!0),lr.insert(Ln,Tr)),lr=vr[0],(jp(r,Vt,rn,lr)||W_(lr,"br"))&&lr.empty().remove()}else kn(Ln);else if(Ln.parent){if(Ln.name==="li"){var Zr=Ln.prev;if(Zr&&(Zr.name==="ul"||Zr.name==="ol")){Zr.append(Ln);continue}if(Zr=Ln.next,Zr&&(Zr.name==="ul"||Zr.name==="ol")){Zr.insert(Ln,Zr.firstChild,!0);continue}Ln.wrap(S(new dc("ul",1)));continue}r.isValidChild(Ln.parent.name,"div")&&r.isValidChild("div",Ln.name)?Ln.wrap(S(new dc("div",1))):kn(Ln)}}}},S=function(Ft){var zt=Ft.name;if(zt in o){var Vt=l[zt];Vt?Vt.push(Ft):l[zt]=[Ft]}for(var rn=u.length;rn--;){var Qt=u[rn].name;if(Qt in Ft.attributes.map){var Vt=c[Qt];Vt?Vt.push(Ft):c[Qt]=[Ft]}}return Ft},_=function(Ft,zt){d1(dx(Ft),function(Vt){var rn=o[Vt];rn||(o[Vt]=rn=[]),rn.push(zt)})},nt=function(){var Ft=[];for(var zt in o)Ka(o,zt)&&Ft.push({name:zt,callbacks:o[zt]});return Ft},pt=function(Ft,zt){d1(dx(Ft),function(Vt){var rn;for(rn=0;rn<u.length;rn++)if(u[rn].name===Vt){u[rn].callbacks.push(zt);return}u.push({name:Vt,callbacks:[zt]})})},bt=function(){return[].concat(u)},Ct=function(Ft,zt){var Vt,rn,Qt,On,kn,mn,Ln,lr=[],Tr,$a=function(zn){return zn===!1?"":zn===!0?"p":zn};zt=zt||{},l={},c={};var Zr=Tg(pd("script,style,head,html,body,title,meta,param"),r.getBlockElements()),vr=pb(r),_a=r.getNonEmptyElements(),Or=r.children,Jr=e.validate,Dr="forced_root_block"in zt?zt.forced_root_block:e.forced_root_block,Ur=$a(Dr),fa=r.getWhiteSpaceElements(),Sr=/^[ \t\r\n]+/,ra=/[ \t\r\n]+$/,xo=/[ \t\r\n]+/g,Vo=/^[ \t\r\n]+$/,zo=Ka(fa,zt.context)||Ka(fa,e.root_name),Iu=function(){var zn=Oa.firstChild,_r=null,kr=function(Ia){Ia&&(zn=Ia.firstChild,zn&&zn.type===3&&(zn.value=zn.value.replace(Sr,"")),zn=Ia.lastChild,zn&&zn.type===3&&(zn.value=zn.value.replace(ra,"")))};if(r.isValidChild(Oa.name,Ur.toLowerCase())){for(;zn;){var Na=zn.next;zn.type===3||zn.type===1&&zn.name!=="p"&&!Zr[zn.name]&&!zn.attr("data-mce-type")?(_r||(_r=Ri(Ur,1),_r.attr(e.forced_root_block_attrs),Oa.insert(_r,zn)),_r.append(zn)):(kr(_r),_r=null),zn=Na}kr(_r)}},Ri=function(zn,_r){var kr=new dc(zn,_r),Na;return zn in o&&(Na=l[zn],Na?Na.push(kr):l[zn]=[kr]),kr},Ms=function(zn){for(var _r=r.getBlockElements(),kr=zn.prev;kr&&kr.type===3;){var Na=kr.value.replace(ra,"");if(Na.length>0){kr.value=Na;return}var Ia=kr.next;if(Ia){if(Ia.type===3&&Ia.value.length){kr=kr.prev;continue}if(!_r[Ia.name]&&Ia.name!=="script"&&Ia.name!=="style"){kr=kr.prev;continue}}var ii=kr.prev;kr.remove(),kr=ii}},Tl=function(zn){var _r={};for(var kr in zn)kr!=="li"&&kr!=="p"&&(_r[kr]=zn[kr]);return _r},xr=function(zn){for(var _r=zn;Ot(_r);){if(_r.name in vr)return jp(r,_a,fa,_r);_r=_r.parent}return!1},Fr=fx({validate:Jr,document:e.document,allow_html_data_urls:e.allow_html_data_urls,allow_svg_data_urls:e.allow_svg_data_urls,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,preserve_cdata:e.preserve_cdata,self_closing_elements:Tl(r.getSelfClosingElements()),cdata:function(zn){Tr.append(Ri("#cdata",4)).value=zn},text:function(zn,_r){var kr;zo||(zn=zn.replace(xo," "),HP(Tr.lastChild,Zr)&&(zn=zn.replace(Sr,""))),zn.length!==0&&(kr=Ri("#text",3),kr.raw=!!_r,Tr.append(kr).value=zn)},comment:function(zn){Tr.append(Ri("#comment",8)).value=zn},pi:function(zn,_r){Tr.append(Ri(zn,7)).value=_r,Ms(Tr)},doctype:function(zn){var _r=Tr.append(Ri("#doctype",10));_r.value=zn,Ms(Tr)},start:function(zn,_r,kr){var Na=Jr?r.getElementRule(zn):{};if(Na){var Ia=Ri(Na.outputName||zn,1);Ia.attributes=_r,Ia.shortEnded=kr,Tr.append(Ia);var ii=Or[Tr.name];ii&&Or[Ia.name]&&!ii[Ia.name]&&lr.push(Ia);for(var Au=u.length;Au--;){var mu=u[Au].name;mu in _r.map&&(mn=c[mu],mn?mn.push(Ia):c[mu]=[Ia])}Zr[zn]&&Ms(Ia),kr||(Tr=Ia),!zo&&fa[zn]&&(zo=!0)}},end:function(zn){var _r,kr,Na,Ia=Jr?r.getElementRule(zn):{};if(Ia){if(Zr[zn]&&!zo){if(_r=Tr.firstChild,_r&&_r.type===3)if(kr=_r.value.replace(Sr,""),kr.length>0)_r.value=kr,_r=_r.next;else for(Na=_r.next,_r.remove(),_r=Na;_r&&_r.type===3;)kr=_r.value,Na=_r.next,(kr.length===0||Vo.test(kr))&&(_r.remove(),_r=Na),_r=Na;if(_r=Tr.lastChild,_r&&_r.type===3)if(kr=_r.value.replace(ra,""),kr.length>0)_r.value=kr,_r=_r.prev;else for(Na=_r.prev,_r.remove(),_r=Na;_r&&_r.type===3;)kr=_r.value,Na=_r.prev,(kr.length===0||Vo.test(kr))&&(_r.remove(),_r=Na),_r=Na}zo&&fa[zn]&&(zo=!1);var ii=jp(r,_a,fa,Tr),Au=Tr.parent;Ia.paddInEmptyBlock&&ii&&xr(Tr)?sx(e,zt,Zr,Tr):Ia.removeEmpty&&ii?Zr[Tr.name]?Tr.empty().remove():Tr.unwrap():Ia.paddEmpty&&(j_(Tr)||ii)&&sx(e,zt,Zr,Tr),Tr=Au}}},r),Oa=Tr=new dc(zt.context||e.root_name,11);if(Fr.parse(Ft,zt.format),Jr&&lr.length&&(zt.context?zt.invalid=!0:m(lr)),Ur&&(Oa.name==="body"||zt.isRootContent)&&Iu(),!zt.invalid){for(Ln in l)if(Ka(l,Ln)){for(mn=o[Ln],Vt=l[Ln],On=Vt.length;On--;)Vt[On].parent||Vt.splice(On,1);for(rn=0,Qt=mn.length;rn<Qt;rn++)mn[rn](Vt,Ln,zt)}for(rn=0,Qt=u.length;rn<Qt;rn++)if(mn=u[rn],mn.name in c){for(Vt=c[mn.name],On=Vt.length;On--;)Vt[On].parent||Vt.splice(On,1);for(On=0,kn=mn.callbacks.length;On<kn;On++)mn.callbacks[On](Vt,mn.name,zt)}}return Oa},Pt={schema:r,addAttributeFilter:pt,getAttributeFilters:bt,addNodeFilter:_,getNodeFilters:nt,filterNode:S,parse:Ct};return VP(Pt,e),Vp(Pt,e),Pt},Z_=function(e,r,o){e.addAttributeFilter("data-mce-tabindex",function(u,l){for(var c=u.length;c--;){var m=u[c];m.attr("tabindex",m.attr("data-mce-tabindex")),m.attr(l,null)}}),e.addAttributeFilter("src,href,style",function(u,l){for(var c="data-mce-"+l,m=r.url_converter,S=r.url_converter_scope,_=u.length;_--;){var nt=u[_],pt=nt.attr(c);pt!==void 0?(nt.attr(l,pt.length>0?pt:null),nt.attr(c,null)):(pt=nt.attr(l),l==="style"?pt=o.serializeStyle(o.parseStyle(pt),nt.name):m&&(pt=m.call(S,pt,l,nt.name)),nt.attr(l,pt.length>0?pt:null))}}),e.addAttributeFilter("class",function(u){for(var l=u.length;l--;){var c=u[l],m=c.attr("class");m&&(m=c.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),c.attr("class",m.length>0?m:null))}}),e.addAttributeFilter("data-mce-type",function(u,l,c){for(var m=u.length;m--;){var S=u[m];if(S.attr("data-mce-type")==="bookmark"&&!c.cleanup){var _=dt.from(S.firstChild).exists(function(nt){return!gl(nt.value)});_?S.unwrap():S.remove()}}}),e.addNodeFilter("noscript",function(u){for(var l=u.length;l--;){var c=u[l].firstChild;c&&(c.value=Yc.decode(c.value))}}),e.addNodeFilter("script,style",function(u,l){for(var c=function(pt){return pt.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},m=u.length;m--;){var S=u[m],_=S.firstChild?S.firstChild.value:"";if(l==="script"){var nt=S.attr("type");nt&&S.attr("type",nt==="mce-no/type"?null:nt.replace(/^mce\-/,"")),r.element_format==="xhtml"&&_.length>0&&(S.firstChild.value=`// <![CDATA[
`+c(_)+`
// ]]>`)}else r.element_format==="xhtml"&&_.length>0&&(S.firstChild.value=`<!--
`+c(_)+`
-->`)}}),e.addNodeFilter("#comment",function(u){for(var l=u.length;l--;){var c=u[l];r.preserve_cdata&&c.value.indexOf("[CDATA[")===0?(c.name="#cdata",c.type=4,c.value=o.decode(c.value.replace(/^\[CDATA\[|\]\]$/g,""))):c.value.indexOf("mce:protected ")===0&&(c.name="#text",c.type=3,c.raw=!0,c.value=unescape(c.value).substr(14))}}),e.addNodeFilter("xml:namespace,input",function(u,l){for(var c=u.length;c--;){var m=u[c];m.type===7?m.remove():m.type===1&&l==="input"&&!m.attr("type")&&m.attr("type","text")}}),e.addAttributeFilter("data-mce-type",function(u){Fn(u,function(l){l.attr("data-mce-type")==="format-caret"&&(l.isEmpty(e.schema.getNonEmptyElements())?l.remove():l.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(u,l){for(var c=u.length;c--;)u[c].attr(l,null)})},eO=function(e){var r=function(l){return l&&l.name==="br"},o=e.lastChild;if(r(o)){var u=o.prev;r(u)&&(o.remove(),u.remove())}},tO=function(e,r,o){var u,l=e.dom,c=r.cloneNode(!0),m=document.implementation;if(m.createHTMLDocument){var S=m.createHTMLDocument("");Zn.each(c.nodeName==="BODY"?c.childNodes:[c],function(_){S.body.appendChild(S.importNode(_,!0))}),c.nodeName!=="BODY"?c=S.body.firstChild:c=S.body,u=l.doc,l.doc=S}return uR(e,Ca(Ca({},o),{node:c})),u&&(l.doc=u),c},KP=function(e,r){return e&&e.hasEventListeners("PreProcess")&&!r.no_events},GP=function(e,r,o){return KP(e,o)?tO(e,r,o):r},XP=function(e,r,o){Zn.inArray(r,o)===-1&&(e.addAttributeFilter(o,function(u,l){for(var c=u.length;c--;)u[c].attr(l,null)}),r.push(o))},vx=function(e,r,o){if(!r.no_events&&e){var u=AC(e,Ca(Ca({},r),{content:o}));return u.content}else return o},YP=function(e,r,o){var u=bl(o.getInner?r.innerHTML:e.getOuterHTML(r));return o.selection||Eh(lt.fromDom(r))?u:Zn.trim(u)},QP=function(e,r,o){var u=o.selection?Ca({forced_root_block:!1},o):o,l=e.parse(r,u);return eO(l),l},_g=function(e,r,o){var u=Zv(e,r);return u.serialize(o)},mx=function(e,r,o,u,l){var c=_g(r,o,u);return vx(e,l,c)},JP=function(e,r){var o=["data-mce-selected"],u=r&&r.dom?r.dom:Oi.DOM,l=r&&r.schema?r.schema:Hl(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;var c=v1(e,l);Z_(c,e,u);var m=function(S,_){_===void 0&&(_={});var nt=Ca({format:"html"},_),pt=GP(r,S,nt),bt=YP(u,pt,nt),Ct=QP(c,bt,nt);return nt.format==="tree"?Ct:mx(r,e,l,Ct,nt)};return{schema:l,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,serialize:m,addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:Mt(XP,c,o),getTempAttrs:Et(o),getNodeFilters:c.getNodeFilters,getAttributeFilters:c.getAttributeFilters}},px=function(e,r){var o=JP(e,r);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters}},ZP="html",m1=function(e,r){r===void 0&&(r={});var o=r.format?r.format:ZP;return SP(e,r,o)},p1=function(e,r,o){return o===void 0&&(o={}),xP(e,r,o)},h1=Oi.DOM,ku=function(e){h1.setStyle(e.id,"display",e.orgDisplay)},g1=function(e){return dt.from(e).each(function(r){return r.destroy()})},nO=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},eI=function(e){var r=e.formElement;r&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,r._mceOldSubmit=null),h1.unbind(r,"submit reset",e.formEventDelegate))},tI=function(e){if(!e.removed){var r=e._selectionOverrides,o=e.editorUpload,u=e.getBody(),l=e.getElement();u&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&l&&h1.remove(l.nextSibling),iA(e),e.editorManager.remove(e),!e.inline&&u&&ku(e),uA(e),h1.remove(e.getContainer()),g1(r),g1(o),e.destroy()}},rO=function(e,r){var o=e.selection,u=e.dom;if(!e.destroyed){if(!r&&!e.removed){e.remove();return}r||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),g1(o),g1(u)),eI(e),nO(e),e.destroyed=!0}},nI=function(e,r){var o=st(e)&&st(r);return o?aO(e,r):r},hx=function(e){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(r.length===0)throw new Error("Can't merge zero objects");for(var u={},l=0;l<r.length;l++){var c=r[l];for(var m in c)Ka(c,m)&&(u[m]=e(u[m],c[m]))}return u}},aO=hx(nI),oO="autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),gx="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),rI="imagetools,toc".split(","),aI=function(e){var r=tn(oO,function(u){return Ka(e,u)}),o=e.forced_root_block;return(o===!1||o==="")&&r.push("forced_root_block (false only)"),Tn(r)},oI=function(e){var r=Zn.makeMap(e.plugins," "),o=function(l){return Ka(r,l)},u=Fi(Fi([],tn(gx,o),!0),fo(rI,function(l){return o(l)?[l+" (moving to premium)"]:[]}),!0);return Tn(u)},iI=function(e,r){var o=aI(e),u=oI(r),l=u.length>0,c=o.length>0,m=r.theme==="mobile";if(l||c||m)var S=`
- `,_=m?`

Themes:`+S+"mobile":"",nt=l?`

Plugins:`+S+u.join(S):"",pt=c?`

Settings:`+S+o.join(S):""},uI=function(e,r){return{sections:Et(e),settings:Et(r)}},b1=Ea().deviceType,iO=b1.isTouch(),y1=b1.isPhone(),uO=b1.isTablet(),sO=["lists","autolink","autosave"],bx={table_grid:!1,object_resizing:!1,resize:!1},qp=function(e){var r=rt(e)?e.join(" "):e,o=er(Ye(r)?r.split(" "):[],Jt);return tn(o,function(u){return u.length>0})},lO=function(e){return tn(e,Mt(cn,sO))},cO=function(e,r){var o=pr(r,function(u,l){return cn(e,l)});return uI(o.t,o.f)},sI=function(e,r,o){o===void 0&&(o={});var u=e.sections(),l=Xa(u,r).getOr({});return Zn.extend({},o,l)},Kp=function(e,r){return Ka(e.sections(),r)},lI=function(e,r,o){var u=e.sections();return Kp(e,r)&&u[r].theme===o},w1=function(e,r){return Kp(e,r)?e.sections()[r]:{}},fO=function(e,r){return Xa(e,"toolbar_mode").orThunk(function(){return Xa(e,"toolbar_drawer").map(function(o){return o===!1?"wrap":o})}).getOr(r)},cI=function(e,r,o,u,l){var c={id:r,theme:"silver",toolbar_mode:fO(e,"floating"),plugins:"",document_base_url:o,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:l.convertURL,url_converter_scope:l};return Ca(Ca({},c),u?bx:{})},fI=function(e,r){var o={resize:!1,toolbar_mode:fO(e,"scrolling"),toolbar_sticky:!1},u={menubar:!1};return Ca(Ca(Ca({},bx),o),r?u:{})},dO=function(e,r){var o=r.external_plugins?r.external_plugins:{};return e&&e.external_plugins?Zn.extend({},e.external_plugins,o):o},vO=function(e,r){return[].concat(qp(e)).concat(qp(r))},dI=function(e,r,o,u){return e&&lI(r,"mobile","mobile")?lO(u):e&&Kp(r,"mobile")?u:o},vI=function(e,r,o,u){var l=qp(o.forced_plugins),c=qp(u.plugins),m=w1(r,"mobile"),S=m.plugins?qp(m.plugins):c,_=dI(e,r,c,S),nt=vO(l,_);if(Ra.browser.isIE()&&cn(nt,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return Zn.extend(u,{plugins:nt.join(" ")})},mI=function(e,r){return e&&Kp(r,"mobile")},pI=function(e,r,o,u,l){var c=e?{mobile:fI(l.mobile||{},r)}:{},m=cO(["mobile"],aO(c,l)),S=Zn.extend(o,u,m.settings(),mI(e,m)?sI(m,"mobile"):{},{validate:!0,external_plugins:dO(u,m.settings())});return vI(e,m,u,S)},mO=function(e,r,o,u,l){var c=cI(l,r,o,iO,e),m=pI(y1||uO,y1,c,u,l);return m.deprecation_warnings!==!1&&iI(l,m),m},cm=function(e,r,o){return dt.from(r.settings[o]).filter(e)},hI=function(e){var r={};return typeof e=="string"?Fn(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(o){var u=o.split("=");u.length>1?r[Zn.trim(u[0])]=Zn.trim(u[1]):r[Zn.trim(u[0])]=Zn.trim(u[0])}):r=e,r},gI=function(e){return function(r){return rt(r)&&oo(r,e)}},bI=function(e,r,o,u){var l=r in e.settings?e.settings[r]:o;return u==="hash"?hI(l):u==="string"?cm(Ye,e,r).getOr(o):u==="number"?cm(xt,e,r).getOr(o):u==="boolean"?cm(tt,e,r).getOr(o):u==="object"?cm(st,e,r).getOr(o):u==="array"?cm(rt,e,r).getOr(o):u==="string[]"?cm(gI(Ye),e,r).getOr(o):u==="function"?cm(wt,e,r).getOr(o):l},yI=function(){var e={},r=function(l,c){e[l]=c},o=function(l){return e[l]?e[l]:{icons:{}}},u=function(l){return Ka(e,l)};return{add:r,get:o,has:u}},C1=yI(),pO=function(e,r){var o=r.dom;return o[e]},hO=function(e,r){return parseInt(_o(r,e),10)},gO=Mt(pO,"clientWidth"),wI=Mt(pO,"clientHeight"),CI=Mt(hO,"margin-top"),SI=Mt(hO,"margin-left"),xI=function(e){return e.dom.getBoundingClientRect()},EI=function(e,r,o){var u=gO(e),l=wI(e);return r>=0&&o>=0&&r<=u&&o<=l},Og=function(e,r,o,u){var l=xI(r),c=e?l.left+r.dom.clientLeft+SI(r):0,m=e?l.top+r.dom.clientTop+CI(r):0,S=o-c,_=u-m;return{x:S,y:_}},bO=function(e,r,o){var u=lt.fromDom(e.getBody()),l=e.inline?u:tc(u),c=Og(e.inline,l,r,o);return EI(l,c.x,c.y)},kI=function(e){return dt.from(e).map(lt.fromDom)},yO=function(e){var r=e.inline?e.getBody():e.getContentAreaContainer();return kI(r).map(di).getOr(!1)},wO=function(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}},CO=function(e){var r=[],o=function(){var Ct=e.theme;return Ct&&Ct.getNotificationManagerImpl?Ct.getNotificationManagerImpl():wO()},u=function(){return dt.from(r[0])},l=function(Ct,Pt){return Ct.type===Pt.type&&Ct.text===Pt.text&&!Ct.progressBar&&!Ct.timeout&&!Pt.progressBar&&!Pt.timeout},c=function(){r.length>0&&o().reposition(r)},m=function(Ct){r.push(Ct)},S=function(Ct){pa(r,function(Pt){return Pt===Ct}).each(function(Pt){r.splice(Pt,1)})},_=function(Ct,Pt){if(Pt===void 0&&(Pt=!0),!(e.removed||!yO(e)))return Pt&&e.fire("BeforeOpenNotification",{notification:Ct}),oa(r,function(Ft){return l(o().getArgs(Ft),Ct)}).getOrThunk(function(){e.editorManager.setActive(e);var Ft=o().open(Ct,function(){S(Ft),c(),u().fold(function(){return e.focus()},function(zt){return TR(lt.fromDom(zt.getEl()))})});return m(Ft),c(),e.fire("OpenNotification",{notification:Ca({},Ft)}),Ft})},nt=function(){u().each(function(Ct){o().close(Ct),S(Ct),c()})},pt=Et(r),bt=function(Ct){Ct.on("SkinLoaded",function(){var Pt=Sk(Ct);Pt&&_({text:Pt,type:"warning",timeout:0},!1),c()}),Ct.on("show ResizeEditor ResizeWindow NodeChange",function(){cs.requestAnimationFrame(c)}),Ct.on("remove",function(){Fn(r.slice(),function(Pt){o().close(Pt)})})};return bt(e),{open:_,close:nt,getNotifications:pt}},bf=al.PluginManager,iv=al.ThemeManager;function Mg(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}var yx=function(e){var r=[],o=function(){var zt=e.theme;return zt&&zt.getWindowManagerImpl?zt.getWindowManagerImpl():Mg()},u=function(zt,Vt){return function(){for(var rn=[],Qt=0;Qt<arguments.length;Qt++)rn[Qt]=arguments[Qt];return Vt?Vt.apply(zt,rn):void 0}},l=function(zt){e.fire("OpenWindow",{dialog:zt})},c=function(zt){e.fire("CloseWindow",{dialog:zt})},m=function(zt){r.push(zt),l(zt)},S=function(zt){c(zt),r=tn(r,function(Vt){return Vt!==zt}),r.length===0&&e.focus()},_=function(){return dt.from(r[r.length-1])},nt=function(zt){e.editorManager.setActive(e),x0(e);var Vt=zt();return m(Vt),Vt},pt=function(zt,Vt){return nt(function(){return o().open(zt,Vt,S)})},bt=function(zt){return nt(function(){return o().openUrl(zt,S)})},Ct=function(zt,Vt,rn){var Qt=o();Qt.alert(zt,u(rn||Qt,Vt))},Pt=function(zt,Vt,rn){var Qt=o();Qt.confirm(zt,u(rn||Qt,Vt))},Ft=function(){_().each(function(zt){o().close(zt),S(zt)})};return e.on("remove",function(){Fn(r,function(zt){o().close(zt)})}),{open:pt,openUrl:bt,alert:Ct,confirm:Pt,close:Ft}},wx=function(e,r){e.notificationManager.open({type:"error",text:r})},S1=function(e,r){e._skinLoaded?wx(e,r):e.on("SkinLoaded",function(){wx(e,r)})},SO=function(e,r){S1(e,$s.translate(["Failed to upload image: {0}",r]))},Cx=function(e,r,o){v0(e,r,{message:o})},Sx=function(e,r,o){return o?"Failed to load "+e+": "+o+" from url "+r:"Failed to load "+e+" url: "+r},xx=function(e,r,o){Cx(e,"PluginLoadError",Sx("plugin",r,o))},xO=function(e,r,o){Cx(e,"IconsLoadError",Sx("icons",r,o))},AI=function(e,r,o){Cx(e,"LanguageLoadError",Sx("language",r,o))},TI=function(e,r,o){var u=$s.translate(["Failed to initialize plugin: {0}",r]);v0(e,"PluginLoadError",{message:u}),x1(u,o),S1(e,u)},x1=function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var u=window.console;u&&(u.error?u.error.apply(u,Fi([e],r,!1)):u.log.apply(u,Fi([e],r,!1)))},EO=function(e){return/^[a-z0-9\-]+$/i.test(e)},_I=function(e){return Gp(e,gk(e))},OI=function(e){return Gp(e,bk(e))},Gp=function(e,r){var o=e.editorManager.baseURL+"/skins/content",u=e.editorManager.suffix,l="content"+u+".css",c=e.inline===!0;return er(r,function(m){return EO(m)&&!c?o+"/"+m+"/"+l:e.documentBaseURI.toAbsolute(m)})},kO=function(e){e.contentCSS=e.contentCSS.concat(_I(e),OI(e))},Ex=function(){var e=1,r=2,o={},u=function(Ct,Pt){return{status:Ct,resultUri:Pt}},l=function(Ct){return Ct in o},c=function(Ct){var Pt=o[Ct];return Pt?Pt.resultUri:null},m=function(Ct){return l(Ct)?o[Ct].status===e:!1},S=function(Ct){return l(Ct)?o[Ct].status===r:!1},_=function(Ct){o[Ct]=u(e,null)},nt=function(Ct,Pt){o[Ct]=u(r,Pt)},pt=function(Ct){delete o[Ct]},bt=function(){o={}};return{hasBlobUri:l,getResultUri:c,isPending:m,isUploaded:S,markPending:_,markUploaded:nt,removeFailed:pt,destroy:bt}},MI=0,DI=function(){var e=function(){return Math.round(Math.random()*4294967295).toString(36)},r=new Date().getTime();return"s"+r.toString(36)+e()+e()+e()},AO=function(e){return e+MI+++DI()},TO=function(){var e=[],r=function(bt){var Ct={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"};return Ct[bt.toLowerCase()]||"dat"},o=function(bt,Ct,Pt,Ft,zt){if(Ye(bt)){var Vt=bt;return u({id:Vt,name:Ft,filename:zt,blob:Ct,base64:Pt})}else{if(st(bt))return u(bt);throw new Error("Unknown input type")}},u=function(bt){if(!bt.blob||!bt.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var Ct=bt.id||AO("blobid"),Pt=bt.name||Ct,Ft=bt.blob;return{id:Et(Ct),name:Et(Pt),filename:Et(bt.filename||Pt+"."+r(Ft.type)),blob:Et(Ft),base64:Et(bt.base64),blobUri:Et(bt.blobUri||URL.createObjectURL(Ft)),uri:Et(bt.uri)}},l=function(bt){m(bt.id())||e.push(bt)},c=function(bt){return oa(e,bt).getOrUndefined()},m=function(bt){return c(function(Ct){return Ct.id()===bt})},S=function(bt){return c(function(Ct){return Ct.blobUri()===bt})},_=function(bt,Ct){return c(function(Pt){return Pt.base64()===bt&&Pt.blob().type===Ct})},nt=function(bt){e=tn(e,function(Ct){return Ct.blobUri()===bt?(URL.revokeObjectURL(Ct.blobUri()),!1):!0})},pt=function(){Fn(e,function(bt){URL.revokeObjectURL(bt.blobUri())}),e=[]};return{create:o,add:l,get:m,getByUri:S,getByData:_,findFirst:c,removeByUri:nt,destroy:pt}},NI=function(e,r){var o={},u=function(Ft,zt){return Ft?Ft.replace(/\/$/,"")+"/"+zt.replace(/^\//,""):zt},l=function(Ft,zt,Vt,rn){var Qt=new XMLHttpRequest;Qt.open("POST",r.url),Qt.withCredentials=r.credentials,Qt.upload.onprogress=function(kn){rn(kn.loaded/kn.total*100)},Qt.onerror=function(){Vt("Image upload failed due to a XHR Transport error. Code: "+Qt.status)},Qt.onload=function(){if(Qt.status<200||Qt.status>=300){Vt("HTTP Error: "+Qt.status);return}var kn=JSON.parse(Qt.responseText);if(!kn||typeof kn.location!="string"){Vt("Invalid JSON: "+Qt.responseText);return}zt(u(r.basePath,kn.location))};var On=new FormData;On.append("file",Ft.blob(),Ft.filename()),Qt.send(On)},c=function(){return new Wu(function(Ft){Ft([])})},m=function(Ft,zt){return{url:zt,blobInfo:Ft,status:!0}},S=function(Ft,zt,Vt){return{url:"",blobInfo:Ft,status:!1,error:{message:zt,options:Vt}}},_=function(Ft,zt){Zn.each(o[Ft],function(Vt){Vt(zt)}),delete o[Ft]},nt=function(Ft,zt,Vt){return e.markPending(Ft.blobUri()),new Wu(function(rn){var Qt,On;try{var kn=function(){Qt&&(Qt.close(),On=it)},mn=function(lr){kn(),e.markUploaded(Ft.blobUri(),lr),_(Ft.blobUri(),m(Ft,lr)),rn(m(Ft,lr))},Ln=function(lr,Tr){var $a=Tr||{};kn(),e.removeFailed(Ft.blobUri()),_(Ft.blobUri(),S(Ft,lr,$a)),rn(S(Ft,lr,$a))};On=function(lr){lr<0||lr>100||dt.from(Qt).orThunk(function(){return dt.from(Vt).map($e)}).each(function(Tr){Qt=Tr,Tr.progressBar.value(lr)})},zt(Ft,mn,Ln,On)}catch(lr){rn(S(Ft,lr.message,{}))}})},pt=function(Ft){return Ft===l},bt=function(Ft){var zt=Ft.blobUri();return new Wu(function(Vt){o[zt]=o[zt]||[],o[zt].push(Vt)})},Ct=function(Ft,zt){return Ft=Zn.grep(Ft,function(Vt){return!e.isUploaded(Vt.blobUri())}),Wu.all(Zn.map(Ft,function(Vt){return e.isPending(Vt.blobUri())?bt(Vt):nt(Vt,r.handler,zt)}))},Pt=function(Ft,zt){return!r.url&&pt(r.handler)?c():Ct(Ft,zt)};return wt(r.handler)===!1&&(r.handler=l),{upload:Pt}},_O=function(e){return function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},OO=function(e,r){return NI(r,{url:u3(e),basePath:qd(e),credentials:Wb(e),handler:s3(e)})},LI=function(e){var r=Ex(),o=OO(e,r);return{upload:function(u,l){return l===void 0&&(l=!0),o.upload(u,l?_O(e):void 0)}}},RI=function(e){var r=zs(null);e.on("change AddUndo",function(u){r.set(Ca({},u.level))});var o=function(){var u=e.undoManager.data;Pr(u).filter(function(l){return!n1(r.get(),l)}).each(function(l){e.setDirty(!0),e.fire("change",{level:l,lastLevel:Rn(u,u.length-2).getOrNull()})})};return{fireIfChanged:o}},gs=function(e){var r=TO(),o,u,l=Ex(),c=[],m=RI(e),S=function(kn){return function(mn){return e.selection?kn(mn):[]}},_=function(kn){return kn+(kn.indexOf("?")===-1?"?":"&")+new Date().getTime()},nt=function(kn,mn,Ln){var lr=0;do lr=kn.indexOf(mn,lr),lr!==-1&&(kn=kn.substring(0,lr)+Ln+kn.substr(lr+mn.length),lr+=Ln.length-mn.length+1);while(lr!==-1);return kn},pt=function(kn,mn,Ln){var lr='src="'+Ln+'"'+(Ln===Ra.transparentSrc?' data-mce-placeholder="1"':"");return kn=nt(kn,'src="'+mn+'"',lr),kn=nt(kn,'data-mce-src="'+mn+'"','data-mce-src="'+Ln+'"'),kn},bt=function(kn,mn){Fn(e.undoManager.data,function(Ln){Ln.type==="fragmented"?Ln.fragments=er(Ln.fragments,function(lr){return pt(lr,kn,mn)}):Ln.content=pt(Ln.content,kn,mn)})},Ct=function(kn,mn){var Ln=e.convertURL(mn,"src");bt(kn.src,mn),e.$(kn).attr({src:qw(e)?_(mn):mn,"data-mce-src":Ln})},Pt=function(kn){return o||(o=OO(e,l)),rn().then(S(function(mn){var Ln=er(mn,function(lr){return lr.blobInfo});return o.upload(Ln,_O(e)).then(S(function(lr){var Tr=[],$a=er(lr,function(Zr,vr){var _a=mn[vr].blobInfo,Or=mn[vr].image;return Zr.status&&i3(e)?(r.removeByUri(Or.src),md(e)||Ct(Or,Zr.url)):Zr.error&&(Zr.error.options.remove&&(bt(Or.getAttribute("src"),Ra.transparentSrc),Tr.push(Or)),SO(e,Zr.error.message)),{element:Or,status:Zr.status,uploadUri:Zr.url,blobInfo:_a}});return $a.length>0&&m.fireIfChanged(),Tr.length>0&&(md(e)||e.undoManager.transact(function(){Fn(Tr,function(Zr){e.dom.remove(Zr),r.removeByUri(Zr.src)})})),kn&&kn($a),$a}))}))},Ft=function(kn){if(Vh(e))return Pt(kn)},zt=function(kn){if(oo(c,function(Ln){return Ln(kn)})===!1)return!1;if(kn.getAttribute("src").indexOf("data:")===0){var mn=jb(e);return mn(kn)}return!0},Vt=function(kn){c.push(kn)},rn=function(){return u||(u=PP(l,r)),u.findAll(e.getBody(),zt).then(S(function(kn){return kn=tn(kn,function(mn){return typeof mn=="string"?(S1(e,mn),!1):!0}),md(e)||Fn(kn,function(mn){bt(mn.image.src,mn.blobInfo.blobUri()),mn.image.src=mn.blobInfo.blobUri(),mn.image.removeAttribute("data-mce-src")}),kn}))},Qt=function(){r.destroy(),l.destroy(),u=o=null},On=function(kn){return kn.replace(/src="(blob:[^"]+)"/g,function(mn,Ln){var lr=l.getResultUri(Ln);if(lr)return'src="'+lr+'"';var Tr=r.getByUri(Ln);if(Tr||(Tr=Rr(e.editorManager.get(),function(Zr,vr){return Zr||vr.editorUpload&&vr.editorUpload.blobCache.getByUri(Ln)},null)),Tr){var $a=Tr.blob();return'src="data:'+$a.type+";base64,"+Tr.base64()+'"'}return mn})};return e.on("SetContent",function(){Vh(e)?Ft():rn()}),e.on("RawSaveContent",function(kn){kn.content=On(kn.content)}),e.on("GetContent",function(kn){kn.source_view||kn.format==="raw"||kn.format==="tree"||(kn.content=On(kn.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(kn){Fn(kn,function(mn){var Ln=mn.attr("src");if(!r.getByUri(Ln)){var lr=l.getResultUri(Ln);lr&&mn.attr("src",lr)}})})}),{blobCache:r,addFilter:Vt,uploadImages:Pt,uploadImagesAuto:Ft,scanForImages:rn,destroy:Qt}},MO=function(e){var r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(o,u,l){return ma(o)&&o.hasAttribute("href")},onformat:function(o,u,l){Zn.each(l,function(c,m){e.setAttrib(o,m,c)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(o){var u;return(u=o==null?void 0:o.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Zn.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(o){r[o]={block:o,remove:"all"}}),r},BI=function(e){var r={},o=function(m){return Ot(m)?r[m]:r},u=function(m){return Ka(r,m)},l=function(m,S){m&&(Ye(m)?(rt(S)||(S=[S]),Fn(S,function(_){at(_.deep)&&(_.deep=!Ul(_)),at(_.split)&&(_.split=!Ul(_)||rs(_)),at(_.remove)&&Ul(_)&&!rs(_)&&(_.remove="none"),Ul(_)&&rs(_)&&(_.mixed=!0,_.block_expand=!0),Ye(_.classes)&&(_.classes=_.classes.split(/\s+/))}),r[m]=S):Nr(m,function(_,nt){l(nt,_)}))},c=function(m){return m&&r[m]&&delete r[m],r};return l(MO(e.dom)),l(m3(e)),{get:o,has:u,register:l,unregister:c}},E1=Zn.each,Gs=Oi.DOM,DO=function(e,r){var o,u,l,c=r&&r.schema||Hl({}),m=function(pt,bt){bt.classes.length&&Gs.addClass(pt,bt.classes.join(" ")),Gs.setAttribs(pt,bt.attrs)},S=function(pt){u=typeof pt=="string"?{name:pt,classes:[],attrs:{}}:pt;var bt=Gs.create(u.name);return m(bt,u),bt},_=function(pt,bt){var Ct=typeof pt!="string"?pt.nodeName.toLowerCase():pt,Pt=c.getElementRule(Ct),Ft=Pt&&Pt.parentsRequired;return Ft&&Ft.length?bt&&Zn.inArray(Ft,bt)!==-1?bt:Ft[0]:!1},nt=function(pt,bt,Ct){var Pt,Ft,zt=bt.length>0&&bt[0],Vt=zt&&zt.name,rn=_(pt,Vt);if(rn)Vt===rn?(Ft=bt[0],bt=bt.slice(1)):Ft=rn;else if(zt)Ft=bt[0],bt=bt.slice(1);else if(!Ct)return pt;return Ft&&(Pt=S(Ft),Pt.appendChild(pt)),Ct&&(Pt||(Pt=Gs.create("div"),Pt.appendChild(pt)),Zn.each(Ct,function(Qt){var On=S(Qt);Pt.insertBefore(On,pt)})),nt(Pt,bt,Ft&&Ft.siblings)};return e&&e.length?(u=e[0],o=S(u),l=Gs.create("div"),l.appendChild(nt(o,e.slice(1),u.siblings)),l):""},Ho=function(e){var r,o={classes:[],attrs:{}};return e=o.selector=Zn.trim(e),e!=="*"&&(r=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(u,l,c,m,S){switch(l){case"#":o.attrs.id=c;break;case".":o.classes.push(c);break;case":":Zn.inArray("checked disabled enabled read-only required".split(" "),c)!==-1&&(o.attrs[c]=c);break}if(m==="["){var _=S.match(/([\w\-]+)(?:\=\"([^\"]+))?/);_&&(o.attrs[_[1]]=_[2])}return""})),o.name=r||"div",o},PI=function(e){return!e||typeof e!="string"?[]:(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Zn.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(r){var o=Zn.map(r.split(/(?:~\+|~|\+)/),Ho),u=o.pop();return o.length&&(u.siblings=o),u}).reverse())},II=function(e,r){var o,u,l="",c,m=p3(e);if(m==="")return"";var S=function(bt){return bt.replace(/%(\w+)/g,"")};if(typeof r=="string"){if(r=e.formatter.get(r),!r)return;r=r[0]}if("preview"in r){var _=Xa(r,"preview");if(Tv(_,!1))return"";m=_.getOr(m)}o=r.block||r.inline||"span";var nt=PI(r.selector);nt.length?(nt[0].name||(nt[0].name=o),o=r.selector,u=DO(nt,e)):u=DO([o],e);var pt=Gs.select(o,u)[0]||u.firstChild;return E1(r.styles,function(bt,Ct){var Pt=S(bt);Pt&&Gs.setStyle(pt,Ct,Pt)}),E1(r.attributes,function(bt,Ct){var Pt=S(bt);Pt&&Gs.setAttrib(pt,Ct,Pt)}),E1(r.classes,function(bt){var Ct=S(bt);Gs.hasClass(pt,Ct)||Gs.addClass(pt,Ct)}),e.fire("PreviewFormats"),Gs.setStyles(u,{position:"absolute",left:-65535}),e.getBody().appendChild(u),c=Gs.getStyle(e.getBody(),"fontSize",!0),c=/px$/.test(c)?parseInt(c,10):0,E1(m.split(" "),function(bt){var Ct=Gs.getStyle(pt,bt,!0);if(!(bt==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(Ct)&&(Ct=Gs.getStyle(e.getBody(),bt,!0),Gs.toHex(Ct).toLowerCase()==="#ffffff"))&&!(bt==="color"&&Gs.toHex(Ct).toLowerCase()==="#000000")){if(bt==="font-size"&&/em|%$/.test(Ct)){if(c===0)return;var Pt=parseFloat(Ct)/(/%$/.test(Ct)?100:1);Ct=Pt*c+"px"}bt==="border"&&Ct&&(l+="padding:0 2px;"),l+=bt+":"+Ct+";"}}),e.fire("AfterPreviewFormats"),Gs.remove(u),l},FI=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var r=1;r<=6;r++)e.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Ui=function(e){var r=BI(e),o=zs(null);return FI(e),q0(e),{get:r.get,has:r.has,register:r.register,unregister:r.unregister,apply:function(u,l,c){u1(e,u,l,c)},remove:function(u,l,c,m){yP(e,u,l,c,m)},toggle:function(u,l,c){wP(e,u,l,c)},match:function(u,l,c,m){return bP(e,u,l,c,m)},closest:function(u){return B_(e,u)},matchAll:function(u,l){return L_(e,u,l)},matchNode:function(u,l,c,m){return i1(e,u,l,c,m)},canApply:function(u){return R_(e,u)},formatChanged:function(u,l,c,m){return CP(e,o,u,l,c,m)},getCssText:Mt(II,e)}},NO=function(e){switch(e.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return!0;default:return!1}},Dg=function(e,r,o){var u=zs(!1),l=function(_){r1(r,!1,o),r.add({},_)};e.on("init",function(){r.add()}),e.on("BeforeExecCommand",function(_){var nt=_.command;NO(nt)||(x_(r,o),r.beforeChange())}),e.on("ExecCommand",function(_){var nt=_.command;NO(nt)||l(_)}),e.on("ObjectResizeStart cut",function(){r.beforeChange()}),e.on("SaveContent ObjectResized blur",l),e.on("dragend",l),e.on("keyup",function(_){var nt=_.keyCode;_.isDefaultPrevented()||((nt>=33&&nt<=36||nt>=37&&nt<=40||nt===45||_.ctrlKey)&&(l(),e.nodeChanged()),(nt===46||nt===8)&&e.nodeChanged(),u.get()&&r.typing&&n1(Fp(e),r.data[0])===!1&&(e.isDirty()===!1&&(e.setDirty(!0),e.fire("change",{level:r.data[0],lastLevel:null})),e.fire("TypingUndo"),u.set(!1),e.nodeChanged()))}),e.on("keydown",function(_){var nt=_.keyCode;if(!_.isDefaultPrevented()){if(nt>=33&&nt<=36||nt>=37&&nt<=40||nt===45){r.typing&&l(_);return}var pt=_.ctrlKey&&!_.altKey||_.metaKey;(nt<16||nt>20)&&nt!==224&&nt!==91&&!r.typing&&!pt&&(r.beforeChange(),r1(r,!0,o),r.add({},_),u.set(!0))}}),e.on("mousedown",function(_){r.typing&&l(_)});var c=function(_){return _.inputType==="insertReplacementText"},m=function(_){return _.inputType==="insertText"&&_.data===null},S=function(_){return _.inputType==="insertFromPaste"||_.inputType==="insertFromDrop"};e.on("input",function(_){_.inputType&&(c(_)||m(_)||S(_))&&l(_)}),e.on("AddUndo Undo Redo ClearUndos",function(_){_.isDefaultPrevented()||e.nodeChanged()})},HI=function(e){e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},LO=function(e){var r=Hv(),o=zs(0),u=zs(0),l={data:[],typing:!1,beforeChange:function(){rx(e,o,r)},add:function(c,m){return M_(e,l,u,o,r,c,m)},undo:function(){return o1(e,l,o,u)},redo:function(){return Wl(e,u,l.data)},clear:function(){xg(e,l,u)},reset:function(){lm(e,l)},hasUndo:function(){return pP(e,l,u)},hasRedo:function(){return D_(e,l,u)},transact:function(c){return N_(e,l,o,c)},ignore:function(c){hP(e,o,c)},extra:function(c,m){gP(e,l,u,c,m)}};return md(e)||Dg(e,l,o),HI(e),l},zI=[9,27,qa.HOME,qa.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,qa.DOWN,qa.UP,qa.LEFT,qa.RIGHT].concat(Ra.browser.isFirefox()?[224]:[]),kx="data-mce-placeholder",hd=function(e){return e.type==="keydown"||e.type==="keyup"},kl=function(e){var r=e.keyCode;return r===qa.BACKSPACE||r===qa.DELETE},Ng=function(e){if(hd(e)){var r=e.keyCode;return!kl(e)&&(qa.metaKeyPressed(e)||e.altKey||r>=112&&r<=123||cn(zI,r))}else return!1},fm=function(e){return hd(e)&&!(kl(e)||e.type==="keyup"&&e.keyCode===229)},Xf=function(e,r,o){if(Zu(lt.fromDom(r),!1)){var u=o==="",l=r.firstElementChild;return l?e.getStyle(r.firstElementChild,"padding-left")||e.getStyle(r.firstElementChild,"padding-right")?!1:u?!e.isBlock(l):o===l.nodeName.toLowerCase():!0}else return!1},Lg=function(e){var r=e.dom,o=ps(e),u=Ck(e),l=function(c,m){if(!Ng(c)){var S=e.getBody(),_=fm(c)?!1:Xf(r,S,o),nt=r.getAttrib(S,kx)!=="";(nt!==_||m)&&(r.setAttrib(S,kx,_?u:null),r.setAttrib(S,"aria-placeholder",_?u:null),cA(e,_),e.on(_?"keydown":"keyup",l),e.off(_?"keyup":"keydown",l))}};u&&e.on("init",function(c){l(c,!0),e.on("change SetContent ExecCommand",l),e.on("paste",function(m){return cs.setEditorTimeout(e,function(){return l(m)})})})},Ax=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Tx=function(e){return Ax.test(e)},uv=function(e,r){return Kr(lt.fromDom(r),f3(e))},RO=function(e){return Oi.DOM.getStyle(e,"direction",!0)==="rtl"||Tx(e.textContent)},$I=function(e,r,o){return tn(Oi.DOM.getParents(o.container(),"*",r),e)},gd=function(e,r,o){var u=$I(e,r,o);return dt.from(u[u.length-1])},BO=function(e,r,o){var u=uf(r,e),l=uf(o,e);return u&&u===l},VI=function(e){return Va(e)||Uy(e)},ql=function(e,r){if(!r)return r;var o=r.container(),u=r.offset();return e?hi(o)?ia(o.nextSibling)?Jn(o.nextSibling,0):Jn.after(o):Va(r)?Jn(o,u+1):r:hi(o)?ia(o.previousSibling)?Jn(o.previousSibling,o.previousSibling.data.length):Jn.before(o):Uy(r)?Jn(o,u-1):r},PO=Mt(ql,!0),Xp=Mt(ql,!1),IO=function(e){return function(r){return Wa(e,lt.fromDom(r.dom.parentNode))}},FO=function(e){return id(e)||Is(e)},Lc=function(e,r){return ei(e,r)?ib(r,FO,IO(e)):dt.none()},_x=function(e){var r=e.getBody(),o=r.firstChild&&e.dom.isBlock(r.firstChild)?r.firstChild:r;e.selection.setCursorLocation(o,0)},HO=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),_x(e))},UI=function(e,r,o){return As(js(o),ff(o),function(u,l){var c=ql(!0,u),m=ql(!1,l),S=ql(!1,r);return e?lf(o,S).exists(function(_){return _.isEqual(m)&&r.isEqual(c)}):cf(o,S).exists(function(_){return _.isEqual(c)&&r.isEqual(m)})}).getOr(!0)},jI=function(e,r){return{block:e,position:r}},Yp=function(e,r){return{from:e,to:r}},Ox=function(e,r){var o=lt.fromDom(e),u=lt.fromDom(r.container());return Lc(o,u).map(function(l){return jI(l,r)})},WI=function(e){return Wa(e.from.block,e.to.block)===!1},as=function(e){return Hi(e.from.block).bind(function(r){return Hi(e.to.block).filter(function(o){return Wa(r,o)})}).isSome()},qI=function(e){return Mi(e.from.block.dom)===!1&&Mi(e.to.block.dom)===!1},zO=function(e,r,o){return ui(o.position.getNode())&&Zu(o.block)===!1?Gd(!1,o.block.dom).bind(function(u){return u.isEqual(o.position)?Vl(r,e,u).bind(function(l){return Ox(e,l)}):dt.some(o)}).getOr(o):o},$O=function(e,r,o){var u=Ox(e,Jn.fromRangeStart(o)),l=u.bind(function(c){return Vl(r,e,c.position).bind(function(m){return Ox(e,m).map(function(S){return zO(e,r,S)})})});return As(u,l,Yp).filter(function(c){return WI(c)&&as(c)&&qI(c)})},VO=function(e,r,o){return o.collapsed?$O(e,r,o):dt.none()},UO=function(e){var r=I(e);return pa(r,rc).fold(Et(r),function(o){return r.slice(0,o)})},k1=function(e){var r=UO(e);return Fn(r,ca),r},jO=function(e,r){var o=Da(r,e);return oa(o.reverse(),function(u){return Zu(u)}).each(ca)},KI=function(e){return tn(g(e),function(r){return!Zu(r)}).length===0},GI=function(e,r,o,u){if(Zu(o))return em(o),js(o.dom);KI(u)&&Zu(r)&&sa(u,lt.fromTag("br"));var l=cf(o.dom,Jn.before(u.dom));return Fn(k1(r),function(c){sa(u,c)}),jO(e,r),l},XI=function(e,r,o){if(Zu(o))return ca(o),Zu(r)&&em(r),js(r.dom);var u=ff(o.dom);return Fn(k1(r),function(l){xa(o,l)}),jO(e,r),u},YI=function(e,r){var o=Da(r,e);return dt.from(o[o.length-1])},Yf=function(e,r){return ei(r,e)?YI(r,e):dt.none()},WO=function(e,r){Gd(e,r.dom).map(function(o){return o.getNode()}).map(lt.fromDom).filter(Fm).each(ca)},qO=function(e,r,o){return WO(!0,r),WO(!1,o),Yf(r,o).fold(Mt(XI,e,r,o),Mt(GI,e,r,o))},KO=function(e,r,o,u){return r?qO(e,u,o):qO(e,o,u)},A1=function(e,r){var o=lt.fromDom(e.getBody()),u=VO(o.dom,r,e.selection.getRng()).bind(function(l){return KO(o,r,l.from.block,l.to.block)});return u.each(function(l){e.selection.setRng(l.toRange())}),u.isSome()},QI=function(e,r){var o=r.getRng();return As(Lc(e,lt.fromDom(o.startContainer)),Lc(e,lt.fromDom(o.endContainer)),function(u,l){return Wa(u,l)===!1?(o.deleteContents(),KO(e,!0,u,l).each(function(c){r.setRng(c.toRange())}),!0):!1}).getOr(!1)},Qi=function(e,r){var o=lt.fromDom(r),u=Mt(Wa,e);return Sh(o,Gc,u).isSome()},GO=function(e,r){return Qi(e,r.startContainer)||Qi(e,r.endContainer)},XO=function(e,r){var o=cf(e.dom,Jn.fromRangeStart(r)).isNone(),u=lf(e.dom,Jn.fromRangeEnd(r)).isNone();return!GO(e,r)&&o&&u},yf=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},YO=function(e){var r=lt.fromDom(e.getBody()),o=e.selection.getRng();return XO(r,o)?yf(e):QI(r,e.selection)},T1=function(e,r){return e.selection.isCollapsed()?!1:YO(e)},JI=Ec,Mx=Mi,bd=function(e,r,o,u,l){return dt.from(r._selectionOverrides.showCaret(e,o,u,l))},Qp=function(e){var r=e.ownerDocument.createRange();return r.selectNode(e),r},Jp=function(e,r){var o=e.fire("BeforeObjectSelected",{target:r});return o.isDefaultPrevented()?dt.none():dt.some(Qp(r))},Dx=function(e,r,o){var u=Qb(1,e.getBody(),r),l=Jn.fromRangeStart(u),c=l.getNode();if(qh(c))return bd(1,e,c,!l.isAtEnd(),!1);var m=l.getNode(!0);if(qh(m))return bd(1,e,m,!1,!1);var S=e.dom.getParent(l.getNode(),function(_){return Mx(_)||JI(_)});return qh(S)?bd(1,e,S,!1,o):dt.none()},_1=function(e,r,o){return r.collapsed?Dx(e,r,o).getOr(r):r},Nx=function(e){return Jd(e)||Ap(e)},QO=function(e){return Zd(e)||Tp(e)},Lx=function(e,r){ia(r)&&r.data.length===0&&e.remove(r)},JO=function(e,r,o,u,l,c){return bd(u,e,c.getNode(!l),l,!0).each(function(m){if(r.collapsed){var S=r.cloneRange();l?S.setEnd(m.startContainer,m.startOffset):S.setStart(m.endContainer,m.endOffset),S.deleteContents()}else r.deleteContents();e.selection.setRng(m)}),Lx(e.dom,o),!0},ZI=function(e,r){var o=e.selection.getRng();if(!ia(o.commonAncestorContainer))return!1;var u=r?ns.Forwards:ns.Backwards,l=Yi(e.getBody()),c=Mt(rC,r?l.next:l.prev),m=r?Nx:QO,S=vp(u,e.getBody(),o),_=ql(r,c(S));if(!_||!Zb(S,_))return!1;if(m(_))return JO(e,o,S.getNode(),u,r,_);var nt=c(_);return nt&&m(nt)&&Zb(_,nt)?JO(e,o,S.getNode(),u,r,nt):!1},O1=function(e,r){return ZI(e,r)},Rc=function(e){return Gc(lt.fromDom(e))||Is(lt.fromDom(e))},Kl=Ba.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),eF=function(e,r){var o=r.getNode(e===!1),u=e?"after":"before";return ma(o)&&o.getAttribute("data-mce-caret")===u},tF=function(e,r,o,u){var l=function(c){return _s(lt.fromDom(c))&&!sf(o,u,e)};return nC(!r,o).fold(function(){return nC(r,u).fold(vt,l)},l)},Zp=function(e,r,o,u){var l=u.getNode(r===!1);return Lc(lt.fromDom(e),lt.fromDom(o.getNode())).map(function(c){return Zu(c)?Kl.remove(c.dom):Kl.moveToElement(l)}).orThunk(function(){return dt.some(Kl.moveToElement(l))})},ZO=function(e,r,o){return Vl(r,e,o).bind(function(u){return Rc(u.getNode())||tF(e,r,o,u)?dt.none():r&&Mi(u.getNode())||r===!1&&Mi(u.getNode(!0))?Zp(e,r,o,u):r&&Zd(o)||r===!1&&Jd(o)?dt.some(Kl.moveToPosition(u)):dt.none()})},eM=function(e,r){return e&&Mi(r.nextSibling)?dt.some(Kl.moveToElement(r.nextSibling)):e===!1&&Mi(r.previousSibling)?dt.some(Kl.moveToElement(r.previousSibling)):dt.none()},tM=function(e,r,o){return o.fold(function(u){return dt.some(Kl.remove(u))},function(u){return dt.some(Kl.moveToElement(u))},function(u){return sf(r,u,e)?dt.none():dt.some(Kl.moveToPosition(u))})},nM=function(e,r,o){return eF(r,o)?eM(r,o.getNode(r===!1)).fold(function(){return ZO(e,r,o)},dt.some):ZO(e,r,o).bind(function(u){return tM(e,o,u)})},nF=function(e,r,o){var u=Qb(r?1:-1,e,o),l=Jn.fromRangeStart(u),c=lt.fromDom(e);return r===!1&&Zd(l)?dt.some(Kl.remove(l.getNode(!0))):r&&Jd(l)?dt.some(Kl.remove(l.getNode())):r===!1&&Jd(l)&&mo(c,l)?fT(c,l).map(function(m){return Kl.remove(m.getNode())}):r&&Zd(l)&&tS(c,l)?g4(c,l).map(function(m){return Kl.remove(m.getNode())}):nM(e,r,l)},rF=function(e,r){return function(o){return e._selectionOverrides.hideFakeCaret(),tm(e,r,lt.fromDom(o)),!0}},sv=function(e,r){return function(o){var u=r?Jn.before(o):Jn.after(o);return e.selection.setRng(u.toRange()),!0}},aF=function(e){return function(r){return e.selection.setRng(r.toRange()),!0}},rM=function(e,r){return dt.from(wp(e.getBody(),r))},oF=function(e,r){var o=e.selection.getNode();return rM(e,o).filter(Mi).fold(function(){return nF(e.getBody(),r,e.selection.getRng()).exists(function(u){return u.fold(rF(e,r),sv(e,r),aF(e))})},nn)},iF=function(e){Fn(ts(e,".mce-offscreen-selection"),ca)},uF=function(e,r){var o=e.selection.getNode();if(Mi(o)&&!Nm(o)){var u=rM(e,o.parentNode).filter(Mi);return u.fold(function(){return iF(lt.fromDom(e.getBody())),tm(e,r,lt.fromDom(e.selection.getNode())),HO(e),!0},nn)}return!1},aM=function(e){var r=e.dom,o=e.selection,u=wp(e.getBody(),o.getNode());if(Ec(u)&&r.isBlock(u)&&r.isEmpty(u)){var l=r.create("br",{"data-mce-bogus":"1"});r.setHTML(u,""),u.appendChild(l),o.setRng(Jn.before(l).toRange())}return!0},M1=function(e,r){return e.selection.isCollapsed()?oF(e,r):uF(e,r)},sF=function(e,r){var o=Jn.fromRangeStart(e.selection.getRng());return Vl(r,e.getBody(),o).filter(function(u){return r?s4(u):l4(u)}).bind(function(u){return dt.from(Yb(r?0:-1,u))}).exists(function(u){return e.selection.select(u),!0})},D1=function(e,r){return e.selection.isCollapsed()?sF(e,r):!1},eh=ia,oM=function(e){return eh(e)&&e.data[0]===En},iM=function(e){return eh(e)&&e.data[e.data.length-1]===En},th=function(e){return e.ownerDocument.createTextNode(En)},lF=function(e){if(eh(e.previousSibling))return iM(e.previousSibling)||e.previousSibling.appendData(En),e.previousSibling;if(eh(e))return oM(e)||e.insertData(0,En),e;var r=th(e);return e.parentNode.insertBefore(r,e),r},Rx=function(e){if(eh(e.nextSibling))return oM(e.nextSibling)||e.nextSibling.insertData(0,En),e.nextSibling;if(eh(e))return iM(e)||e.appendData(En),e;var r=th(e);return e.nextSibling?e.parentNode.insertBefore(r,e.nextSibling):e.parentNode.appendChild(r),r},N1=function(e,r){return e?lF(r):Rx(r)},cF=Mt(N1,!0),fF=Mt(N1,!1),uM=function(e,r){return ia(e.container())?N1(r,e.container()):N1(r,e.getNode())},lv=function(e,r){var o=r.get();return o&&e.container()===o&&hi(o)},yd=function(e,r){return r.fold(function(o){$v(e.get());var u=cF(o);return e.set(u),dt.some(Jn(u,u.length-1))},function(o){return js(o).map(function(u){if(lv(u,e))return Jn(e.get(),1);$v(e.get());var l=uM(u,!0);return e.set(l),Jn(l,1)})},function(o){return ff(o).map(function(u){if(lv(u,e))return Jn(e.get(),e.get().length-1);$v(e.get());var l=uM(u,!1);return e.set(l),Jn(l,l.length-1)})},function(o){$v(e.get());var u=fF(o);return e.set(u),dt.some(Jn(u,1))})},Rg=function(e,r){for(var o=0;o<e.length;o++){var u=e[o].apply(null,r);if(u.isSome())return u}return dt.none()},os=Ba.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),cv=function(e,r){var o=uf(r,e);return o||e},dm=function(e,r,o){var u=PO(o),l=cv(r,u.container());return gd(e,l,u).fold(function(){return lf(l,u).bind(Mt(gd,e,l)).map(function(c){return os.before(c)})},dt.none)},L1=function(e,r){return Wv(e,r)===null},Bg=function(e,r,o){return gd(e,r,o).filter(Mt(L1,r))},sM=function(e,r,o){var u=Xp(o);return Bg(e,r,u).bind(function(l){var c=cf(l,u);return c.isNone()?dt.some(os.start(l)):dt.none()})},Bx=function(e,r,o){var u=PO(o);return Bg(e,r,u).bind(function(l){var c=lf(l,u);return c.isNone()?dt.some(os.end(l)):dt.none()})},Px=function(e,r,o){var u=Xp(o),l=cv(r,u.container());return gd(e,l,u).fold(function(){return cf(l,u).bind(Mt(gd,e,l)).map(function(c){return os.after(c)})},dt.none)},Ix=function(e){return RO(fv(e))===!1},wf=function(e,r,o){var u=Rg([dm,sM,Bx,Px],[e,r,o]);return u.filter(Ix)},fv=function(e){return e.fold(Ht,Ht,Ht,Ht)},Fx=function(e){return e.fold(Et("before"),Et("start"),Et("end"),Et("after"))},Pg=function(e){return e.fold(os.before,os.before,os.after,os.after)},R1=function(e){return e.fold(os.start,os.start,os.end,os.end)},B1=function(e,r){return Fx(e)===Fx(r)&&fv(e)===fv(r)},lM=function(e,r,o,u,l,c){return As(gd(r,o,u),gd(r,o,l),function(m,S){return m!==S&&BO(o,m,S)?os.after(e?m:S):c}).getOr(c)},cM=function(e,r){return e.fold(nn,function(o){return!B1(o,r)})},fM=function(e,r,o,u,l){var c=ql(e,l),m=Vl(e,o,c).map(Mt(ql,e)),S=m.fold(function(){return u.map(Pg)},function(_){return wf(r,o,_).map(Mt(lM,e,r,o,c,_)).filter(Mt(cM,u))});return S.filter(Ix)},dM=function(e,r){return e?r.fold(yt(dt.some,os.start),dt.none,yt(dt.some,os.after),dt.none):r.fold(dt.none,yt(dt.some,os.before),dt.none,yt(dt.some,os.end))},Cf=function(e,r,o,u){var l=ql(e,u),c=wf(r,o,l);return wf(r,o,l).bind(Mt(dM,e)).orThunk(function(){return fM(e,r,o,c,u)})};Mt(Cf,!1),Mt(Cf,!0);var vM=function(e){return wt(e.selection.getSel().modify)},Hx=function(e,r,o){var u=e?1:-1;return r.setRng(Jn(o.container(),o.offset()+u).toRange()),r.getSel().modify("move",e?"forward":"backward","word"),!0},dv=function(e,r){var o=r.selection.getRng(),u=e?Jn.fromRangeEnd(o):Jn.fromRangeStart(o);return vM(r)?e&&Va(u)?Hx(!0,r.selection,u):!e&&Uy(u)?Hx(!1,r.selection,u):!1:!1},Gu;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Gu||(Gu={}));var P1=function(e,r){return e===ns.Backwards?fr(r):r},dF=function(e,r,o){return e===ns.Forwards?r.next(o):r.prev(o)},vF=function(e,r,o,u){return ui(u.getNode(r===ns.Forwards))?Gu.Br:sf(o,u)===!1?Gu.Block:Gu.Wrap},mM=function(e,r,o,u){for(var l=Yi(o),c=u,m=[];c;){var S=dF(r,l,c);if(!S)break;if(ui(S.getNode(!1)))return r===ns.Forwards?{positions:P1(r,m).concat([S]),breakType:Gu.Br,breakAt:dt.some(S)}:{positions:P1(r,m),breakType:Gu.Br,breakAt:dt.some(S)};if(!S.isVisible()){c=S;continue}if(e(c,S)){var _=vF(o,r,c,S);return{positions:P1(r,m),breakType:_,breakAt:dt.some(S)}}m.push(S),c=S}return{positions:P1(r,m),breakType:Gu.Eol,breakAt:dt.none()}},pM=function(e,r,o,u){return r(o,u).breakAt.map(function(l){var c=r(o,l).positions;return e===ns.Backwards?c.concat(l):[l].concat(c)}).getOr([])},zx=function(e,r){return Rr(e,function(o,u){return o.fold(function(){return dt.some(u)},function(l){return As(dr(l.getClientRects()),dr(u.getClientRects()),function(c,m){var S=Math.abs(r-c.left),_=Math.abs(r-m.left);return _<=S?u:l}).or(o)})},dt.none())},hM=function(e,r){return dr(r.getClientRects()).bind(function(o){return zx(e,o.left)})},Ig=Mt(mM,Jn.isAbove,-1),Fg=Mt(mM,Jn.isBelow,1),mF=Mt(pM,-1,Ig),pF=Mt(pM,1,Fg),hF=function(e,r){return Ig(e,r).breakAt.isNone()},$x=function(e,r){return Fg(e,r).breakAt.isNone()},Vx=function(e){return js(e).map(function(r){return[r].concat(Fg(e,r).positions)}).getOr([])},gM=function(e){return ff(e).map(function(r){return Ig(e,r).positions.concat(r)}).getOr([])},gF=function(e){var r=function(u){return er(u,function(l){var c=Ud(l);return c.node=e,c})};if(ma(e))return r(e.getClientRects());if(ia(e)){var o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),r(o.getClientRects())}},Ux=function(e){return fo(e,gF)},vv;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(vv||(vv={}));var bM=function(e,r,o,u){for(;u=cp(u,e,wu,r);)if(o(u))return},I1=function(e,r,o,u,l,c){var m=0,S=[],_=function(bt){var Ct=Ux([bt]);e===-1&&(Ct=Ct.reverse());for(var Pt=0;Pt<Ct.length;Pt++){var Ft=Ct[Pt];if(!o(Ft,nt)){if(S.length>0&&r(Ft,ji(S))&&m++,Ft.line=m,l(Ft))return!0;S.push(Ft)}}},nt=ji(c.getClientRects());if(!nt)return S;var pt=c.getNode();return _(pt),bM(e,u,_,pt),S},yM=function(e,r){return r.line>e},wM=function(e,r){return r.line===e},jx=Mt(I1,vv.Up,ap,op),bF=Mt(I1,vv.Down,op,ap),yF=function(e,r,o,u){var l=Yi(r),c,m,S,_,nt=[],pt=0,bt=function(zt){return ji(zt.getClientRects())};e===1?(c=l.next,m=op,S=ap,_=Jn.after(u)):(c=l.prev,m=ap,S=op,_=Jn.before(u));var Ct=bt(_);do if(_.isVisible()){var Pt=bt(_);if(!S(Pt,Ct)){nt.length>0&&m(Pt,ji(nt))&&pt++;var Ft=Ud(Pt);if(Ft.position=_,Ft.line=pt,o(Ft))return nt;nt.push(Ft)}}while(_=c(_));return nt},Sf=function(e){return function(r){return yM(e,r)}},Gl=function(e){return function(r){return wM(e,r)}},F1=Mi,Wx=cp,nh=function(e,r){return Math.abs(e.left-r)},H1=function(e,r){return Math.abs(e.right-r)},qx=function(e,r){return e>=r.left&&e<=r.right},CM=function(e,r){return e>=r.top&&e<=r.bottom},SM=function(e){return Yo(e,"node")},Hg=function(e,r,o){return o===void 0&&(o=nn),Fo(e,function(u,l){if(qx(r,l))return o(l)?l:u;if(qx(r,u))return o(u)?u:l;var c=Math.min(nh(u,r),H1(u,r)),m=Math.min(nh(l,r),H1(l,r));return m===c&&SM(l)&&F1(l.node)||m<c?l:u})},Kx=function(e,r,o,u,l){var c=Wx(u,e,wu,r,!l);do if(!c||o(c))return;while(c=Wx(c,e,wu,r))},z1=function(e,r,o){o===void 0&&(o=!0);var u=[],l=function(c,m){var S=tn(Ux([m]),function(_){return!c(_,r)});return u=u.concat(S),S.length===0};return u.push(r),Kx(vv.Up,e,Mt(l,ap),r.node,o),Kx(vv.Down,e,Mt(l,op),r.node,o),u},$1=function(e){return tn(br(e.getElementsByTagName("*")),Vv)},Gx=function(e,r){return{node:e.node,before:nh(e,r)<H1(e,r)}},wF=function(e,r,o){var u=Ux($1(e)),l=tn(u,Mt(CM,o)),c=function(_){return!au(_.node)&&!nl(_.node)},m=Hg(l,r,c);if(m){var S=c(m);if(m=Hg(z1(e,m,S),r,c),m&&Vv(m.node))return Gx(m,r)}return null},wd=function(e,r){e.selection.setRng(r),rg(e,e.selection.getRng())},Xx=function(e,r,o){return dt.some(_1(e,r,o))},xM=function(e,r,o,u,l,c){var m=r===ns.Forwards,S=Yi(e.getBody()),_=Mt(rC,m?S.next:S.prev),nt=m?u:l;if(!o.collapsed){var pt=Fb(o);if(c(pt))return bd(r,e,pt,r===ns.Backwards,!1)}var bt=vp(r,e.getBody(),o);if(nt(bt))return Jp(e,bt.getNode(!m));var Ct=ql(m,_(bt)),Pt=Lf(o);if(!Ct)return Pt?dt.some(o):dt.none();if(nt(Ct))return bd(r,e,Ct.getNode(!m),m,!1);var Ft=_(Ct);return Ft&&nt(Ft)&&Zb(Ct,Ft)?bd(r,e,Ft.getNode(!m),m,!1):Pt?Xx(e,Ct.toRange(),!1):dt.none()},Yx=function(e,r,o,u,l,c){var m=vp(r,e.getBody(),o),S=ji(m.getClientRects()),_=r===vv.Down;if(!S)return dt.none();var nt=_?bF:jx,pt=nt(e.getBody(),Sf(1),m),bt=tn(pt,Gl(1)),Ct=S.left,Pt=Hg(bt,Ct);if(Pt&&c(Pt.node)){var Ft=Math.abs(Ct-Pt.left),zt=Math.abs(Ct-Pt.right);return bd(r,e,Pt.node,Ft<zt,!1)}var Vt;if(u(m)?Vt=m.getNode():l(m)?Vt=m.getNode(!0):Vt=Fb(o),Vt){var rn=yF(r,e.getBody(),Sf(1),Vt),Qt=Hg(tn(rn,Gl(1)),Ct);if(Qt||(Qt=ji(tn(rn,Gl(0))),Qt))return Xx(e,Qt.position.toRange(),!1)}return bt.length===0?Qx(e,_).filter(_?l:u).map(function(On){return _1(e,On.toRange(),!1)}):dt.none()},Qx=function(e,r){var o=e.selection.getRng(),u=e.getBody();if(r){var l=Jn.fromRangeEnd(o),c=Fg(u,l);return Pr(c.positions)}else{var l=Jn.fromRangeStart(o),c=Ig(u,l);return dr(c.positions)}},EM=function(e,r,o){return Qx(e,r).filter(o).exists(function(u){return e.selection.setRng(u.toRange()),!0})},rh=function(e,r){var o=e.dom.createRng();o.setStart(r.container(),r.offset()),o.setEnd(r.container(),r.offset()),e.selection.setRng(o)},kM=function(e,r){e?r.setAttribute("data-mce-selected","inline-boundary"):r.removeAttribute("data-mce-selected")},AM=function(e,r,o){return yd(r,o).map(function(u){return rh(e,u),o})},CF=function(e,r,o){var u=e.getBody(),l=Jn.fromRangeStart(e.selection.getRng()),c=Mt(uv,e),m=Cf(o,c,u,l);return m.bind(function(S){return AM(e,r,S)})},SF=function(e,r,o){var u=er(ts(lt.fromDom(r.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(m){return m.dom}),l=tn(u,e),c=tn(o,e);Fn(sr(l,c),Mt(kM,!1)),Fn(sr(c,l),Mt(kM,!0))},xF=function(e,r){if(e.selection.isCollapsed()&&e.composing!==!0&&r.get()){var o=Jn.fromRangeStart(e.selection.getRng());Jn.isTextPosition(o)&&VI(o)===!1&&(rh(e,Mk(r.get(),o)),r.set(null))}},EF=function(e,r,o,u){if(r.selection.isCollapsed()){var l=tn(u,e);Fn(l,function(c){var m=Jn.fromRangeStart(r.selection.getRng());wf(e,r.getBody(),m).bind(function(S){return AM(r,o,S)})})}},TM=function(e,r,o){return jh(e)?CF(e,r,o).isSome():!1},zg=function(e,r,o){return jh(r)?dv(e,r):!1},V1=function(e){var r=zs(null),o=Mt(uv,e);return e.on("NodeChange",function(u){jh(e)&&!(Ra.browser.isIE()&&u.initial)&&(SF(o,e.dom,u.parents),xF(e,r),EF(o,e,r,u.parents))}),r},Jx=Mt(zg,!0),kF=Mt(zg,!1),U1=function(e,r,o){if(jh(e)){var u=Qx(e,r).getOrThunk(function(){var l=e.selection.getRng();return r?Jn.fromRangeEnd(l):Jn.fromRangeStart(l)});return wf(Mt(uv,e),e.getBody(),u).exists(function(l){var c=Pg(l);return yd(o,c).exists(function(m){return rh(e,m),!0})})}else return!1},AF=function(e,r){var o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(r.container(),r.offset()),o},TF=function(e){return As(js(e),ff(e),function(r,o){var u=ql(!0,r),l=ql(!1,o);return lf(e,u).forall(function(c){return c.isEqual(l)})}).getOr(!0)},Zx=function(e,r){return function(o){return yd(r,o).exists(function(u){return rh(e,u),!0})}},_M=function(e,r,o,u){var l=e.getBody(),c=Mt(uv,e);e.undoManager.ignore(function(){e.selection.setRng(AF(o,u)),e.execCommand("Delete"),wf(c,l,Jn.fromRangeStart(e.selection.getRng())).map(R1).map(Zx(e,r))}),e.nodeChanged()},_F=function(e,r){var o=uf(r,e);return o||e},eE=function(e,r,o,u){var l=_F(e.getBody(),u.container()),c=Mt(uv,e),m=wf(c,l,u);return m.bind(function(S){return o?S.fold(Et(dt.some(R1(S))),dt.none,Et(dt.some(Pg(S))),dt.none):S.fold(dt.none,Et(dt.some(Pg(S))),dt.none,Et(dt.some(R1(S))))}).map(Zx(e,r)).getOrThunk(function(){var S=$f(o,l,u),_=S.bind(function(nt){return wf(c,l,nt)});return As(m,_,function(){return gd(c,l,u).exists(function(nt){return TF(nt)?(tm(e,o,lt.fromDom(nt)),!0):!1})}).orThunk(function(){return _.bind(function(nt){return S.map(function(pt){return o?_M(e,r,u,pt):_M(e,r,pt,u),!0})})}).getOr(!1)})},j1=function(e,r,o){if(e.selection.isCollapsed()&&jh(e)){var u=Jn.fromRangeStart(e.selection.getRng());return eE(e,r,o,u)}return!1},OF=function(e,r){var o=Da(r,e);return pa(o,rc).fold(Et(o),function(u){return o.slice(0,u)})},MF=function(e){return Bt(e)===1},DF=function(e,r,o,u){var l=Mt(XT,r),c=er(tn(u,l),function(S){return S.dom});if(c.length===0)tm(r,e,o);else{var m=gB(o.dom,c);r.selection.setRng(m.toRange())}},NF=function(e,r){var o=lt.fromDom(e.getBody()),u=lt.fromDom(e.selection.getStart()),l=tn(OF(o,u),MF);return Pr(l).exists(function(c){var m=Jn.fromRangeStart(e.selection.getRng());return UI(r,m,c.dom)&&!YT(c)?(DF(r,e,c,l),!0):!1})},W1=function(e,r){return e.selection.isCollapsed()?NF(e,r):!1},tE=function(e,r,o){return e._selectionOverrides.hideFakeCaret(),tm(e,r,lt.fromDom(o)),!0},q1=function(e,r){var o=r?Ap:Tp,u=r?ns.Forwards:ns.Backwards,l=vp(u,e.getBody(),e.selection.getRng());return o(l)?tE(e,r,l.getNode(!r)):dt.from(ql(r,l)).filter(function(c){return o(c)&&Zb(l,c)}).exists(function(c){return tE(e,r,c.getNode(!r))})},K1=function(e,r){var o=e.selection.getNode();return nl(o)?tE(e,r,o):!1},G1=function(e,r){return e.selection.isCollapsed()?q1(e,r):K1(e,r)},LF=function(e){return ib(e,function(r){return Ec(r.dom)||Mi(r.dom)}).exists(function(r){return Ec(r.dom)})},ah=function(e){var r=parseInt(e,10);return isNaN(r)?0:r},OM=function(e,r){var o=e||tL(r)?"margin":"padding",u=_o(r,"direction")==="rtl"?"-right":"-left";return o+u},RF=function(e,r,o,u,l,c){var m=OM(o,lt.fromDom(c));if(r==="outdent"){var S=Math.max(0,ah(c.style[m])-u);e.setStyle(c,m,S?S+l:"")}else{var S=ah(c.style[m])+u+l;e.setStyle(c,m,S)}},BF=function(e,r){return oo(r,function(o){var u=OM(hk(e),o),l=Ts(o,u).map(ah).getOr(0),c=e.dom.getContentEditable(o.dom);return c!=="false"&&l>0})},MM=function(e){var r=NM(e);return!e.mode.isReadOnly()&&(r.length>1||BF(e,r))},DM=function(e){return sb(e)||Is(e)},PF=function(e){return Hi(e).exists(DM)},NM=function(e){return tn(ms(e.selection.getSelectedBlocks()),function(r){return!DM(r)&&!PF(r)&&LF(r)})},LM=function(e,r){var o=e.dom,u=e.selection,l=e.formatter,c=c3(e),m=/[a-z%]+$/i.exec(c)[0],S=parseInt(c,10),_=hk(e),nt=ps(e);!e.queryCommandState("InsertUnorderedList")&&!e.queryCommandState("InsertOrderedList")&&nt===""&&!o.getParent(u.getNode(),o.isBlock)&&l.apply("div"),Fn(NM(e),function(pt){RF(o,r,_,S,m,pt.dom)})},RM=function(e,r){if(e.selection.isCollapsed()&&MM(e)){var o=e.dom,u=e.selection.getRng(),l=Jn.fromRangeStart(u),c=o.getParent(u.startContainer,o.isBlock);if(c!==null&&D0(lt.fromDom(c),l))return LM(e,"outdent"),!0}return!1},BM=function(e,r){e.getDoc().execCommand(r,!1,null)},IF=function(e,r){if(!RM(e)){if(M1(e,!1))return;if(O1(e,!1))return;if(j1(e,r,!1))return;if(A1(e,!1))return;if(rm(e))return;if(D1(e,!1))return;if(G1(e,!1))return;if(T1(e))return;if(W1(e,!1))return;BM(e,"Delete"),HO(e)}},FF=function(e,r){if(!M1(e,!0)){if(O1(e,!0))return;if(j1(e,r,!0))return;if(A1(e,!0))return;if(rm(e))return;if(D1(e,!0))return;if(G1(e,!0))return;if(T1(e))return;if(W1(e,!0))return;BM(e,"ForwardDelete")}},Bc=function(e,r){e.addCommand("delete",function(){IF(e,r)}),e.addCommand("forwardDelete",function(){FF(e,r)})},X1=5,PM=400,nE=function(e){return e.touches===void 0||e.touches.length!==1?dt.none():dt.some(e.touches[0])},HF=function(e,r){var o=Math.abs(e.clientX-r.x),u=Math.abs(e.clientY-r.y);return o>X1||u>X1},IM=function(e){var r=Hv(),o=zs(!1),u=qu(function(l){e.fire("longpress",Ca(Ca({},l),{type:"longpress"})),o.set(!0)},PM);e.on("touchstart",function(l){nE(l).each(function(c){u.cancel();var m={x:c.clientX,y:c.clientY,target:l.target};u.throttle(l),o.set(!1),r.set(m)})},!0),e.on("touchmove",function(l){u.cancel(),nE(l).each(function(c){r.on(function(m){HF(c,m)&&(r.clear(),o.set(!1),e.fire("longpresscancel"))})})},!0),e.on("touchend touchcancel",function(l){u.cancel(),l.type!=="touchcancel"&&r.get().filter(function(c){return c.target.isEqualNode(l.target)}).each(function(){o.get()?l.preventDefault():e.fire("tap",Ca(Ca({},l),{type:"tap"}))})},!0)},rE=function(e,r){return Ka(e,r.nodeName)},FM=function(e,r){return ia(r)?!0:ma(r)?!rE(e,r)&&!Sl(r):!1},zF=function(e,r,o){return hn(uT(lt.fromDom(o),lt.fromDom(r)),function(u){return rE(e,u.dom)})},$F=function(e,r){if(ia(r)){if(r.nodeValue.length===0)return!0;if(/^\s+$/.test(r.nodeValue)&&(!r.nextSibling||rE(e,r.nextSibling)))return!0}return!1},VF=function(e){var r=e.dom,o=e.selection,u=e.schema,l=u.getBlockElements(),c=o.getStart(),m=e.getBody(),S,_,nt,pt=ps(e);if(!(!c||!ma(c)||!pt)){var bt=m.nodeName.toLowerCase();if(!(!u.isValidChild(bt,pt.toLowerCase())||zF(l,m,c))){var Ct=o.getRng(),Pt=Ct.startContainer,Ft=Ct.startOffset,zt=Ct.endContainer,Vt=Ct.endOffset,rn=qf(e);for(c=m.firstChild;c;)if(FM(l,c)){if($F(l,c)){_=c,c=c.nextSibling,r.remove(_);continue}S||(S=r.create(pt,zh(e)),c.parentNode.insertBefore(S,c),nt=!0),_=c,c=c.nextSibling,S.appendChild(_)}else S=null,c=c.nextSibling;nt&&rn&&(Ct.setStart(Pt,Ft),Ct.setEnd(zt,Vt),o.setRng(Ct),e.nodeChanged())}}},oh=function(e){ps(e)&&e.on("NodeChange",Mt(VF,e))},HM=function(e){return Bm(lt.fromDom(e.getBody()),"*[data-mce-caret]").map(function(r){return r.dom}).getOrNull()},zM=function(e){e.selection.setRng(e.selection.getRng())},aE=function(e,r){r.hasAttribute("data-mce-caret")&&(jy(r),zM(e),e.selection.scrollIntoView(r))},oE=function(e,r){var o=HM(e);if(o){if(r.type==="compositionstart"){r.preventDefault(),r.stopPropagation(),aE(e,o);return}kh(o)&&(aE(e,o),e.undoManager.add())}},UF=function(e){e.on("keyup compositionstart",Mt(oE,e))},$M=Mi,jF=function(e,r,o){return xM(r,e,o,Jd,Zd,$M)},WF=function(e,r,o){var u=function(c){return Jd(c)||oT(c)},l=function(c){return Zd(c)||iT(c)};return Yx(r,e,o,u,l,$M)},qF=function(e){var r=e.dom.create(ps(e));return(!Ra.ie||Ra.ie>=11)&&(r.innerHTML='<br data-mce-bogus="1">'),r},VM=function(e,r,o){var u=Yi(e.getBody()),l=Mt(rC,r===1?u.next:u.prev);if(o.collapsed&&S3(e)){var c=e.dom.getParent(o.startContainer,"PRE");if(!c)return;var m=l(Jn.fromRangeStart(o));if(!m){var S=qF(e);r===1?e.$(c).after(S):e.$(c).before(S),e.selection.select(S,!0),e.selection.collapse()}}},xf=function(e,r){var o=r?ns.Forwards:ns.Backwards,u=e.selection.getRng();return jF(o,e,u).orThunk(function(){return VM(e,o,u),dt.none()})},KF=function(e,r){var o=r?1:-1,u=e.selection.getRng();return WF(o,e,u).orThunk(function(){return VM(e,o,u),dt.none()})},UM=function(e,r){return xf(e,r).exists(function(o){return wd(e,o),!0})},jM=function(e,r){return KF(e,r).exists(function(o){return wd(e,o),!0})},WM=function(e,r){var o=r?Zd:Jd;return EM(e,r,o)},GF=function(e){return cn(["figcaption"],Jo(e))},qM=function(e){var r=document.createRange();return r.setStartBefore(e.dom),r.setEndBefore(e.dom),r},KM=function(e,r,o){o?xa(e,r):$r(e,r)},mv=function(e,r){var o=lt.fromTag("br");return KM(e,o,r),qM(o)},XF=function(e,r,o,u){var l=lt.fromTag(o),c=lt.fromTag("br");return gt(l,u),xa(l,c),KM(e,l,r),qM(c)},YF=function(e,r,o,u){return r===""?mv(e,u):XF(e,u,r,o)},GM=function(e,r){var o=Mt(Wa,r);return ib(lt.fromDom(e.container()),rc,o).filter(GF)},iE=function(e,r,o){return r?$x(e.dom,o):hF(e.dom,o)},QF=function(e,r){var o=lt.fromDom(e.getBody()),u=Jn.fromRangeStart(e.selection.getRng()),l=ps(e),c=zh(e);return GM(u,o).exists(function(){if(iE(o,r,u)){var m=YF(o,l,c,r);return e.selection.setRng(m),!0}else return!1})},XM=function(e,r){return e.selection.isCollapsed()?QF(e,r):!1},JF=function(e){return er(e,function(r){return Ca({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:it},r)})},vm=function(e,r){return r.keyCode===e.keyCode&&r.shiftKey===e.shiftKey&&r.altKey===e.altKey&&r.ctrlKey===e.ctrlKey&&r.metaKey===e.metaKey},ZF=function(e,r){return fo(JF(e),function(o){return vm(o,r)?[o]:[]})},No=function(e){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){return e.apply(null,r)}},ih=function(e,r){return oa(ZF(e,r),function(o){return o.action()})},YM=function(e,r){var o=r?ns.Forwards:ns.Backwards,u=e.selection.getRng();return xM(e,o,u,Ap,Tp,nl).exists(function(l){return wd(e,l),!0})},Y1=function(e,r){var o=r?1:-1,u=e.selection.getRng();return Yx(e,o,u,Ap,Tp,nl).exists(function(l){return wd(e,l),!0})},Q1=function(e,r){var o=r?Tp:Ap;return EM(e,r,o)},QM=function(e,r){return{left:e.left-r,top:e.top-r,right:e.right+r*2,bottom:e.bottom+r*2,width:e.width+r,height:e.height+r}},JM=function(e,r){return fo(r,function(o){var u=QM(Ud(o.getBoundingClientRect()),-1);return[{x:u.left,y:e(u),cell:o},{x:u.right,y:e(u),cell:o}]})},ZM=function(e,r,o){return Rr(e,function(u,l){return u.fold(function(){return dt.some(l)},function(c){var m=Math.sqrt(Math.abs(c.x-r)+Math.abs(c.y-o)),S=Math.sqrt(Math.abs(l.x-r)+Math.abs(l.y-o));return dt.some(S<m?l:c)})},dt.none())},eD=function(e,r,o,u,l){var c=ts(lt.fromDom(o),"td,th,caption").map(function(S){return S.dom}),m=tn(JM(e,c),function(S){return r(S,l)});return ZM(m,u,l).map(function(S){return S.cell})},$g=function(e){return e.bottom},e5=function(e){return e.top},t5=function(e,r){return e.y<r},n5=function(e,r){return e.y>r},uh=Mt(eD,$g,t5),r5=Mt(eD,e5,n5),Cd=function(e,r){return dr(r.getClientRects()).bind(function(o){return uh(e,o.left,o.top)}).bind(function(o){return hM(gM(o),r)})},a5=function(e,r){return Pr(r.getClientRects()).bind(function(o){return r5(e,o.left,o.top)}).bind(function(o){return hM(Vx(o),r)})},uE=function(e,r,o){return o.breakAt.exists(function(u){return e(r,u).breakAt.isSome()})},sE=function(e){return e.breakType===Gu.Wrap&&e.positions.length===0},o5=function(e){return e.breakType===Gu.Br&&e.positions.length===1},tD=function(e,r,o){var u=e(r,o);return sE(u)||!ui(o.getNode())&&o5(u)?!uE(e,r,u):u.breakAt.isNone()},i5=Mt(tD,Ig),nD=Mt(tD,Fg),u5=function(e,r,o){var u=Jn.fromRangeStart(r);return Gd(!e,o).exists(function(l){return l.isEqual(u)})},s5=function(e,r,o,u){var l=e.selection.getRng(),c=r?1:-1;return Nk()&&u5(r,l,o)?(bd(c,e,o,!r,!1).each(function(m){wd(e,m)}),!0):!1},l5=function(e,r,o){return Cd(r,o).orThunk(function(){return dr(o.getClientRects()).bind(function(u){return zx(mF(e,Jn.before(r)),u.left)})}).getOr(Jn.before(r))},c5=function(e,r,o){return a5(r,o).orThunk(function(){return dr(o.getClientRects()).bind(function(u){return zx(pF(e,Jn.after(r)),u.left)})}).getOr(Jn.after(r))},lE=function(e,r){var o=r.getNode(e);return ma(o)&&o.nodeName==="TABLE"?dt.some(o):dt.none()},f5=function(e,r,o,u){var l=ps(r);l?r.undoManager.transact(function(){var c=lt.fromTag(l);gt(c,zh(r)),xa(c,lt.fromTag("br")),e?la(lt.fromDom(o),c):sa(lt.fromDom(o),c);var m=r.dom.createRng();m.setStart(c.dom,0),m.setEnd(c.dom,0),wd(r,m)}):wd(r,u.toRange())},pv=function(e,r,o){var u=lE(!!r,o),l=r===!1;u.fold(function(){return wd(e,o.toRange())},function(c){return Gd(l,e.getBody()).filter(function(m){return m.isEqual(o)}).fold(function(){return wd(e,o.toRange())},function(m){return f5(r,e,c,o)})})},d5=function(e,r,o,u){var l=e.selection.getRng(),c=Jn.fromRangeStart(l),m=e.getBody();if(!r&&i5(u,c)){var S=l5(m,o,c);return pv(e,r,S),!0}else if(r&&nD(u,c)){var S=c5(m,o,c);return pv(e,r,S),!0}else return!1},sh=function(e,r,o){return dt.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(u){return dt.from(e.dom.getParent(u,"table")).map(function(l){return o(e,r,l,u)})}).getOr(!1)},cE=function(e,r){return sh(e,r,s5)},J1=function(e,r){return sh(e,r,d5)},fE=function(e,r,o){var u=Ea().os;ih([{keyCode:qa.RIGHT,action:No(UM,e,!0)},{keyCode:qa.LEFT,action:No(UM,e,!1)},{keyCode:qa.UP,action:No(jM,e,!1)},{keyCode:qa.DOWN,action:No(jM,e,!0)},{keyCode:qa.RIGHT,action:No(cE,e,!0)},{keyCode:qa.LEFT,action:No(cE,e,!1)},{keyCode:qa.UP,action:No(J1,e,!1)},{keyCode:qa.DOWN,action:No(J1,e,!0)},{keyCode:qa.RIGHT,action:No(YM,e,!0)},{keyCode:qa.LEFT,action:No(YM,e,!1)},{keyCode:qa.UP,action:No(Y1,e,!1)},{keyCode:qa.DOWN,action:No(Y1,e,!0)},{keyCode:qa.RIGHT,action:No(TM,e,r,!0)},{keyCode:qa.LEFT,action:No(TM,e,r,!1)},{keyCode:qa.RIGHT,ctrlKey:!u.isOSX(),altKey:u.isOSX(),action:No(Jx,e,r)},{keyCode:qa.LEFT,ctrlKey:!u.isOSX(),altKey:u.isOSX(),action:No(kF,e,r)},{keyCode:qa.UP,action:No(XM,e,!1)},{keyCode:qa.DOWN,action:No(XM,e,!0)}],o).each(function(l){o.preventDefault()})},v5=function(e,r){e.on("keydown",function(o){o.isDefaultPrevented()===!1&&fE(e,r,o)})},m5=function(e,r,o){ih([{keyCode:qa.BACKSPACE,action:No(RM,e,!1)},{keyCode:qa.BACKSPACE,action:No(M1,e,!1)},{keyCode:qa.DELETE,action:No(M1,e,!0)},{keyCode:qa.BACKSPACE,action:No(O1,e,!1)},{keyCode:qa.DELETE,action:No(O1,e,!0)},{keyCode:qa.BACKSPACE,action:No(j1,e,r,!1)},{keyCode:qa.DELETE,action:No(j1,e,r,!0)},{keyCode:qa.BACKSPACE,action:No(rm,e,!1)},{keyCode:qa.DELETE,action:No(rm,e,!0)},{keyCode:qa.BACKSPACE,action:No(D1,e,!1)},{keyCode:qa.DELETE,action:No(D1,e,!0)},{keyCode:qa.BACKSPACE,action:No(G1,e,!1)},{keyCode:qa.DELETE,action:No(G1,e,!0)},{keyCode:qa.BACKSPACE,action:No(T1,e,!1)},{keyCode:qa.DELETE,action:No(T1,e,!0)},{keyCode:qa.BACKSPACE,action:No(A1,e,!1)},{keyCode:qa.DELETE,action:No(A1,e,!0)},{keyCode:qa.BACKSPACE,action:No(W1,e,!1)},{keyCode:qa.DELETE,action:No(W1,e,!0)}],o).each(function(u){o.preventDefault()})},p5=function(e,r){ih([{keyCode:qa.BACKSPACE,action:No(aM,e)},{keyCode:qa.DELETE,action:No(aM,e)}],r)},dE=function(e,r){e.on("keydown",function(o){o.isDefaultPrevented()===!1&&m5(e,r,o)}),e.on("keyup",function(o){o.isDefaultPrevented()===!1&&p5(e,o)})},h5=function(e){for(;e;){if(e.nodeType===1||e.nodeType===3&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},Vg=function(e,r){var o,u=r,l=e.dom,c=e.schema.getMoveCaretBeforeOnEnterElements();if(r){if(/^(LI|DT|DD)$/.test(r.nodeName)){var m=h5(r.firstChild);m&&/^(UL|OL|DL)$/.test(m.nodeName)&&r.insertBefore(l.doc.createTextNode(hl),r.firstChild)}var S=l.createRng();if(r.normalize(),r.hasChildNodes()){for(var _=new vi(r,r);o=_.current();){if(ia(o)){S.setStart(o,0),S.setEnd(o,0);break}if(c[o.nodeName.toLowerCase()]){S.setStartBefore(o),S.setEndBefore(o);break}u=o,o=_.next()}o||(S.setStart(u,0),S.setEnd(u,0))}else ui(r)?r.nextSibling&&l.isBlock(r.nextSibling)?(S.setStartBefore(r),S.setEndBefore(r)):(S.setStartAfter(r),S.setEndAfter(r)):(S.setStart(r,0),S.setEnd(r,0));e.selection.setRng(S),rg(e,S)}},g5=function(e,r){var o=e.getRoot(),u,l;for(u=r;u!==o&&e.getContentEditable(u)!=="false";)e.getContentEditable(u)==="true"&&(l=u),u=u.parentNode;return u!==o?l:o},vE=function(e){return dt.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},rD=function(e){return vE(e).fold(Et(""),function(r){return r.nodeName.toUpperCase()})},b5=function(e){return vE(e).filter(function(r){return Is(lt.fromDom(r))}).isSome()},y5=function(e,r){return e.firstChild&&e.firstChild.nodeName===r},w5=function(e){var r;return((r=e.parentNode)===null||r===void 0?void 0:r.firstChild)===e},aD=function(e,r){return e&&e.parentNode&&e.parentNode.nodeName===r},oD=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},C5=function(e){return oD(e)&&oD(e.parentNode)},Z1=function(e){var r=e.parentNode;return/^(LI|DT|DD)$/.test(r.nodeName)?r:e},ey=function(e,r,o){for(var u=e[o?"firstChild":"lastChild"];u&&!ma(u);)u=u[o?"nextSibling":"previousSibling"];return u===r},iD=function(e,r,o,u,l){var c=e.dom,m=e.selection.getRng();if(o!==e.getBody()){C5(o)&&(l="LI");var S=l?r(l):c.create("BR");if(ey(o,u,!0)&&ey(o,u,!1))if(aD(o,"LI")){var _=Z1(o);c.insertAfter(S,_),w5(o)?c.remove(_):c.remove(o)}else c.replace(S,o);else if(ey(o,u,!0))aD(o,"LI")?(c.insertAfter(S,Z1(o)),S.appendChild(c.doc.createTextNode(" ")),S.appendChild(o)):o.parentNode.insertBefore(S,o),c.remove(u);else if(ey(o,u,!1))c.insertAfter(S,Z1(o)),c.remove(u);else{o=Z1(o);var nt=m.cloneRange();nt.setStartAfter(u),nt.setEndAfter(o);var pt=nt.extractContents();l==="LI"&&y5(pt,"LI")?(S=pt.firstChild,c.insertAfter(pt,o)):(c.insertAfter(pt,o),c.insertAfter(S,o)),c.remove(u)}Vg(e,S)}},S5=function(e){Fn(Tw(lt.fromDom(e),qi),function(r){var o=r.dom;o.nodeValue=bl(o.nodeValue)})},uD=function(e,r){return r&&r.nodeName==="A"&&e.isEmpty(r)},x5=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},mE=function(e){e.innerHTML='<br data-mce-bogus="1">'},pE=function(e,r){return e.nodeName===r||e.previousSibling&&e.previousSibling.nodeName===r},sD=function(e,r){return r&&e.isBlock(r)&&!/^(TD|TH|CAPTION|FORM)$/.test(r.nodeName)&&!/^(fixed|absolute)/i.test(r.style.position)&&e.getContentEditable(r)!=="true"},E5=function(e,r,o){var u=o,l=[],c;if(u){for(;u=u.firstChild;){if(e.isBlock(u))return;ma(u)&&!r[u.nodeName.toLowerCase()]&&l.push(u)}for(c=l.length;c--;)u=l[c],(!u.hasChildNodes()||u.firstChild===u.lastChild&&u.firstChild.nodeValue===""||uD(e,u))&&e.remove(u)}},hE=function(e,r,o){return ia(r)===!1?o:e?o===1&&r.data.charAt(o-1)===En?0:o:o===r.data.length-1&&r.data.charAt(o)===En?r.data.length:o},k5=function(e){var r=e.cloneRange();return r.setStart(e.startContainer,hE(!0,e.startContainer,e.startOffset)),r.setEnd(e.endContainer,hE(!1,e.endContainer,e.endOffset)),r},A5=function(e){do ia(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)},lD=function(e,r){var o=e.getRoot(),u,l;for(u=r;u!==o&&e.getContentEditable(u)!=="false";)e.getContentEditable(u)==="true"&&(l=u),u=u.parentNode;return u!==o?l:o},T5=function(e,r,o){var u=e.dom;dt.from(o.style).map(u.parseStyle).each(function(_){var nt=ob(lt.fromDom(r)),pt=Ca(Ca({},nt),_);u.setStyles(r,pt)});var l=dt.from(o.class).map(function(_){return _.split(/\s+/)}),c=dt.from(r.className).map(function(_){return tn(_.split(/\s+/),function(nt){return nt!==""})});As(l,c,function(_,nt){var pt=tn(nt,function(Ct){return!cn(_,Ct)}),bt=Fi(Fi([],_,!0),pt,!0);u.setAttrib(r,"class",bt.join(" "))});var m=["style","class"],S=aa(o,function(_,nt){return!cn(m,nt)});u.setAttribs(r,S)},Ug=function(e,r){var o=ps(e);if(o&&o.toLowerCase()===r.tagName.toLowerCase()){var u=zh(e);T5(e,r,u)}},_5=function(e,r,o,u,l){var c,m,S,_,nt,pt,bt=r||"P",Ct=e.dom,Pt=lD(Ct,u);if(m=Ct.getParent(u,Ct.isBlock),!m||!sD(Ct,m)){if(m=m||Pt,m===e.getBody()||x5(m)?pt=m.nodeName.toLowerCase():pt=m.parentNode.nodeName.toLowerCase(),!m.hasChildNodes())return c=Ct.create(bt),Ug(e,c),m.appendChild(c),o.setStart(c,0),o.setEnd(c,0),c;for(_=u;_.parentNode!==m;)_=_.parentNode;for(;_&&!Ct.isBlock(_);)S=_,_=_.previousSibling;if(S&&e.schema.isValidChild(pt,bt.toLowerCase())){for(c=Ct.create(bt),Ug(e,c),S.parentNode.insertBefore(c,S),_=S;_&&!Ct.isBlock(_);)nt=_.nextSibling,c.appendChild(_),_=nt;o.setStart(u,l),o.setEnd(u,l)}}return u},O5=function(e,r){r.normalize();var o=r.lastChild;(!o||/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(r,"br")},cD=function(e,r){var o,u,l,c,m,S,_,nt,pt,bt,Ct=e.dom,Pt=e.schema,Ft=Pt.getNonEmptyElements(),zt=e.selection.getRng(),Vt=function(lr){var Tr=u,$a,Zr,vr,_a=Pt.getTextInlineElements();if(lr||nt==="TABLE"||nt==="HR"?$a=Ct.create(lr||pt):$a=c.cloneNode(!1),vr=$a,r3(e)===!1)Ct.setAttrib($a,"style",null),Ct.setAttrib($a,"class",null);else do if(_a[Tr.nodeName]){if(Vf(Tr)||Sl(Tr))continue;Zr=Tr.cloneNode(!1),Ct.setAttrib(Zr,"id",""),$a.hasChildNodes()?(Zr.appendChild($a.firstChild),$a.appendChild(Zr)):(vr=Zr,$a.appendChild(Zr))}while((Tr=Tr.parentNode)&&Tr!==mn);return Ug(e,$a),mE(vr),$a},rn=function(lr){var Tr,$a,Zr=hE(lr,u,l);if(ia(u)&&(lr?Zr>0:Zr<u.nodeValue.length))return!1;if(u.parentNode===c&&bt&&!lr||lr&&ma(u)&&u===c.firstChild)return!0;if(pE(u,"TABLE")||pE(u,"HR"))return bt&&!lr||!bt&&lr;var vr=new vi(u,c);for(ia(u)&&(lr&&Zr===0?vr.prev():!lr&&Zr===u.nodeValue.length&&vr.next());Tr=vr.current();){if(ma(Tr)){if(!Tr.getAttribute("data-mce-bogus")&&($a=Tr.nodeName.toLowerCase(),Ft[$a]&&$a!=="br"))return!1}else if(ia(Tr)&&!Xc(Tr.nodeValue))return!1;lr?vr.prev():vr.next()}return!0},Qt=function(){/^(H[1-6]|PRE|FIGURE)$/.test(nt)&&Ln!=="HGROUP"?m=Vt(pt):m=Vt(),a3(e)&&sD(Ct,_)&&Ct.isEmpty(c)?m=Ct.split(_,c):Ct.insertAfter(m,c),Vg(e,m)};h0(Ct,zt).each(function(lr){zt.setStart(lr.startContainer,lr.startOffset),zt.setEnd(lr.endContainer,lr.endOffset)}),u=zt.startContainer,l=zt.startOffset,pt=ps(e);var On=!!(r&&r.shiftKey),kn=!!(r&&r.ctrlKey);ma(u)&&u.hasChildNodes()&&(bt=l>u.childNodes.length-1,u=u.childNodes[Math.min(l,u.childNodes.length-1)]||u,bt&&ia(u)?l=u.nodeValue.length:l=0);var mn=lD(Ct,u);if(mn){(pt&&!On||!pt&&On)&&(u=_5(e,pt,zt,u,l)),c=Ct.getParent(u,Ct.isBlock),_=c?Ct.getParent(c.parentNode,Ct.isBlock):null,nt=c?c.nodeName.toUpperCase():"";var Ln=_?_.nodeName.toUpperCase():"";if(Ln==="LI"&&!kn&&(c=_,_=_.parentNode,nt=Ln),/^(LI|DT|DD)$/.test(nt)&&Ct.isEmpty(c)){iD(e,Vt,_,c,pt);return}pt&&c===e.getBody()||(pt=pt||"P",$i(c)?(m=jy(c),Ct.isEmpty(c)&&mE(c),Ug(e,m),Vg(e,m)):rn()?Qt():rn(!0)?(m=c.parentNode.insertBefore(Vt(),c),Vg(e,pE(c,"HR")?m:c)):(o=k5(zt).cloneRange(),o.setEndAfter(c),S=o.extractContents(),S5(S),A5(S),m=S.firstChild,Ct.insertAfter(S,c),E5(Ct,Ft,m),O5(Ct,c),Ct.isEmpty(c)&&mE(c),m.normalize(),Ct.isEmpty(m)?(Ct.remove(m),Qt()):(Ug(e,m),Vg(e,m))),Ct.setAttrib(m,"id",""),e.fire("NewBlock",{newBlock:m}))}},M5=function(e,r,o){for(var u=new vi(r,o),l,c=e.getNonEmptyElements();l=u.next();)if(c[l.nodeName.toLowerCase()]||l.length>0)return!0},fD=function(e,r,o){var u=e.dom.createRng();o?(u.setStartBefore(r),u.setEndBefore(r)):(u.setStartAfter(r),u.setEndAfter(r)),e.selection.setRng(u),rg(e,u)},dD=function(e,r){var o=e.selection,u=e.dom,l=o.getRng(),c,m;h0(u,l).each(function(Ft){l.setStart(Ft.startContainer,Ft.startOffset),l.setEnd(Ft.endContainer,Ft.endOffset)});var S=l.startOffset,_=l.startContainer;if(_.nodeType===1&&_.hasChildNodes()){var nt=S>_.childNodes.length-1;_=_.childNodes[Math.min(S,_.childNodes.length-1)]||_,nt&&_.nodeType===3?S=_.nodeValue.length:S=0}var pt=u.getParent(_,u.isBlock),bt=pt?u.getParent(pt.parentNode,u.isBlock):null,Ct=bt?bt.nodeName.toUpperCase():"",Pt=!!(r&&r.ctrlKey);Ct==="LI"&&!Pt&&(pt=bt),_&&_.nodeType===3&&S>=_.nodeValue.length&&(M5(e.schema,_,pt)||(c=u.create("br"),l.insertNode(c),l.setStartAfter(c),l.setEndAfter(c),m=!0)),c=u.create("br"),Hb(u,l,c),fD(e,c,m),e.undoManager.add()},vD=function(e,r){var o=lt.fromTag("br");sa(lt.fromDom(r),o),e.undoManager.add()},ty=function(e,r){gE(e.getBody(),r)||la(lt.fromDom(r),lt.fromTag("br"));var o=lt.fromTag("br");la(lt.fromDom(r),o),fD(e,o.dom,!1),e.undoManager.add()},mD=function(e){return ui(e.getNode())},gE=function(e,r){return mD(Jn.after(r))?!0:lf(e,Jn.after(r)).map(function(o){return ui(o.getNode())}).getOr(!1)},ny=function(e){return e&&e.nodeName==="A"&&"href"in e},pD=function(e){return e.fold(vt,ny,ny,vt)},D5=function(e){var r=Mt(uv,e),o=Jn.fromRangeStart(e.selection.getRng());return wf(r,e.getBody(),o).filter(pD)},hD=function(e,r){r.fold(it,Mt(vD,e),Mt(ty,e),it)},mm=function(e,r){var o=D5(e);o.isSome()?o.each(Mt(hD,e)):dD(e,r)},bE=function(e,r){return vE(e).filter(function(o){return r.length>0&&Kr(lt.fromDom(o),r)}).isSome()},yE=function(e){return bE(e,$h(e))},N5=function(e){return bE(e,dk(e))},sl=Ba.generate([{br:[]},{block:[]},{none:[]}]),L5=function(e,r){return N5(e)},wE=function(e){return function(r,o){var u=ps(r)==="";return u===e}},gD=function(e){return function(r,o){return b5(r)===e}},bD=function(e,r){return function(o,u){var l=rD(o)===e.toUpperCase();return l===r}},ry=function(e){return bD("pre",e)},R5=function(){return bD("summary",!0)},jg=function(e){return function(r,o){return n3(r)===e}},lh=function(e,r){return yE(e)},Wg=function(e,r){return r},ay=function(e){var r=ps(e),o=g5(e.dom,e.selection.getStart());return o&&e.schema.isValidChild(o.nodeName,r||"P")},mc=function(e,r){return function(o,u){var l=Rr(e,function(c,m){return c&&m(o,u)},!0);return l?dt.some(r):dt.none()}},yD=function(e,r){return Rg([mc([L5],sl.none()),mc([R5()],sl.br()),mc([ry(!0),jg(!1),Wg],sl.br()),mc([ry(!0),jg(!1)],sl.block()),mc([ry(!0),jg(!0),Wg],sl.block()),mc([ry(!0),jg(!0)],sl.br()),mc([gD(!0),Wg],sl.br()),mc([gD(!0)],sl.block()),mc([wE(!0),Wg,ay],sl.block()),mc([wE(!0)],sl.br()),mc([lh],sl.br()),mc([wE(!1),Wg],sl.br()),mc([ay],sl.block())],[e,!!(r&&r.shiftKey)]).getOr(sl.none())},CE=function(e,r){yD(e,r).fold(function(){mm(e,r)},function(){cD(e,r)},it)},wD=function(e,r){r.isDefaultPrevented()||(r.preventDefault(),oP(e.undoManager),e.undoManager.transact(function(){e.selection.isCollapsed()===!1&&e.execCommand("Delete"),CE(e,r)}))},CD=function(e){e.on("keydown",function(r){r.keyCode===qa.ENTER&&wD(e,r)})},SE=function(e,r,o){ih([{keyCode:qa.END,action:No(WM,e,!0)},{keyCode:qa.HOME,action:No(WM,e,!1)},{keyCode:qa.END,action:No(Q1,e,!0)},{keyCode:qa.HOME,action:No(Q1,e,!1)},{keyCode:qa.END,action:No(U1,e,!0,r)},{keyCode:qa.HOME,action:No(U1,e,!1,r)}],o).each(function(u){o.preventDefault()})},SD=function(e,r){e.on("keydown",function(o){o.isDefaultPrevented()===!1&&SE(e,r,o)})},B5=Ea().browser,P5=function(e){var r=Nb(function(){e.composing||CT(e)},0);B5.isIE()&&(e.on("keypress",function(o){r.throttle()}),e.on("remove",function(o){r.cancel()}))},oy=function(e){P5(e),e.on("input",function(r){r.isComposing===!1&&CT(e)})},I5=Ea(),F5=function(e,r,o){ih([{keyCode:qa.PAGE_UP,action:No(U1,e,!1,r)},{keyCode:qa.PAGE_DOWN,action:No(U1,e,!0,r)}],o)},xD=function(e){return e.stopImmediatePropagation()},xE=function(e){return e.keyCode===qa.PAGE_UP||e.keyCode===qa.PAGE_DOWN},ED=function(e,r,o){o&&!e.get()?r.on("NodeChange",xD,!0):!o&&e.get()&&r.off("NodeChange",xD),e.set(o)},H5=function(e,r){if(!I5.os.isOSX()){var o=zs(!1);e.on("keydown",function(u){xE(u)&&ED(o,e,!0)}),e.on("keyup",function(u){u.isDefaultPrevented()===!1&&F5(e,r,u),xE(u)&&o.get()&&(ED(o,e,!1),e.nodeChanged())})}},Al=function(e,r){var o=r.container(),u=r.offset();return ia(o)?(o.insertData(u,e),dt.some(Jn(o,u+e.length))):Jb(r).map(function(l){var c=lt.fromText(e);return r.isAtEnd()?la(l,c):sa(l,c),Jn(c.dom,e.length)})},z5=Mt(Al,hl),EE=Mt(Al," "),kD=function(e){return function(r){return r.fold(function(o){return cf(e.dom,Jn.before(o))},function(o){return js(o)},function(o){return ff(o)},function(o){return lf(e.dom,Jn.after(o))})}},kE=function(e,r){return function(o){return gT(e,o)?z5(r):EE(r)}},$5=function(e){return function(r){return e.selection.setRng(r.toRange()),e.nodeChanged(),!0}},V5=function(e){var r=Jn.fromRangeStart(e.selection.getRng()),o=lt.fromDom(e.getBody());if(e.selection.isCollapsed()){var u=Mt(uv,e),l=Jn.fromRangeStart(e.selection.getRng());return wf(u,e.getBody(),l).bind(kD(o)).bind(kE(o,r)).exists($5(e))}else return!1},AD=function(e,r){ih([{keyCode:qa.SPACEBAR,action:No(V5,e)}],r).each(function(o){r.preventDefault()})},U5=function(e){e.on("keydown",function(r){r.isDefaultPrevented()===!1&&AD(e,r)})},j5=function(e){var r=V1(e);return UF(e),v5(e,r),dE(e,r),CD(e),U5(e),oy(e),SD(e,r),H5(e,r),r},W5=function(e){return md(e)?zs(null):j5(e)},q5=function(){function e(r){this.lastPath=[],this.editor=r;var o,u=this;"onselectionchange"in r.getDoc()||r.on("NodeChange click mouseup keyup focus",function(l){var c=r.selection.getRng(),m={startContainer:c.startContainer,startOffset:c.startOffset,endContainer:c.endContainer,endOffset:c.endOffset};(l.type==="nodechange"||!LC(m,o))&&r.fire("SelectionChange"),o=m}),r.on("contextmenu",function(){r.fire("SelectionChange")}),r.on("SelectionChange",function(){var l=r.selection.getStart(!0);!l||!Ra.range&&r.selection.isCollapsed()||c0(r)&&!u.isSameElementPath(l)&&r.dom.isChildOf(l,r.getBody())&&r.nodeChanged({selectionChange:!0})}),r.on("mouseup",function(l){!l.isDefaultPrevented()&&c0(r)&&(r.selection.getNode().nodeName==="IMG"?cs.setEditorTimeout(r,function(){r.nodeChanged()}):r.nodeChanged())})}return e.prototype.nodeChanged=function(r){var o=this.editor.selection,u,l,c;this.editor.initialized&&o&&!E3(this.editor)&&!this.editor.mode.isReadOnly()&&(c=this.editor.getBody(),u=o.getStart(!0)||c,(u.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(u,c))&&(u=c),l=[],this.editor.dom.getParent(u,function(m){if(m===c)return!0;l.push(m)}),r=r||{},r.element=u,r.parents=l,this.editor.fire("NodeChange",r))},e.prototype.isSameElementPath=function(r){var o,u=this.editor.$(r).parentsUntil(this.editor.getBody()).add(r);if(u.length===this.lastPath.length){for(o=u.length;o>=0&&u[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=u,!0}return this.lastPath=u,!1},e}(),K5=function(e){e.on("click",function(r){e.dom.getParent(r.target,"details")&&r.preventDefault()})},G5=function(e){e.parser.addNodeFilter("details",function(r){Fn(r,function(o){o.attr("data-mce-open",o.attr("open")),o.attr("open","open")})}),e.serializer.addNodeFilter("details",function(r){Fn(r,function(o){var u=o.attr("data-mce-open");o.attr("open",Ye(u)?u:null),o.attr("data-mce-open",null)})})},X5=function(e){K5(e),G5(e)},TD=function(e){return ma(e)&&id(lt.fromDom(e))},Y5=function(e){var r=e.selection.getRng(),o=Jn.fromRangeStart(r),u=Jn.fromRangeEnd(r);if(Jn.isElementPosition(o)){var l=o.container();TD(l)&&js(l).each(function(c){return r.setStart(c.container(),c.offset())})}if(Jn.isElementPosition(u)){var l=o.container();TD(l)&&ff(l).each(function(m){return r.setEnd(m.container(),m.offset())})}e.selection.setRng(gS(r))},bs=function(e){e.on("click",function(r){r.detail>=3&&Y5(e)})},_D=function(e){var r=e.getBoundingClientRect(),o=e.ownerDocument,u=o.documentElement,l=o.defaultView;return{top:r.top+l.pageYOffset-u.clientTop,left:r.left+l.pageXOffset-u.clientLeft}},Q5=function(e){return e.inline?_D(e.getBody()):{left:0,top:0}},J5=function(e){var r=e.getBody();return e.inline?{left:r.scrollLeft,top:r.scrollTop}:{left:0,top:0}},ll=function(e){var r=e.getBody(),o=e.getDoc().documentElement,u={left:r.scrollLeft,top:r.scrollTop},l={left:r.scrollLeft||o.scrollLeft,top:r.scrollTop||o.scrollTop};return e.inline?u:l},Z5=function(e,r){if(r.target.ownerDocument!==e.getDoc()){var o=_D(e.getContentAreaContainer()),u=ll(e);return{left:r.pageX-o.left+u.left,top:r.pageY-o.top+u.top}}return{left:r.pageX,top:r.pageY}},OD=function(e,r,o){return{pageX:o.left-e.left+r.left,pageY:o.top-e.top+r.top}},eH=function(e,r){return OD(Q5(e),J5(e),Z5(e,r))},Sd=Mi,tH=Ec,nH=function(e,r){return Sd(r)&&r!==e},AE=function(e,r,o){return r===o||e.dom.isChildOf(r,o)?!1:!Sd(r)},rH=function(e){var r=e.cloneNode(!0);return r.removeAttribute("data-mce-selected"),r},aH=function(e,r,o,u){var l=e.dom,c=r.cloneNode(!0);l.setStyles(c,{width:o,height:u}),l.setAttrib(c,"data-mce-selected",null);var m=l.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return l.setStyles(m,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:u}),l.setStyles(c,{margin:0,boxSizing:"border-box"}),m.appendChild(c),m},oH=function(e,r){e.parentNode!==r&&r.appendChild(e)},iH=function(e,r,o,u,l,c){var m=0,S=0;e.style.left=r.pageX+"px",e.style.top=r.pageY+"px",r.pageX+o>l&&(m=r.pageX+o-l),r.pageY+u>c&&(S=r.pageY+u-c),e.style.width=o-m+"px",e.style.height=u-S+"px"},MD=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},uH=function(e){return e.button===0},iy=function(e,r){return{pageX:r.pageX-e.relX,pageY:r.pageY+5}},DD=function(e,r){return function(o){if(uH(o)){var u=oa(r.dom.getParents(o.target),$L(Sd,tH)).getOr(null);if(nH(r.getBody(),u)){var l=r.dom.getPos(u),c=r.getBody(),m=r.getDoc().documentElement;e.set({element:u,dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(r.inline?c.scrollWidth:m.offsetWidth)-2,maxY:(r.inline?c.scrollHeight:m.offsetHeight)-2,relX:o.pageX-l.x,relY:o.pageY-l.y,width:u.offsetWidth,height:u.offsetHeight,ghost:aH(r,u,u.offsetWidth,u.offsetHeight)})}}}},sH=function(e,r){var o=cs.throttle(function(u,l){r._selectionOverrides.hideFakeCaret(),r.selection.placeCaretAt(u,l)},0);return r.on("remove",o.stop),function(u){return e.on(function(l){var c=Math.max(Math.abs(u.screenX-l.screenX),Math.abs(u.screenY-l.screenY));if(!l.dragging&&c>10){var m=r.fire("dragstart",{target:l.element});if(m.isDefaultPrevented())return;l.dragging=!0,r.focus()}if(l.dragging){var S=iy(l,eH(r,u));oH(l.ghost,r.getBody()),iH(l.ghost,S,l.width,l.height,l.maxX,l.maxY),o(u.clientX,u.clientY)}})}},lH=function(e){var r=e.getSel().getRangeAt(0),o=r.startContainer;return o.nodeType===3?o.parentNode:o},cH=function(e,r){return function(o){e.on(function(u){if(u.dragging){if(AE(r,lH(r.selection),u.element)){var l=rH(u.element),c=r.fire("drop",{clientX:o.clientX,clientY:o.clientY});c.isDefaultPrevented()||r.undoManager.transact(function(){MD(u.element),r.insertContent(r.dom.getOuterHTML(l)),r._selectionOverrides.hideFakeCaret()})}r.fire("dragend")}}),ND(e)}},fH=function(e,r){return function(){e.on(function(o){o.dragging&&r.fire("dragend")}),ND(e)}},ND=function(e){e.on(function(r){MD(r.ghost)}),e.clear()},TE=function(e){var r=Hv(),o=Oi.DOM,u=document,l=DD(r,e),c=sH(r,e),m=cH(r,e),S=fH(r,e);e.on("mousedown",l),e.on("mousemove",c),e.on("mouseup",m),o.bind(u,"mousemove",c),o.bind(u,"mouseup",S),e.on("remove",function(){o.unbind(u,"mousemove",c),o.unbind(u,"mouseup",S)}),e.on("keydown",function(_){_.keyCode===qa.ESC&&S()})},LD=function(e){e.on("drop",function(r){var o=typeof r.clientX!="undefined"?e.getDoc().elementFromPoint(r.clientX,r.clientY):null;(Sd(o)||e.dom.getContentEditableParent(o)==="false")&&r.preventDefault()})},RD=function(e){var r=function(l){if(!l.isDefaultPrevented()){var c=l.dataTransfer;c&&(cn(c.types,"Files")||c.files.length>0)&&(l.preventDefault(),l.type==="drop"&&S1(e,"Dropped file type is not supported"))}},o=function(l){E0(e,l.target)&&r(l)},u=function(){var l=Oi.DOM,c=e.dom,m=document,S=e.inline?e.getBody():e.getDoc(),_=["drop","dragover"];Fn(_,function(nt){l.bind(m,nt,o),c.bind(S,nt,r)}),e.on("remove",function(){Fn(_,function(nt){l.unbind(m,nt,o),c.unbind(S,nt,r)})})};e.on("init",function(){cs.setEditorTimeout(e,u,0)})},BD=function(e){TE(e),LD(e),Wh(e)&&RD(e)},dH=function(e){var r=Nb(function(){if(!e.removed&&e.getBody().contains(document.activeElement)){var o=e.selection.getRng();if(o.collapsed){var u=_1(e,o,!1);e.selection.setRng(u)}}},0);e.on("focus",function(){r.throttle()}),e.on("blur",function(){r.cancel()})},vH=function(e){e.on("init",function(){e.on("focusin",function(r){var o=r.target;if(nl(o)){var u=wp(e.getBody(),o),l=Mi(u)?u:o;e.selection.getNode()!==l&&Jp(e,l).each(function(c){return e.selection.setRng(c)})}})})},PD=Ec,pm=Mi,uy=function(e,r){return wp(e.getBody(),r)},mH=function(e){var r=e.selection,o=e.dom,u=o.isBlock,l=e.getBody(),c=Us(e,l,u,function(){return qf(e)}),m="sel-"+o.uniqueId(),S="data-mce-selected",_,nt=function(vr){return o.hasClass(vr,"mce-offscreen-selection")},pt=function(vr){return vr!==l&&(pm(vr)||nl(vr))&&o.isChildOf(vr,l)},bt=function(vr){return Jd(vr)||Zd(vr)||Ap(vr)||Tp(vr)},Ct=function(){var vr=o.get(m);return vr&&vr.getElementsByTagName("*")[0]},Pt=function(vr){vr&&r.setRng(vr)},Ft=r.getRng,zt=function(vr,_a,Or,Jr){Jr===void 0&&(Jr=!0);var Dr=e.fire("ShowCaret",{target:_a,direction:vr,before:Or});return Dr.isDefaultPrevented()?null:(Jr&&r.scrollIntoView(_a,vr===-1),c.show(Or,_a))},Vt=function(vr){vr.hasAttribute("data-mce-caret")&&(jy(vr),Pt(Ft()),r.scrollIntoView(vr))},rn=function(){e.on("mouseup",function(Dr){var Ur=Ft();Ur.collapsed&&bO(e,Dr.clientX,Dr.clientY)&&Dx(e,Ur,!1).each(Pt)}),e.on("click",function(Dr){var Ur=uy(e,Dr.target);Ur&&(pm(Ur)&&(Dr.preventDefault(),e.focus()),PD(Ur)&&o.isChildOf(Ur,r.getNode())&&Tr())}),e.on("blur NewBlock",Tr),e.on("ResizeWindow FullscreenStateChanged",c.reposition);var vr=function(Dr){var Ur=Dr.firstChild;if(et(Ur))return!1;var fa=Jn.before(Ur);if(ui(fa.getNode())&&Dr.childNodes.length===1)return!bt(fa);var Sr=Yi(Dr),ra=Sr.next(fa);return ra&&!bt(ra)},_a=function(Dr,Ur){var fa=o.getParent(Dr,u),Sr=o.getParent(Ur,u);return fa===Sr},Or=function(Dr,Ur){var fa=o.getParent(Dr,u),Sr=o.getParent(Ur,u);return et(fa)?!1:Dr!==Sr&&o.isChildOf(fa,Sr)&&pm(uy(e,fa))===!1?!0:!o.isChildOf(Sr,fa)&&!_a(fa,Sr)&&vr(fa)};e.on("tap",function(Dr){var Ur=Dr.target,fa=uy(e,Ur);pm(fa)?(Dr.preventDefault(),Jp(e,fa).each(lr)):pt(Ur)&&Jp(e,Ur).each(lr)},!0),e.on("mousedown",function(Dr){var Ur=Dr.target;if(!(Ur!==l&&Ur.nodeName!=="HTML"&&!o.isChildOf(Ur,l))&&bO(e,Dr.clientX,Dr.clientY)!==!1){var fa=uy(e,Ur);if(fa)pm(fa)?(Dr.preventDefault(),Jp(e,fa).each(lr)):(Tr(),!(PD(fa)&&Dr.shiftKey)&&!Zh(Dr.clientX,Dr.clientY,r.getRng())&&(Zr(),r.placeCaretAt(Dr.clientX,Dr.clientY)));else if(pt(Ur))Jp(e,Ur).each(lr);else if(Vv(Ur)===!1){Tr(),Zr();var Sr=wF(l,Dr.clientX,Dr.clientY);if(Sr&&!Or(Ur,Sr.node)){Dr.preventDefault();var ra=zt(1,Sr.node,Sr.before,!1);Pt(ra),e.getBody().focus()}}}}),e.on("keypress",function(Dr){qa.modifierPressed(Dr)||pm(r.getNode())&&Dr.preventDefault()}),e.on("GetSelectionRange",function(Dr){var Ur=Dr.range;if(_){if(!_.parentNode){_=null;return}Ur=Ur.cloneRange(),Ur.selectNode(_),Dr.range=Ur}}),e.on("SetSelectionRange",function(Dr){Dr.range=kn(Dr.range);var Ur=lr(Dr.range,Dr.forward);Ur&&(Dr.range=Ur)});var Jr=function(Dr){return Dr.id==="mcepastebin"};e.on("AfterSetSelectionRange",function(Dr){var Ur=Dr.range,fa=Ur.startContainer.parentNode;!On(Ur)&&!Jr(fa)&&Zr(),nt(fa)||Tr()}),e.on("copy",function(Dr){var Ur=Dr.clipboardData;if(!Dr.isDefaultPrevented()&&Dr.clipboardData&&!Ra.ie){var fa=Ct();fa&&(Dr.preventDefault(),Ur.clearData(),Ur.setData("text/html",fa.outerHTML),Ur.setData("text/plain",fa.outerText||fa.innerText))}}),BD(e),dH(e),vH(e)},Qt=function(vr){return oc(vr)||lb(vr)||cb(vr)},On=function(vr){return Qt(vr.startContainer)||Qt(vr.endContainer)},kn=function(vr){var _a=e.schema.getShortEndedElements(),Or=o.createRng(),Jr=vr.startContainer,Dr=vr.startOffset,Ur=vr.endContainer,fa=vr.endOffset;return Ka(_a,Jr.nodeName.toLowerCase())?Dr===0?Or.setStartBefore(Jr):Or.setStartAfter(Jr):Or.setStart(Jr,Dr),Ka(_a,Ur.nodeName.toLowerCase())?fa===0?Or.setEndBefore(Ur):Or.setEndAfter(Ur):Or.setEnd(Ur,fa),Or},mn=function(vr,_a,Or){var Jr=e.$,Dr=Bm(lt.fromDom(e.getBody()),"#"+m).fold(function(){return Jr([])},function(Sr){return Jr([Sr.dom])});Dr.length===0&&(Dr=Jr('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",m),Dr.appendTo(e.getBody()));var Ur=o.createRng();_a===Or&&Ra.ie?(Dr.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(_a),Ur.setStartAfter(Dr[0].firstChild.firstChild),Ur.setEndAfter(_a)):(Dr.empty().append(hl).append(_a).append(hl),Ur.setStart(Dr[0].firstChild,1),Ur.setEnd(Dr[0].lastChild,0)),Dr.css({top:o.getPos(vr,e.getBody()).y}),Dr[0].focus();var fa=r.getSel();return fa.removeAllRanges(),fa.addRange(Ur),Ur},Ln=function(vr){var _a=vr.cloneNode(!0),Or=e.fire("ObjectSelected",{target:vr,targetClone:_a});if(Or.isDefaultPrevented())return null;var Jr=mn(vr,Or.targetClone,_a),Dr=lt.fromDom(vr);return Fn(ts(lt.fromDom(e.getBody()),"*[data-mce-selected]"),function(Ur){Wa(Dr,Ur)||nr(Ur,S)}),o.getAttrib(vr,S)||vr.setAttribute(S,"1"),_=vr,Zr(),Jr},lr=function(vr,_a){if(!vr)return null;if(vr.collapsed){if(!On(vr)){var Or=_a?1:-1,Jr=vp(Or,l,vr),Dr=Jr.getNode(!_a);if(Vv(Dr))return zt(Or,Dr,_a?!Jr.isAtEnd():!1,!1);var Ur=Jr.getNode(_a);if(Vv(Ur))return zt(Or,Ur,_a?!1:!Jr.isAtEnd(),!1)}return null}var fa=vr.startContainer,Sr=vr.startOffset,ra=vr.endOffset;if(fa.nodeType===3&&Sr===0&&pm(fa.parentNode)&&(fa=fa.parentNode,Sr=o.nodeIndex(fa),fa=fa.parentNode),fa.nodeType!==1)return null;if(ra===Sr+1&&fa===vr.endContainer){var xo=fa.childNodes[Sr];if(pt(xo))return Ln(xo)}return null},Tr=function(){_&&_.removeAttribute(S),Bm(lt.fromDom(e.getBody()),"#"+m).each(ca),_=null},$a=function(){c.destroy(),_=null},Zr=function(){c.hide()};return Ra.ceFalse&&!md(e)&&rn(),{showCaret:zt,showBlockCaretContainer:Vt,hideFakeCaret:Zr,destroy:$a}},ID=function(e){var r=Zn.each,o=qa.BACKSPACE,u=qa.DELETE,l=e.dom,c=e.selection,m=e.parser,S=Ra.gecko,_=Ra.ie,nt=Ra.webkit,pt="data:text/mce-internal,",bt=_?"Text":"URL",Ct=function(xr,Fr){try{e.getDoc().execCommand(xr,!1,Fr)}catch(Oa){}},Pt=function(xr){return xr.isDefaultPrevented()},Ft=function(xr){var Fr,Oa;xr.dataTransfer&&(e.selection.isCollapsed()&&xr.target.tagName==="IMG"&&c.select(xr.target),Fr=e.selection.getContent(),Fr.length>0&&(Oa=pt+escape(e.id)+","+escape(Fr),xr.dataTransfer.setData(bt,Oa)))},zt=function(xr){var Fr;return xr.dataTransfer&&(Fr=xr.dataTransfer.getData(bt),Fr&&Fr.indexOf(pt)>=0)?(Fr=Fr.substr(pt.length).split(","),{id:unescape(Fr[0]),html:unescape(Fr[1])}):null},Vt=function(xr,Fr){e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:xr,internal:Fr}):e.execCommand("mceInsertContent",!1,xr)},rn=function(){var xr=function(Oa){var zn=l.create("body"),_r=Oa.cloneContents();return zn.appendChild(_r),c.serializer.serialize(zn,{format:"html"})},Fr=function(Oa){var zn=xr(Oa),_r=l.createRng();_r.selectNode(e.getBody());var kr=xr(_r);return zn===kr};e.on("keydown",function(Oa){var zn=Oa.keyCode,_r,kr;if(!Pt(Oa)&&(zn===u||zn===o)){if(_r=e.selection.isCollapsed(),kr=e.getBody(),_r&&!l.isEmpty(kr)||!_r&&!Fr(e.selection.getRng()))return;Oa.preventDefault(),e.setContent(""),kr.firstChild&&l.isBlock(kr.firstChild)?e.selection.setCursorLocation(kr.firstChild,0):e.selection.setCursorLocation(kr,0),e.nodeChanged()}})},Qt=function(){e.shortcuts.add("meta+a",null,"SelectAll")},On=function(){e.inline||l.bind(e.getDoc(),"mousedown mouseup",function(xr){var Fr;if(xr.target===e.getDoc().documentElement)if(Fr=c.getRng(),e.getBody().focus(),xr.type==="mousedown"){if(oc(Fr.startContainer))return;c.placeCaretAt(xr.clientX,xr.clientY)}else c.setRng(Fr)})},kn=function(){e.on("keydown",function(xr){if(!Pt(xr)&&xr.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&c.getRng().startOffset===0){var Fr=c.getNode(),Oa=Fr.previousSibling;if(Fr.nodeName==="HR"){l.remove(Fr),xr.preventDefault();return}Oa&&Oa.nodeName&&Oa.nodeName.toLowerCase()==="hr"&&(l.remove(Oa),xr.preventDefault())}}})},mn=function(){Range.prototype.getClientRects||e.on("mousedown",function(xr){if(!Pt(xr)&&xr.target.nodeName==="HTML"){var Fr=e.getBody();Fr.blur(),cs.setEditorTimeout(e,function(){Fr.focus()})}})},Ln=function(){e.on("click",function(xr){var Fr=xr.target;/^(IMG|HR)$/.test(Fr.nodeName)&&l.getContentEditableParent(Fr)!=="false"&&(xr.preventDefault(),e.selection.select(Fr),e.nodeChanged()),Fr.nodeName==="A"&&l.hasClass(Fr,"mce-item-anchor")&&(xr.preventDefault(),c.select(Fr))})},lr=function(){var xr=function(){var Oa=l.getAttribs(c.getStart().cloneNode(!1));return function(){var zn=c.getStart();zn!==e.getBody()&&(l.setAttrib(zn,"style",null),r(Oa,function(_r){zn.setAttributeNode(_r.cloneNode(!0))}))}},Fr=function(){return!c.isCollapsed()&&l.getParent(c.getStart(),l.isBlock)!==l.getParent(c.getEnd(),l.isBlock)};e.on("keypress",function(Oa){var zn;if(!Pt(Oa)&&(Oa.keyCode===8||Oa.keyCode===46)&&Fr())return zn=xr(),e.getDoc().execCommand("delete",!1,null),zn(),Oa.preventDefault(),!1}),l.bind(e.getDoc(),"cut",function(Oa){var zn;!Pt(Oa)&&Fr()&&(zn=xr(),cs.setEditorTimeout(e,function(){zn()}))})},Tr=function(){e.on("keydown",function(xr){if(!Pt(xr)&&xr.keyCode===o&&c.isCollapsed()&&c.getRng().startOffset===0){var Fr=c.getNode().previousSibling;if(Fr&&Fr.nodeName&&Fr.nodeName.toLowerCase()==="table")return xr.preventDefault(),!1}})},$a=function(){e.on("keydown",function(xr){var Fr,Oa;if(!(Pt(xr)||xr.keyCode!==qa.BACKSPACE)){Fr=c.getRng();var zn=Fr.startContainer,_r=Fr.startOffset,kr=l.getRoot();if(Oa=zn,!(!Fr.collapsed||_r!==0)){for(;Oa&&Oa.parentNode&&Oa.parentNode.firstChild===Oa&&Oa.parentNode!==kr;)Oa=Oa.parentNode;Oa.tagName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",null,Oa),Fr=l.createRng(),Fr.setStart(zn,0),Fr.setEnd(zn,0),c.setRng(Fr))}}})},Zr=function(){var xr=function(){Ct("StyleWithCSS",!1),Ct("enableInlineTableEditing",!1),wk(e)||Ct("enableObjectResizing",!1)};k3(e)||e.on("BeforeExecCommand mousedown",xr)},vr=function(){var xr=function(){r(l.select("a"),function(Fr){var Oa=Fr.parentNode,zn=l.getRoot();if(Oa.lastChild===Fr){for(;Oa&&!l.isBlock(Oa);){if(Oa.parentNode.lastChild!==Oa||Oa===zn)return;Oa=Oa.parentNode}l.add(Oa,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",function(Fr){(Fr.type==="setcontent"||Fr.command==="mceInsertLink")&&xr()})},_a=function(){ps(e)&&e.on("init",function(){Ct("DefaultParagraphSeparator",ps(e))})},Or=function(){e.on("keyup focusin mouseup",function(xr){qa.modifierPressed(xr)||c.normalize()},!0)},Jr=function(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Dr=function(){e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()})},Ur=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(xr){var Fr;if(xr.target.nodeName==="HTML"){if(Ra.ie>11){e.getBody().focus();return}Fr=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Fr),e.selection.normalize(),e.nodeChanged()}}))},fa=function(){Ra.mac&&e.on("keydown",function(xr){if(qa.metaKeyPressed(xr)&&!xr.shiftKey&&(xr.keyCode===37||xr.keyCode===39)){xr.preventDefault();var Fr=e.selection.getSel();Fr.modify("move",xr.keyCode===37?"backward":"forward","lineboundary")}})},Sr=function(){Ct("AutoUrlDetect",!1)},ra=function(){e.on("click",function(xr){var Fr=xr.target;do if(Fr.tagName==="A"){xr.preventDefault();return}while(Fr=Fr.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},xo=function(){e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(xr){xr.preventDefault()})})},Vo=function(){m.addNodeFilter("br",function(xr){for(var Fr=xr.length;Fr--;)xr[Fr].attr("class")==="Apple-interchange-newline"&&xr[Fr].remove()})},zo=function(){e.on("dragstart",function(xr){Ft(xr)}),e.on("drop",function(xr){if(!Pt(xr)){var Fr=zt(xr);if(Fr&&Fr.id!==e.id){xr.preventDefault();var Oa=NC(xr.x,xr.y,e.getDoc());c.setRng(Oa),Vt(Fr.html,!0)}}})},Iu=it,Ri=function(){if(!S||e.removed)return!1;var xr=e.selection.getSel();return!xr||!xr.rangeCount||xr.rangeCount===0},Ms=function(){nt&&(On(),Ln(),xo(),Qt(),Ra.iOS&&(Dr(),Ur(),ra())),S&&(mn(),Zr(),Jr(),fa())},Tl=function(){$a(),rn(),Ra.windowsPhone||Or(),nt&&(On(),Ln(),_a(),xo(),Tr(),Vo(),Ra.iOS?(Dr(),Ur(),ra()):Qt()),Ra.ie>=11&&(Ur(),Tr()),Ra.ie&&(Qt(),Sr(),zo()),S&&(kn(),mn(),lr(),Zr(),vr(),Jr(),fa(),Tr())};return md(e)?Ms():Tl(),{refreshContentEditable:Iu,isHidden:Ri}},_E=Oi.DOM,pH=function(e,r){var o=lt.fromDom(e.getBody()),u=ba(Vr(o)),l=lt.fromTag("style");Ze(l,"type","text/css"),xa(l,lt.fromText(r)),xa(u,l),e.on("remove",function(){ca(l)})},hH=function(e){return e.inline?e.getElement().nodeName.toLowerCase():void 0},OE=function(e){return aa(e,function(r){return at(r)===!1})},ME=function(e){var r=e.settings;return OE({block_elements:r.block_elements,boolean_attributes:r.boolean_attributes,custom_elements:r.custom_elements,extended_valid_elements:r.extended_valid_elements,invalid_elements:r.invalid_elements,invalid_styles:r.invalid_styles,move_caret_before_on_enter_elements:r.move_caret_before_on_enter_elements,non_empty_elements:r.non_empty_elements,schema:r.schema,self_closing_elements:r.self_closing_elements,short_ended_elements:r.short_ended_elements,special:r.special,text_block_elements:r.text_block_elements,text_inline_elements:r.text_inline_elements,valid_children:r.valid_children,valid_classes:r.valid_classes,valid_elements:r.valid_elements,valid_styles:r.valid_styles,verify_html:r.verify_html,whitespace_elements:r.whitespace_elements,padd_empty_block_inline_children:r.format_empty_lines})},FD=function(e){var r=e.settings,o=e.editorUpload.blobCache;return OE({allow_conditional_comments:r.allow_conditional_comments,allow_html_data_urls:r.allow_html_data_urls,allow_svg_data_urls:r.allow_svg_data_urls,allow_html_in_named_anchor:r.allow_html_in_named_anchor,allow_script_urls:r.allow_script_urls,allow_unsafe_link_target:r.allow_unsafe_link_target,convert_fonts_to_spans:r.convert_fonts_to_spans,fix_list_elements:r.fix_list_elements,font_size_legacy_values:r.font_size_legacy_values,forced_root_block:r.forced_root_block,forced_root_block_attrs:r.forced_root_block_attrs,padd_empty_with_br:r.padd_empty_with_br,preserve_cdata:r.preserve_cdata,remove_trailing_brs:r.remove_trailing_brs,inline_styles:r.inline_styles,root_name:hH(e),validate:!0,blob_cache:o,document:e.getDoc(),images_dataimg_filter:r.images_dataimg_filter})},gH=function(e){var r=e.settings;return Ca(Ca(Ca({},FD(e)),ME(e)),OE({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope,element_format:r.element_format,entities:r.entities,entity_encoding:r.entity_encoding,indent:r.indent,indent_after:r.indent_after,indent_before:r.indent_before}))},bH=function(e){var r=v1(FD(e),e.schema);return r.addAttributeFilter("src,href,style,tabindex",function(o,u){for(var l=o.length,c,m,S=e.dom,_="data-mce-"+u;l--;)if(c=o[l],m=c.attr(u),m&&!c.attr(_)){if(m.indexOf("data:")===0||m.indexOf("blob:")===0)continue;u==="style"?(m=S.serializeStyle(S.parseStyle(m),c.name),m.length||(m=null),c.attr(_,m),c.attr(u,m)):u==="tabindex"?(c.attr(_,m),c.attr(u,null)):c.attr(_,e.convertURL(m,u,c.name))}}),r.addNodeFilter("script",function(o){for(var u=o.length;u--;){var l=o[u],c=l.attr("type")||"no/type";c.indexOf("mce-")!==0&&l.attr("type","mce-"+c)}}),e.settings.preserve_cdata&&r.addNodeFilter("#cdata",function(o){for(var u=o.length;u--;){var l=o[u];l.type=8,l.name="#comment",l.value="[CDATA["+e.dom.encode(l.value)+"]]"}}),r.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(o){for(var u=o.length,l=e.schema.getNonEmptyElements();u--;){var c=o[u];c.isEmpty(l)&&c.getAll("br").length===0&&(c.append(new dc("br",1)).shortEnded=!0)}}),r},yH=function(e){e.settings.auto_focus&&cs.setEditorTimeout(e,function(){var r;e.settings.auto_focus===!0?r=e:r=e.editorManager.get(e.settings.auto_focus),r.destroyed||r.focus()},100)},HD=function(e){var r=e.dom.getRoot();!e.inline&&(!c0(e)||e.selection.getStart(!0)===r)&&js(r).each(function(o){var u=o.getNode(),l=au(u)?js(u).getOr(o):o;Ra.browser.isIE()?BR(e,l.toRange()):e.selection.setRng(l.toRange())})},sy=function(e){e.bindPendingEventDelegates(),e.initialized=!0,lA(e),e.focus(!0),HD(e),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),yH(e)},DE=function(e){return e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader},zD=function(e,r,o){var u=[new Wu(function(l,c){return DE(e).loadAll(r,l,c)})];return e.inline?u:u.concat([new Wu(function(l,c){return e.ui.styleSheetLoader.loadAll(o,l,c)})])},$D=function(e){var r=DE(e),o=bk(e),u=e.contentCSS,l=function(){r.unloadAll(u),e.inline||e.ui.styleSheetLoader.unloadAll(o)},c=function(){e.removed?l():e.on("remove",l)};if(e.contentStyles.length>0){var m="";Zn.each(e.contentStyles,function(_){m+=_+`\r
`}),e.dom.addStyle(m)}var S=Wu.all(zD(e,u,o)).then(c).catch(c);return e.settings.content_style&&pH(e,e.settings.content_style),S},wH=function(e){var r=e.settings,o=e.getDoc(),u=e.getBody();Wf(e),!r.browser_spellcheck&&!r.gecko_spellcheck&&(o.body.spellcheck=!1,_E.setAttrib(u,"spellcheck","false")),e.quirks=ID(e),sA(e);var l=yk(e);l!==void 0&&(u.dir=l),r.protect&&e.on("BeforeSetContent",function(c){Zn.each(r.protect,function(m){c.content=c.content.replace(m,function(S){return"<!--mce:protected "+escape(S)+"-->"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.on("compositionstart compositionend",function(c){e.composing=c.type==="compositionstart"})},NE=function(e){md(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},LE=function(e){e.removed!==!0&&(NE(e),sy(e))},RE=function(e,r){var o=e.settings,u=e.getElement(),l=e.getDoc();o.inline||(e.getElement().style.visibility=e.orgVisibility),!r&&!e.inline&&(l.open(),l.write(e.iframeHTML),l.close()),e.inline&&(_E.addClass(u,"mce-content-body"),e.contentDocument=l=document,e.contentWindow=window,e.bodyElement=u,e.contentAreaContainer=u);var c=e.getBody();c.disabled=!0,e.readonly=!!o.readonly,e.readonly||(e.inline&&_E.getStyle(c,"position",!0)==="static"&&(c.style.position="relative"),c.contentEditable=e.getParam("content_editable_state",!0)),c.disabled=!1,e.editorUpload=gs(e),e.schema=Hl(ME(e)),e.dom=Oi(l,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:o.force_hex_style_colors,update_styles:!0,root_element:e.inline?e.getBody():null,collect:function(){return e.inline},schema:e.schema,contentCssCors:l3(e),referrerPolicy:vk(e),onSetAttrib:function(_){e.fire("SetAttrib",_)}}),e.parser=bH(e),e.serializer=px(gH(e),e),e.selection=$p(e.dom,e.getWin(),e.serializer,e),e.annotator=oA(e),e.formatter=Ui(e),e.undoManager=LO(e),e._nodeChangeDispatcher=new q5(e),e._selectionOverrides=mH(e),IM(e),X5(e),md(e)||bs(e);var m=W5(e);Bc(e,m),oh(e),Lg(e);var S=mP(e);wH(e),S.fold(function(){$D(e).then(function(){return LE(e)})},function(_){e.setProgressState(!0),$D(e).then(function(){_().then(function(nt){e.setProgressState(!1),LE(e)},function(nt){e.notificationManager.open({type:"error",text:String(nt)}),LE(e)})})})},qg=Oi.DOM,CH=function(e,r){if(document.domain!==window.location.hostname&&Ra.browser.isIE()){var o=AO("mce");e[o]=function(){RE(e)};var u='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+o+"(true);})()";return qg.setAttrib(r,"src",u),!0}return!1},Pc=function(e,r,o,u){var l=lt.fromTag("iframe");return gt(l,u),gt(l,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:r}),rp(l,"tox-edit-area__iframe"),l},VD=function(e){var r=JL(e)+"<html><head>";ZL(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var o=e3(e),u=t3(e),l=e.translate(Ek(e));return fk(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+fk(e)+'" />'),r+="</head>"+('<body id="'+o+'" class="mce-content-body '+u+'" data-id="'+e.id+'" aria-label="'+l+'">')+"<br></body></html>",r},UD=function(e,r){var o=e.translate("Rich Text Area"),u=Pc(e.id,o,r.height,QL(e)).dom;u.onload=function(){u.onload=null,e.fire("load")};var l=CH(e,u);return e.contentAreaContainer=r.iframeContainer,e.iframeElement=u,e.iframeHTML=VD(e),qg.add(r.iframeContainer,u),l},SH=function(e,r){var o=UD(e,r);r.editorContainer&&(qg.get(r.editorContainer).style.display=e.orgDisplay,e.hidden=qg.isHidden(r.editorContainer)),e.getElement().style.display="none",qg.setAttrib(e.id,"aria-hidden","true"),o||RE(e)},jD=Oi.DOM,WD=function(e,r,o){var u=bf.get(o),l=bf.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Zn.trim(o),u&&Zn.inArray(r,o)===-1){if(Zn.each(bf.dependencies(o),function(m){WD(e,r,m)}),e.plugins[o])return;try{var c=new u(e,l,e.$);e.plugins[o]=c,c.init&&(c.init(e,l),r.push(o))}catch(m){TI(e,o,m)}}},qD=function(e){return e.replace(/^\-/,"")},xH=function(e){var r=[];Zn.each(Qw(e).split(/[ ,]/),function(o){WD(e,r,qD(o))})},EH=function(e){var r=Zn.trim(Hf(e)),o=e.ui.registry.getAll().icons,u=Ca(Ca({},C1.get("default").icons),C1.get(r).icons);Nr(u,function(l,c){Ka(o,c)||e.ui.registry.addIcon(c,l)})},kH=function(e){var r=Uh(e);if(Ye(r)){e.settings.theme=qD(r);var o=iv.get(r);e.theme=new o(e,iv.urls[r]),e.theme.init&&e.theme.init(e,iv.urls[r]||e.documentBaseUrl.replace(/\/$/,""),e.$)}else e.theme={}},BE=function(e){return e.theme.renderUI()},AH=function(e){var r=e.getElement(),o=Uh(e),u=o(e,r);return u.editorContainer.nodeType&&(u.editorContainer.id=u.editorContainer.id||e.id+"_parent"),u.iframeContainer&&u.iframeContainer.nodeType&&(u.iframeContainer.id=u.iframeContainer.id||e.id+"_iframecontainer"),u.height=u.iframeHeight?u.iframeHeight:r.offsetHeight,u},KD=function(e){return{editorContainer:e,iframeContainer:e,api:{}}},GD=function(e){var r=jD.create("div");return jD.insertAfter(r,e),KD(r)},TH=function(e){var r=e.getElement();return e.inline?KD(null):GD(r)},_H=function(e){var r=e.getElement();return e.orgDisplay=r.style.display,Ye(Uh(e))?BE(e):wt(Uh(e))?AH(e):TH(e)},OH=function(e,r){var o={show:dt.from(r.show).getOr(it),hide:dt.from(r.hide).getOr(it),disable:dt.from(r.disable).getOr(it),isDisabled:dt.from(r.isDisabled).getOr(vt),enable:function(){e.mode.isReadOnly()||dt.from(r.enable).map(Dt)}};e.ui=Ca(Ca({},e.ui),o)},XD=function(e){e.fire("ScriptsLoaded"),EH(e),kH(e),xH(e);var r=_H(e);OH(e,dt.from(r.api).getOr({}));var o={editorContainer:r.editorContainer,iframeContainer:r.iframeContainer};return e.editorContainer=o.editorContainer?o.editorContainer:null,kO(e),e.inline?RE(e):SH(e,o)},hm=Oi.DOM,YD=function(e){return e.charAt(0)==="-"},PE=function(e,r){var o=mk(r),u=pk(r);if($s.hasCode(o)===!1&&o!=="en"){var l=u!==""?u:r.editorManager.baseURL+"/langs/"+o+".js";e.add(l,it,void 0,function(){AI(r,l,o)})}},MH=function(e,r,o,u){var l=Uh(r);if(Ye(l)){if(!YD(l)&&!Ka(iv.urls,l)){var c=h3(r);c?iv.load(l,r.documentBaseURI.toAbsolute(c)):iv.load(l,"themes/"+l+"/theme"+o+".js")}e.loadQueue(function(){iv.waitFor(l,u)})}else u()},QD=function(e){return dt.from(Kw(e)).filter(function(r){return r.length>0}).map(function(r){return{url:r,name:dt.none()}})},JD=function(e,r,o){return dt.from(r).filter(function(u){return u.length>0&&!C1.has(u)}).map(function(u){return{url:e.editorManager.baseURL+"/icons/"+u+"/icons"+o+".js",name:dt.some(u)}})},DH=function(e,r,o){var u=JD(r,"default",o),l=QD(r).orThunk(function(){return JD(r,Hf(r),"")});Fn(ab([u,l]),function(c){e.add(c.url,it,void 0,function(){xO(r,c.url,c.name.getOrUndefined())})})},NH=function(e,r){Zn.each(T3(e),function(o,u){bf.load(u,o,it,void 0,function(){xx(e,o,u)}),e.settings.plugins+=" "+u}),Zn.each(Qw(e).split(/[ ,]/),function(o){if(o=Zn.trim(o),o&&!bf.urls[o])if(YD(o)){o=o.substr(1,o.length);var u=bf.dependencies(o);Zn.each(u,function(c){var m={prefix:"plugins/",resource:c,suffix:"/plugin"+r+".js"},S=bf.createUrl(m,c);bf.load(S.resource,S,it,void 0,function(){xx(e,S.prefix+S.resource+S.suffix,S.resource)})})}else{var l={prefix:"plugins/",resource:o,suffix:"/plugin"+r+".js"};bf.load(o,l,it,void 0,function(){xx(e,l.prefix+l.resource+l.suffix,o)})}})},LH=function(e,r){var o=sd.ScriptLoader;MH(o,e,r,function(){PE(o,e),DH(o,e,r),NH(e,r),o.loadQueue(function(){e.removed||XD(e)},e,function(){e.removed||XD(e)})})},Pu=function(e,r){return Kc.forElement(e,{contentCssCors:A3(r),referrerPolicy:vk(r)})},RH=function(e){var r=e.id;$s.setCode(mk(e));var o=function(){hm.unbind(window,"ready",o),e.render()};if(!Km.Event.domLoaded){hm.bind(window,"ready",o);return}if(e.getElement()&&Ra.contentEditable){var u=lt.fromDom(e.getElement()),l=Ma(u);e.on("remove",function(){Gn(u.dom.attributes,function(m){return nr(u,m.name)}),gt(u,l)}),e.ui.styleSheetLoader=Pu(u,e),g3(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var c=e.getElement().form||hm.getParent(r,"form");c&&(e.formElement=c,b3(e)&&!ju(e.getElement())&&(hm.insertAfter(hm.create("input",{type:"hidden",name:r}),r),e.hasHiddenInput=!0),e.formEventDelegate=function(m){e.fire(m.type,m)},hm.bind(c,"submit reset",e.formEventDelegate),e.on("reset",function(){e.resetContent()}),y3(e)&&!c.submit.nodeType&&!c.submit.length&&!c._mceOldSubmit&&(c._mceOldSubmit=c.submit,c.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),c._mceOldSubmit(c)})),e.windowManager=yx(e),e.notificationManager=CO(e),w3(e)&&e.on("GetContent",function(m){m.save&&(m.content=hm.encode(m.content))}),C3(e)&&e.on("submit",function(){e.initialized&&e.save()}),qb(e)&&(e._beforeUnload=function(){e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),LH(e,e.suffix)}},BH=function(e,r){return AP(e,r)},PH={"font-size":"size","font-family":"face"},ZD=function(e,r,o){var u=function(c){return Ts(c,e).orThunk(function(){return Jo(c)==="font"?Xa(PH,e).bind(function(m){return Kt(c,m)}):dt.none()})},l=function(c){return Wa(lt.fromDom(r),c)};return TS(lt.fromDom(o),function(c){return u(c)},l)},IE=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},IH=function(e,r){return dt.from(Oi.DOM.getStyle(r,e,!0))},FE=function(e){return function(r,o){return dt.from(o).map(lt.fromDom).filter(Ti).bind(function(u){return ZD(e,r,u.dom).or(IH(e,u.dom))}).getOr("")}},FH=FE("font-size"),HH=yt(IE,FE("font-family")),zH=function(e){return js(e.getBody()).map(function(r){var o=r.container();return ia(o)?o.parentNode:o})},$H=function(e){return dt.from(e.selection.getRng()).bind(function(r){var o=e.getBody(),u=r.startContainer===o&&r.startOffset===0;return u?dt.none():dt.from(e.selection.getStart(!0))})},VH=function(e,r){return $H(e).orThunk(Mt(zH,e)).map(lt.fromDom).filter(Ti).bind(r)},HE=function(e,r){return VH(e,ut(dt.some,r))},eN=function(e,r){if(/^[0-9.]+$/.test(r)){var o=parseInt(r,10);if(o>=1&&o<=7){var u=o3(e),l=sp(e);return l?l[o-1]||r:u[o-1]||r}else return r}else return r},UH=function(e){var r=e.split(/\s*,\s*/);return er(r,function(o){return o.indexOf(" ")!==-1&&!(mt(o,'"')||mt(o,"'"))?"'"+o+"'":o}).join(",")},jH=function(e,r){var o=eN(e,r);e.formatter.toggle("fontname",{value:UH(o)}),e.nodeChanged()},WH=function(e){return HE(e,function(r){return HH(e.getBody(),r.dom)}).getOr("")},qH=function(e,r){e.formatter.toggle("fontsize",{value:eN(e,r)}),e.nodeChanged()},KH=function(e){return HE(e,function(r){return FH(e.getBody(),r.dom)}).getOr("")},GH=function(e){return HE(e,function(r){var o=lt.fromDom(e.getBody()),u=TS(r,function(c){return Ts(c,"line-height")},Mt(Wa,o)),l=function(){var c=parseFloat(_o(r,"line-height")),m=parseFloat(_o(r,"font-size"));return String(c/m)};return u.getOrThunk(l)}).getOr("")},tN=function(e,r){e.formatter.toggle("lineheight",{value:String(r)}),e.nodeChanged()},XH=function(e){if(typeof e!="string"){var r=Zn.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:r}}return{content:e,details:{}}},YH=function(e,r){var o=XH(r);EP(e,o.content,o.details)},ly=Zn.each,QH=Zn.map,nN=Zn.inArray,rN=function(){function e(r){this.commands={state:{},exec:{},value:{}},this.editor=r,this.setupCommands(r)}return e.prototype.execCommand=function(r,o,u,l){var c,m=!1,S=this;if(!S.editor.removed){if(r.toLowerCase()!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(r)&&(!l||!l.skip_focus)?S.editor.focus():TA(S.editor)),l=S.editor.fire("BeforeExecCommand",{command:r,ui:o,value:u}),l.isDefaultPrevented())return!1;var _=r.toLowerCase();if(c=S.commands.exec[_])return c(_,o,u),S.editor.fire("ExecCommand",{command:r,ui:o,value:u}),!0;if(ly(this.editor.plugins,function(nt){if(nt.execCommand&&nt.execCommand(r,o,u))return S.editor.fire("ExecCommand",{command:r,ui:o,value:u}),m=!0,!1}),m)return m;if(S.editor.theme&&S.editor.theme.execCommand&&S.editor.theme.execCommand(r,o,u))return S.editor.fire("ExecCommand",{command:r,ui:o,value:u}),!0;try{m=S.editor.getDoc().execCommand(r,o,u)}catch(nt){}return m?(S.editor.fire("ExecCommand",{command:r,ui:o,value:u}),!0):!1}},e.prototype.queryCommandState=function(r){var o;if(!(this.editor.quirks.isHidden()||this.editor.removed)){if(r=r.toLowerCase(),o=this.commands.state[r])return o(r);try{return this.editor.getDoc().queryCommandState(r)}catch(u){}return!1}},e.prototype.queryCommandValue=function(r){var o;if(!(this.editor.quirks.isHidden()||this.editor.removed)){if(r=r.toLowerCase(),o=this.commands.value[r])return o(r);try{return this.editor.getDoc().queryCommandValue(r)}catch(u){}}},e.prototype.addCommands=function(r,o){o===void 0&&(o="exec");var u=this;ly(r,function(l,c){ly(c.toLowerCase().split(","),function(m){u.commands[o][m]=l})})},e.prototype.addCommand=function(r,o,u){var l=this;r=r.toLowerCase(),this.commands.exec[r]=function(c,m,S,_){return o.call(u||l.editor,m,S,_)}},e.prototype.queryCommandSupported=function(r){if(r=r.toLowerCase(),this.commands.exec[r])return!0;try{return this.editor.getDoc().queryCommandSupported(r)}catch(o){}return!1},e.prototype.addQueryStateHandler=function(r,o,u){var l=this;r=r.toLowerCase(),this.commands.state[r]=function(){return o.call(u||l.editor)}},e.prototype.addQueryValueHandler=function(r,o,u){var l=this;r=r.toLowerCase(),this.commands.value[r]=function(){return o.call(u||l.editor)}},e.prototype.hasCustomCommand=function(r){return r=r.toLowerCase(),!!this.commands.exec[r]},e.prototype.execNativeCommand=function(r,o,u){return o===void 0&&(o=!1),u===void 0&&(u=null),this.editor.getDoc().execCommand(r,o,u)},e.prototype.isFormatMatch=function(r){return this.editor.formatter.match(r)},e.prototype.toggleFormat=function(r,o){this.editor.formatter.toggle(r,o),this.editor.nodeChanged()},e.prototype.storeSelection=function(r){this.selectionBookmark=this.editor.selection.getBookmark(r)},e.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},e.prototype.setupCommands=function(r){var o=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":it,"mceEndUndoLevel,mceAddUndoLevel":function(){r.undoManager.add()},mceFocus:function(l,c,m){zA(r,m)},"Cut,Copy,Paste":function(l){var c=r.getDoc(),m;try{o.execNativeCommand(l)}catch(_){m=!0}if(l==="paste"&&!c.queryCommandEnabled(l)&&(m=!0),m||!c.queryCommandSupported(l)){var S=r.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");Ra.mac&&(S=S.replace(/Ctrl\+/g,"⌘+")),r.notificationManager.open({text:S,type:"error"})}},unlink:function(){if(r.selection.isCollapsed()){var l=r.dom.getParent(r.selection.getStart(),"a");l&&r.dom.remove(l,!0);return}r.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(l){var c=l.substring(7);c==="full"&&(c="justify"),ly("left,center,right,justify".split(","),function(m){c!==m&&r.formatter.remove("align"+m)}),c!=="none"&&o.toggleFormat("align"+c)},"InsertUnorderedList,InsertOrderedList":function(l){var c;o.execNativeCommand(l);var m=r.dom.getParent(r.selection.getNode(),"ol,ul");m&&(c=m.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(o.storeSelection(),r.dom.split(c,m),o.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(l){o.toggleFormat(l)},"ForeColor,HiliteColor":function(l,c,m){o.toggleFormat(l,{value:m})},FontName:function(l,c,m){jH(r,m)},FontSize:function(l,c,m){qH(r,m)},LineHeight:function(l,c,m){tN(r,m)},Lang:function(l,c,m){o.toggleFormat(l,{value:m.code,customValue:m.customCode})},RemoveFormat:function(l){r.formatter.remove(l)},mceBlockQuote:function(){o.toggleFormat("blockquote")},FormatBlock:function(l,c,m){return o.toggleFormat(m||"p")},mceCleanup:function(){var l=r.selection.getBookmark();r.setContent(r.getContent()),r.selection.moveToBookmark(l)},mceRemoveNode:function(l,c,m){var S=m||r.selection.getNode();S!==r.getBody()&&(o.storeSelection(),r.dom.remove(S,!0),o.restoreSelection())},mceSelectNodeDepth:function(l,c,m){var S=0;r.dom.getParent(r.selection.getNode(),function(_){if(_.nodeType===1&&S++===m)return r.selection.select(_),!1},r.getBody())},mceSelectNode:function(l,c,m){r.selection.select(m)},mceInsertContent:function(l,c,m){YH(r,m)},mceInsertRawHTML:function(l,c,m){r.selection.setContent("tiny_mce_marker");var S=r.getContent();r.setContent(S.replace(/tiny_mce_marker/g,function(){return m}))},mceInsertNewLine:function(l,c,m){CE(r,m)},mceToggleFormat:function(l,c,m){o.toggleFormat(m)},mceSetContent:function(l,c,m){r.setContent(m)},"Indent,Outdent":function(l){LM(r,l)},mceRepaint:it,InsertHorizontalRule:function(){r.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){r.hasVisual=!r.hasVisual,r.addVisual()},mceReplaceContent:function(l,c,m){r.execCommand("mceInsertContent",!1,m.replace(/\{\$selection\}/g,r.selection.getContent({format:"text"})))},mceInsertLink:function(l,c,m){typeof m=="string"&&(m={href:m});var S=r.dom.getParent(r.selection.getNode(),"a");m.href=m.href.replace(/ /g,"%20"),(!S||!m.href)&&r.formatter.remove("link"),m.href&&r.formatter.apply("link",m,S)},selectAll:function(){var l=r.dom.getParent(r.selection.getStart(),Ec);if(l){var c=r.dom.createRng();c.selectNodeContents(l),r.selection.setRng(c)}},mceNewDocument:function(){r.setContent("")},InsertLineBreak:function(l,c,m){return mm(r,m),!0}});var u=function(l){return function(){var c=r.selection,m=c.isCollapsed()?[r.dom.getParent(c.getNode(),r.dom.isBlock)]:c.getSelectedBlocks(),S=QH(m,function(_){return!!r.formatter.matchNode(_,l)});return nN(S,!0)!==-1}};o.addCommands({JustifyLeft:u("alignleft"),JustifyCenter:u("aligncenter"),JustifyRight:u("alignright"),JustifyFull:u("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(l){return o.isFormatMatch(l)},mceBlockQuote:function(){return o.isFormatMatch("blockquote")},Outdent:function(){return MM(r)},"InsertUnorderedList,InsertOrderedList":function(l){var c=r.dom.getParent(r.selection.getNode(),"ul,ol");return c&&(l==="insertunorderedlist"&&c.tagName==="UL"||l==="insertorderedlist"&&c.tagName==="OL")}},"state"),o.addCommands({Undo:function(){r.undoManager.undo()},Redo:function(){r.undoManager.redo()}}),o.addQueryValueHandler("FontName",function(){return WH(r)},this),o.addQueryValueHandler("FontSize",function(){return KH(r)},this),o.addQueryValueHandler("LineHeight",function(){return GH(r)},this)},e}(),hv="data-mce-contenteditable",aN=function(e,r,o){Aw(e,r)&&o===!1?$2(e,r):o&&rp(e,r)},cy=function(e,r,o){try{e.getDoc().execCommand(r,!1,String(o))}catch(u){}},fy=function(e,r){e.dom.contentEditable=r?"true":"false"},JH=function(e){Fn(ts(e,'*[contenteditable="true"]'),function(r){Ze(r,hv,"true"),fy(r,!1)})},ZH=function(e){Fn(ts(e,"*["+hv+'="true"]'),function(r){nr(r,hv),fy(r,!0)})},oN=function(e){dt.from(e.selection.getNode()).each(function(r){r.removeAttribute("data-mce-selected")})},e6=function(e){e.selection.setRng(e.selection.getRng())},t6=function(e,r){var o=lt.fromDom(e.getBody());aN(o,"mce-content-readonly",r),r?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),oN(e),e.readonly=!0,fy(o,!1),JH(o)):(e.readonly=!1,fy(o,!0),ZH(o),cy(e,"StyleWithCSS",!1),cy(e,"enableInlineTableEditing",!1),cy(e,"enableObjectResizing",!1),HA(e)&&e.focus(),e6(e),e.nodeChanged())},gv=function(e){return e.readonly},iN=function(e){e.parser.addAttributeFilter("contenteditable",function(r){gv(e)&&Fn(r,function(o){o.attr(hv,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(hv,function(r){gv(e)&&Fn(r,function(o){o.attr("contenteditable",o.attr(hv))})}),e.serializer.addTempAttr(hv)},n6=function(e){e.serializer?iN(e):e.on("PreInit",function(){iN(e)})},uN=function(e){return e.type==="click"},r6=function(e,r){var o=function(u){return Wa(u,lt.fromDom(e.getBody()))};return ou(r,"a",o).bind(function(u){return Kt(u,"href")})},a6=function(e,r){if(uN(r)&&!qa.metaKeyPressed(r)){var o=lt.fromDom(r.target);r6(e,o).each(function(u){if(r.preventDefault(),/^#/.test(u)){var l=e.dom.select(u+',[name="'+In(u,"#")+'"]');l.length&&e.selection.scrollIntoView(l[0],!0)}else window.open(u,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}},o6=function(e){e.on("ShowCaret",function(r){gv(e)&&r.preventDefault()}),e.on("ObjectSelected",function(r){gv(e)&&r.preventDefault()})},sN=Zn.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),dy=function(){function e(r){this.bindings={},this.settings=r||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||vt}return e.isNative=function(r){return!!sN[r.toLowerCase()]},e.prototype.fire=function(r,o){var u=r.toLowerCase(),l=wr(u,o||{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(l);var c=this.bindings[u];if(c)for(var m=0,S=c.length;m<S;m++){var _=c[m];if(!_.removed){if(_.once&&this.off(u,_.func),l.isImmediatePropagationStopped())return l;if(_.func.call(this.scope,l)===!1)return l.preventDefault(),l}}return l},e.prototype.on=function(r,o,u,l){if(o===!1&&(o=vt),o){var c={func:o,removed:!1};l&&Zn.extend(c,l);for(var m=r.toLowerCase().split(" "),S=m.length;S--;){var _=m[S],nt=this.bindings[_];nt||(nt=[],this.toggleEvent(_,!0)),u?nt=Fi([c],nt,!0):nt=Fi(Fi([],nt,!0),[c],!1),this.bindings[_]=nt}}return this},e.prototype.off=function(r,o){var u=this;if(r)for(var l=r.toLowerCase().split(" "),c=l.length;c--;){var m=l[c],S=this.bindings[m];if(!m)return Nr(this.bindings,function(nt,pt){u.toggleEvent(pt,!1),delete u.bindings[pt]}),this;if(S){if(!o)S.length=0;else{var _=va(S,function(nt){return nt.func===o});S=_.fail,this.bindings[m]=S,Fn(_.pass,function(nt){nt.removed=!0})}S.length||(this.toggleEvent(r,!1),delete this.bindings[m])}}else Nr(this.bindings,function(nt,pt){u.toggleEvent(pt,!1)}),this.bindings={};return this},e.prototype.once=function(r,o,u){return this.on(r,o,u,{once:!0})},e.prototype.has=function(r){return r=r.toLowerCase(),!(!this.bindings[r]||this.bindings[r].length===0)},e}(),Kg=function(e){return e._eventDispatcher||(e._eventDispatcher=new dy({scope:e,toggleEvent:function(r,o){dy.isNative(r)&&e.toggleNativeEvent&&e.toggleNativeEvent(r,o)}})),e._eventDispatcher},vy={fire:function(e,r,o){var u=this;if(u.removed&&e!=="remove"&&e!=="detach")return r;var l=Kg(u).fire(e,r);if(o!==!1&&u.parent)for(var c=u.parent();c&&!l.isPropagationStopped();)c.fire(e,l,!1),c=c.parent();return l},on:function(e,r,o){return Kg(this).on(e,r,o)},off:function(e,r){return Kg(this).off(e,r)},once:function(e,r){return Kg(this).once(e,r)},hasEventListeners:function(e){return Kg(this).has(e)}},my=Oi.DOM,gm,py=function(e,r){if(r==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(r))return e.getDoc().documentElement;var o=Gw(e);return o?(e.eventRoot||(e.eventRoot=my.select(o)[0]),e.eventRoot):e.getBody()},i6=function(e){return!e.hidden&&!gv(e)},lN=function(e,r,o){i6(e)?e.fire(r,o):gv(e)&&a6(e,o)},cN=function(e,r){var o;if(e.delegates||(e.delegates={}),!(e.delegates[r]||e.removed)){var u=py(e,r);if(Gw(e)){if(gm||(gm={},e.editorManager.on("removeEditor",function(){e.editorManager.activeEditor||gm&&(Nr(gm,function(l,c){e.dom.unbind(py(e,c))}),gm=null)})),gm[r])return;o=function(l){for(var c=l.target,m=e.editorManager.get(),S=m.length;S--;){var _=m[S].getBody();(_===c||my.isChildOf(c,_))&&lN(m[S],r,l)}},gm[r]=o,my.bind(u,r,o)}else o=function(l){lN(e,r,l)},my.bind(u,r,o),e.delegates[r]=o}},fN=Ca(Ca({},vy),{bindPendingEventDelegates:function(){var e=this;Zn.each(e._pendingNativeEvents,function(r){cN(e,r)})},toggleNativeEvent:function(e,r){var o=this;e==="focus"||e==="blur"||o.removed||(r?o.initialized?cN(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&(o.dom.unbind(py(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents:function(){var e=this,r=e.getBody(),o=e.dom;e.delegates&&(Nr(e.delegates,function(u,l){e.dom.unbind(py(e,l),l,u)}),delete e.delegates),!e.inline&&r&&o&&(r.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(r),o.unbind(e.getContainer()))}}),u6=["design","readonly"],zE=function(e,r,o,u){var l=o[r.get()],c=o[u];try{c.activate()}catch(m){return}l.deactivate(),l.editorReadOnly!==c.editorReadOnly&&t6(e,c.editorReadOnly),r.set(u),TC(e,u)},dN=function(e,r,o,u){if(u!==o.get()){if(!Ka(r,u))throw new Error("Editor mode '"+u+"' is invalid");e.initialized?zE(e,o,r,u):e.on("init",function(){return zE(e,o,r,u)})}},vN=function(e,r,o){var u;if(cn(u6,r))throw new Error("Cannot override default mode "+r);return Ca(Ca({},e),(u={},u[r]=Ca(Ca({},o),{deactivate:function(){try{o.deactivate()}catch(l){}}}),u))},s6=function(e){var r=zs("design"),o=zs({design:{activate:it,deactivate:it,editorReadOnly:!1},readonly:{activate:it,deactivate:it,editorReadOnly:!0}});return n6(e),o6(e),{isReadOnly:function(){return gv(e)},set:function(u){return dN(e,o.get(),r,u)},get:function(){return r.get()},register:function(u,l){o.set(vN(o.get(),u,l))}}},hy=Zn.each,gy=Zn.explode,l6={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},mN=Zn.makeMap("alt,ctrl,shift,meta,access"),c6=function(e){var r,o={};hy(gy(e.toLowerCase(),"+"),function(l){l in mN?o[l]=!0:/^[0-9]{2,}$/.test(l)?o.keyCode=parseInt(l,10):(o.charCode=l.charCodeAt(0),o.keyCode=l6[l]||l.toUpperCase().charCodeAt(0))});var u=[o.keyCode];for(r in mN)o[r]?u.push(r):o[r]=!1;return o.id=u.join(","),o.access&&(o.alt=!0,Ra.mac?o.ctrl=!0:o.shift=!0),o.meta&&(Ra.mac?o.meta=!0:(o.ctrl=!0,o.meta=!1)),o},by=function(){function e(r){this.shortcuts={},this.pendingPatterns=[],this.editor=r;var o=this;r.on("keyup keypress keydown",function(u){(o.hasModifier(u)||o.isFunctionKey(u))&&!u.isDefaultPrevented()&&(hy(o.shortcuts,function(l){if(o.matchShortcut(u,l))return o.pendingPatterns=l.subpatterns.slice(0),u.type==="keydown"&&o.executeShortcutAction(l),!0}),o.matchShortcut(u,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&u.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}return e.prototype.add=function(r,o,u,l){var c=this,m=c.normalizeCommandFunc(u);return hy(gy(Zn.trim(r)),function(S){var _=c.createShortcut(S,o,m,l);c.shortcuts[_.id]=_}),!0},e.prototype.remove=function(r){var o=this.createShortcut(r);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1},e.prototype.normalizeCommandFunc=function(r){var o=this,u=r;return typeof u=="string"?function(){o.editor.execCommand(u,!1,null)}:Zn.isArray(u)?function(){o.editor.execCommand(u[0],u[1],u[2])}:u},e.prototype.createShortcut=function(r,o,u,l){var c=Zn.map(gy(r,">"),c6);return c[c.length-1]=Zn.extend(c[c.length-1],{func:u,scope:l||this.editor}),Zn.extend(c[0],{desc:this.editor.translate(o),subpatterns:c.slice(1)})},e.prototype.hasModifier=function(r){return r.altKey||r.ctrlKey||r.metaKey},e.prototype.isFunctionKey=function(r){return r.type==="keydown"&&r.keyCode>=112&&r.keyCode<=123},e.prototype.matchShortcut=function(r,o){return!o||o.ctrl!==r.ctrlKey||o.meta!==r.metaKey||o.alt!==r.altKey||o.shift!==r.shiftKey?!1:r.keyCode===o.keyCode||r.charCode&&r.charCode===o.charCode?(r.preventDefault(),!0):!1},e.prototype.executeShortcutAction=function(r){return r.func?r.func.call(r.scope):null},e}(),f6=function(){var e={},r={},o={},u={},l={},c={},m={},S=function(nt,pt){return function(bt,Ct){return nt[bt.toLowerCase()]=Ca(Ca({},Ct),{type:pt})}},_=function(nt,pt){return u[nt.toLowerCase()]=pt};return{addButton:S(e,"button"),addGroupToolbarButton:S(e,"grouptoolbarbutton"),addToggleButton:S(e,"togglebutton"),addMenuButton:S(e,"menubutton"),addSplitButton:S(e,"splitbutton"),addMenuItem:S(r,"menuitem"),addNestedMenuItem:S(r,"nestedmenuitem"),addToggleMenuItem:S(r,"togglemenuitem"),addAutocompleter:S(o,"autocompleter"),addContextMenu:S(l,"contextmenu"),addContextToolbar:S(c,"contexttoolbar"),addContextForm:S(c,"contextform"),addSidebar:S(m,"sidebar"),addIcon:_,getAll:function(){return{buttons:e,menuItems:r,icons:u,popups:o,contextMenus:l,contextToolbars:c,sidebars:m}}}},$E=function(){var e=f6();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},bm=Oi.DOM,pN=Zn.extend,d6=Zn.each,VE=Zn.resolve,v6=Ra.ie,yy=function(){function e(r,o,u){var l=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=u,this.documentBaseUrl=u.documentBaseURL,pN(this,fN),this.settings=mO(this,r,this.documentBaseUrl,u.defaultSettings,o),this.settings.suffix&&(u.suffix=this.settings.suffix),this.suffix=u.suffix,this.settings.base_url&&u._setBaseUrl(this.settings.base_url),this.baseUri=u.baseURI,this.settings.referrer_policy&&(sd.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),Oi.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),al.languageLoad=this.settings.language_load,al.baseURL=u.baseURL,this.id=r,this.setDirty(!1),this.documentBaseURI=new ov(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new by(this),this.editorCommands=new rN(this),this.settings.cache_suffix&&(Ra.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:$E(),styleSheetLoader:void 0,show:it,hide:it,enable:it,disable:it,isDisabled:vt};var c=this,m=s6(c);this.mode=m,this.setMode=m.set,u.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=bo.overrideDefaults(function(){return{context:l.inline?l.getBody():l.getDoc(),element:l.getBody()}})}return e.prototype.render=function(){RH(this)},e.prototype.focus=function(r){this.execCommand("mceFocus",!1,r)},e.prototype.hasFocus=function(){return qf(this)},e.prototype.execCallback=function(r){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];var l=this,c=l.settings[r],m;if(c)return l.callbackLookup&&(m=l.callbackLookup[r])&&(c=m.func,m=m.scope),typeof c=="string"&&(m=c.replace(/\.\w+$/,""),m=m?VE(m):0,c=VE(c),l.callbackLookup=l.callbackLookup||{},l.callbackLookup[r]={func:c,scope:m}),c.apply(m||l,o)},e.prototype.translate=function(r){return $s.translate(r)},e.prototype.getParam=function(r,o,u){return bI(this,r,o,u)},e.prototype.hasPlugin=function(r,o){var u=cn(Qw(this).split(/[ ,]/),r);return u?o?bf.get(r)!==void 0:!0:!1},e.prototype.nodeChanged=function(r){this._nodeChangeDispatcher.nodeChanged(r)},e.prototype.addCommand=function(r,o,u){this.editorCommands.addCommand(r,o,u)},e.prototype.addQueryStateHandler=function(r,o,u){this.editorCommands.addQueryStateHandler(r,o,u)},e.prototype.addQueryValueHandler=function(r,o,u){this.editorCommands.addQueryValueHandler(r,o,u)},e.prototype.addShortcut=function(r,o,u,l){this.shortcuts.add(r,o,u,l)},e.prototype.execCommand=function(r,o,u,l){return this.editorCommands.execCommand(r,o,u,l)},e.prototype.queryCommandState=function(r){return this.editorCommands.queryCommandState(r)},e.prototype.queryCommandValue=function(r){return this.editorCommands.queryCommandValue(r)},e.prototype.queryCommandSupported=function(r){return this.editorCommands.queryCommandSupported(r)},e.prototype.show=function(){var r=this;r.hidden&&(r.hidden=!1,r.inline?r.getBody().contentEditable="true":(bm.show(r.getContainer()),bm.hide(r.id)),r.load(),r.fire("show"))},e.prototype.hide=function(){var r=this,o=r.getDoc();r.hidden||(v6&&o&&!r.inline&&o.execCommand("SelectAll"),r.save(),r.inline?(r.getBody().contentEditable="false",r===r.editorManager.focusedEditor&&(r.editorManager.focusedEditor=null)):(bm.hide(r.getContainer()),bm.setStyle(r.id,"display",r.orgDisplay)),r.hidden=!0,r.fire("hide"))},e.prototype.isHidden=function(){return!!this.hidden},e.prototype.setProgressState=function(r,o){this.fire("ProgressState",{state:r,time:o})},e.prototype.load=function(r){var o=this,u=o.getElement(),l;if(o.removed)return"";if(u){r=r||{},r.load=!0;var c=ju(u)?u.value:u.innerHTML;return l=o.setContent(c,r),r.element=u,r.no_events||o.fire("LoadContent",r),r.element=u=null,l}},e.prototype.save=function(r){var o=this,u=o.getElement(),l,c;if(!(!u||!o.initialized||o.removed))return r=r||{},r.save=!0,r.element=u,l=r.content=o.getContent(r),r.no_events||o.fire("SaveContent",r),r.format==="raw"&&o.fire("RawSaveContent",r),l=r.content,ju(u)?u.value=l:((r.is_removing||!o.inline)&&(u.innerHTML=l),(c=bm.getParent(o.id,"form"))&&d6(c.elements,function(m){if(m.name===o.id)return m.value=l,!1})),r.element=u=null,r.set_dirty!==!1&&o.setDirty(!1),l},e.prototype.setContent=function(r,o){return p1(this,r,o)},e.prototype.getContent=function(r){return m1(this,r)},e.prototype.insertContent=function(r,o){o&&(r=pN({content:r},o)),this.execCommand("mceInsertContent",!1,r)},e.prototype.resetContent=function(r){r===void 0?p1(this,this.startContent,{format:"raw"}):p1(this,r),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},e.prototype.isDirty=function(){return!this.isNotDirty},e.prototype.setDirty=function(r){var o=!this.isNotDirty;this.isNotDirty=!r,r&&r!==o&&this.fire("dirty")},e.prototype.getContainer=function(){var r=this;return r.container||(r.container=bm.get(r.editorContainer||r.id+"_parent")),r.container},e.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},e.prototype.getElement=function(){return this.targetElm||(this.targetElm=bm.get(this.id)),this.targetElm},e.prototype.getWin=function(){var r=this,o;return r.contentWindow||(o=r.iframeElement,o&&(r.contentWindow=o.contentWindow)),r.contentWindow},e.prototype.getDoc=function(){var r=this,o;return r.contentDocument||(o=r.getWin(),o&&(r.contentDocument=o.document)),r.contentDocument},e.prototype.getBody=function(){var r=this.getDoc();return this.bodyElement||(r?r.body:null)},e.prototype.convertURL=function(r,o,u){var l=this,c=l.settings;return c.urlconverter_callback?l.execCallback("urlconverter_callback",r,u,!0,o):!c.convert_urls||u&&u.nodeName==="LINK"||r.indexOf("file:")===0||r.length===0?r:c.relative_urls?l.documentBaseURI.toRelative(r):(r=l.documentBaseURI.toAbsolute(r,c.remove_script_host),r)},e.prototype.addVisual=function(r){BH(this,r)},e.prototype.remove=function(){tI(this)},e.prototype.destroy=function(r){rO(this,r)},e.prototype.uploadImages=function(r){return this.editorUpload.uploadImages(r)},e.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},e.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},e.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},e.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},e.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},e}(),Ic=Oi.DOM,m6=Zn.explode,Qf=Zn.each,cl=Zn.extend,ym=0,hN=!1,wy,bv=[],fl=[],p6=function(e){return e!=="length"},gN=function(e){var r=e.type;Qf(yv.get(),function(o){switch(r){case"scroll":o.fire("ScrollWindow",e);break;case"resize":o.fire("ResizeWindow",e);break}})},UE=function(e){e!==hN&&(e?bo(window).on("resize scroll",gN):bo(window).off("resize scroll",gN),hN=e)},wm=function(e){var r=fl;delete bv[e.id];for(var o=0;o<bv.length;o++)if(bv[o]===e){bv.splice(o,1);break}return fl=tn(fl,function(u){return e!==u}),yv.activeEditor===e&&(yv.activeEditor=fl.length>0?fl[0]:null),yv.focusedEditor===e&&(yv.focusedEditor=null),r.length!==fl.length},h6=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(wm(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e},g6=document.compatMode!=="CSS1Compat",yv=Ca(Ca({},vy),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:bo,majorVersion:"5",minorVersion:"10.9",releaseDate:"2023-11-15",editors:bv,i18n:$s,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var e=this,r,o,u="";o=ov.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));var l=window.tinymce||window.tinyMCEPreInit;if(l)r=l.base||l.baseURL,u=l.suffix;else{for(var c=document.getElementsByTagName("script"),m=0;m<c.length;m++){var S=c[m].src||"";if(S!==""){var _=S.substring(S.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(S)){_.indexOf(".min")!==-1&&(u=".min"),r=S.substring(0,S.lastIndexOf("/"));break}}}if(!r&&document.currentScript){var S=document.currentScript.src;S.indexOf(".min")!==-1&&(u=".min"),r=S.substring(0,S.lastIndexOf("/"))}}e.baseURL=new ov(o).toAbsolute(r),e.documentBaseURL=o,e.baseURI=new ov(e.baseURL),e.suffix=u,PA(e)},overrideDefaults:function(e){var r=e.base_url;r&&this._setBaseUrl(r);var o=e.suffix;e.suffix&&(this.suffix=o),this.defaultSettings=e;var u=e.plugin_base_urls;u!==void 0&&Nr(u,function(l,c){al.PluginManager.urls[c]=l})},init:function(e){var r=this,o,u=Zn.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),l=function(bt,Ct){return bt.inline&&Ct.tagName.toLowerCase()in u},c=function(bt){var Ct=bt.id;return Ct||(Ct=Xa(bt,"name").filter(function(Pt){return!Ic.get(Pt)}).getOrThunk(Ic.uniqueId),bt.setAttribute("id",Ct)),Ct},m=function(bt){var Ct=e[bt];if(Ct)return Ct.apply(r,[])},S=function(bt,Ct){return Ct.constructor===RegExp?Ct.test(bt.className):Ic.hasClass(bt,Ct)},_=function(bt){var Ct=[];if(Ra.browser.isIE()&&Ra.browser.version.major<11)return x1("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(g6)return x1("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(bt.types)return Qf(bt.types,function(Ft){Ct=Ct.concat(Ic.select(Ft.selector))}),Ct;if(bt.selector)return Ic.select(bt.selector);if(bt.target)return[bt.target];switch(bt.mode){case"exact":var Pt=bt.elements||"";Pt.length>0&&Qf(m6(Pt),function(Ft){var zt=Ic.get(Ft);zt?Ct.push(zt):Qf(document.forms,function(Vt){Qf(Vt.elements,function(rn){rn.name===Ft&&(Ft="mce_editor_"+ym++,Ic.setAttrib(rn,"id",Ft),Ct.push(rn))})})});break;case"textareas":case"specific_textareas":Qf(Ic.select("textarea"),function(Ft){bt.editor_deselector&&S(Ft,bt.editor_deselector)||(!bt.editor_selector||S(Ft,bt.editor_selector))&&Ct.push(Ft)});break}return Ct},nt=function(bt){o=bt},pt=function(){var bt=0,Ct=[],Pt,Ft=function(zt,Vt,rn){var Qt=new yy(zt,Vt,r);Ct.push(Qt),Qt.on("init",function(){++bt===Pt.length&&nt(Ct)}),Qt.targetElm=Qt.targetElm||rn,Qt.render()};if(Ic.unbind(window,"ready",pt),m("onpageload"),Pt=bo.unique(_(e)),e.types){Qf(e.types,function(zt){Zn.each(Pt,function(Vt){return Ic.is(Vt,zt.selector)?(Ft(c(Vt),cl({},e,zt),Vt),!1):!0})});return}Zn.each(Pt,function(zt){h6(r.get(zt.id))}),Pt=Zn.grep(Pt,function(zt){return!r.get(zt.id)}),Pt.length===0?nt([]):Qf(Pt,function(zt){l(e,zt)?x1("Could not initialize inline editor on invalid inline target element",zt):Ft(c(zt),e,zt)})};return r.settings=e,Ic.bind(window,"ready",pt),new Wu(function(bt){o?bt(o):nt=function(Ct){bt(Ct)}})},get:function(e){return arguments.length===0?fl.slice(0):Ye(e)?oa(fl,function(r){return r.id===e}).getOr(null):xt(e)&&fl[e]?fl[e]:null},add:function(e){var r=this,o=bv[e.id];return o===e||(r.get(e.id)===null&&(p6(e.id)&&(bv[e.id]=e),bv.push(e),fl.push(e)),UE(!0),r.activeEditor=e,r.fire("AddEditor",{editor:e}),wy||(wy=function(u){var l=r.fire("BeforeUnload");if(l.returnValue)return u.preventDefault(),u.returnValue=l.returnValue,l.returnValue},window.addEventListener("beforeunload",wy))),e},createEditor:function(e,r){return this.add(new yy(e,r,this))},remove:function(e){var r=this,o,u;if(!e){for(o=fl.length-1;o>=0;o--)r.remove(fl[o]);return}if(Ye(e)){Qf(Ic.select(e),function(l){u=r.get(l.id),u&&r.remove(u)});return}return u=e,Ke(r.get(u.id))?null:(wm(u)&&r.fire("RemoveEditor",{editor:u}),fl.length===0&&window.removeEventListener("beforeunload",wy),u.remove(),UE(fl.length>0),u)},execCommand:function(e,r,o){var u=this,l=u.get(o);switch(e){case"mceAddEditor":return u.get(o)||new yy(o,u.settings,u).render(),!0;case"mceRemoveEditor":return l&&l.remove(),!0;case"mceToggleEditor":return l?(l.isHidden()?l.show():l.hide(),!0):(u.execCommand("mceAddEditor",!1,o),!0)}return u.activeEditor?u.activeEditor.execCommand(e,r,o):!1},triggerSave:function(){Qf(fl,function(e){e.save()})},addI18n:function(e,r){$s.add(e,r)},translate:function(e){return $s.translate(e)},setActive:function(e){var r=this.activeEditor;this.activeEditor!==e&&(r&&r.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:r})),this.activeEditor=e},_setBaseUrl:function(e){this.baseURL=new ov(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new ov(this.baseURL)}});yv.setup();var Fc=Math.min,ch=Math.max,Cy=Math.round,jE=function(e,r,o){var u=r.x,l=r.y,c=e.w,m=e.h,S=r.w,_=r.h,nt=(o||"").split("");return nt[0]==="b"&&(l+=_),nt[1]==="r"&&(u+=S),nt[0]==="c"&&(l+=Cy(_/2)),nt[1]==="c"&&(u+=Cy(S/2)),nt[3]==="b"&&(l-=m),nt[4]==="r"&&(u-=c),nt[3]==="c"&&(l-=Cy(m/2)),nt[4]==="c"&&(u-=Cy(c/2)),fh(u,l,c,m)},b6=function(e,r,o,u){var l,c;for(c=0;c<u.length;c++)if(l=jE(e,r,u[c]),l.x>=o.x&&l.x+l.w<=o.w+o.x&&l.y>=o.y&&l.y+l.h<=o.h+o.y)return u[c];return null},bN=function(e,r,o){return fh(e.x-r,e.y-o,e.w+r*2,e.h+o*2)},yN=function(e,r){var o=ch(e.x,r.x),u=ch(e.y,r.y),l=Fc(e.x+e.w,r.x+r.w),c=Fc(e.y+e.h,r.y+r.h);return l-o<0||c-u<0?null:fh(o,u,l-o,c-u)},WE=function(e,r,o){var u=e.x,l=e.y,c=e.x+e.w,m=e.y+e.h,S=r.x+r.w,_=r.y+r.h,nt=ch(0,r.x-u),pt=ch(0,r.y-l),bt=ch(0,c-S),Ct=ch(0,m-_);return u+=nt,l+=pt,o&&(c+=nt,m+=pt,u-=bt,l-=Ct),c-=bt,m-=Ct,fh(u,l,c-u,m-l)},fh=function(e,r,o,u){return{x:e,y:r,w:o,h:u}},y6=function(e){return fh(e.left,e.top,e.width,e.height)},w6={inflate:bN,relativePosition:jE,findBestRelativePosition:b6,intersect:yN,clamp:WE,create:fh,fromClientRect:y6},C6=function(e,r,o){o===void 0&&(o=1e3);var u=!1,l=null,c=function(nt){return function(){for(var pt=[],bt=0;bt<arguments.length;bt++)pt[bt]=arguments[bt];u||(u=!0,l!==null&&(clearTimeout(l),l=null),nt.apply(null,pt))}},m=c(e),S=c(r),_=function(){for(var nt=[],pt=0;pt<arguments.length;pt++)nt[pt]=arguments[pt];!u&&l===null&&(l=setTimeout(function(){return S.apply(null,nt)},o))};return{start:_,resolve:m,reject:S}},S6=function(){var e={},r={},o=function(l,c){var m='Script at URL "'+c+'" failed to load',S='Script at URL "'+c+"\" did not call `tinymce.Resource.add('"+l+"', data)` within 1 second";if(e[l]!==void 0)return e[l];var _=new Wu(function(nt,pt){var bt=C6(nt,pt);r[l]=bt.resolve,sd.ScriptLoader.loadScript(c,function(){return bt.start(S)},function(){return bt.reject(m)})});return e[l]=_,_},u=function(l,c){r[l]!==void 0&&(r[l](c),delete r[l]),e[l]=Wu.resolve(c)};return{load:o,add:u}},wN=S6(),Gg=Zn.each,x6=Zn.extend,qE,KE,CN=function(){};CN.extend=qE=function(e){var r=this,o=r.prototype,u=function(){var S,_,nt,pt=this;if(!KE&&(pt.init&&pt.init.apply(pt,arguments),_=pt.Mixins,_))for(S=_.length;S--;)nt=_[S],nt.init&&nt.init.apply(pt,arguments)},l=function(){return this},c=function(S,_){return function(){var nt=this,pt=nt._super;nt._super=o[S];var bt=_.apply(nt,arguments);return nt._super=pt,bt}};KE=!0;var m=new r;return KE=!1,e.Mixins&&(Gg(e.Mixins,function(S){for(var _ in S)_!=="init"&&(e[_]=S[_])}),o.Mixins&&(e.Mixins=o.Mixins.concat(e.Mixins))),e.Methods&&Gg(e.Methods.split(","),function(S){e[S]=l}),e.Properties&&Gg(e.Properties.split(","),function(S){var _="_"+S;e[S]=function(nt){var pt=this;return nt!==void 0?(pt[_]=nt,pt):pt[_]}}),e.Statics&&Gg(e.Statics,function(S,_){u[_]=S}),e.Defaults&&o.Defaults&&(e.Defaults=x6({},o.Defaults,e.Defaults)),Nr(e,function(S,_){typeof S=="function"&&o[_]?m[_]=c(_,S):m[_]=S}),u.prototype=m,u.constructor=u,u.extend=qE,u};var Sy=Math.min,xy=Math.max,wv=Math.round,GE=function(e){var r={},o=0,u=0,l=0,c=function(bt,Ct,Pt){var Ft,zt,Vt;Ft=0,zt=0,Vt=0,bt=bt/255,Ct=Ct/255,Pt=Pt/255;var rn=Sy(bt,Sy(Ct,Pt)),Qt=xy(bt,xy(Ct,Pt));if(rn===Qt)return Vt=rn,{h:0,s:0,v:Vt*100};var On=bt===rn?Ct-Pt:Pt===rn?bt-Ct:Pt-bt;return Ft=bt===rn?3:Pt===rn?1:5,Ft=60*(Ft-On/(Qt-rn)),zt=(Qt-rn)/Qt,Vt=Qt,{h:wv(Ft),s:wv(zt*100),v:wv(Vt*100)}},m=function(bt,Ct,Pt){if(bt=(parseInt(bt,10)||0)%360,Ct=parseInt(Ct,10)/100,Pt=parseInt(Pt,10)/100,Ct=xy(0,Sy(Ct,1)),Pt=xy(0,Sy(Pt,1)),Ct===0){o=u=l=wv(255*Pt);return}var Ft=bt/60,zt=Pt*Ct,Vt=zt*(1-Math.abs(Ft%2-1)),rn=Pt-zt;switch(Math.floor(Ft)){case 0:o=zt,u=Vt,l=0;break;case 1:o=Vt,u=zt,l=0;break;case 2:o=0,u=zt,l=Vt;break;case 3:o=0,u=Vt,l=zt;break;case 4:o=Vt,u=0,l=zt;break;case 5:o=zt,u=0,l=Vt;break;default:o=u=l=0}o=wv(255*(o+rn)),u=wv(255*(u+rn)),l=wv(255*(l+rn))},S=function(){var bt=function(Ct){return Ct=parseInt(Ct,10).toString(16),Ct.length>1?Ct:"0"+Ct};return"#"+bt(o)+bt(u)+bt(l)},_=function(){return{r:o,g:u,b:l}},nt=function(){return c(o,u,l)},pt=function(bt){var Ct;return typeof bt=="object"?"r"in bt?(o=bt.r,u=bt.g,l=bt.b):"v"in bt&&m(bt.h,bt.s,bt.v):(Ct=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(bt))?(o=parseInt(Ct[1],10),u=parseInt(Ct[2],10),l=parseInt(Ct[3],10)):(Ct=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(bt))?(o=parseInt(Ct[1],16),u=parseInt(Ct[2],16),l=parseInt(Ct[3],16)):(Ct=/#([0-F])([0-F])([0-F])/gi.exec(bt))&&(o=parseInt(Ct[1]+Ct[1],16),u=parseInt(Ct[2]+Ct[2],16),l=parseInt(Ct[3]+Ct[3],16)),o=o<0?0:o>255?255:o,u=u<0?0:u>255?255:u,l=l<0?0:l>255?255:l,r};return e&&pt(e),r.toRgb=_,r.toHsv=nt,r.toHex=S,r.parse=pt,r},SN=function(e){var r=JSON.stringify(e);return Ye(r)?r.replace(/[\u0080-\uFFFF]/g,function(o){var u=o.charCodeAt(0).toString(16);return"\\u"+"0000".substring(u.length)+u}):r},XE={serialize:SN,parse:function(e){try{return JSON.parse(e)}catch(r){}}},E6={callbacks:{},count:0,send:function(e){var r=this,o=Oi.DOM,u=e.count!==void 0?e.count:r.count,l="tinymce_jsonp_"+u;r.callbacks[u]=function(c){o.remove(l),delete r.callbacks[u],e.callback(c)},o.add(o.doc.body,"script",{id:l,src:e.url,type:"text/javascript"}),r.count++}},dh=Ca(Ca({},vy),{send:function(e){var r,o=0,u=function(){!e.async||r.readyState===4||o++>1e4?(e.success&&o<1e4&&r.status===200?e.success.call(e.success_scope,""+r.responseText,r,e):e.error&&e.error.call(e.error_scope,o>1e4?"TIMED_OUT":"GENERAL",r,e),r=null):cs.setTimeout(u,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async!==!1,e.data=e.data||"",dh.fire("beforeInitialize",{settings:e}),r=new XMLHttpRequest,r.overrideMimeType&&r.overrideMimeType(e.content_type),r.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(r.withCredentials=!0),e.content_type&&r.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Zn.each(e.requestheaders,function(l){r.setRequestHeader(l.key,l.value)}),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r=dh.fire("beforeSend",{xhr:r,settings:e}).xhr,r.send(e.data),!e.async)return u();cs.setTimeout(u,10)}}),YE=Zn.extend,k6=function(){function e(r){this.settings=YE({},r),this.count=0}return e.sendRPC=function(r){return new e().send(r)},e.prototype.send=function(r){var o=r.error,u=r.success,l=YE(this.settings,r);l.success=function(c,m){c=XE.parse(c),typeof c=="undefined"&&(c={error:"JSON Parse error."}),c.error?o.call(l.error_scope||l.scope,c.error,m):u.call(l.success_scope||l.scope,c.result)},l.error=function(c,m){o&&o.call(l.error_scope||l.scope,c,m)},l.data=XE.serialize({id:r.id||"c"+this.count++,method:r.method,params:r.params}),l.content_type="application/json",dh.send(l)},e}(),A6=function(){return function(){var e={},r=[],o={getItem:function(u){var l=e[u];return l||null},setItem:function(u,l){r.push(u),e[u]=String(l)},key:function(u){return r[u]},removeItem:function(u){r=r.filter(function(l){return l===u}),delete e[u]},clear:function(){r=[],e={}},length:0};return Object.defineProperty(o,"length",{get:function(){return r.length},configurable:!1,enumerable:!1}),o}()},Xg;try{var QE="__storage_test__";Xg=window.localStorage,Xg.setItem(QE,QE),Xg.removeItem(QE)}catch(e){Xg=A6()}var T6=Xg,_6={geom:{Rect:w6},util:{Promise:Wu,Delay:cs,Tools:Zn,VK:qa,URI:ov,Class:CN,EventDispatcher:dy,Observable:vy,I18n:$s,XHR:dh,JSON:XE,JSONRequest:k6,JSONP:E6,LocalStorage:T6,Color:GE,ImageUploader:LI},dom:{EventUtils:Km,Sizzle:mi,DomQuery:bo,TreeWalker:vi,TextSeeker:Dw,DOMUtils:Oi,ScriptLoader:sd,RangeUtils:tg,Serializer:px,StyleSheetLoader:v2,ControlSelection:MC,BookmarkManager:Yv,Selection:$p,Event:Km.Event},html:{Styles:Lh,Entities:Yc,Node:dc,Schema:Hl,SaxParser:fx,DomParser:v1,Writer:JC,Serializer:Zv},Env:Ra,AddOnManager:al,Annotator:oA,Formatter:Ui,UndoManager:LO,EditorCommands:rN,WindowManager:yx,NotificationManager:CO,EditorObservable:fN,Shortcuts:by,Editor:yy,FocusManager:_A,EditorManager:yv,DOM:Oi.DOM,ScriptLoader:sd.ScriptLoader,PluginManager:bf,ThemeManager:iv,IconManager:C1,Resource:wN,trim:Zn.trim,isArray:Zn.isArray,is:Zn.is,toArray:Zn.toArray,makeMap:Zn.makeMap,each:Zn.each,map:Zn.map,grep:Zn.grep,inArray:Zn.inArray,extend:Zn.extend,create:Zn.create,walk:Zn.walk,createNS:Zn.createNS,resolve:Zn.resolve,explode:Zn.explode,_addCacheSuffix:Zn._addCacheSuffix,isOpera:Ra.opera,isWebKit:Ra.webkit,isIE:Ra.ie,isGecko:Ra.gecko,isMac:Ra.mac},xN=Zn.extend(yv,_6),O6=function(e){try{v.exports=e}catch(r){}},M6=function(e){window.tinymce=e,window.tinyMCE=e};M6(xN),O6(xN)})()})(tinymce$2);var tinymceExports=tinymce$2.exports;const tinymce$1=getDefaultExportFromCjs(tinymceExports);(function(){var v=function(n){var a=typeof n;return n===null?"null":a==="object"&&(Array.prototype.isPrototypeOf(n)||n.constructor&&n.constructor.name==="Array")?"array":a==="object"&&(String.prototype.isPrototypeOf(n)||n.constructor&&n.constructor.name==="String")?"string":a},y=function(n){return function(a){return v(a)===n}},C=function(n){return function(a){return typeof a===n}},A=function(n){return function(a){return n===a}},We=y("string"),Ge=y("object"),Xe=y("array"),Ve=A(null),P=C("boolean"),Te=A(void 0),j=function(n){return n==null},x=function(n){return!j(n)},qe=C("function"),Be=C("number"),De=function(n,a){if(Xe(n)){for(var i=0,s=n.length;i<s;++i)if(!a(n[i]))return!1;return!0}return!1},He=function(){},Ye=function(n){return function(){return n()}},st=function(n,a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return n(a.apply(null,i))}},rt=function(n,a){return function(i){return n(a(i))}},Ke=function(n){return function(){return n}},tt=function(n){return n},at=function(n,a){return n===a};function et(n){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];return function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];var d=a.concat(s);return n.apply(null,d)}}var Ot=function(n){return function(a){return!n(a)}},wt=function(n){return function(){throw new Error(n)}},xt=Ke(!1),it=Ke(!0),yt=tinymce.util.Tools.resolve("tinymce.ThemeManager"),ut=function(){return ut=Object.assign||function(a){for(var i,s=1,f=arguments.length;s<f;s++){i=arguments[s];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(a[d]=i[d])}return a},ut.apply(this,arguments)};function Et(n,a){var i={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&a.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,s=Object.getOwnPropertySymbols(n);f<s.length;f++)a.indexOf(s[f])<0&&Object.prototype.propertyIsEnumerable.call(n,s[f])&&(i[s[f]]=n[s[f]]);return i}function Ht(n,a,i){if(i||arguments.length===2)for(var s=0,f=a.length,d;s<f;s++)(d||!(s in a))&&(d||(d=Array.prototype.slice.call(a,0,s)),d[s]=a[s]);return n.concat(d||Array.prototype.slice.call(a))}var an=function(){return Mt},Mt=function(){var n=function(s){return s()},a=tt,i={fold:function(s,f){return s()},isSome:xt,isNone:it,getOr:a,getOrThunk:n,getOrDie:function(s){throw new Error(s||"error: getOrDie called on none.")},getOrNull:Ke(null),getOrUndefined:Ke(void 0),or:a,orThunk:n,map:an,each:He,bind:an,exists:xt,forall:it,filter:function(){return an()},toArray:function(){return[]},toString:Ke("none()")};return i}(),vn=function(n){var a=Ke(n),i=function(){return f},s=function(d){return d(n)},f={fold:function(d,b){return b(n)},isSome:it,isNone:xt,getOr:a,getOrThunk:a,getOrDie:a,getOrNull:a,getOrUndefined:a,or:i,orThunk:i,map:function(d){return vn(d(n))},each:function(d){d(n)},bind:s,exists:s,forall:s,filter:function(d){return d(n)?f:Mt},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return f},Wn=function(n){return n==null?Mt:vn(n)},$e={some:vn,none:an,from:Wn},Dt=Array.prototype.slice,vt=Array.prototype.indexOf,nn=Array.prototype.push,_t=function(n,a){return vt.call(n,a)},Nt=function(n,a){var i=_t(n,a);return i===-1?$e.none():$e.some(i)},ln=function(n,a){return _t(n,a)>-1},on=function(n,a){for(var i=0,s=n.length;i<s;i++){var f=n[i];if(a(f,i))return!0}return!1},dt=function(n,a){for(var i=[],s=0;s<n;s++)i.push(a(s));return i},ur=function(n,a){for(var i=[],s=0;s<n.length;s+=a){var f=Dt.call(n,s,s+a);i.push(f)}return i},dn=function(n,a){for(var i=n.length,s=new Array(i),f=0;f<i;f++){var d=n[f];s[f]=a(d,f)}return s},en=function(n,a){for(var i=0,s=n.length;i<s;i++){var f=n[i];a(f,i)}},Nn=function(n,a){for(var i=n.length-1;i>=0;i--){var s=n[i];a(s,i)}},fn=function(n,a){for(var i=[],s=[],f=0,d=n.length;f<d;f++){var b=n[f],O=a(b,f)?i:s;O.push(b)}return{pass:i,fail:s}},cn=function(n,a){for(var i=[],s=0,f=n.length;s<f;s++){var d=n[s];a(d,s)&&i.push(d)}return i},hn=function(n,a,i){return Nn(n,function(s,f){i=a(i,s,f)}),i},er=function(n,a,i){return en(n,function(s,f){i=a(i,s,f)}),i},Fn=function(n,a,i){for(var s=0,f=n.length;s<f;s++){var d=n[s];if(a(d,s))return $e.some(d);if(i(d,s))break}return $e.none()},Gn=function(n,a){return Fn(n,a,xt)},va=function(n,a){for(var i=0,s=n.length;i<s;i++){var f=n[i];if(a(f,i))return $e.some(i)}return $e.none()},tn=function(n){for(var a=[],i=0,s=n.length;i<s;++i){if(!Xe(n[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+n);nn.apply(a,n[i])}return a},Mn=function(n,a){return tn(dn(n,a))},Rr=function(n,a){for(var i=0,s=n.length;i<s;++i){var f=n[i];if(a(f,i)!==!0)return!1}return!0},Yr=function(n){var a=Dt.call(n,0);return a.reverse(),a},oa=function(n,a){return cn(n,function(i){return!ln(a,i)})},pa=function(n,a){for(var i={},s=0,f=n.length;s<f;s++){var d=n[s];i[String(d)]=a(d,s)}return i},Ga=function(n){return[n]},fo=function(n,a){var i=Dt.call(n,0);return i.sort(a),i},oo=function(n,a){return a>=0&&a<n.length?$e.some(n[a]):$e.none()},fr=function(n){return oo(n,0)},sr=function(n){return oo(n,n.length-1)},mr=qe(Array.from)?Array.from:function(n){return Dt.call(n)},Tn=function(n,a){for(var i=0;i<n.length;i++){var s=a(n[i],i);if(s.isSome())return s}return $e.none()},Rn=Object.keys,dr=Object.hasOwnProperty,Pr=function(n,a){for(var i=Rn(n),s=0,f=i.length;s<f;s++){var d=i[s],b=n[d];a(b,d)}},br=function(n,a){return Cn(n,function(i,s){return{k:s,v:a(i,s)}})},Cn=function(n,a){var i={};return Pr(n,function(s,f){var d=a(s,f);i[d.k]=d.v}),i},cr=function(n){return function(a,i){n[i]=a}},zr=function(n,a,i,s){var f={};return Pr(n,function(d,b){(a(d,b)?i:s)(d,b)}),f},Nr=function(n,a){var i={};return zr(n,a,cr(i),He),i},Ar=function(n,a){var i=[];return Pr(n,function(s,f){i.push(a(s,f))}),i},sn=function(n,a){for(var i=Rn(n),s=0,f=i.length;s<f;s++){var d=i[s],b=n[d];if(a(b,d,n))return $e.some(b)}return $e.none()},Un=function(n){return Ar(n,tt)},jn=function(n,a){return pr(n,a)?$e.from(n[a]):$e.none()},pr=function(n,a){return dr.call(n,a)},aa=function(n,a){return pr(n,a)&&n[a]!==void 0&&n[a]!==null},Ua=function(n,a,i){return i===void 0&&(i=at),n.exists(function(s){return i(s,a)})},jo=function(n,a,i){return i===void 0&&(i=at),Yo(n,a,i).getOr(n.isNone()&&a.isNone())},Xa=function(n){for(var a=[],i=function(f){a.push(f)},s=0;s<n.length;s++)n[s].each(i);return a},Ka=function(n){for(var a=[],i=0;i<n.length;i++){var s=n[i];if(s.isSome())a.push(s.getOrDie());else return $e.none()}return $e.some(a)},Yo=function(n,a,i){return n.isSome()&&a.isSome()?$e.some(i(n.getOrDie(),a.getOrDie())):$e.none()},Io=function(n,a,i,s){return n.isSome()&&a.isSome()&&i.isSome()?$e.some(s(n.getOrDie(),a.getOrDie(),i.getOrDie())):$e.none()},pi=function(n,a){return n!=null?$e.some(a(n)):$e.none()},oi=function(n,a){return n?$e.some(a):$e.none()},Si=function(n,a){return n+a},Ii=function(n,a){return n.substring(a)},xi=function(n,a,i){return a===""||n.length>=a.length&&n.substr(i,i+a.length)===a},Ei=function(n,a){return ji(n,a)?Ii(n,a.length):n},Fo=function(n,a){return Ca(n,a)?n:Si(n,a)},wo=function(n,a){return n.indexOf(a)!==-1},ji=function(n,a){return xi(n,a,0)},Ca=function(n,a){return xi(n,a,n.length-a.length)},Hu=function(n){return function(a){return a.replace(n,"")}},Fi=Hu(/^\s+|\s+$/g),lu=function(n){return n.length>0},Xu=function(n){return!lu(n)},nu=function(n){return n.style!==void 0&&qe(n.style.getPropertyValue)},hu=function(n,a){var i=a||document,s=i.createElement("div");if(s.innerHTML=n,!s.hasChildNodes()||s.childNodes.length>1)throw new Error("HTML must have a single root node");return qt(s.childNodes[0])},Yu=function(n,a){var i=a||document,s=i.createElement(n);return qt(s)},Ss=function(n,a){var i=a||document,s=i.createTextNode(n);return qt(s)},qt=function(n){if(n==null)throw new Error("Node cannot be null or undefined");return{dom:n}},xn=function(n,a,i){return $e.from(n.dom.elementFromPoint(a,i)).map(qt)},Gt={fromHtml:hu,fromTag:Yu,fromText:Ss,fromDom:qt,fromPoint:xn};typeof window!="undefined"||Function("return this;")();var Pn=9,Br=11,ta=1,$t=3,Zt=function(n){var a=n.dom.nodeName;return a.toLowerCase()},In=function(n){return n.dom.nodeType},Qn=function(n){return function(a){return In(a)===n}},mt=Qn(ta),Rt=Qn($t),Jt=Qn(Pn),gn=Qn(Br),Dn=function(n){var a=!1,i;return function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];return a||(a=!0,i=n.apply(null,s)),i}},Bn=function(n,a,i,s){var f=n.isiOS()&&/ipad/i.test(i)===!0,d=n.isiOS()&&!f,b=n.isiOS()||n.isAndroid(),O=b||s("(pointer:coarse)"),Re=f||!d&&b&&s("(min-device-width:768px)"),Qe=d||b&&!Re,ot=a.isSafari()&&n.isiOS()&&/safari/i.test(i)===!1,ct=!Qe&&!Re&&!ot;return{isiPad:Ke(f),isiPhone:Ke(d),isTablet:Ke(Re),isPhone:Ke(Qe),isTouch:Ke(O),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:Ke(ot),isDesktop:Ke(ct)}},rr=function(n,a){for(var i=0;i<n.length;i++){var s=n[i];if(s.test(a))return s}},Qr=function(n,a){var i=rr(n,a);if(!i)return{major:0,minor:0};var s=function(f){return Number(a.replace(i,"$"+f))};return Ha(s(1),s(2))},La=function(n,a){var i=String(a).toLowerCase();return n.length===0?Fa():Qr(n,i)},Fa=function(){return Ha(0,0)},Ha=function(n,a){return{major:n,minor:a}},Ya={nu:Ha,detect:La,unknown:Fa},Lo=function(n,a){return Tn(a.brands,function(i){var s=i.brand.toLowerCase();return Gn(n,function(f){var d;return s===((d=f.brand)===null||d===void 0?void 0:d.toLowerCase())}).map(function(f){return{current:f.name,version:Ya.nu(parseInt(i.version,10),0)}})})},ki=function(n,a){var i=String(a).toLowerCase();return Gn(n,function(s){return s.search(i)})},Du=function(n,a){return ki(n,a).map(function(i){var s=Ya.detect(i.versionRegexes,a);return{current:i.name,version:s}})},is=function(n,a){return ki(n,a).map(function(i){var s=Ya.detect(i.versionRegexes,a);return{current:i.name,version:s}})},Qu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ai=function(n){return function(a){return wo(a,n)}},dl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return wo(n,"edge/")&&wo(n,"chrome")&&wo(n,"safari")&&wo(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Qu],search:function(n){return wo(n,"chrome")&&!wo(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return wo(n,"msie")||wo(n,"trident")}},{name:"Opera",versionRegexes:[Qu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ai("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ai("firefox")},{name:"Safari",versionRegexes:[Qu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(wo(n,"safari")||wo(n,"mobile/"))&&wo(n,"applewebkit")}}],Ls=[{name:"Windows",search:Ai("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return wo(n,"iphone")||wo(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ai("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ai("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ai("linux"),versionRegexes:[]},{name:"Solaris",search:Ai("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ai("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ai("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],zu={browsers:Ke(dl),oses:Ke(Ls)},Wi="Edge",Rs="Chrome",xs="IE",Nu="Opera",Bs="Firefox",Ju="Safari",us=function(){return Ql({current:void 0,version:Ya.unknown()})},Ql=function(n){var a=n.current,i=n.version,s=function(f){return function(){return a===f}};return{current:a,version:i,isEdge:s(Wi),isChrome:s(Rs),isIE:s(xs),isOpera:s(Nu),isFirefox:s(Bs),isSafari:s(Ju)}},vl={unknown:us,nu:Ql,edge:Ke(Wi),chrome:Ke(Rs),ie:Ke(xs),opera:Ke(Nu),firefox:Ke(Bs),safari:Ke(Ju)},Dl="Windows",Tt="iOS",pn="Android",_n="Linux",or="OSX",Mr="Solaris",Ea="FreeBSD",Ro="ChromeOS",Qo=function(){return so({current:void 0,version:Ya.unknown()})},so=function(n){var a=n.current,i=n.version,s=function(f){return function(){return a===f}};return{current:a,version:i,isWindows:s(Dl),isiOS:s(Tt),isAndroid:s(pn),isOSX:s(or),isLinux:s(_n),isSolaris:s(Mr),isFreeBSD:s(Ea),isChromeOS:s(Ro)}},ri={unknown:Qo,nu:so,windows:Ke(Dl),ios:Ke(Tt),android:Ke(pn),linux:Ke(_n),osx:Ke(or),solaris:Ke(Mr),freebsd:Ke(Ea),chromeos:Ke(Ro)},ci=function(n,a,i){var s=zu.browsers(),f=zu.oses(),d=a.bind(function(Re){return Lo(s,Re)}).orThunk(function(){return Du(s,n)}).fold(vl.unknown,vl.nu),b=is(f,n).fold(ri.unknown,ri.nu),O=Bn(b,d,n,i);return{browser:d,os:b,deviceType:O}},Ps={detect:ci},bc=function(n){return window.matchMedia(n).matches},yc=Dn(function(){return Ps.detect(navigator.userAgent,$e.from(navigator.userAgentData),bc)}),Ra=function(){return yc()},Zs=function(n,a,i){return(n.compareDocumentPosition(a)&i)!==0},zc=function(n,a){return Zs(n,a,Node.DOCUMENT_POSITION_CONTAINED_BY)},Es=function(n,a){var i=n.dom;if(i.nodeType!==ta)return!1;var s=i;if(s.matches!==void 0)return s.matches(a);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(a);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(a);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(a);throw new Error("Browser lacks native selectors")},$c=function(n){return n.nodeType!==ta&&n.nodeType!==Pn&&n.nodeType!==Br||n.childElementCount===0},td=function(n,a){var i=a===void 0?document:a.dom;return $c(i)?[]:dn(i.querySelectorAll(n),Gt.fromDom)},Mf=function(n,a){var i=a===void 0?document:a.dom;return $c(i)?$e.none():$e.from(i.querySelector(n)).map(Gt.fromDom)},bi=function(n,a){return n.dom===a.dom},Jl=function(n,a){var i=n.dom,s=a.dom;return i===s?!1:i.contains(s)},nd=function(n,a){return zc(n.dom,a.dom)},ss=function(n,a){return Ra().browser.isIE()?nd(n,a):Jl(n,a)},$u=function(n){return Gt.fromDom(n.dom.ownerDocument)},wc=function(n){return Jt(n)?n:$u(n)},Zn=function(n){return Gt.fromDom(wc(n).dom.documentElement)},Zl=function(n){return Gt.fromDom(wc(n).dom.defaultView)},ru=function(n){return $e.from(n.dom.parentNode).map(Gt.fromDom)},Vc=function(n){return ru(n)},ml=function(n){return $e.from(n.dom.offsetParent).map(Gt.fromDom)},ec=function(n){return $e.from(n.dom.nextSibling).map(Gt.fromDom)},lt=function(n){return dn(n.dom.childNodes,Gt.fromDom)},Je=function(n,a){var i=n.dom.childNodes;return $e.from(i[a]).map(Gt.fromDom)},ht=function(n){return Je(n,0)},Lt=function(n,a){return{element:n,offset:a}},un=function(n,a){var i=lt(n);return i.length>0&&a<i.length?Lt(i[a],0):Lt(n,a)},Hn=function(n){return gn(n)&&x(n.dom.host)},Er=qe(Element.prototype.attachShadow)&&qe(Node.prototype.getRootNode),Aa=Ke(Er),ja=Er?function(n){return Gt.fromDom(n.dom.getRootNode())}:wc,Kr=function(n){return Hn(n)?n:Gt.fromDom(wc(n).dom.body)},Sa=function(n){return ro(n).isSome()},ro=function(n){var a=ja(n);return Hn(a)?$e.some(a):$e.none()},Co=function(n){return Gt.fromDom(n.dom.host)},Wa=function(n){if(Aa()&&x(n.target)){var a=Gt.fromDom(n.target);if(mt(a)&&fi(a)&&n.composed&&n.composedPath){var i=n.composedPath();if(i)return fr(i)}}return $e.from(n.target)},fi=function(n){return x(n.dom.shadowRoot)},Ja=function(n){var a=Rt(n)?n.dom.parentNode:n.dom;if(a==null||a.ownerDocument===null)return!1;var i=a.ownerDocument;return ro(Gt.fromDom(a)).fold(function(){return i.body.contains(a)},rt(Ja,Co))},ei=function(){return Jo(Gt.fromDom(document))},Jo=function(n){var a=n.dom.body;if(a==null)throw new Error("Body is not available yet");return Gt.fromDom(a)},Vu=function(n,a,i){if(We(i)||P(i)||Be(i))n.setAttribute(a,i+"");else throw new Error("Attribute value was not simple")},ho=function(n,a,i){Vu(n.dom,a,i)},Ed=function(n,a){var i=n.dom;Pr(a,function(s,f){Vu(i,f,s)})},Ti=function(n,a){var i=n.dom.getAttribute(a);return i===null?void 0:i},qi=function(n,a){return $e.from(Ti(n,a))},Mm=function(n,a){var i=n.dom;return i&&i.hasAttribute?i.hasAttribute(a):!1},gu=function(n,a){n.dom.removeAttribute(a)},Av=function(n,a,i){if(!We(i))throw new Error("CSS value must be a string: "+i);nu(n)&&n.style.setProperty(a,i)},kd=function(n,a){nu(n)&&n.style.removeProperty(a)},Qa=function(n,a,i){var s=n.dom;Av(s,a,i)},tc=function(n,a){var i=n.dom;Pr(a,function(s,f){Av(i,f,s)})},Cc=function(n,a){var i=n.dom;Pr(a,function(s,f){s.fold(function(){kd(i,f)},function(d){Av(i,f,d)})})},Hi=function(n,a){var i=n.dom,s=window.getComputedStyle(i),f=s.getPropertyValue(a);return f===""&&!Ja(n)?Dm(i,a):f},Dm=function(n,a){return nu(n)?n.style.getPropertyValue(a):""},bu=function(n,a){var i=n.dom,s=Dm(i,a);return $e.from(s).filter(function(f){return f.length>0})},Uc=function(n){var a={},i=n.dom;if(nu(i))for(var s=0;s<i.style.length;s++){var f=i.style.item(s);a[f]=i.style[f]}return a},p=function(n,a,i){var s=Gt.fromTag(n);Qa(s,a,i);var f=bu(s,a);return f.isSome()},g=function(n,a){var i=n.dom;kd(i,a),Ua(qi(n,"style").map(Fi),"")&&gu(n,"style")},w=function(n){return n.dom.offsetWidth},I=function(n,a){var i=function(O,Re){if(!Be(Re)&&!Re.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+Re);var Qe=O.dom;nu(Qe)&&(Qe.style[n]=Re+"px")},s=function(O){var Re=a(O);if(Re<=0||Re===null){var Qe=Hi(O,n);return parseFloat(Qe)||0}return Re},f=s,d=function(O,Re){return er(Re,function(Qe,ot){var ct=Hi(O,ot),St=ct===void 0?0:parseInt(ct,10);return isNaN(St)?Qe:Qe+St},0)},b=function(O,Re,Qe){var ot=d(O,Qe),ct=Re>ot?Re-ot:0;return ct};return{set:i,get:s,getOuter:f,aggregate:d,max:b}},k=I("height",function(n){var a=n.dom;return Ja(n)?a.getBoundingClientRect().height:a.offsetHeight}),Ue=function(n){return k.get(n)},ft=function(n){return k.getOuter(n)},Bt=function(n,a){var i=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],s=k.max(n,a,i);Qa(n,"max-height",s+"px")},Xt=function(n,a){var i=function(s,f){return Xt(n+s,a+f)};return{left:n,top:a,translate:i}},Ut=Xt,Wt=function(n){var a=n.getBoundingClientRect();return Ut(a.left,a.top)},tr=function(n,a){return n!==void 0?n:a!==void 0?a:0},Vr=function(n){var a=n.dom.ownerDocument,i=a.body,s=a.defaultView,f=a.documentElement;if(i===n.dom)return Ut(i.offsetLeft,i.offsetTop);var d=tr(s==null?void 0:s.pageYOffset,f.scrollTop),b=tr(s==null?void 0:s.pageXOffset,f.scrollLeft),O=tr(f.clientTop,i.clientTop),Re=tr(f.clientLeft,i.clientLeft);return ba(n).translate(b-Re,d-O)},ba=function(n){var a=n.dom,i=a.ownerDocument,s=i.body;return s===a?Ut(s.offsetLeft,s.offsetTop):Ja(n)?Wt(a):Ut(0,0)},Vn=I("width",function(n){return n.dom.offsetWidth}),ha=function(n,a){return Vn.set(n,a)},na=function(n){return Vn.get(n)},Gr=function(n){return Vn.getOuter(n)},sa=function(n,a){var i=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],s=Vn.max(n,a,i);Qa(n,"max-width",s+"px")},la=function(n,a,i,s,f,d,b){return{target:n,x:a,y:i,stop:s,prevent:f,kill:d,raw:b}},$r=function(n){var a=Gt.fromDom(Wa(n).getOr(n.target)),i=function(){return n.stopPropagation()},s=function(){return n.preventDefault()},f=st(s,i);return la(a,n.clientX,n.clientY,i,s,f,n)},xa=function(n,a){return function(i){n(i)&&a($r(i))}},vo=function(n,a,i,s,f){var d=xa(i,s);return n.dom.addEventListener(a,d,f),{unbind:et(co,n,a,d,f)}},io=function(n,a,i,s){return vo(n,a,i,s,!1)},lo=function(n,a,i,s){return vo(n,a,i,s,!0)},co=function(n,a,i,s){n.dom.removeEventListener(a,i,s)},ca=function(n,a){var i=ru(n);i.each(function(s){s.dom.insertBefore(a.dom,n.dom)})},To=function(n,a){var i=ec(n);i.fold(function(){var s=ru(n);s.each(function(f){Wo(f,a)})},function(s){ca(s,a)})},di=function(n,a){var i=ht(n);i.fold(function(){Wo(n,a)},function(s){n.dom.insertBefore(a.dom,s.dom)})},Wo=function(n,a){n.dom.appendChild(a.dom)},ls=function(n,a,i){Je(n,i).fold(function(){Wo(n,a)},function(s){ca(s,a)})},ks=function(n,a){en(a,function(i){ca(n,i)})},yu=function(n,a){en(a,function(i){Wo(n,i)})},Ki=function(n){n.dom.textContent="",en(lt(n),function(a){Uu(a)})},Uu=function(n){var a=n.dom;a.parentNode!==null&&a.parentNode.removeChild(a)},Df=function(n){var a=lt(n);a.length>0&&ks(n,a),Uu(n)},Ji=function(n){var a=n!==void 0?n.dom:document,i=a.body.scrollLeft||a.documentElement.scrollLeft,s=a.body.scrollTop||a.documentElement.scrollTop;return Ut(i,s)},Sc=function(n,a,i){var s=i!==void 0?i.dom:document,f=s.defaultView;f&&f.scrollTo(n,a)},el=function(n){var a=n===void 0?window:n;return Ra().browser.isFirefox()?$e.none():$e.from(a.visualViewport)},Nl=function(n,a,i,s){return{x:n,y:a,width:i,height:s,right:n+i,bottom:a+s}},Ll=function(n){var a=n===void 0?window:n,i=a.document,s=Ji(Gt.fromDom(i));return el(a).fold(function(){var f=a.document.documentElement,d=f.clientWidth,b=f.clientHeight;return Nl(s.left,s.top,d,b)},function(f){return Nl(Math.max(f.pageLeft,s.left),Math.max(f.pageTop,s.top),f.width,f.height)})},jc=function(n,a){var i=n.view(a);return i.fold(Ke([]),function(s){var f=n.owner(s),d=jc(n,f);return[s].concat(d)})},Ta=function(n,a){var i=a.owner(n),s=jc(a,i);return $e.some(s)},ma=function(n){var a,i=n.dom===document?$e.none():$e.from((a=n.dom.defaultView)===null||a===void 0?void 0:a.frameElement);return i.map(Gt.fromDom)},Lu=function(n){return $u(n)},tl=Object.freeze({__proto__:null,view:ma,owner:Lu}),rd=function(n){var a=Gt.fromDom(document),i=Ji(a),s=Ta(n,tl);return s.fold(et(Vr,n),function(f){var d=ba(n),b=hn(f,function(O,Re){var Qe=ba(Re);return{left:O.left+Qe.left,top:O.top+Qe.top}},{left:0,top:0});return Ut(b.left+d.left+i.left,b.top+d.top+i.top)})},Nf=function(n,a,i){return{point:n,width:a,height:i}},xc=function(n,a,i,s){return{x:n,y:a,width:i,height:s}},Zi=function(n,a,i,s){return{x:n,y:a,width:i,height:s,right:n+i,bottom:a+s}},au=function(n){var a=Vr(n),i=Gr(n),s=ft(n);return Zi(a.left,a.top,i,s)},Rl=function(n){var a=rd(n),i=Gr(n),s=ft(n);return Zi(a.left,a.top,i,s)},ju=function(){return Ll(window)},ia=function(n){var a=function(ct){return ia(n)},i=function(ct){return ia(n)},s=function(ct){return ia(ct(n))},f=function(ct){return ia(n)},d=function(ct){ct(n)},b=function(ct){return ct(n)},O=function(ct,St){return St(n)},Re=function(ct){return ct(n)},Qe=function(ct){return ct(n)},ot=function(){return $e.some(n)};return{isValue:it,isError:xt,getOr:Ke(n),getOrThunk:Ke(n),getOrDie:Ke(n),or:a,orThunk:i,fold:O,map:s,mapError:f,each:d,bind:b,exists:Re,forall:Qe,toOptional:ot}},ad=function(n){var a=function(Qe){return Qe()},i=function(){return wt(String(n))()},s=tt,f=function(Qe){return Qe()},d=function(Qe){return ad(n)},b=function(Qe){return ad(Qe(n))},O=function(Qe){return ad(n)},Re=function(Qe,ot){return Qe(n)};return{isValue:xt,isError:it,getOr:tt,getOrThunk:a,getOrDie:i,or:s,orThunk:f,fold:Re,map:d,mapError:b,each:He,bind:O,exists:xt,forall:it,toOptional:$e.none}},bh=function(n,a){return n.fold(function(){return ad(a)},ia)},So={value:ia,error:ad,fromOption:bh},ui;(function(n){n[n.Error=0]="Error",n[n.Value=1]="Value"})(ui||(ui={}));var yh=function(n,a,i){return n.stype===ui.Error?a(n.serror):i(n.svalue)},Ec=function(n){var a=[],i=[];return en(n,function(s){yh(s,function(f){return i.push(f)},function(f){return a.push(f)})}),{values:a,errors:i}},Mi=function(n,a){return n.stype===ui.Error?{stype:ui.Error,serror:a(n.serror)}:n},Nm=function(n,a){return n.stype===ui.Value?{stype:ui.Value,svalue:a(n.svalue)}:n},nl=function(n,a){return n.stype===ui.Value?a(n.svalue):n},Tv=function(n,a){return n.stype===ui.Error?a(n.serror):n},ab=function(n){return{stype:ui.Value,svalue:n}},As=function(n){return{stype:ui.Error,serror:n}},Ny=function(n){return yh(n,So.error,So.value)},Ly=function(n){return n.fold(As,ab)},Li={fromResult:Ly,toResult:Ny,svalue:ab,partition:Ec,serror:As,bind:nl,bindError:Tv,map:Nm,mapError:Mi,fold:yh},wh=function(n,a,i,s){return{tag:"field",key:n,newKey:a,presence:i,prop:s}},Ze=function(n,a){return{tag:"custom",newKey:n,instantiator:a}},gt=function(n,a,i){switch(n.tag){case"field":return a(n.key,n.newKey,n.presence,n.prop);case"custom":return i(n.newKey,n.instantiator)}},kt=function(n,a){return a},Kt=function(n,a){var i=Ge(n)&&Ge(a);return i?nr(n,a):a},An=function(n){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(a.length===0)throw new Error("Can't merge zero objects");for(var s={},f=0;f<a.length;f++){var d=a[f];for(var b in d)pr(d,b)&&(s[b]=n(s[b],d[b]))}return s}},nr=An(Kt),Ma=An(kt),ao=function(){return{tag:"required",process:{}}},Po=function(n){return{tag:"defaultedThunk",process:n}},_o=function(n){return Po(Ke(n))},_i=function(){return{tag:"option",process:{}}},Ts=function(n){return{tag:"mergeWithThunk",process:n}},ob=function(n){return Ts(Ke(n))},WN=function(n,a){return n.length>0?Li.svalue(nr(a,Ma.apply(void 0,n))):Li.svalue(a)},o2=function(n){return st(Li.serror,tn)(n)},i2=function(n,a){var i=Li.partition(n);return i.errors.length>0?o2(i.errors):WN(i.values,a)},qN=function(n){var a=Li.partition(n);return a.errors.length>0?o2(a.errors):Li.svalue(a.values)},Ry={consolidateObj:i2,consolidateArr:qN},By=function(n){return Ge(n)&&Rn(n).length>100?" removed due to size":JSON.stringify(n,null,2)},u2=function(n){var a=n.length>10?n.slice(0,10).concat([{path:[],getErrorInfo:Ke("... (only showing first ten failures)")}]):n;return dn(a,function(i){return"Failed path: ("+i.path.join(" > ")+`)
`+i.getErrorInfo()})},Lm=function(n,a){return Li.serror([{path:n,getErrorInfo:a}])},Py=function(n,a,i){return Lm(n,function(){return'Could not find valid *required* value for "'+a+'" in '+By(i)})},Iy=function(n,a){return Lm(n,function(){return'Choice schema did not contain choice key: "'+a+'"'})},KN=function(n,a,i){return Lm(n,function(){return'The chosen schema: "'+i+'" did not exist in branches: '+By(a)})},GN=function(n,a){return Lm(n,function(){return"There are unsupported fields: ["+a.join(", ")+"] specified"})},XN=function(n,a){return Lm(n,Ke(a))},Wc=function(n){var a=function(s,f){return Li.bindError(n(f),function(d){return XN(s,d)})},i=Ke("val");return{extract:a,toString:i}},s2=Wc(Li.svalue),YN=function(n,a,i,s){return jn(a,i).fold(function(){return Py(n,i,a)},s)},Fy=function(n,a,i,s){var f=jn(n,a).getOrThunk(function(){return i(n)});return s(f)},QN=function(n,a,i){return i(jn(n,a))},JN=function(n,a,i,s){var f=jn(n,a).map(function(d){return d===!0?i(n):d});return s(f)},Rm=function(n,a,i,s,f){var d=function(O){return f.extract(a.concat([s]),O)},b=function(O){return O.fold(function(){return Li.svalue($e.none())},function(Re){var Qe=f.extract(a.concat([s]),Re);return Li.map(Qe,$e.some)})};switch(n.tag){case"required":return YN(a,i,s,d);case"defaultedThunk":return Fy(i,s,n.process,d);case"option":return QN(i,s,b);case"defaultedOptionThunk":return JN(i,s,n.process,b);case"mergeWithThunk":return Fy(i,s,Ke({}),function(O){var Re=nr(n.process(i),O);return d(Re)})}},Ch=function(n,a,i){for(var s={},f=[],d=0,b=i;d<b.length;d++){var O=b[d];gt(O,function(Re,Qe,ot,ct){var St=Rm(ot,n,a,Re,ct);Li.fold(St,function(At){f.push.apply(f,At)},function(At){s[Qe]=At})},function(Re,Qe){s[Re]=Qe(a)})}return f.length>0?Li.serror(f):Li.svalue(s)},l2=function(n){var a=function(s,f){return n().extract(s,f)},i=function(){return n().toString()};return{extract:a,toString:i}},c2=function(n){return Rn(Nr(n,x))},Bl=function(n){var a=Ba(n),i=hn(n,function(f,d){return gt(d,function(b){var O;return nr(f,(O={},O[b]=!0,O))},Ke(f))},{}),s=function(f,d){var b=P(d)?[]:c2(d),O=cn(b,function(Re){return!aa(i,Re)});return O.length===0?a.extract(f,d):GN(f,O)};return{extract:s,toString:a.toString}},Ba=function(n){var a=function(s,f){return Ch(s,f,n)},i=function(){var s=dn(n,function(f){return gt(f,function(d,b,O,Re){return d+" -> "+Re.toString()},function(d,b){return"state("+d+")"})});return`obj{
`+s.join(`
`)+"}"};return{extract:a,toString:i}},od=function(n){var a=function(s,f){var d=dn(f,function(b,O){return n.extract(s.concat(["["+O+"]"]),b)});return Ry.consolidateArr(d)},i=function(){return"array("+n.toString()+")"};return{extract:a,toString:i}},Hy=function(n){var a=function(s,f){for(var d=[],b=0,O=n;b<O.length;b++){var Re=O[b],Qe=Re.extract(s,f);if(Qe.stype===ui.Value)return Qe;d.push(Qe)}return Ry.consolidateArr(d)},i=function(){return"oneOf("+dn(n,function(s){return s.toString()}).join(", ")+")"};return{extract:a,toString:i}},Sh=function(n,a){var i=function(d,b){return od(Wc(n)).extract(d,b)},s=function(d,b){var O=Rn(b),Re=i(d,O);return Li.bind(Re,function(Qe){var ot=dn(Qe,function(ct){return wh(ct,ct,ao(),a)});return Ba(ot).extract(d,b)})},f=function(){return"setOf("+a.toString()+")"};return{extract:s,toString:f}},ib=function(n,a){var i=Dn(a),s=function(d,b){return i().extract(d,b)},f=function(){return i().toString()};return{extract:s,toString:f}},zy=st(od,Ba),qc=Ke(s2),_v=function(n,a){return Wc(function(i){var s=typeof i;return n(i)?Li.svalue(i):Li.serror("Expected type: "+a+" but got: "+s)})},Bm=_v(Be,"number"),ou=_v(We,"string"),Wu=_v(P,"boolean"),xh=_v(qe,"function"),f2=function(n){if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every(function(a){return f2(n[a])});default:return!1}},$y=Wc(function(n){return f2(n)?Li.svalue(n):Li.serror("Expected value to be acceptable for sending via postMessage")}),d2=function(n,a,i,s){var f=jn(i,s);return f.fold(function(){return KN(n,i,s)},function(d){return d.extract(n.concat(["branch: "+s]),a)})},ub=function(n,a){var i=function(f,d){var b=jn(d,n);return b.fold(function(){return Iy(f,n)},function(O){return d2(f,d,a,O)})},s=function(){return"chooseOn("+n+"). Possible values: "+Rn(a)};return{extract:i,toString:s}},ZN=function(){return od(s2)},Pm=function(n){return Wc(function(a){return n(a).fold(Li.serror,Li.svalue)})},cs=function(n,a){return Sh(function(i){return Li.fromResult(n(i))},a)},v2=function(n,a,i){var s=a.extract([n],i);return Li.mapError(s,function(f){return{input:i,errors:f}})},zi=function(n,a,i){return Li.toResult(v2(n,a,i))},Kc=function(n){return n.fold(function(a){throw new Error(Im(a))},tt)},vi=function(n,a,i){return Kc(zi(n,a,i))},Im=function(n){return`Errors: 
`+u2(n.errors).join(`
`)+`

Input object: `+By(n.input)},nc=function(n,a){return ub(n,br(a,Ba))},eL=function(n,a){return ib(n,a)},Ru=wh,rl=Ze,m2=function(n){return Pm(function(a){return ln(n,a)?So.value(a):So.error('Unsupported value: "'+a+'", choose one of "'+n.join(", ")+'".')})},yr=function(n){return Ru(n,n,ao(),qc())},pl=function(n,a){return Ru(n,n,ao(),a)},Ad=function(n){return pl(n,Bm)},Za=function(n){return pl(n,ou)},rc=function(n,a){return Ru(n,n,ao(),m2(a))},tL=function(n){return pl(n,Wu)},_s=function(n){return pl(n,xh)},Fm=function(n,a){return Ru(n,n,_i(),Wc(function(i){return Li.serror("The field: "+n+" is forbidden. "+a)}))},id=function(n,a){return Ru(n,n,ao(),Ba(a))},sb=function(n,a){return Ru(n,n,ao(),zy(a))},Is=function(n,a){return Ru(n,n,ao(),od(a))},ti=function(n){return Ru(n,n,_i(),qc())},Gc=function(n,a){return Ru(n,n,_i(),a)},Eh=function(n){return Gc(n,Bm)},yi=function(n){return Gc(n,ou)},Ov=function(n){return Gc(n,xh)},hl=function(n,a){return Gc(n,od(a))},Pl=function(n,a){return Gc(n,Ba(a))},nL=function(n,a){return Gc(n,Bl(a))},En=function(n,a){return Ru(n,n,_o(a),qc())},gl=function(n,a,i){return Ru(n,n,_o(a),i)},bl=function(n,a){return gl(n,a,Bm)},Hm=function(n,a){return gl(n,a,ou)},ac=function(n,a,i){return gl(n,a,m2(i))},$i=function(n,a){return gl(n,a,Wu)},hi=function(n,a){return gl(n,a,xh)},oc=function(n,a){return gl(n,a,$y)},kh=function(n,a,i){return gl(n,a,od(i))},Vy=function(n,a,i){return gl(n,a,Ba(i))},Va=function(n){var a=n,i=function(){return a},s=function(f){a=f};return{get:i,set:s}},Uy=function(n){if(!Xe(n))throw new Error("cases must be an array");if(n.length===0)throw new Error("there must be at least one case");var a=[],i={};return en(n,function(s,f){var d=Rn(s);if(d.length!==1)throw new Error("one and only one name per case");var b=d[0],O=s[b];if(i[b]!==void 0)throw new Error("duplicate key detected:"+b);if(b==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Xe(O))throw new Error("case arguments must be an array");a.push(b),i[b]=function(){for(var Re=[],Qe=0;Qe<arguments.length;Qe++)Re[Qe]=arguments[Qe];var ot=Re.length;if(ot!==O.length)throw new Error("Wrong number of arguments to case "+b+". Expected "+O.length+" ("+O+"), got "+ot);var ct=function(St){var At=Rn(St);if(a.length!==At.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+`
Actual: `+At.join(","));var It=Rr(a,function(Yt){return ln(At,Yt)});if(!It)throw new Error("Not all branches were specified when using match. Specified: "+At.join(", ")+`
Required: `+a.join(", "));return St[b].apply(null,Re)};return{fold:function(){for(var St=[],At=0;At<arguments.length;At++)St[At]=arguments[At];if(St.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+St.length);var It=St[f];return It.apply(null,Re)},match:ct,log:function(St){}}}}),i},ic={generate:Uy};ic.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var rL=function(n){var a=[],i=[];return en(n,function(s){s.fold(function(f){a.push(f)},function(f){i.push(f)})}),{errors:a,values:i}},lb=function(n,a){var i={};return Pr(n,function(s,f){ln(a,f)||(i[f]=s)}),i},cb=function(n,a){var i;return i={},i[n]=a,i},aL=function(n){var a={};return en(n,function(i){a[i.key]=i.value}),a},jy=function(n,a){return lb(n,a)},Lf=function(n,a){return cb(n,a)},Mv=function(n){return aL(n)},oL=function(n,a){return n.length===0?So.value(a):So.value(nr(a,Ma.apply(void 0,n)))},iL=function(n){return So.error(tn(n))},uL=function(n,a){var i=rL(n);return i.errors.length>0?iL(i.errors):oL(i.values,a)},p2=function(n){return qe(n)?n:xt},Wy=function(n,a,i){for(var s=n.dom,f=p2(i);s.parentNode;){s=s.parentNode;var d=Gt.fromDom(s),b=a(d);if(b.isSome())return b;if(f(d))break}return $e.none()},qy=function(n,a,i){var s=a(n),f=p2(i);return s.orThunk(function(){return f(n)?$e.none():Wy(n,a,f)})},h2=function(n,a){return bi(n.element,a.event.target)},Rf={can:it,abort:xt,run:He},zm=function(n){if(!aa(n,"can")&&!aa(n,"abort")&&!aa(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return ut(ut({},Rf),n)},Ky=function(n,a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return er(n,function(f,d){return f&&a(d).apply(void 0,i)},!0)}},sL=function(n,a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return er(n,function(f,d){return f||a(d).apply(void 0,i)},!1)}},lL=function(n){return qe(n)?{can:it,abort:xt,run:n}:n},cL=function(n){var a=Ky(n,function(f){return f.can}),i=sL(n,function(f){return f.abort}),s=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];en(n,function(b){b.run.apply(void 0,f)})};return{can:a,abort:i,run:s}},wu=Ke,ud=wu("touchstart"),Xc=wu("touchmove"),Ah=wu("touchend"),g2=wu("touchcancel"),kc=wu("mousedown"),Dv=wu("mousemove"),Gy=wu("mouseout"),Xy=wu("mouseup"),Td=wu("mouseover"),_d=wu("focusin"),Zu=wu("focusout"),fb=wu("keydown"),b2=wu("keyup"),$m=wu("input"),Vm=wu("change"),Th=wu("click"),fL=wu("transitioncancel"),_h=wu("transitionend"),Yy=wu("transitionstart"),dL=wu("selectstart"),Vi=function(n){return Ke("alloy."+n)},db={tap:Vi("tap")},Um=Vi("focus"),Qy=Vi("blur.post"),Jy=Vi("paste.post"),uc=Vi("receive"),Il=Vi("execute"),Oh=Vi("focus.item"),jm=db.tap,Zy=Vi("longpress"),Mh=Vi("sandbox.close"),ew=Vi("typeahead.cancel"),Dh=Vi("system.init"),tw=Vi("system.touchmove"),vL=Vi("system.touchend"),nw=Vi("system.scroll"),Yc=Vi("system.resize"),Fl=Vi("system.attached"),Nh=Vi("system.detached"),Qc=Vi("system.dismissRequested"),fs=Vi("system.repositionRequested"),vb=Vi("focusmanager.shifted"),mb=Vi("slotcontainer.visibility"),y2=Vi("change.tab"),es=Vi("dismiss.tab"),rw=Vi("highlight"),pb=Vi("dehighlight"),$o=function(n,a){Lh(n,n.element,a,{})},za=function(n,a,i){Lh(n,n.element,a,i)},Hl=function(n){$o(n,Il())},hb=function(n,a,i){Lh(n,a,i,{})},Lh=function(n,a,i,s){var f=ut({target:a},s);n.getSystem().triggerEvent(i,a,f)},w2=function(n,a,i,s){n.getSystem().triggerEvent(i,a,s.event)},si=function(n){return Mv(n)},C2=function(n,a){return{key:n,value:zm({abort:a})}},mL=function(n,a){return{key:n,value:zm({can:a})}},S2=function(n){return{key:n,value:zm({run:function(a,i){i.event.prevent()}})}},wr=function(n,a){return{key:n,value:zm({run:a})}},aw=function(n,a,i){return{key:n,value:zm({run:function(s,f){a.apply(void 0,[s,f].concat(i))}})}},pL=function(n){return function(a){return wr(n,a)}},Wm=function(n){return function(a){return{key:n,value:zm({run:function(i,s){h2(i,s)&&a(i,s)}})}}},gb=function(n,a){return wr(n,function(i,s){i.getSystem().getByUid(a).each(function(f){w2(f,f.element,n,s)})})},qm=function(n,a,i){var s=a.partUids[i];return gb(n,s)},Od=function(n,a){return wr(n,function(i,s){var f=s.event,d=i.getSystem().getByDom(f.target).getOrThunk(function(){var b=qy(f.target,function(O){return i.getSystem().getByDom(O).toOptional()},xt);return b.getOr(i)});a(i,d,s)})},Nv=function(n){return wr(n,function(a,i){i.cut()})},Km=function(n){return wr(n,function(a,i){i.stop()})},iu=function(n,a){return Wm(n)(a)},go=Wm(Fl()),sc=Wm(Nh()),x2=Wm(Dh()),lc=pL(Il()),ow=function(n,a){var i=a||document,s=i.createElement("div");return s.innerHTML=n,lt(Gt.fromDom(s))},bb=function(n){return n.dom.innerHTML},Md=function(n,a){var i=$u(n),s=i.dom,f=Gt.fromDom(s.createDocumentFragment()),d=ow(a,s);yu(f,d),Ki(n),Wo(n,f)},Dd=function(n){var a=Gt.fromTag("div"),i=Gt.fromDom(n.dom.cloneNode(!0));return Wo(a,i),bb(a)},Gm=function(n,a){return Gt.fromDom(n.dom.cloneNode(a))},Nd=function(n){return Gm(n,!1)},cc=function(n){if(Hn(n))return"#shadow-root";var a=Nd(n);return Dd(a)},Ld=function(n){return cc(n)},Bf=function(n,a,i){return bi(a,n.element)&&!bi(a,i)},Rd=si([mL(Um(),function(n,a){var i=a.event,s=i.originator,f=i.target;return!Bf(n,s,f)})]),Xm=Object.freeze({__proto__:null,events:Rd}),E2=0,ya=function(n){var a=new Date,i=a.getTime(),s=Math.floor(Math.random()*1e9);return E2++,n+"_"+s+E2+String(i)},Os=Ke("alloy-id-"),Jc=Ke("data-alloy-id"),Pf=Os(),k2=Jc(),A2=function(n,a){var i=ya(Pf+n);return yb(a,i),i},yb=function(n,a){Object.defineProperty(n.dom,k2,{value:a,writable:!0})},Ym=function(n){var a=mt(n)?n.dom[k2]:null;return $e.from(a)},Bd=function(n){return ya(n)},wb=tt,Rh=function(n){var a=function(f){return"The component must be in a context to execute: "+f+(n?`
`+Ld(n().element)+" is not in context.":"")},i=function(f){return function(){throw new Error(a(f))}},s=function(f){return function(){}};return{debugInfo:Ke("fake"),triggerEvent:s("triggerEvent"),triggerFocus:s("triggerFocus"),triggerEscape:s("triggerEscape"),broadcast:s("broadcast"),broadcastOn:s("broadcastOn"),broadcastEvent:s("broadcastEvent"),build:i("build"),addToWorld:i("addToWorld"),removeFromWorld:i("removeFromWorld"),addToGui:i("addToGui"),removeFromGui:i("removeFromGui"),getByUid:i("getByUid"),getByDom:i("getByDom"),isConnected:xt}},hL=Rh(),Pd=function(n,a,i){var s=i.toString(),f=s.indexOf(")")+1,d=s.indexOf("("),b=s.substring(d+1,f-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:a,parameters:iw(b.slice(0,1).concat(b.slice(3)))}},n},iw=function(n){return dn(n,function(a){return Ca(a,"/*")?a.substring(0,a.length-2):a})},uw=function(n,a){var i=n.toString(),s=i.indexOf(")")+1,f=i.indexOf("("),d=i.substring(f+1,s-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:a,parameters:iw(d)}},n},Id=function(n,a){var i=a.toString(),s=i.indexOf(")")+1,f=i.indexOf("("),d=i.substring(f+1,s-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:iw(d.slice(1))}},n},sw=ya("alloy-premade"),Fd=function(n){return Lf(sw,n)},gL=function(n){return jn(n,sw)},Gi=function(n){return Id(function(a){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return n.apply(void 0,Ht([a.getApis(),a],i,!1))},n)},Fs={init:function(){return yl({readState:Ke("No State required")})}},yl=function(n){return n},T2=function(n,a){var i=dn(a,function(f){return Pl(f.name(),[yr("config"),En("state",Fs)])}),s=zi("component.behaviours",Ba(i),n.behaviours).fold(function(f){throw new Error(Im(f)+`
Complete spec:
`+JSON.stringify(n,null,2))},tt);return{list:a,data:br(s,function(f){var d=f.map(function(b){return{config:b.config,state:b.state.init(b.config)}});return Ke(d)})}},Cb=function(n){return n.list},bL=function(n){return n.data},_2=function(n,a){var i={};return Pr(n,function(s,f){Pr(s,function(d,b){var O=jn(i,b).getOr([]);i[b]=O.concat([a(f,d)])})}),i},Ac=function(n){return{classes:Te(n.classes)?[]:n.classes,attributes:Te(n.attributes)?{}:n.attributes,styles:Te(n.styles)?{}:n.styles}},yL=function(n,a){return ut(ut({},n),{attributes:ut(ut({},n.attributes),a.attributes),styles:ut(ut({},n.styles),a.styles),classes:n.classes.concat(a.classes)})},wL=function(n,a,i,s){var f=ut({},a);en(i,function(ot){f[ot.name()]=ot.exhibit(n,s)});var d=_2(f,function(ot,ct){return{name:ot,modification:ct}}),b=function(ot){return hn(ot,function(ct,St){return ut(ut({},St.modification),ct)},{})},O=hn(d.classes,function(ot,ct){return ct.modification.concat(ot)},[]),Re=b(d.attributes),Qe=b(d.styles);return Ac({classes:O,attributes:Re,styles:Qe})},Sb=function(n,a,i,s){try{var f=fo(i,function(d,b){var O=d[a],Re=b[a],Qe=s.indexOf(O),ot=s.indexOf(Re);if(Qe===-1)throw new Error("The ordering for "+n+" does not have an entry for "+O+`.
Order specified: `+JSON.stringify(s,null,2));if(ot===-1)throw new Error("The ordering for "+n+" does not have an entry for "+Re+`.
Order specified: `+JSON.stringify(s,null,2));return Qe<ot?-1:ot<Qe?1:0});return So.value(f)}catch(d){return So.error([d])}},CL=function(n,a){return{handler:n,purpose:a}},SL=function(n,a){return{cHandler:n,purpose:a}},lw=function(n,a){return SL(et.apply(void 0,[n.handler].concat(a)),n.purpose)},cw=function(n){return n.cHandler},fw=function(n,a){return{name:n,handler:a}},xL=function(n,a){var i={};return en(n,function(s){i[s.name()]=s.handlers(a)}),i},Hd=function(n,a,i){var s=ut(ut({},i),xL(a,n));return _2(s,fw)},zd=function(n,a,i,s){var f=Hd(n,i,s);return O2(f,a)},mi=function(n){var a=lL(n);return function(i,s){for(var f=[],d=2;d<arguments.length;d++)f[d-2]=arguments[d];var b=[i,s].concat(f);a.abort.apply(void 0,b)?s.stop():a.can.apply(void 0,b)&&a.run.apply(void 0,b)}},dw=function(n,a){return So.error(["The event ("+n+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(dn(a,function(i){return i.name}),null,2)])},Zc=function(n,a,i){var s=a[i];return s?Sb("Event: "+i,"name",n,s).map(function(f){var d=dn(f,function(b){return b.handler});return cL(d)}):dw(i,n)},O2=function(n,a){var i=Ar(n,function(s,f){var d=s.length===1?So.value(s[0].handler):Zc(s,a,f);return d.map(function(b){var O=mi(b),Re=s.length>1?cn(a[f],function(Qe){return on(s,function(ot){return ot.name===Qe})}).join(" > "):s[0].name;return Lf(f,CL(O,Re))})});return uL(i,{})},ef,Lv="alloy.base.behaviour",Rv=Ba([Ru("dom","dom",ao(),Ba([yr("tag"),En("styles",{}),En("classes",[]),En("attributes",{}),ti("value"),ti("innerHtml")])),yr("components"),yr("uid"),En("events",{}),En("apis",{}),Ru("eventOrder","eventOrder",ob((ef={},ef[Il()]=["disabling",Lv,"toggling","typeaheadevents"],ef[Um()]=[Lv,"focusing","keying"],ef[Dh()]=[Lv,"disabling","toggling","representing"],ef[$m()]=[Lv,"representing","streaming","invalidating"],ef[Nh()]=[Lv,"representing","item-events","tooltipping"],ef[kc()]=["focusing",Lv,"item-type-events"],ef[ud()]=["focusing",Lv,"item-type-events"],ef[Td()]=["item-type-events","tooltipping"],ef[uc()]=["receiving","reflecting","tooltipping"],ef)),qc()),ti("domModification")]),vw=function(n){return zi("custom.definition",Rv,n)},M2=function(n){return ut(ut({},n.dom),{uid:n.uid,domChildren:dn(n.components,function(a){return a.element})})},xb=function(n){return n.domModification.fold(function(){return Ac({})},Ac)},mw=function(n){return n.events},Bh=function(n,a){var i=Ti(n,a);return i===void 0||i===""?[]:i.split(" ")},EL=function(n,a,i){var s=Bh(n,a),f=s.concat([i]);return ho(n,a,f.join(" ")),!0},Eb=function(n,a,i){var s=cn(Bh(n,a),function(f){return f!==i});return s.length>0?ho(n,a,s.join(" ")):gu(n,a),!1},Qm=function(n){return n.dom.classList!==void 0},pw=function(n){return Bh(n,"class")},kL=function(n,a){return EL(n,"class",a)},D2=function(n,a){return Eb(n,"class",a)},Cu=function(n,a){Qm(n)?n.dom.classList.add(a):kL(n,a)},AL=function(n){var a=Qm(n)?n.dom.classList:pw(n);a.length===0&&gu(n,"class")},cu=function(n,a){if(Qm(n)){var i=n.dom.classList;i.remove(a)}else D2(n,a);AL(n)},Hs=function(n,a){return Qm(n)&&n.dom.classList.contains(a)},Bv=function(n,a){en(a,function(i){Cu(n,i)})},zl=function(n,a){en(a,function(i){cu(n,i)})},hw=function(n,a){return Rr(a,function(i){return Hs(n,i)})},$d=function(n){return n.dom.value},Jm=function(n,a){if(a===void 0)throw new Error("Value.set was undefined");n.dom.value=a},Zm=function(n){var a=Gt.fromTag(n.tag);Ed(a,n.attributes),Bv(a,n.classes),tc(a,n.styles),n.innerHtml.each(function(s){return Md(a,s)});var i=n.domChildren;return yu(a,i),n.value.each(function(s){Jm(a,s)}),n.uid,yb(a,n.uid),a},N2=function(n){var a=jn(n,"behaviours").getOr({});return Mn(Rn(a),function(i){var s=a[i];return x(s)?[s.me]:[]})},L2=function(n,a){return T2(n,a)},TL=function(n){var a=N2(n);return L2(n,a)},_L=function(n,a,i){var s=M2(n),f=xb(n),d={"alloy.base.modification":f},b=a.length>0?wL(i,d,a,s):f;return yL(s,b)},OL=function(n,a,i){var s={"alloy.base.behaviour":mw(n)};return zd(i,n.eventOrder,a,s).getOrDie()},ML=function(n){var a=function(){return Sn},i=Va(hL),s=Kc(vw(n)),f=TL(n),d=Cb(f),b=bL(f),O=_L(s,d,b),Re=Zm(O),Qe=OL(s,d,b),ot=Va(s.components),ct=function(Xn){i.set(Xn)},St=function(){i.set(Rh(a))},At=function(){var Xn=lt(Re),Kn=Mn(Xn,function(wn){return i.get().getByDom(wn).fold(function(){return[]},Ga)});ot.set(Kn)},It=function(Xn){var Kn=b,wn=qe(Kn[Xn.name()])?Kn[Xn.name()]:function(){throw new Error("Could not find "+Xn.name()+" in "+JSON.stringify(n,null,2))};return wn()},Yt=function(Xn){return qe(b[Xn.name()])},bn=function(){return s.apis},jt=function(Xn){return b[Xn]().map(function(Kn){return Kn.state.readState()}).getOr("not enabled")},Sn={uid:n.uid,getSystem:i.get,config:It,hasConfigured:Yt,spec:n,readState:jt,getApis:bn,connect:ct,disconnect:St,element:Re,syncComponents:At,components:ot.get,events:Qe};return Sn},gw=function(n){var a=jn(n,"components").getOr([]);return dn(a,uu)},bw=function(n){var a=wb(n),i=a.events,s=Et(a,["events"]),f=gw(s),d=ut(ut({},s),{events:ut(ut({},Xm),i),components:f});return So.value(ML(d))},ds=function(n){var a=Gt.fromText(n);return yw({element:a})},yw=function(n){var a=vi("external.component",Bl([yr("element"),ti("uid")]),n),i=Va(Rh()),s=function(O){i.set(O)},f=function(){i.set(Rh(function(){return b}))},d=a.uid.getOrThunk(function(){return Bd("external")});yb(a.element,d);var b={uid:d,getSystem:i.get,config:$e.none,hasConfigured:xt,connect:s,disconnect:f,getApis:function(){return{}},element:a.element,spec:n,readState:Ke("No state"),syncComponents:He,components:Ke([]),events:{}};return Fd(b)},DL=Bd,R2=function(n){return pr(n,"uid")},uu=function(n){return gL(n).getOrThunk(function(){var a=R2(n)?n:ut({uid:DL("")},n);return bw(a).getOrDie()})},$l=Fd;function kb(n,a,i,s,f){return n(i,s)?$e.some(i):qe(f)&&f(i)?$e.none():a(i,s,f)}var ww=function(n,a,i){for(var s=n.dom,f=qe(i)?i:xt;s.parentNode;){s=s.parentNode;var d=Gt.fromDom(s);if(a(d))return $e.some(d);if(f(d))break}return $e.none()},Ab=function(n,a,i){var s=function(f,d){return d(f)};return kb(s,ww,n,a,i)},B2=function(n,a){var i=function(f){return a(Gt.fromDom(f))},s=Gn(n.dom.childNodes,i);return s.map(Gt.fromDom)},bo=function(n,a){var i=function(s){for(var f=0;f<s.childNodes.length;f++){var d=Gt.fromDom(s.childNodes[f]);if(a(d))return $e.some(d);var b=i(s.childNodes[f]);if(b.isSome())return b}return $e.none()};return i(n.dom)},ep=function(n,a,i){return Ab(n,a,i).isSome()},Tb=function(n,a,i){return ww(n,function(s){return Es(s,a)},i)},Cw=function(n,a){return B2(n,function(i){return Es(i,a)})},Su=function(n,a){return Mf(a,n)},tf=function(n,a,i){var s=function(f,d){return Es(f,d)};return kb(s,Tb,n,a,i)},P2=function(n){var a=Ab(n,function(i){if(!mt(i))return!1;var s=Ti(i,"id");return s!==void 0&&s.indexOf("aria-owns")>-1});return a.bind(function(i){var s=Ti(i,"id"),f=ja(i);return Su(f,'[aria-owns="'+s+'"]')})},Pv=function(){var n=ya("aria-owns"),a=function(s){ho(s,"aria-owns",n)},i=function(s){gu(s,"aria-owns")};return{id:n,link:a,unlink:i}},Oi=function(n,a){return P2(a).exists(function(i){return Iv(n,i)})},Iv=function(n,a){return ep(a,function(i){return bi(i,n.element)},xt)||Oi(n,a)},_b="unknown",tp;(function(n){n[n.STOP=0]="STOP",n[n.NORMAL=1]="NORMAL",n[n.LOGGING=2]="LOGGING"})(tp||(tp={}));var Sw=Va({}),I2=function(n,a){var i=[],s=new Date().getTime();return{logEventCut:function(f,d,b){i.push({outcome:"cut",target:d,purpose:b})},logEventStopped:function(f,d,b){i.push({outcome:"stopped",target:d,purpose:b})},logNoParent:function(f,d,b){i.push({outcome:"no-parent",target:d,purpose:b})},logEventNoHandlers:function(f,d){i.push({outcome:"no-handlers-left",target:d})},logEventResponse:function(f,d,b){i.push({outcome:"response",purpose:b,target:d})},write:function(){var f=new Date().getTime();ln(["mousemove","mouseover","mouseout",Dh()],n)}}},Ob=function(n,a,i){var s=jn(Sw.get(),n).orThunk(function(){var b=Rn(Sw.get());return Tn(b,function(O){return n.indexOf(O)>-1?$e.some(Sw.get()[O]):$e.none()})}).getOr(tp.NORMAL);switch(s){case tp.NORMAL:return i(NL());case tp.LOGGING:{var f=I2(n,a),d=i(f);return f.write(),d}case tp.STOP:return!0}},F2=["alloy/data/Fields","alloy/debugging/Debugging"],sd=function(){var n=new Error;if(n.stack!==void 0){var a=n.stack.split(`
`);return Gn(a,function(i){return i.indexOf("alloy")>0&&!on(F2,function(s){return i.indexOf(s)>-1})}).getOr(_b)}else return _b},zs={logEventCut:He,logEventStopped:He,logNoParent:He,logEventNoHandlers:He,logEventResponse:He,write:He},xw=function(n,a,i){return Ob(n,a,i)},NL=Ke(zs),np=Ke([yr("menu"),yr("selectedMenu")]),Ph=Ke([yr("item"),yr("selectedItem")]);Ke(Ba(Ph().concat(np())));var H2=Ke(Ba(Ph())),LL=id("initSize",[yr("numColumns"),yr("numRows")]),RL=function(){return pl("markers",H2())},Mb=function(){return id("markers",[yr("backgroundMenu")].concat(np()).concat(Ph()))},Fv=function(n){return id("markers",dn(n,yr))},Db=function(n,a,i){return sd(),Ru(a,a,i,Pm(function(s){return So.value(function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return s.apply(void 0,f)})}))},qo=function(n){return Db("onHandler",n,_o(He))},wl=function(n){return Db("onKeyboardHandler",n,_o($e.none))},$s=function(n){return Db("onHandler",n,ao())},al=function(n){return Db("onKeyboardHandler",n,ao())},wi=function(n,a){return rl(n,Ke(a))},Hv=function(n){return rl(n,tt)},Nb=Ke(LL),qu=function(n,a,i,s,f,d,b,O){return O===void 0&&(O=!1),{x:n,y:a,bubble:i,direction:s,placement:f,restriction:d,label:b+"-"+f,alwaysFit:O}},If=ic.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),BL=function(n,a,i,s,f,d,b,O,Re){return n.fold(a,i,s,f,d,b,O,Re)},PL=function(n,a,i,s){return n.fold(a,a,s,s,a,s,i,i)},Lb=function(n,a,i,s){return n.fold(a,s,a,s,i,i,a,s)},Rb=If.southeast,Ew=If.southwest,kw=If.northeast,rp=If.northwest,z2=If.south,$2=If.north,Aw=If.east,Tw=If.west,ts=function(n,a,i,s){var f=n+a;return f>s?i:f<i?s:f},Cl=function(n,a,i){return Math.min(Math.max(n,a),i)},Ih=function(n,a){switch(a){case 1:return n.x;case 0:return n.x+n.width;case 2:return n.y;case 3:return n.y+n.height}},xu=function(n,a){return pa(["left","right","top","bottom"],function(i){return jn(a,i).map(function(s){return Ih(n,s)})})},V2=function(n,a,i){var s=function(Re,Qe){return a[Re].map(function(ot){var ct=Re==="top"||Re==="bottom",St=ct?i.top:i.left,At=Re==="left"||Re==="top"?Math.max:Math.min,It=At(ot,Qe)+St;return ct?Cl(It,n.y,n.bottom):Cl(It,n.x,n.right)}).getOr(Qe)},f=s("left",n.x),d=s("top",n.y),b=s("right",n.right),O=s("bottom",n.bottom);return Zi(f,d,b-f,O-d)},Vd="layout",U2=function(n){return n.x},j2=function(n,a){return n.x+n.width/2-a.width/2},W2=function(n,a){return n.x+n.width-a.width},_w=function(n,a){return n.y-a.height},Ow=function(n){return n.y+n.height},Mw=function(n,a){return n.y+n.height/2-a.height/2},q2=function(n){return n.x+n.width},IL=function(n,a){return n.x-a.width},vs=function(n,a,i){return qu(U2(n),Ow(n),i.southeast(),Rb(),"southeast",xu(n,{left:1,top:3}),Vd)},ms=function(n,a,i){return qu(W2(n,a),Ow(n),i.southwest(),Ew(),"southwest",xu(n,{right:0,top:3}),Vd)},ol=function(n,a,i){return qu(U2(n),_w(n,a),i.northeast(),kw(),"northeast",xu(n,{left:1,bottom:2}),Vd)},Vs=function(n,a,i){return qu(W2(n,a),_w(n,a),i.northwest(),rp(),"northwest",xu(n,{right:0,bottom:2}),Vd)},il=function(n,a,i){return qu(j2(n,a),_w(n,a),i.north(),$2(),"north",xu(n,{bottom:2}),Vd)},fu=function(n,a,i){return qu(j2(n,a),Ow(n),i.south(),z2(),"south",xu(n,{top:3}),Vd)},Bb=function(n,a,i){return qu(q2(n),Mw(n,a),i.east(),Aw(),"east",xu(n,{left:0}),Vd)},Pb=function(n,a,i){return qu(IL(n,a),Mw(n,a),i.west(),Tw(),"west",xu(n,{right:1}),Vd)},Dw=function(){return[vs,ms,ol,Vs,fu,il,Bb,Pb]},zv=function(){return[ms,vs,Vs,ol,fu,il,Bb,Pb]},Ud=function(){return[ol,Vs,vs,ms,il,fu]},Nw=function(){return[Vs,ol,ms,vs,il,fu]},Lw=function(){return[vs,ms,ol,Vs,fu,il]},Ib=function(){return[ms,vs,Vs,ol,fu,il]},ap=function(n,a){return a.universal?n:cn(n,function(i){return ln(a.channels,i)})},op=function(n){return si([wr(uc(),function(a,i){var s=n.channels,f=Rn(s),d=i,b=ap(f,d);en(b,function(O){var Re=s[O],Qe=Re.schema,ot=vi("channel["+O+`] data
Receiver: `+Ld(a.element),Qe,d.data);Re.onReceive(a,ot)})})])},K2=Object.freeze({__proto__:null,events:op}),FL=[pl("channels",cs(So.value,Bl([$s("onReceive"),En("schema",qc())])))],Fb=function(n,a,i){return lc(function(s){i(s,n,a)})},Ff=function(n,a,i){return x2(function(s,f){i(s,n,a)})},HL=function(n,a,i,s,f,d){var b=Bl(n),O=Pl(a,[nL("config",n)]);return X2(b,O,a,i,s,f,d)},zL=function(n,a,i,s,f,d){var b=n,O=Pl(a,[Gc("config",n)]);return X2(b,O,a,i,s,f,d)},G2=function(n,a,i){var s=function(f){for(var d=[],b=1;b<arguments.length;b++)d[b-1]=arguments[b];var O=[f].concat(d);return f.config({name:Ke(n)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+n+". Using API: "+i)},function(Re){var Qe=Array.prototype.slice.call(O,1);return a.apply(void 0,[f,Re.config,Re.state].concat(Qe))})};return Pd(s,i,a)},$L=function(n){return{key:n,value:void 0}},X2=function(n,a,i,s,f,d,b){var O=function(ct){return aa(ct,i)?ct[i]():$e.none()},Re=br(f,function(ct,St){return G2(i,ct,St)}),Qe=br(d,function(ct,St){return uw(ct,St)}),ot=ut(ut(ut({},Qe),Re),{revoke:et($L,i),config:function(ct){var St=vi(i+"-config",n,ct);return{key:i,value:{config:St,me:ot,configAsRaw:Dn(function(){return vi(i+"-config",n,ct)}),initialConfig:ct,state:b}}},schema:Ke(a),exhibit:function(ct,St){return Yo(O(ct),jn(s,"exhibit"),function(At,It){return It(St,At.config,At.state)}).getOrThunk(function(){return Ac({})})},name:Ke(i),handlers:function(ct){return O(ct).map(function(St){var At=jn(s,"events").getOr(function(){return{}});return At(St.config,St.state)}).getOr({})}});return ot},Hr=function(n){return Mv(n)},VL=Bl([yr("fields"),yr("name"),En("active",{}),En("apis",{}),En("state",Fs),En("extra",{})]),Bu=function(n){var a=vi("Creating behaviour: "+n.name,VL,n);return HL(a.fields,a.name,a.active,a.apis,a.extra,a.state)},UL=Bl([yr("branchKey"),yr("branches"),yr("name"),En("active",{}),En("apis",{}),En("state",Fs),En("extra",{})]),ip=function(n){var a=vi("Creating behaviour: "+n.name,UL,n);return zL(nc(a.branchKey,a.branches),a.name,a.active,a.apis,a.extra,a.state)},jL=Ke(void 0),ul=Bu({fields:FL,name:"receiving",active:K2}),Rw=function(n,a){return Ac({classes:[],styles:a.useFixed()?{}:{position:"relative"}})},Y2=Object.freeze({__proto__:null,exhibit:Rw}),Fh=function(){return Gt.fromDom(document)},nf=function(n){return n.dom.focus()},Bw=function(n){return n.dom.blur()},Pw=function(n){var a=ja(n).dom;return n.dom===a.activeElement},rf=function(n){return n===void 0&&(n=Fh()),$e.from(n.dom.activeElement).map(Gt.fromDom)},af=function(n){return rf(ja(n)).filter(function(a){return n.dom.contains(a.dom)})},Q2=function(n,a){var i=ja(a),s=rf(i).bind(function(d){var b=function(O){return bi(d,O)};return b(a)?$e.some(a):bo(a,b)}),f=n(a);return s.each(function(d){rf(i).filter(function(b){return bi(b,d)}).fold(function(){nf(d)},He)}),f},Tc=function(n,a,i,s,f){var d=function(b){return b+"px"};return{position:n,left:a.map(d),top:i.map(d),right:s.map(d),bottom:f.map(d)}},jd=function(n){return ut(ut({},n),{position:$e.some(n.position)})},Wd=function(n,a){Cc(n,jd(a))},Iw=ic.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Jn=function(n,a,i,s,f,d){var b=a.rect,O=b.x-i,Re=b.y-s,Qe=b.width,ot=b.height,ct=f-(O+Qe),St=d-(Re+ot),At=$e.some(O),It=$e.some(Re),Yt=$e.some(ct),bn=$e.some(St),jt=$e.none();return BL(a.direction,function(){return Tc(n,At,It,jt,jt)},function(){return Tc(n,jt,It,Yt,jt)},function(){return Tc(n,At,jt,jt,bn)},function(){return Tc(n,jt,jt,Yt,bn)},function(){return Tc(n,At,It,jt,jt)},function(){return Tc(n,At,jt,jt,bn)},function(){return Tc(n,At,It,jt,jt)},function(){return Tc(n,jt,It,Yt,jt)})},Hh=function(n,a){return n.fold(function(){var i=a.rect;return Tc("absolute",$e.some(i.x),$e.some(i.y),$e.none(),$e.none())},function(i,s,f,d){return Jn("absolute",a,i,s,f,d)},function(i,s,f,d){return Jn("fixed",a,i,s,f,d)})},Fw=function(n,a){var i=et(rd,a),s=n.fold(i,i,function(){var b=Ji();return rd(a).translate(-b.left,-b.top)}),f=Gr(a),d=ft(a);return Zi(s.left,s.top,f,d)},WL=function(n,a){return a.fold(function(){return n.fold(ju,ju,Zi)},function(i){return n.fold(i,i,function(){var s=i(),f=Hb(n,s.x,s.y);return Zi(f.left,f.top,s.width,s.height)})})},Hb=function(n,a,i){var s=Ut(a,i),f=function(){var d=Ji();return s.translate(-d.left,-d.top)};return n.fold(Ke(s),Ke(s),f)},of=function(n,a,i,s){return n.fold(a,i,s)};Iw.none;var J2=Iw.relative,Z2=Iw.fixed,ek=function(n,a){return{anchorBox:n,origin:a}},Hw=function(n,a){return ek(n,a)},zw="data-alloy-placement",tk=function(n,a){ho(n,zw,a)},nk=function(n){return qi(n,zw)},rk=function(n){return gu(n,zw)},zb=ic.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),ak=function(n,a){var i=a.x,s=a.y,f=a.right,d=a.bottom,b=n.x,O=n.y,Re=n.right,Qe=n.bottom,ot=n.width,ct=n.height,St=b>=i&&b<=f,At=O>=s&&O<=d,It=St&&At,Yt=Re<=f&&Re>=i,bn=Qe<=d&&Qe>=s,jt=Yt&&bn,Sn=Math.min(ot,b>=i?f-b:Re-i),Xn=Math.min(ct,O>=s?d-O:Qe-s);return{originInBounds:It,sizeInBounds:jt,visibleW:Sn,visibleH:Xn}},qL=function(n,a){var i=a.x,s=a.y,f=a.right,d=a.bottom,b=n.x,O=n.y,Re=n.width,Qe=n.height,ot=Math.max(i,f-Re),ct=Math.max(s,d-Qe),St=Cl(b,i,ot),At=Cl(O,s,ct),It=Math.min(St+Re,f)-St,Yt=Math.min(At+Qe,d)-At;return Zi(St,At,It,Yt)},KL=function(n,a,i){var s=Ke(a.bottom-i.y),f=Ke(i.bottom-a.y),d=PL(n,f,f,s),b=Ke(a.right-i.x),O=Ke(i.right-a.x),Re=Lb(n,O,O,b);return{maxWidth:Re,maxHeight:d}},ok=function(n,a,i,s){var f=n.bubble,d=f.offset,b=V2(s,n.restriction,d),O=n.x+d.left,Re=n.y+d.top,Qe=Zi(O,Re,a,i),ot=ak(Qe,b),ct=ot.originInBounds,St=ot.sizeInBounds,At=ot.visibleW,It=ot.visibleH,Yt=ct&&St,bn=Yt?Qe:qL(Qe,b),jt=bn.width>0&&bn.height>0,Sn=KL(n.direction,bn,s),Xn=Sn.maxWidth,Kn=Sn.maxHeight,wn={rect:bn,maxHeight:Kn,maxWidth:Xn,direction:n.direction,placement:n.placement,classes:{on:f.classesOn,off:f.classesOff},layout:n.label,testY:Re};return Yt||n.alwaysFit?zb.fit(wn):zb.nofit(wn,At,It,jt)},$b=function(n,a,i,s,f,d){var b=s.width,O=s.height,Re=function(ot,ct,St,At,It){var Yt=ot(i,s,f,n,d),bn=ok(Yt,b,O,d);return bn.fold(Ke(bn),function(jt,Sn,Xn,Kn){var wn=It===Kn?Xn>At||Sn>St:!It&&Kn;return wn?bn:zb.nofit(ct,St,At,It)})},Qe=er(a,function(ot,ct){var St=et(Re,ct);return ot.fold(Ke(ot),St)},zb.nofit({rect:i,maxHeight:s.height,maxWidth:s.width,direction:Rb(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:i.y},-1,-1,!1));return Qe.fold(tt,tt)},$w=function(n){var a=Va($e.none()),i=function(){return a.get().each(n)},s=function(){i(),a.set($e.none())},f=function(){return a.get().isSome()},d=function(){return a.get()},b=function(O){i(),a.set($e.some(O))};return{clear:s,isSet:f,get:d,set:b}},Vw=function(){return $w(function(n){return n.destroy()})},up=function(){return $w(function(n){return n.unbind()})},Uw=function(){var n=Vw(),a=function(i){return n.get().each(i)};return ut(ut({},n),{run:a})},Xi=function(){var n=$w(He),a=function(i){return n.get().each(i)};return ut(ut({},n),{on:a})},jw=it,su=function(n,a,i){return io(n,a,jw,i)},Vb=function(n,a,i){return lo(n,a,jw,i)},Ww=$r,ik=["top","bottom","right","left"],Ub="data-alloy-transition-timer",uk=function(n,a){return hw(n,a.classes)},sk=function(n,a,i){return i.exists(function(s){var f=n.mode;return f==="all"?!0:s[f]!==a[f]})},GL=function(n,a){var i=function(s){return parseFloat(s).toFixed(3)};return sn(a,function(s,f){var d=n[f].map(i),b=s.map(i);return!jo(d,b)}).isSome()},lk=function(n){var a=function(d){var b=Hi(n,d),O=We(b)?b.split(/\s*,\s*/):[];return cn(O,lu)},i=function(d){if(We(d)&&/^[\d.]+/.test(d)){var b=parseFloat(d);return Ca(d,"ms")?b:b*1e3}else return 0},s=a("transition-delay"),f=a("transition-duration");return er(f,function(d,b,O){var Re=i(s[O])+i(b);return Math.max(d,Re)},0)},XL=function(n,a){var i=up(),s=up(),f,d=function(ot){var ct,St=(ct=ot.raw.pseudoElement)!==null&&ct!==void 0?ct:"";return bi(ot.target,n)&&Xu(St)&&ln(ik,ot.raw.propertyName)},b=function(ot){if(j(ot)||d(ot)){i.clear(),s.clear();var ct=ot==null?void 0:ot.raw.type;(j(ct)||ct===_h())&&(clearTimeout(f),gu(n,Ub),zl(n,a.classes))}},O=function(){i.set(su(n,_h(),b)),s.set(su(n,fL(),b))};if("ontransitionstart"in n.dom)var Re=su(n,Yy(),function(ot){d(ot)&&(Re.unbind(),O())});else O();var Qe=lk(n);requestAnimationFrame(function(){f=setTimeout(b,Qe+17),ho(n,Ub,f)})},YL=function(n,a){Bv(n,a.classes),qi(n,Ub).each(function(i){clearTimeout(parseInt(i,10)),gu(n,Ub)}),XL(n,a)},ck=function(n,a,i,s,f,d){var b=sk(s,f,d);if(b||uk(n,s)){Qa(n,"position",i.position);var O=Fw(a,n),Re=Hh(a,ut(ut({},f),{rect:O})),Qe=pa(ik,function(ot){return Re[ot]});GL(i,Qe)&&(Cc(n,Qe),b&&YL(n,s),w(n))}else zl(n,s.classes)},QL=function(n){return{width:Gr(n),height:ft(n)}},JL=function(n,a,i,s){g(a,"max-height"),g(a,"max-width");var f=QL(a);return $b(a,s.preference,n,f,i,s.bounds)},ZL=function(n,a){var i=a.classes;zl(n,i.off),Bv(n,i.on)},e3=function(n,a,i){var s=i.maxHeightFunction;s(n,a.maxHeight)},t3=function(n,a,i){var s=i.maxWidthFunction;s(n,a.maxWidth)},fk=function(n,a,i){var s=Hh(i.origin,a);i.transition.each(function(f){ck(n,i.origin,s,f,a,i.lastPlacement)}),Wd(n,s)},n3=function(n,a){tk(n,a.placement)},ps=function(n,a){Bt(n,Math.floor(a))},zh=Ke(function(n,a){ps(n,a),tc(n,{"overflow-x":"hidden","overflow-y":"auto"})}),$h=Ke(function(n,a){ps(n,a)}),dk=function(n,a,i){return n[a]===void 0?i:n[a]},r3=function(n,a,i,s,f,d,b,O){var Re=dk(b,"maxHeightFunction",zh()),Qe=dk(b,"maxWidthFunction",He),ot=n.anchorBox,ct=n.origin,St={bounds:WL(ct,d),origin:ct,preference:s,maxHeightFunction:Re,maxWidthFunction:Qe,lastPlacement:f,transition:O};return a3(ot,a,i,St)},a3=function(n,a,i,s){var f=JL(n,a,i,s);return fk(a,f,s),n3(a,f),ZL(a,f),e3(a,f,s),t3(a,f,s),{layout:f.layout,placement:f.placement}},o3=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],sp=function(n,a,i,s){s===void 0&&(s=1);var f=n*s,d=a*s,b=function(Re){return jn(i,Re).getOr([])},O=function(Re,Qe,ot){var ct=oa(o3,ot);return{offset:Ut(Re,Qe),classesOn:Mn(ot,b),classesOff:Mn(ct,b)}};return{southeast:function(){return O(-n,a,["top","alignLeft"])},southwest:function(){return O(n,a,["top","alignRight"])},south:function(){return O(-n/2,a,["top","alignCentre"])},northeast:function(){return O(-n,-a,["bottom","alignLeft"])},northwest:function(){return O(n,-a,["bottom","alignRight"])},north:function(){return O(-n/2,-a,["bottom","alignCentre"])},east:function(){return O(n,-a/2,["valignCentre","left"])},west:function(){return O(-n,-a/2,["valignCentre","right"])},insetNortheast:function(){return O(f,d,["top","alignLeft","inset"])},insetNorthwest:function(){return O(-f,d,["top","alignRight","inset"])},insetNorth:function(){return O(-f/2,d,["top","alignCentre","inset"])},insetSoutheast:function(){return O(f,-d,["bottom","alignLeft","inset"])},insetSouthwest:function(){return O(-f,-d,["bottom","alignRight","inset"])},insetSouth:function(){return O(-f/2,-d,["bottom","alignCentre","inset"])},insetEast:function(){return O(-f,-d/2,["valignCentre","right","inset"])},insetWest:function(){return O(f,-d/2,["valignCentre","left","inset"])}}},jb=function(){return sp(0,0,{})},Vh=tt,qw=function(n,a){return function(i){return i3(i)==="rtl"?a:n}},i3=function(n){return Hi(n,"direction")==="rtl"?"rtl":"ltr"},Hf;(function(n){n.TopToBottom="toptobottom",n.BottomToTop="bottomtotop"})(Hf||(Hf={}));var Kw="data-alloy-vertical-dir",u3=function(n){return ep(n,function(a){return mt(a)&&Ti(a,"data-alloy-vertical-dir")===Hf.BottomToTop})},qd=function(){return Pl("layouts",[yr("onLtr"),yr("onRtl"),ti("onBottomLtr"),ti("onBottomRtl")])},Wb=function(n,a,i,s,f,d,b){var O=b.map(u3).getOr(!1),Re=a.layouts.map(function(At){return At.onLtr(n)}),Qe=a.layouts.map(function(At){return At.onRtl(n)}),ot=O?a.layouts.bind(function(At){return At.onBottomLtr.map(function(It){return It(n)})}).or(Re).getOr(f):Re.getOr(i),ct=O?a.layouts.bind(function(At){return At.onBottomRtl.map(function(It){return It(n)})}).or(Qe).getOr(d):Qe.getOr(s),St=qw(ot,ct);return St(n)},s3=function(n,a,i){var s=a.hotspot,f=Fw(i,s.element),d=Wb(n.element,a,Lw(),Ib(),Ud(),Nw(),$e.some(a.hotspot.element));return $e.some(Vh({anchorBox:f,bubble:a.bubble.getOr(jb()),overrides:a.overrides,layouts:d,placer:$e.none()}))},l3=[yr("hotspot"),ti("bubble"),En("overrides",{}),qd(),wi("placement",s3)],vk=function(n,a,i){var s=Hb(i,a.x,a.y),f=Zi(s.left,s.top,a.width,a.height),d=Wb(n.element,a,Dw(),zv(),Dw(),zv(),$e.none());return $e.some(Vh({anchorBox:f,bubble:a.bubble,overrides:a.overrides,layouts:d,placer:$e.none()}))},mk=[yr("x"),yr("y"),En("height",0),En("width",0),En("bubble",jb()),En("overrides",{}),qd(),wi("placement",vk)],pk=ic.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),hk=function(n){return n.fold(tt,function(a,i,s){return a.translate(-i,-s)})},c3=function(n){return n.fold(tt,tt)},gk=function(n){return er(n,function(a,i){return a.translate(i.left,i.top)},Ut(0,0))},bk=function(n){var a=dn(n,hk);return gk(a)},yk=function(n){var a=dn(n,c3);return gk(a)},f3=pk.screen,wk=pk.absolute,d3=function(n,a,i){var s=Zl(i.root).dom,f=function(d){var b=$u(d),O=$u(n.element);return bi(b,O)};return $e.from(s.frameElement).map(Gt.fromDom).filter(f).map(Vr)},Ck=function(n,a,i){var s=$u(n.element),f=Ji(s),d=d3(n,a,i).getOr(f);return wk(d,f.left,f.top)},Gw=function(n,a,i,s){var f=f3(Ut(n,a));return $e.some(Nf(f,i,s))},Sk=function(n,a,i,s,f){return n.map(function(d){var b=[a,d.point],O=of(s,function(){return yk(b)},function(){return yk(b)},function(){return bk(b)}),Re=xc(O.left,O.top,d.width,d.height),Qe=i.showAbove?Ud():Lw(),ot=i.showAbove?Nw():Ib(),ct=Wb(f,i,Qe,ot,Qe,ot,$e.none());return Vh({anchorBox:Re,bubble:i.bubble.getOr(jb()),overrides:i.overrides,layouts:ct,placer:$e.none()})})},Uh=function(n,a,i){var s=Ck(n,i,a);return a.node.filter(Ja).bind(function(f){var d=f.dom.getBoundingClientRect(),b=Gw(d.left,d.top,d.width,d.height),O=a.node.getOr(n.element);return Sk(b,s,a,i,O)})},v3=[yr("node"),yr("root"),ti("bubble"),qd(),En("overrides",{}),En("showAbove",!1),wi("placement",Uh)],jh="\uFEFF",m3=" ",p3=function(n,a,i,s){return{start:n,soffset:a,finish:i,foffset:s}},Xw={create:p3},Yw=ic.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),h3=function(n,a,i,s){return n.fold(a,i,s)},g3=function(n){return n.fold(tt,tt,tt)},b3=Yw.before,y3=Yw.on,w3=Yw.after,C3={before:b3,on:y3,after:w3,cata:h3,getStart:g3},qb=ic.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),S3=function(n){return qb.exact(n.start,n.soffset,n.finish,n.foffset)},x3=function(n){return n.match({domRange:function(a){return Gt.fromDom(a.startContainer)},relative:function(a,i){return C3.getStart(a)},exact:function(a,i,s,f){return a}})},E3=qb.domRange,k3=qb.relative,A3=qb.exact,Qw=function(n){var a=x3(n);return Zl(a)},T3=Xw.create,Wh={domRange:E3,relative:k3,exact:A3,exactFromRange:S3,getWin:Qw,range:T3},_3=function(n,a){a.fold(function(i){n.setStartBefore(i.dom)},function(i,s){n.setStart(i.dom,s)},function(i){n.setStartAfter(i.dom)})},O3=function(n,a){a.fold(function(i){n.setEndBefore(i.dom)},function(i,s){n.setEnd(i.dom,s)},function(i){n.setEndAfter(i.dom)})},xk=function(n,a,i){var s=n.document.createRange();return _3(s,a),O3(s,i),s},Ek=function(n,a,i,s,f){var d=n.document.createRange();return d.setStart(a.dom,i),d.setEnd(s.dom,f),d},kk=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},Ak=function(n){var a=n.getClientRects(),i=a.length>0?a[0]:n.getBoundingClientRect();return i.width>0||i.height>0?$e.some(i).map(kk):$e.none()},Tk=function(n){var a=n.getBoundingClientRect();return a.width>0||a.height>0?$e.some(a).map(kk):$e.none()},lp=ic.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Jw=function(n,a,i){return a(Gt.fromDom(i.startContainer),i.startOffset,Gt.fromDom(i.endContainer),i.endOffset)},_k=function(n,a){return a.match({domRange:function(i){return{ltr:Ke(i),rtl:$e.none}},relative:function(i,s){return{ltr:Dn(function(){return xk(n,i,s)}),rtl:Dn(function(){return $e.some(xk(n,s,i))})}},exact:function(i,s,f,d){return{ltr:Dn(function(){return Ek(n,i,s,f,d)}),rtl:Dn(function(){return $e.some(Ek(n,f,d,i,s))})}}})},M3=function(n,a){var i=a.ltr();if(i.collapsed){var s=a.rtl().filter(function(f){return f.collapsed===!1});return s.map(function(f){return lp.rtl(Gt.fromDom(f.endContainer),f.endOffset,Gt.fromDom(f.startContainer),f.startOffset)}).getOrThunk(function(){return Jw(n,lp.ltr,i)})}else return Jw(n,lp.ltr,i)},D3=function(n,a){var i=_k(n,a);return M3(n,i)},Ok=function(n,a){var i=D3(n,a);return i.match({ltr:function(s,f,d,b){var O=n.document.createRange();return O.setStart(s.dom,f),O.setEnd(d.dom,b),O},rtl:function(s,f,d,b){var O=n.document.createRange();return O.setStart(d.dom,b),O.setEnd(s.dom,f),O}})};lp.ltr,lp.rtl;var N3=function(n,a){var i=function(d){if(!n(d))throw new Error("Can only get "+a+" value of a "+a+" node");return s(d).getOr("")},s=function(d){return n(d)?$e.from(d.dom.nodeValue):$e.none()},f=function(d,b){if(!n(d))throw new Error("Can only set raw "+a+" value of a "+a+" node");d.dom.nodeValue=b};return{get:i,getOption:s,set:f}},Mk=N3(Rt,"text"),$v=function(n){return Mk.get(n)},Kb=function(n){return Mk.getOption(n)},L3=function(n){return Zt(n)==="img"?1:Kb(n).fold(function(){return lt(n).length},function(a){return a.length})},R3=function(n){return Kb(n).filter(function(a){return a.trim().length!==0||a.indexOf(m3)>-1}).isSome()},B3=["img","br"],P3=function(n){var a=R3(n);return a||ln(B3,Zt(n))},Dk=function(n){return I3(n,P3)},I3=function(n,a){var i=function(s){for(var f=lt(s),d=f.length-1;d>=0;d--){var b=f[d];if(a(b))return $e.some(b);var O=i(b);if(O.isSome())return O}return $e.none()};return i(n)},Us=function(n,a){return td(a,n)},Nk=function(n,a,i,s){var f=$u(n),d=f.dom.createRange();return d.setStart(n.dom,a),d.setEnd(i.dom,s),d},qh=function(n,a,i,s){var f=Nk(n,a,i,s),d=bi(n,i)&&a===s;return f.collapsed&&!d},Vv=function(n){return $e.from(n.getSelection())},Gb=function(n){if(n.rangeCount>0){var a=n.getRangeAt(0),i=n.getRangeAt(n.rangeCount-1);return $e.some(Xw.create(Gt.fromDom(a.startContainer),a.startOffset,Gt.fromDom(i.endContainer),i.endOffset))}else return $e.none()},F3=function(n){if(n.anchorNode===null||n.focusNode===null)return Gb(n);var a=Gt.fromDom(n.anchorNode),i=Gt.fromDom(n.focusNode);return qh(a,n.anchorOffset,i,n.focusOffset)?$e.some(Xw.create(a,n.anchorOffset,i,n.focusOffset)):Gb(n)},H3=function(n){return Vv(n).filter(function(a){return a.rangeCount>0}).bind(F3)},Zw=function(n,a){var i=Ok(n,a);return Ak(i)},Lk=function(n,a){var i=Ok(n,a);return Tk(i)},Kh=function(n,a){return{element:n,offset:a}},z3=function(n,a){var i=lt(n);if(i.length===0)return Kh(n,a);if(a<i.length)return Kh(i[a],0);var s=i[i.length-1],f=Rt(s)?$v(s).length:lt(s).length;return Kh(s,f)},Uv=function(n,a){return Rt(n)?Kh(n,a):z3(n,a)},Kd=function(n,a){var i=a.getSelection.getOrThunk(function(){return function(){return H3(n)}});return i().map(function(s){var f=Uv(s.start,s.soffset),d=Uv(s.finish,s.foffset);return Wh.range(f.element,f.offset,d.element,d.offset)})},Xb=function(n,a,i){var s=Zl(a.root).dom,f=Ck(n,i,a),d=Kd(s,a).bind(function(Re){var Qe=Lk(s,Wh.exactFromRange(Re)).orThunk(function(){var ot=Gt.fromText(jh);ca(Re.start,ot);var ct=Zw(s,Wh.exact(ot,0,ot,1));return Uu(ot),ct});return Qe.bind(function(ot){return Gw(ot.left,ot.top,ot.width,ot.height)})}),b=Kd(s,a).bind(function(Re){return mt(Re.start)?$e.some(Re.start):Vc(Re.start)}),O=b.getOr(n.element);return Sk(d,f,a,i,O)},cp=[ti("getSelection"),yr("root"),ti("bubble"),qd(),En("overrides",{}),En("showAbove",!1),wi("placement",Xb)],uf="link-layout",sf=function(n){return n.x+n.width},Yb=function(n,a){return n.x-a.width},eC=function(n,a){return n.y-a.height+n.height},Rk=function(n){return n.y},tC=function(n,a,i){return qu(sf(n),Rk(n),i.southeast(),Rb(),"southeast",xu(n,{left:0,top:2}),uf)},fp=function(n,a,i){return qu(Yb(n,a),Rk(n),i.southwest(),Ew(),"southwest",xu(n,{right:1,top:2}),uf)},dp=function(n,a,i){return qu(sf(n),eC(n,a),i.northeast(),kw(),"northeast",xu(n,{left:0,bottom:3}),uf)},Qb=function(n,a,i){return qu(Yb(n,a),eC(n,a),i.northwest(),rp(),"northwest",xu(n,{right:1,bottom:3}),uf)},nC=function(){return[tC,fp,dp,Qb]},vp=function(){return[fp,tC,Qb,dp]},Jb=function(n,a,i){var s=Fw(i,a.item.element),f=Wb(n.element,a,nC(),vp(),nC(),vp(),$e.none());return $e.some(Vh({anchorBox:s,bubble:jb(),overrides:a.overrides,layouts:f,placer:$e.none()}))},$3=[yr("item"),qd(),En("overrides",{}),wi("placement",Jb)],rC=nc("type",{selection:cp,node:v3,hotspot:l3,submenu:$3,makeshift:mk}),Zb=[Is("classes",ou),ac("mode","all",["all","layout","placement"])],ns=[En("useFixed",xt),ti("getBounds")],V3=[pl("anchor",rC),Pl("transition",Zb)],zf=function(){var n=document.documentElement;return Z2(0,0,n.clientWidth,n.clientHeight)},Bk=function(n){var a=Vr(n.element),i=n.element.dom.getBoundingClientRect();return J2(a.left,a.top,i.width,i.height)},aC=function(n,a,i,s,f,d,b){var O=Hw(i.anchorBox,a);return r3(O,f.element,i.bubble,i.layouts,d,s,i.overrides,b)},mp=function(n,a,i,s,f){oC(n,a,i,s,f,$e.none())},oC=function(n,a,i,s,f,d){var b=d.map(au);return Gh(n,a,i,s,f,b)},Gh=function(n,a,i,s,f,d){var b=vi("placement.info",Ba(V3),f),O=b.anchor,Re=s.element,Qe=i.get(s.uid);Q2(function(){Qa(Re,"position","fixed");var ot=bu(Re,"visibility");Qa(Re,"visibility","hidden");var ct=a.useFixed()?zf():Bk(n),St=O.placement,At=d.map(Ke).or(a.getBounds);St(n,O,ct).each(function(It){var Yt=It.placer.getOr(aC),bn=Yt(n,ct,It,At,s,Qe,b.transition);i.set(s.uid,bn)}),ot.fold(function(){g(Re,"visibility")},function(It){Qa(Re,"visibility",It)}),bu(Re,"left").isNone()&&bu(Re,"top").isNone()&&bu(Re,"right").isNone()&&bu(Re,"bottom").isNone()&&Ua(bu(Re,"position"),"fixed")&&g(Re,"position")},Re)},U3=function(n,a,i){return a.useFixed()?"fixed":"absolute"},Pk=function(n,a,i,s){var f=s.element;en(["position","left","right","top","bottom"],function(d){return g(f,d)}),rk(f),i.clear(s.uid)},Ik=Object.freeze({__proto__:null,position:mp,positionWithin:oC,positionWithinBounds:Gh,getMode:U3,reset:Pk}),j3=function(){var n={},a=function(f,d){n[f]=d},i=function(f){return jn(n,f)},s=function(f){x(f)?delete n[f]:n={}};return yl({readState:function(){return n},clear:s,set:a,get:i})},iC=Object.freeze({__proto__:null,init:j3}),Yi=Bu({fields:ns,name:"positioning",active:Y2,apis:Ik,state:iC}),e0=function(n){$o(n,Nh());var a=n.components();en(a,e0)},t0=function(n){var a=n.components();en(a,t0),$o(n,Fl())},uC=function(n,a){Wo(n.element,a.element)},Fk=function(n){en(n.components(),function(a){return Uu(a.element)}),Ki(n.element),n.syncComponents()},sC=function(n,a){var i=n.components();Fk(n);var s=oa(i,a);en(s,function(f){e0(f),n.getSystem().removeFromWorld(f)}),en(a,function(f){f.getSystem().isConnected()?uC(n,f):(n.getSystem().addToWorld(f),uC(n,f),Ja(n.element)&&t0(f)),n.syncComponents()})},jv=function(n,a){Hk(n,a,Wo)},Hk=function(n,a,i){n.getSystem().addToWorld(a),i(n.element,a.element),Ja(n.element)&&t0(a),n.syncComponents()},Vl=function(n){e0(n),Uu(n.element),n.getSystem().removeFromWorld(n)},$f=function(n){var a=ru(n.element).bind(function(i){return n.getSystem().getByDom(i).toOptional()});Vl(n),a.each(function(i){i.syncComponents()})},lC=function(n){var a=n.components();en(a,Vl),Ki(n.element),n.syncComponents()},Gd=function(n,a){cf(n,a,Wo)},lf=function(n,a){cf(n,a,To)},cf=function(n,a,i){i(n,a.element);var s=lt(a.element);en(s,function(f){a.getByDom(f).each(t0)})},js=function(n){var a=lt(n.element);en(a,function(i){n.getByDom(i).each(e0)}),Uu(n.element)},ff=function(n,a,i,s){i.get().each(function(b){lC(n)});var f=a.getAttachPoint(n);jv(f,n);var d=n.getSystem().build(s);return jv(n,d),i.set(d),d},cC=function(n,a,i,s){var f=ff(n,a,i,s);return a.onOpen(n,f),f},Vf=function(n,a,i,s){return i.get().map(function(){return ff(n,a,i,s)})},Wv=function(n,a,i,s,f){jk(n,a),cC(n,a,i,s),f(),Wk(n,a)},zk=function(n,a,i){i.get().each(function(s){lC(n),$f(n),a.onClose(n,s),i.clear()})},$k=function(n,a,i){return i.isOpen()},W3=function(n,a,i,s){return $k(n,a,i)&&i.get().exists(function(f){return a.isPartOf(n,f,s)})},q3=function(n,a,i){return i.get()},Vk=function(n,a,i,s){bu(n.element,a).fold(function(){gu(n.element,i)},function(f){ho(n.element,i,f)}),Qa(n.element,a,s)},Uk=function(n,a,i){qi(n.element,i).fold(function(){return g(n.element,a)},function(s){return Qa(n.element,a,s)})},jk=function(n,a,i){var s=a.getAttachPoint(n);Qa(n.element,"position",Yi.getMode(s)),Vk(n,"visibility",a.cloakVisibilityAttr,"hidden")},K3=function(n){return on(["top","left","right","bottom"],function(a){return bu(n,a).isSome()})},Wk=function(n,a,i){K3(n.element)||g(n.element,"position"),Uk(n,"visibility",a.cloakVisibilityAttr)},G3=Object.freeze({__proto__:null,cloak:jk,decloak:Wk,open:cC,openWhileCloaked:Wv,close:zk,isOpen:$k,isPartOf:W3,getState:q3,setContent:Vf}),qk=function(n,a){return si([wr(Mh(),function(i,s){zk(i,n,a)})])},Kk=Object.freeze({__proto__:null,events:qk}),fC=[qo("onOpen"),qo("onClose"),yr("isPartOf"),yr("getAttachPoint"),En("cloakVisibilityAttr","data-precloak-visibility")],Gk=function(){var n=Xi(),a=Ke("not-implemented");return yl({readState:a,isOpen:n.isSet,clear:n.clear,set:n.set,get:n.get})},X3=Object.freeze({__proto__:null,init:Gk}),Do=Bu({fields:fC,name:"sandboxing",active:Kk,apis:G3,state:X3}),qv=Ke("dismiss.popups"),pp=Ke("reposition.popups"),dC=Ke("mouse.released"),Y3=Bl([En("isExtraPart",xt),Pl("fireEventInstead",[En("event",Qc())])]),Sl=function(n){var a,i=vi("Dismissal",Y3,n);return a={},a[qv()]={schema:Bl([yr("target")]),onReceive:function(s,f){if(Do.isOpen(s)){var d=Do.isPartOf(s,f.target)||i.isExtraPart(s,f.target);d||i.fireEventInstead.fold(function(){return Do.close(s)},function(b){return $o(s,b.event)})}}},a},Q3=Bl([Pl("fireEventInstead",[En("event",fs())]),_s("doReposition")]),Kv=function(n){var a,i=vi("Reposition",Q3,n);return a={},a[pp()]={onReceive:function(s){Do.isOpen(s)&&i.fireEventInstead.fold(function(){return i.doReposition(s)},function(f){return $o(s,f.event)})}},a},Xd=function(n,a,i){a.store.manager.onLoad(n,a,i)},n0=function(n,a,i){a.store.manager.onUnload(n,a,i)},r0=function(n,a,i,s){a.store.manager.setValue(n,a,i,s)},J3=function(n,a,i){return a.store.manager.getValue(n,a,i)},Xk=function(n,a,i){return i},vC=Object.freeze({__proto__:null,onLoad:Xd,onUnload:n0,setValue:r0,getValue:J3,getState:Xk}),mC=function(n,a){var i=n.resetOnDom?[go(function(s,f){Xd(s,n,a)}),sc(function(s,f){n0(s,n,a)})]:[Ff(n,a,Xd)];return si(i)},hp=Object.freeze({__proto__:null,events:mC}),a0=function(){var n=Va(null),a=function(){return{mode:"memory",value:n.get()}},i=function(){return n.get()===null},s=function(){n.set(null)};return yl({set:n.set,get:n.get,isNotSet:i,clear:s,readState:a})},Z3=function(){var n=He;return yl({readState:n})},Uf=function(){var n=Va({}),a=Va({}),i=function(){return{mode:"dataset",dataByValue:n.get(),dataByText:a.get()}},s=function(){n.set({}),a.set({})},f=function(b){return jn(n.get(),b).orThunk(function(){return jn(a.get(),b)})},d=function(b){var O=n.get(),Re=a.get(),Qe={},ot={};en(b,function(ct){Qe[ct.value]=ct,jn(ct,"meta").each(function(St){jn(St,"text").each(function(At){ot[At]=ct})})}),n.set(ut(ut({},O),Qe)),a.set(ut(ut({},Re),ot))};return yl({readState:i,lookup:f,update:d,clear:s})},pC=function(n){return n.store.manager.state(n)},hC=Object.freeze({__proto__:null,memory:a0,dataset:Uf,manual:Z3,init:pC}),Xh=function(n,a,i,s){var f=a.store;i.update([s]),f.setValue(n,s),a.onSetValue(n,s)},Yk=function(n,a,i){var s=a.store,f=s.getDataKey(n);return i.lookup(f).getOrThunk(function(){return s.getFallbackEntry(f)})},o0=function(n,a,i){var s=a.store;s.initialValue.each(function(f){Xh(n,a,i,f)})},eR=function(n,a,i){i.clear()},tR=[ti("initialValue"),yr("getFallbackEntry"),yr("getDataKey"),yr("setValue"),wi("manager",{setValue:Xh,getValue:Yk,onLoad:o0,onUnload:eR,state:Uf})],jf=function(n,a,i){return a.store.getValue(n)},Ul=function(n,a,i,s){a.store.setValue(n,s),a.onSetValue(n,s)},rs=function(n,a,i){a.store.initialValue.each(function(s){a.store.setValue(n,s)})},nR=[yr("getValue"),En("setValue",He),ti("initialValue"),wi("manager",{setValue:Ul,getValue:jf,onLoad:rs,onUnload:He,state:Fs.init})],gC=function(n,a,i,s){i.set(s),a.onSetValue(n,s)},gp=function(n,a,i){return i.get()},Qk=function(n,a,i){a.store.initialValue.each(function(s){i.isNotSet()&&i.set(s)})},Jk=function(n,a,i){i.clear()},rR=[ti("initialValue"),wi("manager",{setValue:gC,getValue:gp,onLoad:Qk,onUnload:Jk,state:a0})],aR=[gl("store",{mode:"memory"},nc("mode",{memory:rR,manual:nR,dataset:tR})),qo("onSetValue"),En("resetOnDom",!1)],Xr=Bu({fields:aR,name:"representing",active:hp,apis:vC,extra:{setValueFrom:function(n,a){var i=Xr.getValue(a);Xr.setValue(n,i)}},state:hC}),Eu=function(n,a){return Vy(n,{},dn(a,function(i){return Fm(i.name(),"Cannot configure "+i.name()+" for "+n)}).concat([rl("dump",tt)]))},i0=function(n){return n.dump},Ku=function(n,a){return ut(ut({},Hr(a)),n.dump)},fc={field:Eu,augment:Ku,get:i0},bC="placeholder",Yh=ic.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),u0=function(n){return pr(n,"uiType")},s0=function(n,a,i,s){return n.exists(function(f){return f!==i.owner})?Yh.single(!0,Ke(i)):jn(s,i.name).fold(function(){throw new Error("Unknown placeholder component: "+i.name+`
Known: [`+Rn(s)+`]
Namespace: `+n.getOr("none")+`
Spec: `+JSON.stringify(i,null,2))},function(f){return f.replace()})},Zk=function(n,a,i,s){return u0(i)&&i.uiType===bC?s0(n,a,i,s):Yh.single(!1,Ke(i))},Gv=function(n,a,i,s){var f=Zk(n,a,i,s);return f.fold(function(d,b){var O=u0(i)?b(a,i.config,i.validated):b(a),Re=jn(O,"components").getOr([]),Qe=Mn(Re,function(ot){return Gv(n,a,ot,s)});return[ut(ut({},O),{components:Qe})]},function(d,b){if(u0(i)){var O=b(a,i.config,i.validated),Re=i.validated.preprocess.getOr(tt);return Re(O)}else return b(a)})},Qh=function(n,a,i,s){return Mn(i,function(f){return Gv(n,a,f,s)})},yC=function(n,a){var i=!1,s=function(){return i},f=function(){if(i)throw new Error("Trying to use the same placeholder more than once: "+n);return i=!0,a},d=function(){return a.fold(function(b,O){return b},function(b,O){return b})};return{name:Ke(n),required:d,used:s,replace:f}},oR=function(n,a,i,s){var f=br(s,function(b,O){return yC(O,b)}),d=Qh(n,a,i,f);return Pr(f,function(b){if(b.used()===!1&&b.required())throw new Error("Placeholder: "+b.name()+` was not found in components list
Namespace: `+n.getOr("none")+`
Components: `+JSON.stringify(a.components,null,2))}),d},eA=Yh.single,iR=Yh.multiple,tA=Ke(bC),Jh=ic.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),ld=En("factory",{sketch:tt}),Xv=En("schema",[]),l0=yr("name"),wC=Ru("pname","pname",Po(function(n){return"<alloy."+ya(n.name)+">"}),qc()),nA=rl("schema",function(){return[ti("preprocess")]}),bp=En("defaults",Ke({})),yp=En("overrides",Ke({})),CC=Ba([ld,Xv,l0,wC,bp,yp]),c0=Ba([ld,Xv,l0,bp,yp]),SC=Ba([ld,Xv,l0,wC,bp,yp]),xC=Ba([ld,nA,l0,yr("unit"),wC,bp,yp]),rA=function(n){return n.fold($e.some,$e.none,$e.some,$e.some)},aA=function(n){var a=function(i){return i.name};return n.fold(a,a,a,a)},EC=function(n){return n.fold(tt,tt,tt,tt)},f0=function(n,a){return function(i){var s=vi("Converting part type",a,i);return n(s)}},hs=f0(Jh.required,CC),_c=f0(Jh.external,c0),Oc=f0(Jh.optional,SC),d0=f0(Jh.group,xC),kC=Ke("entirety"),oA=Object.freeze({__proto__:null,required:hs,external:_c,optional:Oc,group:d0,asNamedPart:rA,name:aA,asCommon:EC,original:kC}),Yv=function(n,a,i,s){return nr(a.defaults(n,i,s),i,{uid:n.partUids[a.name]},a.overrides(n,i,s))},wp=function(n,a,i){var s={},f={};return en(i,function(d){d.fold(function(b){s[b.pname]=eA(!0,function(O,Re,Qe){return b.factory.sketch(Yv(O,b,Re,Qe))})},function(b){var O=a.parts[b.name];f[b.name]=Ke(b.factory.sketch(Yv(a,b,O[kC()]),O))},function(b){s[b.pname]=eA(!1,function(O,Re,Qe){return b.factory.sketch(Yv(O,b,Re,Qe))})},function(b){s[b.pname]=iR(!0,function(O,Re,Qe){var ot=O[b.name];return dn(ot,function(ct){return b.factory.sketch(nr(b.defaults(O,ct,Qe),ct,b.overrides(O,ct)))})})})}),{internals:Ke(s),externals:Ke(f)}},Zh=function(n,a){var i={};return en(a,function(s){rA(s).each(function(f){var d=uR(n,f.pname);i[f.name]=function(b){var O=vi("Part: "+f.name+" in "+n,Ba(f.schema),b);return ut(ut({},d),{config:b,validated:O})}})}),i},uR=function(n,a){return{uiType:tA(),owner:n,name:a}},AC=function(n,a,i){return{uiType:tA(),owner:n,name:a,config:i,validated:{}}},iA=function(n){return Mn(n,function(a){return a.fold($e.none,$e.some,$e.none,$e.none).map(function(i){return id(i.name,i.schema.concat([Hv(kC())]))}).toArray()})},uA=function(n){return dn(n,aA)},TC=function(n,a,i){return wp(n,a,i)},_C=function(n,a,i){return oR($e.some(n),a,a.components,i)},li=function(n,a,i){var s=a.partUids[i];return n.getSystem().getByUid(s).toOptional()},Wf=function(n,a,i){return li(n,a,i).getOrDie("Could not find part: "+i)},sA=function(n,a,i){var s={},f=a.partUids,d=n.getSystem();return en(i,function(b){s[b]=Ke(d.getByUid(f[b]))}),s},lA=function(n,a){var i=n.getSystem();return br(a.partUids,function(s,f){return Ke(i.getByUid(s))})},cA=function(n){return Rn(n.partUids)},v0=function(n,a,i){var s={},f=a.partUids,d=n.getSystem();return en(i,function(b){s[b]=Ke(d.getByUid(f[b]).getOrDie())}),s},OC=function(n,a){var i=uA(a);return Mv(dn(i,function(s){return{key:s,value:n+"-"+s}}))},eg=function(n){return Ru("partUids","partUids",Ts(function(a){return OC(a.uid,n)}),qc())},qa=Object.freeze({__proto__:null,generate:Zh,generateOne:AC,schemas:iA,names:uA,substitutes:TC,components:_C,defaultUids:OC,defaultUidsSchema:eg,getAllParts:lA,getAllPartNames:cA,getPart:li,getPartOrDie:Wf,getParts:sA,getPartsOrDie:v0}),sR=function(n,a){var i=n.length>0?[id("parts",n)]:[];return i.concat([yr("uid"),En("dom",{}),En("components",[]),Hv("originalSpec"),En("debug.sketcher",{})]).concat(a)},MC=function(n,a,i,s,f){var d=sR(s,f);return vi(n+" [SpecSchema]",Bl(d.concat(a)),i)},lR=function(n,a,i,s){var f=fA(s),d=MC(n,a,f,[],[]);return i(d,f)},DC=function(n,a,i,s,f){var d=fA(f),b=iA(i),O=eg(i),Re=MC(n,a,d,b,[O]),Qe=TC(n,Re,i),ot=_C(n,Re,Qe.internals());return s(Re,ot,d,Qe.externals())},cR=function(n){return pr(n,"uid")},fA=function(n){return cR(n)?n:ut(ut({},n),{uid:Bd("uid")})},NC=function(n){return n.uid!==void 0},LC=Bl([yr("name"),yr("factory"),yr("configFields"),En("apis",{}),En("extraApis",{})]),fR=Bl([yr("name"),yr("factory"),yr("configFields"),yr("partFields"),En("apis",{}),En("extraApis",{})]),jl=function(n){var a=vi("Sketcher for "+n.name,LC,n),i=function(d){return lR(a.name,a.configFields,a.factory,d)},s=br(a.apis,Gi),f=br(a.extraApis,function(d,b){return uw(d,b)});return ut(ut({name:a.name,configFields:a.configFields,sketch:i},s),f)},Ws=function(n){var a=vi("Sketcher for "+n.name,fR,n),i=function(b){return DC(a.name,a.configFields,a.partFields,a.factory,b)},s=Zh(a.name,a.partFields),f=br(a.apis,Gi),d=br(a.extraApis,function(b,O){return uw(b,O)});return ut(ut({name:a.name,partFields:a.partFields,configFields:a.configFields,sketch:i,parts:s},f),d)},Yd=function(n){return Zt(n)==="input"&&Ti(n,"type")!=="radio"||Zt(n)==="textarea"},dR=function(n,a,i){return a.find(n)},vR=Object.freeze({__proto__:null,getCurrent:dR}),dA=[yr("find")],Oo=Bu({fields:dA,name:"composing",apis:vR}),mR=["input","button","textarea","select"],m0=function(n,a,i){var s=a.disabled()?RC:y0;s(n,a)},p0=function(n,a){return a.useNative===!0&&ln(mR,Zt(n.element))},h0=function(n){return Mm(n.element,"disabled")},g0=function(n){ho(n.element,"disabled","disabled")},b0=function(n){gu(n.element,"disabled")},tg=function(n){return Ti(n.element,"aria-disabled")==="true"},pR=function(n){ho(n.element,"aria-disabled","true")},hR=function(n){ho(n.element,"aria-disabled","false")},RC=function(n,a,i){a.disableClass.each(function(f){Cu(n.element,f)});var s=p0(n,a)?g0:pR;s(n),a.onDisabled(n)},y0=function(n,a,i){a.disableClass.each(function(f){cu(n.element,f)});var s=p0(n,a)?b0:hR;s(n),a.onEnabled(n)},vA=function(n,a){return p0(n,a)?h0(n):tg(n)},gR=function(n,a,i,s){var f=s?RC:y0;f(n,a)},bR=Object.freeze({__proto__:null,enable:y0,disable:RC,isDisabled:vA,onLoad:m0,set:gR}),yR=function(n,a){return Ac({classes:a.disabled()?a.disableClass.toArray():[]})},wR=function(n,a){return si([C2(Il(),function(i,s){return vA(i,n)}),Ff(n,a,m0)])},BC=Object.freeze({__proto__:null,exhibit:yR,events:wR}),CR=[hi("disabled",xt),En("useNative",!0),ti("disableClass"),qo("onDisabled"),qo("onEnabled")],Pa=Bu({fields:CR,name:"disabling",active:BC,apis:bR}),mA=function(n,a,i,s){var f=Us(n.element,"."+a.highlightClass);en(f,function(d){on(s,function(b){return b.element===d})||(cu(d,a.highlightClass),n.getSystem().getByDom(d).each(function(b){a.onDehighlight(n,b),$o(b,pb())}))})},pA=function(n,a,i){return mA(n,a,i,[])},SR=function(n,a,i,s){PC(n,a,i,s)&&(cu(s.element,a.highlightClass),a.onDehighlight(n,s),$o(s,pb()))},ng=function(n,a,i,s){mA(n,a,i,[s]),PC(n,a,i,s)||(Cu(s.element,a.highlightClass),a.onHighlight(n,s),$o(s,rw()))},hA=function(n,a,i){FC(n,a).each(function(s){ng(n,a,i,s)})},gA=function(n,a,i){HC(n,a).each(function(s){ng(n,a,i,s)})},xR=function(n,a,i,s){yA(n,a,i,s).fold(function(f){throw f},function(f){ng(n,a,i,f)})},bA=function(n,a,i,s){var f=CA(n,a),d=Gn(f,s);d.each(function(b){ng(n,a,i,b)})},PC=function(n,a,i,s){return Hs(s.element,a.highlightClass)},IC=function(n,a,i){return Su(n.element,"."+a.highlightClass).bind(function(s){return n.getSystem().getByDom(s).toOptional()})},yA=function(n,a,i,s){var f=Us(n.element,"."+a.itemClass);return $e.from(f[s]).fold(function(){return So.error(new Error("No element found with index "+s))},n.getSystem().getByDom)},FC=function(n,a,i){return Su(n.element,"."+a.itemClass).bind(function(s){return n.getSystem().getByDom(s).toOptional()})},HC=function(n,a,i){var s=Us(n.element,"."+a.itemClass),f=s.length>0?$e.some(s[s.length-1]):$e.none();return f.bind(function(d){return n.getSystem().getByDom(d).toOptional()})},wA=function(n,a,i,s){var f=Us(n.element,"."+a.itemClass),d=va(f,function(b){return Hs(b,a.highlightClass)});return d.bind(function(b){var O=ts(b,s,0,f.length-1);return n.getSystem().getByDom(f[O]).toOptional()})},ER=function(n,a,i){return wA(n,a,i,-1)},kR=function(n,a,i){return wA(n,a,i,1)},CA=function(n,a,i){var s=Us(n.element,"."+a.itemClass);return Xa(dn(s,function(f){return n.getSystem().getByDom(f).toOptional()}))},AR=Object.freeze({__proto__:null,dehighlightAll:pA,dehighlight:SR,highlight:ng,highlightFirst:hA,highlightLast:gA,highlightAt:xR,highlightBy:bA,isHighlighted:PC,getHighlighted:IC,getFirst:FC,getLast:HC,getPrevious:ER,getNext:kR,getCandidates:CA}),rg=[yr("highlightClass"),yr("itemClass"),qo("onHighlight"),qo("onDehighlight")],ni=Bu({fields:rg,name:"highlighting",apis:AR}),TR=[8],cd=[9],Mc=[13],w0=[27],xl=[32],C0=[37],Qv=[38],S0=[39],Cp=[40],_R=function(n,a,i){var s=Yr(n.slice(0,a)),f=Yr(n.slice(a+1));return Gn(s.concat(f),i)},OR=function(n,a,i){var s=Yr(n.slice(0,a));return Gn(s,i)},MR=function(n,a,i){var s=n.slice(0,a),f=n.slice(a+1);return Gn(f.concat(s),i)},DR=function(n,a,i){var s=n.slice(a+1);return Gn(s,i)},ko=function(n){return function(a){var i=a.raw;return ln(n,i.which)}},df=function(n){return function(a){return Rr(n,function(i){return i(a)})}},Sp=function(n){var a=n.raw;return a.shiftKey===!0},NR=function(n){var a=n.raw;return a.ctrlKey===!0},ag=Ot(Sp),Bo=function(n,a){return{matches:n,classification:a}},LR=function(n,a){var i=Gn(n,function(s){return s.matches(a)});return i.map(function(s){return s.classification})},SA=function(n,a,i){var s=a.exists(function(f){return i.exists(function(d){return bi(d,f)})});s||za(n,vb(),{prevFocus:a,newFocus:i})},og=function(){var n=function(i){return af(i.element)},a=function(i,s){var f=n(i);i.getSystem().triggerFocus(s,i.element);var d=n(i);SA(i,f,d)};return{get:n,set:a}},xA=function(){var n=function(i){return ni.getHighlighted(i).map(function(s){return s.element})},a=function(i,s){var f=n(i);i.getSystem().getByDom(s).fold(He,function(b){ni.highlight(i,b)});var d=n(i);SA(i,f,d)};return{get:n,set:a}},ig;(function(n){n.OnFocusMode="onFocus",n.OnEnterOrSpaceMode="onEnterOrSpace",n.OnApiMode="onApi"})(ig||(ig={}));var Jv=function(n,a,i,s,f){var d=function(){return n.concat([En("focusManager",og()),gl("focusInside","onFocus",Pm(function(Qe){return ln(["onFocus","onEnterOrSpace","onApi"],Qe)?So.value(Qe):So.error("Invalid value for focusInside")})),wi("handler",Re),wi("state",a),wi("sendFocusIn",f)])},b=function(Qe,ot,ct,St,At){var It=ct(Qe,ot,St,At);return LR(It,ot.event).bind(function(Yt){return Yt(Qe,ot,St,At)})},O=function(Qe,ot){var ct=Qe.focusInside!==ig.OnFocusMode?$e.none():f(Qe).map(function(It){return wr(Um(),function(Yt,bn){It(Yt,Qe,ot),bn.stop()})}),St=function(It,Yt){var bn=ko(xl.concat(Mc))(Yt.event);Qe.focusInside===ig.OnEnterOrSpaceMode&&bn&&h2(It,Yt)&&f(Qe).each(function(jt){jt(It,Qe,ot),Yt.stop()})},At=[wr(fb(),function(It,Yt){b(It,Yt,i,Qe,ot).fold(function(){St(It,Yt)},function(bn){Yt.stop()})}),wr(b2(),function(It,Yt){b(It,Yt,s,Qe,ot).each(function(bn){Yt.stop()})})];return si(ct.toArray().concat(At))},Re={schema:d,processKey:b,toEvents:O};return Re},zC=function(n){var a=[ti("onEscape"),ti("onEnter"),En("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),En("firstTabstop",0),En("useTabstopAt",it),ti("visibilitySelector")].concat([n]),i=function(Yt,bn){var jt=Yt.visibilitySelector.bind(function(Sn){return tf(bn,Sn)}).getOr(bn);return Ue(jt)>0},s=function(Yt,bn){var jt=Us(Yt.element,bn.selector),Sn=cn(jt,function(Xn){return i(bn,Xn)});return $e.from(Sn[bn.firstTabstop])},f=function(Yt,bn){return bn.focusManager.get(Yt).bind(function(jt){return tf(jt,bn.selector)})},d=function(Yt,bn){return i(Yt,bn)&&Yt.useTabstopAt(bn)},b=function(Yt,bn,jt){s(Yt,bn).each(function(Sn){bn.focusManager.set(Yt,Sn)})},O=function(Yt,bn,jt,Sn,Xn){return Xn(bn,jt,function(Kn){return d(Sn,Kn)}).fold(function(){return Sn.cyclic?$e.some(!0):$e.none()},function(Kn){return Sn.focusManager.set(Yt,Kn),$e.some(!0)})},Re=function(Yt,bn,jt,Sn){var Xn=Us(Yt.element,jt.selector);return f(Yt,jt).bind(function(Kn){var wn=va(Xn,et(bi,Kn));return wn.bind(function($n){return O(Yt,Xn,$n,jt,Sn)})})},Qe=function(Yt,bn,jt){var Sn=jt.cyclic?_R:OR;return Re(Yt,bn,jt,Sn)},ot=function(Yt,bn,jt){var Sn=jt.cyclic?MR:DR;return Re(Yt,bn,jt,Sn)},ct=function(Yt,bn,jt){return jt.onEnter.bind(function(Sn){return Sn(Yt,bn)})},St=function(Yt,bn,jt){return jt.onEscape.bind(function(Sn){return Sn(Yt,bn)})},At=Ke([Bo(df([Sp,ko(cd)]),Qe),Bo(ko(cd),ot),Bo(ko(w0),St),Bo(df([ag,ko(Mc)]),ct)]),It=Ke([]);return Jv(a,Fs.init,At,It,function(){return $e.some(b)})},$C=zC(rl("cyclic",xt)),EA=zC(rl("cyclic",it)),kA=function(n,a,i){return hb(n,i,Il()),$e.some(!0)},ug=function(n,a,i){var s=Yd(i)&&ko(xl)(a.event);return s?$e.none():kA(n,a,i)},xp=function(n,a){return $e.some(!0)},RR=[En("execute",ug),En("useSpace",!1),En("useEnter",!0),En("useControlEnter",!1),En("useDown",!1)],AA=function(n,a,i){return i.execute(n,a,n.element)},x0=function(n,a,i,s){var f=i.useSpace&&!Yd(n.element)?xl:[],d=i.useEnter?Mc:[],b=i.useDown?Cp:[],O=f.concat(d).concat(b);return[Bo(ko(O),AA)].concat(i.useControlEnter?[Bo(df([NR,ko(Mc)]),AA)]:[])},BR=function(n,a,i,s){return i.useSpace&&!Yd(n.element)?[Bo(ko(xl),xp)]:[]},VC=Jv(RR,Fs.init,x0,BR,function(){return $e.none()}),TA=function(){var n=Xi(),a=function(f,d){n.set({numRows:f,numColumns:d})},i=function(){return n.get().map(function(f){return f.numRows})},s=function(){return n.get().map(function(f){return f.numColumns})};return yl({readState:function(){return n.get().map(function(f){return{numRows:String(f.numRows),numColumns:String(f.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:a,getNumRows:i,getNumColumns:s})},PR=function(n){return n.state(n)},_A=Object.freeze({__proto__:null,flatgrid:TA,init:PR}),OA=function(n){return function(a,i,s,f){var d=n(a.element);return MA(d,a,i,s,f)}},UC=function(n,a){var i=qw(n,a);return OA(i)},jC=function(n,a){var i=qw(a,n);return OA(i)},WC=function(n){return function(a,i,s,f){return MA(n,a,i,s,f)}},MA=function(n,a,i,s,f){var d=s.focusManager.get(a).bind(function(b){return n(a.element,b,s,f)});return d.map(function(b){return s.focusManager.set(a,b),!0})},DA=WC,Ep=WC,kp=WC,IR=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0},NA=function(n){return!IR(n.dom)},E0=function(n,a){return va(n,a).map(function(i){return{index:i,candidates:n}})},LA=function(n,a,i){var s=function(b){return bi(b,a)},f=Us(n,i),d=cn(f,NA);return E0(d,s)},RA=function(n,a){return va(n,function(i){return bi(a,i)})},BA=function(n,a,i,s){var f=Math.floor(a/i),d=a%i;return s(f,d).bind(function(b){var O=b.row*i+b.column;return O>=0&&O<n.length?$e.some(n[O]):$e.none()})},PA=function(n,a,i,s,f){return BA(n,a,s,function(d,b){var O=d===i-1,Re=O?n.length-d*s:s,Qe=ts(b,f,0,Re-1);return $e.some({row:d,column:Qe})})},IA=function(n,a,i,s,f){return BA(n,a,s,function(d,b){var O=ts(d,f,0,i-1),Re=O===i-1,Qe=Re?n.length-O*s:s,ot=Cl(b,0,Qe-1);return $e.some({row:O,column:ot})})},FR=function(n,a,i,s){return PA(n,a,i,s,1)},HR=function(n,a,i,s){return PA(n,a,i,s,-1)},FA=function(n,a,i,s){return IA(n,a,i,s,-1)},qC=function(n,a,i,s){return IA(n,a,i,s,1)},zR=[yr("selector"),En("execute",ug),wl("onEscape"),En("captureTab",!1),Nb()],$R=function(n,a,i){Su(n.element,a.selector).each(function(s){a.focusManager.set(n,s)})},VR=function(n,a){return a.focusManager.get(n).bind(function(i){return tf(i,a.selector)})},UR=function(n,a,i,s){return VR(n,i).bind(function(f){return i.execute(n,a,f)})},qf=function(n){return function(a,i,s,f){return LA(a,i,s.selector).bind(function(d){return n(d.candidates,d.index,f.getNumRows().getOr(s.initSize.numRows),f.getNumColumns().getOr(s.initSize.numColumns))})}},HA=function(n,a,i){return i.captureTab?$e.some(!0):$e.none()},jR=function(n,a,i){return i.onEscape(n,a)},k0=qf(HR),zA=qf(FR),$A=qf(FA),VA=qf(qC),UA=Ke([Bo(ko(C0),UC(k0,zA)),Bo(ko(S0),jC(k0,zA)),Bo(ko(Qv),DA($A)),Bo(ko(Cp),Ep(VA)),Bo(df([Sp,ko(cd)]),HA),Bo(df([ag,ko(cd)]),HA),Bo(ko(w0),jR),Bo(ko(xl.concat(Mc)),UR)]),jA=Ke([Bo(ko(xl),xp)]),WR=Jv(zR,TA,UA,jA,function(){return $e.some($R)}),A0=function(n,a,i,s){var f=function(b){return Zt(b)==="button"&&Ti(b,"disabled")==="disabled"},d=function(b,O,Re){var Qe=ts(O,s,0,Re.length-1);return Qe===b?$e.none():f(Re[Qe])?d(b,Qe,Re):$e.from(Re[Qe])};return LA(n,i,a).bind(function(b){var O=b.index,Re=b.candidates;return d(O,O,Re)})},qR=[yr("selector"),En("getInitial",$e.none),En("execute",ug),wl("onEscape"),En("executeOnMove",!1),En("allowVertical",!0)],KC=function(n,a){return a.focusManager.get(n).bind(function(i){return tf(i,a.selector)})},GC=function(n,a,i){return KC(n,i).bind(function(s){return i.execute(n,a,s)})},T0=function(n,a,i){a.getInitial(n).orThunk(function(){return Su(n.element,a.selector)}).each(function(s){a.focusManager.set(n,s)})},WA=function(n,a,i){return A0(n,i.selector,a,-1)},XC=function(n,a,i){return A0(n,i.selector,a,1)},dc=function(n){return function(a,i,s,f){return n(a,i,s,f).bind(function(){return s.executeOnMove?GC(a,i,s):$e.some(!0)})}},KR=function(n,a,i){return i.onEscape(n,a)},qA=function(n,a,i,s){var f=C0.concat(i.allowVertical?Qv:[]),d=S0.concat(i.allowVertical?Cp:[]);return[Bo(ko(f),dc(UC(WA,XC))),Bo(ko(d),dc(jC(WA,XC))),Bo(ko(Mc),GC),Bo(ko(xl),GC),Bo(ko(w0),KR)]},KA=Ke([Bo(ko(xl),xp)]),GR=Jv(qR,Fs.init,qA,KA,function(){return $e.some(T0)}),sg=function(n,a,i){return $e.from(n[a]).bind(function(s){return $e.from(s[i]).map(function(f){return{rowIndex:a,columnIndex:i,cell:f}})})},YC=function(n,a,i,s){var f=n[a],d=f.length,b=ts(i,s,0,d-1);return sg(n,a,b)},QC=function(n,a,i,s){var f=ts(i,s,0,n.length-1),d=n[f].length,b=Cl(a,0,d-1);return sg(n,f,b)},GA=function(n,a,i,s){var f=n[a],d=f.length,b=Cl(i+s,0,d-1);return sg(n,a,b)},XA=function(n,a,i,s){var f=Cl(i+s,0,n.length-1),d=n[f].length,b=Cl(a,0,d-1);return sg(n,f,b)},XR=function(n,a,i){return YC(n,a,i,1)},YR=function(n,a,i){return YC(n,a,i,-1)},YA=function(n,a,i){return QC(n,i,a,-1)},QR=function(n,a,i){return QC(n,i,a,1)},JR=function(n,a,i){return GA(n,a,i,-1)},QA=function(n,a,i){return GA(n,a,i,1)},ZR=function(n,a,i){return XA(n,i,a,-1)},e4=function(n,a,i){return XA(n,i,a,1)},t4=[id("selectors",[yr("row"),yr("cell")]),En("cycles",!0),En("previousSelector",$e.none),En("execute",ug)],n4=function(n,a,i){var s=a.previousSelector(n).orThunk(function(){var f=a.selectors;return Su(n.element,f.cell)});s.each(function(f){a.focusManager.set(n,f)})},r4=function(n,a,i){return af(n.element).bind(function(s){return i.execute(n,a,s)})},JA=function(n,a){return dn(n,function(i){return Us(i,a.selectors.cell)})},lg=function(n,a){return function(i,s,f){var d=f.cycles?n:a;return tf(s,f.selectors.row).bind(function(b){var O=Us(b,f.selectors.cell);return RA(O,s).bind(function(Re){var Qe=Us(i,f.selectors.row);return RA(Qe,b).bind(function(ot){var ct=JA(Qe,f);return d(ct,ot,Re).map(function(St){return St.cell})})})})}},JC=lg(YR,JR),Zv=lg(XR,QA),ZA=lg(YA,ZR),eT=lg(QR,e4),ZC=Ke([Bo(ko(C0),UC(JC,Zv)),Bo(ko(S0),jC(JC,Zv)),Bo(ko(Qv),DA(ZA)),Bo(ko(Cp),Ep(eT)),Bo(ko(xl.concat(Mc)),r4)]),a4=Ke([Bo(ko(xl),xp)]),o4=Jv(t4,Fs.init,ZC,a4,function(){return $e.some(n4)}),i4=[yr("selector"),En("execute",ug),En("moveOnTab",!1)],tT=function(n,a,i){return i.focusManager.get(n).bind(function(s){return i.execute(n,a,s)})},nT=function(n,a,i){Su(n.element,a.selector).each(function(s){a.focusManager.set(n,s)})},_0=function(n,a,i){return A0(n,i.selector,a,-1)},O0=function(n,a,i){return A0(n,i.selector,a,1)},u4=function(n,a,i,s){return i.moveOnTab?kp(_0)(n,a,i,s):$e.none()},Qd=function(n,a,i,s){return i.moveOnTab?kp(O0)(n,a,i,s):$e.none()},rT=Ke([Bo(ko(Qv),kp(_0)),Bo(ko(Cp),kp(O0)),Bo(df([Sp,ko(cd)]),u4),Bo(df([ag,ko(cd)]),Qd),Bo(ko(Mc),tT),Bo(ko(xl),tT)]),aT=Ke([Bo(ko(xl),xp)]),s4=Jv(i4,Fs.init,rT,aT,function(){return $e.some(nT)}),l4=[wl("onSpace"),wl("onEnter"),wl("onShiftEnter"),wl("onLeft"),wl("onRight"),wl("onTab"),wl("onShiftTab"),wl("onUp"),wl("onDown"),wl("onEscape"),En("stopSpaceKeyup",!1),ti("focusIn")],Ap=function(n,a,i){return[Bo(ko(xl),i.onSpace),Bo(df([ag,ko(Mc)]),i.onEnter),Bo(df([Sp,ko(Mc)]),i.onShiftEnter),Bo(df([Sp,ko(cd)]),i.onShiftTab),Bo(df([ag,ko(cd)]),i.onTab),Bo(ko(Qv),i.onUp),Bo(ko(Cp),i.onDown),Bo(ko(C0),i.onLeft),Bo(ko(S0),i.onRight),Bo(ko(xl),i.onSpace),Bo(ko(w0),i.onEscape)]},Tp=function(n,a,i){return i.stopSpaceKeyup?[Bo(ko(xl),xp)]:[]},oT=Jv(l4,Fs.init,Ap,Tp,function(n){return n.focusIn}),iT=$C.schema(),Jd=EA.schema(),Zd=GR.schema(),c4=WR.schema(),f4=o4.schema(),em=VC.schema(),d4=s4.schema(),v4=oT.schema(),m4=Object.freeze({__proto__:null,acyclic:iT,cyclic:Jd,flow:Zd,flatgrid:c4,matrix:f4,execution:em,menu:d4,special:v4}),uT=function(n){return aa(n,"setGridSize")},Da=ip({branchKey:"mode",branches:m4,name:"keying",active:{events:function(n,a){var i=n.handler;return i.toEvents(n,a)}},apis:{focusIn:function(n,a,i){a.sendFocusIn(a).fold(function(){n.getSystem().triggerFocus(n.element,n.element)},function(s){s(n,a,i)})},setGridSize:function(n,a,i,s,f){uT(i)&&i.setGridSize(s,f)}},state:_A}),eS=function(n,a,i,s){Q2(function(){var f=dn(s,n.getSystem().build);sC(n,f)},n.element)},M0=function(n,a,i,s){var f=n.getSystem().build(s);Hk(n,f,i)},sT=function(n,a,i,s){M0(n,a,Wo,s)},lT=function(n,a,i,s){M0(n,a,di,s)},D0=function(n,a,i,s){var f=cg(n),d=Gn(f,function(b){return bi(s.element,b.element)});d.each($f)},cg=function(n,a){return n.components()},cT=function(n,a,i,s,f){var d=cg(n);return $e.from(d[s]).map(function(b){return D0(n,a,i,b),f.each(function(O){M0(n,a,function(Re,Qe){ls(Re,Qe,s)},O)}),b})},p4=function(n,a,i,s,f){var d=cg(n);return va(d,s).bind(function(b){return cT(n,a,i,b,f)})},h4=Object.freeze({__proto__:null,append:sT,prepend:lT,remove:D0,replaceAt:cT,replaceBy:p4,set:eS,contents:cg}),eo=Bu({fields:[],name:"replacing",apis:h4}),tS=function(n,a){var i=si(a);return Bu({fields:[yr("enabled")],name:n,active:{events:Ke(i)}})},mo=function(n,a){var i=tS(n,a);return{key:n,value:{config:{},me:i,configAsRaw:Ke({}),initialConfig:{},state:Fs}}},fT=function(n,a){a.ignore||(nf(n.element),a.onFocus(n))},g4=function(n,a){a.ignore||Bw(n.element)},dT=function(n){return Pw(n.element)},vT=Object.freeze({__proto__:null,focus:fT,blur:g4,isFocused:dT}),mT=function(n,a){var i=a.ignore?{}:{attributes:{tabindex:"-1"}};return Ac(i)},pT=function(n){return si([wr(Um(),function(a,i){fT(a,n),i.stop()})].concat(n.stopMousedown?[wr(kc(),function(a,i){i.event.prevent()})]:[]))},b4=Object.freeze({__proto__:null,exhibit:mT,events:pT}),nS=[qo("onFocus"),En("stopMousedown",!1),En("ignore",!1)],to=Bu({fields:nS,name:"focusing",active:b4,apis:vT}),y4=function(n){var a=function(){var i=Va(n),s=function(){return i.get()},f=function(O){return i.set(O)},d=function(){return i.set(n)},b=function(){return i.get()};return{get:s,set:f,clear:d,readState:b}};return{init:a}},hT=function(n,a,i){var s=a.aria;s.update(n,s,i.get())},gT=function(n,a,i){a.toggleClass.each(function(s){i.get()?Cu(n.element,s):cu(n.element,s)})},fg=function(n,a,i){N0(n,a,i,!i.get())},bT=function(n,a,i){i.set(!0),gT(n,a,i),hT(n,a,i)},dg=function(n,a,i){i.set(!1),gT(n,a,i),hT(n,a,i)},N0=function(n,a,i,s){var f=s?bT:dg;f(n,a,i)},yT=function(n,a,i){return i.get()},wT=function(n,a,i){N0(n,a,i,a.selected)},w4=Object.freeze({__proto__:null,onLoad:wT,toggle:fg,isOn:yT,on:bT,off:dg,set:N0}),C4=function(){return Ac({})},S4=function(n,a){var i=Fb(n,a,fg),s=Ff(n,a,wT);return si(tn([n.toggleOnExecute?[i]:[],[s]]))},x4=Object.freeze({__proto__:null,exhibit:C4,events:S4}),E4=function(n,a,i){ho(n.element,"aria-pressed",i),a.syncWithExpanded&&rS(n,a,i)},CT=function(n,a,i){ho(n.element,"aria-selected",i)},k4=function(n,a,i){ho(n.element,"aria-checked",i)},rS=function(n,a,i){ho(n.element,"aria-expanded",i)},L0=[En("selected",!1),ti("toggleClass"),En("toggleOnExecute",!0),gl("aria",{mode:"none"},nc("mode",{pressed:[En("syncWithExpanded",!1),wi("update",E4)],checked:[wi("update",k4)],expanded:[wi("update",rS)],selected:[wi("update",CT)],none:[wi("update",He)]}))],Mo=Bu({fields:L0,name:"toggling",active:x4,apis:w4,state:y4(!1)}),R0=function(){var n=function(a,i){i.stop(),Hl(a)};return[wr(Th(),n),wr(jm(),n),Nv(ud()),Nv(kc())]},B0=function(n){var a=function(i){return lc(function(s,f){i(s),f.stop()})};return si(tn([n.map(a).toArray(),R0()]))},ST="alloy.item-hover",xT="alloy.item-focus",ET=function(n){(af(n.element).isNone()||to.isFocused(n))&&(to.isFocused(n)||to.focus(n),za(n,ST,{item:n}))},aS=function(n){za(n,xT,{item:n})},oS=Ke(ST),A4=Ke(xT),T4=function(n){return{dom:n.dom,domModification:ut(ut({},n.domModification),{attributes:ut(ut(ut({role:n.toggling.isSome()?"menuitemcheckbox":"menuitem"},n.domModification.attributes),{"aria-haspopup":n.hasSubmenu}),n.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:fc.augment(n.itemBehaviours,[n.toggling.fold(Mo.revoke,function(a){return Mo.config(ut({aria:{mode:"checked"}},a))}),to.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:function(a){aS(a)}}),Da.config({mode:"execution"}),Xr.config({store:{mode:"memory",initialValue:n.data}}),mo("item-type-events",Ht(Ht([],R0(),!0),[wr(Td(),ET),wr(Oh(),to.focus)],!1))]),components:n.components,eventOrder:n.eventOrder}},_4=[yr("data"),yr("components"),yr("dom"),En("hasSubmenu",!1),ti("toggling"),fc.field("itemBehaviours",[Mo,to,Da,Xr]),En("ignoreFocus",!1),En("domModification",{}),wi("builder",T4),En("eventOrder",{})],O4=function(n){return{dom:n.dom,components:n.components,events:si([Km(Oh())])}},M4=[yr("dom"),yr("components"),wi("builder",O4)],iS=Ke("item-widget"),P0=Ke([hs({name:"widget",overrides:function(n){return{behaviours:Hr([Xr.config({store:{mode:"manual",getValue:function(a){return n.data},setValue:He}})])}}})]),D4=function(n){var a=TC(iS(),n,P0()),i=_C(iS(),n,a.internals()),s=function(d){return li(d,n,"widget").map(function(b){return Da.focusIn(b),b})},f=function(d,b){return Yd(b.event.target)?$e.none():function(){return n.autofocus&&b.setSource(d.element),$e.none()}()};return{dom:n.dom,components:i,domModification:n.domModification,events:si([lc(function(d,b){s(d).each(function(O){b.stop()})}),wr(Td(),ET),wr(Oh(),function(d,b){n.autofocus?s(d):to.focus(d)})]),behaviours:fc.augment(n.widgetBehaviours,[Xr.config({store:{mode:"memory",initialValue:n.data}}),to.config({ignore:n.ignoreFocus,onFocus:function(d){aS(d)}}),Da.config({mode:"special",focusIn:n.autofocus?function(d){s(d)}:jL(),onLeft:f,onRight:f,onEscape:function(d,b){return!to.isFocused(d)&&!n.autofocus?(to.focus(d),$e.some(!0)):(n.autofocus&&b.setSource(d.element),$e.none())}})])}},N4=[yr("uid"),yr("data"),yr("components"),yr("dom"),En("autofocus",!1),En("ignoreFocus",!1),fc.field("widgetBehaviours",[Xr,to,Da]),En("domModification",{}),eg(P0()),wi("builder",D4)],L4=nc("type",{widget:N4,item:_4,separator:M4}),R4=function(n,a){return{mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:a.initSize.numColumns,numRows:a.initSize.numRows},focusManager:n.focusManager}},B4=function(n,a){return{mode:"matrix",selectors:{row:a.rowSelector,cell:"."+n.markers.item},focusManager:n.focusManager}},tm=function(n,a){return{mode:"menu",selector:"."+n.markers.item,moveOnTab:a.moveOnTab,focusManager:n.focusManager}},P4=Ke([d0({factory:{sketch:function(n){var a=vi("menu.spec item",L4,n);return a.builder(a)}},name:"items",unit:"item",defaults:function(n,a){return pr(a,"uid")?a:ut(ut({},a),{uid:Bd("item")})},overrides:function(n,a){return{type:a.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}}}})]),uS=Ke([yr("value"),yr("items"),yr("dom"),yr("components"),En("eventOrder",{}),Eu("menuBehaviours",[ni,Xr,Oo,Da]),gl("movement",{mode:"menu",moveOnTab:!0},nc("mode",{grid:[Nb(),wi("config",R4)],matrix:[wi("config",B4),yr("rowSelector")],menu:[En("moveOnTab",!0),wi("config",tm)]})),RL(),En("fakeFocus",!1),En("focusManager",og()),qo("onHighlight")]),kT=Ke("alloy.menu-focus"),sS=function(n,a,i,s){return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:Ku(n.menuBehaviours,[ni.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight}),Xr.config({store:{mode:"memory",initialValue:n.value}}),Oo.config({find:$e.some}),Da.config(n.movement.config(n,n.movement))]),events:si([wr(A4(),function(f,d){var b=d.event;f.getSystem().getByDom(b.target).each(function(O){ni.highlight(f,O),d.stop(),za(f,kT(),{menu:f,item:O})})}),wr(oS(),function(f,d){var b=d.event.item;ni.highlight(f,b)})]),components:a,eventOrder:n.eventOrder,domModification:{attributes:{role:"menu"}}}},ev=Ws({name:"Menu",configFields:uS(),partFields:P4(),factory:sS}),vg=function(n){return Cn(n,function(a,i){return{k:a,v:i}})},mg=function(n,a,i,s){return jn(i,s).bind(function(f){return jn(n,f).bind(function(d){var b=mg(n,a,i,d);return $e.some([d].concat(b))})}).getOr([])},AT=function(n,a){var i={};Pr(n,function(b,O){en(b,function(Re){i[Re]=O})});var s=a,f=vg(a),d=br(f,function(b,O){return[O].concat(mg(i,s,f,O))});return br(i,function(b){return jn(d,b).getOr([b])})},TT=function(){var n=Va({}),a=Va({}),i=Va({}),s=Xi(),f=Va({}),d=function(){n.set({}),a.set({}),i.set({}),s.clear()},b=function(){return s.get().isNone()},O=function(wn,$n){var ir;a.set(ut(ut({},a.get()),(ir={},ir[wn]={type:"prepared",menu:$n},ir)))},Re=function(wn,$n,ir,Wr){s.set(wn),n.set(ir),a.set($n),f.set(Wr);var gr=AT(Wr,ir);i.set(gr)},Qe=function(wn){return sn(n.get(),function($n,ir){return $n===wn})},ot=function(wn,$n,ir){return Yt(wn).bind(function(Wr){return Qe(wn).bind(function(gr){return $n(gr).map(function(qr){return{triggeredMenu:Wr,triggeringItem:qr,triggeringPath:ir}})})})},ct=function(wn,$n){var ir=cn(jt(wn).toArray(),function(Wr){return Yt(Wr).isSome()});return jn(i.get(),wn).bind(function(Wr){var gr=Yr(ir.concat(Wr)),qr=Mn(gr,function(Cr,ar){return ot(Cr,$n,gr.slice(0,ar+1)).fold(function(){return Ua(s.get(),Cr)?[]:[$e.none()]},function(Ir){return[$e.some(Ir)]})});return Ka(qr)})},St=function(wn){return jn(n.get(),wn).map(function($n){var ir=jn(i.get(),wn).getOr([]);return[$n].concat(ir)})},At=function(wn){return jn(i.get(),wn).bind(function($n){return $n.length>1?$e.some($n.slice(1)):$e.none()})},It=function(wn){return jn(i.get(),wn)},Yt=function(wn){return bn(wn).bind(_T)},bn=function(wn){return jn(a.get(),wn)},jt=function(wn){return jn(n.get(),wn)},Sn=function(wn){var $n=f.get();return oa(Rn($n),wn)},Xn=function(){return s.get().bind(Yt)},Kn=function(){return a.get()};return{setMenuBuilt:O,setContents:Re,expand:St,refresh:It,collapse:At,lookupMenu:bn,lookupItem:jt,otherMenus:Sn,getPrimary:Xn,getMenus:Kn,clear:d,isClear:b,getTriggeringPath:ct}},_T=function(n){return n.type==="prepared"?$e.some(n.menu):$e.none()},OT={init:TT,extractPreparedMenu:_T},I4=function(n,a){var i=Xi(),s=function(hr,da,ka){return br(ka,function(Ao,Xo){var gi=function(){return ev.sketch(ut(ut({},Ao),{value:Xo,markers:n.markers,fakeFocus:n.fakeFocus,onHighlight:n.onHighlight,focusManager:n.fakeFocus?xA():og()}))};return Xo===da?{type:"prepared",menu:hr.getSystem().build(gi())}:{type:"notbuilt",nbMenu:gi}})},f=OT.init(),d=function(hr){var da=s(hr,n.data.primary,n.data.menus),ka=Re();return f.setContents(n.data.primary,da,n.data.expansions,ka),f.getPrimary()},b=function(hr){return Xr.getValue(hr).value},O=function(hr,da,ka){return Tn(da,function(Ao){if(!Ao.getSystem().isConnected())return $e.none();var Xo=ni.getCandidates(Ao);return Gn(Xo,function(gi){return b(gi)===ka})})},Re=function(hr){return br(n.data.menus,function(da,ka){return Mn(da.items,function(Ao){return Ao.type==="separator"?[]:[Ao.data.value]})})},Qe=function(hr,da){ni.highlight(hr,da),ni.getHighlighted(da).orThunk(function(){return ni.getFirst(da)}).each(function(ka){hb(hr,ka.element,Oh())})},ot=function(hr,da){return Xa(dn(da,function(ka){return hr.lookupMenu(ka).bind(function(Ao){return Ao.type==="prepared"?$e.some(Ao.menu):$e.none()})}))},ct=function(hr,da,ka){var Ao=ot(da,da.otherMenus(ka));en(Ao,function(Xo){zl(Xo.element,[n.markers.backgroundMenu]),n.stayInDom||eo.remove(hr,Xo)})},St=function(hr){return i.get().getOrThunk(function(){var da={},ka=Us(hr.element,"."+n.markers.item),Ao=cn(ka,function(Xo){return Ti(Xo,"aria-haspopup")==="true"});return en(Ao,function(Xo){hr.getSystem().getByDom(Xo).each(function(gi){var Bi=b(gi);da[Bi]=gi})}),i.set(da),da})},At=function(hr,da){var ka=St(hr);Pr(ka,function(Ao,Xo){var gi=ln(da,Xo);ho(Ao.element,"aria-expanded",gi)})},It=function(hr,da,ka){return $e.from(ka[0]).bind(function(Ao){return da.lookupMenu(Ao).bind(function(Xo){if(Xo.type==="notbuilt")return $e.none();var gi=Xo.menu,Bi=ot(da,ka.slice(1));return en(Bi,function(_l){Cu(_l.element,n.markers.backgroundMenu)}),Ja(gi.element)||eo.append(hr,$l(gi)),zl(gi.element,[n.markers.backgroundMenu]),Qe(hr,gi),ct(hr,da,ka),$e.some(gi)})})},Yt;(function(hr){hr[hr.HighlightSubmenu=0]="HighlightSubmenu",hr[hr.HighlightParent=1]="HighlightParent"})(Yt||(Yt={}));var bn=function(hr,da,ka){if(ka.type==="notbuilt"){var Ao=hr.getSystem().build(ka.nbMenu());return f.setMenuBuilt(da,Ao),Ao}else return ka.menu},jt=function(hr,da,ka){if(ka===void 0&&(ka=Yt.HighlightSubmenu),da.hasConfigured(Pa)&&Pa.isDisabled(da))return $e.some(da);var Ao=b(da);return f.expand(Ao).bind(function(Xo){return At(hr,Xo),$e.from(Xo[0]).bind(function(gi){return f.lookupMenu(gi).bind(function(Bi){var _l=bn(hr,gi,Bi);return Ja(_l.element)||eo.append(hr,$l(_l)),n.onOpenSubmenu(hr,da,_l,Yr(Xo)),ka===Yt.HighlightSubmenu?(ni.highlightFirst(_l),It(hr,f,Xo)):(ni.dehighlightAll(_l),$e.some(da))})})})},Sn=function(hr,da){var ka=b(da);return f.collapse(ka).bind(function(Ao){return At(hr,Ao),It(hr,f,Ao).map(function(Xo){return n.onCollapseMenu(hr,da,Xo),Xo})})},Xn=function(hr,da){var ka=b(da);return f.refresh(ka).bind(function(Ao){return At(hr,Ao),It(hr,f,Ao)})},Kn=function(hr,da){return Yd(da.element)?$e.none():jt(hr,da,Yt.HighlightSubmenu)},wn=function(hr,da){return Yd(da.element)?$e.none():Sn(hr,da)},$n=function(hr,da){return Sn(hr,da).orThunk(function(){return n.onEscape(hr,da).map(function(){return hr})})},ir=function(hr){return function(da,ka){return tf(ka.getSource(),"."+n.markers.item).bind(function(Ao){return da.getSystem().getByDom(Ao).toOptional().bind(function(Xo){return hr(da,Xo).map(it)})})}},Wr=si([wr(kT(),function(hr,da){var ka=da.event.item;f.lookupItem(b(ka)).each(function(){var Ao=da.event.menu;ni.highlight(hr,Ao);var Xo=b(da.event.item);f.refresh(Xo).each(function(gi){return ct(hr,f,gi)})})}),lc(function(hr,da){var ka=da.event.target;hr.getSystem().getByDom(ka).each(function(Ao){var Xo=b(Ao);Xo.indexOf("collapse-item")===0&&Sn(hr,Ao),jt(hr,Ao,Yt.HighlightSubmenu).fold(function(){n.onExecute(hr,Ao)},He)})}),go(function(hr,da){d(hr).each(function(ka){eo.append(hr,$l(ka)),n.onOpenMenu(hr,ka),n.highlightImmediately&&Qe(hr,ka)})})].concat(n.navigateOnHover?[wr(oS(),function(hr,da){var ka=da.event.item;Xn(hr,ka),jt(hr,ka,Yt.HighlightParent),n.onHover(hr,ka)})]:[])),gr=function(hr){return ni.getHighlighted(hr).bind(ni.getHighlighted)},qr=function(hr){gr(hr).each(function(da){Sn(hr,da)})},Cr=function(hr){f.getPrimary().each(function(da){Qe(hr,da)})},ar=function(hr){return $e.from(hr.components()[0]).filter(function(da){return Ti(da.element,"role")==="menu"})},Ir=function(hr){var da=f.getPrimary().bind(function(ka){return gr(hr).bind(function(Ao){var Xo=b(Ao),gi=Un(f.getMenus()),Bi=Xa(dn(gi,OT.extractPreparedMenu));return f.getTriggeringPath(Xo,function(_l){return O(hr,Bi,_l)})}).map(function(Ao){return{primary:ka,triggeringPath:Ao}})});da.fold(function(){ar(hr).each(function(ka){n.onRepositionMenu(hr,ka,[])})},function(ka){var Ao=ka.primary,Xo=ka.triggeringPath;n.onRepositionMenu(hr,Ao,Xo)})},ga={collapseMenu:qr,highlightPrimary:Cr,repositionMenus:Ir};return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:Ku(n.tmenuBehaviours,[Da.config({mode:"special",onRight:ir(Kn),onLeft:ir(wn),onEscape:ir($n),focusIn:function(hr,da){f.getPrimary().each(function(ka){hb(hr,ka.element,Oh())})}}),ni.config({highlightClass:n.markers.selectedMenu,itemClass:n.markers.menu}),Oo.config({find:function(hr){return ni.getHighlighted(hr)}}),eo.config({})]),eventOrder:n.eventOrder,apis:ga,events:Wr}},F4=Ke("collapse-item"),lS=function(n,a,i){return{primary:n,menus:a,expansions:i}},MT=function(n,a){return{primary:n,menus:Lf(n,a),expansions:{}}},DT=function(n){return{value:ya(F4()),meta:{text:n}}},fd=jl({name:"TieredMenu",configFields:[al("onExecute"),al("onEscape"),$s("onOpenMenu"),$s("onOpenSubmenu"),qo("onRepositionMenu"),qo("onCollapseMenu"),En("highlightImmediately",!0),id("data",[yr("primary"),yr("menus"),yr("expansions")]),En("fakeFocus",!1),qo("onHighlight"),qo("onHover"),Mb(),yr("dom"),En("navigateOnHover",!0),En("stayInDom",!1),Eu("tmenuBehaviours",[Da,ni,Oo,eo]),En("eventOrder",{})],apis:{collapseMenu:function(n,a){n.collapseMenu(a)},highlightPrimary:function(n,a){n.highlightPrimary(a)},repositionMenus:function(n,a){n.repositionMenus(a)}},factory:I4,extraApis:{tieredData:lS,singleData:MT,collapseItem:DT}}),H4=function(n,a,i,s,f){var d=function(){return n.lazySink(a)},b=s.type==="horizontal"?{layouts:{onLtr:function(){return Lw()},onRtl:function(){return Ib()}}}:{},O=function(Qe){return Qe.length===2},Re=function(Qe){return O(Qe)?b:{}};return fd.sketch({dom:{tag:"div"},data:s.data,markers:s.menu.markers,highlightImmediately:s.menu.highlightImmediately,onEscape:function(){return Do.close(a),n.onEscape.map(function(Qe){return Qe(a)}),$e.some(!0)},onExecute:function(){return $e.some(!0)},onOpenMenu:function(Qe,ot){Yi.positionWithinBounds(d().getOrDie(),ot,i,f())},onOpenSubmenu:function(Qe,ot,ct,St){var At=d().getOrDie();Yi.position(At,ct,{anchor:ut({type:"submenu",item:ot},Re(St))})},onRepositionMenu:function(Qe,ot,ct){var St=d().getOrDie();Yi.positionWithinBounds(St,ot,i,f()),en(ct,function(At){var It=Re(At.triggeringPath);Yi.position(St,At.triggeredMenu,{anchor:ut({type:"submenu",item:At.triggeringItem},It)})})}})},NT=function(n,a){var i=function(At,It){var Yt=n.getRelated(At);return Yt.exists(function(bn){return Iv(bn,It)})},s=function(At,It){Do.setContent(At,It)},f=function(At,It,Yt){d(At,It,Yt,$e.none())},d=function(At,It,Yt,bn){b(At,It,Yt,function(){return bn.map(function(jt){return au(jt)})})},b=function(At,It,Yt,bn){var jt=n.lazySink(At).getOrDie();Do.openWhileCloaked(At,It,function(){return Yi.positionWithinBounds(jt,At,Yt,bn())}),Xr.setValue(At,$e.some({mode:"position",config:Yt,getBounds:bn}))},O=function(At,It,Yt){Re(At,It,Yt,$e.none)},Re=function(At,It,Yt,bn){var jt=H4(n,At,It,Yt,bn);Do.open(At,jt),Xr.setValue(At,$e.some({mode:"menu",menu:jt}))},Qe=function(At){Do.isOpen(At)&&(Xr.setValue(At,$e.none()),Do.close(At))},ot=function(At){return Do.getState(At)},ct=function(At){Do.isOpen(At)&&Xr.getValue(At).each(function(It){switch(It.mode){case"menu":Do.getState(At).each(fd.repositionMenus);break;case"position":var Yt=n.lazySink(At).getOrDie();Yi.positionWithinBounds(Yt,At,It.config,It.getBounds());break}})},St={setContent:s,showAt:f,showWithin:d,showWithinBounds:b,showMenuAt:O,showMenuWithinBounds:Re,hide:Qe,getContent:ot,reposition:ct,isOpen:Do.isOpen};return{uid:n.uid,dom:n.dom,behaviours:Ku(n.inlineBehaviours,[Do.config({isPartOf:function(At,It,Yt){return Iv(It,Yt)||i(At,Yt)},getAttachPoint:function(At){return n.lazySink(At).getOrDie()},onOpen:function(At){n.onShow(At)},onClose:function(At){n.onHide(At)}}),Xr.config({store:{mode:"memory",initialValue:$e.none()}}),ul.config({channels:ut(ut({},Sl(ut({isExtraPart:a.isExtraPart},n.fireDismissalEventInstead.map(function(At){return{fireEventInstead:{event:At.event}}}).getOr({})))),Kv(ut(ut({},n.fireRepositionEventInstead.map(function(At){return{fireEventInstead:{event:At.event}}}).getOr({})),{doReposition:ct})))})]),eventOrder:n.eventOrder,apis:St}},Pi=jl({name:"InlineView",configFields:[yr("lazySink"),qo("onShow"),qo("onHide"),Ov("onEscape"),Eu("inlineBehaviours",[Do,Xr,ul]),Pl("fireDismissalEventInstead",[En("event",Qc())]),Pl("fireRepositionEventInstead",[En("event",fs())]),En("getRelated",$e.none),En("isExtraPart",xt),En("eventOrder",$e.none)],factory:NT,apis:{showAt:function(n,a,i,s){n.showAt(a,i,s)},showWithin:function(n,a,i,s,f){n.showWithin(a,i,s,f)},showWithinBounds:function(n,a,i,s,f){n.showWithinBounds(a,i,s,f)},showMenuAt:function(n,a,i,s){n.showMenuAt(a,i,s)},showMenuWithinBounds:function(n,a,i,s,f){n.showMenuWithinBounds(a,i,s,f)},hide:function(n,a){n.hide(a)},isOpen:function(n,a){return n.isOpen(a)},getContent:function(n,a){return n.getContent(a)},setContent:function(n,a,i){n.setContent(a,i)},reposition:function(n,a){n.reposition(a)}}}),tv="layout-inset",cS=function(n){return n.x},fS=function(n,a){return n.x+n.width/2-a.width/2},I0=function(n,a){return n.x+n.width-a.width},dS=function(n){return n.y},vS=function(n,a){return n.y+n.height-a.height},F0=function(n,a){return n.y+n.height/2-a.height/2},pg=function(n,a,i){return qu(I0(n,a),vS(n,a),i.insetSouthwest(),rp(),"southwest",xu(n,{right:0,bottom:3}),tv)},hg=function(n,a,i){return qu(cS(n),vS(n,a),i.insetSoutheast(),kw(),"southeast",xu(n,{left:1,bottom:3}),tv)},gg=function(n,a,i){return qu(I0(n,a),dS(n),i.insetNorthwest(),Ew(),"northwest",xu(n,{right:0,top:2}),tv)},nm=function(n,a,i){return qu(cS(n),dS(n),i.insetNortheast(),Rb(),"northeast",xu(n,{left:1,top:2}),tv)},vf=function(n,a,i){return qu(fS(n,a),dS(n),i.insetNorth(),z2(),"north",xu(n,{top:2}),tv)},_p=function(n,a,i){return qu(fS(n,a),vS(n,a),i.insetSouth(),$2(),"south",xu(n,{bottom:3}),tv)},LT=function(n,a,i){return qu(I0(n,a),F0(n,a),i.insetEast(),Tw(),"east",xu(n,{right:0}),tv)},RT=function(n,a,i){return qu(cS(n),F0(n,a),i.insetWest(),Aw(),"west",xu(n,{left:1}),tv)},z4=function(n){switch(n){case"north":return vf;case"northeast":return nm;case"northwest":return gg;case"south":return _p;case"southeast":return hg;case"southwest":return pg;case"east":return LT;case"west":return RT}},mS=function(n,a,i,s,f){var d=nk(s).map(z4).getOr(vf);return d(n,a,i,s,f)},pS=function(n){switch(n){case"north":return _p;case"northeast":return hg;case"northwest":return pg;case"south":return vf;case"southeast":return nm;case"southwest":return gg;case"east":return RT;case"west":return LT}},$4=function(n,a,i,s,f){var d=nk(s).map(pS).getOr(vf);return d(n,a,i,s,f)},mf=tinymce.util.Tools.resolve("tinymce.util.Delay"),V4=function(n){var a=B0(n.action),i=n.dom.tag,s=function(d){return jn(n.dom,"attributes").bind(function(b){return jn(b,d)})},f=function(){if(i==="button"){var d=s("type").getOr("button"),b=s("role").map(function(Re){return{role:Re}}).getOr({});return ut({type:d},b)}else{var O=s("role").getOr("button");return{role:O}}};return{uid:n.uid,dom:n.dom,components:n.components,events:a,behaviours:fc.augment(n.buttonBehaviours,[to.config({}),Da.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:f()},eventOrder:n.eventOrder}},qs=jl({name:"Button",factory:V4,configFields:[En("uid",void 0),yr("dom"),En("components",[]),fc.field("buttonBehaviours",[to,Da]),ti("action"),ti("role"),En("eventOrder",{})]}),U4=function(n){var a=n.dom.attributes!==void 0?n.dom.attributes:[];return er(a,function(i,s){var f;return s.name==="class"?i:ut(ut({},i),(f={},f[s.name]=s.value,f))},{})},j4=function(n){return Array.prototype.slice.call(n.dom.classList,0)},dd=function(n){var a=Gt.fromHtml(n),i=lt(a),s=U4(a),f=j4(a),d=i.length===0?{}:{innerHtml:bb(a)};return ut({tag:Zt(a),classes:f,attributes:s},d)},Ko=function(n){var a=NC(n)&&aa(n,"uid")?n.uid:Bd("memento"),i=function(d){return d.getSystem().getByUid(a).getOrDie()},s=function(d){return d.getSystem().getByUid(a).toOptional()},f=function(){return ut(ut({},n),{uid:a})};return{get:i,getOpt:s,asSpec:f}};function nv(n){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},nv(n)}function hS(n,a){return hS=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},hS(n,a)}function W4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function rm(n,a,i){return W4()?rm=Reflect.construct:rm=function(f,d,b){var O=[null];O.push.apply(O,d);var Re=Function.bind.apply(f,O),Qe=new Re;return b&&hS(Qe,b.prototype),Qe},rm.apply(null,arguments)}function pf(n){return q4(n)||gS(n)||K4(n)||G4()}function q4(n){if(Array.isArray(n))return bS(n)}function gS(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function K4(n,a){if(n){if(typeof n=="string")return bS(n,a);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bS(n,a)}}function bS(n,a){(a==null||a>n.length)&&(a=n.length);for(var i=0,s=new Array(a);i<a;i++)s[i]=n[i];return s}function G4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var X4=Object.hasOwnProperty,BT=Object.setPrototypeOf,Y4=Object.isFrozen,Q4=Object.getPrototypeOf,J4=Object.getOwnPropertyDescriptor,El=Object.freeze,Kf=Object.seal,Z4=Object.create,PT=typeof Reflect!="undefined"&&Reflect,Op=PT.apply,yS=PT.construct;Op||(Op=function(a,i,s){return a.apply(i,s)}),El||(El=function(a){return a}),Kf||(Kf=function(a){return a}),yS||(yS=function(a,i){return rm(a,pf(i))});var eB=hf(Array.prototype.forEach),IT=hf(Array.prototype.pop),Mp=hf(Array.prototype.push),H0=hf(String.prototype.toLowerCase),tB=hf(String.prototype.match),rv=hf(String.prototype.replace),nB=hf(String.prototype.indexOf),rB=hf(String.prototype.trim),Ks=hf(RegExp.prototype.test),wS=aB(TypeError);function hf(n){return function(a){for(var i=arguments.length,s=new Array(i>1?i-1:0),f=1;f<i;f++)s[f-1]=arguments[f];return Op(n,a,s)}}function aB(n){return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return yS(n,i)}}function ai(n,a){BT&&BT(n,null);for(var i=a.length;i--;){var s=a[i];if(typeof s=="string"){var f=H0(s);f!==s&&(Y4(a)||(a[i]=f),s=f)}n[s]=!0}return n}function am(n){var a=Z4(null),i;for(i in n)Op(X4,n,[i])&&(a[i]=n[i]);return a}function z0(n,a){for(;n!==null;){var i=J4(n,a);if(i){if(i.get)return hf(i.get);if(typeof i.value=="function")return hf(i.value)}n=Q4(n)}function s(f){return null}return s}var FT=El(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),CS=El(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),SS=El(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),oB=El(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),xS=El(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ES=El(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),HT=El(["#text"]),zT=El(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),kS=El(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$0=El(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),V0=El(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),AS=Kf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),iB=Kf(/<%[\w\W]*|[\w\W]*%>/gm),uB=Kf(/^data-[\-\w.\u00B7-\uFFFF]/),sB=Kf(/^aria-[\-\w]+$/),lB=Kf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),cB=Kf(/^(?:\w+script|data):/i),$T=Kf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),fB=Kf(/^html$/i),TS=function(){return typeof window=="undefined"?null:window},_S=function(a,i){if(nv(a)!=="object"||typeof a.createPolicy!="function")return null;var s=null,f="data-tt-policy-suffix";i.currentScript&&i.currentScript.hasAttribute(f)&&(s=i.currentScript.getAttribute(f));var d="dompurify"+(s?"#"+s:"");try{return a.createPolicy(d,{createHTML:function(O){return O}})}catch(b){return null}};function OS(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:TS(),a=function(Yn){return OS(Yn)};if(a.version="2.3.8",a.removed=[],!n||!n.document||n.document.nodeType!==9)return a.isSupported=!1,a;var i=n.document,s=n.document,f=n.DocumentFragment,d=n.HTMLTemplateElement,b=n.Node,O=n.Element,Re=n.NodeFilter,Qe=n.NamedNodeMap,ot=Qe===void 0?n.NamedNodeMap||n.MozNamedAttrMap:Qe,ct=n.HTMLFormElement,St=n.DOMParser,At=n.trustedTypes,It=O.prototype,Yt=z0(It,"cloneNode"),bn=z0(It,"nextSibling"),jt=z0(It,"childNodes"),Sn=z0(It,"parentNode");if(typeof d=="function"){var Xn=s.createElement("template");Xn.content&&Xn.content.ownerDocument&&(s=Xn.content.ownerDocument)}var Kn=_S(At,i),wn=Kn?Kn.createHTML(""):"",$n=s,ir=$n.implementation,Wr=$n.createNodeIterator,gr=$n.createDocumentFragment,qr=$n.getElementsByTagName,Cr=i.importNode,ar={};try{ar=am(s).documentMode?s.documentMode:{}}catch(Eo){}var Ir={};a.isSupported=typeof Sn=="function"&&ir&&typeof ir.createHTMLDocument!="undefined"&&ar!==9;var ga=AS,hr=iB,da=uB,ka=sB,Ao=cB,Xo=$T,gi=lB,Bi=null,_l=ai({},[].concat(pf(FT),pf(CS),pf(SS),pf(xS),pf(HT))),Cs=null,Dy=ai({},[].concat(pf(zT),pf(kS),pf($0),pf(V0))),_u=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xm=null,Em=null,eb=!0,km=!0,tb=!1,Qs=!1,_f=!1,Ds=!1,nb=!1,xv=!1,mh=!1,Ou=!1,xd=!0,Ev=!0,Am=!1,Of={},kv=null,ea=ai({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),po=null,Zo=ai({},["audio","video","img","source","image","track"]),Ni=null,Js=ai({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ns="http://www.w3.org/1998/Math/MathML",Ol="http://www.w3.org/2000/svg",hc="http://www.w3.org/1999/xhtml",ph=hc,rb=!1,hh,w8=["application/xhtml+xml","text/html"],C8="text/html",Tm,gh=null,cq=s.createElement("form"),E$=function(Yn){return Yn instanceof RegExp||Yn instanceof Function},S8=function(Yn){gh&&gh===Yn||((!Yn||nv(Yn)!=="object")&&(Yn={}),Yn=am(Yn),Bi="ALLOWED_TAGS"in Yn?ai({},Yn.ALLOWED_TAGS):_l,Cs="ALLOWED_ATTR"in Yn?ai({},Yn.ALLOWED_ATTR):Dy,Ni="ADD_URI_SAFE_ATTR"in Yn?ai(am(Js),Yn.ADD_URI_SAFE_ATTR):Js,po="ADD_DATA_URI_TAGS"in Yn?ai(am(Zo),Yn.ADD_DATA_URI_TAGS):Zo,kv="FORBID_CONTENTS"in Yn?ai({},Yn.FORBID_CONTENTS):ea,xm="FORBID_TAGS"in Yn?ai({},Yn.FORBID_TAGS):{},Em="FORBID_ATTR"in Yn?ai({},Yn.FORBID_ATTR):{},Of="USE_PROFILES"in Yn?Yn.USE_PROFILES:!1,eb=Yn.ALLOW_ARIA_ATTR!==!1,km=Yn.ALLOW_DATA_ATTR!==!1,tb=Yn.ALLOW_UNKNOWN_PROTOCOLS||!1,Qs=Yn.SAFE_FOR_TEMPLATES||!1,_f=Yn.WHOLE_DOCUMENT||!1,xv=Yn.RETURN_DOM||!1,mh=Yn.RETURN_DOM_FRAGMENT||!1,Ou=Yn.RETURN_TRUSTED_TYPE||!1,nb=Yn.FORCE_BODY||!1,xd=Yn.SANITIZE_DOM!==!1,Ev=Yn.KEEP_CONTENT!==!1,Am=Yn.IN_PLACE||!1,gi=Yn.ALLOWED_URI_REGEXP||gi,ph=Yn.NAMESPACE||hc,Yn.CUSTOM_ELEMENT_HANDLING&&E$(Yn.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_u.tagNameCheck=Yn.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Yn.CUSTOM_ELEMENT_HANDLING&&E$(Yn.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_u.attributeNameCheck=Yn.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Yn.CUSTOM_ELEMENT_HANDLING&&typeof Yn.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(_u.allowCustomizedBuiltInElements=Yn.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),hh=w8.indexOf(Yn.PARSER_MEDIA_TYPE)===-1?hh=C8:hh=Yn.PARSER_MEDIA_TYPE,Tm=hh==="application/xhtml+xml"?function(wa){return wa}:H0,Qs&&(km=!1),mh&&(xv=!0),Of&&(Bi=ai({},pf(HT)),Cs=[],Of.html===!0&&(ai(Bi,FT),ai(Cs,zT)),Of.svg===!0&&(ai(Bi,CS),ai(Cs,kS),ai(Cs,V0)),Of.svgFilters===!0&&(ai(Bi,SS),ai(Cs,kS),ai(Cs,V0)),Of.mathMl===!0&&(ai(Bi,xS),ai(Cs,$0),ai(Cs,V0))),Yn.ADD_TAGS&&(Bi===_l&&(Bi=am(Bi)),ai(Bi,Yn.ADD_TAGS)),Yn.ADD_ATTR&&(Cs===Dy&&(Cs=am(Cs)),ai(Cs,Yn.ADD_ATTR)),Yn.ADD_URI_SAFE_ATTR&&ai(Ni,Yn.ADD_URI_SAFE_ATTR),Yn.FORBID_CONTENTS&&(kv===ea&&(kv=am(kv)),ai(kv,Yn.FORBID_CONTENTS)),Ev&&(Bi["#text"]=!0),_f&&ai(Bi,["html","head","body"]),Bi.table&&(ai(Bi,["tbody"]),delete xm.tbody),El&&El(Yn),gh=Yn)},k$=ai({},["mi","mo","mn","ms","mtext"]),A$=ai({},["foreignobject","desc","title","annotation-xml"]),fq=ai({},["title","style","font","a","script"]),UN=ai({},CS);ai(UN,SS),ai(UN,oB);var x8=ai({},xS);ai(x8,ES);var dq=function(Yn){var wa=Sn(Yn);(!wa||!wa.tagName)&&(wa={namespaceURI:hc,tagName:"template"});var uo=H0(Yn.tagName),tu=H0(wa.tagName);return Yn.namespaceURI===Ol?wa.namespaceURI===hc?uo==="svg":wa.namespaceURI===Ns?uo==="svg"&&(tu==="annotation-xml"||k$[tu]):!!UN[uo]:Yn.namespaceURI===Ns?wa.namespaceURI===hc?uo==="math":wa.namespaceURI===Ol?uo==="math"&&A$[tu]:!!x8[uo]:Yn.namespaceURI===hc?wa.namespaceURI===Ol&&!A$[tu]||wa.namespaceURI===Ns&&!k$[tu]?!1:!x8[uo]&&(fq[uo]||!UN[uo]):!1},_m=function(Yn){Mp(a.removed,{element:Yn});try{Yn.parentNode.removeChild(Yn)}catch(wa){try{Yn.outerHTML=wn}catch(uo){Yn.remove()}}},T$=function(Yn,wa){try{Mp(a.removed,{attribute:wa.getAttributeNode(Yn),from:wa})}catch(uo){Mp(a.removed,{attribute:null,from:wa})}if(wa.removeAttribute(Yn),Yn==="is"&&!Cs[Yn])if(xv||mh)try{_m(wa)}catch(uo){}else try{wa.setAttribute(Yn,"")}catch(uo){}},_$=function(Yn){var wa,uo;if(nb)Yn="<remove></remove>"+Yn;else{var tu=tB(Yn,/^[\r\n\t ]+/);uo=tu&&tu[0]}hh==="application/xhtml+xml"&&(Yn='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Yn+"</body></html>");var Hc=Kn?Kn.createHTML(Yn):Yn;if(ph===hc)try{wa=new St().parseFromString(Hc,hh)}catch(Ml){}if(!wa||!wa.documentElement){wa=ir.createDocument(ph,"template",null);try{wa.documentElement.innerHTML=rb?"":Hc}catch(Ml){}}var Yl=wa.body||wa.documentElement;return Yn&&uo&&Yl.insertBefore(s.createTextNode(uo),Yl.childNodes[0]||null),ph===hc?qr.call(wa,_f?"html":"body")[0]:_f?wa.documentElement:Yl},O$=function(Yn){return Wr.call(Yn.ownerDocument||Yn,Yn,Re.SHOW_ELEMENT|Re.SHOW_COMMENT|Re.SHOW_TEXT,null,!1)},vq=function(Yn){return Yn instanceof ct&&(typeof Yn.nodeName!="string"||typeof Yn.textContent!="string"||typeof Yn.removeChild!="function"||!(Yn.attributes instanceof ot)||typeof Yn.removeAttribute!="function"||typeof Yn.setAttribute!="function"||typeof Yn.namespaceURI!="string"||typeof Yn.insertBefore!="function")},a2=function(Yn){return nv(b)==="object"?Yn instanceof b:Yn&&nv(Yn)==="object"&&typeof Yn.nodeType=="number"&&typeof Yn.nodeName=="string"},Om=function(Yn,wa,uo){Ir[Yn]&&eB(Ir[Yn],function(tu){tu.call(a,wa,uo,gh)})},M$=function(Yn){var wa;if(Om("beforeSanitizeElements",Yn,null),vq(Yn)||Ks(/[\u0080-\uFFFF]/,Yn.nodeName))return _m(Yn),!0;var uo=Tm(Yn.nodeName);if(Om("uponSanitizeElement",Yn,{tagName:uo,allowedTags:Bi}),Yn.hasChildNodes()&&!a2(Yn.firstElementChild)&&(!a2(Yn.content)||!a2(Yn.content.firstElementChild))&&Ks(/<[/\w]/g,Yn.innerHTML)&&Ks(/<[/\w]/g,Yn.textContent)||uo==="select"&&Ks(/<template/i,Yn.innerHTML))return _m(Yn),!0;if(!Bi[uo]||xm[uo]){if(!xm[uo]&&N$(uo)&&(_u.tagNameCheck instanceof RegExp&&Ks(_u.tagNameCheck,uo)||_u.tagNameCheck instanceof Function&&_u.tagNameCheck(uo)))return!1;if(Ev&&!kv[uo]){var tu=Sn(Yn)||Yn.parentNode,Hc=jt(Yn)||Yn.childNodes;if(Hc&&tu)for(var Yl=Hc.length,Ml=Yl-1;Ml>=0;--Ml)tu.insertBefore(Yt(Hc[Ml],!0),bn(Yn))}return _m(Yn),!0}return Yn instanceof O&&!dq(Yn)||(uo==="noscript"||uo==="noembed")&&Ks(/<\/no(script|embed)/i,Yn.innerHTML)?(_m(Yn),!0):(Qs&&Yn.nodeType===3&&(wa=Yn.textContent,wa=rv(wa,ga," "),wa=rv(wa,hr," "),Yn.textContent!==wa&&(Mp(a.removed,{element:Yn.cloneNode()}),Yn.textContent=wa)),Om("afterSanitizeElements",Yn,null),!1)},D$=function(Yn,wa,uo){if(xd&&(wa==="id"||wa==="name")&&(uo in s||uo in cq))return!1;if(!(km&&!Em[wa]&&Ks(da,wa))){if(!(eb&&Ks(ka,wa))){if(!Cs[wa]||Em[wa]){if(!(N$(Yn)&&(_u.tagNameCheck instanceof RegExp&&Ks(_u.tagNameCheck,Yn)||_u.tagNameCheck instanceof Function&&_u.tagNameCheck(Yn))&&(_u.attributeNameCheck instanceof RegExp&&Ks(_u.attributeNameCheck,wa)||_u.attributeNameCheck instanceof Function&&_u.attributeNameCheck(wa))||wa==="is"&&_u.allowCustomizedBuiltInElements&&(_u.tagNameCheck instanceof RegExp&&Ks(_u.tagNameCheck,uo)||_u.tagNameCheck instanceof Function&&_u.tagNameCheck(uo))))return!1}else if(!Ni[wa]){if(!Ks(gi,rv(uo,Xo,""))){if(!((wa==="src"||wa==="xlink:href"||wa==="href")&&Yn!=="script"&&nB(uo,"data:")===0&&po[Yn])){if(!(tb&&!Ks(Ao,rv(uo,Xo,"")))){if(uo)return!1}}}}}}return!0},N$=function(Yn){return Yn.indexOf("-")>0},L$=function(Yn){var wa,uo,tu,Hc;Om("beforeSanitizeAttributes",Yn,null);var Yl=Yn.attributes;if(Yl){var Ml={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Cs};for(Hc=Yl.length;Hc--;){wa=Yl[Hc];var jN=wa,gc=jN.name,R$=jN.namespaceURI;if(uo=gc==="value"?wa.value:rB(wa.value),tu=Tm(gc),Ml.attrName=tu,Ml.attrValue=uo,Ml.keepAttr=!0,Ml.forceKeepAttr=void 0,Om("uponSanitizeAttribute",Yn,Ml),uo=Ml.attrValue,!Ml.forceKeepAttr&&(T$(gc,Yn),!!Ml.keepAttr)){if(Ks(/\/>/i,uo)){T$(gc,Yn);continue}Qs&&(uo=rv(uo,ga," "),uo=rv(uo,hr," "));var pq=Tm(Yn.nodeName);if(D$(pq,tu,uo))try{R$?Yn.setAttributeNS(R$,gc,uo):Yn.setAttribute(gc,uo),IT(a.removed)}catch(Cq){}}}Om("afterSanitizeAttributes",Yn,null)}},mq=function Eo(Yn){var wa,uo=O$(Yn);for(Om("beforeSanitizeShadowDOM",Yn,null);wa=uo.nextNode();)Om("uponSanitizeShadowNode",wa,null),!M$(wa)&&(wa.content instanceof f&&Eo(wa.content),L$(wa));Om("afterSanitizeShadowDOM",Yn,null)};return a.sanitize=function(Eo,Yn){var wa,uo,tu,Hc,Yl;if(rb=!Eo,rb&&(Eo="<!-->"),typeof Eo!="string"&&!a2(Eo)){if(typeof Eo.toString!="function")throw wS("toString is not a function");if(Eo=Eo.toString(),typeof Eo!="string")throw wS("dirty is not a string, aborting")}if(!a.isSupported){if(nv(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof Eo=="string")return n.toStaticHTML(Eo);if(a2(Eo))return n.toStaticHTML(Eo.outerHTML)}return Eo}if(Ds||S8(Yn),a.removed=[],typeof Eo=="string"&&(Am=!1),Am){if(Eo.nodeName){var Ml=Tm(Eo.nodeName);if(!Bi[Ml]||xm[Ml])throw wS("root node is forbidden and cannot be sanitized in-place")}}else if(Eo instanceof b)wa=_$("<!---->"),uo=wa.ownerDocument.importNode(Eo,!0),uo.nodeType===1&&uo.nodeName==="BODY"||uo.nodeName==="HTML"?wa=uo:wa.appendChild(uo);else{if(!xv&&!Qs&&!_f&&Eo.indexOf("<")===-1)return Kn&&Ou?Kn.createHTML(Eo):Eo;if(wa=_$(Eo),!wa)return xv?null:Ou?wn:""}wa&&nb&&_m(wa.firstChild);for(var jN=O$(Am?Eo:wa);tu=jN.nextNode();)tu.nodeType===3&&tu===Hc||M$(tu)||(tu.content instanceof f&&mq(tu.content),L$(tu),Hc=tu);if(Hc=null,Am)return Eo;if(xv){if(mh)for(Yl=gr.call(wa.ownerDocument);wa.firstChild;)Yl.appendChild(wa.firstChild);else Yl=wa;return Cs.shadowroot&&(Yl=Cr.call(i,Yl,!0)),Yl}var gc=_f?wa.outerHTML:wa.innerHTML;return _f&&Bi["!doctype"]&&wa.ownerDocument&&wa.ownerDocument.doctype&&wa.ownerDocument.doctype.name&&Ks(fB,wa.ownerDocument.doctype.name)&&(gc="<!DOCTYPE "+wa.ownerDocument.doctype.name+`>
`+gc),Qs&&(gc=rv(gc,ga," "),gc=rv(gc,hr," ")),Kn&&Ou?Kn.createHTML(gc):gc},a.setConfig=function(Eo){S8(Eo),Ds=!0},a.clearConfig=function(){gh=null,Ds=!1},a.isValidAttribute=function(Eo,Yn,wa){gh||S8({});var uo=Tm(Eo),tu=Tm(Yn);return D$(uo,tu,wa)},a.addHook=function(Eo,Yn){typeof Yn=="function"&&(Ir[Eo]=Ir[Eo]||[],Mp(Ir[Eo],Yn))},a.removeHook=function(Eo){if(Ir[Eo])return IT(Ir[Eo])},a.removeHooks=function(Eo){Ir[Eo]&&(Ir[Eo]=[])},a.removeAllHooks=function(){Ir={}},a}var MS=OS(),U0=function(n){return MS().sanitize(n)},Dc=tinymce.util.Tools.resolve("tinymce.util.I18n"),Gf={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},j0="temporary-placeholder",DS=function(n){return function(){return jn(n,j0).getOr("!not found!")}},NS=function(n,a){var i=n.toLowerCase();if(Dc.isRtl()){var s=Fo(i,"-rtl");return pr(a,s)?s:i}else return i},VT=function(n,a){return jn(a,NS(n,a))},UT=function(n,a){var i=a();return VT(n,i).getOrThunk(DS(i))},Dp=function(n,a,i){var s=a();return VT(n,s).or(i).getOrThunk(DS(s))},jT=function(n){return Dc.isRtl()?pr(Gf,n):!1},LS=function(){return mo("add-focusable",[go(function(n){Cw(n.element,"svg").each(function(a){return ho(a,"focusable","false")})})])},WT=function(n,a,i,s){var f,d,b=jT(a)?["tox-icon--flip"]:[],O=jn(i,NS(a,i)).or(s).getOrThunk(DS(i));return{dom:{tag:n.tag,attributes:(f=n.attributes)!==null&&f!==void 0?f:{},classes:n.classes.concat(b),innerHtml:O},behaviours:Hr(Ht(Ht([],(d=n.behaviours)!==null&&d!==void 0?d:[],!0),[LS()],!1))}},Nc=function(n,a,i,s){return s===void 0&&(s=$e.none()),WT(a,n,i(),s)},qT=function(n,a,i){var s=i(),f=Gn(n,function(d){return pr(s,NS(d,s))});return WT(a,f.getOr(j0),s,$e.none())},RS={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},dB=function(n){var a=Ko({dom:dd("<p>"+U0(n.translationProvider(n.text))+"</p>"),behaviours:Hr([eo.config({})])}),i=function(At){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+At+"%"}}}},s=function(At){return{dom:{tag:"div",classes:["tox-text"],innerHtml:At+"%"}}},f=Ko({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},s(0)],behaviours:Hr([eo.config({})])}),d=function(At,It){At.getSystem().isConnected()&&f.getOpt(At).each(function(Yt){eo.set(Yt,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(It)]},s(It)])})},b=function(At,It){if(At.getSystem().isConnected()){var Yt=a.get(At);eo.set(Yt,[ds(It)])}},O={updateProgress:d,updateText:b},Re=tn([n.icon.toArray(),n.level.toArray(),n.level.bind(function(At){return $e.from(RS[At])}).toArray()]),Qe=Ko(qs.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Nc("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":n.translationProvider("Close")}},n.iconProvider)],action:function(At){n.onAction(At)}})),ot=qT(Re,{tag:"div",classes:["tox-notification__icon"]},n.iconProvider),ct={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Hr([eo.config({})])},St=[ot,ct];return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert"},classes:n.level.map(function(At){return["tox-notification","tox-notification--in","tox-notification--"+At]}).getOr(["tox-notification","tox-notification--in"])},behaviours:Hr([to.config({}),mo("notification-events",[wr(_d(),function(At){Qe.getOpt(At).each(to.focus)})])]),components:St.concat(n.progress?[f.asSpec()]:[]).concat(n.closeButton?[Qe.asSpec()]:[]),apis:O}},bg=jl({name:"Notification",factory:dB,configFields:[ti("level"),yr("progress"),yr("icon"),yr("onAction"),yr("text"),yr("iconProvider"),yr("translationProvider"),$i("closeButton",!0)],apis:{updateProgress:function(n,a,i){n.updateProgress(a,i)},updateText:function(n,a,i){n.updateText(a,i)}}});function BS(n,a,i){var s=a.backstage.shared,f=function(Qe){switch(Qe){case"bc-bc":return _p;case"tc-tc":return vf;case"tc-bc":return il;case"bc-tc":default:return fu}},d=function(Qe){Qe.length>0&&en(Qe,function(ot,ct){ct===0?ot.moveRel(null,"banner"):ot.moveRel(Qe[ct-1].getEl(),"bc-tc")})},b=function(Qe,ot){var ct=!Qe.closeButton&&Qe.timeout&&(Qe.timeout>0||Qe.timeout<0),St=function(){ot(),Pi.hide(It)},At=uu(bg.sketch({text:Qe.text,level:ln(["success","error","warning","warn","info"],Qe.type)?Qe.type:void 0,progress:Qe.progressBar===!0,icon:$e.from(Qe.icon),closeButton:!ct,onAction:St,iconProvider:s.providers.icons,translationProvider:s.providers.translate})),It=uu(Pi.sketch(ut({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:s.getSink,fireDismissalEventInstead:{}},s.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));i.add(It),Qe.timeout>0&&mf.setTimeout(function(){St()},Qe.timeout);var Yt=function(){var bn=au(Gt.fromDom(n.getContentAreaContainer())),jt=ju(),Sn=Cl(jt.x,bn.x,bn.right),Xn=Cl(jt.y,bn.y,bn.bottom),Kn=Math.max(bn.right,jt.right),wn=Math.max(bn.bottom,jt.bottom);return $e.some(Zi(Sn,Xn,Kn-Sn,wn-Xn))};return{close:St,moveTo:function(bn,jt){Pi.showAt(It,$l(At),{anchor:{type:"makeshift",x:bn,y:jt}})},moveRel:function(bn,jt){var Sn=$l(At),Xn={maxHeightFunction:$h()};if(jt!=="banner"&&x(bn)){var Kn=f(jt),wn={type:"node",root:ei(),node:$e.some(Gt.fromDom(bn)),overrides:Xn,layouts:{onRtl:function(){return[Kn]},onLtr:function(){return[Kn]}}};Pi.showWithinBounds(It,Sn,{anchor:wn},Yt)}else{var $n=ut(ut({},s.anchors.banner()),{overrides:Xn});Pi.showWithinBounds(It,Sn,{anchor:$n},Yt)}},text:function(bn){bg.updateText(At,bn)},settings:Qe,getEl:function(){return At.element.dom},progressBar:{value:function(bn){bg.updateProgress(At,bn)}}}},O=function(Qe){Qe.close()},Re=function(Qe){return Qe.settings};return{open:b,close:O,reposition:d,getArgs:Re}}var vB=function(n,a){var i=null,s=function(){Ve(i)||(clearTimeout(i),i=null)},f=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];Ve(i)&&(i=setTimeout(function(){i=null,n.apply(null,d)},a))};return{cancel:s,throttle:f}},W0=function(n,a){var i=null,s=function(){Ve(i)||(clearTimeout(i),i=null)},f=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];s(),i=setTimeout(function(){i=null,n.apply(null,d)},a)};return{cancel:s,throttle:f}},KT=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),mB=function(n,a){return n.isBlock(a)||ln(["BR","IMG","HR","INPUT"],a.nodeName)||n.getContentEditable(a)==="false"},GT=function(n,a,i,s,f){var d=KT(n,function(b){return mB(n,b)});return $e.from(d.backwards(a,i,s,f))},pB="[data-mce-autocompleter]",hB=function(n,a){return q0(Gt.fromDom(n.selection.getNode())).getOrThunk(function(){var i=Gt.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',n.getDoc());return Wo(i,Gt.fromDom(a.extractContents())),a.insertNode(i.dom),ru(i).each(function(s){return s.dom.normalize()}),Dk(i).map(function(s){n.selection.setCursorLocation(s.dom,L3(s))}),i})},q0=function(n){return tf(n,pB)},gB=function(n){return n.collapsed&&n.startContainer.nodeType===3},XT=function(n){return n.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},YT=function(n){return n!==""&&`  \f
\r	\v`.indexOf(n)!==-1},Np=function(n,a){return n.substring(a.length)},QT=function(n,a,i){var s;for(s=a-1;s>=0;s--){var f=n.charAt(s);if(YT(f))return $e.none();if(f===i)break}return $e.some(s)},JT=function(n,a,i,s){if(s===void 0&&(s=0),!gB(a))return $e.none();var f=function(b,O,Re){return QT(Re,O,i).getOr(O)},d=n.getParent(a.startContainer,n.isBlock)||n.getRoot();return GT(n,a.startContainer,a.startOffset,f,d).bind(function(b){var O=a.cloneRange();if(O.setStart(b.container,b.offset),O.setEnd(a.endContainer,a.endOffset),O.collapsed)return $e.none();var Re=XT(O),Qe=Re.lastIndexOf(i);return Qe!==0||Np(Re,i).length<s?$e.none():$e.some({text:Np(Re,i),range:O,triggerChar:i})})},PS=function(n,a,i,s){return s===void 0&&(s=0),q0(Gt.fromDom(a.startContainer)).fold(function(){return JT(n,a,i,s)},function(f){var d=n.createRng();d.selectNode(f.dom);var b=XT(d);return $e.some({range:d,text:Np(b,i),triggerChar:i})})},bB=function(n,a){a.on("keypress compositionend",n.onKeypress.throttle),a.on("remove",n.onKeypress.cancel);var i=function(s,f){za(s,fb(),{raw:f})};a.on("keydown",function(s){var f=function(){return n.getView().bind(ni.getHighlighted)};s.which===8&&n.onKeypress.throttle(s),n.isActive()&&(s.which===27&&n.cancelIfNecessary(),n.isMenuOpen()?s.which===13?(f().each(Hl),s.preventDefault()):s.which===40?(f().fold(function(){n.getView().each(ni.highlightFirst)},function(d){i(d,s)}),s.preventDefault(),s.stopImmediatePropagation()):(s.which===37||s.which===38||s.which===39)&&f().each(function(d){i(d,s),s.preventDefault(),s.stopImmediatePropagation()}):(s.which===13||s.which===38||s.which===40)&&n.cancelIfNecessary())}),a.on("NodeChange",function(s){n.isActive()&&!n.isProcessingAction()&&q0(Gt.fromDom(s.element)).isNone()&&n.cancelIfNecessary()})},IS={setup:bB},om=tinymce.util.Tools.resolve("tinymce.util.Promise"),K0=function(n,a){return{container:n,offset:a}},ZT=function(n){return n.nodeType===$t},e_=function(n){return n.nodeType===ta},t_=function(n){if(ZT(n))return K0(n,n.data.length);var a=n.childNodes;return a.length>0?t_(a[a.length-1]):K0(n,a.length)},G0=function(n,a){var i=n.childNodes;return i.length>0&&a<i.length?G0(i[a],0):i.length>0&&e_(n)&&i.length===a?t_(i[i.length-1]):K0(n,a)},yB=function(n,a){return GT(n,a.container,a.offset,function(i,s){return s===0?-1:s},n.getRoot()).filter(function(i){var s=i.container.data.charAt(i.offset-1);return!YT(s)}).isSome()},n_=function(n){return function(a){var i=G0(a.startContainer,a.startOffset);return!yB(n,i)}},r_=function(n,a,i){return Tn(i.triggerChars,function(s){return PS(n,a,s)})},yg=function(n,a){var i=a(),s=n.selection.getRng();return r_(n.dom,s,i).bind(function(f){return a_(n,a,f)})},a_=function(n,a,i,s){s===void 0&&(s={});var f=a(),d=n.selection.getRng(),b=d.startContainer.nodeValue,O=cn(f.lookupByChar(i.triggerChar),function(Qe){return i.text.length>=Qe.minChars&&Qe.matches.getOrThunk(function(){return n_(n.dom)})(i.range,b,i.text)});if(O.length===0)return $e.none();var Re=om.all(dn(O,function(Qe){var ot=Qe.fetch(i.text,Qe.maxResults,s);return ot.then(function(ct){return{matchText:i.text,items:ct,columns:Qe.columns,onAction:Qe.onAction,highlightOn:Qe.highlightOn}})}));return $e.some({lookupData:Re,context:i})},X0=Ba([Za("type"),yi("text")]),Lp=function(n){return zi("separatormenuitem",X0,n)},wB=Ba([En("type","autocompleteitem"),En("active",!1),En("disabled",!1),En("meta",{}),Za("value"),yi("text"),yi("icon")]),o_=Ba([Za("type"),Za("ch"),bl("minChars",1),En("columns",1),bl("maxResults",10),Ov("matches"),_s("fetch"),_s("onAction"),kh("highlightOn",[],ou)]),i_=function(n){return zi("Autocompleter.Separator",X0,n)},u_=function(n){return zi("Autocompleter.Item",wB,n)},FS=function(n){return zi("Autocompleter",o_,n)},Rp=[$i("disabled",!1),yi("tooltip"),yi("icon"),yi("text"),hi("onSetup",function(){return He})],CB=Ba([Za("type"),_s("onAction")].concat(Rp)),s_=function(n){return zi("toolbarbutton",CB,n)},Bp=[$i("active",!1)].concat(Rp),SB=Ba(Bp.concat([Za("type"),_s("onAction")])),HS=function(n){return zi("ToggleButton",SB,n)},im=[hi("predicate",xt),ac("scope","node",["node","editor"]),ac("position","selection",["node","selection","line"])],xB=Rp.concat([En("type","contextformbutton"),En("primary",!1),_s("onAction"),rl("original",tt)]),EB=Bp.concat([En("type","contextformbutton"),En("primary",!1),_s("onAction"),rl("original",tt)]),kB=Rp.concat([En("type","contextformbutton")]),l_=Bp.concat([En("type","contextformtogglebutton")]),c_=nc("type",{contextformbutton:xB,contextformtogglebutton:EB}),AB=Ba([En("type","contextform"),hi("initValue",Ke("")),yi("label"),Is("commands",c_),Gc("launch",nc("type",{contextformbutton:kB,contextformtogglebutton:l_}))].concat(im)),TB=function(n){return zi("ContextForm",AB,n)},_B=Ba([En("type","contexttoolbar"),Za("items")].concat(im)),OB=function(n){return zi("ContextToolbar",_B,n)},MB=function(n){var a={};return en(n,function(i){a[i]={}}),Rn(a)},Y0=function(n){var a=n.ui.registry.getAll().popups,i=br(a,function(b){return FS(b).fold(function(O){throw new Error(Im(O))},tt)}),s=MB(Ar(i,function(b){return b.ch})),f=Un(i),d=function(b){return cn(f,function(O){return O.ch===b})};return{dataset:i,triggerChars:s,lookupByChar:d}},zS;(function(n){n[n.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",n[n.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(zS||(zS={}));var gf=zS,wg="tox-menu-nav__js",Q0="tox-collection__item",$S="tox-swatch",f_={normal:wg,color:$S},VS="tox-collection__item--enabled",d_="tox-collection__group-heading",US="tox-collection__item-icon",jS="tox-collection__item-label",DB="tox-collection__item-accessory",v_="tox-collection__item-caret",NB="tox-collection__item-checkmark",um="tox-collection__item--active",J0="tox-collection__item-container",m_="tox-collection__item-container--column",p_="tox-collection__item-container--row",h_="tox-collection__item-container--align-right",LB="tox-collection__item-container--align-left",RB="tox-collection__item-container--valign-top",BB="tox-collection__item-container--valign-middle",g_="tox-collection__item-container--valign-bottom",WS=function(n){return jn(f_,n).getOr(wg)},b_=function(n){return n==="color"?"tox-swatches":"tox-menu"},qS=function(n){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:b_(n),tieredMenu:"tox-tiered-menu"}},Pp=function(n){var a=qS(n);return{backgroundMenu:a.backgroundMenu,selectedMenu:a.selectedMenu,menu:a.menu,selectedItem:a.selectedItem,item:WS(n)}},PB=function(n,a,i){var s=qS(i);return{tag:"div",classes:tn([[s.menu,"tox-menu-"+a+"-column"],n?[s.hasIcons]:[]])}},IB=[ev.parts.items({})],Z0=function(n,a,i){var s=qS(i),f={tag:"div",classes:tn([[s.tieredMenu]])};return{dom:f,markers:Pp(i)}},KS=function(n,a){return function(i){var s=ur(i,a);return dn(s,function(f){return{dom:n,components:f}})}},FB=function(n){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[ev.parts.items({preprocess:n!=="auto"?KS({tag:"div",classes:["tox-swatches__row"]},n):tt})]}]}},HB=function(n){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[ev.parts.items({preprocess:KS({tag:"div",classes:["tox-collection__group"]},n)})]}},y_=function(n,a){var i=[],s=[];return en(n,function(f,d){a(f,d)?(s.length>0&&i.push(s),s=[],pr(f.dom,"innerHtml")&&s.push(f)):s.push(f)}),s.length>0&&i.push(s),dn(i,function(f){return{dom:{tag:"div",classes:["tox-collection__group"]},components:f}})},GS=function(n,a,i){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"])},components:[ev.parts.items({preprocess:function(s){return n!=="auto"&&n>1?KS({tag:"div",classes:["tox-collection__group"]},n)(s):y_(s,function(f,d){return a[d].type==="separator"})}})]}},zB=function(n,a){return{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[ev.parts.items({preprocess:function(i){return y_(i,function(s,f){return n[f].type==="separator"})}})]}},Cg=function(n){return on(n,function(a){return"icon"in a&&a.icon!==void 0})},vd=function(n){return $e.none()},$B=function(n,a,i,s,f){var d=zB(i);return{value:n,dom:d.dom,components:d.components,items:i}},XS=function(n,a,i,s,f){if(f==="color"){var d=FB(s);return{value:n,dom:d.dom,components:d.components,items:i}}if(f==="normal"&&s==="auto"){var d=GS(s,i);return{value:n,dom:d.dom,components:d.components,items:i}}if(f==="normal"&&s===1){var d=GS(1,i);return{value:n,dom:d.dom,components:d.components,items:i}}if(f==="normal"){var d=GS(s,i);return{value:n,dom:d.dom,components:d.components,items:i}}if(f==="listpreview"&&s!=="auto"){var d=HB(s);return{value:n,dom:d.dom,components:d.components,items:i}}return{value:n,dom:PB(a,s,f),components:IB,items:i}},VB=[Za("type"),Za("src"),yi("alt"),kh("classes",[],ou)],UB=Ba(VB),jB=[Za("type"),Za("text"),yi("name"),kh("classes",["tox-collection__item-label"],ou)],e1=Ba(jB),YS=l2(function(){return ub("type",{cardimage:UB,cardtext:e1,cardcontainer:WB})}),WB=Ba([Za("type"),Hm("direction","horizontal"),Hm("align","left"),Hm("valign","middle"),Is("items",YS)]),Ip=[$i("disabled",!1),yi("text"),yi("shortcut"),Ru("value","value",Po(function(){return ya("menuitem-value")}),qc()),En("meta",{})],qB=Ba([Za("type"),yi("label"),Is("items",YS),hi("onSetup",function(){return He}),hi("onAction",He)].concat(Ip)),KB=function(n){return zi("cardmenuitem",qB,n)},GB=Ba([Za("type"),$i("active",!1),yi("icon")].concat(Ip)),QS=function(n){return zi("choicemenuitem",GB,n)},JS=[Za("type"),Za("fancytype"),hi("onAction",He)],w_=[En("initData",{})].concat(JS),XB=[Vy("initData",{},[$i("allowCustomColors",!0),hl("colors",qc())])].concat(JS),ZS=nc("fancytype",{inserttable:w_,colorswatch:XB}),YB=function(n){return zi("fancymenuitem",ZS,n)},QB=Ba([Za("type"),hi("onSetup",function(){return He}),hi("onAction",He),yi("icon")].concat(Ip)),JB=function(n){return zi("menuitem",QB,n)},ZB=Ba([Za("type"),_s("getSubmenuItems"),hi("onSetup",function(){return He}),yi("icon")].concat(Ip)),eP=function(n){return zi("nestedmenuitem",ZB,n)},tP=Ba([Za("type"),yi("icon"),$i("active",!1),hi("onSetup",function(){return He}),_s("onAction")].concat(Ip)),nP=function(n){return zi("togglemenuitem",tP,n)},ex=function(n,a,i){var s=Us(n.element,"."+i);if(s.length>0){var f=va(s,function(d){var b=d.dom.getBoundingClientRect().top,O=s[0].dom.getBoundingClientRect().top;return Math.abs(b-O)>a}).getOr(s.length);return $e.some({numColumns:f,numRows:Math.ceil(s.length/f)})}else return $e.none()},C_=function(n,a){return Hr([mo(n,a)])},rP=function(n){return C_(ya("unnamed-events"),n)},Fp={namedEvents:C_,unnamedEvents:rP},t1=ya("tooltip.exclusive"),sm=ya("tooltip.show"),Hp=ya("tooltip.hide"),S_=function(n,a,i){n.getSystem().broadcastOn([t1],{})},aP=function(n,a,i,s){i.getTooltip().each(function(f){f.getSystem().isConnected()&&eo.set(f,s)})},n1=Object.freeze({__proto__:null,hideAllExclusive:S_,setComponents:aP}),tx=function(n,a){var i=function(f){a.getTooltip().each(function(d){$f(d),n.onHide(f,d),a.clearTooltip()}),a.clearTimer()},s=function(f){if(!a.isShowing()){S_(f);var d=n.lazySink(f).getOrDie(),b=f.getSystem().build({dom:n.tooltipDom,components:n.tooltipComponents,events:si(n.mode==="normal"?[wr(Td(),function(O){$o(f,sm)}),wr(Gy(),function(O){$o(f,Hp)})]:[]),behaviours:Hr([eo.config({})])});a.setTooltip(b),jv(d,b),n.onShow(f,b),Yi.position(d,b,{anchor:n.anchor(f)})}};return si(tn([[wr(sm,function(f){a.resetTimer(function(){s(f)},n.delay)}),wr(Hp,function(f){a.resetTimer(function(){i(f)},n.delay)}),wr(uc(),function(f,d){var b=d;b.universal||ln(b.channels,t1)&&i(f)}),sc(function(f){i(f)})],n.mode==="normal"?[wr(_d(),function(f){$o(f,sm)}),wr(Qy(),function(f){$o(f,Hp)}),wr(Td(),function(f){$o(f,sm)}),wr(Gy(),function(f){$o(f,Hp)})]:[wr(rw(),function(f,d){$o(f,sm)}),wr(pb(),function(f){$o(f,Hp)})]]))},r1=Object.freeze({__proto__:null,events:tx}),x_=[yr("lazySink"),yr("tooltipDom"),En("exclusive",!0),En("tooltipComponents",[]),En("delay",300),ac("mode","normal",["normal","follow-highlight"]),En("anchor",function(n){return{type:"hotspot",hotspot:n,layouts:{onLtr:Ke([fu,il,vs,ol,ms,Vs]),onRtl:Ke([fu,il,vs,ol,ms,Vs])}}}),qo("onHide"),qo("onShow")],oP=function(){var n=Xi(),a=Xi(),i=function(){n.on(clearTimeout)},s=function(d,b){i(),n.set(setTimeout(d,b))},f=Ke("not-implemented");return yl({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:s,readState:f})},iP=Object.freeze({__proto__:null,init:oP}),E_=Bu({fields:x_,name:"tooltipping",active:r1,state:iP,apis:n1}),uP=function(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Sg=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),sP=tinymce.util.Tools.resolve("tinymce.EditorManager"),lP=function(n){var a=n.getParam("skin"),i=n.getParam("skin_url");if(a!==!1){var s=a||"oxide";i?i=n.documentBaseURI.toAbsolute(i):i=sP.baseURL+"/skins/ui/"+s}return i},cP=function(n){return n.getParam("readonly",!1,"boolean")},fP=function(n){return n.getParam("skin")===!1},k_=function(n){return n.getParam("height",Math.max(n.getElement().offsetHeight,200))},A_=function(n){return n.getParam("width",Sg.DOM.getStyle(n.getElement(),"width"))},T_=function(n){return $e.from(n.getParam("min_width")).filter(Be)},__=function(n){return $e.from(n.getParam("min_height")).filter(Be)},a1=function(n){return $e.from(n.getParam("max_width")).filter(Be)},O_=function(n){return $e.from(n.getParam("max_height")).filter(Be)},dP=function(n){return $e.from(n.getParam("style_formats")).filter(Xe)},md=function(n){return n.getParam("style_formats_merge",!1,"boolean")},vP=function(n){return n.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},mP=function(n){return n.getParam("content_langs",void 0,"array")},nx=function(n){return n.getParam("removed_menuitems","")},du=function(n){return n.getParam("menubar",!0,"boolean")!==!1},rx=function(n){var a=n.getParam("toolbar",!0),i=a===!0,s=We(a),f=Xe(a)&&a.length>0;return!o1(n)&&(f||s||i)},M_=function(n){var a=dt(9,function(s){return n.getParam("toolbar"+(s+1),!1,"string")}),i=cn(a,function(s){return typeof s=="string"});return i.length>0?$e.some(i):$e.none()},o1=function(n){return M_(n).fold(function(){var a=n.getParam("toolbar",[],"string[]");return a.length>0},it)},Wl;(function(n){n.default="wrap",n.floating="floating",n.sliding="sliding",n.scrolling="scrolling"})(Wl||(Wl={}));var xg=function(n){return n.getParam("toolbar_mode","","string")},lm;(function(n){n.auto="auto",n.top="top",n.bottom="bottom"})(lm||(lm={}));var pP=function(n){return n.getParam("toolbar_groups",{},"object")},D_=function(n){return n.getParam("toolbar_location",lm.auto,"string")},N_=function(n){return D_(n)===lm.bottom},hP=function(n){return n.getParam("fixed_toolbar_container","","string")},gP=function(n){return n.getParam("fixed_toolbar_container_target")},bP=function(n){return n.getParam("toolbar_persist",!1,"boolean")},L_=function(n){if(!n.inline)return $e.none();var a=hP(n);if(a.length>0)return Su(ei(),a);var i=gP(n);return x(i)?$e.some(Gt.fromDom(i)):$e.none()},i1=function(n){return n.inline&&L_(n).isSome()},R_=function(n){var a=L_(n);return a.getOrThunk(function(){return Kr(ja(Gt.fromDom(n.getElement())))})},B_=function(n){return n.inline&&!du(n)&&!rx(n)&&!o1(n)},u1=function(n){var a=n.getParam("toolbar_sticky",!1,"boolean");return(a||n.inline)&&!i1(n)&&!B_(n)},yP=function(n){return n.getParam("toolbar_sticky_offset",0,"number")},wP=function(n){return n.getParam("draggable_modal",!1,"boolean")},CP=function(n){var a=n.getParam("menu");return a?br(a,function(i){return ut(ut({},i),{items:i.items})}):{}},SP=function(n){return n.getParam("menubar")},xP=function(n){return n.getParam("toolbar",!0)},EP=function(n){return n.getParam("file_picker_callback")},kP=function(n){return n.getParam("file_picker_types")},AP=function(n){return n.getParam("file_browser_callback_types")},TP=function(n){return n.getParam("typeahead_urls")===!1},P_=function(n){return n.getParam("anchor_top","#top")},_P=function(n){return n.getParam("anchor_bottom","#bottom")},OP=function(n){var a=n.getParam("file_picker_validator_handler",void 0,"function");return a===void 0?n.getParam("filepicker_validator_handler",void 0,"function"):a},ax="silver.readonly",I_=Ba([tL("readonly")]),zp=function(n,a){var i=n.outerContainer,s=i.element;a&&(n.mothership.broadcastOn([qv()],{target:s}),n.uiMothership.broadcastOn([qv()],{target:s})),n.mothership.broadcastOn([ax],{readonly:a}),n.uiMothership.broadcastOn([ax],{readonly:a})},F_=function(n,a){n.on("init",function(){n.mode.isReadOnly()&&zp(a,!0)}),n.on("SwitchMode",function(){return zp(a,n.mode.isReadOnly())}),cP(n)&&n.setMode("readonly")},vu=function(){var n;return ul.config({channels:(n={},n[ax]={schema:I_,onReceive:function(a,i){Pa.set(a,i.readonly)}},n)})},MP=function(n){return Pa.config({disabled:n,disableClass:"tox-collection__item--state-disabled"})},H_=function(n){return Pa.config({disabled:n})},DP=function(n){return Pa.config({disabled:n,disableClass:"tox-tbtn--disabled"})},z_=function(n){return Pa.config({disabled:n,disableClass:"tox-tbtn--disabled",useNative:!1})},vc={item:MP,button:H_,splitButton:DP,toolbarButton:z_},s1=function(n,a){var i=n.getApi(a);return function(s){s(i)}},$p=function(n,a){return go(function(i){var s=s1(n,i);s(function(f){var d=n.onSetup(f);qe(d)&&a.set(d)})})},Eg=function(n,a){return sc(function(i){return s1(n,i)(a.get())})},ox,NP=function(n,a){return lc(function(i,s){s1(n,i)(n.onAction),!n.triggersSubmenu&&a===gf.CLOSE_ON_EXECUTE&&($o(i,Mh()),s.stop())})},LP=(ox={},ox[Il()]=["disabling","alloy.base.behaviour","toggling","item-events"],ox),Vp=Xa,Up=function(n,a,i,s){var f=Va(He);return{type:"item",dom:a.dom,components:Vp(a.optComponents),data:n.data,eventOrder:LP,hasSubmenu:n.triggersSubmenu,itemBehaviours:Hr([mo("item-events",[NP(n,i),$p(n,f),Eg(n,f)]),vc.item(function(){return n.disabled||s.isDisabled()}),vu(),eo.config({})].concat(n.itemBehaviours))}},av=function(n){return{value:n.value,meta:ut({text:n.text.getOr("")},n.meta)}},l1=tinymce.util.Tools.resolve("tinymce.Env"),RP=function(n){var a={alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"},i={meta:"Ctrl",access:"Shift+Alt"},s=l1.mac?a:i,f=n.split("+"),d=dn(f,function(b){var O=b.toLowerCase().trim();return pr(s,O)?s[O]:b});return l1.mac?d.join(""):d.join("+")},c1=function(n,a,i){return i===void 0&&(i=[US]),Nc(n,{tag:"div",classes:i},a)},$_=function(n){return{dom:{tag:"div",classes:[jS]},components:[ds(Dc.translate(n))]}},V_=function(n,a){return{dom:{tag:"div",classes:a,innerHtml:n}}},ix=function(n,a){return{dom:{tag:"div",classes:[jS]},components:[{dom:{tag:n.tag,styles:n.styles},components:[ds(Dc.translate(a))]}]}},BP=function(n){return{dom:{tag:"div",classes:[DB],innerHtml:RP(n)}}},U_=function(n){return c1("checkmark",n,[NB])},PP=function(n){return c1("chevron-right",n,[v_])},IP=function(n){return c1("chevron-down",n,[v_])},ux=function(n,a){var i=n.direction==="vertical"?m_:p_,s=n.align==="left"?LB:h_,f=function(){switch(n.valign){case"top":return RB;case"middle":return BB;case"bottom":return g_}};return{dom:{tag:"div",classes:[J0,i,s,f()]},components:a}},FP=function(n,a,i){return{dom:{tag:"img",classes:a,attributes:{src:n,alt:i.getOr("")}}}},sx=function(n,a,i){var s="custom",f="remove",d=n.ariaLabel,b=n.value,O=n.iconContent.map(function(Qe){return Dp(Qe,a.icons,i)}),Re=function(){var Qe=$S,ot=O.getOr(""),ct=d.map(function(At){return{title:a.translate(At)}}).getOr({}),St={tag:"div",attributes:ct,classes:[Qe]};return b===s?ut(ut({},St),{tag:"button",classes:Ht(Ht([],St.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:ot}):b===f?ut(ut({},St),{classes:Ht(Ht([],St.classes,!0),["tox-swatch--remove"],!1),innerHtml:ot}):ut(ut({},St),{attributes:ut(ut({},St.attributes),{"data-mce-color":b}),styles:{"background-color":b}})};return{dom:Re(),optComponents:[]}},j_=function(n){var a=n.map(function(i){return{attributes:{title:Dc.translate(i)}}}).getOr({});return ut({tag:"div",classes:[wg,Q0]},a)},W_=function(n,a,i,s){var f={tag:"div",classes:[US]},d=function(St){return Nc(St,f,a.icons,s)},b=function(){return $e.some({dom:f})},O=i?n.iconContent.map(d).orThunk(b):$e.none(),Re=n.checkMark,Qe=$e.from(n.meta).fold(function(){return $_},function(St){return pr(St,"style")?et(ix,St.style):$_}),ot=n.htmlContent.fold(function(){return n.textContent.map(Qe)},function(St){return $e.some(V_(St,[jS]))}),ct={dom:j_(n.ariaLabel),optComponents:[O,ot,n.shortcutContent.map(BP),Re,n.caret]};return ct},kg=function(n,a,i,s){return s===void 0&&(s=$e.none()),n.presets==="color"?sx(n,a,s):W_(n,a,i,s)},jp=function(n,a){return jn(n,"tooltipWorker").map(function(i){return[E_.config({lazySink:a.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(s){return{type:"submenu",item:s,overrides:{maxHeightFunction:$h}}},mode:"follow-highlight",onShow:function(s,f){i(function(d){E_.setComponents(s,[yw({element:Gt.fromDom(d)})])})}})]}).getOr([])},HP=function(n){return Sg.DOM.encode(n)},q_=function(n,a){var i=Dc.translate(n),s=HP(i);if(a.length>0){var f=new RegExp(uP(a),"gi");return s.replace(f,function(d){return'<span class="tox-autocompleter-highlight">'+d+"</span>"})}else return s},zP=function(n,a,i,s,f,d,b,O){O===void 0&&(O=!0);var Re=kg({presets:s,textContent:$e.none(),htmlContent:i?n.text.map(function(Qe){return q_(Qe,a)}):$e.none(),ariaLabel:n.text,iconContent:n.icon,shortcutContent:$e.none(),checkMark:$e.none(),caret:$e.none(),value:n.value},b.providers,O,n.icon);return Up({data:av(n),disabled:n.disabled,getApi:Ke({}),onAction:function(Qe){return f(n.value,n.meta)},onSetup:Ke(He),triggersSubmenu:!1,itemBehaviours:jp(n.meta,b)},Re,d,b.providers)},K_=function(n,a){return dn(n,function(i){switch(i.type){case"cardcontainer":return ux(i,K_(i.items,a));case"cardimage":return FP(i.src,i.classes,i.alt);case"cardtext":var s=i.name.exists(function(d){return ln(a.cardText.highlightOn,d)}),f=s?$e.from(a.cardText.matchText).getOr(""):"";return V_(q_(i.text,f),i.classes)}})},$P=function(n,a,i,s){var f=function(b){return{isDisabled:function(){return Pa.isDisabled(b)},setDisabled:function(O){Pa.set(b,O),en(Us(b.element,"*"),function(Re){b.getSystem().getByDom(Re).each(function(Qe){Qe.hasConfigured(Pa)&&Pa.set(Qe,O)})})}}},d={dom:j_(n.label),optComponents:[$e.some({dom:{tag:"div",classes:[J0,p_]},components:K_(n.items,s)})]};return Up({data:av(ut({text:$e.none()},n)),disabled:n.disabled,getApi:f,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:$e.from(s.itemBehaviours).getOr([])},d,a,i.providers)},VP=function(n,a,i,s,f,d,b,O){O===void 0&&(O=!0);var Re=function(ot){return{setActive:function(ct){Mo.set(ot,ct)},isActive:function(){return Mo.isOn(ot)},isDisabled:function(){return Pa.isDisabled(ot)},setDisabled:function(ct){return Pa.set(ot,ct)}}},Qe=kg({presets:i,textContent:a?n.text:$e.none(),htmlContent:$e.none(),ariaLabel:n.text,iconContent:n.icon,shortcutContent:a?n.shortcut:$e.none(),checkMark:a?$e.some(U_(b.icons)):$e.none(),caret:$e.none(),value:n.value},b,O);return nr(Up({data:av(n),disabled:n.disabled,getApi:Re,onAction:function(ot){return s(n.value)},onSetup:function(ot){return ot.setActive(f),He},triggersSubmenu:!1,itemBehaviours:[]},Qe,d,b),{toggling:{toggleClass:VS,toggleOnExecute:!1,selected:n.active}})},lx=Zh(iS(),P0()),G_=function(n){return{value:n}},X_=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Y_=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Q_=function(n){return X_.test(n)||Y_.test(n)},UP=function(n){return Ei(n,"#").toUpperCase()},jP=function(n){return Q_(n)?$e.some({value:UP(n)}):$e.none()},ov=function(n){var a=n.value.replace(X_,function(i,s,f,d){return s+s+f+f+d+d});return{value:a}},WP=function(n){var a=ov(n),i=Y_.exec(a.value);return i===null?["FFFFFF","FF","FF","FF"]:i},cx=function(n){var a=n.toString(16);return(a.length===1?"0"+a:a).toUpperCase()},Ag=function(n){var a=cx(n.red)+cx(n.green)+cx(n.blue);return G_(a)},f1=Math.min,J_=Math.max,Wp=Math.round,qP=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,fx=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,pd=function(n,a,i,s){return{red:n,green:a,blue:i,alpha:s}},d1=function(n){var a=parseInt(n,10);return a.toString()===n&&a>=0&&a<=255},dx=function(n){var a,i,s,f=(n.hue||0)%360,d=n.saturation/100,b=n.value/100;if(d=J_(0,f1(d,1)),b=J_(0,f1(b,1)),d===0)return a=i=s=Wp(255*b),pd(a,i,s,1);var O=f/60,Re=b*d,Qe=Re*(1-Math.abs(O%2-1)),ot=b-Re;switch(Math.floor(O)){case 0:a=Re,i=Qe,s=0;break;case 1:a=Qe,i=Re,s=0;break;case 2:a=0,i=Re,s=Qe;break;case 3:a=0,i=Qe,s=Re;break;case 4:a=Qe,i=0,s=Re;break;case 5:a=Re,i=0,s=Qe;break;default:a=i=s=0}return a=Wp(255*(a+ot)),i=Wp(255*(i+ot)),s=Wp(255*(s+ot)),pd(a,i,s,1)},Tg=function(n){var a=WP(n),i=parseInt(a[1],16),s=parseInt(a[2],16),f=parseInt(a[3],16);return pd(i,s,f,1)},v1=function(n,a,i,s){var f=parseInt(n,10),d=parseInt(a,10),b=parseInt(i,10),O=parseFloat(s);return pd(f,d,b,O)},Z_=function(n){if(n==="transparent")return $e.some(pd(0,0,0,0));var a=qP.exec(n);if(a!==null)return $e.some(v1(a[1],a[2],a[3],"1"));var i=fx.exec(n);return i!==null?$e.some(v1(i[1],i[2],i[3],i[4])):$e.none()},eO=function(n){return"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")"},tO=pd(255,0,0,1),KP=function(n){return n.fire("SkinLoaded")},GP=function(n,a){return n.fire("SkinLoadError",a)},XP=function(n){return n.fire("ResizeEditor")},vx=function(n,a){return n.fire("ResizeContent",a)},YP=function(n,a){return n.fire("ScrollContent",a)},QP=function(n,a){return n.fire("TextColorChange",a)},_g=function(n,a,i){return{hue:n,saturation:a,value:i}},mx=function(n){var a=0,i=0,s=0,f=n.red/255,d=n.green/255,b=n.blue/255,O=Math.min(f,Math.min(d,b)),Re=Math.max(f,Math.max(d,b));if(O===Re)return s=O,_g(0,0,s*100);var Qe=f===O?d-b:b===O?f-d:b-f;return a=f===O?3:b===O?1:5,a=60*(a-Qe/(Re-O)),i=(Re-O)/Re,s=Re,_g(Math.round(a),Math.round(i*100),Math.round(s*100))},JP=function(n){return mx(Tg(n))},px=function(n){return Ag(dx(n))},ZP=function(n){return jP(n).orThunk(function(){return Z_(n).map(Ag)}).getOrThunk(function(){var a=document.createElement("canvas");a.height=1,a.width=1;var i=a.getContext("2d");i.clearRect(0,0,a.width,a.height),i.fillStyle="#FFFFFF",i.fillStyle=n,i.fillRect(0,0,1,1);var s=i.getImageData(0,0,1,1).data,f=s[0],d=s[1],b=s[2],O=s[3];return Ag(pd(f,d,b,O))})},m1=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),p1="tinymce-custom-colors";function h1(n){n===void 0&&(n=10);var a=m1.getItem(p1),i=We(a)?JSON.parse(a):[],s=function(Re){var Qe=n-Re.length;return Qe<0?Re.slice(0,n):Re},f=s(i),d=function(Re){Nt(f,Re).each(b),f.unshift(Re),f.length>n&&f.pop(),m1.setItem(p1,JSON.stringify(f))},b=function(Re){f.splice(Re,1)},O=function(){return f.slice(0)};return{add:d,state:O}}var ku="choiceitem",g1=[{type:ku,text:"Light Green",value:"#BFEDD2"},{type:ku,text:"Light Yellow",value:"#FBEEB8"},{type:ku,text:"Light Red",value:"#F8CAC6"},{type:ku,text:"Light Purple",value:"#ECCAFA"},{type:ku,text:"Light Blue",value:"#C2E0F4"},{type:ku,text:"Green",value:"#2DC26B"},{type:ku,text:"Yellow",value:"#F1C40F"},{type:ku,text:"Red",value:"#E03E2D"},{type:ku,text:"Purple",value:"#B96AD9"},{type:ku,text:"Blue",value:"#3598DB"},{type:ku,text:"Dark Turquoise",value:"#169179"},{type:ku,text:"Orange",value:"#E67E23"},{type:ku,text:"Dark Red",value:"#BA372A"},{type:ku,text:"Dark Purple",value:"#843FA1"},{type:ku,text:"Dark Blue",value:"#236FA1"},{type:ku,text:"Light Gray",value:"#ECF0F1"},{type:ku,text:"Medium Gray",value:"#CED4D9"},{type:ku,text:"Gray",value:"#95A5A6"},{type:ku,text:"Dark Gray",value:"#7E8C8D"},{type:ku,text:"Navy Blue",value:"#34495E"},{type:ku,text:"Black",value:"#000000"},{type:ku,text:"White",value:"#ffffff"}],nO=h1(10),eI=function(n){for(var a=[],i=0;i<n.length;i+=2)a.push({text:n[i+1],value:"#"+ZP(n[i]).value,type:"choiceitem"});return a},tI=function(n,a){return n.getParam("color_cols",a,"number")},rO=function(n){return n.getParam("custom_colors")!==!1},nI=function(n){return n.getParam("color_map")},hx=function(n){var a=nI(n);return a!==void 0?eI(a):g1},aO=function(){return dn(nO.state(),function(n){return{type:ku,text:n,value:n}})},oO=function(n){nO.add(n)},gx="#000000",rI=function(n,a){var i;return n.dom.getParents(n.selection.getStart(),function(s){var f;(f=s.style[a==="forecolor"?"color":"background-color"])&&(i=i||f)}),$e.from(i)},aI=function(n,a,i){n.undoManager.transact(function(){n.focus(),n.formatter.apply(a,{value:i}),n.nodeChanged()})},oI=function(n,a){n.undoManager.transact(function(){n.focus(),n.formatter.remove(a,{value:null},null,!0),n.nodeChanged()})},iI=function(n){n.addCommand("mceApplyTextcolor",function(a,i){aI(n,a,i)}),n.addCommand("mceRemoveTextcolor",function(a){oI(n,a)})},uI=function(n){return Math.max(5,Math.ceil(Math.sqrt(n)))},b1=function(n){var a=hx(n),i=uI(a.length);return tI(n,i)},iO=function(n){var a="choiceitem",i={type:a,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},s={type:a,text:"Custom color",icon:"color-picker",value:"custom"};return n?[i,s]:[i]},y1=function(n,a,i,s){if(i==="custom"){var f=cO(n);f(function(d){d.each(function(b){oO(b),n.execCommand("mceApplyTextcolor",a,b),s(b)})},gx)}else i==="remove"?(s(""),n.execCommand("mceRemoveTextcolor",a)):(s(i),n.execCommand("mceApplyTextcolor",a,i))},uO=function(n,a){return n.concat(aO().concat(iO(a)))},sO=function(n,a){return function(i){i(uO(n,a))}},bx=function(n,a,i){var s=a==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";n.setIconFill(s,i)},qp=function(n,a,i,s,f){n.ui.registry.addSplitButton(a,{tooltip:s,presets:"color",icon:a==="forecolor"?"text-color":"highlight-bg-color",select:function(d){var b=rI(n,i);return b.bind(function(O){return Z_(O).map(function(Re){var Qe=Ag(Re).value;return wo(d.toLowerCase(),Qe)})}).getOr(!1)},columns:b1(n),fetch:sO(hx(n),rO(n)),onAction:function(d){y1(n,i,f.get(),He)},onItemAction:function(d,b){y1(n,i,b,function(O){f.set(O),QP(n,{name:a,color:O})})},onSetup:function(d){bx(d,a,f.get());var b=function(O){O.name===a&&bx(d,O.name,O.color)};return n.on("TextColorChange",b),function(){n.off("TextColorChange",b)}}})},lO=function(n,a,i,s){n.ui.registry.addNestedMenuItem(a,{text:s,icon:a==="forecolor"?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(f){y1(n,i,f.value,He)}}]}})},cO=function(n){return function(a,i){var s=!1,f=function(O){var Re=O.getData(),Qe=Re.colorpicker;s?(a($e.from(Qe)),O.close()):n.windowManager.alert(n.translate(["Invalid hex color code: {0}",Qe]))},d=function(O,Re){Re.name==="hex-valid"&&(s=Re.value)},b={colorpicker:i};n.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:b,onAction:d,onSubmit:f,onClose:He,onCancel:function(){a($e.none())}})}},sI=function(n){iI(n);var a=Va(gx),i=Va(gx);qp(n,"forecolor","forecolor","Text color",a),qp(n,"backcolor","hilitecolor","Background color",i),lO(n,"forecolor","forecolor","Text color"),lO(n,"backcolor","hilitecolor","Background color")},Kp=function(n,a,i,s,f,d,b,O){var Re=Cg(a),Qe=f!=="color"?"normal":"color",ot=lI(a,i,s,Qe,d,b,O);return XS(n,Re,ot,s,f)},lI=function(n,a,i,s,f,d,b){return Xa(dn(n,function(O){return O.type==="choiceitem"?QS(O).fold(vd,function(Re){return $e.some(VP(Re,i===1,s,a,d(O.value),f,b,Cg(n)))}):$e.none()}))},w1=function(n,a){var i=Pp(a);if(n===1)return{mode:"menu",moveOnTab:!0};if(n==="auto")return{mode:"grid",selector:"."+i.item,initSize:{numColumns:1,numRows:1}};var s=a==="color"?"tox-swatches__row":"tox-collection__group";return{mode:"matrix",rowSelector:"."+s}},fO=function(n,a){return n===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:n==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:a==="color"?".tox-swatches__row":".tox-collection__group",cell:a==="color"?"."+$S:"."+Q0}}},cI=function(n,a){var i=fI(n,a),s=a.colorinput.getColorCols(),f="color",d=Kp(ya("menu-value"),i,function(O){n.onAction({value:O})},s,f,gf.CLOSE_ON_EXECUTE,xt,a.shared.providers),b=ut(ut({},d),{markers:Pp(f),movement:w1(s,f)});return{type:"widget",data:{value:ya("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[lx.widget(ev.sketch(b))]}},fI=function(n,a){var i=n.initData.allowCustomColors&&a.colorinput.hasCustomColors();return n.initData.colors.fold(function(){return uO(a.colorinput.getColors(),i)},function(s){return s.concat(iO(i))})},dO=ya("cell-over"),vO=ya("cell-execute"),dI=function(n,a,i){var s,f=function(O){return za(O,dO,{row:n,col:a})},d=function(O){return za(O,vO,{row:n,col:a})},b=function(O,Re){Re.stop(),d(O)};return uu({dom:{tag:"div",attributes:(s={role:"button"},s["aria-labelledby"]=i,s)},behaviours:Hr([mo("insert-table-picker-cell",[wr(Td(),to.focus),wr(Il(),d),wr(Th(),b),wr(jm(),b)]),Mo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),to.config({onFocus:f})])})},vI=function(n,a,i){for(var s=[],f=0;f<a;f++){for(var d=[],b=0;b<i;b++)d.push(dI(f,b,n));s.push(d)}return s},mI=function(n,a,i,s,f){for(var d=0;d<s;d++)for(var b=0;b<f;b++)Mo.set(n[d][b],d<=a&&b<=i)},pI=function(n){return Mn(n,function(a){return dn(a,$l)})},mO=function(n,a){return ds(a+"x"+n)},cm=function(n){var a=10,i=10,s=ya("size-label"),f=vI(s,a,i),d=mO(0,0),b=Ko({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:s}},components:[d],behaviours:Hr([eo.config({})])});return{type:"widget",data:{value:ya("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[lx.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:pI(f).concat(b.asSpec()),behaviours:Hr([mo("insert-table-picker",[go(function(O){eo.set(b.get(O),[d])}),Od(dO,function(O,Re,Qe){var ot=Qe.event,ct=ot.row,St=ot.col;mI(f,ct,St,a,i),eo.set(b.get(O),[mO(ct+1,St+1)])}),Od(vO,function(O,Re,Qe){var ot=Qe.event,ct=ot.row,St=ot.col;n.onAction({numRows:ct+1,numColumns:St+1}),$o(O,Mh())})]),Da.config({initSize:{numRows:a,numColumns:i},mode:"flatgrid",selector:'[role="button"]'})])})]}},hI={inserttable:cm,colorswatch:cI},gI=function(n,a){return jn(hI,n.fancytype).map(function(i){return i(n,a)})},bI=function(n,a,i,s,f){s===void 0&&(s=!0),f===void 0&&(f=!1);var d=f?IP(i.icons):PP(i.icons),b=function(Re){return{isDisabled:function(){return Pa.isDisabled(Re)},setDisabled:function(Qe){return Pa.set(Re,Qe)}}},O=kg({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:$e.none(),ariaLabel:n.text,caret:$e.some(d),checkMark:$e.none(),shortcutContent:n.shortcut},i,s);return Up({data:av(n),getApi:b,disabled:n.disabled,onAction:He,onSetup:n.onSetup,triggersSubmenu:!0,itemBehaviours:[]},O,a,i)},yI=function(n,a,i,s){s===void 0&&(s=!0);var f=function(b){return{isDisabled:function(){return Pa.isDisabled(b)},setDisabled:function(O){return Pa.set(b,O)}}},d=kg({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:$e.none(),ariaLabel:n.text,caret:$e.none(),checkMark:$e.none(),shortcutContent:n.shortcut},i,s);return Up({data:av(n),getApi:f,disabled:n.disabled,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},d,a,i)},C1=function(n){var a=n.text.fold(function(){return{}},function(i){return{innerHtml:i}});return{type:"separator",dom:ut({tag:"div",classes:[Q0,d_]},a),components:[]}},pO=function(n,a,i,s){s===void 0&&(s=!0);var f=function(b){return{setActive:function(O){Mo.set(b,O)},isActive:function(){return Mo.isOn(b)},isDisabled:function(){return Pa.isDisabled(b)},setDisabled:function(O){return Pa.set(b,O)}}},d=kg({iconContent:n.icon,textContent:n.text,htmlContent:$e.none(),ariaLabel:n.text,checkMark:$e.some(U_(i.icons)),caret:$e.none(),shortcutContent:n.shortcut,presets:"normal",meta:n.meta},i,s);return nr(Up({data:av(n),disabled:n.disabled,getApi:f,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},d,a,i),{toggling:{toggleClass:VS,toggleOnExecute:!1,selected:n.active}})},hO=zP,gO=C1,wI=yI,CI=bI,SI=pO,xI=gI,EI=$P,Og;(function(n){n[n.ContentFocus=0]="ContentFocus",n[n.UiFocus=1]="UiFocus"})(Og||(Og={}));var bO=function(n,a,i,s,f){var d=i.shared.providers,b=function(O){return f?ut(ut({},O),{shortcut:$e.none(),icon:O.text.isSome()?$e.none():O.icon}):O};switch(n.type){case"menuitem":return JB(n).fold(vd,function(O){return $e.some(wI(b(O),a,d,s))});case"nestedmenuitem":return eP(n).fold(vd,function(O){return $e.some(CI(b(O),a,d,s,f))});case"togglemenuitem":return nP(n).fold(vd,function(O){return $e.some(SI(b(O),a,d,s))});case"separator":return Lp(n).fold(vd,function(O){return $e.some(gO(O))});case"fancymenuitem":return YB(n).fold(vd,function(O){return xI(b(O),i)});default:return $e.none()}},kI=function(n,a,i,s,f,d,b){var O=s===1,Re=!O||Cg(n);return Xa(dn(n,function(Qe){switch(Qe.type){case"separator":return i_(Qe).fold(vd,function(ot){return $e.some(gO(ot))});case"cardmenuitem":return KB(Qe).fold(vd,function(ot){return $e.some(EI(ut(ut({},ot),{onAction:function(ct){ot.onAction(ct),i(ot.value,ot.meta)}}),f,d,{itemBehaviours:jp(ot.meta,d),cardText:{matchText:a,highlightOn:b}}))});case"autocompleteitem":default:return u_(Qe).fold(vd,function(ot){return $e.some(hO(ot,a,O,"normal",i,f,d,Re))})}}))},yO=function(n,a,i,s,f){var d=Cg(a),b=Xa(dn(a,function(Re){var Qe=function(ct){return f?!pr(ct,"text"):d},ot=function(ct){return bO(ct,i,s,Qe(ct),f)};return Re.type==="nestedmenuitem"&&Re.getSubmenuItems().length<=0?ot(ut(ut({},Re),{disabled:!0})):ot(Re)})),O=f?$B:XS;return O(n,d,b,1,"normal")},wO=function(n){return fd.singleData(n.value,n)},CO=function(n,a,i,s){var f=i===Og.ContentFocus?xA():og(),d=w1(a,s),b=Pp(s);return{dom:n.dom,components:n.components,items:n.items,value:n.value,markers:{selectedItem:b.selectedItem,item:b.item},movement:d,fakeFocus:i===Og.ContentFocus,focusManager:f,menuBehaviours:Fp.unnamedEvents(a!=="auto"?[]:[go(function(O,Re){ex(O,4,b.item).each(function(Qe){var ot=Qe.numColumns,ct=Qe.numRows;Da.setGridSize(O,ct,ot)})})])}},bf=function(n,a){var i=Xi(),s=Va(!1),f=uu(Pi.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Hr([mo("dismissAutocompleter",[wr(Qc(),function(){return Re()})])]),lazySink:a.getSink})),d=function(){return Pi.isOpen(f)},b=function(){return i.get().isSome()},O=function(){b()&&Pi.hide(f)},Re=function(){if(b()){var jt=i.get().map(function(Sn){return Sn.element});q0(jt.getOr(Gt.fromDom(n.selection.getNode()))).each(Df),O(),i.clear(),s.set(!1)}},Qe=Dn(function(){return Y0(n)}),ot=function(jt,Sn){var Xn=Tn(Sn,function(Kn){return $e.from(Kn.columns)}).getOr(1);return Mn(Sn,function(Kn){var wn=Kn.items;return kI(wn,Kn.matchText,function($n,ir){var Wr=n.selection.getRng();PS(n.dom,Wr,jt).fold(function(){},function(gr){var qr=gr.range,Cr={hide:function(){Re()},reload:function(ar){O(),It(ar)}};s.set(!0),Kn.onAction(Cr,qr,$n,ir),s.set(!1)})},Xn,gf.BUBBLE_TO_SANDBOX,a,Kn.highlightOn)})},ct=function(jt){if(!b()){var Sn=hB(n,jt.range);i.set({triggerChar:jt.triggerChar,element:Sn,matchLength:jt.text.length}),s.set(!1)}},St=function(jt,Sn,Xn,Kn){jt.matchLength=Sn.text.length;var wn=Tn(Xn,function($n){return $e.from($n.columns)}).getOr(1);Pi.showAt(f,ev.sketch(CO(XS("autocompleter-value",!0,Kn,wn,"normal"),wn,Og.ContentFocus,"normal")),{anchor:{type:"node",root:Gt.fromDom(n.getBody()),node:$e.from(jt.element)}}),Pi.getContent(f).each(ni.highlightFirst)},At=function(jt){return i.get().map(function(Sn){return PS(n.dom,n.selection.getRng(),Sn.triggerChar).bind(function(Xn){return a_(n,Qe,Xn,jt)})}).getOrThunk(function(){return yg(n,Qe)})},It=function(jt){At(jt).fold(Re,function(Sn){ct(Sn.context),Sn.lookupData.then(function(Xn){i.get().map(function(Kn){var wn=Sn.context;if(Kn.triggerChar===wn.triggerChar){var $n=ot(wn.triggerChar,Xn);$n.length>0?St(Kn,wn,Xn,$n):wn.text.length-Kn.matchLength>=10?Re():O()}})})})},Yt=W0(function(jt){jt.which!==27&&It()},50),bn={onKeypress:Yt,cancelIfNecessary:Re,isMenuOpen:d,isActive:b,isProcessingAction:s.get,getView:function(){return Pi.getContent(f)}};n.hasPlugin("rtc")===!1&&IS.setup(bn,n)},iv={register:bf},Mg=function(n,a,i){return tf(n,a,i).isSome()},yx=function(n,a){var i=null,s=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];i=setTimeout(function(){n.apply(null,d),i=null},a)},f=function(){i!==null&&(clearTimeout(i),i=null)};return{cancel:f,schedule:s}},wx=5,S1=400,SO=function(n){var a=n.raw;return a.touches===void 0||a.touches.length!==1?$e.none():$e.some(a.touches[0])},Cx=function(n,a){var i=Math.abs(n.clientX-a.x),s=Math.abs(n.clientY-a.y);return i>wx||s>wx},Sx=function(n){var a=Xi(),i=Va(!1),s=yx(function(Qe){n.triggerEvent(Zy(),Qe),i.set(!0)},S1),f=function(Qe){return SO(Qe).each(function(ot){s.cancel();var ct={x:ot.clientX,y:ot.clientY,target:Qe.target};s.schedule(Qe),i.set(!1),a.set(ct)}),$e.none()},d=function(Qe){return s.cancel(),SO(Qe).each(function(ot){a.on(function(ct){Cx(ot,ct)&&a.clear()})}),$e.none()},b=function(Qe){s.cancel();var ot=function(ct){return bi(ct.target,Qe.target)};return a.get().filter(ot).map(function(ct){return i.get()?(Qe.prevent(),!1):n.triggerEvent(jm(),Qe)})},O=Mv([{key:ud(),value:f},{key:Xc(),value:d},{key:Ah(),value:b}]),Re=function(Qe,ot){return jn(O,ot).bind(function(ct){return ct(Qe)})};return{fireIfReady:Re}},xx=function(n){var a=n.raw;return a.which===TR[0]&&!ln(["input","textarea"],Zt(n.target))&&!Mg(n.target,'[contenteditable="true"]')},xO=function(){return Ra().browser.isFirefox()},AI=function(n,a){return xO()?Vb(n,"focus",a):su(n,"focusin",a)},TI=function(n,a){return xO()?Vb(n,"blur",a):su(n,"focusout",a)},x1=function(n,a){var i=ut({stopBackspace:!0},a),s=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],f=Sx(i),d=dn(s.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(At){return su(n,At,function(It){f.fireIfReady(It,At).each(function(bn){bn&&It.kill()});var Yt=i.triggerEvent(At,It);Yt&&It.kill()})}),b=Xi(),O=su(n,"paste",function(At){f.fireIfReady(At,"paste").each(function(Yt){Yt&&At.kill()});var It=i.triggerEvent("paste",At);It&&At.kill(),b.set(setTimeout(function(){i.triggerEvent(Jy(),At)},0))}),Re=su(n,"keydown",function(At){var It=i.triggerEvent("keydown",At);It?At.kill():i.stopBackspace&&xx(At)&&At.prevent()}),Qe=AI(n,function(At){var It=i.triggerEvent("focusin",At);It&&At.kill()}),ot=Xi(),ct=TI(n,function(At){var It=i.triggerEvent("focusout",At);It&&At.kill(),ot.set(setTimeout(function(){i.triggerEvent(Qy(),At)},0))}),St=function(){en(d,function(At){At.unbind()}),Re.unbind(),Qe.unbind(),ct.unbind(),O.unbind(),b.on(clearTimeout),ot.on(clearTimeout)};return{unbind:St}},EO=function(n,a){var i=jn(n,"target").getOr(a);return Va(i)},_I=function(n,a){var i=Va(!1),s=Va(!1),f=function(){i.set(!0)},d=function(){s.set(!0)};return{stop:f,cut:d,isStopped:i.get,isCut:s.get,event:n,setSource:a.set,getSource:a.get}},OI=function(n){var a=Va(!1),i=function(){a.set(!0)};return{stop:i,cut:He,isStopped:a.get,isCut:xt,event:n,setSource:wt("Cannot set source of a broadcasted event"),getSource:wt("Cannot get source of a broadcasted event")}},Gp=ic.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),kO=function(n,a,i,s,f,d){var b=n(a,s),O=_I(i,f);return b.fold(function(){return d.logEventNoHandlers(a,s),Gp.complete()},function(Re){var Qe=Re.descHandler,ot=cw(Qe);return ot(O),O.isStopped()?(d.logEventStopped(a,Re.element,Qe.purpose),Gp.stopped()):O.isCut()?(d.logEventCut(a,Re.element,Qe.purpose),Gp.complete()):ru(Re.element).fold(function(){return d.logNoParent(a,Re.element,Qe.purpose),Gp.complete()},function(ct){return d.logEventResponse(a,Re.element,Qe.purpose),Gp.resume(ct)})})},Ex=function(n,a,i,s,f,d){return kO(n,a,i,s,f,d).fold(it,function(b){return Ex(n,a,i,b,f,d)},xt)},MI=function(n,a,i,s,f){var d=EO(i,s);return kO(n,a,i,s,d,f)},DI=function(n,a,i){var s=OI(a);return en(n,function(f){var d=f.descHandler,b=cw(d);b(s)}),s.isStopped()},AO=function(n,a,i,s){return TO(n,a,i,i.target,s)},TO=function(n,a,i,s,f){var d=EO(i,s);return Ex(n,a,i,s,d,f)},NI=function(n,a){return{element:n,descHandler:a}},_O=function(n,a){return{id:n,descHandler:a}},OO=function(){var n={},a=function(b,O,Re){Pr(Re,function(Qe,ot){var ct=n[ot]!==void 0?n[ot]:{};ct[O]=lw(Qe,b),n[ot]=ct})},i=function(b,O){return Ym(O).bind(function(Re){return jn(b,Re)}).map(function(Re){return NI(O,Re)})},s=function(b){return jn(n,b).map(function(O){return Ar(O,function(Re,Qe){return _O(Qe,Re)})}).getOr([])},f=function(b,O,Re){return jn(n,O).bind(function(Qe){return qy(Re,function(ot){return i(Qe,ot)},b)})},d=function(b){Pr(n,function(O,Re){pr(O,b)&&delete O[b]})};return{registerId:a,unregisterId:d,filterByType:s,find:f}},LI=function(){var n=OO(),a={},i=function(Qe){var ot=Qe.element;return Ym(ot).getOrThunk(function(){return A2("uid-",Qe.element)})},s=function(Qe,ot){var ct=a[ot];if(ct===Qe)d(Qe);else throw new Error('The tagId "'+ot+'" is already used by: '+Ld(ct.element)+`
Cannot use it for: `+Ld(Qe.element)+`
The conflicting element is`+(Ja(ct.element)?" ":" not ")+"already in the DOM")},f=function(Qe){var ot=i(Qe);aa(a,ot)&&s(Qe,ot);var ct=[Qe];n.registerId(ct,ot,Qe.events),a[ot]=Qe},d=function(Qe){Ym(Qe.element).each(function(ot){delete a[ot],n.unregisterId(ot)})},b=function(Qe){return n.filterByType(Qe)},O=function(Qe,ot,ct){return n.find(Qe,ot,ct)},Re=function(Qe){return jn(a,Qe)};return{find:O,filter:b,register:f,unregister:d,getById:Re}},RI=function(n){var a=n.dom,i=a.attributes,s=Et(a,["attributes"]);return{uid:n.uid,dom:ut({tag:"div",attributes:ut({role:"presentation"},i)},s),components:n.components,behaviours:i0(n.containerBehaviours),events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},gs=jl({name:"Container",factory:RI,configFields:[En("components",[]),Eu("containerBehaviours",[]),En("events",{}),En("domModification",{}),En("eventOrder",{})]}),MO=function(n){var a=function(jt){return ru(n.element).fold(it,function(Sn){return bi(jt,Sn)})},i=LI(),s=function(jt,Sn){return i.find(a,jt,Sn)},f=x1(n.element,{triggerEvent:function(jt,Sn){return xw(jt,Sn.target,function(Xn){return AO(s,jt,Sn,Xn)})}}),d={debugInfo:Ke("real"),triggerEvent:function(jt,Sn,Xn){xw(jt,Sn,function(Kn){return TO(s,jt,Xn,Sn,Kn)})},triggerFocus:function(jt,Sn){Ym(jt).fold(function(){nf(jt)},function(Xn){xw(Um(),jt,function(Kn){return MI(s,Um(),{originator:Sn,kill:He,prevent:He,target:jt},jt,Kn),!1})})},triggerEscape:function(jt,Sn){d.triggerEvent("keydown",jt.element,Sn.event)},getByUid:function(jt){return Yt(jt)},getByDom:function(jt){return bn(jt)},build:uu,addToGui:function(jt){Re(jt)},removeFromGui:function(jt){Qe(jt)},addToWorld:function(jt){b(jt)},removeFromWorld:function(jt){O(jt)},broadcast:function(jt){St(jt)},broadcastOn:function(jt,Sn){At(jt,Sn)},broadcastEvent:function(jt,Sn){It(jt,Sn)},isConnected:it},b=function(jt){jt.connect(d),Rt(jt.element)||(i.register(jt),en(jt.components(),b),d.triggerEvent(Dh(),jt.element,{target:jt.element}))},O=function(jt){Rt(jt.element)||(en(jt.components(),O),i.unregister(jt)),jt.disconnect()},Re=function(jt){jv(n,jt)},Qe=function(jt){$f(jt)},ot=function(){f.unbind(),Uu(n.element)},ct=function(jt){var Sn=i.filter(uc());en(Sn,function(Xn){var Kn=Xn.descHandler,wn=cw(Kn);wn(jt)})},St=function(jt){ct({universal:!0,data:jt})},At=function(jt,Sn){ct({universal:!1,channels:jt,data:Sn})},It=function(jt,Sn){var Xn=i.filter(jt);return DI(Xn,Sn)},Yt=function(jt){return i.getById(jt).fold(function(){return So.error(new Error('Could not find component with uid: "'+jt+'" in system.'))},So.value)},bn=function(jt){var Sn=Ym(jt).getOr("not found");return Yt(Sn)};return b(n),{root:n,element:n.element,destroy:ot,add:Re,remove:Qe,getByUid:Yt,getByDom:bn,addToWorld:b,removeFromWorld:O,broadcast:St,broadcastOn:At,broadcastEvent:It}},BI=function(n,a){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:dn(n.items,a.interpreter)}},E1=Ke([En("prefix","form-field"),Eu("fieldBehaviours",[Oo,Xr])]),Gs=Ke([Oc({schema:[yr("dom")],name:"label"}),Oc({factory:{sketch:function(n){return{uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}}}},schema:[yr("text")],name:"aria-descriptor"}),hs({factory:{sketch:function(n){var a=jy(n,["factory"]);return n.factory.sketch(a)}},schema:[yr("factory")],name:"field"})]),DO=function(n,a,i,s){var f=Ku(n.fieldBehaviours,[Oo.config({find:function(O){return li(O,n,"field")}}),Xr.config({store:{mode:"manual",getValue:function(O){return Oo.getCurrent(O).bind(Xr.getValue)},setValue:function(O,Re){Oo.getCurrent(O).each(function(Qe){Xr.setValue(Qe,Re)})}}})]),d=si([go(function(O,Re){var Qe=sA(O,n,["label","field","aria-descriptor"]);Qe.field().each(function(ot){var ct=ya(n.prefix);Qe.label().each(function(St){ho(St.element,"for",ct),ho(ot.element,"id",ct)}),Qe["aria-descriptor"]().each(function(St){var At=ya(n.prefix);ho(St.element,"id",At),ho(ot.element,"aria-describedby",At)})})})]),b={getField:function(O){return li(O,n,"field")},getLabel:function(O){return li(O,n,"label")}};return{uid:n.uid,dom:n.dom,components:a,behaviours:f,events:d,apis:b}},Ho=Ws({name:"FormField",configFields:E1(),partFields:Gs(),factory:DO,apis:{getField:function(n,a){return n.getField(a)},getLabel:function(n,a){return n.getLabel(a)}}}),PI=function(n,a){return Ac({attributes:Mv([{key:a.tabAttr,value:"true"}])})},II=Object.freeze({__proto__:null,exhibit:PI}),FI=[En("tabAttr","data-alloy-tabstop")],Ui=Bu({fields:FI,name:"tabstopping",active:II}),NO=tinymce.util.Tools.resolve("tinymce.html.Entities"),Dg=function(n,a,i,s){var f=LO(n,a,i,s);return Ho.sketch(f)},HI=function(n,a){return Dg(n,a,[],[])},LO=function(n,a,i,s){return{dom:kx(i),components:n.toArray().concat([a]),fieldBehaviours:Hr(s)}},zI=function(){return kx([])},kx=function(n){return{tag:"div",classes:["tox-form__group"].concat(n)}},hd=function(n,a){return Ho.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:a.translate(n)}})},kl=ya("form-component-change"),Ng=ya("form-close"),fm=ya("form-cancel"),Xf=ya("form-action"),Lg=ya("form-submit"),Ax=ya("form-block"),Tx=ya("form-unblock"),uv=ya("form-tabchange"),RO=ya("form-resize"),$I=function(n,a){var i,s=n.label.map(function(ct){return hd(ct,a)}),f=function(ct){return function(St,At){tf(At.event.target,"[data-collection-item-value]").each(function(It){ct(St,At,It,Ti(It,"data-collection-item-value"))})}},d=function(ct,St){var At=dn(St,function(bn){var jt=Dc.translate(bn.text),Sn=n.columns===1?'<div class="tox-collection__item-label">'+jt+"</div>":"",Xn='<div class="tox-collection__item-icon">'+bn.icon+"</div>",Kn={_:" "," - ":" ","-":" "},wn=jt.replace(/\_| \- |\-/g,function(ir){return Kn[ir]}),$n=a.isDisabled()?" tox-collection__item--state-disabled":"";return'<div class="tox-collection__item'+$n+'" tabindex="-1" data-collection-item-value="'+NO.encodeAllRaw(bn.value)+'" title="'+wn+'" aria-label="'+wn+'">'+Xn+Sn+"</div>"}),It=n.columns!=="auto"&&n.columns>1?ur(At,n.columns):[At],Yt=dn(It,function(bn){return'<div class="tox-collection__group">'+bn.join("")+"</div>"});Md(ct.element,Yt.join(""))},b=f(function(ct,St,At,It){St.stop(),a.isDisabled()||za(ct,Xf,{name:n.name,value:It})}),O=[wr(Td(),f(function(ct,St,At){nf(At)})),wr(Th(),b),wr(jm(),b),wr(_d(),f(function(ct,St,At){Su(ct.element,"."+um).each(function(It){cu(It,um)}),Cu(At,um)})),wr(Zu(),f(function(ct){Su(ct.element,"."+um).each(function(St){cu(St,um)})})),lc(f(function(ct,St,At,It){za(ct,Xf,{name:n.name,value:It})}))],Re=function(ct,St){return dn(Us(ct.element,".tox-collection__item"),St)},Qe=Ho.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(n.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:tt},behaviours:Hr([Pa.config({disabled:a.isDisabled,onDisabled:function(ct){Re(ct,function(St){Cu(St,"tox-collection__item--state-disabled"),ho(St,"aria-disabled",!0)})},onEnabled:function(ct){Re(ct,function(St){cu(St,"tox-collection__item--state-disabled"),gu(St,"aria-disabled")})}}),vu(),eo.config({}),Xr.config({store:{mode:"memory",initialValue:[]},onSetValue:function(ct,St){d(ct,St),n.columns==="auto"&&ex(ct,5,"tox-collection__item").each(function(At){var It=At.numRows,Yt=At.numColumns;Da.setGridSize(ct,It,Yt)}),$o(ct,RO)}}),Ui.config({}),Da.config(fO(n.columns,"normal")),mo("collection-events",O)]),eventOrder:(i={},i[Il()]=["disabling","alloy.base.behaviour","collection-events"],i)}),ot=["tox-form__group--collection"];return Dg(s,Qe,ot,[])},gd=Ke([ti("data"),En("inputAttributes",{}),En("inputStyles",{}),En("tag","input"),En("inputClasses",[]),qo("onSetValue"),En("styles",{}),En("eventOrder",{}),Eu("inputBehaviours",[Xr,to]),En("selectOnFocus",!0)]),BO=function(n){return Hr([to.config({onFocus:n.selectOnFocus?function(a){var i=a.element,s=$d(i);i.dom.setSelectionRange(0,s.length)}:He})])},VI=function(n){return ut(ut({},BO(n)),Ku(n.inputBehaviours,[Xr.config({store:ut(ut({mode:"manual"},n.data.map(function(a){return{initialValue:a}}).getOr({})),{getValue:function(a){return $d(a.element)},setValue:function(a,i){var s=$d(a.element);s!==i&&Jm(a.element,i)}}),onSetValue:n.onSetValue})]))},ql=function(n){return{tag:n.tag,attributes:ut({type:"text"},n.inputAttributes),styles:n.inputStyles,classes:n.inputClasses}},PO=function(n,a){return{uid:n.uid,dom:ql(n),components:[],behaviours:VI(n),eventOrder:n.eventOrder}},Xp=jl({name:"Input",configFields:gd(),factory:PO}),IO={},FO={exports:IO};(function(n,a,i,s){(function(f,d){typeof a=="object"&&typeof i!="undefined"?i.exports=d():typeof n=="function"&&n.amd?n(d):(f=typeof globalThis!="undefined"?globalThis:f||self,f.EphoxContactWrapper=d())})(this,function(){var f=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof commonjsGlobal!="undefined"?commonjsGlobal:typeof self!="undefined"?self:{},d={exports:{}};(function(Qe){(function(ot){var ct=setTimeout;function St(){}function At(wn,$n){return function(){wn.apply($n,arguments)}}function It(wn){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof wn!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Kn(wn,this)}function Yt(wn,$n){for(;wn._state===3;)wn=wn._value;if(wn._state===0){wn._deferreds.push($n);return}wn._handled=!0,It._immediateFn(function(){var ir=wn._state===1?$n.onFulfilled:$n.onRejected;if(ir===null){(wn._state===1?bn:jt)($n.promise,wn._value);return}var Wr;try{Wr=ir(wn._value)}catch(gr){jt($n.promise,gr);return}bn($n.promise,Wr)})}function bn(wn,$n){try{if($n===wn)throw new TypeError("A promise cannot be resolved with itself.");if($n&&(typeof $n=="object"||typeof $n=="function")){var ir=$n.then;if($n instanceof It){wn._state=3,wn._value=$n,Sn(wn);return}else if(typeof ir=="function"){Kn(At(ir,$n),wn);return}}wn._state=1,wn._value=$n,Sn(wn)}catch(Wr){jt(wn,Wr)}}function jt(wn,$n){wn._state=2,wn._value=$n,Sn(wn)}function Sn(wn){wn._state===2&&wn._deferreds.length===0&&It._immediateFn(function(){wn._handled||It._unhandledRejectionFn(wn._value)});for(var $n=0,ir=wn._deferreds.length;$n<ir;$n++)Yt(wn,wn._deferreds[$n]);wn._deferreds=null}function Xn(wn,$n,ir){this.onFulfilled=typeof wn=="function"?wn:null,this.onRejected=typeof $n=="function"?$n:null,this.promise=ir}function Kn(wn,$n){var ir=!1;try{wn(function(Wr){ir||(ir=!0,bn($n,Wr))},function(Wr){ir||(ir=!0,jt($n,Wr))})}catch(Wr){if(ir)return;ir=!0,jt($n,Wr)}}It.prototype.catch=function(wn){return this.then(null,wn)},It.prototype.then=function(wn,$n){var ir=new this.constructor(St);return Yt(this,new Xn(wn,$n,ir)),ir},It.all=function(wn){var $n=Array.prototype.slice.call(wn);return new It(function(ir,Wr){if($n.length===0)return ir([]);var gr=$n.length;function qr(ar,Ir){try{if(Ir&&(typeof Ir=="object"||typeof Ir=="function")){var ga=Ir.then;if(typeof ga=="function"){ga.call(Ir,function(hr){qr(ar,hr)},Wr);return}}$n[ar]=Ir,--gr===0&&ir($n)}catch(hr){Wr(hr)}}for(var Cr=0;Cr<$n.length;Cr++)qr(Cr,$n[Cr])})},It.resolve=function(wn){return wn&&typeof wn=="object"&&wn.constructor===It?wn:new It(function($n){$n(wn)})},It.reject=function(wn){return new It(function($n,ir){ir(wn)})},It.race=function(wn){return new It(function($n,ir){for(var Wr=0,gr=wn.length;Wr<gr;Wr++)wn[Wr].then($n,ir)})},It._immediateFn=typeof setImmediate=="function"?function(wn){setImmediate(wn)}:function(wn){ct(wn,0)},It._unhandledRejectionFn=function($n){},It._setImmediateFn=function($n){It._immediateFn=$n},It._setUnhandledRejectionFn=function($n){It._unhandledRejectionFn=$n},Qe.exports?Qe.exports=It:ot.Promise||(ot.Promise=It)})(f)})(d);var b=d.exports,O=function(){return typeof window!="undefined"?window:Function("return this;")()}(),Re={boltExport:O.Promise||b};return Re})})(void 0,IO,FO);var Lc=FO.exports.boltExport,_x=function(n){var a=$e.none(),i=[],s=function(Qe){return _x(function(ot){f(function(ct){ot(Qe(ct))})})},f=function(Qe){b()?Re(Qe):i.push(Qe)},d=function(Qe){b()||(a=$e.some(Qe),O(i),i=[])},b=function(){return a.isSome()},O=function(Qe){en(Qe,Re)},Re=function(Qe){a.each(function(ot){setTimeout(function(){Qe(ot)},0)})};return n(d),{get:f,map:s,isReady:b}},HO=function(n){return _x(function(a){a(n)})},UI={nu:_x,pure:HO},jI=function(n){setTimeout(function(){throw n},0)},Yp=function(n){var a=function(Re){n().then(Re,jI)},i=function(Re){return Yp(function(){return n().then(Re)})},s=function(Re){return Yp(function(){return n().then(function(Qe){return Re(Qe).toPromise()})})},f=function(Re){return Yp(function(){return n().then(function(){return Re.toPromise()})})},d=function(){return UI.nu(a)},b=function(){var Re=null;return Yp(function(){return Re===null&&(Re=n()),Re})},O=n;return{map:i,bind:s,anonBind:f,toLazy:d,toCached:b,toPromise:O,get:a}},Ox=function(n){return Yp(function(){return new Lc(n)})},WI=function(n){return Yp(function(){return Lc.resolve(n)})},as={nu:Ox,pure:WI},qI=["input","textarea"],zO=function(n){var a=Zt(n);return ln(qI,a)},$O=function(n,a){var i=a.getRoot(n).getOr(n.element);cu(i,a.invalidClass),a.notify.each(function(s){zO(n.element)&&ho(n.element,"aria-invalid",!1),s.getContainer(n).each(function(f){Md(f,s.validHtml)}),s.onValid(n)})},VO=function(n,a,i,s){var f=a.getRoot(n).getOr(n.element);Cu(f,a.invalidClass),a.notify.each(function(d){zO(n.element)&&ho(n.element,"aria-invalid",!0),d.getContainer(n).each(function(b){Md(b,s)}),d.onInvalid(n,s)})},UO=function(n,a,i){return a.validator.fold(function(){return as.pure(So.value(!0))},function(s){return s.validate(n)})},k1=function(n,a,i){return a.notify.each(function(s){s.onValidate(n)}),UO(n,a).map(function(s){return n.getSystem().isConnected()?s.fold(function(f){return VO(n,a,i,f),So.error(f)},function(f){return $O(n,a),So.value(f)}):So.error("No longer in system")})},jO=function(n,a){var i=a.getRoot(n).getOr(n.element);return Hs(i,a.invalidClass)},KI=Object.freeze({__proto__:null,markValid:$O,markInvalid:VO,query:UO,run:k1,isInvalid:jO}),GI=function(n,a){return n.validator.map(function(i){return si([wr(i.onEvent,function(s){k1(s,n,a).get(tt)})].concat(i.validateOnLoad?[go(function(s){k1(s,n,a).get(He)})]:[]))}).getOr({})},XI=Object.freeze({__proto__:null,events:GI}),YI=[yr("invalidClass"),En("getRoot",$e.none),Pl("notify",[En("aria","alert"),En("getContainer",$e.none),En("validHtml",""),qo("onValid"),qo("onInvalid"),qo("onValidate")]),Pl("validator",[yr("validate"),En("onEvent","input"),En("validateOnLoad",!0)])],Yf=Bu({fields:YI,name:"invalidating",active:XI,apis:KI,extra:{validation:function(n){return function(a){var i=Xr.getValue(a);return as.pure(n(i))}}}}),WO=function(n,a,i,s){return i.getOrCreate(n,a,s)},qO=Object.freeze({__proto__:null,getCoupled:WO}),KO=[pl("others",cs(So.value,qc()))],A1=function(){var n={},a=function(s,f,d){var b=Rn(f.others);if(b)return jn(n,d).getOrThunk(function(){var O=jn(f.others,d).getOrDie("No information found for coupled component: "+d),Re=O(s),Qe=s.getSystem().build(Re);return n[d]=Qe,Qe});throw new Error("Cannot find coupled component: "+d+". Known coupled components: "+JSON.stringify(b,null,2))},i=Ke({});return yl({readState:i,getOrCreate:a})},QI=Object.freeze({__proto__:null,init:A1}),Qi=Bu({fields:KO,name:"coupling",apis:qO,state:QI}),GO=Ke("sink"),XO=Ke(Oc({name:GO(),overrides:Ke({dom:{tag:"div"},behaviours:Hr([Yi.config({useFixed:it})]),events:si([Nv(fb()),Nv(kc()),Nv(Th())])})})),yf;(function(n){n[n.HighlightFirst=0]="HighlightFirst",n[n.HighlightNone=1]="HighlightNone"})(yf||(yf={}));var YO=function(n,a){var i=n.getHotspot(a).getOr(a),s="hotspot",f=n.getAnchorOverrides();return n.layouts.fold(function(){return{type:s,hotspot:i,overrides:f}},function(d){return{type:s,hotspot:i,overrides:f,layouts:d}})},T1=function(n,a,i){var s=n.fetch;return s(i).map(a)},JI=function(n,a,i,s,f,d,b){var O=T1(n,a,s),Re=Dx(s,n);return O.map(function(Qe){return Qe.bind(function(ot){return $e.from(fd.sketch(ut(ut({},d.menu()),{uid:Bd(""),data:ot,highlightImmediately:b===yf.HighlightFirst,onOpenMenu:function(ct,St){var At=Re().getOrDie();Yi.position(At,St,{anchor:i}),Do.decloak(f)},onOpenSubmenu:function(ct,St,At){var It=Re().getOrDie();Yi.position(It,At,{anchor:{type:"submenu",item:St}}),Do.decloak(f)},onRepositionMenu:function(ct,St,At){var It=Re().getOrDie();Yi.position(It,St,{anchor:i}),en(At,function(Yt){Yi.position(It,Yt.triggeredMenu,{anchor:{type:"submenu",item:Yt.triggeringItem}})})},onEscape:function(){return to.focus(s),Do.close(f),$e.some(!0)}})))})})},Mx=function(n,a,i,s,f,d,b){var O=YO(n,i),Re=JI(n,a,O,i,s,f,b);return Re.map(function(Qe){return Qe.fold(function(){Do.isOpen(s)&&Do.close(s)},function(ot){Do.cloak(s),Do.open(s,ot),d(s)}),s})},bd=function(n,a,i,s,f,d,b){return Do.close(s),as.pure(s)},Qp=function(n,a,i,s,f,d){var b=Qi.getCoupled(i,"sandbox"),O=Do.isOpen(b),Re=O?bd:Mx;return Re(n,a,i,b,s,f,d)},Jp=function(n,a,i){var s=Oo.getCurrent(a).getOr(a),f=na(n.element);i?Qa(s.element,"min-width",f+"px"):ha(s.element,f)},Dx=function(n,a){return n.getSystem().getByUid(a.uid+"-"+GO()).map(function(i){return function(){return So.value(i)}}).getOrThunk(function(){return a.lazySink.fold(function(){return function(){return So.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(i){return function(){return i(n)}})})},_1=function(n){Do.getState(n).each(function(a){fd.repositionMenus(a)})},Nx=function(n,a,i){var s=Pv(),f=function(O,Re){var Qe=YO(n,a);s.link(a.element),n.matchWidth&&Jp(Qe.hotspot,Re,n.useMinWidth),n.onOpen(Qe,O,Re),i!==void 0&&i.onOpen!==void 0&&i.onOpen(O,Re)},d=function(O,Re){s.unlink(a.element),i!==void 0&&i.onClose!==void 0&&i.onClose(O,Re)},b=Dx(a,n);return{dom:{tag:"div",classes:n.sandboxClasses,attributes:{id:s.id,role:"listbox"}},behaviours:fc.augment(n.sandboxBehaviours,[Xr.config({store:{mode:"memory",initialValue:a}}),Do.config({onOpen:f,onClose:d,isPartOf:function(O,Re,Qe){return Iv(Re,Qe)||Iv(a,Qe)},getAttachPoint:function(){return b().getOrDie()}}),Oo.config({find:function(O){return Do.getState(O).bind(function(Re){return Oo.getCurrent(Re)})}}),ul.config({channels:ut(ut({},Sl({isExtraPart:xt})),Kv({doReposition:_1}))})])}},QO=function(n){var a=Qi.getCoupled(n,"sandbox");_1(a)},Lx=function(){return[En("sandboxClasses",[]),fc.field("sandboxBehaviours",[Oo,ul,Do,Xr])]},JO=Ke([yr("dom"),yr("fetch"),qo("onOpen"),wl("onExecute"),En("getHotspot",$e.some),En("getAnchorOverrides",Ke({})),qd(),Eu("dropdownBehaviours",[Mo,Qi,Da,to]),yr("toggleClass"),En("eventOrder",{}),ti("lazySink"),En("matchWidth",!1),En("useMinWidth",!1),ti("role")].concat(Lx())),ZI=Ke([_c({schema:[Mb()],name:"menu",defaults:function(n){return{onExecute:n.onExecute}}}),XO()]),O1=function(n,a,i,s){var f,d=function(ot){return jn(n.dom,"attributes").bind(function(ct){return jn(ct,ot)})},b=function(ot){Do.getState(ot).each(function(ct){fd.highlightPrimary(ct)})},O=function(ot){var ct=b;Qp(n,tt,ot,s,ct,yf.HighlightFirst).get(He)},Re={expand:function(ot){Mo.isOn(ot)||Qp(n,tt,ot,s,He,yf.HighlightNone).get(He)},open:function(ot){Mo.isOn(ot)||Qp(n,tt,ot,s,He,yf.HighlightFirst).get(He)},isOpen:Mo.isOn,close:function(ot){Mo.isOn(ot)&&Qp(n,tt,ot,s,He,yf.HighlightFirst).get(He)},repositionMenus:function(ot){Mo.isOn(ot)&&QO(ot)}},Qe=function(ot,ct){return Hl(ot),$e.some(!0)};return{uid:n.uid,dom:n.dom,components:a,behaviours:Ku(n.dropdownBehaviours,[Mo.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),Qi.config({others:{sandbox:function(ot){return Nx(n,ot,{onOpen:function(){return Mo.on(ot)},onClose:function(){return Mo.off(ot)}})}}}),Da.config({mode:"special",onSpace:Qe,onEnter:Qe,onDown:function(ot,ct){if(Rc.isOpen(ot)){var St=Qi.getCoupled(ot,"sandbox");b(St)}else Rc.open(ot);return $e.some(!0)},onEscape:function(ot,ct){return Rc.isOpen(ot)?(Rc.close(ot),$e.some(!0)):$e.none()}}),to.config({})]),events:B0($e.some(O)),eventOrder:ut(ut({},n.eventOrder),(f={},f[Il()]=["disabling","toggling","alloy.base.behaviour"],f)),apis:Re,domModification:{attributes:ut(ut({"aria-haspopup":"true"},n.role.fold(function(){return{}},function(ot){return{role:ot}})),n.dom.tag==="button"?{type:d("type").getOr("button")}:{})}}},Rc=Ws({name:"Dropdown",configFields:JO(),partFields:ZI(),factory:O1,apis:{open:function(n,a){return n.open(a)},expand:function(n,a){return n.expand(a)},close:function(n,a){return n.close(a)},isOpen:function(n,a){return n.isOpen(a)},repositionMenus:function(n,a){return n.repositionMenus(a)}}}),Kl=function(){return Ac({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})},eF=function(){return si([C2(dL(),it)])},tF=Object.freeze({__proto__:null,events:eF,exhibit:Kl}),Zp=Bu({fields:[],name:"unselecting",active:tF}),ZO=function(n,a){return Rc.sketch({dom:n.dom,components:n.components,toggleClass:"mce-active",dropdownBehaviours:Hr([vc.button(a.providers.isDisabled),vu(),Zp.config({}),Ui.config({})]),layouts:n.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:a.getSink,fetch:function(i){return as.nu(function(s){return n.fetch(s)}).map(function(s){return $e.from(wO(nr(Kp(ya("menu-value"),s,function(f){n.onItemAction(i,f)},n.columns,n.presets,gf.CLOSE_ON_EXECUTE,xt,a.providers),{movement:w1(n.columns,n.presets)})))})},parts:{menu:Z0(!1,1,n.presets)}})},eM=ya("color-input-change"),tM=ya("color-swatch-change"),nM=ya("color-picker-cancel"),nF=function(n,a,i){var s=Ho.parts.field({factory:Xp,inputClasses:["tox-textfield"],onSetValue:function(Re){return Yf.run(Re).get(He)},inputBehaviours:Hr([Pa.config({disabled:a.providers.isDisabled}),vu(),Ui.config({}),Yf.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(Re){return ru(Re.element)},notify:{onValid:function(Re){var Qe=Xr.getValue(Re);za(Re,eM,{color:Qe})}},validator:{validateOnLoad:!1,validate:function(Re){var Qe=Xr.getValue(Re);if(Qe.length===0)return as.pure(So.value(!0));var ot=Gt.fromTag("span");Qa(ot,"background-color",Qe);var ct=bu(ot,"background-color").fold(function(){return So.error("blah")},function(St){return So.value(Qe)});return as.pure(ct)}}})]),selectOnFocus:!1}),f=n.label.map(function(Re){return hd(Re,a.providers)}),d=function(Re,Qe){za(Re,tM,{value:Qe})},b=function(Re,Qe){O.getOpt(Re).each(function(ot){Qe==="custom"?i.colorPicker(function(ct){ct.fold(function(){return $o(ot,nM)},function(St){d(ot,St),oO(St)})},"#ffffff"):Qe==="remove"?d(ot,""):d(ot,Qe)})},O=Ko(ZO({dom:{tag:"span",attributes:{"aria-label":a.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[ms,vs,fu]},onLtr:function(){return[vs,ms,fu]}},components:[],fetch:sO(i.getColors(),i.hasCustomColors()),columns:i.getColorCols(),presets:"color",onItemAction:b},a));return Ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:f.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[s,O.asSpec()]}]),fieldBehaviours:Hr([mo("form-field-events",[wr(eM,function(Re,Qe){O.getOpt(Re).each(function(ot){Qa(ot.element,"background-color",Qe.event.color)}),za(Re,kl,{name:n.name})}),wr(tM,function(Re,Qe){Ho.getField(Re).each(function(ot){Xr.setValue(ot,Qe.event.value),Oo.getCurrent(Re).each(to.focus)})}),wr(nM,function(Re,Qe){Ho.getField(Re).each(function(ot){Oo.getCurrent(Re).each(to.focus)})})])])})},rF=Oc({schema:[yr("dom")],name:"label"}),sv=function(n){return Oc({name:""+n+"-edge",overrides:function(a){var i=a.model.manager.edgeActions[n];return i.fold(function(){return{}},function(s){return{events:si([aw(ud(),function(f,d,b){return s(f,b)},[a]),aw(kc(),function(f,d,b){return s(f,b)},[a]),aw(Dv(),function(f,d,b){b.mouseIsDown.get()&&s(f,b)},[a])])}})}})},aF=sv("top-left"),rM=sv("top"),oF=sv("top-right"),iF=sv("right"),uF=sv("bottom-right"),aM=sv("bottom"),M1=sv("bottom-left"),sF=sv("left"),D1=hs({name:"thumb",defaults:Ke({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:si([qm(ud(),n,"spectrum"),qm(Xc(),n,"spectrum"),qm(Ah(),n,"spectrum"),qm(kc(),n,"spectrum"),qm(Dv(),n,"spectrum"),qm(Xy(),n,"spectrum")])}}}),eh=hs({schema:[rl("mouseIsDown",function(){return Va(!1)})],name:"spectrum",overrides:function(n){var a=n.model,i=a.manager,s=function(f,d){return i.getValueFromEvent(d).map(function(b){return i.setValueFrom(f,n,b)})};return{behaviours:Hr([Da.config({mode:"special",onLeft:function(f){return i.onLeft(f,n)},onRight:function(f){return i.onRight(f,n)},onUp:function(f){return i.onUp(f,n)},onDown:function(f){return i.onDown(f,n)}}),to.config({})]),events:si([wr(ud(),s),wr(Xc(),s),wr(kc(),s),wr(Dv(),function(f,d){n.mouseIsDown.get()&&s(f,d)})])}}}),oM=[rF,sF,iF,rM,aM,aF,oF,M1,uF,D1,eh],iM="slider.change.value",th=Ke(iM),lF=function(n){return n.type.indexOf("touch")!==-1},Rx=function(n){var a=n.event.raw;if(lF(a)){var i=a;return i.touches!==void 0&&i.touches.length===1?$e.some(i.touches[0]).map(function(f){return Ut(f.clientX,f.clientY)}):$e.none()}else{var s=a;return s.clientX!==void 0?$e.some(s).map(function(f){return Ut(f.clientX,f.clientY)}):$e.none()}},N1="top",cF="right",fF="bottom",uM="left",lv=function(n){return n.model.minX},yd=function(n){return n.model.minY},Rg=function(n){return n.model.minX-1},os=function(n){return n.model.minY-1},cv=function(n){return n.model.maxX},dm=function(n){return n.model.maxY},L1=function(n){return n.model.maxX+1},Bg=function(n){return n.model.maxY+1},sM=function(n,a,i){return a(n)-i(n)},Bx=function(n){return sM(n,cv,lv)},Px=function(n){return sM(n,dm,yd)},Ix=function(n){return Bx(n)/2},wf=function(n){return Px(n)/2},fv=function(n){return n.stepSize},Fx=function(n){return n.snapToGrid},Pg=function(n){return n.snapStart},R1=function(n){return n.rounded},B1=function(n,a){return n[a+"-edge"]!==void 0},lM=function(n){return B1(n,uM)},cM=function(n){return B1(n,cF)},fM=function(n){return B1(n,N1)},dM=function(n){return B1(n,fF)},Cf=function(n){return n.model.value.get()},vM=function(n){return{x:n}},Hx=function(n){return{y:n}},dv=function(n,a){return{x:n,y:a}},Gu=function(n,a){za(n,th(),{value:a})},P1=function(n,a){Gu(n,dv(Rg(a),os(a)))},dF=function(n,a){Gu(n,Hx(os(a)))},vF=function(n,a){Gu(n,dv(Ix(a),os(a)))},mM=function(n,a){Gu(n,dv(L1(a),os(a)))},pM=function(n,a){Gu(n,vM(L1(a)))},zx=function(n,a){Gu(n,dv(L1(a),wf(a)))},hM=function(n,a){Gu(n,dv(L1(a),Bg(a)))},Ig=function(n,a){Gu(n,Hx(Bg(a)))},Fg=function(n,a){Gu(n,dv(Ix(a),Bg(a)))},mF=function(n,a){Gu(n,dv(Rg(a),Bg(a)))},pF=function(n,a){Gu(n,vM(Rg(a)))},hF=function(n,a){Gu(n,dv(Rg(a),wf(a)))},$x=function(n,a,i,s){return n<a?n:n>i?i:n===a?a-1:Math.max(a,n-s)},Vx=function(n,a,i,s){return n>i?n:n<a?a:n===i?i+1:Math.min(i,n+s)},gM=function(n,a,i){return Math.max(a,Math.min(i,n))},gF=function(n,a,i,s,f){return f.fold(function(){var d=n-a,b=Math.round(d/s)*s;return gM(a+b,a-1,i+1)},function(d){var b=(n-d)%s,O=Math.round(b/s),Re=Math.floor((n-d)/s),Qe=Math.floor((i-d)/s),ot=Math.min(Qe,Re+O),ct=d+ot*s;return Math.max(d,ct)})},Ux=function(n,a,i){return Math.min(i,Math.max(n,a))-a},vv=function(n){var a=n.min,i=n.max,s=n.range,f=n.value,d=n.step,b=n.snap,O=n.snapStart,Re=n.rounded,Qe=n.hasMinEdge,ot=n.hasMaxEdge,ct=n.minBound,St=n.maxBound,At=n.screenRange,It=Qe?a-1:a,Yt=ot?i+1:i;if(f<ct)return It;if(f>St)return Yt;var bn=Ux(f,ct,St),jt=gM(bn/At*s+a,It,Yt);return b&&jt>=a&&jt<=i?gF(jt,a,i,d,O):Re?Math.round(jt):jt},bM=function(n){var a=n.min,i=n.max,s=n.range,f=n.value,d=n.hasMinEdge,b=n.hasMaxEdge,O=n.maxBound,Re=n.maxOffset,Qe=n.centerMinEdge,ot=n.centerMaxEdge;return f<a?d?0:Qe:f>i?b?O:ot:(f-a)/s*Re},I1="top",yM="right",wM="bottom",jx="left",bF="width",yF="height",Sf=function(n){return n.element.dom.getBoundingClientRect()},Gl=function(n,a){return n[a]},F1=function(n){var a=Sf(n);return Gl(a,jx)},Wx=function(n){var a=Sf(n);return Gl(a,yM)},nh=function(n){var a=Sf(n);return Gl(a,I1)},H1=function(n){var a=Sf(n);return Gl(a,wM)},qx=function(n){var a=Sf(n);return Gl(a,bF)},CM=function(n){var a=Sf(n);return Gl(a,yF)},SM=function(n,a,i){return(n+a)/2-i},Hg=function(n,a){var i=Sf(n),s=Sf(a),f=Gl(i,jx),d=Gl(i,yM),b=Gl(s,jx);return SM(f,d,b)},Kx=function(n,a){var i=Sf(n),s=Sf(a),f=Gl(i,I1),d=Gl(i,wM),b=Gl(s,I1);return SM(f,d,b)},z1=function(n,a){za(n,th(),{value:a})},$1=function(n){return{x:n}},Gx=function(n,a,i){var s={min:lv(a),max:cv(a),range:Bx(a),value:i,step:fv(a),snap:Fx(a),snapStart:Pg(a),rounded:R1(a),hasMinEdge:lM(a),hasMaxEdge:cM(a),minBound:F1(n),maxBound:Wx(n),screenRange:qx(n)};return vv(s)},wF=function(n,a,i){var s=Gx(n,a,i),f=$1(s);return z1(n,f),s},wd=function(n,a){var i=lv(a);z1(n,$1(i))},Xx=function(n,a){var i=cv(a);z1(n,$1(i))},xM=function(n,a,i){var s=n>0?Vx:$x,f=s(Cf(i).x,lv(i),cv(i),fv(i));return z1(a,$1(f)),$e.some(f)},Yx=function(n){return function(a,i){return xM(n,a,i).map(it)}},Qx=function(n){var a=Rx(n);return a.map(function(i){return i.left})},EM=function(n,a,i,s,f){var d=0,b=qx(n),O=s.bind(function(ot){return $e.some(Hg(ot,n))}).getOr(d),Re=f.bind(function(ot){return $e.some(Hg(ot,n))}).getOr(b),Qe={min:lv(a),max:cv(a),range:Bx(a),value:i,hasMinEdge:lM(a),hasMaxEdge:cM(a),minBound:F1(n),minOffset:d,maxBound:Wx(n),maxOffset:b,centerMinEdge:O,centerMaxEdge:Re};return bM(Qe)},rh=function(n,a,i,s,f,d){var b=EM(a,d,i,s,f);return F1(a)-F1(n)+b},kM=function(n,a,i,s){var f=Cf(i),d=rh(n,s.getSpectrum(n),f.x,s.getLeftEdge(n),s.getRightEdge(n),i),b=na(a.element)/2;Qa(a.element,"left",d-b+"px")},AM=Yx(-1),CF=Yx(1),SF=$e.none,xF=$e.none,EF={"top-left":$e.none(),top:$e.none(),"top-right":$e.none(),right:$e.some(pM),"bottom-right":$e.none(),bottom:$e.none(),"bottom-left":$e.none(),left:$e.some(pF)},TM=Object.freeze({__proto__:null,setValueFrom:wF,setToMin:wd,setToMax:Xx,findValueOfOffset:Gx,getValueFromEvent:Qx,findPositionOfValue:rh,setPositionFromValue:kM,onLeft:AM,onRight:CF,onUp:SF,onDown:xF,edgeActions:EF}),zg=function(n,a){za(n,th(),{value:a})},V1=function(n){return{y:n}},Jx=function(n,a,i){var s={min:yd(a),max:dm(a),range:Px(a),value:i,step:fv(a),snap:Fx(a),snapStart:Pg(a),rounded:R1(a),hasMinEdge:fM(a),hasMaxEdge:dM(a),minBound:nh(n),maxBound:H1(n),screenRange:CM(n)};return vv(s)},kF=function(n,a,i){var s=Jx(n,a,i),f=V1(s);return zg(n,f),s},U1=function(n,a){var i=yd(a);zg(n,V1(i))},AF=function(n,a){var i=dm(a);zg(n,V1(i))},TF=function(n,a,i){var s=n>0?Vx:$x,f=s(Cf(i).y,yd(i),dm(i),fv(i));return zg(a,V1(f)),$e.some(f)},Zx=function(n){return function(a,i){return TF(n,a,i).map(it)}},_M=function(n){var a=Rx(n);return a.map(function(i){return i.top})},_F=function(n,a,i,s,f){var d=0,b=CM(n),O=s.bind(function(ot){return $e.some(Kx(ot,n))}).getOr(d),Re=f.bind(function(ot){return $e.some(Kx(ot,n))}).getOr(b),Qe={min:yd(a),max:dm(a),range:Px(a),value:i,hasMinEdge:fM(a),hasMaxEdge:dM(a),minBound:nh(n),minOffset:d,maxBound:H1(n),maxOffset:b,centerMinEdge:O,centerMaxEdge:Re};return bM(Qe)},eE=function(n,a,i,s,f,d){var b=_F(a,d,i,s,f);return nh(a)-nh(n)+b},j1=function(n,a,i,s){var f=Cf(i),d=eE(n,s.getSpectrum(n),f.y,s.getTopEdge(n),s.getBottomEdge(n),i),b=Ue(a.element)/2;Qa(a.element,"top",d-b+"px")},OF=$e.none,MF=$e.none,DF=Zx(-1),NF=Zx(1),W1={"top-left":$e.none(),top:$e.some(dF),"top-right":$e.none(),right:$e.none(),"bottom-right":$e.none(),bottom:$e.some(Ig),"bottom-left":$e.none(),left:$e.none()},tE=Object.freeze({__proto__:null,setValueFrom:kF,setToMin:U1,setToMax:AF,findValueOfOffset:Jx,getValueFromEvent:_M,findPositionOfValue:eE,setPositionFromValue:j1,onLeft:OF,onRight:MF,onUp:DF,onDown:NF,edgeActions:W1}),q1=function(n,a){za(n,th(),{value:a})},K1=function(n,a){return{x:n,y:a}},G1=function(n,a,i){var s=Gx(n,a,i.left),f=Jx(n,a,i.top),d=K1(s,f);return q1(n,d),d},LF=function(n,a,i,s){var f=n>0?Vx:$x,d=a?Cf(s).x:f(Cf(s).x,lv(s),cv(s),fv(s)),b=a?f(Cf(s).y,yd(s),dm(s),fv(s)):Cf(s).y;return q1(i,K1(d,b)),$e.some(d)},ah=function(n,a){return function(i,s){return LF(n,a,i,s).map(it)}},OM=function(n,a){var i=lv(a),s=yd(a);q1(n,K1(i,s))},RF=function(n,a){var i=cv(a),s=dm(a);q1(n,K1(i,s))},BF=function(n){return Rx(n)},MM=function(n,a,i,s){var f=Cf(i),d=rh(n,s.getSpectrum(n),f.x,s.getLeftEdge(n),s.getRightEdge(n),i),b=eE(n,s.getSpectrum(n),f.y,s.getTopEdge(n),s.getBottomEdge(n),i),O=na(a.element)/2,Re=Ue(a.element)/2;Qa(a.element,"left",d-O+"px"),Qa(a.element,"top",b-Re+"px")},DM=ah(-1,!1),PF=ah(1,!1),NM=ah(-1,!0),LM=ah(1,!0),RM={"top-left":$e.some(P1),top:$e.some(vF),"top-right":$e.some(mM),right:$e.some(zx),"bottom-right":$e.some(hM),bottom:$e.some(Fg),"bottom-left":$e.some(mF),left:$e.some(hF)},BM=Object.freeze({__proto__:null,setValueFrom:G1,setToMin:OM,setToMax:RF,getValueFromEvent:BF,setPositionFromValue:MM,onLeft:DM,onRight:PF,onUp:NM,onDown:LM,edgeActions:RM}),IF=[En("stepSize",1),En("onChange",He),En("onChoose",He),En("onInit",He),En("onDragStart",He),En("onDragEnd",He),En("snapToGrid",!1),En("rounded",!0),ti("snapStart"),pl("model",nc("mode",{x:[En("minX",0),En("maxX",100),rl("value",function(n){return Va(n.mode.minX)}),yr("getInitialValue"),wi("manager",TM)],y:[En("minY",0),En("maxY",100),rl("value",function(n){return Va(n.mode.minY)}),yr("getInitialValue"),wi("manager",tE)],xy:[En("minX",0),En("maxX",100),En("minY",0),En("maxY",100),rl("value",function(n){return Va({x:n.mode.minX,y:n.mode.minY})}),yr("getInitialValue"),wi("manager",BM)]})),Eu("sliderBehaviours",[Da,Xr]),rl("mouseIsDown",function(){return Va(!1)})],FF=function(n,a,i,s){var f,d=function(wn){return Wf(wn,n,"thumb")},b=function(wn){return Wf(wn,n,"spectrum")},O=function(wn){return li(wn,n,"left-edge")},Re=function(wn){return li(wn,n,"right-edge")},Qe=function(wn){return li(wn,n,"top-edge")},ot=function(wn){return li(wn,n,"bottom-edge")},ct=n.model,St=ct.manager,At=function(wn,$n){St.setPositionFromValue(wn,$n,n,{getLeftEdge:O,getRightEdge:Re,getTopEdge:Qe,getBottomEdge:ot,getSpectrum:b})},It=function(wn,$n){ct.value.set($n);var ir=d(wn);At(wn,ir)},Yt=function(wn,$n){It(wn,$n);var ir=d(wn);return n.onChange(wn,ir,$n),$e.some(!0)},bn=function(wn){St.setToMin(wn,n)},jt=function(wn){St.setToMax(wn,n)},Sn=function(wn){var $n=function(){li(wn,n,"thumb").each(function(Wr){var gr=ct.value.get();n.onChoose(wn,Wr,gr)})},ir=n.mouseIsDown.get();n.mouseIsDown.set(!1),ir&&$n()},Xn=function(wn,$n){$n.stop(),n.mouseIsDown.set(!0),n.onDragStart(wn,d(wn))},Kn=function(wn,$n){$n.stop(),n.onDragEnd(wn,d(wn)),Sn(wn)};return{uid:n.uid,dom:n.dom,components:a,behaviours:Ku(n.sliderBehaviours,[Da.config({mode:"special",focusIn:function(wn){return li(wn,n,"spectrum").map(Da.focusIn).map(it)}}),Xr.config({store:{mode:"manual",getValue:function(wn){return ct.value.get()}}}),ul.config({channels:(f={},f[dC()]={onReceive:Sn},f)})]),events:si([wr(th(),function(wn,$n){Yt(wn,$n.event.value)}),go(function(wn,$n){var ir=ct.getInitialValue();ct.value.set(ir);var Wr=d(wn);At(wn,Wr);var gr=b(wn);n.onInit(wn,Wr,gr,ct.value.get())}),wr(ud(),Xn),wr(Ah(),Kn),wr(kc(),Xn),wr(Xy(),Kn)]),apis:{resetToMin:bn,resetToMax:jt,setValue:It,refresh:At},domModification:{styles:{position:"relative"}}}},Bc=Ws({name:"Slider",configFields:IF,partFields:oM,factory:FF,apis:{setValue:function(n,a,i){n.setValue(a,i)},resetToMin:function(n,a){n.resetToMin(a)},resetToMax:function(n,a){n.resetToMax(a)},refresh:function(n,a){n.refresh(a)}}}),X1=ya("rgb-hex-update"),PM=ya("slider-update"),nE=ya("palette-update"),HF=function(n,a){var i=Bc.parts.spectrum({dom:{tag:"div",classes:[a("hue-slider-spectrum")],attributes:{role:"presentation"}}}),s=Bc.parts.thumb({dom:{tag:"div",classes:[a("hue-slider-thumb")],attributes:{role:"presentation"}}});return Bc.sketch({dom:{tag:"div",classes:[a("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:Ke({y:0})},components:[i,s],sliderBehaviours:Hr([to.config({})]),onChange:function(f,d,b){za(f,PM,{value:b})}})},IM="form",rE=[Eu("formBehaviours",[Xr])],FM=function(n){return"<alloy.field."+n+">"},zF=function(n){var a=function(){var d=[],b=function(O,Re){return d.push(O),AC(IM,FM(O),Re)};return{field:b,record:Ke(d)}}(),i=n(a),s=a.record(),f=dn(s,function(d){return hs({name:d,pname:FM(d)})});return DC(IM,rE,f,VF,i)},$F=function(n,a){return n.fold(function(){return So.error(a)},So.value)},VF=function(n,a){return{uid:n.uid,dom:n.dom,components:a,behaviours:Ku(n.formBehaviours,[Xr.config({store:{mode:"manual",getValue:function(i){var s=lA(i,n);return br(s,function(f,d){return f().bind(function(b){var O=Oo.getCurrent(b);return $F(O,new Error("Cannot find a current component to extract the value from for form part '"+d+"': "+Ld(b.element)))}).map(Xr.getValue)})},setValue:function(i,s){Pr(s,function(f,d){li(i,n,d).each(function(b){Oo.getCurrent(b).each(function(O){Xr.setValue(O,f)})})})}}})]),apis:{getField:function(i,s){return li(i,n,s).bind(Oo.getCurrent)}}}},oh={getField:Gi(function(n,a,i){return n.getField(a,i)}),sketch:zF},HM=ya("valid-input"),zM=ya("invalid-input"),aE=ya("validating-input"),oE="colorcustom.rgb.",UF=function(n,a,i,s){var f=function(St,At){return Yf.config({invalidClass:a("invalid"),notify:{onValidate:function(It){za(It,aE,{type:St})},onValid:function(It){za(It,HM,{type:St,value:Xr.getValue(It)})},onInvalid:function(It){za(It,zM,{type:St,value:Xr.getValue(It)})}},validator:{validate:function(It){var Yt=Xr.getValue(It),bn=At(Yt)?So.value(!0):So.error(n("aria.input.invalid"));return as.pure(bn)},validateOnLoad:!1}})},d=function(St,At,It,Yt,bn){var jt=n(oE+"range"),Sn=Ho.parts.label({dom:{tag:"label",innerHtml:It,attributes:{"aria-label":Yt}}}),Xn=Ho.parts.field({data:bn,factory:Xp,inputAttributes:ut({type:"text"},At==="hex"?{"aria-live":"polite"}:{}),inputClasses:[a("textfield")],inputBehaviours:Hr([f(At,St),Ui.config({})]),onSetValue:function(ir){if(Yf.isInvalid(ir)){var Wr=Yf.run(ir);Wr.get(He)}}}),Kn=[Sn,Xn],wn=At!=="hex"?[Ho.parts["aria-descriptor"]({text:jt})]:[],$n=Kn.concat(wn);return{dom:{tag:"div",attributes:{role:"presentation"}},components:$n}},b=function(St,At){var It=Ag(At);return oh.getField(St,"hex").each(function(Yt){to.isFocused(Yt)||Xr.setValue(St,{hex:It.value})}),It},O=function(St,At){var It=At.red,Yt=At.green,bn=At.blue;Xr.setValue(St,{red:It,green:Yt,blue:bn})},Re=Ko({dom:{tag:"div",classes:[a("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),Qe=function(St,At){Re.getOpt(St).each(function(It){Qa(It.element,"background-color","#"+At.value)})},ot=function(){var St={red:Va($e.some(255)),green:Va($e.some(255)),blue:Va($e.some(255)),hex:Va($e.some("ffffff"))},At=function(ar,Ir){var ga=Tg(Ir);O(ar,ga),jt(ga)},It=function(ar){return St[ar].get()},Yt=function(ar,Ir){St[ar].set(Ir)},bn=function(){return It("red").bind(function(ar){return It("green").bind(function(Ir){return It("blue").map(function(ga){return pd(ar,Ir,ga,1)})})})},jt=function(ar){var Ir=ar.red,ga=ar.green,hr=ar.blue;Yt("red",$e.some(Ir)),Yt("green",$e.some(ga)),Yt("blue",$e.some(hr))},Sn=function(ar,Ir){var ga=Ir.event;ga.type!=="hex"?Yt(ga.type,$e.none()):s(ar)},Xn=function(ar,Ir){i(ar);var ga=G_(Ir);Yt("hex",$e.some(Ir));var hr=Tg(ga);O(ar,hr),jt(hr),za(ar,X1,{hex:ga}),Qe(ar,ga)},Kn=function(ar,Ir,ga){var hr=parseInt(ga,10);Yt(Ir,$e.some(hr)),bn().each(function(da){var ka=b(ar,da);za(ar,X1,{hex:ka}),Qe(ar,ka)})},wn=function(ar){return ar.type==="hex"},$n=function(ar,Ir){var ga=Ir.event;wn(ga)?Xn(ar,ga.value):Kn(ar,ga.type,ga.value)},ir=function(ar){return{label:n(oE+ar+".label"),description:n(oE+ar+".description")}},Wr=ir("red"),gr=ir("green"),qr=ir("blue"),Cr=ir("hex");return nr(oh.sketch(function(ar){return{dom:{tag:"form",classes:[a("rgb-form")],attributes:{"aria-label":n("aria.color.picker")}},components:[ar.field("red",Ho.sketch(d(d1,"red",Wr.label,Wr.description,255))),ar.field("green",Ho.sketch(d(d1,"green",gr.label,gr.description,255))),ar.field("blue",Ho.sketch(d(d1,"blue",qr.label,qr.description,255))),ar.field("hex",Ho.sketch(d(Q_,"hex",Cr.label,Cr.description,"ffffff"))),Re.asSpec()],formBehaviours:Hr([Yf.config({invalidClass:a("form-invalid")}),mo("rgb-form-events",[wr(HM,$n),wr(zM,Sn),wr(aE,Sn)])])}}),{apis:{updateHex:function(ar,Ir){Xr.setValue(ar,{hex:Ir.value}),At(ar,Ir),Qe(ar,Ir)}}})},ct=jl({factory:ot,name:"RgbForm",configFields:[],apis:{updateHex:function(St,At,It){St.updateHex(At,It)}},extraApis:{}});return ct},$M=function(n,a){var i=Bc.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[a("sv-palette-spectrum")]}}),s=Bc.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[a("sv-palette-thumb")],innerHtml:"<div class="+a("sv-palette-inner-thumb")+' role="presentation"></div>'}}),f=function(Qe,ot){var ct=Qe.width,St=Qe.height,At=Qe.getContext("2d");if(At!==null){At.fillStyle=ot,At.fillRect(0,0,ct,St);var It=At.createLinearGradient(0,0,ct,0);It.addColorStop(0,"rgba(255,255,255,1)"),It.addColorStop(1,"rgba(255,255,255,0)"),At.fillStyle=It,At.fillRect(0,0,ct,St);var Yt=At.createLinearGradient(0,0,0,St);Yt.addColorStop(0,"rgba(0,0,0,0)"),Yt.addColorStop(1,"rgba(0,0,0,1)"),At.fillStyle=Yt,At.fillRect(0,0,ct,St)}},d=function(Qe,ot){var ct=Qe.components()[0].element.dom,St=_g(ot,100,100),At=dx(St);f(ct,eO(At))},b=function(Qe,ot){var ct=mx(Tg(ot));Bc.setValue(Qe,{x:ct.saturation,y:100-ct.value})},O=function(Qe){var ot=Ke({x:0,y:0}),ct=function(It,Yt,bn){za(It,nE,{value:bn})},St=function(It,Yt,bn,jt){f(bn.element.dom,eO(tO))},At=Hr([Oo.config({find:$e.some}),to.config({})]);return Bc.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[a("sv-palette")]},model:{mode:"xy",getInitialValue:ot},rounded:!1,components:[i,s],onChange:ct,onInit:St,sliderBehaviours:At})},Re=jl({factory:O,name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(Qe,ot,ct){d(ot,ct)},setThumb:function(Qe,ot,ct){b(ot,ct)}},extraApis:{}});return Re},jF=function(n,a){var i=function(f){var d=UF(n,a,f.onValidHex,f.onInvalidHex),b=$M(n,a),O=function($n){return(100-$n)/100*360},Re=function($n){return 100-$n/360*100},Qe={paletteRgba:Va(tO),paletteHue:Va(0)},ot=Ko(HF(n,a)),ct=Ko(b.sketch({})),St=Ko(d.sketch({})),At=function($n,ir,Wr){ct.getOpt($n).each(function(gr){b.setHue(gr,Wr)})},It=function($n,ir){St.getOpt($n).each(function(Wr){d.updateHex(Wr,ir)})},Yt=function($n,ir,Wr){ot.getOpt($n).each(function(gr){Bc.setValue(gr,{y:Re(Wr)})})},bn=function($n,ir){ct.getOpt($n).each(function(Wr){b.setThumb(Wr,ir)})},jt=function($n,ir){var Wr=Tg($n);Qe.paletteRgba.set(Wr),Qe.paletteHue.set(ir)},Sn=function($n,ir,Wr,gr){jt(ir,Wr),en(gr,function(qr){qr($n,ir,Wr)})},Xn=function(){var $n=[It];return function(ir,Wr){var gr=Wr.event.value,qr=Qe.paletteHue.get(),Cr=_g(qr,gr.x,100-gr.y),ar=px(Cr);Sn(ir,ar,qr,$n)}},Kn=function(){var $n=[At,It];return function(ir,Wr){var gr=O(Wr.event.value.y),qr=Qe.paletteRgba.get(),Cr=mx(qr),ar=_g(gr,Cr.saturation,Cr.value),Ir=px(ar);Sn(ir,Ir,gr,$n)}},wn=function(){var $n=[At,Yt,bn];return function(ir,Wr){var gr=Wr.event.hex,qr=JP(gr);Sn(ir,gr,qr.hue,$n)}};return{uid:f.uid,dom:f.dom,components:[ct.asSpec(),ot.asSpec(),St.asSpec()],behaviours:Hr([mo("colour-picker-events",[wr(X1,wn()),wr(nE,Xn()),wr(PM,Kn())]),Oo.config({find:function($n){return St.getOpt($n)}}),Da.config({mode:"acyclic"})])}},s=jl({name:"ColourPicker",configFields:[yr("dom"),En("onValidHex",He),En("onInvalidHex",He)],factory:i});return s},WF=function(){return Oo.config({find:$e.some})},qF=function(n){return Oo.config({find:n.getOpt})},VM=function(n){return Oo.config({find:function(a){return Je(a.element,n).bind(function(i){return a.getSystem().getByDom(i).toOptional()})}})},xf={self:WF,memento:qF,childAt:VM},KF={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},UM=function(n){return KF[n]},jM=function(n){return UM(n)},WM=function(n){var a=function(b){return"tox-"+b},i=jF(jM,a),s=function(b){za(b,Xf,{name:"hex-valid",value:!0})},f=function(b){za(b,Xf,{name:"hex-valid",value:!1})},d=Ko(i.sketch({dom:{tag:"div",classes:[a("color-picker-container")],attributes:{role:"presentation"}},onValidHex:s,onInvalidHex:f}));return{dom:{tag:"div"},components:[d.asSpec()],behaviours:Hr([Xr.config({store:{mode:"manual",getValue:function(b){var O=d.get(b),Re=Oo.getCurrent(O),Qe=Re.bind(function(ot){var ct=Xr.getValue(ot);return ct.hex});return Qe.map(function(ot){return"#"+ot}).getOr("")},setValue:function(b,O){var Re=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,Qe=Re.exec(O),ot=d.get(b),ct=Oo.getCurrent(ot);ct.fold(function(){},function(St){Xr.setValue(St,{hex:$e.from(Qe[1]).getOr("")}),oh.getField(St,"hex").each(function(At){$o(At,$m())})})}}}),xf.self()])}},GF=tinymce.util.Tools.resolve("tinymce.Resource"),qM=function(n){return pr(n,"init")},KM=function(n){var a=Xi(),i=Ko({dom:{tag:n.tag}}),s=Xi();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Hr([mo("custom-editor-events",[go(function(f){i.getOpt(f).each(function(d){(qM(n)?n.init(d.element.dom):GF.load(n.scriptId,n.scriptUrl).then(function(b){return b(d.element.dom,n.settings)})).then(function(b){s.on(function(O){b.setValue(O)}),s.clear(),a.set(b)})})})]),Xr.config({store:{mode:"manual",getValue:function(){return a.get().fold(function(){return s.get().getOr("")},function(f){return f.getValue()})},setValue:function(f,d){a.get().fold(function(){s.set(d)},function(b){return b.setValue(d)})}}}),xf.self()]),components:[i.asSpec()]}},mv=tinymce.util.Tools.resolve("tinymce.util.Tools"),XF=Ba([En("preprocess",tt),En("postprocess",tt)]),YF=function(n,a){var i=vi("RepresentingConfigs.memento processors",XF,a);return Xr.config({store:{mode:"manual",getValue:function(s){var f=n.get(s),d=Xr.getValue(f);return i.postprocess(d)},setValue:function(s,f){var d=i.preprocess(f),b=n.get(s);Xr.setValue(b,d)}}})},GM=function(n,a,i){return Xr.config(nr({store:{mode:"manual",getValue:a,setValue:i}},n.map(function(s){return{store:{initialValue:s}}}).getOr({})))},iE=function(n,a,i){return GM(n,function(s){return a(s.element)},function(s,f){return i(s.element,f)})},QF=function(n){return iE(n,$d,Jm)},XM=function(n){return iE(n,bb,Md)},JF=function(n){return Xr.config({store:{mode:"memory",initialValue:n}})},vm={memento:YF,withElement:iE,withComp:GM,domValue:QF,domHtml:XM,memory:JF},ZF="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp",No=function(n,a){var i=mv.explode(a.getSetting("images_file_types",ZF,"string")),s=function(f){return on(i,function(d){return Ca(f.name.toLowerCase(),"."+d.toLowerCase())})};return cn(mr(n),s)},ih=function(n,a){var i=function(ct,St){St.stop()},s=function(ct){return function(St,At){en(ct,function(It){It(St,At)})}},f=function(ct,St){if(!Pa.isDisabled(ct)){var At=St.event.raw;b(ct,At.dataTransfer.files)}},d=function(ct,St){var At=St.event.raw.target;b(ct,At.files)},b=function(ct,St){Xr.setValue(ct,No(St,a)),za(ct,kl,{name:n.name})},O=Ko({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Hr([mo("input-file-events",[Nv(Th()),Nv(jm())])])}),Re=function(ct){return{uid:ct.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Hr([vm.memory([]),xf.self(),Pa.config({}),Mo.config({toggleClass:"dragenter",toggleOnExecute:!1}),mo("dropzone-events",[wr("dragenter",s([i,Mo.toggle])),wr("dragleave",s([i,Mo.toggle])),wr("dragover",i),wr("drop",s([i,f])),wr(Vm(),d)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:a.translate("Drop an image here")}},qs.sketch({dom:{tag:"button",innerHtml:a.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[O.asSpec()],action:function(St){var At=O.get(St);At.element.dom.click()},buttonBehaviours:Hr([Ui.config({}),vc.button(a.isDisabled),vu()])})]}]}},Qe=n.label.map(function(ct){return hd(ct,a)}),ot=Ho.parts.field({factory:{sketch:Re}});return Dg(Qe,ot,["tox-form__group--stretched"],[])},YM=function(n,a){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+n.columns+"col"]},components:dn(n.items,a.interpreter)}},Y1=ya("alloy-fake-before-tabstop"),Q1=ya("alloy-fake-after-tabstop"),QM=function(n){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:n},behaviours:Hr([to.config({ignore:!0}),Ui.config({})])}},JM=function(n){return{dom:{tag:"div",classes:["tox-navobj"]},components:[QM([Y1]),n,QM([Q1])],behaviours:Hr([xf.childAt(1)])}},ZM=function(n,a){za(n,fb(),{raw:{which:9,shiftKey:a}})},eD=function(n,a){var i=a.element;Hs(i,Y1)?ZM(n,!0):Hs(i,Q1)&&ZM(n,!1)},$g=function(n){return Mg(n,["."+Y1,"."+Q1].join(","),xt)},e5=!(Ra().browser.isIE()||Ra().browser.isEdge()),t5=function(n){var a=Va("");return{getValue:function(i){return a.get()},setValue:function(i,s){if(n)ho(i.element,"srcdoc",s);else{ho(i.element,"src","javascript:''");var f=i.element.dom.contentWindow.document;f.open(),f.write(s),f.close()}a.set(s)}}},n5=function(n,a){var i=e5&&n.sandboxed,s=ut(ut({},n.label.map(function(Re){return{title:Re}}).getOr({})),i?{sandbox:"allow-scripts allow-same-origin"}:{}),f=t5(i),d=n.label.map(function(Re){return hd(Re,a)}),b=function(Re){return JM({uid:Re.uid,dom:{tag:"iframe",attributes:s},behaviours:Hr([Ui.config({}),to.config({}),vm.withComp($e.none(),f.getValue,f.setValue)])})},O=Ho.parts.field({factory:{sketch:b}});return Dg(d,O,["tox-form__group--stretched"],[])},uh=function(n,a){return a5(document.createElement("canvas"),n,a)},r5=function(n){var a=uh(n.width,n.height),i=Cd(a);return i.drawImage(n,0,0),a},Cd=function(n){return n.getContext("2d")},a5=function(n,a,i){return n.width=a,n.height=i,n},uE=function(n){return n.naturalWidth||n.width},sE=function(n){return n.naturalHeight||n.height},o5=function(n){return new Lc(function(a,i){var s=URL.createObjectURL(n),f=new Image,d=function(){f.removeEventListener("load",b),f.removeEventListener("error",O)},b=function(){d(),a(f)},O=function(){d(),i("Unable to load data of type "+n.type+": "+s)};f.addEventListener("load",b),f.addEventListener("error",O),f.src=s,f.complete&&setTimeout(b,0)})},tD=function(n){var a=n.split(","),i=/data:([^;]+)/.exec(a[0]);if(!i)return $e.none();for(var s=i[1],f=a[1],d=1024,b=atob(f),O=b.length,Re=Math.ceil(O/d),Qe=new Array(Re),ot=0;ot<Re;++ot){for(var ct=ot*d,St=Math.min(ct+d,O),At=new Array(St-ct),It=ct,Yt=0;It<St;++Yt,++It)At[Yt]=b[It].charCodeAt(0);Qe[ot]=new Uint8Array(At)}return $e.some(new Blob(Qe,{type:s}))},i5=function(n){return new Lc(function(a,i){tD(n).fold(function(){i("uri is not base64: "+n)},a)})},nD=function(n,a,i){return a=a||"image/png",qe(HTMLCanvasElement.prototype.toBlob)?new Lc(function(s,f){n.toBlob(function(d){d?s(d):f()},a,i)}):i5(n.toDataURL(a,i))},u5=function(n,a,i){return a=a||"image/png",n.toDataURL(a,i)},s5=function(n){return o5(n).then(function(a){c5(a);var i=uh(uE(a),sE(a)),s=Cd(i);return s.drawImage(a,0,0),i})},l5=function(n){return new Lc(function(a){var i=new FileReader;i.onloadend=function(){a(i.result)},i.readAsDataURL(n)})},c5=function(n){URL.revokeObjectURL(n.src)},lE=function(n,a,i){var s=a.type,f=Ke(s),d=function(){return Lc.resolve(a)},b=Ke(i),O=function(){return i.split(",")[1]},Re=function(St,At){return n.then(function(It){return nD(It,St,At)})},Qe=function(St,At){return n.then(function(It){return u5(It,St,At)})},ot=function(St,At){return Qe(St,At).then(function(It){return It.split(",")[1]})},ct=function(){return n.then(r5)};return{getType:f,toBlob:d,toDataURL:b,toBase64:O,toAdjustedBlob:Re,toAdjustedDataURL:Qe,toAdjustedBase64:ot,toCanvas:ct}},f5=function(n){return l5(n).then(function(a){return lE(s5(n),n,a)})},pv=function(n,a){return nD(n,a).then(function(i){return lE(Lc.resolve(n),i,n.toDataURL())})},d5=function(n){return f5(n)},sh=function(n,a,i){var s=typeof n=="string"?parseFloat(n):n;return s>i?s=i:s<a&&(s=a),s},cE=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},J1=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],fE=function(n,a){for(var i=[],s=new Array(25),f,d=0;d<5;d++){for(var b=0;b<5;b++)i[b]=a[b+d*5];for(var b=0;b<5;b++){f=0;for(var O=0;O<5;O++)f+=n[b+O*5]*i[O];s[b+d*5]=f}}return s},v5=function(n,a){var i;return a=sh(a,-1,1),a*=100,a<0?i=127+a/100*127:(i=a%1,i===0?i=J1[a]:i=J1[Math.floor(a)]*(1-i)+J1[Math.floor(a)+1]*i,i=i*127+127),fE(n,[i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1])},m5=function(n,a){return a=sh(255*a,-255,255),fE(n,[1,0,0,0,a,0,1,0,0,a,0,0,1,0,a,0,0,0,1,0,0,0,0,0,1])},p5=function(n,a,i,s){return a=sh(a,0,2),i=sh(i,0,2),s=sh(s,0,2),fE(n,[a,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0,0,0,0,0,1])},dE=function(n,a){return n.toCanvas().then(function(i){return h5(i,n.getType(),a)})},h5=function(n,a,i){var s=Cd(n),f=function(b,O){for(var Re,Qe,ot,ct,St=b.data,At=O[0],It=O[1],Yt=O[2],bn=O[3],jt=O[4],Sn=O[5],Xn=O[6],Kn=O[7],wn=O[8],$n=O[9],ir=O[10],Wr=O[11],gr=O[12],qr=O[13],Cr=O[14],ar=O[15],Ir=O[16],ga=O[17],hr=O[18],da=O[19],ka=0;ka<St.length;ka+=4)Re=St[ka],Qe=St[ka+1],ot=St[ka+2],ct=St[ka+3],St[ka]=Re*At+Qe*It+ot*Yt+ct*bn+jt,St[ka+1]=Re*Sn+Qe*Xn+ot*Kn+ct*wn+$n,St[ka+2]=Re*ir+Qe*Wr+ot*gr+ct*qr+Cr,St[ka+3]=Re*ar+Qe*Ir+ot*ga+ct*hr+da;return b},d=f(s.getImageData(0,0,n.width,n.height),i);return s.putImageData(d,0,0),pv(n,a)},Vg=function(n,a){return n.toCanvas().then(function(i){return g5(i,n.getType(),a)})},g5=function(n,a,i){var s=Cd(n),f=function(O,Re,Qe){for(var ot=function(Ir,ga,hr){return Ir>hr?Ir=hr:Ir<ga&&(Ir=ga),Ir},ct=Math.round(Math.sqrt(Qe.length)),St=Math.floor(ct/2),At=O.data,It=Re.data,Yt=O.width,bn=O.height,jt=0;jt<bn;jt++)for(var Sn=0;Sn<Yt;Sn++){for(var Xn=0,Kn=0,wn=0,$n=0;$n<ct;$n++)for(var ir=0;ir<ct;ir++){var Wr=ot(Sn+ir-St,0,Yt-1),gr=ot(jt+$n-St,0,bn-1),qr=(gr*Yt+Wr)*4,Cr=Qe[$n*ct+ir];Xn+=At[qr]*Cr,Kn+=At[qr+1]*Cr,wn+=At[qr+2]*Cr}var ar=(jt*Yt+Sn)*4;It[ar]=ot(Xn,0,255),It[ar+1]=ot(Kn,0,255),It[ar+2]=ot(wn,0,255)}return Re},d=s.getImageData(0,0,n.width,n.height),b=s.getImageData(0,0,n.width,n.height);return b=f(d,b,i),s.putImageData(b,0,0),pv(n,a)},vE=function(n){var a=function(i,s,f){for(var d=Cd(i),b=new Array(256),O=function(ot,ct){for(var St=ot.data,At=0;At<St.length;At+=4)St[At]=ct[St[At]],St[At+1]=ct[St[At+1]],St[At+2]=ct[St[At+2]];return ot},Re=0;Re<b.length;Re++)b[Re]=n(Re,f);var Qe=O(d.getImageData(0,0,i.width,i.height),b);return d.putImageData(Qe,0,0),pv(i,s)};return function(i,s){return i.toCanvas().then(function(f){return a(f,i.getType(),s)})}},rD=function(n){return function(a,i){return dE(a,n(cE(),i))}},b5=function(n){return function(a){return dE(a,n)}},y5=function(n){return function(a){return Vg(a,n)}},w5=b5([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),aD=rD(m5),oD=rD(v5),C5=function(n,a,i,s){return dE(n,p5(cE(),a,i,s))},Z1=y5([0,-1,0,-1,5,-1,0,-1,0]),ey=vE(function(n,a){return Math.pow(n/255,1-a)*255}),iD=function(n,a,i){var s=uE(n),f=sE(n),d=a/s,b=i/f,O=!1;(d<.5||d>2)&&(d=d<.5?.5:2,O=!0),(b<.5||b>2)&&(b=b<.5?.5:2,O=!0);var Re=S5(n,d,b);return O?Re.then(function(Qe){return iD(Qe,a,i)}):Re},S5=function(n,a,i){return new Lc(function(s){var f=uE(n),d=sE(n),b=Math.floor(f*a),O=Math.floor(d*i),Re=uh(b,O),Qe=Cd(Re);Qe.drawImage(n,0,0,f,d,0,0,b,O),s(Re)})},uD=function(n,a){a===void 0&&(a=2);var i=Math.pow(10,a),s=Math.round(n*i);return Math.ceil(s/i)},x5=function(n,a){return n.toCanvas().then(function(i){return mE(i,n.getType(),a)})},mE=function(n,a,i){var s=i<0?360+i:i,f=s*Math.PI/180,d=n.width,b=n.height,O=Math.sin(f),Re=Math.cos(f),Qe=uD(Math.abs(d*Re)+Math.abs(b*O)),ot=uD(Math.abs(d*O)+Math.abs(b*Re)),ct=uh(Qe,ot),St=Cd(ct);return St.translate(Qe/2,ot/2),St.rotate(f),St.drawImage(n,-d/2,-b/2),pv(ct,a)},pE=function(n,a){return n.toCanvas().then(function(i){return sD(i,n.getType(),a)})},sD=function(n,a,i){var s=uh(n.width,n.height),f=Cd(s);return i==="v"?(f.scale(1,-1),f.drawImage(n,0,-s.height)):(f.scale(-1,1),f.drawImage(n,-s.width,0)),pv(s,a)},E5=function(n,a,i,s,f){return n.toCanvas().then(function(d){return hE(d,n.getType(),a,i,s,f)})},hE=function(n,a,i,s,f,d){var b=uh(f,d),O=Cd(b);return O.drawImage(n,-i,-s),pv(b,a)},k5=function(n,a,i){return n.toCanvas().then(function(s){return iD(s,a,i).then(function(f){return pv(f,n.getType())})})},A5=function(n){return w5(n)},lD=function(n){return Z1(n)},T5=function(n,a){return ey(n,a)},Ug=function(n,a,i,s){return C5(n,a,i,s)},_5=function(n,a){return aD(n,a)},O5=function(n,a){return oD(n,a)},cD=function(n,a){return pE(n,a)},M5=function(n,a,i,s,f){return E5(n,a,i,s,f)},fD=function(n,a,i){return k5(n,a,i)},dD=function(n,a){return x5(n,a)},vD=function(n,a,i){return Nc(n,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:i},a)},ty=function(n,a){return vD(n,a,[])},mD=function(n,a){return vD(n,a,[eo.config({})])},gE=function(n,a,i){return{dom:{tag:"span",innerHtml:i.translate(n),classes:[a+"__select-label"]},behaviours:Hr([eo.config({})])}},ny,pD=ya("toolbar.button.execute"),D5=function(n){return lc(function(a,i){s1(n,a)(function(s){za(a,pD,{buttonApi:s}),n.onAction(s)})})},hD=(ny={},ny[Il()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],ny),mm=ya("update-menu-text"),bE=ya("update-menu-icon"),yE=function(n,a,i){var s=Va(He),f=n.text.map(function(ct){return Ko(gE(ct,a,i.providers))}),d=n.icon.map(function(ct){return Ko(mD(ct,i.providers.icons))}),b=function(ct,St){var At=Xr.getValue(ct);return to.focus(At),za(At,"keydown",{raw:St.event.raw}),Rc.close(At),$e.some(!0)},O=n.role.fold(function(){return{}},function(ct){return{role:ct}}),Re=n.tooltip.fold(function(){return{}},function(ct){var St=i.providers.translate(ct);return{title:St,"aria-label":St}}),Qe=Nc("chevron-down",{tag:"div",classes:[a+"__select-chevron"]},i.providers.icons),ot=Ko(Rc.sketch(ut(ut(ut({},n.uid?{uid:n.uid}:{}),O),{dom:{tag:"button",classes:[a,a+"--select"].concat(dn(n.classes,function(ct){return a+"--"+ct})),attributes:ut({},Re)},components:Vp([d.map(function(ct){return ct.asSpec()}),f.map(function(ct){return ct.asSpec()}),$e.some(Qe)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Hr(Ht(Ht([],n.dropdownBehaviours,!0),[vc.button(function(){return n.disabled||i.providers.isDisabled()}),vu(),Zp.config({}),eo.config({}),mo("dropdown-events",[$p(n,s),Eg(n,s)]),mo("menubutton-update-display-text",[wr(mm,function(ct,St){f.bind(function(At){return At.getOpt(ct)}).each(function(At){eo.set(At,[ds(i.providers.translate(St.event.text))])})}),wr(bE,function(ct,St){d.bind(function(At){return At.getOpt(ct)}).each(function(At){eo.set(At,[mD(St.event.icon,i.providers.icons)])})})])],!1)),eventOrder:nr(hD,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Hr([Da.config({mode:"special",onLeft:b,onRight:b})]),lazySink:i.getSink,toggleClass:a+"--active",parts:{menu:Z0(!1,n.columns,n.presets)},fetch:function(ct){return as.nu(et(n.fetch,ct))}})));return ot.asSpec()},N5=function(n){return We(n)},sl=function(n){return n.type==="separator"},L5=function(n){return pr(n,"getSubmenuItems")},wE={type:"separator"},gD=function(n,a){var i=er(n,function(s,f){return N5(f)?f===""?s:f==="|"?s.length>0&&!sl(s[s.length-1])?s.concat([wE]):s:pr(a,f.toLowerCase())?s.concat([a[f.toLowerCase()]]):s:s.concat([f])},[]);return i.length>0&&sl(i[i.length-1])&&i.pop(),i},bD=function(n,a){var i=n.getSubmenuItems(),s=jg(i,a),f=nr(s.menus,Lf(n.value,s.items)),d=nr(s.expansions,Lf(n.value,n.value));return{item:n,menus:f,expansions:d}},ry=function(n,a){return L5(n)?bD(n,a):{item:n,menus:{},expansions:{}}},R5=function(n){if(sl(n))return n;var a=jn(n,"value").getOrThunk(function(){return ya("generated-menu-item")});return nr({value:a},n)},jg=function(n,a){var i=gD(We(n)?n.split(" "):n,a);return hn(i,function(s,f){var d=R5(f),b=ry(d,a);return{menus:nr(s.menus,b.menus),items:[b.item].concat(s.items),expansions:nr(s.expansions,b.expansions)}},{menus:{},expansions:{},items:[]})},lh=function(n,a,i,s){var f=ya("primary-menu"),d=jg(n,i.shared.providers.menuItems());if(d.items.length===0)return $e.none();var b=yO(f,d.items,a,i,s),O=br(d.menus,function(Qe,ot){return yO(ot,Qe,a,i,!1)}),Re=nr(O,Lf(f,b));return $e.from(fd.tieredData(f,Re,d.expansions))},Wg=function(n){return{isDisabled:function(){return Pa.isDisabled(n)},setDisabled:function(a){return Pa.set(n,a)},setActive:function(a){var i=n.element;a?(Cu(i,"tox-tbtn--enabled"),ho(i,"aria-pressed",!0)):(cu(i,"tox-tbtn--enabled"),gu(i,"aria-pressed"))},isActive:function(){return Hs(n.element,"tox-tbtn--enabled")}}},ay=function(n,a,i,s){return yE({text:n.text,icon:n.icon,tooltip:n.tooltip,role:s,fetch:function(f,d){n.fetch(function(b){d(lh(b,gf.CLOSE_ON_EXECUTE,i,!1))})},onSetup:n.onSetup,getApi:Wg,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ui.config({})]},a,i.shared)},mc=function(n,a,i){var s=function(d){return function(b){var O=!b.isActive();b.setActive(O),d.storage.set(O),i.shared.getSink().each(function(Re){a().getOpt(Re).each(function(Qe){nf(Qe.element),za(Qe,Xf,{name:d.name,value:d.storage.get()})})})}},f=function(d){return function(b){b.setActive(d.storage.get())}};return function(d){d(dn(n,function(b){var O=b.text.fold(function(){return{}},function(Re){return{text:Re}});return ut(ut({type:b.type,active:!1},O),{onAction:s(b),onSetup:f(b)})}))}},yD=function(n,a,i,s,f,d){i===void 0&&(i=[]);var b=a.fold(function(){return{}},function(Qe){return{action:Qe}}),O=ut({buttonBehaviours:Hr([vc.button(function(){return n.disabled||d.isDisabled()}),vu(),Ui.config({}),mo("button press",[S2("click"),S2("mousedown")])].concat(i)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},b),Re=nr(O,{dom:s});return nr(Re,{components:f})},CE=function(n,a,i,s){s===void 0&&(s=[]);var f=n.tooltip.map(function(Re){return{"aria-label":i.translate(Re),title:i.translate(Re)}}).getOr({}),d={tag:"button",classes:["tox-tbtn"],attributes:f},b=n.icon.map(function(Re){return ty(Re,i.icons)}),O=Vp([b]);return yD(n,a,s,d,O,i)},wD=function(n,a,i,s){s===void 0&&(s=[]);var f=CE(n,$e.some(a),i,s);return qs.sketch(f)},CD=function(n,a,i,s,f){s===void 0&&(s=[]),f===void 0&&(f=[]);var d=i.translate(n.text),b=n.icon?n.icon.map(function(ct){return ty(ct,i.icons)}):$e.none(),O=b.isSome()?Vp([b]):[],Re=b.isSome()?{}:{innerHtml:d},Qe=Ht(Ht(Ht(Ht([],!n.primary&&!n.borderless?["tox-button","tox-button--secondary"]:["tox-button"],!0),b.isSome()?["tox-button--icon"]:[],!0),n.borderless?["tox-button--naked"]:[],!0),f,!0),ot=ut(ut({tag:"button",classes:Qe},Re),{attributes:{title:d}});return yD(n,a,s,ot,O,i)},SE=function(n,a,i,s,f){s===void 0&&(s=[]),f===void 0&&(f=[]);var d=CD(n,$e.some(a),i,s,f);return qs.sketch(d)},SD=function(n,a){return function(i){a==="custom"?za(i,Xf,{name:n,value:{}}):a==="submit"?$o(i,Lg):a==="cancel"&&$o(i,fm)}},B5=function(n,a){return a==="menu"},P5=function(n,a){return a==="custom"||a==="cancel"||a==="submit"},oy=function(n,a,i){if(B5(n,a)){var s=function(){return b},f=n,d=ut(ut({},n),{onSetup:function(Qe){return Qe.setDisabled(n.disabled),He},fetch:mc(f.items,s,i)}),b=Ko(ay(d,"tox-tbtn",i,$e.none()));return b.asSpec()}else if(P5(n,a)){var O=SD(n.name,a),Re=ut(ut({},n),{borderless:!1});return SE(Re,O,i.shared.providers,[])}},I5=function(n,a){var i=SD(n.name,"custom");return HI($e.none(),Ho.parts.field(ut({factory:qs},CD(n,$e.some(i),a,[vm.memory(""),xf.self()]))))},F5=Ke([En("field1Name","field1"),En("field2Name","field2"),$s("onLockedChange"),Fv(["lockClass"]),En("locked",!1),fc.field("coupledFieldBehaviours",[Oo,Xr])]),xD=function(n,a,i){return li(n,a,i).bind(Oo.getCurrent)},xE=function(n,a){return hs({factory:Ho,name:n,overrides:function(i){return{fieldBehaviours:Hr([mo("coupled-input-behaviour",[wr($m(),function(s){xD(s,i,a).each(function(f){li(s,i,"lock").each(function(d){Mo.isOn(d)&&i.onLockedChange(s,f,d)})})})])])}}})},ED=Ke([xE("field1","field2"),xE("field2","field1"),hs({factory:qs,schema:[yr("dom")],name:"lock",overrides:function(n){return{buttonBehaviours:Hr([Mo.config({selected:n.locked,toggleClass:n.markers.lockClass,aria:{mode:"pressed"}})])}}})]),H5=function(n,a,i,s){return{uid:n.uid,dom:n.dom,components:a,behaviours:fc.augment(n.coupledFieldBehaviours,[Oo.config({find:$e.some}),Xr.config({store:{mode:"manual",getValue:function(f){var d,b=v0(f,n,["field1","field2"]);return d={},d[n.field1Name]=Xr.getValue(b.field1()),d[n.field2Name]=Xr.getValue(b.field2()),d},setValue:function(f,d){var b=v0(f,n,["field1","field2"]);aa(d,n.field1Name)&&Xr.setValue(b.field1(),d[n.field1Name]),aa(d,n.field2Name)&&Xr.setValue(b.field2(),d[n.field2Name])}}})]),apis:{getField1:function(f){return li(f,n,"field1")},getField2:function(f){return li(f,n,"field2")},getLock:function(f){return li(f,n,"lock")}}}},Al=Ws({name:"FormCoupledInputs",configFields:F5(),partFields:ED(),factory:H5,apis:{getField1:function(n,a){return n.getField1(a)},getField2:function(n,a){return n.getField2(a)},getLock:function(n,a){return n.getLock(a)}}}),z5=function(n){var a={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},i=function(f){return f in a?a[f]:1},s=n.value.toFixed(i(n.unit));return s.indexOf(".")!==-1&&(s=s.replace(/\.?0*$/,"")),s+n.unit},EE=function(n){var a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/,i=a.exec(n);if(i!==null){var s=parseFloat(i[1]),f=i[2];return So.value({value:s,unit:f})}else return So.error(n)},kD=function(n,a){var i={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},s=function(f){return pr(i,f)};return n.unit===a?$e.some(n.value):s(n.unit)&&s(a)?i[n.unit]===i[a]?$e.some(n.value):$e.some(n.value/i[n.unit]*i[a]):$e.none()},kE=function(n){return $e.none()},$5=function(n,a){return function(i){return kD(i,a).map(function(s){return{value:s*n,unit:a}})}},V5=function(n,a){var i=EE(n).toOptional(),s=EE(a).toOptional();return Yo(i,s,function(f,d){return kD(f,d.unit).map(function(b){return d.value/b}).map(function(b){return $5(b,d.unit)}).getOr(kE)}).getOr(kE)},AD=function(n,a){var i=kE,s=ya("ratio-event"),f=function(ct){return Nc(ct,{tag:"span",classes:["tox-icon","tox-lock-icon__"+ct]},a.icons)},d=Al.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:a.translate(n.label.getOr("Constrain proportions"))}},components:[f("lock"),f("unlock")],buttonBehaviours:Hr([Pa.config({disabled:function(){return n.disabled||a.isDisabled()}}),vu(),Ui.config({})])}),b=function(ct){return{dom:{tag:"div",classes:["tox-form__group"]},components:ct}},O=function(ct){return Ho.parts.field({factory:Xp,inputClasses:["tox-textfield"],inputBehaviours:Hr([Pa.config({disabled:function(){return n.disabled||a.isDisabled()}}),vu(),Ui.config({}),mo("size-input-events",[wr(_d(),function(St,At){za(St,s,{isField1:ct})}),wr(Vm(),function(St,At){za(St,kl,{name:n.name})})])]),selectOnFocus:!1})},Re=function(ct){return{dom:{tag:"label",classes:["tox-label"],innerHtml:a.translate(ct)}}},Qe=Al.parts.field1(b([Ho.parts.label(Re("Width")),O(!0)])),ot=Al.parts.field2(b([Ho.parts.label(Re("Height")),O(!1)]));return Al.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[Qe,ot,b([Re("&nbsp;"),d])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(ct,St,At){EE(Xr.getValue(ct)).each(function(It){i(It).each(function(Yt){Xr.setValue(St,z5(Yt))})})},coupledFieldBehaviours:Hr([Pa.config({disabled:function(){return n.disabled||a.isDisabled()},onDisabled:function(ct){Al.getField1(ct).bind(Ho.getField).each(Pa.disable),Al.getField2(ct).bind(Ho.getField).each(Pa.disable),Al.getLock(ct).each(Pa.disable)},onEnabled:function(ct){Al.getField1(ct).bind(Ho.getField).each(Pa.enable),Al.getField2(ct).bind(Ho.getField).each(Pa.enable),Al.getLock(ct).each(Pa.enable)}}),vu(),mo("size-input-events2",[wr(s,function(ct,St){var At=St.event.isField1,It=At?Al.getField1(ct):Al.getField2(ct),Yt=At?Al.getField2(ct):Al.getField1(ct),bn=It.map(Xr.getValue).getOr(""),jt=Yt.map(Xr.getValue).getOr("");i=V5(bn,jt)})])])})},U5=Ke(ya("undo")),j5=Ke(ya("redo")),W5=Ke(ya("zoom")),q5=Ke(ya("back")),K5=Ke(ya("apply")),G5=Ke(ya("swap")),X5=Ke(ya("transform")),TD=Ke(ya("temp-transform")),Y5=Ke(ya("transform-apply")),bs={undo:U5,redo:j5,zoom:W5,back:q5,apply:K5,swap:G5,transform:X5,tempTransform:TD,transformApply:Y5},_D=Ke("save-state"),Q5=Ke("disable"),J5=Ke("enable"),ll={formActionEvent:Xf,saveState:_D,disable:Q5,enable:J5},Z5=function(n,a){var i=function(ea,po,Zo,Ni){return Ko(SE({name:ea,text:ea,disabled:Zo,primary:Ni,icon:$e.none(),borderless:!1},po,a))},s=function(ea,po,Zo,Ni){return Ko(wD({name:ea,icon:$e.some(ea),tooltip:$e.some(po),disabled:Ni,primary:!1,borderless:!1},Zo,a))},f=function(ea,po){ea.map(function(Zo){var Ni=Zo.get(po);Ni.hasConfigured(Pa)&&Pa.disable(Ni)})},d=function(ea,po){ea.map(function(Zo){var Ni=Zo.get(po);Ni.hasConfigured(Pa)&&Pa.enable(Ni)})},b={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},O=He,Re=function(ea,po,Zo){za(ea,po,Zo)},Qe=function(ea){return $o(ea,ll.disable())},ot=function(ea){return $o(ea,ll.enable())},ct=function(ea,po){Qe(ea),Re(ea,bs.transform(),{transform:po}),ot(ea)},St=function(ea,po){Qe(ea),Re(ea,bs.tempTransform(),{transform:po}),ot(ea)},At=function(ea){return function(){Of.getOpt(ea).each(function(po){eo.set(po,[Ev])})}},It=function(ea,po){Qe(ea),Re(ea,bs.transformApply(),{transform:po,swap:At(ea)}),ot(ea)},Yt=function(){return i("Back",function(ea){return Re(ea,bs.back(),{swap:At(ea)})},!1,!1)},bn=function(){return Ko({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Hr([Pa.config({})])})},jt=function(){return i("Apply",function(ea){return Re(ea,bs.apply(),{swap:At(ea)})},!0,!0)},Sn=function(){return function(ea){var po=n.getRect();return M5(ea,po.x,po.y,po.w,po.h)}},Xn=[Yt(),bn(),i("Apply",function(ea){var po=Sn();It(ea,po),n.hideCrop()},!1,!0)],Kn=gs.sketch({dom:b,components:Xn.map(function(ea){return ea.asSpec()}),containerBehaviours:Hr([mo("image-tools-crop-buttons-events",[wr(ll.disable(),function(ea,po){f(Xn,ea)}),wr(ll.enable(),function(ea,po){d(Xn,ea)})])])}),wn=Ko(AD({name:"size",label:$e.none(),constrain:!0,disabled:!1},a)),$n=function(ea,po){return function(Zo){return fD(Zo,ea,po)}},ir=[Yt(),bn(),wn,bn(),i("Apply",function(ea){wn.getOpt(ea).each(function(po){var Zo=Xr.getValue(po),Ni=parseInt(Zo.width,10),Js=parseInt(Zo.height,10),Ns=$n(Ni,Js);It(ea,Ns)})},!1,!0)],Wr=gs.sketch({dom:b,components:ir.map(function(ea){return ea.asSpec()}),containerBehaviours:Hr([mo("image-tools-resize-buttons-events",[wr(ll.disable(),function(ea,po){f(ir,ea)}),wr(ll.enable(),function(ea,po){d(ir,ea)})])])}),gr=function(ea,po){return function(Zo){return ea(Zo,po)}},qr=gr(cD,"h"),Cr=gr(cD,"v"),ar=gr(dD,-90),Ir=gr(dD,90),ga=function(ea,po){St(ea,po)},hr=[Yt(),bn(),s("flip-horizontally","Flip horizontally",function(ea){ga(ea,qr)},!1),s("flip-vertically","Flip vertically",function(ea){ga(ea,Cr)},!1),s("rotate-left","Rotate counterclockwise",function(ea){ga(ea,ar)},!1),s("rotate-right","Rotate clockwise",function(ea){ga(ea,Ir)},!1),bn(),jt()],da=gs.sketch({dom:b,components:hr.map(function(ea){return ea.asSpec()}),containerBehaviours:Hr([mo("image-tools-fliprotate-buttons-events",[wr(ll.disable(),function(ea,po){f(hr,ea)}),wr(ll.enable(),function(ea,po){d(hr,ea)})])])}),ka=function(ea,po,Zo,Ni,Js){var Ns=Bc.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:a.translate(ea)}}),Ol=Bc.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),hc=Bc.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Ko(Bc.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:Zo,maxX:Js,getInitialValue:Ke({x:Ni})},components:[Ns,Ol,hc],sliderBehaviours:Hr([to.config({})]),onChoose:po}))},Ao=function(ea,po,Zo,Ni,Js){var Ns=function(Ol,hc,ph){var rb=gr(po,ph.x/100);ct(Ol,rb)};return ka(ea,Ns,Zo,Ni,Js)},Xo=function(ea,po,Zo,Ni,Js){return[Yt(),Ao(ea,po,Zo,Ni,Js),jt()]},gi=function(ea,po,Zo,Ni,Js){var Ns=Xo(ea,po,Zo,Ni,Js);return gs.sketch({dom:b,components:Ns.map(function(Ol){return Ol.asSpec()}),containerBehaviours:Hr([mo("image-tools-filter-panel-buttons-events",[wr(ll.disable(),function(Ol,hc){f(Ns,Ol)}),wr(ll.enable(),function(Ol,hc){d(Ns,Ol)})])])})},Bi=[Yt(),bn(),jt()],_l=gs.sketch({dom:b,components:Bi.map(function(ea){return ea.asSpec()})}),Cs=gi("Brightness",_5,-100,0,100),Dy=gi("Contrast",O5,-100,0,100),_u=gi("Gamma",T5,-100,0,100),xm=function(ea,po,Zo){return function(Ni){return Ug(Ni,ea,po,Zo)}},Em=function(ea){var po=function(Zo,Ni,Js){var Ns=eb.getOpt(Zo),Ol=tb.getOpt(Zo),hc=km.getOpt(Zo);Ns.each(function(ph){Ol.each(function(rb){hc.each(function(hh){var w8=Xr.getValue(ph).x/100,C8=Xr.getValue(hh).x/100,Tm=Xr.getValue(rb).x/100,gh=xm(w8,C8,Tm);ct(Zo,gh)})})})};return ka(ea,po,0,100,200)},eb=Em("R"),km=Em("G"),tb=Em("B"),Qs=[Yt(),eb,km,tb,jt()],_f=gs.sketch({dom:b,components:Qs.map(function(ea){return ea.asSpec()})}),Ds=function(ea,po,Zo){return function(Ni){var Js=function(){Of.getOpt(Ni).each(function(Ns){eo.set(Ns,[ea]),Zo(Ns)})};Re(Ni,bs.swap(),{transform:po,swap:Js})}},nb=function(ea){n.showCrop()},xv=function(ea){wn.getOpt(ea).each(function(po){var Zo=n.getMeasurements(),Ni=Zo.width,Js=Zo.height;Xr.setValue(po,{width:Ni,height:Js})})},mh=$e.some(lD),Ou=$e.some(A5),xd=[s("crop","Crop",Ds(Kn,$e.none(),nb),!1),s("resize","Resize",Ds(Wr,$e.none(),xv),!1),s("orientation","Orientation",Ds(da,$e.none(),O),!1),s("brightness","Brightness",Ds(Cs,$e.none(),O),!1),s("sharpen","Sharpen",Ds(_l,mh,O),!1),s("contrast","Contrast",Ds(Dy,$e.none(),O),!1),s("color-levels","Color levels",Ds(_f,$e.none(),O),!1),s("gamma","Gamma",Ds(_u,$e.none(),O),!1),s("invert","Invert",Ds(_l,Ou,O),!1)],Ev=gs.sketch({dom:b,components:xd.map(function(ea){return ea.asSpec()})}),Am=gs.sketch({dom:{tag:"div"},components:[Ev],containerBehaviours:Hr([eo.config({})])}),Of=Ko(Am),kv=function(ea){return Of.getOpt(ea).map(function(po){var Zo=po.components()[0];return Zo.components()[Zo.components().length-1]})};return{memContainer:Of,getApplyButton:kv}},OD=tinymce.util.Tools.resolve("tinymce.geom.Rect"),eH=tinymce.util.Tools.resolve("tinymce.util.Observable"),Sd=tinymce.util.Tools.resolve("tinymce.util.VK"),tH=function(n){var a=Math.max,i=n.documentElement,s=n.body,f=a(i.scrollWidth,s.scrollWidth),d=a(i.clientWidth,s.clientWidth),b=a(i.offsetWidth,s.offsetWidth),O=a(i.scrollHeight,s.scrollHeight),Re=a(i.clientHeight,s.clientHeight),Qe=a(i.offsetHeight,s.offsetHeight);return{width:f<b?d:f,height:O<Qe?Re:O}},nH=function(n){return x(n.changedTouches)},AE=function(n){if(nH(n))for(var a="screenX screenY pageX pageY clientX clientY".split(" "),i=0;i<a.length;i++)n[a[i]]=n.changedTouches[0][a[i]]};function rH(n,a){var i,s,f,d,b=[],O=[],Re=(i=a.document)!==null&&i!==void 0?i:document,Qe=(s=a.root)!==null&&s!==void 0?s:Re,ot=Gt.fromDom(Re),ct,St,At,It=Gt.fromDom(Qe.getElementById((f=a.handle)!==null&&f!==void 0?f:n)),Yt=function(Xn){var Kn=Xn.raw,wn=tH(Re);AE(Kn),Xn.prevent(),ct=Kn.button,St=Kn.screenX,At=Kn.screenY;var $n=Hi(It,"cursor");d=Gt.fromTag("div",Re),tc(d,{position:"absolute",top:"0",left:"0",width:wn.width+"px",height:wn.height+"px","z-index":"2147483647",opacity:"0.0001",cursor:$n}),Wo(Jo(ot),d),O.push(su(ot,"mousemove",bn),su(ot,"touchmove",bn),su(ot,"mouseup",jt),su(ot,"touchend",jt)),a.start(Kn)},bn=function(Xn){var Kn=Xn.raw;if(AE(Kn),Kn.button!==ct)return jt(Xn);Kn.deltaX=Kn.screenX-St,Kn.deltaY=Kn.screenY-At,Xn.prevent(),a.drag(Kn)},jt=function(Xn){AE(Xn.raw),en(O,function(Kn){return Kn.unbind()}),O=[],Uu(d),a.stop&&a.stop(Xn.raw)},Sn=function(){en(O.concat(b),function(Xn){return Xn.unbind()}),O=[],b=[],x(d)&&Uu(d)};return b.push(su(It,"mousedown",Yt),su(It,"touchstart",Yt)),{destroy:Sn}}var aH=0,oH=function(n,a,i,s,f){var d,b=[],O="tox-",Re=O+"crid-"+aH++,Qe=Gt.fromDom(s),ot=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],ct=["top","right","bottom","left"],St=function(gr,qr){return{x:qr.x+gr.x,y:qr.y+gr.y,w:qr.w,h:qr.h}},At=function(gr,qr){return{x:qr.x-gr.x,y:qr.y-gr.y,w:qr.w,h:qr.h}},It=function(){return At(i,n)},Yt=function(gr,qr,Cr,ar){var Ir=qr.x+Cr*gr.deltaX,ga=qr.y+ar*gr.deltaY,hr=Math.max(20,qr.w+Cr*gr.deltaW),da=Math.max(20,qr.h+ar*gr.deltaH),ka=n=OD.clamp({x:Ir,y:ga,w:hr,h:da},i,gr.name==="move");ka=At(i,ka),Wr.fire("updateRect",{rect:ka}),wn(ka)},bn=function(){var gr=function(Ir){var ga;return rH(Re,{document:s.ownerDocument,root:ja(Qe).dom,handle:Re+"-"+Ir.name,start:function(){ga=n},drag:function(hr){Yt(Ir,ga,hr.deltaX,hr.deltaY)}})},qr=Gt.fromTag("div");Ed(qr,{id:Re,class:O+"croprect-container",role:"grid","aria-dropeffect":"execute"}),Wo(Qe,qr),en(ct,function(Ir){Su(Qe,"#"+Re).each(function(ga){var hr=Gt.fromTag("div");Ed(hr,{id:Re+"-"+Ir,class:O+"croprect-block","data-mce-bogus":"all"}),Qa(hr,"display","none"),Wo(ga,hr)})}),en(ot,function(Ir){Su(Qe,"#"+Re).each(function(ga){var hr=Gt.fromTag("div");Ed(hr,{id:Re+"-"+Ir.name,"aria-label":Ir.label,"aria-grabbed":"false","data-mce-bogus":"all",role:"gridcell",tabindex:"-1",title:Ir.label}),Bv(hr,[O+"croprect-handle",O+"croprect-handle-"+Ir.name]),Qa(hr,"display","none"),Wo(ga,hr)})}),d=dn(ot,gr),Sn(n);var Cr=function(Ir){ho(Ir.target,"aria-grabbed",Ir.raw.type==="focus"?"true":"false")},ar=function(Ir){var ga;en(ot,function(da){if(Ti(Ir.target,"id")===Re+"-"+da.name)return ga=da,!1});var hr=function(da,ka,Ao,Xo,gi){da.stopPropagation(),da.preventDefault(),Yt(ga,Ao,Xo,gi)};switch(Ir.raw.keyCode){case Sd.LEFT:hr(Ir,ga,n,-10,0);break;case Sd.RIGHT:hr(Ir,ga,n,10,0);break;case Sd.UP:hr(Ir,ga,n,0,-10);break;case Sd.DOWN:hr(Ir,ga,n,0,10);break;case Sd.ENTER:case Sd.SPACEBAR:Ir.prevent(),f();break}};b.push(su(Qe,"focusin",Cr),su(Qe,"focusout",Cr),su(Qe,"keydown",ar))},jt=function(gr){var qr=Ht(Ht([],dn(ot,function(ar){return"#"+Re+"-"+ar.name}),!0),dn(ct,function(ar){return"#"+Re+"-"+ar}),!0).join(","),Cr=Us(Qe,qr);gr?en(Cr,function(ar){return g(ar,"display")}):en(Cr,function(ar){return Qa(ar,"display","none")})},Sn=function(gr){var qr=function(Cr,ar){Su(Qe,"#"+Re+"-"+Cr).each(function(Ir){tc(Ir,{left:ar.x+"px",top:ar.y+"px",width:Math.max(0,ar.w)+"px",height:Math.max(0,ar.h)+"px"})})};en(ot,function(Cr){Su(Qe,"#"+Re+"-"+Cr.name).each(function(ar){tc(ar,{left:gr.w*Cr.xMul+gr.x+"px",top:gr.h*Cr.yMul+gr.y+"px"})})}),qr("top",{x:a.x,y:a.y,w:a.w,h:gr.y-a.y}),qr("right",{x:gr.x+gr.w,y:gr.y,w:a.w-gr.x-gr.w+a.x,h:gr.h}),qr("bottom",{x:a.x,y:gr.y+gr.h,w:a.w,h:a.h-gr.y-gr.h+a.y}),qr("left",{x:a.x,y:gr.y,w:gr.x-a.x,h:gr.h}),qr("move",gr)},Xn=function(gr){n=gr,Sn(n)},Kn=function(gr){a=gr,Sn(n)},wn=function(gr){Xn(St(i,gr))},$n=function(gr){i=gr,Sn(n)},ir=function(){en(d,function(gr){return gr.destroy()}),d=[],en(b,function(gr){return gr.unbind()}),b=[]};bn();var Wr=ut(ut({},eH),{toggleVisibility:jt,setClampRect:$n,setRect:Xn,getInnerRect:It,setInnerRect:wn,setViewPortRect:Kn,destroy:ir});return Wr},iH={create:oH},MD=function(n){return new om(function(a){var i=function(){n.removeEventListener("load",i),a(n)};n.complete?a(n):n.addEventListener("load",i)})},uH=function(n){var a=Ko({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),i=Va(1),s=Uw(),f=Va({x:0,y:0,w:1,h:1}),d=Va({x:0,y:0,w:1,h:1}),b=function(bn,jt){It.getOpt(bn).each(function(Sn){var Xn=i.get(),Kn=na(Sn.element),wn=Ue(Sn.element),$n=jt.dom.naturalWidth*Xn,ir=jt.dom.naturalHeight*Xn,Wr=Math.max(0,Kn/2-$n/2),gr=Math.max(0,wn/2-ir/2),qr={left:Wr.toString()+"px",top:gr.toString()+"px",width:$n.toString()+"px",height:ir.toString()+"px",position:"absolute"};tc(jt,qr),a.getOpt(Sn).each(function(Cr){tc(Cr.element,qr)}),s.run(function(Cr){var ar=f.get();Cr.setRect({x:ar.x*Xn+Wr,y:ar.y*Xn+gr,w:ar.w*Xn,h:ar.h*Xn}),Cr.setClampRect({x:Wr,y:gr,w:$n,h:ir}),Cr.setViewPortRect({x:0,y:0,w:Kn,h:wn})})})},O=function(bn,jt){It.getOpt(bn).each(function(Sn){var Xn=na(Sn.element),Kn=Ue(Sn.element),wn=jt.dom.naturalWidth,$n=jt.dom.naturalHeight,ir=Math.min(Xn/wn,Kn/$n);ir>=1?i.set(1):i.set(ir)})},Re=function(bn,jt){var Sn=Gt.fromTag("img");return ho(Sn,"src",jt),MD(Sn.dom).then(function(){bn.getSystem().isConnected()&&It.getOpt(bn).map(function(Xn){var Kn=yw({element:Sn});eo.replaceAt(Xn,1,$e.some(Kn));var wn=d.get(),$n={x:0,y:0,w:Sn.dom.naturalWidth,h:Sn.dom.naturalHeight};d.set($n);var ir=OD.inflate($n,-20,-20);f.set(ir),(wn.w!==$n.w||wn.h!==$n.h)&&O(Xn,Sn),b(Xn,Sn)})})},Qe=function(bn,jt){var Sn=i.get(),Xn=jt>0?Math.min(2,Sn+.1):Math.max(.1,Sn-.1);i.set(Xn),It.getOpt(bn).each(function(Kn){var wn=Kn.components()[1].element;b(Kn,wn)})},ot=function(){s.run(function(bn){bn.toggleVisibility(!0)})},ct=function(){s.run(function(bn){bn.toggleVisibility(!1)})},St=function(){return f.get()},At=gs.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[a.asSpec(),{dom:{tag:"img",attributes:{src:n}}},{dom:{tag:"div"},behaviours:Hr([mo("image-panel-crop-events",[go(function(bn){It.getOpt(bn).each(function(jt){var Sn=jt.element.dom,Xn=iH.create({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},Sn,He);Xn.toggleVisibility(!1),Xn.on("updateRect",function(Kn){var wn=Kn.rect,$n=i.get(),ir={x:Math.round(wn.x/$n),y:Math.round(wn.y/$n),w:Math.round(wn.w/$n),h:Math.round(wn.h/$n)};f.set(ir)}),s.set(Xn)})}),sc(function(){s.clear()})])])}],containerBehaviours:Hr([eo.config({}),mo("image-panel-events",[go(function(bn){Re(bn,n)})])])}),It=Ko(At),Yt=function(){var bn=d.get();return{width:bn.w,height:bn.h}};return{memContainer:It,updateSrc:Re,zoom:Qe,showCrop:ot,hideCrop:ct,getRect:St,getMeasurements:Yt}},iy=function(n,a,i,s,f){return wD({name:n,icon:$e.some(a),disabled:i,tooltip:$e.some(n),primary:!1,borderless:!1},s,f)},DD=function(n,a){a?Pa.enable(n):Pa.disable(n)},sH=function(n){var a=function(d,b,O){i.getOpt(d).each(function(Re){DD(Re,b)}),s.getOpt(d).each(function(Re){DD(Re,O)})},i=Ko(iy("Undo","undo",!0,function(d){za(d,bs.undo(),{direction:1})},n)),s=Ko(iy("Redo","redo",!0,function(d){za(d,bs.redo(),{direction:1})},n)),f=gs.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[i.asSpec(),s.asSpec(),iy("Zoom in","zoom-in",!1,function(d){za(d,bs.zoom(),{direction:1})},n),iy("Zoom out","zoom-out",!1,function(d){za(d,bs.zoom(),{direction:-1})},n)]});return{container:f,updateButtonUndoStates:a}};function lH(){var n=[],a=-1,i=function(O){var Re=n.splice(++a);return n.push(O),{state:O,removed:Re}},s=function(){if(d())return n[--a]},f=function(){if(b())return n[++a]},d=function(){return a>0},b=function(){return a!==-1&&a<n.length-1};return{data:n,add:i,undo:s,redo:f,canUndo:d,canRedo:b}}var cH=function(n){var a=Va(n),i=Xi(),s=lH();s.add(n);var f=function(){return a.get()},d=function(Sn){a.set(Sn)},b=function(){return i.get().getOrThunk(a.get)},O=function(Sn){var Xn=Re(Sn);return ct(),i.set(Xn),Xn.url},Re=function(Sn){return{blob:Sn,url:URL.createObjectURL(Sn)}},Qe=function(Sn){URL.revokeObjectURL(Sn.url)},ot=function(Sn){mv.each(Sn,Qe)},ct=function(){i.on(Qe),i.clear()},St=function(Sn){var Xn=Re(Sn);d(Xn);var Kn=s.add(Xn).removed;return ot(Kn),Xn.url},At=function(Sn){var Xn=Re(Sn);return i.set(Xn),Xn.url},It=function(Sn){return i.get().fold(He,function(Xn){St(Xn.blob),Sn()})},Yt=function(){var Sn=s.undo();return d(Sn),Sn.url},bn=function(){var Sn=s.redo();return d(Sn),Sn.url},jt=function(){var Sn=s.canUndo(),Xn=s.canRedo();return{undoEnabled:Sn,redoEnabled:Xn}};return{getBlobState:f,setBlobState:d,addBlobState:St,getTempState:b,updateTempState:O,addTempState:At,applyTempState:It,destroyTempState:ct,undo:Yt,redo:bn,getHistoryStates:jt}},fH=function(n,a){var i=cH(n.currentState),s=function(Cr,ar){var Ir=ar.event.direction;ir.zoom(Cr,Ir)},f=function(Cr){var ar=i.getHistoryStates();Wr.updateButtonUndoStates(Cr,ar.undoEnabled,ar.redoEnabled),za(Cr,ll.formActionEvent,{name:ll.saveState(),value:ar.undoEnabled})},d=function(Cr){Wr.updateButtonUndoStates(Cr,!1,!1)},b=function(Cr,ar){var Ir=i.undo();ct(Cr,Ir).then(function(ga){ot(Cr),f(Cr)})},O=function(Cr,ar){var Ir=i.redo();ct(Cr,Ir).then(function(ga){ot(Cr),f(Cr)})},Re=function(Cr){return Cr.toBlob()},Qe=function(Cr){za(Cr,ll.formActionEvent,{name:ll.disable(),value:{}})},ot=function(Cr){gr.getApplyButton(Cr).each(function(ar){Pa.enable(ar)}),za(Cr,ll.formActionEvent,{name:ll.enable(),value:{}})},ct=function(Cr,ar){return Qe(Cr),ir.updateSrc(Cr,ar)},St=function(Cr,ar,Ir,ga,hr){Qe(Cr),d5(ar).then(Ir).then(Re).then(ga).then(function(da){return ct(Cr,da)}).then(function(){f(Cr),hr(),ot(Cr)}).catch(function(da){Cr.getSystem().isConnected()&&ot(Cr)})},At=function(Cr,ar,Ir){var ga=i.getBlobState().blob,hr=function(da){return i.updateTempState(da)};St(Cr,ga,ar,hr,Ir)},It=function(Cr,ar){var Ir=i.getTempState().blob,ga=function(hr){return i.addTempState(hr)};St(Cr,Ir,ar,ga,He)},Yt=function(Cr,ar,Ir){var ga=i.getBlobState().blob,hr=function(da){var ka=i.addBlobState(da);return jt(Cr),ka};St(Cr,ga,ar,hr,Ir)},bn=function(Cr,ar){var Ir=function(){jt(Cr);var ga=ar.event.swap;ga()};i.applyTempState(Ir)},jt=function(Cr){var ar=i.getBlobState().url;return i.destroyTempState(),f(Cr),ar},Sn=function(Cr){var ar=jt(Cr);ct(Cr,ar).then(function(Ir){ot(Cr)})},Xn=function(Cr,ar){Sn(Cr);var Ir=ar.event.swap;Ir(),ir.hideCrop()},Kn=function(Cr,ar){return At(Cr,ar.event.transform,He)},wn=function(Cr,ar){return It(Cr,ar.event.transform)},$n=function(Cr,ar){return Yt(Cr,ar.event.transform,ar.event.swap)},ir=uH(n.currentState.url),Wr=sH(a),gr=Z5(ir,a),qr=function(Cr,ar){d(Cr);var Ir=ar.event.transform,ga=ar.event.swap;Ir.fold(function(){ga()},function(hr){At(Cr,hr,ga)})};return{dom:{tag:"div",attributes:{role:"presentation"}},components:[gr.memContainer.asSpec(),ir.memContainer.asSpec(),Wr.container],behaviours:Hr([Xr.config({store:{mode:"manual",getValue:function(){return i.getBlobState()}}}),mo("image-tools-events",[wr(bs.undo(),b),wr(bs.redo(),O),wr(bs.zoom(),s),wr(bs.back(),Xn),wr(bs.apply(),bn),wr(bs.transform(),Kn),wr(bs.tempTransform(),wn),wr(bs.transformApply(),$n),wr(bs.swap(),qr)]),xf.self()])}},ND=function(n,a){var i={dom:{tag:"label",innerHtml:a.providers.translate(n.label),classes:["tox-label"]}},s=dn(n.items,a.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[i].concat(s),behaviours:Hr([xf.self(),eo.config({}),vm.domHtml($e.none()),Da.config({mode:"acyclic"})])}},TE=function(n){return!pr(n,"items")},LD="data-value",RD=function(n,a,i,s){return dn(i,function(f){return TE(f)?{type:"togglemenuitem",text:f.text,value:f.value,active:f.value===s,onAction:function(){Xr.setValue(n,f.value),za(n,kl,{name:a}),to.focus(n)}}:{type:"nestedmenuitem",text:f.text,getSubmenuItems:function(){return RD(n,a,f.items,s)}}})},BD=function(n,a){return Tn(n,function(i){return TE(i)?oi(i.value===a,i):BD(i.items,a)})},dH=function(n,a){var i=a.shared.providers,s=fr(n.items).filter(TE),f=n.label.map(function(O){return hd(O,i)}),d=Ho.parts.field({dom:{},factory:{sketch:function(O){return yE({uid:O.uid,text:s.map(function(Re){return Re.text}),icon:$e.none(),tooltip:n.label,role:$e.none(),fetch:function(Re,Qe){var ot=RD(Re,n.name,n.items,Xr.getValue(Re));Qe(lh(ot,gf.CLOSE_ON_EXECUTE,a,!1))},onSetup:Ke(He),getApi:Ke({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ui.config({}),Xr.config({store:{mode:"manual",initialValue:s.map(function(Re){return Re.value}).getOr(""),getValue:function(Re){return Ti(Re.element,LD)},setValue:function(Re,Qe){BD(n.items,Qe).each(function(ot){ho(Re.element,LD,ot.value),za(Re,mm,{text:ot.text})})}}})]},"tox-listbox",a.shared)}}}),b={dom:{tag:"div",classes:["tox-listboxfield"]},components:[d]};return Ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:tn([f.toArray(),[b]]),fieldBehaviours:Hr([Pa.config({disabled:Ke(n.disabled),onDisabled:function(O){Ho.getField(O).each(Pa.disable)},onEnabled:function(O){Ho.getField(O).each(Pa.enable)}})])})},vH=function(n,a){return{dom:{tag:"div",classes:n.classes},components:dn(n.items,a.shared.interpreter)}},PD=function(n,a){var i=dn(n.options,function(f){return{dom:{tag:"option",value:f.value,innerHtml:f.text}}}),s=n.data.map(function(f){return Lf("initialValue",f)}).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:i,behaviours:Ku(n.selectBehaviours,[to.config({}),Xr.config({store:ut({mode:"manual",getValue:function(f){return $d(f.element)},setValue:function(f,d){var b=Gn(n.options,function(O){return O.value===d});b.isSome()&&Jm(f.element,d)}},s)})])}},pm=jl({name:"HtmlSelect",configFields:[yr("options"),Eu("selectBehaviours",[to,Xr]),En("selectClasses",[]),En("selectAttributes",{}),ti("data")],factory:PD}),uy=function(n,a){var i=dn(n.items,function(O){return{text:a.translate(O.text),value:O.value}}),s=n.label.map(function(O){return hd(O,a)}),f=Ho.parts.field({dom:{},selectAttributes:{size:n.size},options:i,factory:pm,selectBehaviours:Hr([Pa.config({disabled:function(){return n.disabled||a.isDisabled()}}),Ui.config({}),mo("selectbox-change",[wr(Vm(),function(O,Re){za(O,kl,{name:n.name})})])])}),d=n.size>1?$e.none():$e.some(Nc("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},a.icons)),b={dom:{tag:"div",classes:["tox-selectfield"]},components:tn([[f],d.toArray()])};return Ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:tn([s.toArray(),[b]]),fieldBehaviours:Hr([Pa.config({disabled:function(){return n.disabled||a.isDisabled()},onDisabled:function(O){Ho.getField(O).each(Pa.disable)},onEnabled:function(O){Ho.getField(O).each(Pa.enable)}}),vu()])})},mH=function(n,a){var i=function(O){return{dom:{tag:"th",innerHtml:a.translate(O)}}},s=function(O){return{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:dn(O,i)}]}},f=function(O){return{dom:{tag:"td",innerHtml:a.translate(O)}}},d=function(O){return{dom:{tag:"tr"},components:dn(O,f)}},b=function(O){return{dom:{tag:"tbody"},components:dn(O,d)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[s(n.header),b(n.cells)],behaviours:Hr([Ui.config({}),to.config({})])}},ID=function(n,a){var i=n.label.map(function(St){return hd(St,a)}),s=[Pa.config({disabled:function(){return n.disabled||a.isDisabled()}}),vu(),Da.config({mode:"execution",useEnter:n.multiline!==!0,useControlEnter:n.multiline===!0,execute:function(St){return $o(St,Lg),$e.some(!0)}}),mo("textfield-change",[wr($m(),function(St,At){za(St,kl,{name:n.name})}),wr(Jy(),function(St,At){za(St,kl,{name:n.name})})]),Ui.config({})],f=n.validation.map(function(St){return Yf.config({getRoot:function(At){return ru(At.element)},invalidClass:"tox-invalid",validator:{validate:function(At){var It=Xr.getValue(At),Yt=St.validator(It);return as.pure(Yt===!0?So.value(It):So.error(Yt))},validateOnLoad:St.validateOnLoad}})}).toArray(),d=n.placeholder.fold(Ke({}),function(St){return{placeholder:a.translate(St)}}),b=n.inputMode.fold(Ke({}),function(St){return{inputmode:St}}),O=ut(ut({},d),b),Re=Ho.parts.field({tag:n.multiline===!0?"textarea":"input",inputAttributes:O,inputClasses:[n.classname],inputBehaviours:Hr(tn([s,f])),selectOnFocus:!1,factory:Xp}),Qe=n.flex?["tox-form__group--stretched"]:[],ot=Qe.concat(n.maximized?["tox-form-group--maximize"]:[]),ct=[Pa.config({disabled:function(){return n.disabled||a.isDisabled()},onDisabled:function(St){Ho.getField(St).each(Pa.disable)},onEnabled:function(St){Ho.getField(St).each(Pa.enable)}}),vu()];return Dg(i,Re,ot,ct)},_E=function(n,a){return ID({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:n.disabled,classname:"tox-textfield",validation:$e.none(),maximized:n.maximized},a)},pH=function(n,a){return ID({name:n.name,multiline:!0,label:n.label,inputMode:$e.none(),placeholder:n.placeholder,flex:!0,disabled:n.disabled,classname:"tox-textarea",validation:$e.none(),maximized:n.maximized},a)},hH=function(n,a){var i=n.stream.streams,s=i.setup(n,a);return si([wr(n.event,s),sc(function(){return a.cancel()})].concat(n.cancelEvent.map(function(f){return[wr(f,function(){return a.cancel()})]}).getOr([])))},OE=Object.freeze({__proto__:null,events:hH}),ME=function(n){var a=Va(null),i=function(){return{timer:a.get()!==null?"set":"unset"}},s=function(d){a.set(d)},f=function(){var d=a.get();d!==null&&d.cancel()};return yl({readState:i,setTimer:s,cancel:f})},FD=function(n){return n.stream.streams.state(n)},gH=Object.freeze({__proto__:null,throttle:ME,init:FD}),bH=function(n,a){var i=n.stream,s=W0(n.onStream,i.delay);return a.setTimer(s),function(f,d){s.throttle(f,d),i.stopEvent&&d.stop()}},yH=[pl("stream",nc("mode",{throttle:[yr("delay"),En("stopEvent",!0),wi("streams",{setup:bH,state:ME})]})),En("event","input"),ti("cancelEvent"),$s("onStream")],HD=Bu({fields:yH,name:"streaming",active:OE,state:gH}),sy=function(n,a,i){var s=Xr.getValue(i);Xr.setValue(a,s),zD(a)},DE=function(n,a){var i=n.element,s=$d(i),f=i.dom;Ti(i,"type")!=="number"&&a(f,s)},zD=function(n){DE(n,function(a,i){return a.setSelectionRange(i.length,i.length)})},$D=function(n,a){DE(n,function(i,s){return i.setSelectionRange(a,s.length)})},wH=function(n,a,i){if(n.selectsOver){var s=Xr.getValue(a),f=n.getDisplayText(s),d=Xr.getValue(i),b=n.getDisplayText(d);return b.indexOf(f)===0?$e.some(function(){sy(n,a,i),$D(a,f.length)}):$e.none()}else return $e.none()},NE=Ke("alloy.typeahead.itemexecute"),LE=function(n,a,i,s){var f=function(Re,Qe,ot){n.previewing.set(!1);var ct=Qi.getCoupled(Re,"sandbox");if(Do.isOpen(ct))Oo.getCurrent(ct).each(function(At){ni.getHighlighted(At).fold(function(){ot(At)},function(){w2(ct,At.element,"keydown",Qe)})});else{var St=function(At){Oo.getCurrent(At).each(ot)};Mx(n,b(Re),Re,ct,s,St,yf.HighlightFirst).get(He)}},d=BO(n),b=function(Re){return function(Qe){return Qe.map(function(ot){var ct=Un(ot.menus),St=Mn(ct,function(It){return cn(It.items,function(Yt){return Yt.type==="item"})}),At=Xr.getState(Re);return At.update(dn(St,function(It){return It.data})),ot})}},O=[to.config({}),Xr.config({onSetValue:n.onSetValue,store:ut({mode:"dataset",getDataKey:function(Re){return $d(Re.element)},getFallbackEntry:function(Re){return{value:Re,meta:{}}},setValue:function(Re,Qe){Jm(Re.element,n.model.getDisplayText(Qe))}},n.initialData.map(function(Re){return Lf("initialValue",Re)}).getOr({}))}),HD.config({stream:{mode:"throttle",delay:n.responseTime,stopEvent:!1},onStream:function(Re,Qe){var ot=Qi.getCoupled(Re,"sandbox"),ct=to.isFocused(Re);if(ct&&$d(Re.element).length>=n.minChars){var St=Oo.getCurrent(ot).bind(function(It){return ni.getHighlighted(It).map(Xr.getValue)});n.previewing.set(!0);var At=function(It){Oo.getCurrent(ot).each(function(Yt){St.fold(function(){n.model.selectsOver&&ni.highlightFirst(Yt)},function(bn){ni.highlightBy(Yt,function(jt){var Sn=Xr.getValue(jt);return Sn.value===bn.value}),ni.getHighlighted(Yt).orThunk(function(){return ni.highlightFirst(Yt),$e.none()})})})};Mx(n,b(Re),Re,ot,s,At,yf.HighlightFirst).get(He)}},cancelEvent:ew()}),Da.config({mode:"special",onDown:function(Re,Qe){return f(Re,Qe,ni.highlightFirst),$e.some(!0)},onEscape:function(Re){var Qe=Qi.getCoupled(Re,"sandbox");return Do.isOpen(Qe)?(Do.close(Qe),$e.some(!0)):$e.none()},onUp:function(Re,Qe){return f(Re,Qe,ni.highlightLast),$e.some(!0)},onEnter:function(Re){var Qe=Qi.getCoupled(Re,"sandbox"),ot=Do.isOpen(Qe);if(ot&&!n.previewing.get())return Oo.getCurrent(Qe).bind(function(St){return ni.getHighlighted(St)}).map(function(St){return za(Re,NE(),{item:St}),!0});var ct=Xr.getValue(Re);return $o(Re,ew()),n.onExecute(Qe,Re,ct),ot&&Do.close(Qe),$e.some(!0)}}),Mo.config({toggleClass:n.markers.openClass,aria:{mode:"expanded"}}),Qi.config({others:{sandbox:function(Re){return Nx(n,Re,{onOpen:function(){return Mo.on(Re)},onClose:function(){return Mo.off(Re)}})}}}),mo("typeaheadevents",[lc(function(Re){var Qe=He;Qp(n,b(Re),Re,s,Qe,yf.HighlightFirst).get(He)}),wr(NE(),function(Re,Qe){var ot=Qi.getCoupled(Re,"sandbox");sy(n.model,Re,Qe.event.item),$o(Re,ew()),n.onItemExecute(Re,ot,Qe.event.item,Xr.getValue(Re)),Do.close(ot),zD(Re)})].concat(n.dismissOnBlur?[wr(Qy(),function(Re){var Qe=Qi.getCoupled(Re,"sandbox");af(Qe.element).isNone()&&Do.close(Qe)})]:[]))];return{uid:n.uid,dom:ql(nr(n,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:ut(ut({},d),Ku(n.typeaheadBehaviours,O)),eventOrder:n.eventOrder}},RE=Ke([ti("lazySink"),yr("fetch"),En("minChars",5),En("responseTime",1e3),qo("onOpen"),En("getHotspot",$e.some),En("getAnchorOverrides",Ke({})),En("layouts",$e.none()),En("eventOrder",{}),Vy("model",{},[En("getDisplayText",function(n){return n.meta!==void 0&&n.meta.text!==void 0?n.meta.text:n.value}),En("selectsOver",!0),En("populateFromBrowse",!0)]),qo("onSetValue"),wl("onExecute"),qo("onItemExecute"),En("inputClasses",[]),En("inputAttributes",{}),En("inputStyles",{}),En("matchWidth",!0),En("useMinWidth",!1),En("dismissOnBlur",!0),Fv(["openClass"]),ti("initialData"),Eu("typeaheadBehaviours",[to,Xr,HD,Da,Mo,Qi]),rl("previewing",function(){return Va(!0)})].concat(gd()).concat(Lx())),qg=Ke([_c({schema:[Mb()],name:"menu",overrides:function(n){return{fakeFocus:!0,onHighlight:function(a,i){n.previewing.get()?a.getSystem().getByUid(n.uid).each(function(s){wH(n.model,s,i).fold(function(){return ni.dehighlight(a,i)},function(f){return f()})}):a.getSystem().getByUid(n.uid).each(function(s){n.model.populateFromBrowse&&sy(n.model,s,i)}),n.previewing.set(!1)},onExecute:function(a,i){return a.getSystem().getByUid(n.uid).toOptional().map(function(s){return za(s,NE(),{item:i}),!0})},onHover:function(a,i){n.previewing.set(!1),a.getSystem().getByUid(n.uid).each(function(s){n.model.populateFromBrowse&&sy(n.model,s,i)})}}}})]),CH=Ws({name:"Typeahead",configFields:RE(),partFields:qg(),factory:LE}),Pc=function(n){var a=function(){return Pc(n.toCached())},i=function(Re){return Pc(n.bind(function(Qe){return Qe.fold(function(ot){return as.pure(So.error(ot))},function(ot){return Re(ot)})}))},s=function(Re){return Pc(n.map(function(Qe){return Qe.bind(Re)}))},f=function(Re){return Pc(n.map(function(Qe){return Qe.map(Re)}))},d=function(Re){return Pc(n.map(function(Qe){return Qe.mapError(Re)}))},b=function(Re,Qe){return n.map(function(ot){return ot.fold(Re,Qe)})},O=function(Re,Qe){return Pc(as.nu(function(ot){var ct=!1,St=setTimeout(function(){ct=!0,ot(So.error(Qe()))},Re);n.get(function(At){ct||(clearTimeout(St),ot(At))})}))};return ut(ut({},n),{toCached:a,bindFuture:i,bindResult:s,mapResult:f,mapError:d,foldResult:b,withTimeout:O})},VD=function(n){return Pc(as.nu(n))},UD=function(n){return Pc(as.pure(So.value(n)))},SH=function(n){return Pc(as.pure(So.error(n)))},jD=function(n){return Pc(as.pure(n))},WD=function(n){return Pc(n.map(So.value))},qD=function(n){return VD(function(a){n.then(function(i){a(So.value(i))},function(i){a(So.error(i))})})},xH={nu:VD,wrap:Pc,pure:UD,value:UD,error:SH,fromResult:jD,fromFuture:WD,fromPromise:qD},EH={type:"separator"},kH=function(n){return{type:"menuitem",value:n.url,text:n.title,meta:{attach:n.attach},onAction:He}},BE=function(n,a){return{type:"menuitem",value:a,text:n,meta:{attach:void 0},onAction:He}},AH=function(n){return dn(n,kH)},KD=function(n,a){return cn(a,function(i){return i.type===n})},GD=function(n,a){return AH(KD(n,a))},TH=function(n){return GD("header",n.targets)},_H=function(n){return GD("anchor",n.targets)},OH=function(n){return $e.from(n.anchorTop).map(function(a){return BE("<top>",a)}).toArray()},XD=function(n){return $e.from(n.anchorBottom).map(function(a){return BE("<bottom>",a)}).toArray()},hm=function(n){return dn(n,function(a){return BE(a,a)})},YD=function(n){return er(n,function(a,i){var s=a.length===0||i.length===0;return s?a.concat(i):a.concat(EH,i)},[])},PE=function(n,a){var i=n.toLowerCase();return cn(a,function(s){var f=s.meta!==void 0&&s.meta.text!==void 0?s.meta.text:s.text;return wo(f.toLowerCase(),i)||wo(s.value.toLowerCase(),i)})},MH=function(n,a,i){var s=Xr.getValue(a),f=s.meta.text!==void 0?s.meta.text:s.value,d=i.getLinkInformation();return d.fold(function(){return[]},function(b){var O=PE(f,hm(i.getHistory(n)));return n==="file"?YD([O,PE(f,TH(b)),PE(f,tn([OH(b),_H(b),XD(b)]))]):O})},QD=ya("aria-invalid"),JD=function(n,a,i){var s,f=a.shared.providers,d=function(jt){var Sn=Xr.getValue(jt);i.addToHistory(Sn.value,n.filetype)},b=Ho.parts.field({factory:CH,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":QD,type:"url"},minChars:0,responseTime:0,fetch:function(jt){var Sn=MH(n.filetype,jt,i),Xn=lh(Sn,gf.BUBBLE_TO_SANDBOX,a,!1);return as.pure(Xn)},getHotspot:function(jt){return At.getOpt(jt)},onSetValue:function(jt,Sn){jt.hasConfigured(Yf)&&Yf.run(jt).get(He)},typeaheadBehaviours:Hr(tn([i.getValidationHandler().map(function(jt){return Yf.config({getRoot:function(Sn){return ru(Sn.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(Sn,Xn){Qe.getOpt(Sn).each(function(Kn){ho(Kn.element,"title",f.translate(Xn))})}},validator:{validate:function(Sn){var Xn=Xr.getValue(Sn);return xH.nu(function(Kn){jt({type:n.filetype,url:Xn.value},function(wn){if(wn.status==="invalid"){var $n=So.error(wn.message);Kn($n)}else{var ir=So.value(wn.message);Kn(ir)}})})},validateOnLoad:!1}})}).toArray(),[Pa.config({disabled:function(){return n.disabled||f.isDisabled()}}),Ui.config({}),mo("urlinput-events",tn([n.filetype==="file"?[wr($m(),function(jt){za(jt,kl,{name:n.name})})]:[],[wr(Vm(),function(jt){za(jt,kl,{name:n.name}),d(jt)}),wr(Jy(),function(jt){za(jt,kl,{name:n.name}),d(jt)})]]))]])),eventOrder:(s={},s[$m()]=["streaming","urlinput-events","invalidating"],s),model:{getDisplayText:function(jt){return jt.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:a.shared.getSink,parts:{menu:Z0(!1,1,"normal")},onExecute:function(jt,Sn,Xn){za(Sn,Lg,{})},onItemExecute:function(jt,Sn,Xn,Kn){d(jt),za(jt,kl,{name:n.name})}}),O=n.label.map(function(jt){return hd(jt,f)}),Re=function(jt,Sn,Xn,Kn){return Xn===void 0&&(Xn=jt),Kn===void 0&&(Kn=jt),Nc(Xn,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+jt],attributes:ut({title:f.translate(Kn),"aria-live":"polite"},Sn.fold(function(){return{}},function(wn){return{id:wn}}))},f.icons)},Qe=Ko(Re("invalid",$e.some(QD),"warning")),ot=Ko({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[Qe.asSpec()]}),ct=i.getUrlPicker(n.filetype),St=ya("browser.url.event"),At=Ko({dom:{tag:"div",classes:["tox-control-wrap"]},components:[b,ot.asSpec()],behaviours:Hr([Pa.config({disabled:function(){return n.disabled||f.isDisabled()}})])}),It=Ko(SE({name:n.name,icon:$e.some("browse"),text:n.label.getOr(""),disabled:n.disabled,primary:!1,borderless:!0},function(jt){return $o(jt,St)},f,[],["tox-browse-url"])),Yt=function(){return{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:tn([[At.asSpec()],ct.map(function(){return It.asSpec()}).toArray()])}},bn=function(jt){Oo.getCurrent(jt).each(function(Sn){var Xn=Xr.getValue(Sn),Kn=ut({fieldname:n.name},Xn);ct.each(function(wn){wn(Kn).get(function($n){Xr.setValue(Sn,$n),za(jt,kl,{name:n.name})})})})};return Ho.sketch({dom:zI(),components:O.toArray().concat([Yt()]),fieldBehaviours:Hr([Pa.config({disabled:function(){return n.disabled||f.isDisabled()},onDisabled:function(jt){Ho.getField(jt).each(Pa.disable),It.getOpt(jt).each(Pa.disable)},onEnabled:function(jt){Ho.getField(jt).each(Pa.enable),It.getOpt(jt).each(Pa.enable)}}),vu(),mo("url-input-events",[wr(St,bn)])])})},DH=function(n,a){return gs.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[qs.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:UT(n.icon,a.icons),attributes:{title:a.translate(n.iconTooltip)}},action:function(i){za(i,Xf,{name:"alert-banner",value:n.url})},buttonBehaviours:Hr([LS()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:a.translate(n.text)}}]})},NH=function(n,a){var i=Xr.config({store:{mode:"manual",getValue:function(Re){var Qe=Re.element.dom;return Qe.checked},setValue:function(Re,Qe){var ot=Re.element.dom;ot.checked=Qe}}}),s=function(Re){return Re.element.dom.click(),$e.some(!0)},f=Ho.parts.field({factory:{sketch:tt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Hr([xf.self(),Pa.config({disabled:function(){return n.disabled||a.isDisabled()}}),Ui.config({}),to.config({}),i,Da.config({mode:"special",onEnter:s,onSpace:s,stopSpaceKeyup:!0}),mo("checkbox-events",[wr(Vm(),function(Re,Qe){za(Re,kl,{name:n.name})})])])}),d=Ho.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:a.translate(n.label)},behaviours:Hr([Zp.config({})])}),b=function(Re){var Qe=Re==="checked"?"selected":"unselected";return Nc(Qe,{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+Re]},a.icons)},O=Ko({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[b("checked"),b("unchecked")]});return Ho.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[f,O.asSpec(),d],fieldBehaviours:Hr([Pa.config({disabled:function(){return n.disabled||a.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(Re){Ho.getField(Re).each(Pa.disable)},onEnabled:function(Re){Ho.getField(Re).each(Pa.enable)}}),vu()])})},LH=function(n){return n.presets==="presentation"?gs.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:n.html}}):gs.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:n.html,attributes:{role:"document"}},containerBehaviours:Hr([Ui.config({}),to.config({})])})},Pu=function(n){return function(a,i,s){return jn(i,"name").fold(function(){return n(i,s)},function(f){return a.field(f,n(i,s))})}},RH=function(n){return function(a,i,s){var f=nr(i,{source:"dynamic"});return Pu(n)(a,f,s)}},BH={bar:Pu(function(n,a){return BI(n,a.shared)}),collection:Pu(function(n,a){return $I(n,a.shared.providers)}),alertbanner:Pu(function(n,a){return DH(n,a.shared.providers)}),input:Pu(function(n,a){return _E(n,a.shared.providers)}),textarea:Pu(function(n,a){return pH(n,a.shared.providers)}),label:Pu(function(n,a){return ND(n,a.shared)}),iframe:RH(function(n,a){return n5(n,a.shared.providers)}),button:Pu(function(n,a){return I5(n,a.shared.providers)}),checkbox:Pu(function(n,a){return NH(n,a.shared.providers)}),colorinput:Pu(function(n,a){return nF(n,a.shared,a.colorinput)}),colorpicker:Pu(WM),dropzone:Pu(function(n,a){return ih(n,a.shared.providers)}),grid:Pu(function(n,a){return YM(n,a.shared)}),listbox:Pu(function(n,a){return dH(n,a)}),selectbox:Pu(function(n,a){return uy(n,a.shared.providers)}),sizeinput:Pu(function(n,a){return AD(n,a.shared.providers)}),urlinput:Pu(function(n,a){return JD(n,a,a.urlinput)}),customeditor:Pu(KM),htmlpanel:Pu(LH),imagetools:Pu(function(n,a){return fH(n,a.shared.providers)}),table:Pu(function(n,a){return mH(n,a.shared.providers)}),panel:Pu(function(n,a){return vH(n,a)})},PH={field:function(n,a){return a}},ZD=function(n,a,i){var s=nr(i,{shared:{interpreter:function(f){return IE(n,f,s)}}});return IE(n,a,s)},IE=function(n,a,i){return jn(BH,a.type).fold(function(){return a},function(s){return s(n,a,i)})},IH=function(n,a){var i=PH;return IE(i,n,a)},FE={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},FH=function(n,a,i){var s=12,f={maxHeightFunction:$h()},d=function(){return{type:"node",root:Kr(n()),node:$e.from(n()),bubble:sp(s,s,FE),layouts:{onRtl:function(){return[nm]},onLtr:function(){return[gg]}},overrides:f}},b=function(){return{type:"hotspot",hotspot:a(),bubble:sp(-s,s,FE),layouts:{onRtl:function(){return[vs]},onLtr:function(){return[ms]}},overrides:f}};return function(){return i()?d():b()}},HH=function(n,a,i){var s=function(){return{type:"node",root:Kr(n()),node:$e.from(n()),layouts:{onRtl:function(){return[vf]},onLtr:function(){return[vf]}}}},f=function(){return{type:"hotspot",hotspot:a(),layouts:{onRtl:function(){return[fu]},onLtr:function(){return[fu]}}}};return function(){return i()?s():f()}},zH=function(n,a){return function(){return{type:"selection",root:a(),getSelection:function(){var i=n.selection.getRng();return $e.some(Wh.range(Gt.fromDom(i.startContainer),i.startOffset,Gt.fromDom(i.endContainer),i.endOffset))}}}},$H=function(n){return function(a){return{type:"node",root:n(),node:a}}},VH=function(n,a,i){var s=i1(n),f=function(){return Gt.fromDom(n.getBody())},d=function(){return Gt.fromDom(n.getContentAreaContainer())},b=function(){return s||!i()};return{inlineDialog:FH(d,a,b),banner:HH(d,a,b),cursor:zH(n,f),node:$H(f)}},HE=function(n){return function(a,i){var s=cO(n);s(a,i)}},eN=function(n){return function(){return rO(n)}},UH=function(n){return function(){return hx(n)}},jH=function(n){return function(){return b1(n)}},WH=function(n){return{colorPicker:HE(n),hasCustomColors:eN(n),getColors:UH(n),getColorCols:jH(n)}},qH=function(n){return function(){return wP(n)}},KH=function(n){return{isDraggableModal:qH(n)}},GH=function(n){var a=Va(N_(n)?"bottom":"top");return{isPositionedAtTop:function(){return a.get()==="top"},getDockingMode:a.get,setDockingMode:a.set}},tN=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],XH=function(n){return pr(n,"items")},YH=function(n){return pr(n,"block")},ly=function(n){return pr(n,"inline")},QH=function(n){return pr(n,"selector")},nN=function(n){return er(n,function(a,i){if(XH(i)){var s=nN(i.items);return{customFormats:a.customFormats.concat(s.customFormats),formats:a.formats.concat([{title:i.title,items:s.formats}])}}else if(ly(i)||YH(i)||QH(i)){var f=We(i.name)?i.name:i.title.toLowerCase(),d="custom-"+f;return{customFormats:a.customFormats.concat([{name:d,format:i}]),formats:a.formats.concat([{title:i.title,format:d,icon:i.icon}])}}else return ut(ut({},a),{formats:a.formats.concat(i)})},{customFormats:[],formats:[]})},rN=function(n,a){var i=nN(a),s=function(f){en(f,function(d){n.formatter.has(d.name)||n.formatter.register(d.name,d.format)})};return n.formatter?s(i.customFormats):n.on("init",function(){s(i.customFormats)}),i.formats},hv=function(n){return dP(n).map(function(a){var i=rN(n,a);return md(n)?tN.concat(i):i}).getOr(tN)},aN=function(n,a,i){var s={type:"formatter",isSelected:a(n.format),getStylePreview:i(n.format)};return nr(n,s)},cy=function(n,a,i,s){var f=function(Re){return aN(Re,i,s)},d=function(Re){var Qe={type:"submenu"};return nr(Re,Qe)},b=function(Re){var Qe=We(Re.name)?Re.name:ya(Re.title),ot="custom-"+Qe,ct={type:"formatter",format:ot,isSelected:i(ot),getStylePreview:s(ot)},St=nr(Re,ct);return n.formatter.register(Qe,St),St},O=function(Re){return dn(Re,function(Qe){var ot=Rn(Qe);if(aa(Qe,"items")){var ct=O(Qe.items);return nr(d(Qe),{getStyleItems:Ke(ct)})}else return aa(Qe,"format")?f(Qe):ot.length===1&&ln(ot,"title")?nr(Qe,{type:"separator"}):b(Qe)})};return O(a)},fy=function(n){var a=function(ct){return function(){return n.formatter.match(ct)}},i=function(ct){return function(){var St=n.formatter.get(ct);return St!==void 0?$e.some({tag:St.length>0&&(St[0].inline||St[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(ct))}):$e.none()}},s=function(ct){var St=ct.items;return St!==void 0&&St.length>0?Mn(St,s):[ct.format]},f=Va([]),d=Va([]),b=Va([]),O=Va([]),Re=Va(!1);n.on("PreInit",function(ct){var St=hv(n),At=cy(n,St,a,i);f.set(At),d.set(Mn(At,s))}),n.on("addStyleModifications",function(ct){var St=cy(n,ct.items,a,i);b.set(St),Re.set(ct.replace),O.set(Mn(St,s))});var Qe=function(){var ct=Re.get()?[]:f.get(),St=b.get();return ct.concat(St)},ot=function(){var ct=Re.get()?[]:d.get(),St=O.get();return ct.concat(St)};return{getData:Qe,getFlattenedKeys:ot}},JH=function(n){return x(n)&&n.nodeType===1},ZH=mv.trim,oN=function(n){return function(a){return!!(JH(a)&&(a.contentEditable===n||a.getAttribute("data-mce-contenteditable")===n))}},e6=oN("true"),t6=oN("false"),gv=function(n,a,i,s,f){return{type:n,title:a,url:i,level:s,attach:f}},iN=function(n){for(;n=n.parentNode;){var a=n.contentEditable;if(a&&a!=="inherit")return e6(n)}return!1},n6=function(n,a){return dn(Us(Gt.fromDom(a),n),function(i){return i.dom})},uN=function(n){return n.innerText||n.textContent},r6=function(n){return n.id?n.id:ya("h")},a6=function(n){return n&&n.nodeName==="A"&&(n.id||n.name)!==void 0},o6=function(n){return a6(n)&&dy(n)},sN=function(n){return n&&/^(H[1-6])$/.test(n.nodeName)},dy=function(n){return iN(n)&&!t6(n)},Kg=function(n){return sN(n)&&dy(n)},vy=function(n){return sN(n)?parseInt(n.nodeName.substr(1),10):0},my=function(n){var a=r6(n),i=function(){n.id=a};return gv("header",uN(n),"#"+a,vy(n),i)},gm=function(n){var a=n.id||n.name,i=uN(n);return gv("anchor",i||"#"+a,"#"+a,0,He)},py=function(n){return dn(cn(n,Kg),my)},i6=function(n){return dn(cn(n,o6),gm)},lN=function(n){var a=n6("h1,h2,h3,h4,h5,h6,a:not([href])",n);return a},cN=function(n){return ZH(n.title).length>0},fN=function(n){var a=lN(n);return cn(py(a).concat(i6(a)),cN)},u6={find:fN},zE="tinymce-url-history",dN=5,vN=function(n){return We(n)&&/^https?/.test(n)},s6=function(n){return Xe(n)&&n.length<=dN&&Rr(n,vN)},hy=function(n){return Ge(n)&&sn(n,function(a){return!s6(a)}).isNone()},gy=function(){var n=m1.getItem(zE);if(n===null)return{};var a;try{a=JSON.parse(n)}catch(i){if(i instanceof SyntaxError)return{};throw i}return hy(a)?a:{}},l6=function(n){if(!hy(n))throw new Error(`Bad format for history:
`+JSON.stringify(n));m1.setItem(zE,JSON.stringify(n))},mN=function(n){var a=gy();return jn(a,n).getOr([])},c6=function(n,a){if(vN(n)){var i=gy(),s=jn(i,a).getOr([]),f=cn(s,function(d){return d!==n});i[a]=[n].concat(f).slice(0,dN),l6(i)}},by=function(n){return!!n},f6=function(n){return br(mv.makeMap(n,/[, ]/),by)},$E=function(n){return $e.from(EP(n)).filter(qe)},bm=function(n){var a=$e.some(kP(n)).filter(by),i=$e.some(AP(n)).filter(by),s=a.or(i).map(f6);return $E(n).fold(xt,function(f){return s.fold(it,function(d){return Rn(d).length>0?d:!1})})},pN=function(n,a){var i=bm(n);return P(i)?i?$E(n):$e.none():i[a]?$E(n):$e.none()},d6=function(n,a){return pN(n,a).map(function(i){return function(s){return as.nu(function(f){var d=function(O,Re){if(!We(O))throw new Error("Expected value to be string");if(Re!==void 0&&!Ge(Re))throw new Error("Expected meta to be a object");var Qe={value:O,meta:Re};f(Qe)},b=ut({filetype:a,fieldname:s.fieldname},$e.from(s.meta).getOr({}));i.call(n,d,s.value,b)})}})},VE=function(n){return $e.from(n).filter(We).getOrUndefined()},v6=function(n){return TP(n)?$e.none():$e.some({targets:u6.find(n.getBody()),anchorTop:VE(P_(n)),anchorBottom:VE(_P(n))})},yy=function(n){return $e.from(OP(n))},Ic=function(n){return{getHistory:mN,addToHistory:c6,getLinkInformation:function(){return v6(n)},getValidationHandler:function(){return yy(n)},getUrlPicker:function(a){return d6(n,a)}}},m6=function(n,a,i){var s=Va(!1),f=GH(a),d={shared:{providers:{icons:function(){return a.ui.registry.getAll().icons},menuItems:function(){return a.ui.registry.getAll().menuItems},translate:Dc.translate,isDisabled:function(){return a.mode.isReadOnly()||a.ui.isDisabled()},getSetting:a.getParam.bind(a)},interpreter:function(b){return IH(b,d)},anchors:VH(a,i,f.isPositionedAtTop),header:f,getSink:function(){return So.value(n)}},urlinput:Ic(a),styleselect:fy(a),colorinput:WH(a),dialog:KH(a),isContextMenuOpen:function(){return s.get()},setContextMenuState:function(b){return s.set(b)}};return d},Qf=function(n,a,i){var s=function(Kn,wn){en([a,i],function($n){$n.broadcastEvent(Kn,wn)})},f=function(Kn,wn){en([a,i],function($n){$n.broadcastOn([Kn],wn)})},d=function(Kn){return f(qv(),{target:Kn.target})},b=Fh(),O=su(b,"touchstart",d),Re=su(b,"touchmove",function(Kn){return s(tw(),Kn)}),Qe=su(b,"touchend",function(Kn){return s(vL(),Kn)}),ot=su(b,"mousedown",d),ct=su(b,"mouseup",function(Kn){Kn.raw.button===0&&f(dC(),{target:Kn.target})}),St=function(Kn){return f(qv(),{target:Gt.fromDom(Kn.target)})},At=function(Kn){Kn.button===0&&f(dC(),{target:Gt.fromDom(Kn.target)})},It=function(){en(n.editorManager.get(),function(Kn){n!==Kn&&Kn.fire("DismissPopups",{relatedTarget:n})})},Yt=function(Kn){return s(nw(),Ww(Kn))},bn=function(Kn){f(pp(),{}),s(Yc(),Ww(Kn))},jt=function(){return f(pp(),{})},Sn=function(Kn){Kn.state&&f(qv(),{target:Gt.fromDom(n.getContainer())})},Xn=function(Kn){f(qv(),{target:Gt.fromDom(Kn.relatedTarget.getContainer())})};n.on("PostRender",function(){n.on("click",St),n.on("tap",St),n.on("mouseup",At),n.on("mousedown",It),n.on("ScrollWindow",Yt),n.on("ResizeWindow",bn),n.on("ResizeEditor",jt),n.on("AfterProgressState",Sn),n.on("DismissPopups",Xn)}),n.on("remove",function(){n.off("click",St),n.off("tap",St),n.off("mouseup",At),n.off("mousedown",It),n.off("ScrollWindow",Yt),n.off("ResizeWindow",bn),n.off("ResizeEditor",jt),n.off("AfterProgressState",Sn),n.off("DismissPopups",Xn),ot.unbind(),O.unbind(),Re.unbind(),Qe.unbind(),ct.unbind()}),n.on("detach",function(){js(a),js(i),a.destroy(),i.destroy()})},cl=qa,ym=oA,hN=Ke([En("shell",!1),yr("makeItem"),En("setupItem",He),fc.field("listBehaviours",[eo])]),wy=function(){return{behaviours:Hr([eo.config({})])}},bv=Oc({name:"items",overrides:wy}),fl=Ke([bv]),p6=Ke("CustomList"),gN=function(n,a,i,s){var f=function(O,Re){b(O).fold(function(){throw new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(Qe){var ot=eo.contents(Qe),ct=Re.length,St=ct-ot.length,At=St>0?dt(St,function(){return n.makeItem()}):[],It=ot.slice(ct);en(It,function(bn){return eo.remove(Qe,bn)}),en(At,function(bn){return eo.append(Qe,bn)});var Yt=eo.contents(Qe);en(Yt,function(bn,jt){n.setupItem(O,bn,Re[jt],jt)})})},d=n.shell?{behaviours:[eo.config({})],components:[]}:{behaviours:[],components:a},b=function(O){return n.shell?$e.some(O):li(O,n,"items")};return{uid:n.uid,dom:n.dom,components:d.components,behaviours:Ku(n.listBehaviours,d.behaviours),apis:{setItems:f}}},UE=Ws({name:p6(),configFields:hN(),partFields:fl(),factory:gN,apis:{setItems:function(n,a,i){n.setItems(a,i)}}}),wm=Ke([yr("dom"),En("shell",!0),Eu("toolbarBehaviours",[eo])]),h6=function(){return{behaviours:Hr([eo.config({})])}},g6=Ke([Oc({name:"groups",overrides:h6})]),yv=function(n,a,i,s){var f=function(O,Re){d(O).fold(function(){throw new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(Qe){eo.set(Qe,Re)})},d=function(O){return n.shell?$e.some(O):li(O,n,"groups")},b=n.shell?{behaviours:[eo.config({})],components:[]}:{behaviours:[],components:a};return{uid:n.uid,dom:n.dom,components:b.components,behaviours:Ku(n.toolbarBehaviours,b.behaviours),apis:{setGroups:f},domModification:{attributes:{role:"group"}}}},Fc=Ws({name:"Toolbar",configFields:wm(),partFields:g6(),factory:yv,apis:{setGroups:function(n,a,i){n.setGroups(a,i)}}}),ch=He,Cy=xt,jE=Ke([]),b6=Object.freeze({__proto__:null,setup:ch,isDocked:Cy,getBehaviours:jE}),bN=function(n){var a=Ua(bu(n,"position"),"fixed"),i=a?$e.none():ml(n);return i.orThunk(function(){var s=Gt.fromTag("span");return ru(n).bind(function(f){Wo(f,s);var d=ml(s);return Uu(s),d})})},yN=function(n){return bN(n).map(Vr).getOrThunk(function(){return Ut(0,0)})},WE=ic.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),fh=function(n,a){var i=n.element;Cu(i,a.transitionClass),cu(i,a.fadeOutClass),Cu(i,a.fadeInClass),a.onShow(n)},y6=function(n,a){var i=n.element;Cu(i,a.transitionClass),cu(i,a.fadeInClass),Cu(i,a.fadeOutClass),a.onHide(n)},w6=function(n,a){return n.y<a.bottom&&n.bottom>a.y},C6=function(n,a){return n.y>=a.y},S6=function(n,a){return n.bottom<=a.bottom},wN=function(n,a,i){return Rr(n,function(s){switch(s){case"bottom":return S6(a,i);case"top":return C6(a,i)}})},Gg=function(n,a){return a.getInitialPos().map(function(i){return Zi(i.bounds.x,i.bounds.y,na(n),Ue(n))})},x6=function(n,a,i){i.setInitialPos({style:Uc(n),position:Hi(n,"position")||"static",bounds:a})},qE=function(n,a,i){return i.getInitialPos().bind(function(s){switch(i.clearInitialPos(),s.position){case"static":return $e.some(WE.static());case"absolute":var f=bN(n).map(au).getOrThunk(function(){return au(ei())});return $e.some(WE.absolute(Tc("absolute",jn(s.style,"left").map(function(d){return a.x-f.x}),jn(s.style,"top").map(function(d){return a.y-f.y}),jn(s.style,"right").map(function(d){return f.right-a.right}),jn(s.style,"bottom").map(function(d){return f.bottom-a.bottom}))));default:return $e.none()}})},KE=function(n,a,i){return Gg(n,i).filter(function(s){return wN(i.getModes(),s,a)}).bind(function(s){return qE(n,s,i)})},CN=function(n,a,i){var s=au(n);if(wN(i.getModes(),s,a))return $e.none();x6(n,s,i);var f=ju(),d=s.x-f.x,b=a.y-f.y,O=f.bottom-a.bottom,Re=s.y<=a.y;return $e.some(WE.fixed(Tc("fixed",$e.some(d),Re?$e.some(b):$e.none(),$e.none(),Re?$e.none():$e.some(O))))},Sy=function(n,a,i){var s=n.element,f=Ua(bu(s,"position"),"fixed");return f?KE(s,a,i):CN(s,a,i)},xy=function(n,a){var i=n.element;return Gg(i,a).bind(function(s){return qE(i,s,a)})},wv=function(n,a,i){i.setDocked(!1),en(["left","right","top","bottom","position"],function(s){return g(n.element,s)}),a.onUndocked(n)},GE=function(n,a,i,s){var f=s.position==="fixed";i.setDocked(f),Wd(n.element,s);var d=f?a.onDocked:a.onUndocked;d(n)},SN=function(n,a,i,s,f){f===void 0&&(f=!1),a.contextual.each(function(d){d.lazyContext(n).each(function(b){var O=w6(b,s);if(O!==i.isVisible())if(i.setVisible(O),f&&!O)Bv(n.element,[d.fadeOutClass]),d.onHide(n);else{var Re=O?fh:y6;Re(n,d)}})})},XE=function(n,a,i){var s=a.lazyViewport(n),f=i.isDocked();f&&SN(n,a,i,s),Sy(n,s,i).each(function(d){d.fold(function(){return wv(n,a,i)},function(b){return GE(n,a,i,b)},function(b){SN(n,a,i,s,!0),GE(n,a,i,b)})})},E6=function(n,a,i){var s=n.element;i.setDocked(!1),xy(n,i).each(function(f){f.fold(function(){return wv(n,a,i)},function(d){return GE(n,a,i,d)},He)}),i.setVisible(!0),a.contextual.each(function(f){zl(s,[f.fadeInClass,f.fadeOutClass,f.transitionClass]),f.onShow(n)}),dh(n,a,i)},dh=function(n,a,i){n.getSystem().isConnected()&&XE(n,a,i)},YE=function(n,a,i){i.isDocked()&&E6(n,a,i)},k6=function(n,a,i){return i.isDocked()},A6=function(n,a,i,s){return i.setModes(s)},Xg=function(n,a,i){return i.getModes()},QE=Object.freeze({__proto__:null,refresh:dh,reset:YE,isDocked:k6,getModes:Xg,setModes:A6}),T6=function(n,a){return si([iu(_h(),function(i,s){n.contextual.each(function(f){if(Hs(i.element,f.transitionClass)){zl(i.element,[f.transitionClass,f.fadeInClass]);var d=a.isVisible()?f.onShown:f.onHidden;d(i)}s.stop()})}),wr(nw(),function(i,s){dh(i,n,a)}),wr(Yc(),function(i,s){YE(i,n,a)})])},_6=Object.freeze({__proto__:null,events:T6}),xN=[Pl("contextual",[Za("fadeInClass"),Za("fadeOutClass"),Za("transitionClass"),_s("lazyContext"),qo("onShow"),qo("onShown"),qo("onHide"),qo("onHidden")]),hi("lazyViewport",ju),kh("modes",["top","bottom"],ou),qo("onDocked"),qo("onUndocked")],O6=function(n){var a=Va(!1),i=Va(!0),s=Xi(),f=Va(n.modes),d=function(){return"docked:  "+a.get()+", visible: "+i.get()+", modes: "+f.get().join(",")};return yl({isDocked:a.get,setDocked:a.set,getInitialPos:s.get,setInitialPos:s.set,clearInitialPos:s.clear,isVisible:i.get,setVisible:i.set,getModes:f.get,setModes:f.set,readState:d})},M6=Object.freeze({__proto__:null,init:O6}),e=Bu({fields:xN,name:"docking",active:_6,apis:QE,state:M6}),r=Ke(ya("toolbar-height-change")),o={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},u="tox-tinymce--toolbar-sticky-on",l="tox-tinymce--toolbar-sticky-off",c=function(n,a){var i=$u(a),s=i.dom.defaultView.innerHeight,f=Ji(i),d=Gt.fromDom(n.elm),b=Rl(d),O=Ue(d),Re=b.y,Qe=Re+O,ot=Vr(a),ct=Ue(a),St=ot.top,At=St+ct,It=Math.abs(St-f.top)<2,Yt=Math.abs(At-(f.top+s))<2;if(It&&Re<At)Sc(f.left,Re-ct,i);else if(Yt&&Qe>St){var bn=Re-s+O+ct;Sc(f.left,bn,i)}},m=function(n,a){return ln(e.getModes(n),a)},S=function(n){var a=function(s){return ft(s)+(parseInt(Hi(s,"margin-top"),10)||0)+(parseInt(Hi(s,"margin-bottom"),10)||0)},i=n.element;ru(i).each(function(s){var f="padding-"+e.getModes(n)[0];if(e.isDocked(n)){var d=na(s);Qa(i,"width",d+"px"),Qa(s,f,a(i)+"px")}else g(i,"width"),g(s,f)})},_=function(n,a){a?(cu(n,o.fadeOutClass),Bv(n,[o.transitionClass,o.fadeInClass])):(cu(n,o.fadeInClass),Bv(n,[o.fadeOutClass,o.transitionClass]))},nt=function(n,a){var i=Gt.fromDom(n.getContainer());a?(Cu(i,u),cu(i,l)):(Cu(i,l),cu(i,u))},pt=function(n,a){var i=$u(a);rf(i).filter(function(s){return!bi(a,s)}).filter(function(s){return bi(s,Gt.fromDom(i.dom.body))||ss(n,s)}).each(function(){return nf(a)})},bt=function(n,a){return af(n).orThunk(function(){return a().toOptional().bind(function(i){return af(i.element)})})},Ct=function(n,a,i){n.inline||(a.header.isPositionedAtTop()||n.on("ResizeEditor",function(){i().each(e.reset)}),n.on("ResizeWindow ResizeEditor",function(){i().each(S)}),n.on("SkinLoaded",function(){i().each(function(s){e.isDocked(s)?e.reset(s):e.refresh(s)})}),n.on("FullscreenStateChanged",function(){i().each(e.reset)})),n.on("AfterScrollIntoView",function(s){i().each(function(f){e.refresh(f);var d=f.element;NA(d)&&c(s,d)})}),n.on("PostRender",function(){nt(n,!1)})},Pt=function(n){return n().map(e.isDocked).getOr(!1)},Ft=function(){var n;return[ul.config({channels:(n={},n[r()]={onReceive:S},n)})]},zt=function(n,a){var i=Xi(),s=a.getSink,f=function(O){s().each(function(Re){return O(Re.element)})},d=function(O){n.inline||S(O),nt(n,e.isDocked(O)),O.getSystem().broadcastOn([pp()],{}),s().each(function(Re){return Re.getSystem().broadcastOn([pp()],{})})},b=n.inline?[]:Ft();return Ht([to.config({}),e.config({contextual:ut({lazyContext:function(O){var Re=ft(O.element),Qe=n.inline?n.getContentAreaContainer():n.getContainer(),ot=au(Gt.fromDom(Qe)),ct=ot.height-Re,St=ot.y+(m(O,"top")?0:Re);return $e.some(Zi(ot.x,St,ot.width,ct))},onShow:function(){f(function(O){return _(O,!0)})},onShown:function(O){f(function(Re){return zl(Re,[o.transitionClass,o.fadeInClass])}),i.get().each(function(Re){pt(O.element,Re),i.clear()})},onHide:function(O){bt(O.element,s).fold(i.clear,i.set),f(function(Re){return _(Re,!1)})},onHidden:function(){f(function(O){return zl(O,[o.transitionClass])})}},o),lazyViewport:function(O){var Re=ju(),Qe=yP(n),ot=Re.y+(m(O,"top")?Qe:0),ct=Re.height-(m(O,"bottom")?Qe:0);return Zi(Re.x,ot,Re.width,ct)},modes:[a.header.getDockingMode()],onDocked:d,onUndocked:d})],b,!0)},Vt=Object.freeze({__proto__:null,setup:Ct,isDocked:Pt,getBehaviours:zt}),rn=function(n){var a=n.editor,i=n.sticky?zt:jE;return{uid:n.uid,dom:n.dom,components:n.components,behaviours:Hr(i(a,n.sharedBackstage))}},Qt=Ba([Za("type"),pl("items",Hy([zy([Za("name"),Is("items",ou)]),ou]))].concat(Rp)),On=function(n){return zi("GroupToolbarButton",Qt,n)},kn=[yi("text"),yi("tooltip"),yi("icon"),_s("fetch"),hi("onSetup",function(){return He})],mn=Ba(Ht([Za("type")],kn,!0)),Ln=function(n){return zi("menubutton",mn,n)},lr=Ba([Za("type"),yi("tooltip"),yi("icon"),yi("text"),Ov("select"),_s("fetch"),hi("onSetup",function(){return He}),ac("presets","normal",["normal","color","listpreview"]),En("columns",1),_s("onAction"),_s("onItemAction")]),Tr=function(n){return zi("SplitButton",lr,n)},$a=function(n,a){var i=function(f,d){var b=dn(d,function(O){var Re={type:"menubutton",text:O.text,fetch:function(ot){ot(O.getItems())}},Qe=Ln(Re).mapError(function(ot){return Im(ot)}).getOrDie();return ay(Qe,"tox-mbtn",a.backstage,$e.some("menuitem"))});eo.set(f,b)},s={focus:Da.focusIn,setMenus:i};return{uid:n.uid,dom:n.dom,components:[],behaviours:Hr([eo.config({}),mo("menubar-events",[go(function(f){n.onSetup(f)}),wr(Td(),function(f,d){Su(f.element,".tox-mbtn--active").each(function(b){tf(d.event.target,".tox-mbtn").each(function(O){bi(b,O)||f.getSystem().getByDom(b).each(function(Re){f.getSystem().getByDom(O).each(function(Qe){Rc.expand(Qe),Rc.close(Re),to.focus(Qe)})})})})}),wr(vb(),function(f,d){d.event.prevFocus.bind(function(b){return f.getSystem().getByDom(b).toOptional()}).each(function(b){d.event.newFocus.bind(function(O){return f.getSystem().getByDom(O).toOptional()}).each(function(O){Rc.isOpen(b)&&(Rc.expand(O),Rc.close(b))})})})]),Da.config({mode:"flow",selector:".tox-mbtn",onEscape:function(f){return n.onEscape(f),$e.some(!0)}}),Ui.config({})]),apis:s,domModification:{attributes:{role:"menubar"}}}},Zr=jl({factory:$a,name:"silver.Menubar",configFields:[yr("dom"),yr("uid"),yr("onEscape"),yr("backstage"),En("onSetup",He)],apis:{focus:function(n,a){n.focus(a)},setMenus:function(n,a,i){n.setMenus(a,i)}}}),vr=function(n,a){return a.getAnimationRoot.fold(function(){return n.element},function(i){return i(n)})},_a=function(n){return n.dimension.property},Or=function(n,a){return n.dimension.getDimension(a)},Jr=function(n,a){var i=vr(n,a);zl(i,[a.shrinkingClass,a.growingClass])},Dr=function(n,a){cu(n.element,a.openClass),Cu(n.element,a.closedClass),Qa(n.element,_a(a),"0px"),w(n.element)},Ur=function(n,a){cu(n.element,a.closedClass),Cu(n.element,a.openClass),g(n.element,_a(a))},fa=function(n,a,i,s){i.setCollapsed(),Qa(n.element,_a(a),Or(a,n.element)),w(n.element),Jr(n,a),Dr(n,a),a.onStartShrink(n),a.onShrunk(n)},Sr=function(n,a,i,s){var f=s.getOrThunk(function(){return Or(a,n.element)});i.setCollapsed(),Qa(n.element,_a(a),f),w(n.element);var d=vr(n,a);cu(d,a.growingClass),Cu(d,a.shrinkingClass),Dr(n,a),a.onStartShrink(n)},ra=function(n,a,i){var s=Or(a,n.element),f=s==="0px"?fa:Sr;f(n,a,i,$e.some(s))},xo=function(n,a,i){var s=vr(n,a),f=Hs(s,a.shrinkingClass),d=Or(a,n.element);Ur(n,a);var b=Or(a,n.element),O=function(){Qa(n.element,_a(a),d),w(n.element)},Re=function(){Dr(n,a)},Qe=f?O:Re;Qe(),cu(s,a.shrinkingClass),Cu(s,a.growingClass),Ur(n,a),Qa(n.element,_a(a),b),i.setExpanded(),a.onStartGrow(n)},Vo=function(n,a,i){if(i.isExpanded()){g(n.element,_a(a));var s=Or(a,n.element);Qa(n.element,_a(a),s)}},zo=function(n,a,i){i.isExpanded()||xo(n,a,i)},Iu=function(n,a,i){i.isExpanded()&&ra(n,a,i)},Ri=function(n,a,i){i.isExpanded()&&fa(n,a,i)},Ms=function(n,a,i){return i.isExpanded()},Tl=function(n,a,i){return i.isCollapsed()},xr=function(n,a,i){var s=vr(n,a);return Hs(s,a.growingClass)===!0},Fr=function(n,a,i){var s=vr(n,a);return Hs(s,a.shrinkingClass)===!0},Oa=function(n,a,i){return xr(n,a)||Fr(n,a)},zn=function(n,a,i){var s=i.isExpanded()?ra:xo;s(n,a,i)},_r=Object.freeze({__proto__:null,refresh:Vo,grow:zo,shrink:Iu,immediateShrink:Ri,hasGrown:Ms,hasShrunk:Tl,isGrowing:xr,isShrinking:Fr,isTransitioning:Oa,toggleGrow:zn,disableTransitions:Jr}),kr=function(n,a,i){var s=a.expanded;return Ac(s?{classes:[a.openClass],styles:{}}:{classes:[a.closedClass],styles:Lf(a.dimension.property,"0px")})},Na=function(n,a){return si([iu(_h(),function(i,s){var f=s.event.raw;if(f.propertyName===n.dimension.property){Jr(i,n),a.isExpanded()&&g(i.element,n.dimension.property);var d=a.isExpanded()?n.onGrown:n.onShrunk;d(i)}})])},Ia=Object.freeze({__proto__:null,exhibit:kr,events:Na}),ii=[yr("closedClass"),yr("openClass"),yr("shrinkingClass"),yr("growingClass"),ti("getAnimationRoot"),qo("onShrunk"),qo("onStartShrink"),qo("onGrown"),qo("onStartGrow"),En("expanded",!1),pl("dimension",nc("property",{width:[wi("property","width"),wi("getDimension",function(n){return na(n)+"px"})],height:[wi("property","height"),wi("getDimension",function(n){return Ue(n)+"px"})]}))],Au=function(n){var a=Va(n.expanded),i=function(){return"expanded: "+a.get()};return yl({isExpanded:function(){return a.get()===!0},isCollapsed:function(){return a.get()===!1},setCollapsed:et(a.set,!1),setExpanded:et(a.set,!0),readState:i})},mu=Object.freeze({__proto__:null,init:Au}),ys=Bu({fields:ii,name:"sliding",active:Ia,apis:_r,state:mu}),ws="container",Xs=[Eu("slotBehaviours",[])],pu=function(n){return"<alloy.field."+n+">"},Xl=function(n){var a=function(){var d=[],b=function(O,Re){return d.push(O),AC(ws,pu(O),Re)};return{slot:b,record:Ke(d)}}(),i=n(a),s=a.record(),f=dn(s,function(d){return hs({name:d,pname:pu(d)})});return DC(ws,Xs,f,Ys,i)},Ys=function(n,a){var i=function(Yt){return cA(n)},s=function(Yt,bn){return li(Yt,n,bn)},f=function(Yt,bn){return function(jt,Sn){return li(jt,n,Sn).map(function(Xn){return Yt(Xn,Sn)}).getOr(bn)}},d=function(Yt){return function(bn,jt){en(jt,function(Sn){return Yt(bn,Sn)})}},b=function(Yt,bn){return Ti(Yt.element,"aria-hidden")!=="true"},O=function(Yt,bn){if(!b(Yt)){var jt=Yt.element;g(jt,"display"),gu(jt,"aria-hidden"),za(Yt,mb(),{name:bn,visible:!0})}},Re=function(Yt,bn){if(b(Yt)){var jt=Yt.element;Qa(jt,"display","none"),ho(jt,"aria-hidden","true"),za(Yt,mb(),{name:bn,visible:!1})}},Qe=f(b,!1),ot=f(Re),ct=d(ot),St=function(Yt){return ct(Yt,i())},At=f(O),It={getSlotNames:i,getSlot:s,isShowing:Qe,hideSlot:ot,hideAllSlots:St,showSlot:At};return{uid:n.uid,dom:n.dom,components:a,behaviours:i0(n.slotBehaviours),apis:It}},Jf=br({getSlotNames:function(n,a){return n.getSlotNames(a)},getSlot:function(n,a,i){return n.getSlot(a,i)},isShowing:function(n,a,i){return n.isShowing(a,i)},hideSlot:function(n,a,i){return n.hideSlot(a,i)},hideAllSlots:function(n,a){return n.hideAllSlots(a)},showSlot:function(n,a,i){return n.showSlot(a,i)}},function(n){return Gi(n)}),Uo=ut(ut({},Jf),{sketch:Xl}),Ci=Ba([yi("icon"),yi("tooltip"),hi("onShow",He),hi("onHide",He),hi("onSetup",function(){return He})]),Tu=function(n){return zi("sidebar",Ci,n)},Ef=function(n){var a=n.ui.registry.getAll().sidebars;en(Rn(a),function(i){var s=a[i],f=function(){return Ua($e.from(n.queryCommandValue("ToggleSidebar")),i)};n.ui.registry.addToggleButton(i,{icon:s.icon,tooltip:s.tooltip,onAction:function(d){n.execCommand("ToggleSidebar",!1,i),d.setActive(f())},onSetup:function(d){var b=function(){return d.setActive(f())};return n.on("ToggleSidebar",b),function(){n.off("ToggleSidebar",b)}}})})},kf=function(n){return{element:function(){return n.element.dom}}},Af=function(n,a){var i=dn(Rn(a),function(s){var f=a[s],d=Kc(Tu(f));return{name:s,getApi:kf,onSetup:d.onSetup,onShow:d.onShow,onHide:d.onHide}});return dn(i,function(s){var f=Va(He);return n.slot(s.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Fp.unnamedEvents([$p(s,f),Eg(s,f),wr(mb(),function(d,b){var O=b.event,Re=Gn(i,function(Qe){return Qe.name===O.name});Re.each(function(Qe){var ot=O.visible?Qe.onShow:Qe.onHide;ot(Qe.getApi(d))})})])})})},Cv=function(n){return Uo.sketch(function(a){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:Af(a,n),slotBehaviours:Fp.unnamedEvents([go(function(i){return Uo.hideAllSlots(i)})])}})},JE=function(n,a){var i=Oo.getCurrent(n);i.each(function(s){return eo.set(s,[Cv(a)])})},ZE=function(n,a){var i=Oo.getCurrent(n);i.each(function(s){var f=Oo.getCurrent(s);f.each(function(d){ys.hasGrown(s)?Uo.isShowing(d,a)?ys.shrink(s):(Uo.hideAllSlots(d),Uo.showSlot(d,a)):(Uo.hideAllSlots(d),Uo.showSlot(d,a),ys.grow(s))})})},D6=function(n){var a=Oo.getCurrent(n);return a.bind(function(i){var s=ys.isGrowing(i)||ys.hasGrown(i);if(s){var f=Oo.getCurrent(i);return f.bind(function(d){return Gn(Uo.getSlotNames(d),function(b){return Uo.isShowing(d,b)})})}else return $e.none()})},Ey=ya("FixSizeEvent"),ky=ya("AutoSizeEvent"),N6=function(n){return{uid:n.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Hr([Ui.config({}),to.config({}),ys.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(a){var i=Oo.getCurrent(a);i.each(Uo.hideAllSlots),$o(a,ky)},onGrown:function(a){$o(a,ky)},onStartGrow:function(a){za(a,Ey,{width:bu(a.element,"width").getOr("")})},onStartShrink:function(a){za(a,Ey,{width:na(a.element)+"px"})}}),eo.config({}),Oo.config({find:function(a){var i=eo.contents(a);return fr(i)}})])}],behaviours:Hr([xf.childAt(0),mo("sidebar-sliding-events",[wr(Ey,function(a,i){Qa(a.element,"width",i.event.width)}),wr(ky,function(a,i){g(a.element,"width")})])])}},EN=function(n,a,i,s){ho(n.element,"aria-busy",!0);var f=a.getRoot(n).getOr(n),d=Hr([Da.config({mode:"special",onTab:function(){return $e.some(!0)},onShiftTab:function(){return $e.some(!0)}}),to.config({})]),b=s(f,d),O=f.getSystem().build(b);eo.append(f,$l(O)),O.hasConfigured(Da)&&a.focus&&Da.focusIn(O),i.isBlocked()||a.onBlock(n),i.blockWith(function(){return eo.remove(f,O)})},L6=function(n,a,i){gu(n.element,"aria-busy"),i.isBlocked()&&a.onUnblock(n),i.clear()},R6=Object.freeze({__proto__:null,block:EN,unblock:L6}),B6=[hi("getRoot",$e.none),$i("focus",!0),qo("onBlock"),qo("onUnblock")],P6=function(){var n=Vw(),a=function(i){n.set({destroy:i})};return yl({readState:n.isSet,blockWith:a,clear:n.clear,isBlocked:n.isSet})},Cm=Object.freeze({__proto__:null,init:P6}),Zf=Bu({fields:B6,name:"blocking",apis:R6,state:Cm}),yn=function(n){return function(a,i){return{dom:{tag:"div",attributes:{"aria-label":n.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:dd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}},qn=function(n){return Oo.getCurrent(n).each(function(a){return nf(a.element)})},Lr=function(n,a){var i="tabindex",s="data-mce-"+i;$e.from(n.iframeElement).map(Gt.fromDom).each(function(f){a?(qi(f,i).each(function(d){return ho(f,s,d)}),ho(f,i,-1)):(gu(f,i),qi(f,s).each(function(d){ho(f,i,d),gu(f,s)}))})},jr=function(n,a,i,s){var f=a.element;if(Lr(n,i),i)Zf.block(a,yn(s)),g(f,"display"),gu(f,"aria-hidden"),n.hasFocus()&&qn(a);else{var d=Oo.getCurrent(a).exists(function(b){return Pw(b.element)});Zf.unblock(a),Qa(f,"display","none"),ho(f,"aria-hidden","true"),d&&n.focus()}},yo=function(n){return{uid:n.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Hr([eo.config({}),Zf.config({focus:!1}),Oo.config({find:function(a){return fr(a.components())}})]),components:[]}},Go=function(n){return n.type==="focusin"},Di=function(n){if(Go(n)){var a=n.composed?fr(n.composedPath()):$e.from(n.target);return a.map(Gt.fromDom).filter(mt).exists(function(i){return Hs(i,"mce-pastebin")})}else return!1},Sv=function(n,a,i){var s=Va(!1),f=Xi(),d=function(O){s.get()&&!Di(O)&&(O.preventDefault(),qn(a()),n.editorManager.setActive(n))};n.inline||n.on("PreInit",function(){n.dom.bind(n.getWin(),"focusin",d),n.on("BeforeExecCommand",function(O){O.command.toLowerCase()==="mcefocus"&&O.value!==!0&&d(O)})});var b=function(O){O!==s.get()&&(s.set(O),jr(n,a(),O,i.providers),n.fire("AfterProgressState",{state:O}))};n.on("ProgressState",function(O){if(f.on(mf.clearTimeout),Be(O.time)){var Re=mf.setEditorTimeout(n,function(){return b(O.state)},O.time);f.set(Re)}else b(O.state),f.clear()})},I$=function(n,a){var i={len:0,list:[]},s=er(n,function(f,d){var b=a(d,f.len);return b.fold(Ke(f),function(O){return{len:O.finish,list:f.list.concat([O])}})},i);return s.list},I6=function(n,a,i){return{within:n,extra:a,withinWidth:i}},E8=function(n,a,i){var s=I$(n,function(O,Re){var Qe=i(O);return $e.some({element:O,start:Re,finish:Re+Qe,width:Qe})}),f=cn(s,function(O){return O.finish<=a}),d=hn(f,function(O,Re){return O+Re.width},0),b=s.slice(f.length);return{within:f,extra:b,withinWidth:d}},kN=function(n){return dn(n,function(a){return a.element})},F$=function(n,a,i){var s=kN(n.concat(a));return I6(s,[],i)},H$=function(n,a,i,s){var f=kN(n).concat([i]);return I6(f,kN(a),s)},z$=function(n,a,i){return I6(kN(n),[],i)},$$=function(n,a,i){var s=E8(a,n,i);return s.extra.length===0?$e.some(s):$e.none()},V$=function(n,a,i,s){var f=$$(n,a,i).getOrThunk(function(){return E8(a,n-i(s),i)}),d=f.within,b=f.extra,O=f.withinWidth;return b.length===1&&b[0].width<=i(s)?F$(d,b,O):b.length>=1?H$(d,b,s,O):z$(d,b,O)},k8=function(n,a){var i=dn(a,function(s){return $l(s)});Fc.setGroups(n,i)},U$=function(n){return Tn(n,function(a){return af(a.element).bind(function(i){return a.getSystem().getByDom(i).toOptional()})})},A8=function(n,a,i){var s=a.builtGroups.get();if(s.length!==0){var f=Wf(n,a,"primary"),d=Qi.getCoupled(n,"overflowGroup");Qa(f.element,"visibility","hidden");var b=s.concat([d]),O=U$(b);i([]),k8(f,b);var Re=na(f.element),Qe=V$(Re,a.builtGroups.get(),function(ot){return na(ot.element)},d);Qe.extra.length===0?(eo.remove(f,d),i([])):(k8(f,Qe.within),i(Qe.extra)),g(f.element,"visibility"),w(f.element),O.each(to.focus)}},T8=Ke([Eu("splitToolbarBehaviours",[Qi]),rl("builtGroups",function(){return Va([])})]),j$=Ke([Fv(["overflowToggledClass"]),Ov("getOverflowBounds"),yr("lazySink"),rl("overflowGroups",function(){return Va([])})].concat(T8())),W$=Ke([hs({factory:Fc,schema:wm(),name:"primary"}),_c({schema:wm(),name:"overflow"}),_c({name:"overflow-button"}),_c({name:"overflow-group"})]),F6=Ke(function(n,a){sa(n,Math.floor(a))}),q$=Ke([Fv(["toggledClass"]),yr("lazySink"),_s("fetch"),Ov("getBounds"),Pl("fireDismissalEventInstead",[En("event",Qc())]),qd()]),K$=Ke([_c({name:"button",overrides:function(n){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Hr([Mo.config({toggleClass:n.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),_c({factory:Fc,schema:wm(),name:"toolbar",overrides:function(n){return{toolbarBehaviours:Hr([Da.config({mode:"cyclic",onEscape:function(a){return li(a,n,"button").each(to.focus),$e.none()}})])}}})]),_8=function(n,a){var i=Qi.getCoupled(n,"toolbarSandbox");Do.isOpen(i)?Do.close(i):Do.open(i,a.toolbar())},H6=function(n,a,i,s){var f=i.getBounds.map(function(b){return b()}),d=i.lazySink(n).getOrDie();Yi.positionWithinBounds(d,a,{anchor:{type:"hotspot",hotspot:n,layouts:s,overrides:{maxWidthFunction:F6()}}},f)},O8=function(n,a,i,s,f){Fc.setGroups(a,f),H6(n,a,i,s),Mo.on(n)},G$=function(n,a,i){var s=Pv(),f=function(b,O){i.fetch().get(function(Re){O8(n,O,i,a.layouts,Re),s.link(n.element),Da.focusIn(O)})},d=function(){Mo.off(n),to.focus(n),s.unlink(n.element)};return{dom:{tag:"div",attributes:{id:s.id}},behaviours:Hr([Da.config({mode:"special",onEscape:function(b){return Do.close(b),$e.some(!0)}}),Do.config({onOpen:f,onClose:d,isPartOf:function(b,O,Re){return Iv(O,Re)||Iv(n,Re)},getAttachPoint:function(){return i.lazySink(n).getOrDie()}}),ul.config({channels:ut(ut({},Sl(ut({isExtraPart:xt},i.fireDismissalEventInstead.map(function(b){return{fireEventInstead:{event:b.event}}}).getOr({})))),Kv({doReposition:function(){Do.getState(Qi.getCoupled(n,"toolbarSandbox")).each(function(b){H6(n,b,i,a.layouts)})}}))})])}},X$=function(n,a,i,s){return ut(ut({},qs.sketch(ut(ut({},s.button()),{action:function(f){_8(f,s)},buttonBehaviours:fc.augment({dump:s.button().buttonBehaviours},[Qi.config({others:{toolbarSandbox:function(f){return G$(f,i,n)}}})])}))),{apis:{setGroups:function(f,d){Do.getState(Qi.getCoupled(f,"toolbarSandbox")).each(function(b){O8(f,b,n,i.layouts,d)})},reposition:function(f){Do.getState(Qi.getCoupled(f,"toolbarSandbox")).each(function(d){H6(f,d,n,i.layouts)})},toggle:function(f){_8(f,s)},getToolbar:function(f){return Do.getState(Qi.getCoupled(f,"toolbarSandbox"))},isOpen:function(f){return Do.isOpen(Qi.getCoupled(f,"toolbarSandbox"))}}})},Yg=Ws({name:"FloatingToolbarButton",factory:X$,configFields:q$(),partFields:K$(),apis:{setGroups:function(n,a,i){n.setGroups(a,i)},reposition:function(n,a){n.reposition(a)},toggle:function(n,a){n.toggle(a)},getToolbar:function(n,a){return n.getToolbar(a)},isOpen:function(n,a){return n.isOpen(a)}}}),Y$=Ke([yr("items"),Fv(["itemSelector"]),Eu("tgroupBehaviours",[Da])]),Q$=Ke([d0({name:"items",unit:"item"})]),J$=function(n,a,i,s){return{uid:n.uid,dom:n.dom,components:a,behaviours:Ku(n.tgroupBehaviours,[Da.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}},AN=Ws({name:"ToolbarGroup",configFields:Y$(),partFields:Q$(),factory:J$}),M8=function(n){return dn(n,function(a){return $l(a)})},D8=function(n,a,i){A8(n,i,function(s){i.overflowGroups.set(s),a.getOpt(n).each(function(f){Yg.setGroups(f,M8(s))})})},Z$=function(n,a,i,s){var f=Ko(Yg.sketch({fetch:function(){return as.nu(function(d){d(M8(n.overflowGroups.get()))})},layouts:{onLtr:function(){return[ms,vs]},onRtl:function(){return[vs,ms]},onBottomLtr:function(){return[Vs,ol]},onBottomRtl:function(){return[ol,Vs]}},getBounds:i.getOverflowBounds,lazySink:n.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:n.markers.overflowToggledClass},parts:{button:s["overflow-button"](),toolbar:s.overflow()}}));return{uid:n.uid,dom:n.dom,components:a,behaviours:Ku(n.splitToolbarBehaviours,[Qi.config({others:{overflowGroup:function(){return AN.sketch(ut(ut({},s["overflow-group"]()),{items:[f.asSpec()]}))}}})]),apis:{setGroups:function(d,b){n.builtGroups.set(dn(b,d.getSystem().build)),D8(d,f,n)},refresh:function(d){return D8(d,f,n)},toggle:function(d){f.getOpt(d).each(function(b){Yg.toggle(b)})},isOpen:function(d){return f.getOpt(d).map(Yg.isOpen).getOr(!1)},reposition:function(d){f.getOpt(d).each(function(b){Yg.reposition(b)})},getOverflow:function(d){return f.getOpt(d).bind(Yg.getToolbar)}},domModification:{attributes:{role:"group"}}}},N8=Ws({name:"SplitFloatingToolbar",configFields:j$(),partFields:W$(),factory:Z$,apis:{setGroups:function(n,a,i){n.setGroups(a,i)},refresh:function(n,a){n.refresh(a)},reposition:function(n,a){n.reposition(a)},toggle:function(n,a){n.toggle(a)},isOpen:function(n,a){return n.isOpen(a)},getOverflow:function(n,a){return n.getOverflow(a)}}}),e7=Ke([Fv(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),qo("onOpened"),qo("onClosed")].concat(T8())),t7=Ke([hs({factory:Fc,schema:wm(),name:"primary"}),hs({factory:Fc,schema:wm(),name:"overflow",overrides:function(n){return{toolbarBehaviours:Hr([ys.config({dimension:{property:"height"},closedClass:n.markers.closedClass,openClass:n.markers.openClass,shrinkingClass:n.markers.shrinkingClass,growingClass:n.markers.growingClass,onShrunk:function(a){li(a,n,"overflow-button").each(function(i){Mo.off(i),to.focus(i)}),n.onClosed(a)},onGrown:function(a){Da.focusIn(a),n.onOpened(a)},onStartGrow:function(a){li(a,n,"overflow-button").each(Mo.on)}}),Da.config({mode:"acyclic",onEscape:function(a){return li(a,n,"overflow-button").each(to.focus),$e.some(!0)}})])}}}),_c({name:"overflow-button",overrides:function(n){return{buttonBehaviours:Hr([Mo.config({toggleClass:n.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),_c({name:"overflow-group"})]),n7=function(n,a){return li(n,a,"overflow").map(ys.hasGrown).getOr(!1)},L8=function(n,a){li(n,a,"overflow-button").bind(function(){return li(n,a,"overflow")}).each(function(i){z6(n,a),ys.toggleGrow(i)})},z6=function(n,a){li(n,a,"overflow").each(function(i){A8(n,a,function(s){var f=dn(s,function(d){return $l(d)});Fc.setGroups(i,f)}),li(n,a,"overflow-button").each(function(s){ys.hasGrown(i)&&Mo.on(s)}),ys.refresh(i)})},r7=function(n,a,i,s){var f="alloy.toolbar.toggle",d=function(b,O){var Re=dn(O,b.getSystem().build);n.builtGroups.set(Re)};return{uid:n.uid,dom:n.dom,components:a,behaviours:Ku(n.splitToolbarBehaviours,[Qi.config({others:{overflowGroup:function(b){return AN.sketch(ut(ut({},s["overflow-group"]()),{items:[qs.sketch(ut(ut({},s["overflow-button"]()),{action:function(O){$o(b,f)}}))]}))}}}),mo("toolbar-toggle-events",[wr(f,function(b){L8(b,n)})])]),apis:{setGroups:function(b,O){d(b,O),z6(b,n)},refresh:function(b){return z6(b,n)},toggle:function(b){return L8(b,n)},isOpen:function(b){return n7(b,n)}},domModification:{attributes:{role:"group"}}}},$6=Ws({name:"SplitSlidingToolbar",configFields:e7(),partFields:t7(),factory:r7,apis:{setGroups:function(n,a,i){n.setGroups(a,i)},refresh:function(n,a){n.refresh(a)},toggle:function(n,a){n.toggle(a)},isOpen:function(n,a){return n.isOpen(a)}}}),R8=function(n){var a=n.title.fold(function(){return{}},function(i){return{attributes:{title:i}}});return{dom:ut({tag:"div",classes:["tox-toolbar__group"]},a),components:[AN.parts.items({})],items:n.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Hr([Ui.config({}),to.config({})])}},TN=function(n){return AN.sketch(R8(n))},B8=function(n,a){var i=go(function(s){var f=dn(n.initGroups,TN);Fc.setGroups(s,f)});return Hr([vc.toolbarButton(n.providers.isDisabled),vu(),Da.config({mode:a,onEscape:n.onEscape,selector:".tox-toolbar__group"}),mo("toolbar-events",[i])])},P8=function(n){var a=n.cyclicKeying?"cyclic":"acyclic";return{uid:n.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":R8({title:$e.none(),items:[]}),"overflow-button":CE({name:"more",icon:$e.some("more-drawer"),disabled:!1,tooltip:$e.some("More..."),primary:!1,borderless:!1},$e.none(),n.providers)},splitToolbarBehaviours:B8(n,a)}},a7=function(n){var a=P8(n),i=4,s=N8.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return N8.sketch(ut(ut({},a),{lazySink:n.getSink,getOverflowBounds:function(){var f=n.moreDrawerData.lazyHeader().element,d=Rl(f),b=Zn(f),O=Rl(b),Re=Math.max(b.dom.scrollHeight,O.height);return Zi(d.x+i,O.y,d.width-i*2,Re)},parts:ut(ut({},a.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n.attributes}}}),components:[s],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},o7=function(n){var a=$6.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),i=$6.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),s=P8(n);return $6.sketch(ut(ut({},s),{components:[a,i],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(f){f.getSystem().broadcastOn([r()],{type:"opened"})},onClosed:function(f){f.getSystem().broadcastOn([r()],{type:"closed"})}}))},_N=function(n){var a=n.cyclicKeying?"cyclic":"acyclic";return Fc.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(n.type===Wl.scrolling?["tox-toolbar--scrolling"]:[])},components:[Fc.parts.groups({})],toolbarBehaviours:B8(n,a)})},i7=function(n,a,i){var s={getSocket:function(f){return cl.getPart(f,n,"socket")},setSidebar:function(f,d){cl.getPart(f,n,"sidebar").each(function(b){return JE(b,d)})},toggleSidebar:function(f,d){cl.getPart(f,n,"sidebar").each(function(b){return ZE(b,d)})},whichSidebar:function(f){return cl.getPart(f,n,"sidebar").bind(D6).getOrNull()},getHeader:function(f){return cl.getPart(f,n,"header")},getToolbar:function(f){return cl.getPart(f,n,"toolbar")},setToolbar:function(f,d){cl.getPart(f,n,"toolbar").each(function(b){b.getApis().setGroups(b,d)})},setToolbars:function(f,d){cl.getPart(f,n,"multiple-toolbar").each(function(b){UE.setItems(b,d)})},refreshToolbar:function(f){var d=cl.getPart(f,n,"toolbar");d.each(function(b){return b.getApis().refresh(b)})},toggleToolbarDrawer:function(f){cl.getPart(f,n,"toolbar").each(function(d){pi(d.getApis().toggle,function(b){return b(d)})})},isToolbarDrawerToggled:function(f){return cl.getPart(f,n,"toolbar").bind(function(d){return $e.from(d.getApis().isOpen).map(function(b){return b(d)})}).getOr(!1)},getThrobber:function(f){return cl.getPart(f,n,"throbber")},focusToolbar:function(f){var d=cl.getPart(f,n,"toolbar").orThunk(function(){return cl.getPart(f,n,"multiple-toolbar")});d.each(function(b){Da.focusIn(b)})},setMenubar:function(f,d){cl.getPart(f,n,"menubar").each(function(b){Zr.setMenus(b,d)})},focusMenubar:function(f){cl.getPart(f,n,"menubar").each(function(d){Zr.focus(d)})}};return{uid:n.uid,dom:n.dom,components:a,apis:s,behaviours:n.behaviours}},u7=ym.optional({factory:Zr,name:"menubar",schema:[yr("backstage")]}),s7=function(n){return n.type===Wl.sliding?o7:n.type===Wl.floating?a7:_N},l7=ym.optional({factory:{sketch:function(n){return UE.sketch({uid:n.uid,dom:n.dom,listBehaviours:Hr([Da.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return _N({type:n.type,uid:ya("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:n.providers,onEscape:function(){return n.onEscape(),$e.some(!0)}})},setupItem:function(a,i,s,f){Fc.setGroups(i,s)},shell:!0})}},name:"multiple-toolbar",schema:[yr("dom"),yr("onEscape")]}),c7=ym.optional({factory:{sketch:function(n){var a=s7(n),i={type:n.type,uid:n.uid,onEscape:function(){return n.onEscape(),$e.some(!0)},cyclicKeying:!1,initGroups:[],getSink:n.getSink,providers:n.providers,moreDrawerData:{lazyToolbar:n.lazyToolbar,lazyMoreButton:n.lazyMoreButton,lazyHeader:n.lazyHeader},attributes:n.attributes};return a(i)}},name:"toolbar",schema:[yr("dom"),yr("onEscape"),yr("getSink")]}),f7=ym.optional({factory:{sketch:rn},name:"header",schema:[yr("dom")]}),d7=ym.optional({name:"socket",schema:[yr("dom")]}),v7=ym.optional({factory:{sketch:N6},name:"sidebar",schema:[yr("dom")]}),m7=ym.optional({factory:{sketch:yo},name:"throbber",schema:[yr("dom")]}),eu=Ws({name:"OuterContainer",factory:i7,configFields:[yr("dom"),yr("behaviours")],partFields:[f7,u7,c7,l7,d7,v7,m7],apis:{getSocket:function(n,a){return n.getSocket(a)},setSidebar:function(n,a,i){n.setSidebar(a,i)},toggleSidebar:function(n,a,i){n.toggleSidebar(a,i)},whichSidebar:function(n,a){return n.whichSidebar(a)},getHeader:function(n,a){return n.getHeader(a)},getToolbar:function(n,a){return n.getToolbar(a)},setToolbar:function(n,a,i){var s=dn(i,function(f){return TN(f)});n.setToolbar(a,s)},setToolbars:function(n,a,i){var s=dn(i,function(f){return dn(f,TN)});n.setToolbars(a,s)},refreshToolbar:function(n,a){return n.refreshToolbar(a)},toggleToolbarDrawer:function(n,a){n.toggleToolbarDrawer(a)},isToolbarDrawerToggled:function(n,a){return n.isToolbarDrawerToggled(a)},getThrobber:function(n,a){return n.getThrobber(a)},setMenubar:function(n,a,i){n.setMenubar(a,i)},focusMenubar:function(n,a){n.focusMenubar(a)},focusToolbar:function(n,a){n.focusToolbar(a)}}}),p7="file edit view insert format tools table help",I8={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},h7=function(n,a,i){var s=nx(i).split(/[ ,]/);return{text:n.title,getItems:function(){return Mn(n.items,function(f){var d=f.toLowerCase();return d.trim().length===0?[]:on(s,function(b){return b===d})?[]:d==="separator"||d==="|"?[{type:"separator"}]:a.menuItems[d]?[a.menuItems[d]]:[]})}}},V6=function(n){return typeof n=="string"?n.split(" "):n},F8=function(n,a){var i=ut(ut({},I8),a.menus),s=Rn(a.menus).length>0,f=a.menubar===void 0||a.menubar===!0?V6(p7):V6(a.menubar===!1?"":a.menubar),d=cn(f,function(O){var Re=pr(I8,O);return s?Re||jn(a.menus,O).exists(function(Qe){return pr(Qe,"items")}):Re}),b=dn(d,function(O){var Re=i[O];return h7({title:Re.title,items:V6(Re.items)},a,n)});return cn(b,function(O){var Re=function(Qe){return Qe.type!=="separator"};return O.getItems().length>0&&on(O.getItems(),Re)})},H8=function(n){var a=function(){n._skinLoaded=!0,KP(n)};return function(){n.initialized?a():n.on("init",a)}},g7=function(n,a){return function(){return GP(n,{message:a})}},z8=function(n,a,i){return new om(function(s,f){i.load(a,s,f),n.on("remove",function(){return i.unload(a)})})},b7=function(n,a){var i=a+"/skin.min.css";return z8(n,i,n.ui.styleSheetLoader)},y7=function(n,a){var i=Sa(Gt.fromDom(n.getElement()));if(i){var s=a+"/skin.shadowdom.min.css";return z8(n,s,Sg.DOM.styleSheetLoader)}else return om.resolve()},$8=function(n,a){var i=lP(a);i&&a.contentCSS.push(i+(n?"/content.inline":"/content")+".min.css"),fP(a)===!1&&We(i)?om.all([b7(a,i),y7(a,i)]).then(H8(a),g7(a,"Skin could not be loaded")):H8(a)()},w7=et($8,!1),C7=et($8,!0),ON=function(n,a){return function(i){var s=up(),f=function(){i.setActive(n.formatter.match(a));var d=n.formatter.formatChanged(a,i.setActive);s.set(d)};return n.initialized?f():n.once("init",f),function(){n.off("init",f),s.clear()}}},MN=function(n,a,i){return function(s){var f=function(){return i(s)},d=function(){i(s),n.on(a,f)};return n.initialized?d():n.once("init",d),function(){n.off("init",d),n.off(a,f)}}},V8=function(n){return function(a){return function(){n.undoManager.transact(function(){n.focus(),n.execCommand("mceToggleFormat",!1,a.format)})}}},Tf=function(n,a){return function(){return n.execCommand(a)}},S7=function(n,a,i){var s=function(O,Re,Qe,ot){var ct=a.shared.providers.translate(O.title);if(O.type==="separator")return $e.some({type:"separator",text:ct});if(O.type==="submenu"){var St=Mn(O.getStyleItems(),function(At){return f(At,Re,ot)});return Re===0&&St.length<=0?$e.none():$e.some({type:"nestedmenuitem",text:ct,disabled:St.length<=0,getSubmenuItems:function(){return Mn(O.getStyleItems(),function(At){return f(At,Re,ot)})}})}else return $e.some(ut({type:"togglemenuitem",text:ct,icon:O.icon,active:O.isSelected(ot),disabled:Qe,onAction:i.onAction(O)},O.getStylePreview().fold(function(){return{}},function(At){return{meta:{style:At}}})))},f=function(O,Re,Qe){var ot=O.type==="formatter"&&i.isInvalid(O);return Re===0?ot?[]:s(O,Re,!1,Qe).toArray():s(O,Re,ot,Qe).toArray()},d=function(O){var Re=i.getCurrentValue(),Qe=i.shouldHide?0:1;return Mn(O,function(ot){return f(ot,Qe,Re)})},b=function(O,Re){return function(Qe,ot){var ct=Re(),St=d(ct),At=lh(St,gf.CLOSE_ON_EXECUTE,O,!1);ot(At)}};return{validateItems:d,getFetch:b}},Ay=function(n,a,i){var s=i.dataset,f=s.type==="basic"?function(){return dn(s.data,function(d){return aN(d,i.isSelectedFor,i.getPreviewFor)})}:s.getData;return{items:S7(n,a,i),getStyleItems:f}},e2=function(n,a,i){var s=Ay(n,a,i),f=s.items,d=s.getStyleItems,b=function(Re){return{getComponent:Ke(Re)}},O=MN(n,"NodeChange",function(Re){var Qe=Re.getComponent();i.updateText(Qe)});return yE({text:i.icon.isSome()?$e.none():i.text,icon:i.icon,tooltip:$e.from(i.tooltip),role:$e.none(),fetch:f.getFetch(a,d),onSetup:O,getApi:b,columns:1,presets:"normal",classes:i.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",a.shared)},x7=function(n){return dn(n,function(a){var i=a,s=a,f=a.split("=");return f.length>1&&(i=f[0],s=f[1]),{title:i,format:s}})},E7=function(n){return{type:"basic",data:n}},Ty;(function(n){n[n.SemiColon=0]="SemiColon",n[n.Space=1]="Space"})(Ty||(Ty={}));var k7=function(n,a){return a===Ty.SemiColon?n.replace(/;$/,"").split(";"):n.split(" ")},U6=function(n,a,i,s){var f=n.getParam(a,i,"string"),d=x7(k7(f,s));return{type:"basic",data:d}},j6=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],U8=function(n){var a=function(){return Gn(j6,function(O){return n.formatter.match(O.format)})},i=function(O){return function(){return n.formatter.match(O)}},s=function(O){return $e.none},f=function(O){var Re=a(),Qe=Re.fold(Ke("left"),function(ot){return ot.title.toLowerCase()});za(O,bE,{icon:"align-"+Qe})},d=E7(j6),b=function(O){return function(){return Gn(j6,function(Re){return Re.format===O.format}).each(function(Re){return n.execCommand(Re.command)})}};return{tooltip:"Align",text:$e.none(),icon:$e.some("align-left"),isSelectedFor:i,getCurrentValue:$e.none,getPreviewFor:s,onAction:b,updateText:f,dataset:d,shouldHide:!1,isInvalid:function(O){return!n.formatter.canApply(O.format)}}},A7=function(n,a){return e2(n,a,U8(n))},T7=function(n,a){var i=Ay(n,a,U8(n));n.ui.registry.addNestedMenuItem("align",{text:a.shared.providers.translate("Align"),getSubmenuItems:function(){return i.items.validateItems(i.getStyleItems())}})},_7="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",O7=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],j8=function(n){var a=n.split(/\s*,\s*/);return dn(a,function(i){return i.replace(/^['"]+|['"]+$/g,"")})},M7=function(n){var a=function(){var i=j8(n.toLowerCase());return Rr(O7,function(s){return i.indexOf(s.toLowerCase())>-1})};return n.indexOf("-apple-system")===0&&a()},W8=function(n){var a="System Font",i=function(){var Qe=function(It){return It?j8(It)[0]:""},ot=n.queryCommandValue("FontName"),ct=Re.data,St=ot?ot.toLowerCase():"",At=Gn(ct,function(It){var Yt=It.format;return Yt.toLowerCase()===St||Qe(Yt).toLowerCase()===Qe(St).toLowerCase()}).orThunk(function(){return oi(M7(St),{title:a,format:St})});return{matchOpt:At,font:ot}},s=function(Qe){return function(ot){return ot.exists(function(ct){return ct.format===Qe})}},f=function(){var Qe=i().matchOpt;return Qe},d=function(Qe){return function(){return $e.some({tag:"div",styles:Qe.indexOf("dings")===-1?{"font-family":Qe}:{}})}},b=function(Qe){return function(){n.undoManager.transact(function(){n.focus(),n.execCommand("FontName",!1,Qe.format)})}},O=function(Qe){var ot=i(),ct=ot.matchOpt,St=ot.font,At=ct.fold(Ke(St),function(It){return It.title});za(Qe,mm,{text:At})},Re=U6(n,"font_formats",_7,Ty.SemiColon);return{tooltip:"Fonts",text:$e.some(a),icon:$e.none(),isSelectedFor:s,getCurrentValue:f,getPreviewFor:d,onAction:b,updateText:O,dataset:Re,shouldHide:!1,isInvalid:xt}},D7=function(n,a){return e2(n,a,W8(n))},N7=function(n,a){var i=Ay(n,a,W8(n));n.ui.registry.addNestedMenuItem("fontformats",{text:a.shared.providers.translate("Fonts"),getSubmenuItems:function(){return i.items.validateItems(i.getStyleItems())}})},L7="8pt 10pt 12pt 14pt 18pt 24pt 36pt",R7={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},B7={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},P7=function(n,a){var i=Math.pow(10,a);return Math.round(n*i)/i},I7=function(n,a){return/[0-9.]+px$/.test(n)?P7(parseInt(n,10)*72/96,a||0)+"pt":jn(B7,n).getOr(n)},F7=function(n){return jn(R7,n).getOr("")},q8=function(n){var a=function(){var Re=$e.none(),Qe=O.data,ot=n.queryCommandValue("FontSize");if(ot)for(var ct=function(At){var It=I7(ot,At),Yt=F7(It);Re=Gn(Qe,function(bn){return bn.format===ot||bn.format===It||bn.format===Yt})},St=3;Re.isNone()&&St>=0;St--)ct(St);return{matchOpt:Re,size:ot}},i=function(Re){return function(Qe){return Qe.exists(function(ot){return ot.format===Re})}},s=function(){var Re=a().matchOpt;return Re},f=Ke($e.none),d=function(Re){return function(){n.undoManager.transact(function(){n.focus(),n.execCommand("FontSize",!1,Re.format)})}},b=function(Re){var Qe=a(),ot=Qe.matchOpt,ct=Qe.size,St=ot.fold(Ke(ct),function(At){return At.title});za(Re,mm,{text:St})},O=U6(n,"fontsize_formats",L7,Ty.Space);return{tooltip:"Font sizes",text:$e.some("12pt"),icon:$e.none(),isSelectedFor:i,getPreviewFor:f,getCurrentValue:s,onAction:d,updateText:b,dataset:O,shouldHide:!1,isInvalid:xt}},H7=function(n,a){return e2(n,a,q8(n))},z7=function(n,a){var i=Ay(n,a,q8(n));n.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return i.items.validateItems(i.getStyleItems())}})},K8=function(n,a){var i=a(),s=dn(i,function(f){return f.format});return $e.from(n.formatter.closest(s)).bind(function(f){return Gn(i,function(d){return d.format===f})}).orThunk(function(){return oi(n.formatter.match("p"),{title:"Paragraph",format:"p"})})},$7="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",G8=function(n){var a="Paragraph",i=function(b){return function(){return n.formatter.match(b)}},s=function(b){return function(){var O=n.formatter.get(b);return $e.some({tag:O.length>0&&(O[0].inline||O[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(b))})}},f=function(b){var O=K8(n,function(){return d.data}),Re=O.fold(Ke(a),function(Qe){return Qe.title});za(b,mm,{text:Re})},d=U6(n,"block_formats",$7,Ty.SemiColon);return{tooltip:"Blocks",text:$e.some(a),icon:$e.none(),isSelectedFor:i,getCurrentValue:$e.none,getPreviewFor:s,onAction:V8(n),updateText:f,dataset:d,shouldHide:!1,isInvalid:function(b){return!n.formatter.canApply(b.format)}}},V7=function(n,a){return e2(n,a,G8(n))},U7=function(n,a){var i=Ay(n,a,G8(n));n.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return i.items.validateItems(i.getStyleItems())}})},X8=function(n,a){var i="Paragraph",s=function(b){return function(){return n.formatter.match(b)}},f=function(b){return function(){var O=n.formatter.get(b);return O!==void 0?$e.some({tag:O.length>0&&(O[0].inline||O[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(b))}):$e.none()}},d=function(b){var O=function(ct){var St=ct.items;return St!==void 0&&St.length>0?Mn(St,O):[{title:ct.title,format:ct.format}]},Re=Mn(hv(n),O),Qe=K8(n,Ke(Re)),ot=Qe.fold(Ke(i),function(ct){return ct.title});za(b,mm,{text:ot})};return{tooltip:"Formats",text:$e.some(i),icon:$e.none(),isSelectedFor:s,getCurrentValue:$e.none,getPreviewFor:f,onAction:V8(n),updateText:d,shouldHide:n.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(b){return!n.formatter.canApply(b.format)},dataset:a}},j7=function(n,a){var i=ut({type:"advanced"},a.styleselect);return e2(n,a,X8(n,i))},W7=function(n,a){var i=ut({type:"advanced"},a.styleselect),s=Ay(n,a,X8(n,i));n.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return s.items.validateItems(s.getStyleItems())}})},q7=function(n,a){var i=function(s,f){n.updateState.each(function(d){var b=d(s,f);a.set(b)}),n.renderComponents.each(function(d){var b=d(f,a.get()),O=dn(b,s.getSystem().build);sC(s,O)})};return si([wr(uc(),function(s,f){var d=f;if(!d.universal){var b=n.channel;ln(d.channels,b)&&i(s,d.data)}}),go(function(s,f){n.initialData.each(function(d){i(s,d)})})])},K7=Object.freeze({__proto__:null,events:q7}),G7=function(n,a,i){return i},X7=Object.freeze({__proto__:null,getState:G7}),Y7=[yr("channel"),ti("renderComponents"),ti("updateState"),ti("initialData")],Q7=function(){var n=Va($e.none()),a=function(){return n.set($e.none())},i=function(){return n.get().getOr("none")};return{readState:i,get:n.get,set:n.set,clear:a}},J7=Object.freeze({__proto__:null,init:Q7}),pc=Bu({fields:Y7,name:"reflecting",active:K7,apis:X7,state:J7}),Z7=Ke([yr("toggleClass"),yr("fetch"),$s("onExecute"),En("getHotspot",$e.some),En("getAnchorOverrides",Ke({})),qd(),$s("onItemExecute"),ti("lazySink"),yr("dom"),qo("onOpen"),Eu("splitDropdownBehaviours",[Qi,Da,to]),En("matchWidth",!1),En("useMinWidth",!1),En("eventOrder",{}),ti("role")].concat(Lx())),eV=hs({factory:qs,schema:[yr("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Hr([to.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(a){a.getSystem().getByUid(n.uid).each(Hl)},buttonBehaviours:Hr([Mo.config({toggleOnExecute:!1,toggleClass:n.toggleClass})])}}}),tV=hs({factory:qs,schema:[yr("dom")],name:"button",defaults:function(){return{buttonBehaviours:Hr([to.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(a){a.getSystem().getByUid(n.uid).each(function(i){n.onExecute(i,a)})}}}}),nV=Ke([eV,tV,Oc({factory:{sketch:function(n){return{uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}}}},schema:[yr("text")],name:"aria-descriptor"}),_c({schema:[Mb()],name:"menu",defaults:function(n){return{onExecute:function(a,i){a.getSystem().getByUid(n.uid).each(function(s){n.onItemExecute(s,a,i)})}}}}),XO()]),rV=function(n,a,i,s){var f,d=function(ct){Oo.getCurrent(ct).each(function(St){ni.highlightFirst(St),Da.focusIn(St)})},b=function(ct){var St=d;Qp(n,tt,ct,s,St,yf.HighlightFirst).get(He)},O=function(ct){return b(ct),$e.some(!0)},Re=function(ct){var St=Wf(ct,n,"button");return Hl(St),$e.some(!0)},Qe=ut(ut({},si([go(function(ct,St){var At=li(ct,n,"aria-descriptor");At.each(function(It){var Yt=ya("aria");ho(It.element,"id",Yt),ho(ct.element,"aria-describedby",Yt)})})])),B0($e.some(b))),ot={repositionMenus:function(ct){Mo.isOn(ct)&&QO(ct)}};return{uid:n.uid,dom:n.dom,components:a,apis:ot,eventOrder:ut(ut({},n.eventOrder),(f={},f[Il()]=["disabling","toggling","alloy.base.behaviour"],f)),events:Qe,behaviours:Ku(n.splitDropdownBehaviours,[Qi.config({others:{sandbox:function(ct){var St=Wf(ct,n,"arrow"),At={onOpen:function(){Mo.on(St),Mo.on(ct)},onClose:function(){Mo.off(St),Mo.off(ct)}};return Nx(n,ct,At)}}}),Da.config({mode:"special",onSpace:Re,onEnter:Re,onDown:O}),to.config({}),Mo.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:n.role.getOr("button"),"aria-haspopup":!0}}}},DN=Ws({name:"SplitDropdown",configFields:Z7(),partFields:nV(),factory:rV,apis:{repositionMenus:function(n,a){return n.repositionMenus(a)}}}),aV=function(n){return{isDisabled:function(){return Pa.isDisabled(n)},setDisabled:function(a){return Pa.set(n,a)}}},oV=function(n){return{setActive:function(a){Mo.set(n,a)},isActive:function(){return Mo.isOn(n)},isDisabled:function(){return Pa.isDisabled(n)},setDisabled:function(a){return Pa.set(n,a)}}},Y8=function(n,a){return n.map(function(i){return{"aria-label":a.translate(i),title:a.translate(i)}}).getOr({})},Q8=ya("focus-button"),W6=function(n,a,i,s,f,d){var b;return{dom:{tag:"button",classes:["tox-tbtn"].concat(a.isSome()?["tox-tbtn--select"]:[]),attributes:Y8(i,d)},components:Vp([n.map(function(O){return ty(O,d.icons)}),a.map(function(O){return gE(O,"tox-tbtn",d)})]),eventOrder:(b={},b[kc()]=["focusing","alloy.base.behaviour","common-button-display-events"],b),buttonBehaviours:Hr([vc.toolbarButton(d.isDisabled),vu(),mo("common-button-display-events",[wr(kc(),function(O,Re){Re.event.prevent(),$o(O,Q8)})])].concat(s.map(function(O){return pc.config({channel:O,initialData:{icon:n,text:a},renderComponents:function(Re,Qe){return Vp([Re.icon.map(function(ot){return ty(ot,d.icons)}),Re.text.map(function(ot){return gE(ot,"tox-tbtn",d)})])}})}).toArray()).concat(f.getOr([])))}},iV=function(n,a,i,s){var f=a.shared;return Yg.sketch({lazySink:f.getSink,fetch:function(){return as.nu(function(d){d(dn(i(n.items),TN))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:W6(n.icon,n.text,n.tooltip,$e.none(),$e.none(),f.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:s}}}})},J8=function(n,a,i){var s=Va(He),f=W6(n.icon,n.text,n.tooltip,$e.none(),$e.none(),i);return qs.sketch({dom:f.dom,components:f.components,eventOrder:hD,buttonBehaviours:Hr([mo("toolbar-button-events",[D5({onAction:n.onAction,getApi:a.getApi}),$p(a,s),Eg(a,s)]),vc.toolbarButton(function(){return n.disabled||i.isDisabled()}),vu()].concat(a.toolbarButtonBehaviours))})},uV=function(n,a){return Z8(n,a,[])},Z8=function(n,a,i){return J8(n,{toolbarButtonBehaviours:[].concat(i.length>0?[mo("toolbarButtonWith",i)]:[]),getApi:aV,onSetup:n.onSetup},a)},sV=function(n,a){return ez(n,a,[])},ez=function(n,a,i){return nr(J8(n,{toolbarButtonBehaviours:[eo.config({}),Mo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(i.length>0?[mo("toolbarToggleButtonWith",i)]:[]),getApi:oV,onSetup:n.onSetup},a))},lV=function(n,a,i){return function(s){return as.nu(function(f){return a.fetch(f)}).map(function(f){return $e.from(wO(nr(Kp(ya("menu-value"),f,function(d){a.onItemAction(n(s),d)},a.columns,a.presets,gf.CLOSE_ON_EXECUTE,a.select.getOr(xt),i),{movement:w1(a.columns,a.presets),menuBehaviours:Fp.unnamedEvents(a.columns!=="auto"?[]:[go(function(d,b){ex(d,4,WS(a.presets)).each(function(O){var Re=O.numRows,Qe=O.numColumns;Da.setGridSize(d,Re,Qe)})})])})))})}},cV=function(n,a){var i,s=ya("channel-update-split-dropdown-display"),f=function(O){return{isDisabled:function(){return Pa.isDisabled(O)},setDisabled:function(Re){return Pa.set(O,Re)},setIconFill:function(Re,Qe){Su(O.element,'svg path[id="'+Re+'"], rect[id="'+Re+'"]').each(function(ot){ho(ot,"fill",Qe)})},setIconStroke:function(Re,Qe){Su(O.element,'svg path[id="'+Re+'"], rect[id="'+Re+'"]').each(function(ot){ho(ot,"stroke",Qe)})},setActive:function(Re){ho(O.element,"aria-pressed",Re),Su(O.element,"span").each(function(Qe){O.getSystem().getByDom(Qe).each(function(ot){return Mo.set(ot,Re)})})},isActive:function(){return Su(O.element,"span").exists(function(Re){return O.getSystem().getByDom(Re).exists(Mo.isOn)})}}},d=Va(He),b={getApi:f,onSetup:n.onSetup};return DN.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:ut({"aria-pressed":!1},Y8(n.tooltip,a.providers))},onExecute:function(O){n.onAction(f(O))},onItemExecute:function(O,Re,Qe){},splitDropdownBehaviours:Hr([vc.splitButton(a.providers.isDisabled),vu(),mo("split-dropdown-events",[wr(Q8,to.focus),$p(b,d),Eg(b,d)]),Zp.config({})]),eventOrder:(i={},i[Fl()]=["alloy.base.behaviour","split-dropdown-events"],i),toggleClass:"tox-tbtn--enabled",lazySink:a.getSink,fetch:lV(f,n,a.providers),parts:{menu:Z0(!1,n.columns,n.presets)},components:[DN.parts.button(W6(n.icon,n.text,$e.none(),$e.some(s),$e.some([Mo.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),a.providers)),DN.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:UT("chevron-down",a.providers.icons)},buttonBehaviours:Hr([vc.splitButton(a.providers.isDisabled),vu(),LS()])}),DN.parts["aria-descriptor"]({text:a.providers.translate("To open the popup, press Shift+Enter")})]})},fV=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],t2=function(n,a){return function(i,s,f){var d=n(i).mapError(function(b){return Im(b)}).getOrDie();return a(d,s,f)}},_y={button:t2(s_,function(n,a){return uV(n,a.backstage.shared.providers)}),togglebutton:t2(HS,function(n,a){return sV(n,a.backstage.shared.providers)}),menubutton:t2(Ln,function(n,a){return ay(n,"tox-tbtn",a.backstage,$e.none())}),splitbutton:t2(Tr,function(n,a){return cV(n,a.backstage.shared)}),grouptoolbarbutton:t2(On,function(n,a,i){var s,f=i.ui.registry.getAll().buttons,d=function(O){return NN(i,{buttons:f,toolbar:O,allowToolbarGroups:!1},a,$e.none())},b=(s={},s[Kw]=a.backstage.shared.header.isPositionedAtTop()?Hf.TopToBottom:Hf.BottomToTop,s);switch(xg(i)){case Wl.floating:return iV(n,a.backstage,d,b);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}}),styleSelectButton:function(n,a){return j7(n,a.backstage)},fontsizeSelectButton:function(n,a){return H7(n,a.backstage)},fontSelectButton:function(n,a){return D7(n,a.backstage)},formatButton:function(n,a){return V7(n,a.backstage)},alignMenuButton:function(n,a){return A7(n,a.backstage)}},dV=function(n,a,i){return jn(_y,n.type).fold(function(){return $e.none()},function(s){return $e.some(s(n,a,i))})},tz={styleselect:_y.styleSelectButton,fontsizeselect:_y.fontsizeSelectButton,fontselect:_y.fontSelectButton,formatselect:_y.formatButton,align:_y.alignMenuButton},vV=function(n){var a=dn(fV,function(i){var s=cn(i.items,function(f){return pr(n,f)||pr(tz,f)});return{name:i.name,items:s}});return cn(a,function(i){return i.items.length>0})},mV=function(n){var a=n.split("|");return dn(a,function(i){return{items:i.trim().split(" ")}})},pV=function(n){return De(n,function(a){return pr(a,"name")&&pr(a,"items")})},hV=function(n){var a=n.toolbar,i=n.buttons;return a===!1?[]:a===void 0||a===!0?vV(i):We(a)?mV(a):pV(a)?a:[]},gV=function(n,a,i,s,f,d){return jn(a,i.toLowerCase()).orThunk(function(){return d.bind(function(b){return Tn(b,function(O){return jn(a,O+i.toLowerCase())})})}).fold(function(){return jn(tz,i.toLowerCase()).map(function(b){return b(n,f)}).orThunk(function(){return $e.none()})},function(b){return b.type==="grouptoolbarbutton"&&!s?$e.none():dV(b,f,n)})},NN=function(n,a,i,s){var f=hV(a),d=dn(f,function(b){var O=Mn(b.items,function(Re){return Re.trim().length===0?[]:gV(n,a.buttons,Re,a.allowToolbarGroups,i,s).toArray()});return{title:$e.from(n.translate(b.name)),items:O}});return cn(d,function(b){return b.items.length>0})},nz=function(n,a,i,s){var f=a.outerContainer,d=i.toolbar,b=i.buttons;if(De(d,We)){var O=d.map(function(Re){var Qe={toolbar:Re,buttons:b,allowToolbarGroups:i.allowToolbarGroups};return NN(n,Qe,{backstage:s},$e.none())});eu.setToolbars(f,O)}else eu.setToolbar(f,NN(n,i,{backstage:s},$e.none()))},rz=Ra(),bV=rz.os.isiOS()&&rz.os.version.major<=12,yV=function(n,a){var i=n.dom,s=n.getWin(),f=n.getDoc().documentElement,d=Va(Ut(s.innerWidth,s.innerHeight)),b=Va(Ut(f.offsetWidth,f.offsetHeight)),O=function(){var St=d.get();(St.left!==s.innerWidth||St.top!==s.innerHeight)&&(d.set(Ut(s.innerWidth,s.innerHeight)),vx(n))},Re=function(){var St=n.getDoc().documentElement,At=b.get();(At.left!==St.offsetWidth||At.top!==St.offsetHeight)&&(b.set(Ut(St.offsetWidth,St.offsetHeight)),vx(n))},Qe=function(St){return YP(n,St)};i.bind(s,"resize",O),i.bind(s,"scroll",Qe);var ot=Vb(Gt.fromDom(n.getBody()),"load",Re),ct=a.uiMothership.element;n.on("hide",function(){Qa(ct,"display","none")}),n.on("show",function(){g(ct,"display")}),n.on("NodeChange",Re),n.on("remove",function(){ot.unbind(),i.unbind(s,"resize",O),i.unbind(s,"scroll",Qe),s=null})},wV=function(n,a,i,s,f){var d=Va(0),b=a.outerContainer;w7(n);var O=Gt.fromDom(f.targetNode),Re=Kr(ja(O));lf(O,a.mothership),Gd(Re,a.uiMothership),n.on("PostRender",function(){nz(n,a,i,s),d.set(n.getWin().innerWidth),eu.setMenubar(b,F8(n,i)),eu.setSidebar(b,i.sidebar),yV(n,a)});var Qe=eu.getSocket(b).getOrDie("Could not find expected socket element");if(bV){tc(Qe.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var ot=vB(function(){n.fire("ScrollContent")},20),ct=su(Qe.element,"scroll",ot.throttle);n.on("remove",ct.unbind)}F_(n,a),n.addCommand("ToggleSidebar",function(Yt,bn){eu.toggleSidebar(b,bn),n.fire("ToggleSidebar")}),n.addQueryValueHandler("ToggleSidebar",function(){return eu.whichSidebar(b)});var St=xg(n),At=function(){eu.refreshToolbar(a.outerContainer)};(St===Wl.sliding||St===Wl.floating)&&n.on("ResizeWindow ResizeEditor ResizeContent",function(){var Yt=n.getWin().innerWidth;Yt!==d.get()&&(At(),d.set(Yt))});var It={enable:function(){zp(a,!1)},disable:function(){zp(a,!0)},isDisabled:function(){return Pa.isDisabled(b)}};return{iframeContainer:Qe.element.dom,editorContainer:b.element.dom,api:It}},CV=Object.freeze({__proto__:null,render:wV}),q6=function(n){var a=/^[0-9\.]+(|px)$/i;return a.test(""+n)?$e.some(parseInt(""+n,10)):$e.none()},K6=function(n){return Be(n)?n+"px":n},LN=function(n,a,i){var s=a.filter(function(d){return n<d}),f=i.filter(function(d){return n>d});return s.or(f).getOr(n)},SV=function(n){var a=k_(n),i=__(n),s=O_(n);return q6(a).map(function(f){return LN(f,i,s)})},xV=function(n){var a=SV(n);return a.getOr(k_(n))},az=function(n){var a=A_(n),i=T_(n),s=a1(n);return q6(a).map(function(f){return LN(f,i,s)})},EV=function(n){var a=az(n);return a.getOr(A_(n))},kV=function(n,a,i,s,f){var d=i.uiMothership,b=i.outerContainer,O=Sg.DOM,Re=i1(n),Qe=u1(n),ot=a1(n).or(az(n)),ct=s.shared.header,St=ct.isPositionedAtTop,At=xg(n),It=At===Wl.sliding||At===Wl.floating,Yt=Va(!1),bn=function(){return Yt.get()&&!n.removed},jt=function(Cr){return It?Cr.fold(Ke(0),function(ar){return ar.components().length>1?Ue(ar.components()[1].element):0}):0},Sn=function(Cr){switch(D_(n)){case lm.auto:var ar=eu.getToolbar(b),Ir=jt(ar),ga=Ue(Cr.element)-Ir,hr=au(a),da=hr.y>ga;if(da)return"top";var ka=Zn(a),Ao=Math.max(ka.dom.scrollHeight,Ue(ka)),Xo=hr.bottom<Ao-ga;if(Xo)return"bottom";var gi=ju(),Bi=gi.bottom<hr.bottom-ga;return Bi?"bottom":"top";case lm.bottom:return"bottom";case lm.top:default:return"top"}},Xn=function(Cr){var ar=f.get();e.setModes(ar,[Cr]),ct.setDockingMode(Cr);var Ir=St()?Hf.TopToBottom:Hf.BottomToTop;ho(ar.element,Kw,Ir)},Kn=function(){var Cr=ot.getOrThunk(function(){var ar=q6(Hi(ei(),"margin-left")).getOr(0);return na(ei())-Vr(a).left+ar});Qa(f.get().element,"max-width",Cr+"px")},wn=function(){var Cr=eu.getToolbar(b),ar=jt(Cr),Ir=au(a),ga=St()?Math.max(Ir.y-Ue(f.get().element)+ar,0):Ir.bottom;tc(b.element,{position:"absolute",top:Math.round(ga)+"px",left:Math.round(Ir.x)+"px"})},$n=function(){d.broadcastOn([pp()],{})},ir=function(Cr){if(Cr===void 0&&(Cr=!1),!!bn()){if(Re||Kn(),It&&eu.refreshToolbar(b),Re||wn(),Qe){var ar=f.get();Cr?e.reset(ar):e.refresh(ar)}$n()}},Wr=function(Cr){if(Cr===void 0&&(Cr=!0),!(Re||!Qe||!bn())){var ar=ct.getDockingMode(),Ir=Sn(f.get());Ir!==ar&&(Xn(Ir),Cr&&ir(!0))}},gr=function(){Yt.set(!0),Qa(b.element,"display","flex"),O.addClass(n.getBody(),"mce-edit-focus"),g(d.element,"display"),Wr(!1),ir()},qr=function(){Yt.set(!1),i.outerContainer&&(Qa(b.element,"display","none"),O.removeClass(n.getBody(),"mce-edit-focus")),Qa(d.element,"display","none")};return{isVisible:bn,isPositionedAtTop:St,show:gr,hide:qr,update:ir,updateMode:Wr,repositionPopups:$n}},oz=function(n,a){var i=au(n);return{pos:a?i.y:i.bottom,bounds:i}},AV=function(n,a,i,s){var f=Va(oz(a,i.isPositionedAtTop())),d=function(O){var Re=oz(a,i.isPositionedAtTop()),Qe=Re.pos,ot=Re.bounds,ct=f.get(),St=ct.pos,At=ct.bounds,It=ot.height!==At.height||ot.width!==At.width;f.set({pos:Qe,bounds:ot}),It&&vx(n,O),i.isVisible()&&(St!==Qe?i.update(!0):It&&(i.updateMode(),i.repositionPopups()))};s||(n.on("activate",i.show),n.on("deactivate",i.hide)),n.on("SkinLoaded ResizeWindow",function(){return i.update(!0)}),n.on("NodeChange keydown",function(O){mf.requestAnimationFrame(function(){return d(O)})}),n.on("ScrollWindow",function(){return i.updateMode()});var b=up();b.set(Vb(Gt.fromDom(n.getBody()),"load",d)),n.on("remove",function(){b.clear()})},TV=function(n,a,i,s,f){var d=a.mothership,b=a.uiMothership,O=a.outerContainer,Re=Va(null),Qe=Gt.fromDom(f.targetNode),ot=kV(n,Qe,a,s,Re),ct=bP(n);C7(n);var St=function(){if(Re.get()){ot.show();return}Re.set(eu.getHeader(O).getOrDie());var It=R_(n);Gd(It,d),Gd(It,b),nz(n,a,i,s),eu.setMenubar(O,F8(n,i)),ot.show(),AV(n,Qe,ot,ct),n.nodeChanged()};n.on("show",St),n.on("hide",ot.hide),ct||(n.on("focus",St),n.on("blur",ot.hide)),n.on("init",function(){(n.hasFocus()||ct)&&St()}),F_(n,a);var At={show:function(){ot.show()},hide:function(){ot.hide()},enable:function(){zp(a,!1)},disable:function(){zp(a,!0)},isDisabled:function(){return Pa.isDisabled(O)}};return{editorContainer:O.element.dom,api:At}},_V=Object.freeze({__proto__:null,render:TV}),OV="contexttoolbar-show",iz="contexttoolbar-hide",MV=function(n){return{hide:function(){return $o(n,Mh())},getValue:function(){return Xr.getValue(n)}}},uz=function(n,a){return wr(pD,function(i,s){var f=n.get(i),d=MV(f);a.onAction(d,s.event.buttonApi)})},DV=function(n,a,i){var s=a.original;s.primary;var f=Et(s,["primary"]),d=Kc(s_(ut(ut({},f),{type:"button",onAction:He})));return Z8(d,i.backstage.shared.providers,[uz(n,a)])},NV=function(n,a,i){var s=a.original;s.primary;var f=Et(s,["primary"]),d=Kc(HS(ut(ut({},f),{type:"togglebutton",onAction:He})));return ez(d,i.backstage.shared.providers,[uz(n,a)])},LV=function(n,a,i){var s={backstage:{shared:{providers:i}}};return a.type==="contextformtogglebutton"?NV(n,a,s):DV(n,a,s)},RV=function(n,a,i){var s=dn(a,function(b){return Ko(LV(n,b,i))}),f=function(){return dn(s,function(b){return b.asSpec()})},d=function(b){return Tn(a,function(O,Re){return O.primary?$e.from(s[Re]).bind(function(Qe){return Qe.getOpt(b)}).filter(Ot(Pa.isDisabled)):$e.none()})};return{asSpecs:f,findPrimary:d}},sz=function(n,a){var i=n.label.fold(function(){return{}},function(d){return{"aria-label":d}}),s=Ko(Xp.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:n.initValue(),inputAttributes:i,selectOnFocus:!0,inputBehaviours:Hr([Da.config({mode:"special",onEnter:function(d){return f.findPrimary(d).map(function(b){return Hl(b),!0})},onLeft:function(d,b){return b.cut(),$e.none()},onRight:function(d,b){return b.cut(),$e.none()}})])})),f=RV(s,n.commands,a);return[{title:$e.none(),items:[s.asSpec()]},{title:$e.none(),items:f.asSpecs()}]},BV=function(n,a,i){return _N({type:n,uid:ya("context-toolbar"),initGroups:sz(a,i),onEscape:$e.none,cyclicKeying:!0,providers:i})},PV={renderContextForm:BV,buildInitGroups:sz},lz=function(n,a,i){return i===void 0&&(i=.01),a.bottom-n.y>=i&&n.bottom-a.y>=i},IV=function(n){var a=n.getBoundingClientRect();if(a.height<=0&&a.width<=0){var i=un(Gt.fromDom(n.startContainer),n.startOffset).element,s=Rt(i)?ru(i):$e.some(i);return s.filter(mt).map(function(f){return f.dom.getBoundingClientRect()}).getOr(a)}else return a},G6=function(n){var a=n.selection.getRng(),i=IV(a);if(n.inline){var s=Ji();return Zi(s.left+i.left,s.top+i.top,i.width,i.height)}else{var f=Rl(Gt.fromDom(n.getBody()));return Zi(f.x+i.left,f.y+i.top,i.width,i.height)}},FV=function(n,a){return a.filter(Ja).map(Rl).getOrThunk(function(){return G6(n)})},HV=function(n,a,i){var s=Math.max(n.x+i,a.x),f=Math.min(n.right-i,a.right);return{x:s,width:f-s}},zV=function(n,a,i,s,f,d){var b=Gt.fromDom(n.getContainer()),O=Su(b,".tox-editor-header").getOr(b),Re=au(O),Qe=Re.y>=a.bottom,ot=s&&!Qe;if(n.inline&&ot)return{y:Math.max(Re.bottom+d,i.y),bottom:i.bottom};if(n.inline&&!ot)return{y:i.y,bottom:Math.min(Re.y-d,i.bottom)};var ct=f==="line"?au(b):a;return ot?{y:Math.max(Re.bottom+d,i.y),bottom:Math.min(ct.bottom-d,i.bottom)}:{y:Math.max(ct.y+d,i.y),bottom:Math.min(Re.y-d,i.bottom)}},cz=function(n,a,i,s){s===void 0&&(s=0);var f=Ll(window),d=au(Gt.fromDom(n.getContentAreaContainer())),b=du(n)||rx(n)||o1(n),O=HV(d,f,s),Re=O.x,Qe=O.width;if(n.inline&&!b)return Zi(Re,f.y,Qe,f.height);var ot=a.header.isPositionedAtTop(),ct=zV(n,d,f,ot,i,s),St=ct.y,At=ct.bottom;return Zi(Re,St,Qe,At-St)},RN=12,fz={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},dz={maxHeightFunction:$h(),maxWidthFunction:F6()},$V=function(n,a){var i=n.selection.getRng(),s=un(Gt.fromDom(i.startContainer),i.startOffset);return i.startContainer===i.endContainer&&i.startOffset===i.endOffset-1&&bi(s.element,a)},VV=function(n,a,i){var s=bu(n,"position");Qa(n,"position",a);var f=i(n);return s.each(function(d){return Qa(n,"position",d)}),f},vz=function(n){return n==="node"},UV=function(n,a,i,s,f){var d=G6(n),b=s.lastElement().exists(function(Qe){return bi(i,Qe)});if($V(n,i))return b?mS:vf;if(b)return VV(a,s.getMode(),function(){var Qe=lz(d,au(a));return Qe&&!s.isReposition()?$4:mS});var O=s.getMode()==="fixed"?f.y+Ji().top:f.y,Re=Ue(a)+RN;return O+Re<=d.y?vf:_p},jV=function(n,a,i,s){var f=function(Re){return function(Qe,ot,ct,St,At){var It=UV(n,St,Re,i,At),Yt=ut(ut({},Qe),{y:At.y,height:At.height});return ut(ut({},It(Yt,ot,ct,St,At)),{alwaysFit:!0})}},d=function(Re){return vz(s)?[f(Re)]:[]},b={onLtr:function(Re){return[il,fu,ol,vs,Vs,ms].concat(d(Re))},onRtl:function(Re){return[il,fu,Vs,ms,ol,vs].concat(d(Re))}},O={onLtr:function(Re){return[fu,vs,ms,ol,Vs,il].concat(d(Re))},onRtl:function(Re){return[fu,ms,vs,Vs,ol,il].concat(d(Re))}};return a?O:b},WV=function(n,a,i,s){return a==="line"?{bubble:sp(RN,0,fz),layouts:{onLtr:function(){return[Bb]},onRtl:function(){return[Pb]}},overrides:dz}:{bubble:sp(0,RN,fz,1/RN),layouts:jV(n,i,s,a),overrides:dz}},X6=function(n,a){var i=cn(a,function(b){return b.predicate(n.dom)}),s=fn(i,function(b){return b.type==="contexttoolbar"}),f=s.pass,d=s.fail;return{contextToolbars:f,contextForms:d}},qV=function(n){if(n.length<=1)return n;var a=function(O){return on(n,function(Re){return Re.position===O})},i=function(O){return cn(n,function(Re){return Re.position===O})},s=a("selection"),f=a("node");if(s||f)if(f&&s){var d=i("node"),b=dn(i("selection"),function(O){return ut(ut({},O),{position:"node"})});return d.concat(b)}else return i(s?"selection":"node");else return i("line")},KV=function(n){if(n.length<=1)return n;var a=function(s){return Gn(n,function(f){return f.position===s})},i=a("selection").orThunk(function(){return a("node")}).orThunk(function(){return a("line")}).map(function(s){return s.position});return i.fold(function(){return[]},function(s){return cn(n,function(f){return f.position===s})})},GV=function(n,a,i){var s=X6(n,a);if(s.contextForms.length>0)return $e.some({elem:n,toolbars:[s.contextForms[0]]});var f=X6(n,i);if(f.contextForms.length>0)return $e.some({elem:n,toolbars:[f.contextForms[0]]});if(s.contextToolbars.length>0||f.contextToolbars.length>0){var d=qV(s.contextToolbars.concat(f.contextToolbars));return $e.some({elem:n,toolbars:d})}else return $e.none()},XV=function(n,a,i){return n(a)?$e.none():Wy(a,function(s){if(mt(s)){var f=X6(s,i.inNodeScope),d=f.contextToolbars,b=f.contextForms,O=b.length>0?b:KV(d);return O.length>0?$e.some({elem:s,toolbars:O}):$e.none()}else return $e.none()},n)},YV=function(n,a){var i=Gt.fromDom(a.getBody()),s=function(b){return bi(b,i)},f=function(b){return!s(b)&&!ss(i,b)},d=Gt.fromDom(a.selection.getNode());return f(d)?$e.none():GV(d,n.inNodeScope,n.inEditorScope).orThunk(function(){return XV(s,d,n)})},QV=function(n,a){var i={},s=[],f=[],d={},b={},O=function(ot,ct){var St=Kc(TB(ct));i[ot]=St,St.launch.map(function(At){d["form:"+ot]=ut(ut({},ct.launch),{type:At.type==="contextformtogglebutton"?"togglebutton":"button",onAction:function(){a(St)}})}),St.scope==="editor"?f.push(St):s.push(St),b[ot]=St},Re=function(ot,ct){OB(ct).each(function(St){ct.scope==="editor"?f.push(St):s.push(St),b[ot]=St})},Qe=Rn(n);return en(Qe,function(ot){var ct=n[ot];ct.type==="contextform"?O(ot,ct):ct.type==="contexttoolbar"&&Re(ot,ct)}),{forms:i,inNodeScope:s,inEditorScope:f,lookupTable:b,formNavigators:d}},mz=ya("forward-slide"),pz=ya("backward-slide"),Y6=ya("change-slide-event"),Q6="tox-pop--resizing",JV=function(n){var a=Va([]);return Pi.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(i){a.set([]),Pi.getContent(i).each(function(s){g(s.element,"visibility")}),cu(i.element,Q6),g(i.element,"width")},inlineBehaviours:Hr([mo("context-toolbar-events",[iu(_h(),function(i,s){s.event.raw.propertyName==="width"&&(cu(i.element,Q6),g(i.element,"width"))}),wr(Y6,function(i,s){var f=i.element;g(f,"width");var d=na(f);Pi.setContent(i,s.event.contents),Cu(f,Q6);var b=na(f);Qa(f,"width",d+"px"),Pi.getContent(i).each(function(O){s.event.focus.bind(function(Re){return nf(Re),af(f)}).orThunk(function(){return Da.focusIn(O),rf(ja(f))})}),mf.setTimeout(function(){Qa(i.element,"width",b+"px")},0)}),wr(mz,function(i,s){Pi.getContent(i).each(function(f){a.set(a.get().concat([{bar:f,focus:rf(ja(i.element))}]))}),za(i,Y6,{contents:s.event.forwardContents,focus:$e.none()})}),wr(pz,function(i,s){sr(a.get()).each(function(f){a.set(a.get().slice(0,a.get().length-1)),za(i,Y6,{contents:$l(f.bar),focus:f.focus})})})]),Da.config({mode:"special",onEscape:function(i){return sr(a.get()).fold(function(){return n.onEscape()},function(s){return $o(i,pz),$e.some(!0)})}})]),lazySink:function(){return So.value(n.sink)}})},J6="tox-pop--transition",ZV=function(n,a,i,s){var f=s.backstage,d=f.shared,b=Ra().deviceType.isTouch,O=Xi(),Re=Xi(),Qe=Xi(),ot=uu(JV({sink:i,onEscape:function(){return n.focus(),$e.some(!0)}})),ct=function(){var gr=Qe.get().getOr("node"),qr=vz(gr)?1:0;return cz(n,d,gr,qr)},St=function(){return!n.removed&&!(b()&&f.isContextMenuOpen())},At=function(gr){return Ua(Yo(gr,O.get(),bi),!0)},It=function(){if(St()){var gr=ct(),qr=Ua(Qe.get(),"node")?FV(n,O.get()):G6(n);return gr.height<=0||!lz(qr,gr)}else return!0},Yt=function(){O.clear(),Re.clear(),Qe.clear(),Pi.hide(ot)},bn=function(){if(Pi.isOpen(ot)){var gr=ot.element;g(gr,"display"),It()?Qa(gr,"display","none"):(Re.set(0),Pi.reposition(ot))}},jt=function(gr){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[gr],behaviours:Hr([Da.config({mode:"acyclic"}),mo("pop-dialog-wrap-events",[go(function(qr){n.shortcuts.add("ctrl+F9","focus statusbar",function(){return Da.focusIn(qr)})}),sc(function(qr){n.shortcuts.remove("ctrl+F9")})])])}},Sn=Dn(function(){return QV(a,function(gr){var qr=wn([gr]);za(ot,mz,{forwardContents:jt(qr)})})}),Xn=function(gr,qr){return NN(n,{buttons:gr,toolbar:qr.items,allowToolbarGroups:!1},s,$e.some(["form:"]))},Kn=function(gr,qr){return PV.buildInitGroups(gr,qr)},wn=function(gr){var qr=n.ui.registry.getAll().buttons,Cr=Sn(),ar=ut(ut({},qr),Cr.formNavigators),Ir=xg(n)===Wl.scrolling?Wl.scrolling:Wl.default,ga=tn(dn(gr,function(hr){return hr.type==="contexttoolbar"?Xn(ar,hr):Kn(hr,d.providers)}));return _N({type:Ir,uid:ya("context-toolbar"),initGroups:ga,onEscape:$e.none,cyclicKeying:!0,providers:d.providers})},$n=function(gr,qr){var Cr=gr==="node"?d.anchors.node(qr):d.anchors.cursor(),ar=WV(n,gr,b(),{lastElement:O.get,isReposition:function(){return Ua(Re.get(),0)},getMode:function(){return Yi.getMode(i)}});return nr(Cr,ar)},ir=function(gr,qr){if(Wr.cancel(),!!St()){var Cr=wn(gr),ar=gr[0].position,Ir=$n(ar,qr);Qe.set(ar),Re.set(1);var ga=ot.element;g(ga,"display"),At(qr)||(cu(ga,J6),Yi.reset(i,ot)),Pi.showWithinBounds(ot,jt(Cr),{anchor:Ir,transition:{classes:[J6],mode:"placement"}},function(){return $e.some(ct())}),qr.fold(O.clear,O.set),It()&&Qa(ga,"display","none")}},Wr=W0(function(){if(!(!n.hasFocus()||n.removed))if(Hs(ot.element,J6))Wr.throttle();else{var gr=Sn();YV(gr,n).fold(Yt,function(qr){ir(qr.toolbars,$e.some(qr.elem))})}},17);n.on("init",function(){n.on("remove",Yt),n.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",bn),n.on("click keyup focus SetContent",Wr.throttle),n.on(iz,Yt),n.on(OV,function(gr){var qr=Sn();jn(qr.lookupTable,gr.toolbarKey).each(function(Cr){ir([Cr],oi(gr.target!==n,gr.target)),Pi.getContent(ot).each(Da.focusIn)})}),n.on("focusout",function(gr){mf.setEditorTimeout(n,function(){af(i.element).isNone()&&af(ot.element).isNone()&&Yt()},0)}),n.on("SwitchMode",function(){n.mode.isReadOnly()&&Yt()}),n.on("AfterProgressState",function(gr){gr.state?Yt():n.hasFocus()&&Wr.throttle()}),n.on("NodeChange",function(gr){af(ot.element).fold(Wr.throttle,He)})})},e9=function(n){var a=[{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}];en(a,function(i){n.ui.registry.addToggleButton(i.name,{tooltip:i.text,icon:i.icon,onAction:Tf(n,i.cmd),onSetup:ON(n,i.name)})}),n.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:Tf(n,"JustifyNone")})},t9={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},n9=function(){var n="[0-9]+",a="[+-]?"+n,i="[eE]"+a,s="\\.",f=function(O){return"(?:"+O+")?"},d=["Infinity",n+s+f(n)+f(i),s+n+f(i),n+f(i)].join("|"),b="[+-]?(?:"+d+")";return new RegExp("^("+b+")(.*)$")}(),r9=function(n,a){return on(a,function(i){return on(t9[i],function(s){return n===s})})},a9=function(n,a){var i=$e.from(n9.exec(n));return i.bind(function(s){var f=Number(s[1]),d=s[2];return r9(d,a)?$e.some({value:f,unit:d}):$e.none()})},o9=function(n,a){return a9(n,a).map(function(i){var s=i.value,f=i.unit;return s+f})},hz=function(n,a){var i=function(){var s=a.getOptions(n),f=a.getCurrent(n).map(a.hash),d=Xi();return dn(s,function(b){return{type:"togglemenuitem",text:a.display(b),onSetup:function(O){var Re=function(ot){ot&&(d.on(function(ct){return ct.setActive(!1)}),d.set(O)),O.setActive(ot)};Re(Ua(f,a.hash(b)));var Qe=a.watcher(n,b,Re);return function(){d.clear(),Qe()}},onAction:function(){return a.setCurrent(n,b)}}})};n.ui.registry.addMenuButton(a.name,{tooltip:a.text,icon:a.icon,fetch:function(s){return s(i())},onSetup:a.onToolbarSetup}),n.ui.registry.addNestedMenuItem(a.name,{type:"nestedmenuitem",text:a.text,getSubmenuItems:i,onSetup:a.onMenuSetup})},i9={name:"lineheight",text:"Line height",icon:"line-height",getOptions:vP,hash:function(n){return o9(n,["fixed","relative","empty"]).getOr(n)},display:tt,watcher:function(n,a,i){return n.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind},getCurrent:function(n){return $e.from(n.queryCommandValue("LineHeight"))},setCurrent:function(n,a){return n.execCommand("LineHeight",!1,a)}},u9=function(n){var a=$e.from(mP(n));return a.map(function(i){return{name:"language",text:"Language",icon:"language",getOptions:Ke(i),hash:function(s){return Te(s.customCode)?s.code:s.code+"/"+s.customCode},display:function(s){return s.title},watcher:function(s,f,d){return s.formatter.formatChanged("lang",d,!1,{value:f.code,customValue:f.customCode}).unbind},getCurrent:function(s){var f=Gt.fromDom(s.selection.getNode());return qy(f,function(d){return $e.some(d).filter(mt).bind(function(b){var O=qi(b,"lang");return O.map(function(Re){var Qe=qi(b,"data-mce-lang").getOrUndefined();return{code:Re,customCode:Qe,title:""}})})})},setCurrent:function(s,f){return s.execCommand("Lang",!1,f)},onToolbarSetup:function(s){var f=up();return s.setActive(n.formatter.match("lang",{},void 0,!0)),f.set(n.formatter.formatChanged("lang",s.setActive,!0)),f.clear}}})},s9=function(n){hz(n,i9),u9(n).each(function(a){return hz(n,a)})},l9=function(n,a){T7(n,a),N7(n,a),W7(n,a),U7(n,a),z7(n,a)},c9=function(n){return MN(n,"NodeChange",function(a){a.setDisabled(!n.queryCommandState("outdent"))})},f9=function(n){n.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:c9(n),onAction:Tf(n,"outdent")}),n.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:Tf(n,"indent")})},d9=function(n){f9(n)},Z6=function(n,a){return function(){n.execCommand("mceToggleFormat",!1,a)}},v9=function(n){mv.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(s,f){n.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:ON(n,s.name),onAction:Z6(n,s.name)})});for(var a=1;a<=6;a++){var i="h"+a;n.ui.registry.addToggleButton(i,{text:i.toUpperCase(),tooltip:"Heading "+a,onSetup:ON(n,i),onAction:Z6(n,i)})}},m9=function(n){mv.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(a){n.ui.registry.addButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Tf(n,a.action)})})},p9=function(n){mv.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(a){n.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Tf(n,a.action),onSetup:ON(n,a.name)})})},h9=function(n){v9(n),m9(n),p9(n)},g9=function(n){mv.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(a){n.ui.registry.addMenuItem(a.name,{text:a.text,icon:a.icon,shortcut:a.shortcut,onAction:Tf(n,a.action)})}),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:Z6(n,"code")})},b9=function(n){h9(n),g9(n)},BN=function(n,a){return MN(n,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(i){i.setDisabled(n.mode.isReadOnly()||!n.undoManager[a]())})},y9=function(n){n.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:BN(n,"hasUndo"),onAction:Tf(n,"undo")}),n.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:BN(n,"hasRedo"),onAction:Tf(n,"redo")})},w9=function(n){n.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:BN(n,"hasUndo"),onAction:Tf(n,"undo")}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:BN(n,"hasRedo"),onAction:Tf(n,"redo")})},C9=function(n){y9(n),w9(n)},S9=function(n){return MN(n,"VisualAid",function(a){a.setActive(n.hasVisual)})},x9=function(n){n.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:S9(n),onAction:Tf(n,"mceToggleVisualAid")})},E9=function(n){n.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Tf(n,"mceToggleVisualAid")})},k9=function(n){E9(n),x9(n)},A9=function(n,a){e9(n),b9(n),l9(n,a),C9(n),sI(n),k9(n),d9(n),s9(n)},n2=function(n,a){return{type:"makeshift",x:n,y:a}},T9=function(n,a,i){return n2(n.x+a,n.y+i)},gz=function(n){return n.type==="longpress"||n.type.indexOf("touch")===0},_9=function(n){if(gz(n)){var a=n.touches[0];return n2(a.pageX,a.pageY)}else return n2(n.pageX,n.pageY)},O9=function(n){if(gz(n)){var a=n.touches[0];return n2(a.clientX,a.clientY)}else return n2(n.clientX,n.clientY)},M9=function(n,a){var i=Sg.DOM.getPos(n);return T9(a,i.x,i.y)},D9=function(n,a){return a.type==="contextmenu"||a.type==="longpress"?n.inline?_9(a):M9(n.getContentAreaContainer(),O9(a)):bz(n)},bz=function(n){return{type:"selection",root:Gt.fromDom(n.selection.getNode())}},N9=function(n){return{type:"node",node:$e.some(Gt.fromDom(n.selection.getNode())),root:Gt.fromDom(n.getBody())}},yz=function(n,a,i){switch(i){case"node":return N9(n);case"point":return D9(n,a);case"selection":return bz(n)}},L9=function(n,a,i,s,f,d){var b=i(),O=yz(n,a,d);lh(b,gf.CLOSE_ON_EXECUTE,s,!1).map(function(Re){a.preventDefault(),Pi.showMenuAt(f,{anchor:O},{menu:{markers:Pp("normal")},data:Re})})},R9={onLtr:function(){return[fu,vs,ms,ol,Vs,il,vf,_p,nm,hg,gg,pg]},onRtl:function(){return[fu,ms,vs,Vs,ol,il,vf,_p,gg,pg,nm,hg]}},B9=12,P9={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},I9=function(n,a){var i=n.selection;if(i.isCollapsed()||a.touches.length<1)return!1;var s=a.touches[0],f=i.getRng(),d=Zw(n.getWin(),Wh.domRange(f));return d.exists(function(b){return b.left<=s.clientX&&b.right>=s.clientX&&b.top<=s.clientY&&b.bottom>=s.clientY})},F9=function(n){var a=n.selection.getRng(),i=function(){mf.setEditorTimeout(n,function(){n.selection.setRng(a)},10),d()};n.once("touchend",i);var s=function(b){b.preventDefault(),b.stopImmediatePropagation()};n.on("mousedown",s,!0);var f=function(){return d()};n.once("longpresscancel",f);var d=function(){n.off("touchend",i),n.off("longpresscancel",f),n.off("mousedown",s)}},H9=function(n,a,i){var s=yz(n,a,i),f=i==="point"?B9:0;return ut({bubble:sp(0,f,P9),layouts:R9,overrides:{maxWidthFunction:F6(),maxHeightFunction:$h()}},s)},z9=function(n,a,i,s,f,d,b){var O=H9(n,a,d);lh(i,gf.CLOSE_ON_EXECUTE,s,!0).map(function(Re){a.preventDefault(),Pi.showMenuWithinBounds(f,{anchor:O},{menu:{markers:Pp("normal"),highlightImmediately:b},data:Re,type:"horizontal"},function(){return $e.some(cz(n,s.shared,d==="node"?"node":"selection"))}),n.fire(iz)})},$9=function(n,a,i,s,f,d){var b=Ra(),O=b.os.isiOS(),Re=b.os.isOSX(),Qe=b.os.isAndroid(),ot=b.deviceType.isTouch(),ct=function(){return!(Qe||O||Re&&ot)},St=function(){var It=i();z9(n,a,It,s,f,d,ct())};if((Re||O)&&d!=="node"){var At=function(){F9(n),St()};I9(n,a)?At():(n.once("selectionchange",At),n.once("touchend",function(){return n.off("selectionchange",At)}))}else St()},wz=function(n){return typeof n=="string"?n.split(/[ ,]/):n},Cz=function(n){return n.getParam("contextmenu_never_use_native",!1,"boolean")},V9=function(n,a,i){var s=n.ui.registry.getAll().contextMenus;return $e.from(n.getParam(a)).map(wz).getOrThunk(function(){return cn(wz(i),function(f){return pr(s,f)})})},U9=function(n){return n.getParam("contextmenu")===!1},j9=function(n){return V9(n,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},W9=function(n){return n.getParam("contextmenu_avoid_overlap","","string")},Sz=function(n){return We(n)?n==="|":n.type==="separator"},e8={type:"separator"},xz=function(n){var a=function(i){return{text:i.text,icon:i.icon,disabled:i.disabled,shortcut:i.shortcut}};if(We(n))return n;switch(n.type){case"separator":return e8;case"submenu":return ut(ut({type:"nestedmenuitem"},a(n)),{getSubmenuItems:function(){var i=n.getSubmenuItems();return We(i)?i:dn(i,xz)}});default:return ut(ut({type:"menuitem"},a(n)),{onAction:Ye(n.onAction)})}},Ez=function(n,a){if(a.length===0)return n;var i=sr(n).filter(function(f){return!Sz(f)}),s=i.fold(function(){return[]},function(f){return[e8]});return n.concat(s).concat(a).concat([e8])},q9=function(n,a,i){var s=er(a,function(f,d){return jn(n,d.toLowerCase()).map(function(b){var O=b.update(i);if(We(O))return Ez(f,O.split(" "));if(O.length>0){var Re=dn(O,xz);return Ez(f,Re)}else return f}).getOrThunk(function(){return f.concat([d])})},[]);return s.length>0&&Sz(s[s.length-1])&&s.pop(),s},K9=function(n,a){return a.ctrlKey&&!Cz(n)},kz=function(n,a){return a.type!=="longpress"&&(a.button!==2||a.target===n.getBody()&&a.pointerType==="")},Az=function(n,a){return kz(n,a)?n.selection.getStart(!0):a.target},G9=function(n,a){var i=W9(n),s=kz(n,a)?"selection":"point";if(lu(i)){var f=Az(n,a),d=Mg(Gt.fromDom(f),i);return d?"node":s}else return s},X9=function(n,a,i){var s=Ra(),f=s.deviceType.isTouch,d=uu(Pi.sketch({dom:{tag:"div"},lazySink:a,onEscape:function(){return n.focus()},onShow:function(){return i.setContextMenuState(!0)},onHide:function(){return i.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Hr([mo("dismissContextMenu",[wr(Qc(),function(Re,Qe){Do.close(Re),n.focus()})])])})),b=function(Re){return Pi.hide(d)},O=function(Re){if(Cz(n)&&Re.preventDefault(),!(K9(n,Re)||U9(n))){var Qe=G9(n,Re),ot=function(){var St=Az(n,Re),At=n.ui.registry.getAll(),It=j9(n);return q9(At.contextMenus,It,St)},ct=f()?$9:L9;ct(n,Re,ot,i,d,Qe)}};n.on("init",function(){var Re="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(f()?"":" ResizeWindow");n.on(Re,b),n.on("longpress contextmenu",O)})},t8=ic.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),PN=function(n){return function(a){return a.translate(-n.left,-n.top)}},IN=function(n){return function(a){return a.translate(n.left,n.top)}},Sm=function(n){return function(a,i){return er(n,function(s,f){return f(s)},Ut(a,i))}},FN=function(n,a,i){return n.fold(Sm([IN(i),PN(a)]),Sm([PN(a)]),Sm([]))},Oy=function(n,a,i){return n.fold(Sm([IN(i)]),Sm([]),Sm([IN(a)]))},Tz=function(n,a,i){return n.fold(Sm([]),Sm([PN(i)]),Sm([IN(a),PN(i)]))},Y9=function(n,a,i,s,f,d){var b=Oy(n,f,d),O=Oy(a,f,d);return Math.abs(b.left-O.left)<=i&&Math.abs(b.top-O.top)<=s},Q9=function(n,a,i,s,f,d){var b=Oy(n,f,d),O=Oy(a,f,d),Re=Math.abs(b.left-O.left),Qe=Math.abs(b.top-O.top);return Ut(Re,Qe)},_z=function(n,a,i){var s=n.fold(function(f,d){return{position:$e.some("absolute"),left:$e.some(f+"px"),top:$e.some(d+"px")}},function(f,d){return{position:$e.some("absolute"),left:$e.some(f-i.left+"px"),top:$e.some(d-i.top+"px")}},function(f,d){return{position:$e.some("fixed"),left:$e.some(f+"px"),top:$e.some(d+"px")}});return ut({right:$e.none(),bottom:$e.none()},s)},J9=function(n,a,i){return n.fold(function(s,f){return HN(s+a,f+i)},function(s,f){return vh(s+a,f+i)},function(s,f){return Qg(s+a,f+i)})},n8=function(n,a,i,s){var f=function(d,b){return function(O,Re){var Qe=d(a,i,s);return b(O.getOr(Qe.left),Re.getOr(Qe.top))}};return n.fold(f(Tz,HN),f(Oy,vh),f(FN,Qg))},HN=t8.offset,vh=t8.absolute,Qg=t8.fixed,Oz=function(n,a){var i=Ti(n,a);return Te(i)?NaN:parseInt(i,10)},Z9=function(n,a){var i=n.element,s=Oz(i,a.leftAttr),f=Oz(i,a.topAttr);return isNaN(s)||isNaN(f)?$e.none():$e.some(Ut(s,f))},eU=function(n,a,i){var s=n.element;ho(s,a.leftAttr,i.left+"px"),ho(s,a.topAttr,i.top+"px")},tU=function(n,a){var i=n.element;gu(i,a.leftAttr),gu(i,a.topAttr)},nU=function(n,a,i,s){return Z9(n,a).fold(function(){return i},function(f){return Qg(f.left+s.left,f.top+s.top)})},rU=function(n,a,i,s,f,d){var b=nU(n,a,i,s),O=a.mustSnap?oU(n,a,b,f,d):iU(n,a,b,f,d),Re=FN(b,f,d);return eU(n,a,Re),O.fold(function(){return{coord:Qg(Re.left,Re.top),extra:$e.none()}},function(Qe){return{coord:Qe.output,extra:Qe.extra}})},aU=function(n,a){tU(n,a)},Mz=function(n,a,i,s){return Tn(n,function(f){var d=f.sensor,b=Y9(a,d,f.range.left,f.range.top,i,s);return b?$e.some({output:n8(f.output,a,i,s),extra:f.extra}):$e.none()})},oU=function(n,a,i,s,f){var d=a.getSnapPoints(n),b=Mz(d,i,s,f);return b.orThunk(function(){var O=er(d,function(Re,Qe){var ot=Qe.sensor,ct=Q9(i,ot,Qe.range.left,Qe.range.top,s,f);return Re.deltas.fold(function(){return{deltas:$e.some(ct),snap:$e.some(Qe)}},function(St){var At=(ct.left+ct.top)/2,It=(St.left+St.top)/2;return At<=It?{deltas:$e.some(ct),snap:$e.some(Qe)}:Re})},{deltas:$e.none(),snap:$e.none()});return O.snap.map(function(Re){return{output:n8(Re.output,i,s,f),extra:Re.extra}})})},iU=function(n,a,i,s,f){var d=a.getSnapPoints(n);return Mz(d,i,s,f)},uU=function(n,a,i){return{coord:n8(n.output,n.output,a,i),extra:n.extra}},sU=function(n,a,i,s){var f=a.getTarget(n.element);if(a.repositionTarget){var d=$u(n.element),b=Ji(d),O=yN(f),Re=uU(s,b,O),Qe=_z(Re.coord,b,O);Cc(f,Qe)}},lU=Object.freeze({__proto__:null,snapTo:sU}),r8="data-initial-z-index",cU=function(n){ru(n.element).filter(mt).each(function(a){qi(a,r8).fold(function(){return g(a,"z-index")},function(i){return Qa(a,"z-index",i)}),gu(a,r8)})},fU=function(n){ru(n.element).filter(mt).each(function(a){bu(a,"z-index").each(function(i){ho(a,r8,i)}),Qa(a,"z-index",Hi(n.element,"z-index"))})},Dz=function(n,a){n.getSystem().addToGui(a),fU(a)},dU=function(n){cU(n),n.getSystem().removeFromGui(n)},Nz=function(n,a,i){return n.getSystem().build(gs.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[a]},events:i}))},vU=Pl("snaps",[yr("getSnapPoints"),qo("onSensor"),yr("leftAttr"),yr("topAttr"),En("lazyViewport",ju),En("mustSnap",!1)]),a8=[En("useFixed",xt),yr("blockerClass"),En("getTarget",tt),En("onDrag",He),En("repositionTarget",!0),En("onDrop",He),hi("getBounds",ju),vU],mU=function(n){return Io(bu(n,"left"),bu(n,"top"),bu(n,"position"),function(a,i,s){var f=s==="fixed"?Qg:HN;return f(parseInt(a,10),parseInt(i,10))}).getOrThunk(function(){var a=Vr(n);return vh(a.left,a.top)})},pU=function(n,a,i,s,f){var d=f.bounds,b=Oy(a,i,s),O=Cl(b.left,d.x,d.x+d.width-f.width),Re=Cl(b.top,d.y,d.y+d.height-f.height),Qe=vh(O,Re);return a.fold(function(){var ot=Tz(Qe,i,s);return HN(ot.left,ot.top)},Ke(Qe),function(){var ot=FN(Qe,i,s);return Qg(ot.left,ot.top)})},hU=function(n,a,i,s,f,d,b){var O=a.fold(function(){var Re=J9(i,d.left,d.top),Qe=FN(Re,s,f);return Qg(Qe.left,Qe.top)},function(Re){var Qe=rU(n,Re,i,d,s,f);return Qe.extra.each(function(ot){Re.onSensor(n,ot)}),Qe.coord});return pU(n,O,s,f,b)},gU=function(n,a,i,s){var f=a.getTarget(n.element);if(a.repositionTarget){var d=$u(n.element),b=Ji(d),O=yN(f),Re=mU(f),Qe=hU(n,a.snaps,Re,b,O,s,i),ot=_z(Qe,b,O);Cc(f,ot)}a.onDrag(n,f,s)},Lz=function(n,a){return{bounds:n.getBounds(),height:ft(a.element),width:Gr(a.element)}},o8=function(n,a,i,s,f){var d=i.update(s,f),b=i.getStartData().getOrThunk(function(){return Lz(a,n)});d.each(function(O){gU(n,a,b,O)})},Rz=function(n,a,i,s){a.each(dU),i.snaps.each(function(d){aU(n,d)});var f=i.getTarget(n.element);s.reset(),i.onDrop(n,f)},i8=function(n){return function(a,i){var s=function(f){i.setStartData(Lz(a,f))};return si(Ht([wr(nw(),function(f){i.getStartData().each(function(){return s(f)})})],n(a,i,s),!0))}},bU=function(n){return si([wr(kc(),n.forceDrop),wr(Xy(),n.drop),wr(Dv(),function(a,i){n.move(i.event)}),wr(Gy(),n.delayDrop)])},yU=function(n){return $e.from(Ut(n.x,n.y))},wU=function(n,a){return Ut(a.left-n.left,a.top-n.top)},CU=Object.freeze({__proto__:null,getData:yU,getDelta:wU}),Bz=function(n,a,i){return[wr(kc(),function(s,f){var d=f.event.raw;if(d.button===0){f.stop();var b=function(){return Rz(s,$e.some(Qe),n,a)},O=yx(b,200),Re={drop:b,delayDrop:O.schedule,forceDrop:b,move:function(ct){O.cancel(),o8(s,n,a,CU,ct)}},Qe=Nz(s,n.blockerClass,bU(Re)),ot=function(){i(s),Dz(s,Qe)};ot()}})]},SU=Ht(Ht([],a8,!0),[wi("dragger",{handlers:i8(Bz)})],!1),xU=function(n){return si([wr(ud(),n.forceDrop),wr(Ah(),n.drop),wr(g2(),n.drop),wr(Xc(),function(a,i){n.move(i.event)})])},EU=function(n){var a=n[0];return $e.some(Ut(a.clientX,a.clientY))},kU=function(n){var a=n.raw,i=a.touches;return i.length===1?EU(i):$e.none()},AU=function(n,a){return Ut(a.left-n.left,a.top-n.top)},Pz=Object.freeze({__proto__:null,getData:kU,getDelta:AU}),Iz=function(n,a,i){var s=Xi(),f=function(d){Rz(d,s.get(),n,a),s.clear()};return[wr(ud(),function(d,b){b.stop();var O=function(){return f(d)},Re={drop:O,delayDrop:He,forceDrop:O,move:function(ct){o8(d,n,a,Pz,ct)}},Qe=Nz(d,n.blockerClass,xU(Re));s.set(Qe);var ot=function(){i(d),Dz(d,Qe)};ot()}),wr(Xc(),function(d,b){b.stop(),o8(d,n,a,Pz,b.event)}),wr(Ah(),function(d,b){b.stop(),f(d)}),wr(g2(),f)]},TU=Ht(Ht([],a8,!0),[wi("dragger",{handlers:i8(Iz)})],!1),_U=function(n,a,i){return Ht(Ht([],Bz(n,a,i),!0),Iz(n,a,i),!0)},OU=Ht(Ht([],a8,!0),[wi("dragger",{handlers:i8(_U)})],!1),MU=SU,DU=TU,NU=OU,LU=Object.freeze({__proto__:null,mouse:MU,touch:DU,mouseOrTouch:NU}),RU=function(){var n=$e.none(),a=$e.none(),i=function(){n=$e.none(),a=$e.none()},s=function(Re,Qe){var ot=n.map(function(ct){return Re.getDelta(ct,Qe)});return n=$e.some(Qe),ot},f=function(Re,Qe){return Re.getData(Qe).bind(function(ot){return s(Re,ot)})},d=function(Re){a=$e.some(Re)},b=function(){return a},O=Ke({});return yl({readState:O,reset:i,update:f,getStartData:b,setStartData:d})},BU=Object.freeze({__proto__:null,init:RU}),Jg=ip({branchKey:"mode",branches:LU,name:"dragging",active:{events:function(n,a){var i=n.dragger;return i.handlers(n,a)}},extra:{snap:function(n){return{sensor:n.sensor,range:n.range,output:n.output,extra:$e.from(n.extra)}}},state:BU,apis:lU}),u8=40,zN=u8/2,Fz=function(n,a,i,s,f,d){return n.fold(function(){return Jg.snap({sensor:vh(i-zN,s-zN),range:Ut(f,d),output:vh($e.some(i),$e.some(s)),extra:{td:a}})},function(b){var O=i-zN,Re=s-zN,Qe=u8,ot=u8,ct=b.element.dom.getBoundingClientRect();return Jg.snap({sensor:vh(O,Re),range:Ut(Qe,ot),output:vh($e.some(i-ct.width/2),$e.some(s-ct.height/2)),extra:{td:a}})})},Hz=function(n,a,i){var s=function(f,d){return f.exists(function(b){return bi(b,d)})};return{getSnapPoints:n,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(f,d){var b=d.td;s(a.get(),b)||(a.set(b),i(b))},mustSnap:!0}},zz=function(n){return Ko(qs.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Hr([Jg.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:n}),Zp.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},PU=function(n,a){var i=Va([]),s=Va([]),f=Va(!1),d=Xi(),b=Xi(),O=function(ir){var Wr=Rl(ir);return Fz(At.getOpt(a),ir,Wr.x,Wr.y,Wr.width,Wr.height)},Re=function(){return dn(i.get(),function(ir){return O(ir)})},Qe=function(ir){var Wr=Rl(ir);return Fz(It.getOpt(a),ir,Wr.right,Wr.bottom,Wr.width,Wr.height)},ot=function(){return dn(s.get(),function(ir){return Qe(ir)})},ct=Hz(Re,d,function(ir){b.get().each(function(Wr){n.fire("TableSelectorChange",{start:ir,finish:Wr})})}),St=Hz(ot,b,function(ir){d.get().each(function(Wr){n.fire("TableSelectorChange",{start:Wr,finish:ir})})}),At=zz(ct),It=zz(St),Yt=uu(At.asSpec()),bn=uu(It.asSpec()),jt=function(ir,Wr,gr,qr){var Cr=Wr.dom.getBoundingClientRect();g(ir.element,"display");var ar=Zl(Gt.fromDom(n.getBody())).dom.innerHeight,Ir=gr(Cr),ga=qr(Cr,ar);(Ir||ga)&&Qa(ir.element,"display","none")},Sn=function(ir,Wr,gr,qr){var Cr=gr(Wr);Jg.snapTo(ir,Cr);var ar=function(ga){return ga[qr]<0},Ir=function(ga,hr){return ga[qr]>hr};jt(ir,Wr,ar,Ir)},Xn=function(ir){return Sn(Yt,ir,O,"top")},Kn=function(){return d.get().each(Xn)},wn=function(ir){return Sn(bn,ir,Qe,"bottom")},$n=function(){return b.get().each(wn)};Ra().deviceType.isTouch()&&(n.on("TableSelectionChange",function(ir){f.get()||(jv(a,Yt),jv(a,bn),f.set(!0)),d.set(ir.start),b.set(ir.finish),ir.otherCells.each(function(Wr){i.set(Wr.upOrLeftCells),s.set(Wr.downOrRightCells),Xn(ir.start),wn(ir.finish)})}),n.on("ResizeEditor ResizeWindow ScrollContent",function(){Kn(),$n()}),n.on("TableSelectionClear",function(){f.get()&&($f(Yt),$f(bn),f.set(!1)),d.clear(),b.clear()}))},IU=function(n){return!!(n.nodeType===1&&(n.nodeName==="BR"||n.getAttribute("data-mce-bogus")||n.getAttribute("data-mce-type")==="bookmark"))},FU=function(n,a,i){a.delimiter||(a.delimiter="»");var s=function(d){var b=d||[],O=dn(b,function(Qe,ot){return qs.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":ot,"tab-index":-1,"aria-level":ot+1},innerHtml:Qe.name},action:function(ct){n.focus(),n.selection.select(Qe.element),n.nodeChanged()},buttonBehaviours:Hr([vc.button(i.isDisabled),vu()])})}),Re={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+a.delimiter+" "}};return er(O.slice(1),function(Qe,ot){var ct=Qe;return ct.push(Re),ct.push(ot),ct},[O[0]])},f=function(d){for(var b=[],O=d.length;O-- >0;){var Re=d[O];if(Re.nodeType===1&&!IU(Re)){var Qe=n.fire("ResolveName",{name:Re.nodeName.toLowerCase(),target:Re});if(Qe.isDefaultPrevented()||b.push({name:Qe.name,element:Re}),Qe.isPropagationStopped())break}}return b};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Hr([Da.config({mode:"flow",selector:"div[role=button]"}),Pa.config({disabled:i.isDisabled}),vu(),Ui.config({}),eo.config({}),mo("elementPathEvents",[go(function(d,b){n.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return Da.focusIn(d)}),n.on("NodeChange",function(O){var Re=f(O.parents);Re.length>0?eo.set(d,s(Re)):eo.set(d,[])})})])]),components:[]}},Zg;(function(n){n[n.None=0]="None",n[n.Both=1]="Both",n[n.Vertical=2]="Vertical"})(Zg||(Zg={}));var HU=function(n,a,i,s,f){var d={};return d.height=LN(s+a.top,__(n),O_(n)),i===Zg.Both&&(d.width=LN(f+a.left,T_(n),a1(n))),d},$z=function(n,a,i){var s=Gt.fromDom(n.getContainer()),f=HU(n,a,i,Ue(s),na(s));Pr(f,function(d,b){return Qa(s,b,K6(d))}),XP(n)},zU=function(n){var a=!n.hasPlugin("autoresize"),i=n.getParam("resize",a);return i===!1?Zg.None:i==="both"?Zg.Both:Zg.Vertical},$N=function(n,a,i,s){var f=20,d=Ut(i*f,s*f);return $z(n,d,a),$e.some(!0)},$U=function(n,a){var i=zU(n);return i===Zg.None?$e.none():$e.some(Nc("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:a.translate("Resize")},behaviours:[Jg.config({mode:"mouse",repositionTarget:!1,onDrag:function(s,f,d){return $z(n,d,i)},blockerClass:"tox-blocker"}),Da.config({mode:"special",onLeft:function(){return $N(n,i,-1,0)},onRight:function(){return $N(n,i,1,0)},onUp:function(){return $N(n,i,0,-1)},onDown:function(){return $N(n,i,0,1)}}),Ui.config({}),to.config({})]},a.icons))},VU=function(n,a){var i,s=function(f,d,b){return eo.set(f,[ds(a.translate(["{0} "+b,d[b]]))])};return qs.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Hr([vc.button(a.isDisabled),vu(),Ui.config({}),eo.config({}),Xr.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),mo("wordcount-events",[lc(function(f){var d=Xr.getValue(f),b=d.mode==="words"?"characters":"words";Xr.setValue(f,{mode:b,count:d.count}),s(f,d.count,b)}),go(function(f){n.on("wordCountUpdate",function(d){var b=Xr.getValue(f).mode;Xr.setValue(f,{mode:b,count:d.wordCount}),s(f,d.wordCount,b)})})])]),eventOrder:(i={},i[Il()]=["disabling","alloy.base.behaviour","wordcount-events"],i)})},UU=function(n,a){var i=function(){var d=Dc.translate(["Powered by {0}","Tiny"]),b='<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+d+'">'+d+"</a>";return{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:b}}},s=function(){var d=[];return n.getParam("elementpath",!0,"boolean")&&d.push(FU(n,{},a)),n.hasPlugin("wordcount")&&d.push(VU(n,a)),n.getParam("branding",!0,"boolean")&&d.push(i()),d.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:d}]:[]},f=function(){var d=s(),b=$U(n,a);return d.concat(b.toArray())};return{dom:{tag:"div",classes:["tox-statusbar"]},components:f()}},jU=function(n){var a,i=n.inline,s=i?_V:CV,f=u1(n)?Vt:b6,d=$e.none(),b=Ra(),O=b.browser.isIE(),Re=O?["tox-platform-ie"]:[],Qe=b.deviceType.isTouch(),ot="tox-platform-touch",ct=Qe?[ot]:[],St=N_(n),At=R_(n),It=Dc.isRtl()?{attributes:{dir:"rtl"}}:{},Yt={attributes:(a={},a[Kw]=St?Hf.BottomToTop:Hf.TopToBottom,a)},bn=function(){return d.bind(eu.getHeader)},jt=function(){return f.isDocked(bn)},Sn=function(){Qa(Ds.element,"width",document.body.clientWidth+"px")},Xn=function(){var Ou=bi(ei(),At)&&Hi(At,"display")==="grid",xd={dom:ut({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(Re).concat(ct)},It),behaviours:Hr([Yi.config({useFixed:function(){return jt()}})])},Ev={dom:{styles:{width:document.body.clientWidth+"px"}},events:si([wr(Yc(),Sn)])};return nr(xd,Ou?Ev:{})},Kn=uu(Xn()),wn=function(){return So.value(Kn)},$n=Ko({dom:{tag:"div",classes:["tox-anchorbar"]}}),ir=function(){return d.bind(function(Ou){return $n.getOpt(Ou)}).getOrDie("Could not find a anchor bar element")},Wr=function(){return d.bind(function(Ou){return eu.getToolbar(Ou)}).getOrDie("Could not find more toolbar element")},gr=function(){return d.bind(function(Ou){return eu.getThrobber(Ou)}).getOrDie("Could not find throbber element")},qr=m6(Kn,n,ir),Cr=eu.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:qr,onEscape:function(){n.focus()}}),ar=xg(n),Ir=eu.parts.toolbar(ut({dom:{tag:"div",classes:["tox-toolbar"]},getSink:wn,providers:qr.shared.providers,onEscape:function(){n.focus()},type:ar,lazyToolbar:Wr,lazyHeader:function(){return bn().getOrDie("Could not find header element")}},Yt)),ga=eu.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:qr.shared.providers,onEscape:function(){n.focus()},type:ar}),hr=eu.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),da=eu.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),ka=eu.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:qr}),Ao=n.getParam("statusbar",!0,"boolean"),Xo=Ao&&!i?$e.some(UU(n,qr.shared.providers)):$e.none(),gi={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[hr,da]},Bi=o1(n),_l=rx(n),Cs=du(n),Dy=function(){return Bi?[ga]:_l?[Ir]:[]},_u=eu.parts.header({dom:ut({tag:"div",classes:["tox-editor-header"]},Yt),components:tn([Cs?[Cr]:[],Dy(),i1(n)?[]:[$n.asSpec()]]),sticky:u1(n),editor:n,sharedBackstage:qr.shared}),xm=tn([St?[]:[_u],i?[]:[gi],St?[_u]:[]]),Em={dom:{tag:"div",classes:["tox-editor-container"]},components:xm},eb=tn([[Em],i?[]:Xo.toArray(),[ka]]),km=B_(n),tb=ut(ut({role:"application"},Dc.isRtl()?{dir:"rtl"}:{}),km?{"aria-hidden":"true"}:{}),Qs=uu(eu.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(i?["tox-tinymce-inline"]:[]).concat(St?["tox-tinymce--toolbar-bottom"]:[]).concat(ct).concat(Re),styles:ut({visibility:"hidden"},km?{opacity:"0",border:"0"}:{}),attributes:tb},components:eb,behaviours:Hr([vu(),Pa.config({disableClass:"tox-tinymce--disabled"}),Da.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));d=$e.some(Qs),n.shortcuts.add("alt+F9","focus menubar",function(){eu.focusMenubar(Qs)}),n.shortcuts.add("alt+F10","focus toolbar",function(){eu.focusToolbar(Qs)}),n.addCommand("ToggleToolbarDrawer",function(){eu.toggleToolbarDrawer(Qs)}),n.addQueryStateHandler("ToggleToolbarDrawer",function(){return eu.isToolbarDrawerToggled(Qs)});var _f=MO(Qs),Ds=MO(Kn);Qf(n,_f,Ds);var nb=function(){var Ou={broadcastAll:Ds.broadcast,broadcastOn:Ds.broadcastOn,register:He};return{channels:Ou}},xv=function(){var Ou=K6(xV(n)),xd=K6(EV(n));return n.inline||(p("div","width",xd)&&Qa(Qs.element,"width",xd),p("div","height",Ou)?Qa(Qs.element,"height",Ou):Qa(Qs.element,"height","200px")),Ou},mh=function(){f.setup(n,qr.shared,bn),A9(n,qr),X9(n,wn,qr),Ef(n),Sv(n,gr,qr.shared),br(pP(n),function(Ns,Ol){n.ui.registry.addGroupToolbarButton(Ol,Ns)});var Ou=n.ui.registry.getAll(),xd=Ou.buttons,Ev=Ou.menuItems,Am=Ou.contextToolbars,Of=Ou.sidebars,kv=M_(n),ea={menuItems:Ev,menus:CP(n),menubar:SP(n),toolbar:kv.getOrThunk(function(){return xP(n)}),allowToolbarGroups:ar===Wl.floating,buttons:xd,sidebar:Of};ZV(n,Am,Kn,{backstage:qr}),PU(n,Kn);var po=n.getElement(),Zo=xv(),Ni={mothership:_f,uiMothership:Ds,outerContainer:Qs},Js={targetNode:po,height:Zo};return s.render(n,Ni,ea,qr,Js)};return{mothership:_f,uiMothership:Ds,backstage:qr,renderUI:mh,getUi:nb}},WU=function(n,a){var i=$e.from(Ti(n,"id")).fold(function(){var s=ya("dialog-describe");return ho(a,"id",s),s},tt);ho(n,"aria-describedby",i)},qU=function(n,a){var i=qi(n,"id").fold(function(){var s=ya("dialog-label");return ho(a,"id",s),s},tt);ho(n,"aria-labelledby",i)},KU=Ke([yr("lazySink"),ti("dragBlockClass"),hi("getBounds",ju),En("useTabstopAt",it),En("eventOrder",{}),Eu("modalBehaviours",[Da]),wl("onExecute"),al("onEscape")]),s8={sketch:tt},GU=Ke([Oc({name:"draghandle",overrides:function(n,a){return{behaviours:Hr([Jg.config({mode:"mouse",getTarget:function(i){return Tb(i,'[role="dialog"]').getOr(i)},blockerClass:n.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(a,null,2)).message),getBounds:n.getDragBounds})])}}}),hs({schema:[yr("dom")],name:"title"}),hs({factory:s8,schema:[yr("dom")],name:"close"}),hs({factory:s8,schema:[yr("dom")],name:"body"}),Oc({factory:s8,schema:[yr("dom")],name:"footer"}),_c({factory:{sketch:function(n,a){return ut(ut({},n),{dom:a.dom,components:a.components})}},schema:[En("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),En("components",[])],name:"blocker"})]),XU=function(n,a,i,s){var f,d=Xi(),b=function(It){d.set(It);var Yt=n.lazySink(It).getOrDie(),bn=s.blocker(),jt=Yt.getSystem().build(ut(ut({},bn),{components:bn.components.concat([$l(It)]),behaviours:Hr([to.config({}),mo("dialog-blocker-events",[iu(_d(),function(){Da.focusIn(It)})])])}));jv(Yt,jt),Da.focusIn(It)},O=function(It){d.clear(),ru(It.element).each(function(Yt){It.getSystem().getByDom(Yt).each(function(bn){$f(bn)})})},Re=function(It){return Wf(It,n,"body")},Qe=function(It){return Wf(It,n,"footer")},ot=function(It,Yt){Zf.block(It,Yt)},ct=function(It){Zf.unblock(It)},St=ya("modal-events"),At=ut(ut({},n.eventOrder),(f={},f[Fl()]=[St].concat(n.eventOrder["alloy.system.attached"]||[]),f));return{uid:n.uid,dom:n.dom,components:a,apis:{show:b,hide:O,getBody:Re,getFooter:Qe,setIdle:ct,setBusy:ot},eventOrder:At,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Ku(n.modalBehaviours,[eo.config({}),Da.config({mode:"cyclic",onEnter:n.onExecute,onEscape:n.onEscape,useTabstopAt:n.useTabstopAt}),Zf.config({getRoot:d.get}),mo(St,[go(function(It){qU(It.element,Wf(It,n,"title").element),WU(It.element,Wf(It,n,"body").element)})])])}},Fu=Ws({name:"ModalDialog",configFields:KU(),partFields:GU(),factory:XU,apis:{show:function(n,a){n.show(a)},hide:function(n,a){n.hide(a)},getBody:function(n,a){return n.getBody(a)},getFooter:function(n,a){return n.getFooter(a)},setBusy:function(n,a,i){n.setBusy(a,i)},setIdle:function(n,a){n.setIdle(a)}}}),YU=Ba([Za("type"),Za("name")].concat(Ip)),QU=Wu,Vz=[Ru("name","name",Po(function(){return ya("button-name")}),ou),yi("icon"),ac("align","end",["start","end"]),$i("primary",!1),$i("disabled",!1)],Uz=Ht(Ht([],Vz,!0),[Za("text")],!1),l8=Ht([rc("type",["submit","cancel","custom"])],Uz,!0),JU=Ht([rc("type",["menu"]),yi("text"),yi("tooltip"),yi("icon"),Is("items",YU)],Vz,!0),ZU=nc("type",{submit:l8,cancel:l8,custom:l8,menu:JU}),ej=[Za("type"),Za("text"),rc("level",["info","warn","error","success"]),Za("icon"),En("url","")],tj=Ba(ej),nj=function(n){return[Za("type"),n]},rj=[Za("type"),Za("text"),$i("disabled",!1),$i("primary",!1),Ru("name","name",Po(function(){return ya("button-name")}),ou),yi("icon"),$i("borderless",!1)],aj=Ba(rj),oj=[Za("type"),Za("name"),Za("label"),$i("disabled",!1)],ij=Ba(oj),uj=Wu,c8=[Za("type"),Za("name")],ed=c8.concat([yi("label")]),sj=ed.concat([En("columns","auto")]),lj=Ba(sj),cj=zy([Za("value"),Za("text"),Za("icon")]),fj=ed,dj=Ba(fj),vj=ou,mj=ed,pj=Ba(mj),hj=ou,gj=c8.concat([Hm("tag","textarea"),Za("scriptId"),Za("scriptUrl"),oc("settings",void 0)]),bj=c8.concat([Hm("tag","textarea"),_s("init")]),yj=Pm(function(n){return zi("customeditor.old",Bl(bj),n).orThunk(function(){return zi("customeditor.new",Bl(gj),n)})}),wj=ou,Cj=ed,Sj=Ba(Cj),xj=ZN(),Ej=function(n){return[Za("type"),Ad("columns"),n]},kj=[Za("type"),Za("html"),ac("presets","presentation",["presentation","document"])],Aj=Ba(kj),Tj=ed.concat([$i("sandboxed",!0)]),_j=Ba(Tj),Oj=ou,Mj=ed.concat([pl("currentState",Ba([yr("blob"),Za("url")]))]),Dj=Ba(Mj),Nj=ed.concat([yi("inputMode"),yi("placeholder"),$i("maximized",!1),$i("disabled",!1)]),Lj=Ba(Nj),Rj=ou,Bj=function(n){return[Za("type"),Za("label"),n]},Pj=[Za("text"),Za("value")],Ij=[Za("text"),Is("items",eL("items",function(){return jz}))],jz=Hy([Ba(Pj),Ba(Ij)]),Fj=ed.concat([Is("items",jz),$i("disabled",!1)]),Hj=Ba(Fj),zj=ou,$j=ed.concat([sb("items",[Za("text"),Za("value")]),bl("size",1),$i("disabled",!1)]),Vj=Ba($j),Uj=ou,jj=ed.concat([$i("constrain",!0),$i("disabled",!1)]),Wj=Ba(jj),Wz=Ba([Za("width"),Za("height")]),qj=[Za("type"),Is("header",ou),Is("cells",od(ou))],Kj=Ba(qj),Gj=ed.concat([yi("placeholder"),$i("maximized",!1),$i("disabled",!1)]),Xj=Ba(Gj),Yj=ou,Qj=ed.concat([ac("filetype","file",["image","media","file"]),En("disabled",!1)]),Jj=Ba(Qj),Zj=Ba([Za("value"),En("meta",{})]),f8=function(n){return Ru("items","items",ao(),od(Pm(function(a){return zi("Checking item of "+n,d8,a).fold(function(i){return So.error(Im(i))},function(i){return So.value(i)})})))},d8=l2(function(){return ub("type",{alertbanner:tj,bar:Ba(nj(f8("bar"))),button:aj,checkbox:ij,colorinput:dj,colorpicker:pj,dropzone:Sj,grid:Ba(Ej(f8("grid"))),iframe:_j,input:Lj,listbox:Hj,selectbox:Vj,sizeinput:Wj,textarea:Xj,urlinput:Jj,customeditor:yj,htmlpanel:Aj,imagetools:Dj,collection:lj,label:Ba(Bj(f8("label"))),table:Kj,panel:qz})}),eW=[Za("type"),En("classes",[]),Is("items",d8)],qz=Ba(eW),tW=[Ru("name","name",Po(function(){return ya("tab-name")}),ou),Za("title"),Is("items",d8)],nW=[Za("type"),sb("tabs",tW)],rW=Ba(nW),aW=Uz,oW=ZU,iW=Ba([Za("title"),pl("body",ub("type",{panel:qz,tabpanel:rW})),Hm("size","normal"),Is("buttons",oW),En("initialData",{}),hi("onAction",He),hi("onChange",He),hi("onSubmit",He),hi("onClose",He),hi("onCancel",He),En("onTabChange",He)]),uW=function(n){return zi("dialog",iW,n)},sW=Ba(Ht([rc("type",["cancel","custom"])],aW,!0)),lW=Ba([Za("title"),Za("url"),Eh("height"),Eh("width"),hl("buttons",sW),hi("onAction",He),hi("onCancel",He),hi("onClose",He),hi("onMessage",He)]),cW=function(n){return zi("dialog",lW,n)},v8=function(n){return Ge(n)?[n].concat(Mn(Un(n),v8)):Xe(n)?Mn(n,v8):[]},fW=function(n){return We(n.type)&&We(n.name)},dW={checkbox:uj,colorinput:vj,colorpicker:hj,dropzone:xj,input:Rj,iframe:Oj,sizeinput:Wz,selectbox:Uj,listbox:zj,size:Wz,textarea:Yj,urlinput:Zj,customeditor:wj,collection:cj,togglemenuitem:QU},vW=function(n){return $e.from(dW[n.type])},mW=function(n){return cn(v8(n),fW)},pW=function(n){var a=mW(n),i=Mn(a,function(s){return vW(s).fold(function(){return[]},function(f){return[pl(s.name,f)]})});return Ba(i)},Kz=function(n){var a=Kc(uW(n)),i=pW(n),s=n.initialData;return{internalDialog:a,dataValidator:i,initialData:s}},r2={open:function(n,a){var i=Kz(a);return n(i.internalDialog,i.initialData,i.dataValidator)},openUrl:function(n,a){var i=Kc(cW(a));return n(i)},redial:function(n){return Kz(n)}},Gz=function(n){var a=[],i={};return Pr(n,function(s,f){s.fold(function(){a.push(f)},function(d){i[f]=d})}),a.length>0?So.error(a):So.value(i)},hW=function(n,a){var i=Ko(oh.sketch(function(s){return{dom:{tag:"div",classes:["tox-form"].concat(n.classes)},components:dn(n.items,function(f){return ZD(s,f,a)})}}));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:Hr([Da.config({mode:"acyclic",useTabstopAt:Ot($g)}),xf.memento(i),vm.memento(i,{postprocess:function(s){return Gz(s).fold(function(f){return{}},tt)}})])}},gW=function(n,a){return{uid:n.uid,dom:n.dom,components:n.components,events:B0(n.action),behaviours:Ku(n.tabButtonBehaviours,[to.config({}),Da.config({mode:"execution",useSpace:!0,useEnter:!0}),Xr.config({store:{mode:"memory",initialValue:n.value}})]),domModification:n.domModification}},bW=jl({name:"TabButton",configFields:[En("uid",void 0),yr("value"),Ru("dom","dom",Ts(function(){return{attributes:{role:"tab",id:ya("aria"),"aria-selected":"false"}}}),qc()),ti("action"),En("domModification",{}),Eu("tabButtonBehaviours",[to,Da,Xr]),yr("view")],factory:gW}),yW=Ke([yr("tabs"),yr("dom"),En("clickToDismiss",!1),Eu("tabbarBehaviours",[ni,Da]),Fv(["tabClass","selectedClass"])]),wW=d0({factory:bW,name:"tabs",unit:"tab",overrides:function(n){var a=function(s,f){ni.dehighlight(s,f),za(s,es(),{tabbar:s,button:f})},i=function(s,f){ni.highlight(s,f),za(s,y2(),{tabbar:s,button:f})};return{action:function(s){var f=s.getSystem().getByUid(n.uid).getOrDie(),d=ni.isHighlighted(f,s),b=function(){return d&&n.clickToDismiss?a:d?He:i}();b(f,s)},domModification:{classes:[n.markers.tabClass]}}}}),CW=Ke([wW]),SW=function(n,a,i,s){return{uid:n.uid,dom:n.dom,components:a,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Ku(n.tabbarBehaviours,[ni.config({highlightClass:n.markers.selectedClass,itemClass:n.markers.tabClass,onHighlight:function(f,d){ho(d.element,"aria-selected","true")},onDehighlight:function(f,d){ho(d.element,"aria-selected","false")}}),Da.config({mode:"flow",getInitial:function(f){return ni.getHighlighted(f).map(function(d){return d.element})},selector:"."+n.markers.tabClass,executeOnMove:!0})])}},Xz=Ws({name:"Tabbar",configFields:yW(),partFields:CW(),factory:SW}),xW=function(n,a){return{uid:n.uid,dom:n.dom,behaviours:Ku(n.tabviewBehaviours,[eo.config({})]),domModification:{attributes:{role:"tabpanel"}}}},EW=jl({name:"Tabview",configFields:[Eu("tabviewBehaviours",[eo])],factory:xW}),kW=Ke([En("selectFirst",!0),qo("onChangeTab"),qo("onDismissTab"),En("tabs",[]),Eu("tabSectionBehaviours",[])]),AW=hs({factory:Xz,schema:[yr("dom"),id("markers",[yr("tabClass"),yr("selectedClass")])],name:"tabbar",defaults:function(n){return{tabs:n.tabs}}}),TW=hs({factory:EW,name:"tabview"}),_W=Ke([AW,TW]),OW=function(n,a,i,s){var f=function(b){var O=Xr.getValue(b);li(b,n,"tabview").each(function(Re){var Qe=Gn(n.tabs,function(ot){return ot.value===O});Qe.each(function(ot){var ct=ot.view();qi(b.element,"id").each(function(St){ho(Re.element,"aria-labelledby",St)}),eo.set(Re,ct),n.onChangeTab(Re,b,ct)})})},d=function(b,O){li(b,n,"tabbar").each(function(Re){O(Re).each(Hl)})};return{uid:n.uid,dom:n.dom,components:a,behaviours:i0(n.tabSectionBehaviours),events:si(tn([n.selectFirst?[go(function(b,O){d(b,ni.getFirst)})]:[],[wr(y2(),function(b,O){var Re=O.event.button;f(Re)}),wr(es(),function(b,O){var Re=O.event.button;n.onDismissTab(b,Re)})]])),apis:{getViewItems:function(b){return li(b,n,"tabview").map(function(O){return eo.contents(O)}).getOr([])},showTab:function(b,O){var Re=function(Qe){var ot=ni.getCandidates(Qe),ct=Gn(ot,function(St){return Xr.getValue(St)===O});return ct.filter(function(St){return!ni.isHighlighted(Qe,St)})};d(b,Re)}}}},My=Ws({name:"TabSection",configFields:kW(),partFields:_W(),factory:OW,apis:{getViewItems:function(n,a){return n.getViewItems(a)},showTab:function(n,a,i){n.showTab(a,i)}}}),MW=function(n,a,i){return dn(n,function(s,f){eo.set(i,n[f].view());var d=a.dom.getBoundingClientRect();return eo.set(i,[]),d.height})},DW=function(n){return fr(fo(n,function(a,i){return a>i?-1:a<i?1:0}))},NW=function(n,a,i){var s=Zn(n).dom,f=Tb(n,".tox-dialog-wrap").getOr(n),d=Hi(f,"position")==="fixed",b;d?b=Math.max(s.clientHeight,window.innerHeight):b=Math.max(s.offsetHeight,s.scrollHeight);var O=Ue(a),Re=a.dom.offsetLeft>=i.dom.offsetLeft+na(i),Qe=Re?Math.max(Ue(i),O):O,ot=parseInt(Hi(n,"margin-top"),10)||0,ct=parseInt(Hi(n,"margin-bottom"),10)||0,St=Ue(n)+ot+ct,At=St-Qe;return b-At},LW=function(n,a){fr(n).each(function(i){return My.showTab(a,i.value)})},Yz=function(n,a){Qa(n,"height",a+"px"),Ra().browser.isIE()?g(n,"flex-basis"):Qa(n,"flex-basis",a+"px")},VN=function(n,a,i){Tb(n,'[role="dialog"]').each(function(s){Su(s,'[role="tablist"]').each(function(f){i.get().map(function(d){return Qa(a,"height","0"),Qa(a,"flex-basis","0"),Math.min(d,NW(s,a,f))}).each(function(d){Yz(a,d)})})})},m8=function(n){return Su(n,'[role="tabpanel"]')},RW=function(n){var a=function(){var s=Xi(),f=[go(function(b){var O=b.element;m8(O).each(function(Re){Qa(Re,"visibility","hidden"),b.getSystem().getByDom(Re).toOptional().each(function(Qe){var ot=MW(n,Re,Qe),ct=DW(ot);ct.fold(s.clear,s.set)}),VN(O,Re,s),g(Re,"visibility"),LW(n,b),mf.requestAnimationFrame(function(){VN(O,Re,s)})})}),wr(Yc(),function(b){var O=b.element;m8(O).each(function(Re){VN(O,Re,s)})}),wr(RO,function(b,O){var Re=b.element;m8(Re).each(function(Qe){var ot=rf(ja(Qe));Qa(Qe,"visibility","hidden");var ct=bu(Qe,"height").map(function(It){return parseInt(It,10)});g(Qe,"height"),g(Qe,"flex-basis");var St=Qe.dom.getBoundingClientRect().height,At=ct.forall(function(It){return St>It});At?(s.set(St),VN(Re,Qe,s)):ct.each(function(It){Yz(Qe,It)}),g(Qe,"visibility"),ot.each(nf)})})],d=!1;return{extraEvents:f,selectFirst:d}}(),i=function(){var s=[],f=!0;return{extraEvents:s,selectFirst:f}}();return{smartTabHeight:a,naiveTabHeight:i}},Qz="send-data-to-section",Jz="send-data-to-view",BW=function(n,a){var i=Va({}),s=function(Re){var Qe=Xr.getValue(Re),ot=Gz(Qe).getOr({}),ct=i.get(),St=nr(ct,ot);i.set(St)},f=function(Re){var Qe=i.get();Xr.setValue(Re,Qe)},d=Va(null),b=dn(n.tabs,function(Re){return{value:Re.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:a.shared.providers.translate(Re.title)},view:function(){return[oh.sketch(function(Qe){return{dom:{tag:"div",classes:["tox-form"]},components:dn(Re.items,function(ot){return ZD(Qe,ot,a)}),formBehaviours:Hr([Da.config({mode:"acyclic",useTabstopAt:Ot($g)}),mo("TabView.form.events",[go(f),sc(s)]),ul.config({channels:Mv([{key:Qz,value:{onReceive:s}},{key:Jz,value:{onReceive:f}}])})])}})]}}}),O=RW(b).smartTabHeight;return My.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(Re,Qe,ot){var ct=Xr.getValue(Qe);za(Re,uv,{name:ct,oldName:d.get()}),d.set(ct)},tabs:b,components:[My.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Xz.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Hr([Ui.config({})])}),My.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:O.selectFirst,tabSectionBehaviours:Hr([mo("tabpanel",O.extraEvents),Da.config({mode:"acyclic"}),Oo.config({find:function(Re){return fr(My.getViewItems(Re))}}),Xr.config({store:{mode:"manual",getValue:function(Re){return Re.getSystem().broadcastOn([Qz],{}),i.get()},setValue:function(Re,Qe){i.set(Qe),Re.getSystem().broadcastOn([Jz],{})}}})])})},p8=ya("update-dialog"),Zz=ya("update-title"),e$=ya("update-body"),t$=ya("update-footer"),n$=ya("body-send-message"),r$=function(n,a,i,s){var f=function(O){switch(O.body.type){case"tabpanel":return[BW(O.body,i)];default:return[hW(O.body,i)]}},d=function(O,Re){return $e.some({isTabPanel:function(){return Re.body.type==="tabpanel"}})},b={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:ut(ut({},a.map(function(O){return{id:O}}).getOr({})),s?b:{})},components:[],behaviours:Hr([xf.childAt(0),pc.config({channel:e$,updateState:d,renderComponents:f,initialData:n})])}},PW=function(n,a,i,s){return r$(n,$e.some(a),i,s)},IW=function(n,a){var i=r$(n,$e.none(),a,!1);return Fu.parts.body(i)},FW=function(n){var a={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[JM({dom:{tag:"iframe",attributes:{src:n.url}},behaviours:Hr([Ui.config({}),to.config({})])})]}],behaviours:Hr([Da.config({mode:"acyclic",useTabstopAt:Ot($g)})])};return Fu.parts.body(a)},HW=l1.deviceType.isTouch(),a$=function(n,a){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[n,a]}},o$=function(n,a){return Fu.parts.close(qs.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":a.translate("Close")}},action:n,buttonBehaviours:Hr([Ui.config({})])}))},i$=function(){return Fu.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},u$=function(n,a){return Fu.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:dd("<p>"+U0(a.translate(n))+"</p>")}]}]})},s$=function(n){return Fu.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:n})},l$=function(n,a){return[gs.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:n}),gs.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:a})]},h8=function(n){var a,i="tox-dialog",s=i+"-wrap",f=s+"__backdrop",d=i+"__disable-scroll";return Fu.sketch({lazySink:n.lazySink,onEscape:function(b){return n.onEscape(b),$e.some(!0)},useTabstopAt:function(b){return!$g(b)},dom:{tag:"div",classes:[i].concat(n.extraClasses),styles:ut({position:"relative"},n.extraStyles)},components:Ht([n.header,n.body],n.footer.toArray(),!0),parts:{blocker:{dom:dd('<div class="'+s+'"></div>'),components:[{dom:{tag:"div",classes:HW?[f,f+"--opaque"]:[f]}}]}},dragBlockClass:s,modalBehaviours:Hr(Ht([to.config({}),mo("dialog-events",n.dialogEvents.concat([iu(_d(),function(b,O){Da.focusIn(b)})])),mo("scroll-lock",[go(function(){Cu(ei(),d)}),sc(function(){cu(ei(),d)})])],n.extraBehaviours,!0)),eventOrder:ut((a={},a[Il()]=["dialog-events"],a[Fl()]=["scroll-lock","dialog-events","alloy.base.behaviour"],a[Nh()]=["alloy.base.behaviour","dialog-events","scroll-lock"],a),n.eventOrder)})},c$=function(n){return qs.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close"),title:n.translate("Close")}},components:[Nc("close",{tag:"div",classes:["tox-icon"]},n.icons)],action:function(a){$o(a,fm)}})},f$=function(n,a,i){var s=function(f){return[ds(i.translate(f.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:ut({},a.map(function(f){return{id:f}}).getOr({}))},components:s(n),behaviours:Hr([pc.config({channel:Zz,renderComponents:s})])}},d$=function(){return{dom:dd('<div class="tox-dialog__draghandle"></div>')}},zW=function(n,a,i){return gs.sketch({dom:dd('<div class="tox-dialog__header"></div>'),components:[f$(n,$e.some(a),i),d$(),c$(i)],containerBehaviours:Hr([Jg.config({mode:"mouse",blockerClass:"blocker",getTarget:function(s){return tf(s,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])})},$W=function(n,a){var i=Fu.parts.title(f$(n,$e.none(),a)),s=Fu.parts.draghandle(d$()),f=Fu.parts.close(c$(a)),d=[i].concat(n.draggable?[s]:[]).concat([f]);return gs.sketch({dom:dd('<div class="tox-dialog__header"></div>'),components:d})},v$=function(n,a){return $W({title:a.shared.providers.translate(n),draggable:a.dialog.isDraggableModal()},a.shared.providers)},m$=function(n,a,i){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":i.translate(n)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:a,components:[{dom:dd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},p$=function(n,a,i){return{onClose:function(){return i.closeWindow()},onBlock:function(s){Fu.setBusy(n(),function(f,d){return m$(s.message,d,a)})},onUnblock:function(){Fu.setIdle(n())}}},h$=function(n,a,i,s){var f,d=function(b,O){return $e.some(O)};return uu(h8(ut(ut({},n),{lazySink:s.shared.getSink,extraBehaviours:Ht([pc.config({channel:p8,updateState:d,initialData:a}),vm.memory({})],n.extraBehaviours,!0),onEscape:function(b){$o(b,fm)},dialogEvents:i,eventOrder:(f={},f[uc()]=[pc.name(),ul.name()],f[Fl()]=["scroll-lock",pc.name(),"messages","dialog-events","alloy.base.behaviour"],f[Nh()]=["alloy.base.behaviour","dialog-events","messages",pc.name(),"scroll-lock"],f)})))},g$=function(n){var a=function(i){var s=dn(i.items,function(f){var d=Va(!1);return ut(ut({},f),{storage:d})});return ut(ut({},i),{items:s})};return dn(n,function(i){return i.type==="menu"?a(i):i})},b$=function(n){return er(n,function(a,i){if(i.type==="menu"){var s=i;return er(s.items,function(f,d){return f[d.name]=d.storage,f},a)}return a},{})},y$=function(n,a){return[Od(_d(),eD),n(Ng,function(i,s){a.onClose(),s.onClose()}),n(fm,function(i,s,f,d){s.onCancel(i),$o(d,Ng)}),wr(Tx,function(i,s){return a.onUnblock()}),wr(Ax,function(i,s){return a.onBlock(s.event)})]},VW=function(n,a){var i=function(f,d){return wr(f,function(b,O){s(b,function(Re,Qe){d(n(),Re,O.event,b)})})},s=function(f,d){pc.getState(f).get().each(function(b){d(b,f)})};return Ht(Ht([],y$(i,a),!0),[i(Xf,function(f,d,b){d.onAction(f,{name:b.name})})],!1)},UW=function(n,a,i){var s=function(d,b){return wr(d,function(O,Re){f(O,function(Qe,ot){b(n(),Qe,Re.event,O)})})},f=function(d,b){pc.getState(d).get().each(function(O){b(O.internalDialog,d)})};return Ht(Ht([],y$(s,a),!0),[s(Lg,function(d,b){return b.onSubmit(d)}),s(kl,function(d,b,O){b.onChange(d,{name:O.name})}),s(Xf,function(d,b,O,Re){var Qe=function(){return Da.focusIn(Re)},ot=function(At){return Mm(At,"disabled")||qi(At,"aria-disabled").exists(function(It){return It==="true"})},ct=ja(Re.element),St=rf(ct);b.onAction(d,{name:O.name,value:O.value}),rf(ct).fold(Qe,function(At){ot(At)||St.exists(function(It){return ss(At,It)&&ot(It)})?Qe():i().toOptional().filter(function(It){return!ss(It.element,At)}).each(Qe)})}),s(uv,function(d,b,O){b.onTabChange(d,{newTabName:O.name,oldTabName:O.oldName})}),sc(function(d){var b=n();Xr.setValue(d,b.getData())})],!1)},g8={initUrlDialog:VW,initDialog:UW},jW=function(n,a){return oy(n,n.type,a)},WW=function(n,a,i){return Gn(a,function(s){return s.name===i}).bind(function(s){return s.memento.getOpt(n)})},qW=function(n,a){var i=a.map(function(O){return O.footerButtons}).getOr([]),s=fn(i,function(O){return O.align==="start"}),f=function(O,Re){return gs.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+O]},components:dn(Re,function(Qe){return Qe.memento.asSpec()})})},d=f("start",s.pass),b=f("end",s.fail);return[d,b]},w$=function(n,a){var i=function(s,f){var d=dn(f.buttons,function(O){var Re=Ko(jW(O,a));return{name:O.name,align:O.align,memento:Re}}),b=function(O,Re){return WW(O,d,Re)};return $e.some({lookupByName:b,footerButtons:d})};return{dom:dd('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Hr([pc.config({channel:t$,initialData:n,updateState:i,renderComponents:qW})])}},KW=function(n,a){return w$(n,a)},C$=function(n,a){return Fu.parts.footer(w$(n,a))},b8=function(n,a){var i=n.getRoot();if(i.getSystem().isConnected()){var s=Oo.getCurrent(n.getFormWrapper()).getOr(n.getFormWrapper());return oh.getField(s,a).fold(function(){var f=n.getFooter(),d=pc.getState(f);return d.get().bind(function(b){return b.lookupByName(s,a)})},function(f){return $e.some(f)})}else return $e.none()},GW=function(n,a){var i=n.getRoot();return pc.getState(i).get().map(function(s){return Kc(zi("data",s.dataValidator,a))}).getOr(a)},S$=function(n,a,i){var s=function(Yt){var bn=n.getRoot();bn.getSystem().isConnected()&&Yt(bn)},f=function(){var Yt=n.getRoot(),bn=Yt.getSystem().isConnected()?n.getFormWrapper():Yt,jt=Xr.getValue(bn),Sn=br(i,function(Xn){return Xn.get()});return ut(ut({},jt),Sn)},d=function(Yt){s(function(bn){var jt=It.getData(),Sn=ut(ut({},jt),Yt),Xn=GW(n,Sn),Kn=n.getFormWrapper();Xr.setValue(Kn,Xn),Pr(i,function(wn,$n){pr(Sn,$n)&&wn.set(Sn[$n])})})},b=function(Yt){b8(n,Yt).each(Pa.disable)},O=function(Yt){b8(n,Yt).each(Pa.enable)},Re=function(Yt){b8(n,Yt).each(to.focus)},Qe=function(Yt){if(!We(Yt))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(function(bn){za(bn,Ax,{message:Yt})})},ot=function(){s(function(Yt){$o(Yt,Tx)})},ct=function(Yt){s(function(bn){var jt=n.getBody(),Sn=pc.getState(jt);Sn.get().exists(function(Xn){return Xn.isTabPanel()})&&Oo.getCurrent(jt).each(function(Xn){My.showTab(Xn,Yt)})})},St=function(Yt){s(function(bn){var jt=a(Yt);bn.getSystem().broadcastOn([p8],jt),bn.getSystem().broadcastOn([Zz],jt.internalDialog),bn.getSystem().broadcastOn([e$],jt.internalDialog),bn.getSystem().broadcastOn([t$],jt.internalDialog),It.setData(jt.initialData)})},At=function(){s(function(Yt){$o(Yt,Ng)})},It={getData:f,setData:d,disable:b,enable:O,focus:Re,block:Qe,unblock:ot,showTab:ct,redial:St,close:At};return It},XW=function(n){switch(n){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},YW=function(n,a,i){var s=v$(n.internalDialog.title,i),f=IW({body:n.internalDialog.body},i),d=g$(n.internalDialog.buttons),b=b$(d),O=C$({buttons:d},i),Re=g8.initDialog(function(){return At},p$(function(){return ct},i.shared.providers,a),i.shared.getSink),Qe=XW(n.internalDialog.size),ot={header:s,body:f,footer:$e.some(O),extraClasses:Qe,extraBehaviours:[],extraStyles:{}},ct=h$(ot,n,Re,i),St=function(){var It=function(){var Yt=Fu.getBody(ct);return Oo.getCurrent(Yt).getOr(Yt)};return{getRoot:Ke(ct),getBody:function(){return Fu.getBody(ct)},getFooter:function(){return Fu.getFooter(ct)},getFormWrapper:It}}(),At=S$(St,a.redial,b);return{dialog:ct,instanceApi:At}},QW=function(n,a,i,s){var f,d,b=ya("dialog-label"),O=ya("dialog-content"),Re=function(jt,Sn){return $e.some(Sn)},Qe=Ko(zW({title:n.internalDialog.title,draggable:!0},b,i.shared.providers)),ot=Ko(PW({body:n.internalDialog.body},O,i,s)),ct=g$(n.internalDialog.buttons),St=b$(ct),At=Ko(KW({buttons:ct},i)),It=g8.initDialog(function(){return bn},{onBlock:function(jt){Zf.block(Yt,function(Sn,Xn){return m$(jt.message,Xn,i.shared.providers)})},onUnblock:function(){Zf.unblock(Yt)},onClose:function(){return a.closeWindow()}},i.shared.getSink),Yt=uu({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(f={role:"dialog"},f["aria-labelledby"]=b,f["aria-describedby"]=O,f)},eventOrder:(d={},d[uc()]=[pc.name(),ul.name()],d[Il()]=["execute-on-form"],d[Fl()]=["reflecting","execute-on-form"],d),behaviours:Hr([Da.config({mode:"cyclic",onEscape:function(jt){return $o(jt,Ng),$e.some(!0)},useTabstopAt:function(jt){return!$g(jt)&&(Zt(jt)!=="button"||Ti(jt,"disabled")!=="disabled")}}),pc.config({channel:p8,updateState:Re,initialData:n}),to.config({}),mo("execute-on-form",It.concat([iu(_d(),function(jt,Sn){Da.focusIn(jt)})])),Zf.config({getRoot:function(){return $e.some(Yt)}}),eo.config({}),vm.memory({})]),components:[Qe.asSpec(),ot.asSpec(),At.asSpec()]}),bn=S$({getRoot:Ke(Yt),getFooter:function(){return At.get(Yt)},getBody:function(){return ot.get(Yt)},getFormWrapper:function(){var jt=ot.get(Yt);return Oo.getCurrent(jt).getOr(jt)}},a.redial,St);return{dialog:Yt,instanceApi:bn}},y8=tinymce.util.Tools.resolve("tinymce.util.URI"),JW=function(n){var a=function(b){n.getSystem().isConnected()&&b(n)},i=function(b){if(!We(b))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");a(function(O){za(O,Ax,{message:b})})},s=function(){a(function(b){$o(b,Tx)})},f=function(){a(function(b){$o(b,Ng)})},d=function(b){a(function(O){O.getSystem().broadcastOn([n$],b)})};return{block:i,unblock:s,close:f,sendMessage:d}},ZW=["insertContent","setContent","execCommand","close","block","unblock"],x$=function(n){return Ge(n)&&ZW.indexOf(n.mceAction)!==-1},eq=function(n){return!x$(n)&&Ge(n)&&pr(n,"mceAction")},tq=function(n,a,i){switch(i.mceAction){case"insertContent":n.insertContent(i.content);break;case"setContent":n.setContent(i.content);break;case"execCommand":var s=P(i.ui)?i.ui:!1;n.execCommand(i.cmd,s,i.value);break;case"close":a.close();break;case"block":a.block(i.message);break;case"unblock":a.unblock();break}},nq=function(n,a,i,s){var f,d=v$(n.title,s),b=FW(n),O=n.buttons.bind(function(Sn){return Sn.length===0?$e.none():$e.some(C$({buttons:Sn},s))}),Re=g8.initUrlDialog(function(){return jt},p$(function(){return bn},s.shared.providers,a)),Qe=ut(ut({},n.height.fold(function(){return{}},function(Sn){return{height:Sn+"px","max-height":Sn+"px"}})),n.width.fold(function(){return{}},function(Sn){return{width:Sn+"px","max-width":Sn+"px"}})),ot=n.width.isNone()&&n.height.isNone()?["tox-dialog--width-lg"]:[],ct=new y8(n.url,{base_uri:new y8(window.location.href)}),St=ct.protocol+"://"+ct.host+(ct.port?":"+ct.port:""),At=up(),It=[mo("messages",[go(function(){var Sn=su(Gt.fromDom(window),"message",function(Xn){if(ct.isSameOrigin(new y8(Xn.raw.origin))){var Kn=Xn.raw.data;x$(Kn)?tq(i,jt,Kn):eq(Kn)&&n.onMessage(jt,Kn)}});At.set(Sn)}),sc(At.clear)]),ul.config({channels:(f={},f[n$]={onReceive:function(Sn,Xn){Su(Sn.element,"iframe").each(function(Kn){var wn=Kn.dom.contentWindow;wn.postMessage(Xn,St)})}},f)})],Yt={header:d,body:b,footer:O,extraClasses:ot,extraBehaviours:It,extraStyles:Qe},bn=h$(Yt,n,Re,s),jt=JW(bn);return{dialog:bn,instanceApi:jt}},rq=function(n){var a=n.backstage.shared,i=function(s,f){var d=function(){Fu.hide(Qe),f()},b=Ko(oy({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:$e.none()},"cancel",n.backstage)),O=i$(),Re=o$(d,a.providers),Qe=uu(h8({lazySink:function(){return a.getSink()},header:a$(O,Re),body:u$(s,a.providers),footer:$e.some(s$(l$([],[b.asSpec()]))),onEscape:d,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[wr(fm,d)],eventOrder:{}}));Fu.show(Qe);var ot=b.get(Qe);to.focus(ot)};return{open:i}},aq=function(n){var a=n.backstage.shared,i=function(s,f){var d=function(St){Fu.hide(ot),f(St)},b=Ko(oy({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:$e.none()},"submit",n.backstage)),O=oy({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:$e.none()},"cancel",n.backstage),Re=i$(),Qe=o$(function(){return d(!1)},a.providers),ot=uu(h8({lazySink:function(){return a.getSink()},header:a$(Re,Qe),body:u$(s,a.providers),footer:$e.some(s$(l$([],[O,b.asSpec()]))),onEscape:function(){return d(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[wr(fm,function(){return d(!1)}),wr(Lg,function(){return d(!0)})],eventOrder:{}}));Fu.show(ot);var ct=b.get(ot);to.focus(ct)};return{open:i}},oq=function(n,a){return Kc(zi("data",a,n))},iq=function(n){return Mg(n,".tox-alert-dialog")||Mg(n,".tox-confirm-dialog")},uq=function(n,a,i){return a&&i?[]:[e.config({contextual:{lazyContext:function(){return $e.some(au(Gt.fromDom(n.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]},sq=function(n){var a=n.backstage,i=n.editor,s=u1(i),f=rq(n),d=aq(n),b=function(It,Yt,bn){return Yt!==void 0&&Yt.inline==="toolbar"?ot(It,a.shared.anchors.inlineDialog(),bn,Yt.ariaAttrs):Yt!==void 0&&Yt.inline==="cursor"?ot(It,a.shared.anchors.cursor(),bn,Yt.ariaAttrs):Qe(It,bn)},O=function(It,Yt){return Re(It,Yt)},Re=function(It,Yt){var bn=function(jt){var Sn=nq(jt,{closeWindow:function(){Fu.hide(Sn.dialog),Yt(Sn.instanceApi)}},i,a);return Fu.show(Sn.dialog),Sn.instanceApi};return r2.openUrl(bn,It)},Qe=function(It,Yt){var bn=function(jt,Sn,Xn){var Kn=Sn,wn={dataValidator:Xn,initialData:Kn,internalDialog:jt},$n=YW(wn,{redial:r2.redial,closeWindow:function(){Fu.hide($n.dialog),Yt($n.instanceApi)}},a);return Fu.show($n.dialog),$n.instanceApi.setData(Kn),$n.instanceApi};return r2.open(bn,It)},ot=function(It,Yt,bn,jt){var Sn=function(Xn,Kn,wn){var $n=oq(Kn,wn),ir=Xi(),Wr=a.shared.header.isPositionedAtTop(),gr={dataValidator:wn,initialData:$n,internalDialog:Xn},qr=function(){return ir.on(function(Ir){Pi.reposition(Ir),e.refresh(Ir)})},Cr=QW(gr,{redial:r2.redial,closeWindow:function(){ir.on(Pi.hide),i.off("ResizeEditor",qr),ir.clear(),bn(Cr.instanceApi)}},a,jt),ar=uu(Pi.sketch(ut(ut({lazySink:a.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},Wr?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Hr(Ht([mo("window-manager-inline-events",[wr(Qc(),function(Ir,ga){$o(Cr.dialog,fm)})])],uq(i,s,Wr),!0)),isExtraPart:function(Ir,ga){return iq(ga)}})));return ir.set(ar),Pi.showWithin(ar,$l(Cr.dialog),{anchor:Yt},$e.some(ei())),(!s||!Wr)&&(e.refresh(ar),i.on("ResizeEditor",qr)),Cr.instanceApi.setData($n),Da.focusIn(Cr.dialog),Cr.instanceApi};return r2.open(Sn,It)},ct=function(It,Yt){d.open(It,function(bn){Yt(bn)})},St=function(It,Yt){f.open(It,function(){Yt()})},At=function(It){It.close()};return{open:b,openUrl:O,alert:St,close:At,confirm:ct}};function lq(){yt.add("silver",function(n){var a=jU(n),i=a.uiMothership,s=a.backstage,f=a.renderUI,d=a.getUi;iv.register(n,s.shared);var b=sq({editor:n,backstage:s});return{renderUI:f,getWindowManagerImpl:Ke(b),getNotificationManagerImpl:function(){return BS(n,{backstage:s},i)},ui:d()}})}lq()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="M13 11l-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z" opacity=".2"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}});(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(Et,Ht,an){var Mt=Ht==="UL"?"InsertUnorderedList":"InsertOrderedList";Et.execCommand(Mt,!1,an===!1?null:{"list-style-type":an})},C=function(Et){Et.addCommand("ApplyUnorderedListStyle",function(Ht,an){y(Et,"UL",an["list-style-type"])}),Et.addCommand("ApplyOrderedListStyle",function(Ht,an){y(Et,"OL",an["list-style-type"])})},A=tinymce.util.Tools.resolve("tinymce.util.Tools"),We=function(Et){var Ht=Et.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return Ht?Ht.split(/[ ,]/):[]},Ge=function(Et){var Ht=Et.getParam("advlist_bullet_styles","default,circle,square");return Ht?Ht.split(/[ ,]/):[]},Xe=function(){},Ve=function(Et){return function(){return Et}},P=function(Et){return Et},Te=Ve(!1),j=Ve(!0),x=function(){return qe},qe=function(){var Et=function(Mt){return Mt()},Ht=P,an={fold:function(Mt,vn){return Mt()},isSome:Te,isNone:j,getOr:Ht,getOrThunk:Et,getOrDie:function(Mt){throw new Error(Mt||"error: getOrDie called on none.")},getOrNull:Ve(null),getOrUndefined:Ve(void 0),or:Ht,orThunk:Et,map:x,each:Xe,bind:x,exists:Te,forall:j,filter:function(){return x()},toArray:function(){return[]},toString:Ve("none()")};return an}(),Be=function(Et){var Ht=Ve(Et),an=function(){return vn},Mt=function(Wn){return Wn(Et)},vn={fold:function(Wn,$e){return $e(Et)},isSome:j,isNone:Te,getOr:Ht,getOrThunk:Ht,getOrDie:Ht,getOrNull:Ht,getOrUndefined:Ht,or:an,orThunk:an,map:function(Wn){return Be(Wn(Et))},each:function(Wn){Wn(Et)},bind:Mt,exists:Mt,forall:Mt,filter:function(Wn){return Wn(Et)?vn:qe},toArray:function(){return[Et]},toString:function(){return"some("+Et+")"}};return vn},De=function(Et){return Et==null?qe:Be(Et)},He={some:Be,none:x,from:De},Ye=function(Et,Ht){return Et.$.contains(Et.getBody(),Ht)},st=function(Et){return Et&&/^(TH|TD)$/.test(Et.nodeName)},rt=function(Et){return function(Ht){return Ht&&/^(OL|UL|DL)$/.test(Ht.nodeName)&&Ye(Et,Ht)}},Ke=function(Et){var Ht=Et.dom.getParent(Et.selection.getNode(),"ol,ul"),an=Et.dom.getStyle(Ht,"listStyleType");return He.from(an)},tt=function(Et,Ht){for(var an=0;an<Et.length;an++){var Mt=Et[an];if(Ht(Mt))return an}return-1},at=function(Et){return Et.replace(/\-/g," ").replace(/\b\w/g,function(Ht){return Ht.toUpperCase()})},et=function(Et,Ht,an){var Mt=tt(Ht.parents,st),vn=Mt!==-1?Ht.parents.slice(0,Mt):Ht.parents,Wn=A.grep(vn,rt(Et));return Wn.length>0&&Wn[0].nodeName===an},Ot=function(Et,Ht){return function(an){var Mt=function(vn){an.setActive(et(Et,vn,Ht))};return Et.on("NodeChange",Mt),function(){return Et.off("NodeChange",Mt)}}},wt=function(Et,Ht,an,Mt,vn,Wn){Et.ui.registry.addSplitButton(Ht,{tooltip:an,icon:vn==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function($e){var Dt=A.map(Wn,function(vt){var nn=vn==="OL"?"num":"bull",_t=vt==="disc"||vt==="decimal"?"default":vt,Nt=vt==="default"?"":vt,ln=at(vt);return{type:"choiceitem",value:Nt,icon:"list-"+nn+"-"+_t,text:ln}});$e(Dt)},onAction:function(){return Et.execCommand(Mt)},onItemAction:function($e,Dt){y(Et,vn,Dt)},select:function($e){var Dt=Ke(Et);return Dt.map(function(vt){return $e===vt}).getOr(!1)},onSetup:Ot(Et,vn)})},xt=function(Et,Ht,an,Mt,vn,Wn){Et.ui.registry.addToggleButton(Ht,{active:!1,tooltip:an,icon:vn==="OL"?"ordered-list":"unordered-list",onSetup:Ot(Et,vn),onAction:function(){return Et.execCommand(Mt)}})},it=function(Et,Ht,an,Mt,vn,Wn){Wn.length>1?wt(Et,Ht,an,Mt,vn,Wn):xt(Et,Ht,an,Mt,vn)},yt=function(Et){it(Et,"numlist","Numbered list","InsertOrderedList","OL",We(Et)),it(Et,"bullist","Bullet list","InsertUnorderedList","UL",Ge(Et))};function ut(){v.add("advlist",function(Et){Et.hasPlugin("lists")&&(yt(Et),C(Et))})}ut()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),C=tinymce.util.Tools.resolve("tinymce.util.Tools"),A=function(yt){return yt.getParam("allow_html_in_named_anchor",!1,"boolean")},We="a:not([href])",Ge=function(yt){return!yt},Xe=function(yt){var ut=yt.getAttribute("id")||yt.getAttribute("name");return ut||""},Ve=function(yt){return yt&&yt.nodeName.toLowerCase()==="a"},P=function(yt){return Ve(yt)&&!yt.getAttribute("href")&&Xe(yt)!==""},Te=function(yt){return P(yt)&&!yt.firstChild},j=function(yt){var ut=yt.dom;y(ut).walk(yt.selection.getRng(),function(Et){C.each(Et,function(Ht){Te(Ht)&&ut.remove(Ht,!1)})})},x=function(yt){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(yt)},qe=function(yt){return yt.dom.getParent(yt.selection.getStart(),We)},Be=function(yt){var ut=qe(yt);return ut?Xe(ut):""},De=function(yt,ut){yt.undoManager.transact(function(){A(yt)||yt.selection.collapse(!0),yt.selection.isCollapsed()?yt.insertContent(yt.dom.createHTML("a",{id:ut})):(j(yt),yt.formatter.remove("namedAnchor",null,null,!0),yt.formatter.apply("namedAnchor",{value:ut}),yt.addVisual())})},He=function(yt,ut,Et){Et.removeAttribute("name"),Et.id=ut,yt.addVisual(),yt.undoManager.add()},Ye=function(yt,ut){var Et=qe(yt);Et?He(yt,ut,Et):De(yt,ut),yt.focus()},st=function(yt,ut){return x(ut)?(Ye(yt,ut),!0):(yt.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1)},rt=function(yt){var ut=Be(yt);yt.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:ut},onSubmit:function(Et){st(yt,Et.getData().id)&&Et.close()}})},Ke=function(yt){yt.addCommand("mceAnchor",function(){rt(yt)})},tt=function(yt){return yt&&Ge(yt.attr("href"))&&!Ge(yt.attr("id")||yt.attr("name"))},at=function(yt){return tt(yt)&&!yt.firstChild},et=function(yt){return function(ut){for(var Et=0;Et<ut.length;Et++){var Ht=ut[Et];at(Ht)&&Ht.attr("contenteditable",yt)}}},Ot=function(yt){yt.on("PreInit",function(){yt.parser.addNodeFilter("a",et("false")),yt.serializer.addNodeFilter("a",et(null))})},wt=function(yt){yt.formatter.register("namedAnchor",{inline:"a",selector:We,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:function(ut,Et,Ht){return P(ut)}})},xt=function(yt){yt.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:function(){return yt.execCommand("mceAnchor")},onSetup:function(ut){return yt.selection.selectorChangedWithUnbind("a:not([href])",ut.setActive).unbind}}),yt.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:function(){return yt.execCommand("mceAnchor")}})};function it(){v.add("anchor",function(yt){Ot(yt),Ke(yt),xt(yt),yt.on("PreInit",function(){wt(yt)})})}it()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(wt,xt,it){return xt===""||wt.length>=xt.length&&wt.substr(it,it+xt.length)===xt},C=function(wt,xt){return wt.indexOf(xt)!==-1},A=function(wt,xt){return y(wt,xt,0)},We=tinymce.util.Tools.resolve("tinymce.Env"),Ge=function(){return/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g},Xe=new RegExp("^"+Ge().source+"$","i"),Ve=function(wt){return wt.getParam("autolink_pattern",Xe)},P=function(wt){return wt.getParam("default_link_target",!1)},Te=function(wt){return wt.getParam("link_default_protocol","http","string")},j=function(wt){return/^[(\[{ \u00a0]$/.test(wt)},x=function(wt){return wt.nodeType===3},qe=function(wt){return wt.nodeType===1},Be=function(wt){return at(wt,-1)},De=function(wt){return at(wt,0)},He=function(wt){return at(wt,-1)},Ye=function(wt,xt){if(xt<0&&(xt=0),x(wt)){var it=wt.data.length;xt>it&&(xt=it)}return xt},st=function(wt,xt,it){!qe(xt)||xt.hasChildNodes()?wt.setStart(xt,Ye(xt,it)):wt.setStartBefore(xt)},rt=function(wt,xt,it){!qe(xt)||xt.hasChildNodes()?wt.setEnd(xt,Ye(xt,it)):wt.setEndAfter(xt)},Ke=function(wt){return/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(wt)},tt=function(wt){return/[?!,.;:]/.test(wt)},at=function(wt,xt){var it,yt,ut,Et,Ht,an,Mt,vn=Ve(wt),Wn=P(wt);if(wt.dom.getParent(wt.selection.getNode(),"a[href]")===null){var $e=wt.selection.getRng().cloneRange();if($e.startOffset<5){if(Ht=$e.endContainer.previousSibling,!Ht){if(!$e.endContainer.firstChild||!$e.endContainer.firstChild.nextSibling)return;Ht=$e.endContainer.firstChild.nextSibling}if(an=Ht.length,st($e,Ht,an),rt($e,Ht,an),$e.endOffset<5)return;it=$e.endOffset,yt=Ht}else{if(yt=$e.endContainer,!x(yt)&&yt.firstChild){for(;!x(yt)&&yt.firstChild;)yt=yt.firstChild;x(yt)&&(st($e,yt,0),rt($e,yt,yt.nodeValue.length))}$e.endOffset===1?it=2:it=$e.endOffset-1-xt}var Dt=it;do st($e,yt,it>=2?it-2:0),rt($e,yt,it>=1?it-1:0),it-=1,Mt=$e.toString();while(!j(Mt)&&it-2>=0);j($e.toString())?(st($e,yt,it),rt($e,yt,Dt),it+=1):$e.startOffset===0?(st($e,yt,0),rt($e,yt,Dt)):(st($e,yt,it),rt($e,yt,Dt)),Et=$e.toString(),tt(Et.charAt(Et.length-1))&&rt($e,yt,Dt-1),Et=$e.toString().trim();var vt=Et.match(vn),nn=Te(wt);if(vt){var _t=vt[0];A(_t,"www.")?_t=nn+"://"+_t:C(_t,"@")&&!Ke(_t)&&(_t="mailto:"+_t),ut=wt.selection.getBookmark(),wt.selection.setRng($e),wt.execCommand("createlink",!1,_t),Wn!==!1&&wt.dom.setAttrib(wt.selection.getNode(),"target",Wn),wt.selection.moveToBookmark(ut),wt.nodeChanged()}}},et=function(wt){var xt;if(wt.on("keydown",function(it){if(it.keyCode===13)return He(wt)}),We.browser.isIE()){wt.on("focus",function(){if(!xt){xt=!0;try{wt.execCommand("AutoUrlDetect",!1,!0)}catch(it){}}});return}wt.on("keypress",function(it){if(it.keyCode===41||it.keyCode===93||it.keyCode===125)return Be(wt)}),wt.on("keyup",function(it){if(it.keyCode===32)return De(wt)})};function Ot(){v.add("autolink",function(wt){et(wt)})}Ot()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(ut){return function(Et){return ut===Et}},C=y(void 0),A=tinymce.util.Tools.resolve("tinymce.util.Delay"),We=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Ge=tinymce.util.Tools.resolve("tinymce.util.Tools"),Xe=function(ut){return ut.fire("RestoreDraft")},Ve=function(ut){return ut.fire("StoreDraft")},P=function(ut){return ut.fire("RemoveDraft")},Te=function(ut,Et){var Ht={s:1e3,m:6e4},an=ut||Et,Mt=/^(\d+)([ms]?)$/.exec(""+an);return(Mt[2]?Ht[Mt[2]]:1)*parseInt(an,10)},j=function(ut){return ut.getParam("autosave_ask_before_unload",!0)},x=function(ut){var Et=document.location;return ut.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-").replace(/{path}/g,Et.pathname).replace(/{query}/g,Et.search).replace(/{hash}/g,Et.hash).replace(/{id}/g,ut.id)},qe=function(ut){return ut.getParam("autosave_restore_when_empty",!1)},Be=function(ut){return Te(ut.getParam("autosave_interval"),"30s")},De=function(ut){return Te(ut.getParam("autosave_retention"),"20m")},He=function(ut,Et){if(C(Et))return ut.dom.isEmpty(ut.getBody());var Ht=Ge.trim(Et);if(Ht==="")return!0;var an=new DOMParser().parseFromString(Ht,"text/html");return ut.dom.isEmpty(an)},Ye=function(ut){var Et=parseInt(We.getItem(x(ut)+"time"),10)||0;return new Date().getTime()-Et>De(ut)?(st(ut,!1),!1):!0},st=function(ut,Et){var Ht=x(ut);We.removeItem(Ht+"draft"),We.removeItem(Ht+"time"),Et!==!1&&P(ut)},rt=function(ut){var Et=x(ut);!He(ut)&&ut.isDirty()&&(We.setItem(Et+"draft",ut.getContent({format:"raw",no_events:!0})),We.setItem(Et+"time",new Date().getTime().toString()),Ve(ut))},Ke=function(ut){var Et=x(ut);Ye(ut)&&(ut.setContent(We.getItem(Et+"draft"),{format:"raw"}),Xe(ut))},tt=function(ut){var Et=Be(ut);A.setEditorInterval(ut,function(){rt(ut)},Et)},at=function(ut){ut.undoManager.transact(function(){Ke(ut),st(ut)}),ut.focus()},et=function(ut){return{hasDraft:function(){return Ye(ut)},storeDraft:function(){return rt(ut)},restoreDraft:function(){return Ke(ut)},removeDraft:function(Et){return st(ut,Et)},isEmpty:function(Et){return He(ut,Et)}}},Ot=tinymce.util.Tools.resolve("tinymce.EditorManager"),wt=function(ut){ut.editorManager.on("BeforeUnload",function(Et){var Ht;Ge.each(Ot.get(),function(an){an.plugins.autosave&&an.plugins.autosave.storeDraft(),!Ht&&an.isDirty()&&j(an)&&(Ht=an.translate("You have unsaved changes are you sure you want to navigate away?"))}),Ht&&(Et.preventDefault(),Et.returnValue=Ht)})},xt=function(ut){return function(Et){Et.setDisabled(!Ye(ut));var Ht=function(){return Et.setDisabled(!Ye(ut))};return ut.on("StoreDraft RestoreDraft RemoveDraft",Ht),function(){return ut.off("StoreDraft RestoreDraft RemoveDraft",Ht)}}},it=function(ut){tt(ut),ut.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:function(){at(ut)},onSetup:xt(ut)}),ut.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:function(){at(ut)},onSetup:xt(ut)})};function yt(){v.add("autosave",function(ut){return wt(ut),it(ut),ut.on("init",function(){qe(ut)&&ut.dom.isEmpty(ut.getBody())&&Ke(ut)}),et(ut)})}yt()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(Ve,P){Ve.focus(),Ve.undoManager.transact(function(){Ve.setContent(P)}),Ve.selection.setCursorLocation(),Ve.nodeChanged()},C=function(Ve){return Ve.getContent({source_view:!0})},A=function(Ve){var P=C(Ve);Ve.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:P},onSubmit:function(Te){y(Ve,Te.getData().code),Te.close()}})},We=function(Ve){Ve.addCommand("mceCodeEditor",function(){A(Ve)})},Ge=function(Ve){var P=function(){return Ve.execCommand("mceCodeEditor")};Ve.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:P}),Ve.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:P})};function Xe(){v.add("code",function(Ve){return We(Ve),Ge(Ve),{}})}Xe()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(){},C=function(Dt){return function(){return Dt}},A=function(Dt){return Dt},We=C(!1),Ge=C(!0),Xe=function(){return Ve},Ve=function(){var Dt=function(_t){return _t()},vt=A,nn={fold:function(_t,Nt){return _t()},isSome:We,isNone:Ge,getOr:vt,getOrThunk:Dt,getOrDie:function(_t){throw new Error(_t||"error: getOrDie called on none.")},getOrNull:C(null),getOrUndefined:C(void 0),or:vt,orThunk:Dt,map:Xe,each:y,bind:Xe,exists:We,forall:Ge,filter:function(){return Xe()},toArray:function(){return[]},toString:C("none()")};return nn}(),P=function(Dt){var vt=C(Dt),nn=function(){return Nt},_t=function(ln){return ln(Dt)},Nt={fold:function(ln,on){return on(Dt)},isSome:Ge,isNone:We,getOr:vt,getOrThunk:vt,getOrDie:vt,getOrNull:vt,getOrUndefined:vt,or:nn,orThunk:nn,map:function(ln){return P(ln(Dt))},each:function(ln){ln(Dt)},bind:_t,exists:_t,forall:_t,filter:function(ln){return ln(Dt)?Nt:Ve},toArray:function(){return[Dt]},toString:function(){return"some("+Dt+")"}};return Nt},Te=function(Dt){return Dt==null?Ve:P(Dt)},j={some:P,none:Xe,from:Te},x=function(Dt,vt){return vt>=0&&vt<Dt.length?j.some(Dt[vt]):j.none()},qe=function(Dt){return x(Dt,0)},Be=function(Dt,vt){return Dt?j.some(vt):j.none()},De=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),He=function(Dt){return Dt&&Dt.nodeName==="PRE"&&Dt.className.indexOf("language-")!==-1},Ye=function(Dt){return function(vt,nn){return Dt(nn)}},st=typeof window!="undefined"?window:Function("return this;")(),rt={},Ke={exports:rt},tt={};(function(Dt,vt,nn,_t){var Nt=window.Prism;window.Prism={manual:!0},function(on,dt){typeof vt=="object"&&typeof nn!="undefined"?nn.exports=dt():typeof Dt=="function"&&Dt.amd?Dt(dt):(on=typeof globalThis!="undefined"?globalThis:on||self,on.EphoxContactWrapper=dt())}(this,function(){var on=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof tt!="undefined"?tt:typeof self!="undefined"?self:{},dt={exports:{}};(function(en){var Nn=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{},fn=function(cn){var hn=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,er=0,Fn={},Gn={manual:cn.Prism&&cn.Prism.manual,disableWorkerMessageHandler:cn.Prism&&cn.Prism.disableWorkerMessageHandler,util:{encode:function fr(sr){return sr instanceof va?new va(sr.type,fr(sr.content),sr.alias):Array.isArray(sr)?sr.map(fr):sr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(fr){return Object.prototype.toString.call(fr).slice(8,-1)},objId:function(fr){return fr.__id||Object.defineProperty(fr,"__id",{value:++er}),fr.__id},clone:function fr(sr,mr){mr=mr||{};var Tn,Rn;switch(Gn.util.type(sr)){case"Object":if(Rn=Gn.util.objId(sr),mr[Rn])return mr[Rn];Tn={},mr[Rn]=Tn;for(var dr in sr)sr.hasOwnProperty(dr)&&(Tn[dr]=fr(sr[dr],mr));return Tn;case"Array":return Rn=Gn.util.objId(sr),mr[Rn]?mr[Rn]:(Tn=[],mr[Rn]=Tn,sr.forEach(function(Pr,br){Tn[br]=fr(Pr,mr)}),Tn);default:return sr}},getLanguage:function(fr){for(;fr;){var sr=hn.exec(fr.className);if(sr)return sr[1].toLowerCase();fr=fr.parentElement}return"none"},setLanguage:function(fr,sr){fr.className=fr.className.replace(RegExp(hn.source,"gi"),""),fr.classList.add("language-"+sr)},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(Tn){var fr=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Tn.stack)||[])[1];if(fr){var sr=document.getElementsByTagName("script");for(var mr in sr)if(sr[mr].src==fr)return sr[mr]}return null}},isActive:function(fr,sr,mr){for(var Tn="no-"+sr;fr;){var Rn=fr.classList;if(Rn.contains(sr))return!0;if(Rn.contains(Tn))return!1;fr=fr.parentElement}return!!mr}},languages:{plain:Fn,plaintext:Fn,text:Fn,txt:Fn,extend:function(fr,sr){var mr=Gn.util.clone(Gn.languages[fr]);for(var Tn in sr)mr[Tn]=sr[Tn];return mr},insertBefore:function(fr,sr,mr,Tn){Tn=Tn||Gn.languages;var Rn=Tn[fr],dr={};for(var Pr in Rn)if(Rn.hasOwnProperty(Pr)){if(Pr==sr)for(var br in mr)mr.hasOwnProperty(br)&&(dr[br]=mr[br]);mr.hasOwnProperty(Pr)||(dr[Pr]=Rn[Pr])}var Cn=Tn[fr];return Tn[fr]=dr,Gn.languages.DFS(Gn.languages,function(cr,zr){zr===Cn&&cr!=fr&&(this[cr]=dr)}),dr},DFS:function fr(sr,mr,Tn,Rn){Rn=Rn||{};var dr=Gn.util.objId;for(var Pr in sr)if(sr.hasOwnProperty(Pr)){mr.call(sr,Pr,sr[Pr],Tn||Pr);var br=sr[Pr],Cn=Gn.util.type(br);Cn==="Object"&&!Rn[dr(br)]?(Rn[dr(br)]=!0,fr(br,mr,null,Rn)):Cn==="Array"&&!Rn[dr(br)]&&(Rn[dr(br)]=!0,fr(br,mr,Pr,Rn))}}},plugins:{},highlightAll:function(fr,sr){Gn.highlightAllUnder(document,fr,sr)},highlightAllUnder:function(fr,sr,mr){var Tn={callback:mr,container:fr,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};Gn.hooks.run("before-highlightall",Tn),Tn.elements=Array.prototype.slice.apply(Tn.container.querySelectorAll(Tn.selector)),Gn.hooks.run("before-all-elements-highlight",Tn);for(var Rn=0,dr;dr=Tn.elements[Rn++];)Gn.highlightElement(dr,sr===!0,Tn.callback)},highlightElement:function(fr,sr,mr){var Tn=Gn.util.getLanguage(fr),Rn=Gn.languages[Tn];Gn.util.setLanguage(fr,Tn);var dr=fr.parentElement;dr&&dr.nodeName.toLowerCase()==="pre"&&Gn.util.setLanguage(dr,Tn);var Pr=fr.textContent,br={element:fr,language:Tn,grammar:Rn,code:Pr};function Cn(zr){br.highlightedCode=zr,Gn.hooks.run("before-insert",br),br.element.innerHTML=br.highlightedCode,Gn.hooks.run("after-highlight",br),Gn.hooks.run("complete",br),mr&&mr.call(br.element)}if(Gn.hooks.run("before-sanity-check",br),dr=br.element.parentElement,dr&&dr.nodeName.toLowerCase()==="pre"&&!dr.hasAttribute("tabindex")&&dr.setAttribute("tabindex","0"),!br.code){Gn.hooks.run("complete",br),mr&&mr.call(br.element);return}if(Gn.hooks.run("before-highlight",br),!br.grammar){Cn(Gn.util.encode(br.code));return}if(sr&&cn.Worker){var cr=new Worker(Gn.filename);cr.onmessage=function(zr){Cn(zr.data)},cr.postMessage(JSON.stringify({language:br.language,code:br.code,immediateClose:!0}))}else Cn(Gn.highlight(br.code,br.grammar,br.language))},highlight:function(fr,sr,mr){var Tn={code:fr,grammar:sr,language:mr};if(Gn.hooks.run("before-tokenize",Tn),!Tn.grammar)throw new Error('The language "'+Tn.language+'" has no grammar.');return Tn.tokens=Gn.tokenize(Tn.code,Tn.grammar),Gn.hooks.run("after-tokenize",Tn),va.stringify(Gn.util.encode(Tn.tokens),Tn.language)},tokenize:function(fr,sr){var mr=sr.rest;if(mr){for(var Tn in mr)sr[Tn]=mr[Tn];delete sr.rest}var Rn=new Rr;return Yr(Rn,Rn.head,fr),Mn(fr,Rn,sr,Rn.head,0),pa(Rn)},hooks:{all:{},add:function(fr,sr){var mr=Gn.hooks.all;mr[fr]=mr[fr]||[],mr[fr].push(sr)},run:function(fr,sr){var mr=Gn.hooks.all[fr];if(!(!mr||!mr.length))for(var Tn=0,Rn;Rn=mr[Tn++];)Rn(sr)}},Token:va};cn.Prism=Gn;function va(fr,sr,mr,Tn){this.type=fr,this.content=sr,this.alias=mr,this.length=(Tn||"").length|0}va.stringify=function fr(sr,mr){if(typeof sr=="string")return sr;if(Array.isArray(sr)){var Tn="";return sr.forEach(function(Cn){Tn+=fr(Cn,mr)}),Tn}var Rn={type:sr.type,content:fr(sr.content,mr),tag:"span",classes:["token",sr.type],attributes:{},language:mr},dr=sr.alias;dr&&(Array.isArray(dr)?Array.prototype.push.apply(Rn.classes,dr):Rn.classes.push(dr)),Gn.hooks.run("wrap",Rn);var Pr="";for(var br in Rn.attributes)Pr+=" "+br+'="'+(Rn.attributes[br]||"").replace(/"/g,"&quot;")+'"';return"<"+Rn.tag+' class="'+Rn.classes.join(" ")+'"'+Pr+">"+Rn.content+"</"+Rn.tag+">"};function tn(fr,sr,mr,Tn){fr.lastIndex=sr;var Rn=fr.exec(mr);if(Rn&&Tn&&Rn[1]){var dr=Rn[1].length;Rn.index+=dr,Rn[0]=Rn[0].slice(dr)}return Rn}function Mn(fr,sr,mr,Tn,Rn,dr){for(var Pr in mr)if(!(!mr.hasOwnProperty(Pr)||!mr[Pr])){var br=mr[Pr];br=Array.isArray(br)?br:[br];for(var Cn=0;Cn<br.length;++Cn){if(dr&&dr.cause==Pr+","+Cn)return;var cr=br[Cn],zr=cr.inside,Nr=!!cr.lookbehind,Ar=!!cr.greedy,sn=cr.alias;if(Ar&&!cr.pattern.global){var Un=cr.pattern.toString().match(/[imsuy]*$/)[0];cr.pattern=RegExp(cr.pattern.source,Un+"g")}for(var jn=cr.pattern||cr,pr=Tn.next,aa=Rn;pr!==sr.tail&&!(dr&&aa>=dr.reach);aa+=pr.value.length,pr=pr.next){var Ua=pr.value;if(sr.length>fr.length)return;if(!(Ua instanceof va)){var jo=1,Xa;if(Ar){if(Xa=tn(jn,aa,fr,Nr),!Xa||Xa.index>=fr.length)break;var pi=Xa.index,Ka=Xa.index+Xa[0].length,Yo=aa;for(Yo+=pr.value.length;pi>=Yo;)pr=pr.next,Yo+=pr.value.length;if(Yo-=pr.value.length,aa=Yo,pr.value instanceof va)continue;for(var Io=pr;Io!==sr.tail&&(Yo<Ka||typeof Io.value=="string");Io=Io.next)jo++,Yo+=Io.value.length;jo--,Ua=fr.slice(aa,Yo),Xa.index-=aa}else if(Xa=tn(jn,0,Ua,Nr),!Xa)continue;var pi=Xa.index,oi=Xa[0],Si=Ua.slice(0,pi),Ii=Ua.slice(pi+oi.length),xi=aa+Ua.length;dr&&xi>dr.reach&&(dr.reach=xi);var Ei=pr.prev;Si&&(Ei=Yr(sr,Ei,Si),aa+=Si.length),oa(sr,Ei,jo);var Fo=new va(Pr,zr?Gn.tokenize(oi,zr):oi,sn,oi);if(pr=Yr(sr,Ei,Fo),Ii&&Yr(sr,pr,Ii),jo>1){var wo={cause:Pr+","+Cn,reach:xi};Mn(fr,sr,mr,pr.prev,aa,wo),dr&&wo.reach>dr.reach&&(dr.reach=wo.reach)}}}}}}function Rr(){var fr={value:null,prev:null,next:null},sr={value:null,prev:fr,next:null};fr.next=sr,this.head=fr,this.tail=sr,this.length=0}function Yr(fr,sr,mr){var Tn=sr.next,Rn={value:mr,prev:sr,next:Tn};return sr.next=Rn,Tn.prev=Rn,fr.length++,Rn}function oa(fr,sr,mr){for(var Tn=sr.next,Rn=0;Rn<mr&&Tn!==fr.tail;Rn++)Tn=Tn.next;sr.next=Tn,Tn.prev=sr,fr.length-=Rn}function pa(fr){for(var sr=[],mr=fr.head.next;mr!==fr.tail;)sr.push(mr.value),mr=mr.next;return sr}if(!cn.document)return cn.addEventListener&&(Gn.disableWorkerMessageHandler||cn.addEventListener("message",function(fr){var sr=JSON.parse(fr.data),mr=sr.language,Tn=sr.code,Rn=sr.immediateClose;cn.postMessage(Gn.highlight(Tn,Gn.languages[mr],mr)),Rn&&cn.close()},!1)),Gn;var Ga=Gn.util.currentScript();Ga&&(Gn.filename=Ga.src,Ga.hasAttribute("data-manual")&&(Gn.manual=!0));function fo(){Gn.manual||Gn.highlightAll()}if(!Gn.manual){var oo=document.readyState;oo==="loading"||oo==="interactive"&&Ga&&Ga.defer?document.addEventListener("DOMContentLoaded",fo):window.requestAnimationFrame?window.requestAnimationFrame(fo):window.setTimeout(fo,16)}return Gn}(Nn);en.exports&&(en.exports=fn),typeof on!="undefined"&&(on.Prism=fn)})(dt),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(en){function Nn(fn,cn){return"___"+fn.toUpperCase()+cn+"___"}Object.defineProperties(en.languages["markup-templating"]={},{buildPlaceholders:{value:function(fn,cn,hn,er){if(fn.language===cn){var Fn=fn.tokenStack=[];fn.code=fn.code.replace(hn,function(Gn){if(typeof er=="function"&&!er(Gn))return Gn;for(var va=Fn.length,tn;fn.code.indexOf(tn=Nn(cn,va))!==-1;)++va;return Fn[va]=Gn,tn}),fn.grammar=en.languages.markup}}},tokenizePlaceholders:{value:function(fn,cn){if(fn.language!==cn||!fn.tokenStack)return;fn.grammar=en.languages[cn];var hn=0,er=Object.keys(fn.tokenStack);function Fn(Gn){for(var va=0;va<Gn.length&&!(hn>=er.length);va++){var tn=Gn[va];if(typeof tn=="string"||tn.content&&typeof tn.content=="string"){var Mn=er[hn],Rr=fn.tokenStack[Mn],Yr=typeof tn=="string"?tn:tn.content,oa=Nn(cn,Mn),pa=Yr.indexOf(oa);if(pa>-1){++hn;var Ga=Yr.substring(0,pa),fo=new en.Token(cn,en.tokenize(Rr,fn.grammar),"language-"+cn,Rr),oo=Yr.substring(pa+oa.length),fr=[];Ga&&fr.push.apply(fr,Fn([Ga])),fr.push(fo),oo&&fr.push.apply(fr,Fn([oo])),typeof tn=="string"?Gn.splice.apply(Gn,[va,1].concat(fr)):tn.content=fr}}else tn.content&&Fn(tn.content)}return Gn}Fn(fn.tokens)}}})}(Prism),Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}}),Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Prism.languages.c.boolean,function(en){var Nn=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,fn=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return Nn.source});en.languages.cpp=en.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return Nn.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:Nn,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),en.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return fn})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),en.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:en.languages.cpp}}}}),en.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),en.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:en.languages.extend("cpp",{})}}),en.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},en.languages.cpp["base-clause"])}(Prism),function(en){function Nn(aa,Ua){return aa.replace(/<<(\d+)>>/g,function(jo,Xa){return"(?:"+Ua[+Xa]+")"})}function fn(aa,Ua,jo){return RegExp(Nn(aa,Ua),jo||"")}function cn(aa,Ua){for(var jo=0;jo<Ua;jo++)aa=aa.replace(/<<self>>/g,function(){return"(?:"+aa+")"});return aa.replace(/<<self>>/g,"[^\\s\\S]")}var hn={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function er(aa){return"\\b(?:"+aa.trim().replace(/ /g,"|")+")\\b"}var Fn=er(hn.typeDeclaration),Gn=RegExp(er(hn.type+" "+hn.typeDeclaration+" "+hn.contextual+" "+hn.other)),va=er(hn.typeDeclaration+" "+hn.contextual+" "+hn.other),tn=er(hn.type+" "+hn.typeDeclaration+" "+hn.other),Mn=cn(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),Rr=cn(/\((?:[^()]|<<self>>)*\)/.source,2),Yr=/@?\b[A-Za-z_]\w*\b/.source,oa=Nn(/<<0>>(?:\s*<<1>>)?/.source,[Yr,Mn]),pa=Nn(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[va,oa]),Ga=/\[\s*(?:,\s*)*\]/.source,fo=Nn(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[pa,Ga]),oo=Nn(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[Mn,Rr,Ga]),fr=Nn(/\(<<0>>+(?:,<<0>>+)+\)/.source,[oo]),sr=Nn(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[fr,pa,Ga]),mr={keyword:Gn,punctuation:/[<>()?,.:[\]]/},Tn=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,Rn=/"(?:\\.|[^\\"\r\n])*"/.source,dr=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;en.languages.csharp=en.languages.extend("clike",{string:[{pattern:fn(/(^|[^$\\])<<0>>/.source,[dr]),lookbehind:!0,greedy:!0},{pattern:fn(/(^|[^@$\\])<<0>>/.source,[Rn]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:fn(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[pa]),lookbehind:!0,inside:mr},{pattern:fn(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[Yr,sr]),lookbehind:!0,inside:mr},{pattern:fn(/(\busing\s+)<<0>>(?=\s*=)/.source,[Yr]),lookbehind:!0},{pattern:fn(/(\b<<0>>\s+)<<1>>/.source,[Fn,oa]),lookbehind:!0,inside:mr},{pattern:fn(/(\bcatch\s*\(\s*)<<0>>/.source,[pa]),lookbehind:!0,inside:mr},{pattern:fn(/(\bwhere\s+)<<0>>/.source,[Yr]),lookbehind:!0},{pattern:fn(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[fo]),lookbehind:!0,inside:mr},{pattern:fn(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[sr,tn,Yr]),inside:mr}],keyword:Gn,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),en.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),en.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:fn(/([(,]\s*)<<0>>(?=\s*:)/.source,[Yr]),lookbehind:!0,alias:"punctuation"}}),en.languages.insertBefore("csharp","class-name",{namespace:{pattern:fn(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[Yr]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:fn(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[Rr]),lookbehind:!0,alias:"class-name",inside:mr},"return-type":{pattern:fn(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[sr,pa]),inside:mr,alias:"class-name"},"constructor-invocation":{pattern:fn(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[sr]),lookbehind:!0,inside:mr,alias:"class-name"},"generic-method":{pattern:fn(/<<0>>\s*<<1>>(?=\s*\()/.source,[Yr,Mn]),inside:{function:fn(/^<<0>>/.source,[Yr]),generic:{pattern:RegExp(Mn),alias:"class-name",inside:mr}}},"type-list":{pattern:fn(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[Fn,oa,Yr,sr,Gn.source,Rr,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:fn(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[oa,Rr]),lookbehind:!0,greedy:!0,inside:en.languages.csharp},keyword:Gn,"class-name":{pattern:RegExp(sr),greedy:!0,inside:mr},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var Pr=Rn+"|"+Tn,br=Nn(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[Pr]),Cn=cn(Nn(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[br]),2),cr=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,zr=Nn(/<<0>>(?:\s*\(<<1>>*\))?/.source,[pa,Cn]);en.languages.insertBefore("csharp","class-name",{attribute:{pattern:fn(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[cr,zr]),lookbehind:!0,greedy:!0,inside:{target:{pattern:fn(/^<<0>>(?=\s*:)/.source,[cr]),alias:"keyword"},"attribute-arguments":{pattern:fn(/\(<<0>>*\)/.source,[Cn]),inside:en.languages.csharp},"class-name":{pattern:RegExp(pa),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var Nr=/:[^}\r\n]+/.source,Ar=cn(Nn(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[br]),2),sn=Nn(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Ar,Nr]),Un=cn(Nn(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[Pr]),2),jn=Nn(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Un,Nr]);function pr(aa,Ua){return{interpolation:{pattern:fn(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[aa]),lookbehind:!0,inside:{"format-string":{pattern:fn(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[Ua,Nr]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:en.languages.csharp}}},string:/[\s\S]+/}}en.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:fn(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[sn]),lookbehind:!0,greedy:!0,inside:pr(sn,Ar)},{pattern:fn(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[jn]),lookbehind:!0,greedy:!0,inside:pr(jn,Un)}],char:{pattern:RegExp(Tn),greedy:!0}}),en.languages.dotnet=en.languages.cs=en.languages.csharp}(Prism),function(en){var Nn=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;en.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+Nn.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+Nn.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+Nn.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+Nn.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:Nn,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},en.languages.css.atrule.inside.rest=en.languages.css;var fn=en.languages.markup;fn&&(fn.tag.addInlined("style","css"),fn.tag.addAttribute("style","css"))}(Prism),function(en){var Nn=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,fn=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,cn={pattern:RegExp(/(^|[^\w.])/.source+fn+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};en.languages.java=en.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[cn,{pattern:RegExp(/(^|[^\w.])/.source+fn+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:cn.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+fn+/[A-Z]\w*\b/.source),lookbehind:!0,inside:cn.inside}],keyword:Nn,function:[en.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),en.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),en.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":cn,keyword:Nn,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+fn+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:cn.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+fn+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:cn.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return Nn.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism),Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript,Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(en){en.type==="entity"&&(en.attributes.title=en.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(Nn,fn){var cn={};cn["language-"+fn]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[fn]},cn.cdata=/^<!\[CDATA\[|\]\]>$/i;var hn={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:cn}};hn["language-"+fn]={pattern:/[\s\S]+/,inside:Prism.languages[fn]};var er={};er[Nn]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return Nn}),"i"),lookbehind:!0,greedy:!0,inside:hn},Prism.languages.insertBefore("markup","cdata",er)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(en,Nn){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+en+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[Nn,"language-"+Nn],inside:Prism.languages[Nn]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,function(en){var Nn=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,fn=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],cn=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,hn=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,er=/[{}\[\](),:;]/;en.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:Nn,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:fn,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:cn,operator:hn,punctuation:er};var Fn={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:en.languages.php},Gn=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:Fn}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:Fn}}];en.languages.insertBefore("php","variable",{string:Gn,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:Nn,string:Gn,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:fn,number:cn,operator:hn,punctuation:er}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),en.hooks.add("before-tokenize",function(va){if(/<\?/.test(va.code)){var tn=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;en.languages["markup-templating"].buildPlaceholders(va,"php",tn)}}),en.hooks.add("after-tokenize",function(va){en.languages["markup-templating"].tokenizePlaceholders(va,"php")})}(Prism),Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python,function(en){en.languages.ruby=en.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),en.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var Nn={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:en.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete en.languages.ruby.function;var fn="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",cn=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;en.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+fn+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:Nn,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:Nn,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+cn),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+cn+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),en.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+fn),greedy:!0,inside:{interpolation:Nn,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:Nn,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:Nn,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+fn),greedy:!0,inside:{interpolation:Nn,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:Nn,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete en.languages.ruby.string,en.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),en.languages.rb=en.languages.ruby}(Prism);var ur=dt.exports,dn={boltExport:ur};return dn});var ln=window.Prism;return window.Prism=Nt,ln})(void 0,rt,Ke);var at=Ke.exports.boltExport,et=function(Dt){return Dt.getParam("codesample_languages")},Ot=function(Dt){return Dt.getParam("codesample_global_prismjs",!1,"boolean")},wt=function(Dt){return st.Prism&&Ot(Dt)?st.Prism:at},xt=function(Dt){var vt=Dt.selection?Dt.selection.getNode():null;return Be(He(vt),vt)},it=function(Dt,vt,nn){Dt.undoManager.transact(function(){var _t=xt(Dt);return nn=De.DOM.encode(nn),_t.fold(function(){Dt.insertContent('<pre id="__new" class="language-'+vt+'">'+nn+"</pre>"),Dt.selection.select(Dt.$("#__new").removeAttr("id")[0])},function(Nt){Dt.dom.setAttrib(Nt,"class","language-"+vt),Nt.innerHTML=nn,wt(Dt).highlightElement(Nt),Dt.selection.select(Nt)})})},yt=function(Dt){var vt=xt(Dt);return vt.fold(C(""),function(nn){return nn.textContent})},ut=function(Dt){var vt=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],nn=et(Dt);return nn||vt},Et=function(Dt,vt){var nn=xt(Dt);return nn.fold(function(){return vt},function(_t){var Nt=_t.className.match(/language-(\w+)/);return Nt?Nt[1]:vt})},Ht=function(Dt){var vt=ut(Dt),nn=qe(vt).fold(C(""),function(ln){return ln.value}),_t=Et(Dt,nn),Nt=yt(Dt);Dt.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"selectbox",name:"language",label:"Language",items:vt},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:_t,code:Nt},onSubmit:function(ln){var on=ln.getData();it(Dt,on.language,on.code),ln.close()}})},an=function(Dt){Dt.addCommand("codesample",function(){var vt=Dt.selection.getNode();Dt.selection.isCollapsed()||He(vt)?Ht(Dt):Dt.formatter.toggle("code")})},Mt=function(Dt){var vt=Dt.$;Dt.on("PreProcess",function(nn){vt("pre[contenteditable=false]",nn.node).filter(Ye(He)).each(function(_t,Nt){var ln=vt(Nt),on=Nt.textContent;ln.attr("class",vt.trim(ln.attr("class"))),ln.removeAttr("contentEditable"),ln.empty().append(vt("<code></code>").each(function(){this.textContent=on}))})}),Dt.on("SetContent",function(){var nn=vt("pre").filter(Ye(He)).filter(function(_t,Nt){return Nt.contentEditable!=="false"});nn.length&&Dt.undoManager.transact(function(){nn.each(function(_t,Nt){vt(Nt).find("br").each(function(ln,on){on.parentNode.replaceChild(Dt.getDoc().createTextNode(`
`),on)}),Nt.contentEditable="false",Nt.innerHTML=Dt.dom.encode(Nt.textContent),wt(Dt).highlightElement(Nt),Nt.className=vt.trim(Nt.className)})})})},vn=function(Dt){var vt=Dt.selection.getStart();return Dt.dom.is(vt,'pre[class*="language-"]')},Wn=function(Dt){var vt=function(){return Dt.execCommand("codesample")};Dt.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:vt,onSetup:function(nn){var _t=function(){nn.setActive(vn(Dt))};return Dt.on("NodeChange",_t),function(){return Dt.off("NodeChange",_t)}}}),Dt.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:vt})};function $e(){v.add("codesample",function(Dt){Mt(Dt),Wn(Dt),an(Dt),Dt.on("dblclick",function(vt){He(vt.target)&&Ht(Dt)})})}$e()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(Cn){var cr=typeof Cn;return Cn===null?"null":cr==="object"&&(Array.prototype.isPrototypeOf(Cn)||Cn.constructor&&Cn.constructor.name==="Array")?"array":cr==="object"&&(String.prototype.isPrototypeOf(Cn)||Cn.constructor&&Cn.constructor.name==="String")?"string":cr},C=function(Cn){return function(cr){return y(cr)===Cn}},A=function(Cn){return function(cr){return typeof cr===Cn}},We=C("string"),Ge=A("boolean"),Xe=function(Cn){return Cn==null},Ve=function(Cn){return!Xe(Cn)},P=A("function"),Te=A("number"),j=function(){},x=function(Cn,cr){return function(zr){return Cn(cr(zr))}},qe=function(Cn){return function(){return Cn}},Be=function(Cn){return Cn},De=qe(!1),He=qe(!0),Ye=function(){return st},st=function(){var Cn=function(Nr){return Nr()},cr=Be,zr={fold:function(Nr,Ar){return Nr()},isSome:De,isNone:He,getOr:cr,getOrThunk:Cn,getOrDie:function(Nr){throw new Error(Nr||"error: getOrDie called on none.")},getOrNull:qe(null),getOrUndefined:qe(void 0),or:cr,orThunk:Cn,map:Ye,each:j,bind:Ye,exists:De,forall:He,filter:function(){return Ye()},toArray:function(){return[]},toString:qe("none()")};return zr}(),rt=function(Cn){var cr=qe(Cn),zr=function(){return Ar},Nr=function(sn){return sn(Cn)},Ar={fold:function(sn,Un){return Un(Cn)},isSome:He,isNone:De,getOr:cr,getOrThunk:cr,getOrDie:cr,getOrNull:cr,getOrUndefined:cr,or:zr,orThunk:zr,map:function(sn){return rt(sn(Cn))},each:function(sn){sn(Cn)},bind:Nr,exists:Nr,forall:Nr,filter:function(sn){return sn(Cn)?Ar:st},toArray:function(){return[Cn]},toString:function(){return"some("+Cn+")"}};return Ar},Ke=function(Cn){return Cn==null?st:rt(Cn)},tt={some:rt,none:Ye,from:Ke},at=function(Cn,cr){for(var zr=Cn.length,Nr=new Array(zr),Ar=0;Ar<zr;Ar++){var sn=Cn[Ar];Nr[Ar]=cr(sn,Ar)}return Nr},et=function(Cn,cr){for(var zr=0,Nr=Cn.length;zr<Nr;zr++){var Ar=Cn[zr];cr(Ar,zr)}},Ot=function(Cn,cr){for(var zr=[],Nr=0,Ar=Cn.length;Nr<Ar;Nr++){var sn=Cn[Nr];cr(sn,Nr)&&zr.push(sn)}return zr},wt=9,xt=11,it=1,yt=3,ut=function(Cn,cr){var zr=cr||document,Nr=zr.createElement("div");if(Nr.innerHTML=Cn,!Nr.hasChildNodes()||Nr.childNodes.length>1)throw new Error("HTML must have a single root node");return an(Nr.childNodes[0])},Et=function(Cn,cr){var zr=cr||document,Nr=zr.createElement(Cn);return an(Nr)},Ht=function(Cn,cr){var zr=cr||document,Nr=zr.createTextNode(Cn);return an(Nr)},an=function(Cn){if(Cn==null)throw new Error("Node cannot be null or undefined");return{dom:Cn}},Mt=function(Cn,cr,zr){return tt.from(Cn.dom.elementFromPoint(cr,zr)).map(an)},vn={fromHtml:ut,fromTag:Et,fromText:Ht,fromDom:an,fromPoint:Mt},Wn=function(Cn,cr){var zr=Cn.dom;if(zr.nodeType!==it)return!1;var Nr=zr;if(Nr.matches!==void 0)return Nr.matches(cr);if(Nr.msMatchesSelector!==void 0)return Nr.msMatchesSelector(cr);if(Nr.webkitMatchesSelector!==void 0)return Nr.webkitMatchesSelector(cr);if(Nr.mozMatchesSelector!==void 0)return Nr.mozMatchesSelector(cr);throw new Error("Browser lacks native selectors")};typeof window!="undefined"||Function("return this;")();var $e=function(Cn){var cr=Cn.dom.nodeName;return cr.toLowerCase()},Dt=function(Cn){return Cn.dom.nodeType},vt=function(Cn){return function(cr){return Dt(cr)===Cn}},nn=vt(it),_t=vt(yt),Nt=vt(wt),ln=vt(xt),on=function(Cn){return function(cr){return nn(cr)&&$e(cr)===Cn}},dt=function(Cn){return vn.fromDom(Cn.dom.ownerDocument)},ur=function(Cn){return Nt(Cn)?Cn:dt(Cn)},dn=function(Cn){return tt.from(Cn.dom.parentNode).map(vn.fromDom)},en=function(Cn){return at(Cn.dom.childNodes,vn.fromDom)},Nn=function(Cn,cr,zr){if(We(zr)||Ge(zr)||Te(zr))Cn.setAttribute(cr,zr+"");else throw new Error("Attribute value was not simple")},fn=function(Cn,cr,zr){Nn(Cn.dom,cr,zr)},cn=function(Cn,cr){Cn.dom.removeAttribute(cr)},hn=function(Cn){return ln(Cn)&&Ve(Cn.dom.host)},er=P(Element.prototype.attachShadow)&&P(Node.prototype.getRootNode),Fn=er?function(Cn){return vn.fromDom(Cn.dom.getRootNode())}:ur,Gn=function(Cn){var cr=Fn(Cn);return hn(cr)?tt.some(cr):tt.none()},va=function(Cn){return vn.fromDom(Cn.dom.host)},tn=function(Cn){var cr=_t(Cn)?Cn.dom.parentNode:Cn.dom;if(cr==null||cr.ownerDocument===null)return!1;var zr=cr.ownerDocument;return Gn(vn.fromDom(cr)).fold(function(){return zr.body.contains(cr)},x(tn,va))},Mn=function(Cn,cr,zr){for(var Nr=Cn.dom,Ar=P(zr)?zr:De;Nr.parentNode;){Nr=Nr.parentNode;var sn=vn.fromDom(Nr);if(cr(sn))return tt.some(sn);if(Ar(sn))break}return tt.none()},Rr=function(Cn,cr,zr){return Mn(Cn,function(Nr){return Wn(Nr,cr)},zr)},Yr=function(Cn){return Cn.style!==void 0&&P(Cn.style.getPropertyValue)},oa=function(Cn,cr){var zr=Cn.dom,Nr=window.getComputedStyle(zr),Ar=Nr.getPropertyValue(cr);return Ar===""&&!tn(Cn)?pa(zr,cr):Ar},pa=function(Cn,cr){return Yr(Cn)?Cn.style.getPropertyValue(cr):""},Ga=function(Cn){return oa(Cn,"direction")==="rtl"?"rtl":"ltr"},fo=function(Cn,cr){return Ot(en(Cn),cr)},oo=function(Cn,cr){return fo(Cn,function(zr){return Wn(zr,cr)})},fr=function(Cn){return dn(Cn).filter(nn)},sr=function(Cn,cr){var zr=cr?Rr(Cn,"ol,ul"):tt.some(Cn);return zr.getOr(Cn)},mr=on("li"),Tn=function(Cn,cr){var zr=Cn.selection.getSelectedBlocks();zr.length>0&&(et(zr,function(Nr){var Ar=vn.fromDom(Nr),sn=mr(Ar),Un=sr(Ar,sn),jn=fr(Un);jn.each(function(pr){var aa=Ga(pr);if(aa!==cr?fn(Un,"dir",cr):Ga(Un)!==cr&&cn(Un,"dir"),sn){var Ua=oo(Un,"li[dir]");et(Ua,function(jo){return cn(jo,"dir")})}})}),Cn.nodeChanged())},Rn=function(Cn){Cn.addCommand("mceDirectionLTR",function(){Tn(Cn,"ltr")}),Cn.addCommand("mceDirectionRTL",function(){Tn(Cn,"rtl")})},dr=function(Cn,cr){return function(zr){var Nr=function(Ar){var sn=vn.fromDom(Ar.element);zr.setActive(Ga(sn)===cr)};return Cn.on("NodeChange",Nr),function(){return Cn.off("NodeChange",Nr)}}},Pr=function(Cn){Cn.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return Cn.execCommand("mceDirectionLTR")},onSetup:dr(Cn,"ltr")}),Cn.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return Cn.execCommand("mceDirectionRTL")},onSetup:dr(Cn,"rtl")})};function br(){v.add("directionality",function(Cn){Rn(Cn),Pr(Cn)})}br()})();(function(){var v=function(lt){var Je=lt,ht=function(){return Je},Lt=function(un){Je=un};return{get:ht,set:Lt}},y=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=function(lt){return{isFullscreen:function(){return lt.get()!==null}}},A=function(lt){var Je=typeof lt;return lt===null?"null":Je==="object"&&(Array.prototype.isPrototypeOf(lt)||lt.constructor&&lt.constructor.name==="Array")?"array":Je==="object"&&(String.prototype.isPrototypeOf(lt)||lt.constructor&&lt.constructor.name==="String")?"string":Je},We=function(lt){return function(Je){return A(Je)===lt}},Ge=function(lt){return function(Je){return typeof Je===lt}},Xe=We("string"),Ve=We("array"),P=Ge("boolean"),Te=function(lt){return lt==null},j=function(lt){return!Te(lt)},x=Ge("function"),qe=Ge("number"),Be=function(){},De=function(lt,Je){return function(){for(var ht=[],Lt=0;Lt<arguments.length;Lt++)ht[Lt]=arguments[Lt];return lt(Je.apply(null,ht))}},He=function(lt,Je){return function(ht){return lt(Je(ht))}},Ye=function(lt){return function(){return lt}},st=function(lt){return lt};function rt(lt){for(var Je=[],ht=1;ht<arguments.length;ht++)Je[ht-1]=arguments[ht];return function(){for(var Lt=[],un=0;un<arguments.length;un++)Lt[un]=arguments[un];var Hn=Je.concat(Lt);return lt.apply(null,Hn)}}var Ke=Ye(!1),tt=Ye(!0),at=function(){return et},et=function(){var lt=function(Lt){return Lt()},Je=st,ht={fold:function(Lt,un){return Lt()},isSome:Ke,isNone:tt,getOr:Je,getOrThunk:lt,getOrDie:function(Lt){throw new Error(Lt||"error: getOrDie called on none.")},getOrNull:Ye(null),getOrUndefined:Ye(void 0),or:Je,orThunk:lt,map:at,each:Be,bind:at,exists:Ke,forall:tt,filter:function(){return at()},toArray:function(){return[]},toString:Ye("none()")};return ht}(),Ot=function(lt){var Je=Ye(lt),ht=function(){return un},Lt=function(Hn){return Hn(lt)},un={fold:function(Hn,Er){return Er(lt)},isSome:tt,isNone:Ke,getOr:Je,getOrThunk:Je,getOrDie:Je,getOrNull:Je,getOrUndefined:Je,or:ht,orThunk:ht,map:function(Hn){return Ot(Hn(lt))},each:function(Hn){Hn(lt)},bind:Lt,exists:Lt,forall:Lt,filter:function(Hn){return Hn(lt)?un:et},toArray:function(){return[lt]},toString:function(){return"some("+lt+")"}};return un},wt=function(lt){return lt==null?et:Ot(lt)},xt={some:Ot,none:at,from:wt},it=function(){return it=Object.assign||function(Je){for(var ht,Lt=1,un=arguments.length;Lt<un;Lt++){ht=arguments[Lt];for(var Hn in ht)Object.prototype.hasOwnProperty.call(ht,Hn)&&(Je[Hn]=ht[Hn])}return Je},it.apply(this,arguments)},yt=function(lt){var Je=v(xt.none()),ht=function(){return Je.get().each(lt)},Lt=function(){ht(),Je.set(xt.none())},un=function(){return Je.get().isSome()},Hn=function(){return Je.get()},Er=function(Aa){ht(),Je.set(xt.some(Aa))};return{clear:Lt,isSet:un,get:Hn,set:Er}},ut=function(){return yt(function(lt){return lt.unbind()})},Et=function(){var lt=yt(Be),Je=function(ht){return lt.get().each(ht)};return it(it({},lt),{on:Je})},Ht=Array.prototype.push,an=function(lt,Je){for(var ht=lt.length,Lt=new Array(ht),un=0;un<ht;un++){var Hn=lt[un];Lt[un]=Je(Hn,un)}return Lt},Mt=function(lt,Je){for(var ht=0,Lt=lt.length;ht<Lt;ht++){var un=lt[ht];Je(un,ht)}},vn=function(lt,Je){for(var ht=[],Lt=0,un=lt.length;Lt<un;Lt++){var Hn=lt[Lt];Je(Hn,Lt)&&ht.push(Hn)}return ht},Wn=function(lt,Je,ht){for(var Lt=0,un=lt.length;Lt<un;Lt++){var Hn=lt[Lt];if(Je(Hn,Lt))return xt.some(Hn);if(ht(Hn,Lt))break}return xt.none()},$e=function(lt,Je){return Wn(lt,Je,Ke)},Dt=function(lt){for(var Je=[],ht=0,Lt=lt.length;ht<Lt;++ht){if(!Ve(lt[ht]))throw new Error("Arr.flatten item "+ht+" was not an array, input: "+lt);Ht.apply(Je,lt[ht])}return Je},vt=function(lt,Je){return Dt(an(lt,Je))},nn=function(lt,Je){return Je>=0&&Je<lt.length?xt.some(lt[Je]):xt.none()},_t=function(lt){return nn(lt,0)},Nt=function(lt,Je){for(var ht=0;ht<lt.length;ht++){var Lt=Je(lt[ht],ht);if(Lt.isSome())return Lt}return xt.none()},ln=Object.keys,on=function(lt,Je){for(var ht=ln(lt),Lt=0,un=ht.length;Lt<un;Lt++){var Hn=ht[Lt],Er=lt[Hn];Je(Er,Hn)}},dt=function(lt,Je){return lt.indexOf(Je)!==-1},ur=function(lt){return lt.style!==void 0&&x(lt.style.getPropertyValue)},dn=function(lt,Je){var ht=Je||document,Lt=ht.createElement("div");if(Lt.innerHTML=lt,!Lt.hasChildNodes()||Lt.childNodes.length>1)throw new Error("HTML must have a single root node");return fn(Lt.childNodes[0])},en=function(lt,Je){var ht=Je||document,Lt=ht.createElement(lt);return fn(Lt)},Nn=function(lt,Je){var ht=Je||document,Lt=ht.createTextNode(lt);return fn(Lt)},fn=function(lt){if(lt==null)throw new Error("Node cannot be null or undefined");return{dom:lt}},cn=function(lt,Je,ht){return xt.from(lt.dom.elementFromPoint(Je,ht)).map(fn)},hn={fromHtml:dn,fromTag:en,fromText:Nn,fromDom:fn,fromPoint:cn};typeof window!="undefined"||Function("return this;")();var er=9,Fn=11,Gn=1,va=3,tn=function(lt){return lt.dom.nodeType},Mn=function(lt){return function(Je){return tn(Je)===lt}},Rr=Mn(Gn),Yr=Mn(va),oa=Mn(er),pa=Mn(Fn),Ga=function(lt){var Je=!1,ht;return function(){for(var Lt=[],un=0;un<arguments.length;un++)Lt[un]=arguments[un];return Je||(Je=!0,ht=lt.apply(null,Lt)),ht}},fo=function(lt,Je,ht,Lt){var un=lt.isiOS()&&/ipad/i.test(ht)===!0,Hn=lt.isiOS()&&!un,Er=lt.isiOS()||lt.isAndroid(),Aa=Er||Lt("(pointer:coarse)"),ja=un||!Hn&&Er&&Lt("(min-device-width:768px)"),Kr=Hn||Er&&!ja,Sa=Je.isSafari()&&lt.isiOS()&&/safari/i.test(ht)===!1,ro=!Kr&&!ja&&!Sa;return{isiPad:Ye(un),isiPhone:Ye(Hn),isTablet:Ye(ja),isPhone:Ye(Kr),isTouch:Ye(Aa),isAndroid:lt.isAndroid,isiOS:lt.isiOS,isWebView:Ye(Sa),isDesktop:Ye(ro)}},oo=function(lt,Je){for(var ht=0;ht<lt.length;ht++){var Lt=lt[ht];if(Lt.test(Je))return Lt}},fr=function(lt,Je){var ht=oo(lt,Je);if(!ht)return{major:0,minor:0};var Lt=function(un){return Number(Je.replace(ht,"$"+un))};return Tn(Lt(1),Lt(2))},sr=function(lt,Je){var ht=String(Je).toLowerCase();return lt.length===0?mr():fr(lt,ht)},mr=function(){return Tn(0,0)},Tn=function(lt,Je){return{major:lt,minor:Je}},Rn={nu:Tn,detect:sr,unknown:mr},dr=function(lt,Je){return Nt(Je.brands,function(ht){var Lt=ht.brand.toLowerCase();return $e(lt,function(un){var Hn;return Lt===((Hn=un.brand)===null||Hn===void 0?void 0:Hn.toLowerCase())}).map(function(un){return{current:un.name,version:Rn.nu(parseInt(ht.version,10),0)}})})},Pr=function(lt,Je){var ht=String(Je).toLowerCase();return $e(lt,function(Lt){return Lt.search(ht)})},br=function(lt,Je){return Pr(lt,Je).map(function(ht){var Lt=Rn.detect(ht.versionRegexes,Je);return{current:ht.name,version:Lt}})},Cn=function(lt,Je){return Pr(lt,Je).map(function(ht){var Lt=Rn.detect(ht.versionRegexes,Je);return{current:ht.name,version:Lt}})},cr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,zr=function(lt){return function(Je){return dt(Je,lt)}},Nr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(lt){return dt(lt,"edge/")&&dt(lt,"chrome")&&dt(lt,"safari")&&dt(lt,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,cr],search:function(lt){return dt(lt,"chrome")&&!dt(lt,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(lt){return dt(lt,"msie")||dt(lt,"trident")}},{name:"Opera",versionRegexes:[cr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:zr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:zr("firefox")},{name:"Safari",versionRegexes:[cr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(lt){return(dt(lt,"safari")||dt(lt,"mobile/"))&&dt(lt,"applewebkit")}}],Ar=[{name:"Windows",search:zr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(lt){return dt(lt,"iphone")||dt(lt,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:zr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:zr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:zr("linux"),versionRegexes:[]},{name:"Solaris",search:zr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:zr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:zr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],sn={browsers:Ye(Nr),oses:Ye(Ar)},Un="Edge",jn="Chrome",pr="IE",aa="Opera",Ua="Firefox",jo="Safari",Xa=function(){return Ka({current:void 0,version:Rn.unknown()})},Ka=function(lt){var Je=lt.current,ht=lt.version,Lt=function(un){return function(){return Je===un}};return{current:Je,version:ht,isEdge:Lt(Un),isChrome:Lt(jn),isIE:Lt(pr),isOpera:Lt(aa),isFirefox:Lt(Ua),isSafari:Lt(jo)}},Yo={unknown:Xa,nu:Ka,edge:Ye(Un),chrome:Ye(jn),ie:Ye(pr),opera:Ye(aa),firefox:Ye(Ua),safari:Ye(jo)},Io="Windows",pi="iOS",oi="Android",Si="Linux",Ii="OSX",xi="Solaris",Ei="FreeBSD",Fo="ChromeOS",wo=function(){return ji({current:void 0,version:Rn.unknown()})},ji=function(lt){var Je=lt.current,ht=lt.version,Lt=function(un){return function(){return Je===un}};return{current:Je,version:ht,isWindows:Lt(Io),isiOS:Lt(pi),isAndroid:Lt(oi),isOSX:Lt(Ii),isLinux:Lt(Si),isSolaris:Lt(xi),isFreeBSD:Lt(Ei),isChromeOS:Lt(Fo)}},Ca={unknown:wo,nu:ji,windows:Ye(Io),ios:Ye(pi),android:Ye(oi),linux:Ye(Si),osx:Ye(Ii),solaris:Ye(xi),freebsd:Ye(Ei),chromeos:Ye(Fo)},Hu=function(lt,Je,ht){var Lt=sn.browsers(),un=sn.oses(),Hn=Je.bind(function(ja){return dr(Lt,ja)}).orThunk(function(){return br(Lt,lt)}).fold(Yo.unknown,Yo.nu),Er=Cn(un,lt).fold(Ca.unknown,Ca.nu),Aa=fo(Er,Hn,lt,ht);return{browser:Hn,os:Er,deviceType:Aa}},Fi={detect:Hu},lu=function(lt){return window.matchMedia(lt).matches},Xu=Ga(function(){return Fi.detect(navigator.userAgent,xt.from(navigator.userAgentData),lu)}),nu=function(){return Xu()},hu=function(lt,Je){var ht=lt.dom;if(ht.nodeType!==Gn)return!1;var Lt=ht;if(Lt.matches!==void 0)return Lt.matches(Je);if(Lt.msMatchesSelector!==void 0)return Lt.msMatchesSelector(Je);if(Lt.webkitMatchesSelector!==void 0)return Lt.webkitMatchesSelector(Je);if(Lt.mozMatchesSelector!==void 0)return Lt.mozMatchesSelector(Je);throw new Error("Browser lacks native selectors")},Yu=function(lt){return lt.nodeType!==Gn&&lt.nodeType!==er&&lt.nodeType!==Fn||lt.childElementCount===0},Ss=function(lt,Je){var ht=Je===void 0?document:Je.dom;return Yu(ht)?[]:an(ht.querySelectorAll(lt),hn.fromDom)},qt=function(lt,Je){return lt.dom===Je.dom},xn=function(lt){return hn.fromDom(lt.dom.ownerDocument)},Gt=function(lt){return oa(lt)?lt:xn(lt)},Pn=function(lt){return xt.from(lt.dom.parentNode).map(hn.fromDom)},Br=function(lt,Je){for(var ht=x(Je)?Je:Ke,Lt=lt.dom,un=[];Lt.parentNode!==null&&Lt.parentNode!==void 0;){var Hn=Lt.parentNode,Er=hn.fromDom(Hn);if(un.push(Er),ht(Er)===!0)break;Lt=Hn}return un},ta=function(lt){var Je=function(ht){return vn(ht,function(Lt){return!qt(lt,Lt)})};return Pn(lt).map($t).map(Je).getOr([])},$t=function(lt){return an(lt.dom.childNodes,hn.fromDom)},Zt=function(lt){return pa(lt)&&j(lt.dom.host)},In=x(Element.prototype.attachShadow)&&x(Node.prototype.getRootNode),Qn=Ye(In),mt=In?function(lt){return hn.fromDom(lt.dom.getRootNode())}:Gt,Rt=function(lt){var Je=mt(lt);return Zt(Je)?xt.some(Je):xt.none()},Jt=function(lt){return hn.fromDom(lt.dom.host)},gn=function(lt){if(Qn()&&j(lt.target)){var Je=hn.fromDom(lt.target);if(Rr(Je)&&Dn(Je)&&lt.composed&&lt.composedPath){var ht=lt.composedPath();if(ht)return _t(ht)}}return xt.from(lt.target)},Dn=function(lt){return j(lt.dom.shadowRoot)},Bn=function(lt){var Je=Yr(lt)?lt.dom.parentNode:lt.dom;if(Je==null||Je.ownerDocument===null)return!1;var ht=Je.ownerDocument;return Rt(hn.fromDom(Je)).fold(function(){return ht.body.contains(Je)},He(Bn,Jt))},rr=function(lt){var Je=lt.dom.body;if(Je==null)throw new Error("Body is not available yet");return hn.fromDom(Je)},Qr=function(lt,Je,ht){if(Xe(ht)||P(ht)||qe(ht))lt.setAttribute(Je,ht+"");else throw new Error("Attribute value was not simple")},La=function(lt,Je,ht){Qr(lt.dom,Je,ht)},Fa=function(lt,Je){var ht=lt.dom.getAttribute(Je);return ht===null?void 0:ht},Ha=function(lt,Je){lt.dom.removeAttribute(Je)},Ya=function(lt,Je,ht){if(!Xe(ht))throw new Error("CSS value must be a string: "+ht);ur(lt)&&lt.style.setProperty(Je,ht)},Lo=function(lt,Je){var ht=lt.dom;on(Je,function(Lt,un){Ya(ht,un,Lt)})},ki=function(lt,Je){var ht=lt.dom,Lt=window.getComputedStyle(ht),un=Lt.getPropertyValue(Je);return un===""&&!Bn(lt)?Du(ht,Je):un},Du=function(lt,Je){return ur(lt)?lt.style.getPropertyValue(Je):""},is=function(lt,Je,ht,Lt,un,Hn,Er){return{target:lt,x:Je,y:ht,stop:Lt,prevent:un,kill:Hn,raw:Er}},Qu=function(lt){var Je=hn.fromDom(gn(lt).getOr(lt.target)),ht=function(){return lt.stopPropagation()},Lt=function(){return lt.preventDefault()},un=De(Lt,ht);return is(Je,lt.clientX,lt.clientY,ht,Lt,un,lt)},Ai=function(lt,Je){return function(ht){lt(ht)&&Je(Qu(ht))}},dl=function(lt,Je,ht,Lt,un){var Hn=Ai(ht,Lt);return lt.dom.addEventListener(Je,Hn,un),{unbind:rt(zu,lt,Je,Hn,un)}},Ls=function(lt,Je,ht,Lt){return dl(lt,Je,ht,Lt,!1)},zu=function(lt,Je,ht,Lt){lt.dom.removeEventListener(Je,ht,Lt)},Wi=tt,Rs=function(lt,Je,ht){return Ls(lt,Je,Wi,ht)},xs=function(lt,Je){var ht=function(Lt,un){return xs(lt+Lt,Je+un)};return{left:lt,top:Je,translate:ht}},Nu=xs,Bs=function(lt){var Je=lt!==void 0?lt.dom:document,ht=Je.body.scrollLeft||Je.documentElement.scrollLeft,Lt=Je.body.scrollTop||Je.documentElement.scrollTop;return Nu(ht,Lt)},Ju=function(lt){var Je=lt===void 0?window:lt;return nu().browser.isFirefox()?xt.none():xt.from(Je.visualViewport)},us=function(lt,Je,ht,Lt){return{x:lt,y:Je,width:ht,height:Lt,right:lt+ht,bottom:Je+Lt}},Ql=function(lt){var Je=lt===void 0?window:lt,ht=Je.document,Lt=Bs(hn.fromDom(ht));return Ju(Je).fold(function(){var un=Je.document.documentElement,Hn=un.clientWidth,Er=un.clientHeight;return us(Lt.left,Lt.top,Hn,Er)},function(un){return us(Math.max(un.pageLeft,Lt.left),Math.max(un.pageTop,Lt.top),un.width,un.height)})},vl=function(lt,Je,ht){return Ju(ht).map(function(Lt){var un=function(Hn){return Je(Qu(Hn))};return Lt.addEventListener(lt,un),{unbind:function(){return Lt.removeEventListener(lt,un)}}}).getOrThunk(function(){return{unbind:Be}})},Dl=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Tt=tinymce.util.Tools.resolve("tinymce.Env"),pn=tinymce.util.Tools.resolve("tinymce.util.Delay"),_n=function(lt,Je){lt.fire("FullscreenStateChanged",{state:Je}),lt.fire("ResizeEditor")},or=function(lt){return lt.getParam("fullscreen_native",!1,"boolean")},Mr=function(lt){var Je=hn.fromDom(lt.getElement());return Rt(Je).map(Jt).getOrThunk(function(){return rr(xn(Je))})},Ea=function(lt){return lt.fullscreenElement!==void 0?lt.fullscreenElement:lt.msFullscreenElement!==void 0?lt.msFullscreenElement:lt.webkitFullscreenElement!==void 0?lt.webkitFullscreenElement:null},Ro=function(){return document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange"},Qo=function(lt){var Je=lt.dom;Je.requestFullscreen?Je.requestFullscreen():Je.msRequestFullscreen?Je.msRequestFullscreen():Je.webkitRequestFullScreen&&Je.webkitRequestFullScreen()},so=function(lt){var Je=lt.dom;Je.exitFullscreen?Je.exitFullscreen():Je.msExitFullscreen?Je.msExitFullscreen():Je.webkitCancelFullScreen&&Je.webkitCancelFullScreen()},ri=function(lt){return lt.dom===Ea(xn(lt).dom)},ci=function(lt,Je,ht){return vn(Br(lt,ht),Je)},Ps=function(lt,Je){return vn(ta(lt),Je)},bc=function(lt){return Ss(lt)},yc=function(lt,Je,ht){return ci(lt,function(Lt){return hu(Lt,Je)},ht)},Ra=function(lt,Je){return Ps(lt,function(ht){return hu(ht,Je)})},Zs="data-ephox-mobile-fullscreen-style",zc="display:none!important;",Es="position:absolute!important;",$c="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",td="background-color:rgb(255,255,255)!important;",Mf=Tt.os.isAndroid(),bi=function(lt){var Je=ki(lt,"background-color");return Je!==void 0&&Je!==""?"background-color:"+Je+"!important":td},Jl=function(lt,Je,ht){var Lt=function(Kr){return Ra(Kr,"*:not(.tox-silver-sink)")},un=function(Kr){return function(Sa){var ro=Fa(Sa,"style"),Co=ro===void 0?"no-styles":ro.trim();Co!==Kr&&(La(Sa,Zs,Co),Lo(Sa,lt.parseStyle(Kr)))}},Hn=yc(Je,"*"),Er=vt(Hn,Lt),Aa=bi(ht);Mt(Er,un(zc)),Mt(Hn,un(Es+$c+Aa));var ja=Mf===!0?"":Es;un(ja+$c+Aa)(Je)},nd=function(lt){var Je=bc("["+Zs+"]");Mt(Je,function(ht){var Lt=Fa(ht,Zs);Lt!=="no-styles"?Lo(ht,lt.parseStyle(Lt)):Ha(ht,"style"),Ha(ht,Zs)})},ss=Dl.DOM,$u=function(){return Ql(window)},wc=function(lt){return window.scrollTo(lt.x,lt.y)},Zn=Ju().fold(function(){return{bind:Be,unbind:Be}},function(lt){var Je=Et(),ht=ut(),Lt=ut(),un=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},Hn=function(){window.requestAnimationFrame(function(){Je.on(function(Kr){return Lo(Kr,{top:lt.offsetTop+"px",left:lt.offsetLeft+"px",height:lt.height+"px",width:lt.width+"px"})})})},Er=pn.throttle(function(){un(),Hn()},50),Aa=function(Kr){Je.set(Kr),Er(),ht.set(vl("resize",Er)),Lt.set(vl("scroll",Er))},ja=function(){Je.on(function(){ht.clear(),Lt.clear()}),Je.clear()};return{bind:Aa,unbind:ja}}),Zl=function(lt,Je){var ht=document.body,Lt=document.documentElement,un=lt.getContainer(),Hn=hn.fromDom(un),Er=Mr(lt),Aa=Je.get(),ja=hn.fromDom(lt.getBody()),Kr=Tt.deviceType.isTouch(),Sa=un.style,ro=lt.iframeElement,Co=ro.style,Wa=function(Jo){Jo(ht,"tox-fullscreen"),Jo(Lt,"tox-fullscreen"),Jo(un,"tox-fullscreen"),Rt(Hn).map(function(Vu){return Jt(Vu).dom}).each(function(Vu){Jo(Vu,"tox-fullscreen"),Jo(Vu,"tox-shadowhost")})},fi=function(){Kr&&nd(lt.dom),Wa(ss.removeClass),Zn.unbind(),xt.from(Je.get()).each(function(Jo){return Jo.fullscreenChangeHandler.unbind()})};if(Aa)Aa.fullscreenChangeHandler.unbind(),or(lt)&&ri(Er)&&so(xn(Er)),Co.width=Aa.iframeWidth,Co.height=Aa.iframeHeight,Sa.width=Aa.containerWidth,Sa.height=Aa.containerHeight,Sa.top=Aa.containerTop,Sa.left=Aa.containerLeft,fi(),wc(Aa.scrollPos),Je.set(null),_n(lt,!1),lt.off("remove",fi);else{var Ja=Rs(xn(Er),Ro(),function(Jo){or(lt)&&!ri(Er)&&Je.get()!==null&&Zl(lt,Je)}),ei={scrollPos:$u(),containerWidth:Sa.width,containerHeight:Sa.height,containerTop:Sa.top,containerLeft:Sa.left,iframeWidth:Co.width,iframeHeight:Co.height,fullscreenChangeHandler:Ja};Kr&&Jl(lt.dom,Hn,ja),Co.width=Co.height="100%",Sa.width=Sa.height="",Wa(ss.addClass),Zn.bind(Hn),lt.on("remove",fi),Je.set(ei),or(lt)&&Qo(Er),_n(lt,!0)}},ru=function(lt,Je){lt.addCommand("mceFullScreen",function(){Zl(lt,Je)})},Vc=function(lt,Je){return function(ht){ht.setActive(Je.get()!==null);var Lt=function(un){return ht.setActive(un.state)};return lt.on("FullscreenStateChanged",Lt),function(){return lt.off("FullscreenStateChanged",Lt)}}},ml=function(lt,Je){var ht=function(){return lt.execCommand("mceFullScreen")};lt.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:ht,onSetup:Vc(lt,Je)}),lt.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:ht,onSetup:Vc(lt,Je)})};function ec(){y.add("fullscreen",function(lt){var Je=v(null);return lt.inline||(ru(lt,Je),ml(lt,Je),lt.addShortcut("Meta+Shift+F","","mceFullScreen")),C(Je)})}ec()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(We){We.addCommand("InsertHorizontalRule",function(){We.execCommand("mceInsertContent",!1,"<hr />")})},C=function(We){var Ge=function(){return We.execCommand("InsertHorizontalRule")};We.ui.registry.addButton("hr",{icon:"horizontal-rule",tooltip:"Horizontal line",onAction:Ge}),We.ui.registry.addMenuItem("hr",{icon:"horizontal-rule",text:"Horizontal line",onAction:Ge})};function A(){v.add("hr",function(We){y(We),C(We)})}A()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(Ke){return Ke.getParam("insertdatetime_dateformat",Ke.translate("%Y-%m-%d"))},C=function(Ke){return Ke.getParam("insertdatetime_timeformat",Ke.translate("%H:%M:%S"))},A=function(Ke){return Ke.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},We=function(Ke){var tt=A(Ke);return tt.length>0?tt[0]:C(Ke)},Ge=function(Ke){return Ke.getParam("insertdatetime_element",!1)},Xe="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Ve="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),P="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Te="January February March April May June July August September October November December".split(" "),j=function(Ke,tt){if(Ke=""+Ke,Ke.length<tt)for(var at=0;at<tt-Ke.length;at++)Ke="0"+Ke;return Ke},x=function(Ke,tt,at){return at===void 0&&(at=new Date),tt=tt.replace("%D","%m/%d/%Y"),tt=tt.replace("%r","%I:%M:%S %p"),tt=tt.replace("%Y",""+at.getFullYear()),tt=tt.replace("%y",""+at.getYear()),tt=tt.replace("%m",j(at.getMonth()+1,2)),tt=tt.replace("%d",j(at.getDate(),2)),tt=tt.replace("%H",""+j(at.getHours(),2)),tt=tt.replace("%M",""+j(at.getMinutes(),2)),tt=tt.replace("%S",""+j(at.getSeconds(),2)),tt=tt.replace("%I",""+((at.getHours()+11)%12+1)),tt=tt.replace("%p",at.getHours()<12?"AM":"PM"),tt=tt.replace("%B",""+Ke.translate(Te[at.getMonth()])),tt=tt.replace("%b",""+Ke.translate(P[at.getMonth()])),tt=tt.replace("%A",""+Ke.translate(Ve[at.getDay()])),tt=tt.replace("%a",""+Ke.translate(Xe[at.getDay()])),tt=tt.replace("%%","%"),tt},qe=function(Ke,tt,at,et){var Ot=Ke.dom.create("time",{datetime:at},et);tt.parentNode.insertBefore(Ot,tt),Ke.dom.remove(tt),Ke.selection.select(Ot,!0),Ke.selection.collapse(!1)},Be=function(Ke,tt){if(Ge(Ke)){var at=x(Ke,tt),et=void 0;/%[HMSIp]/.test(tt)?et=x(Ke,"%Y-%m-%dT%H:%M"):et=x(Ke,"%Y-%m-%d");var Ot=Ke.dom.getParent(Ke.selection.getStart(),"time");Ot?qe(Ke,Ot,et,at):Ke.insertContent('<time datetime="'+et+'">'+at+"</time>")}else Ke.insertContent(x(Ke,tt))},De=function(Ke){Ke.addCommand("mceInsertDate",function(tt,at){Be(Ke,at!=null?at:y(Ke))}),Ke.addCommand("mceInsertTime",function(tt,at){Be(Ke,at!=null?at:C(Ke))})},He=function(Ke){var tt=Ke,at=function(){return tt},et=function(Ot){tt=Ot};return{get:at,set:et}},Ye=tinymce.util.Tools.resolve("tinymce.util.Tools"),st=function(Ke){var tt=A(Ke),at=He(We(Ke)),et=function(wt){return Ke.execCommand("mceInsertDate",!1,wt)};Ke.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:function(wt){return wt===at.get()},fetch:function(wt){wt(Ye.map(tt,function(xt){return{type:"choiceitem",text:x(Ke,xt),value:xt}}))},onAction:function(wt){et(at.get())},onItemAction:function(wt,xt){at.set(xt),et(xt)}});var Ot=function(wt){return function(){at.set(wt),et(wt)}};Ke.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:function(){return Ye.map(tt,function(wt){return{type:"menuitem",text:x(Ke,wt),onAction:Ot(wt)}})}})};function rt(){v.add("insertdatetime",function(Ke){De(Ke),st(Ke)})}rt()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=tinymce.util.Tools.resolve("tinymce.util.VK"),C=function(Tt){var pn=typeof Tt;return Tt===null?"null":pn==="object"&&(Array.prototype.isPrototypeOf(Tt)||Tt.constructor&&Tt.constructor.name==="Array")?"array":pn==="object"&&(String.prototype.isPrototypeOf(Tt)||Tt.constructor&&Tt.constructor.name==="String")?"string":pn},A=function(Tt){return function(pn){return C(pn)===Tt}},We=function(Tt){return function(pn){return typeof pn===Tt}},Ge=function(Tt){return function(pn){return Tt===pn}},Xe=A("string"),Ve=A("array"),P=Ge(null),Te=We("boolean"),j=We("function"),x=function(){},qe=function(Tt){return function(){return Tt}},Be=function(Tt){return Tt},De=function(Tt,pn){return Tt===pn},He=qe(!1),Ye=qe(!0),st=function(){return rt},rt=function(){var Tt=function(or){return or()},pn=Be,_n={fold:function(or,Mr){return or()},isSome:He,isNone:Ye,getOr:pn,getOrThunk:Tt,getOrDie:function(or){throw new Error(or||"error: getOrDie called on none.")},getOrNull:qe(null),getOrUndefined:qe(void 0),or:pn,orThunk:Tt,map:st,each:x,bind:st,exists:He,forall:Ye,filter:function(){return st()},toArray:function(){return[]},toString:qe("none()")};return _n}(),Ke=function(Tt){var pn=qe(Tt),_n=function(){return Mr},or=function(Ea){return Ea(Tt)},Mr={fold:function(Ea,Ro){return Ro(Tt)},isSome:Ye,isNone:He,getOr:pn,getOrThunk:pn,getOrDie:pn,getOrNull:pn,getOrUndefined:pn,or:_n,orThunk:_n,map:function(Ea){return Ke(Ea(Tt))},each:function(Ea){Ea(Tt)},bind:or,exists:or,forall:or,filter:function(Ea){return Ea(Tt)?Mr:rt},toArray:function(){return[Tt]},toString:function(){return"some("+Tt+")"}};return Mr},tt=function(Tt){return Tt==null?rt:Ke(Tt)},at={some:Ke,none:st,from:tt},et=Array.prototype.indexOf,Ot=Array.prototype.push,wt=function(Tt,pn){return et.call(Tt,pn)},xt=function(Tt,pn){return wt(Tt,pn)>-1},it=function(Tt,pn){for(var _n=Tt.length,or=new Array(_n),Mr=0;Mr<_n;Mr++){var Ea=Tt[Mr];or[Mr]=pn(Ea,Mr)}return or},yt=function(Tt,pn){for(var _n=0,or=Tt.length;_n<or;_n++){var Mr=Tt[_n];pn(Mr,_n)}},ut=function(Tt,pn,_n){return yt(Tt,function(or,Mr){_n=pn(_n,or,Mr)}),_n},Et=function(Tt){for(var pn=[],_n=0,or=Tt.length;_n<or;++_n){if(!Ve(Tt[_n]))throw new Error("Arr.flatten item "+_n+" was not an array, input: "+Tt);Ot.apply(pn,Tt[_n])}return pn},Ht=function(Tt,pn){return Et(it(Tt,pn))},an=function(Tt,pn){for(var _n=0;_n<Tt.length;_n++){var or=pn(Tt[_n],_n);if(or.isSome())return or}return at.none()},Mt=function(Tt,pn,_n){return _n===void 0&&(_n=De),Tt.exists(function(or){return _n(or,pn)})},vn=function(Tt){for(var pn=[],_n=function(Mr){pn.push(Mr)},or=0;or<Tt.length;or++)Tt[or].each(_n);return pn},Wn=function(Tt,pn){return Tt?at.some(pn):at.none()},$e=function(Tt){var pn=Tt.getParam("link_assume_external_targets",!1);return Te(pn)&&pn?1:Xe(pn)&&(pn==="http"||pn==="https")?pn:0},Dt=function(Tt){return Tt.getParam("link_context_toolbar",!1,"boolean")},vt=function(Tt){return Tt.getParam("link_list")},nn=function(Tt){return Tt.getParam("default_link_target")},_t=function(Tt){return Tt.getParam("target_list",!0)},Nt=function(Tt){return Tt.getParam("rel_list",[],"array")},ln=function(Tt){return Tt.getParam("link_class_list",[],"array")},on=function(Tt){return Tt.getParam("link_title",!0,"boolean")},dt=function(Tt){return Tt.getParam("allow_unsafe_link_target",!1,"boolean")},ur=function(Tt){return Tt.getParam("link_quicklink",!1,"boolean")},dn=function(Tt){return Tt.getParam("link_default_protocol","http","string")},en=tinymce.util.Tools.resolve("tinymce.util.Tools"),Nn=function(Tt){return Xe(Tt.value)?Tt.value:""},fn=function(Tt){return Xe(Tt.text)?Tt.text:Xe(Tt.title)?Tt.title:""},cn=function(Tt,pn){var _n=[];return en.each(Tt,function(or){var Mr=fn(or);if(or.menu!==void 0){var Ea=cn(or.menu,pn);_n.push({text:Mr,items:Ea})}else{var Ro=pn(or);_n.push({text:Mr,value:Ro})}}),_n},hn=function(Tt){return Tt===void 0&&(Tt=Nn),function(pn){return at.from(pn).map(function(_n){return cn(_n,Tt)})}},er=function(Tt){return hn(Nn)(Tt)},Fn=function(Tt,pn){return function(_n){return{name:Tt,type:"listbox",label:pn,items:_n}}},Gn={sanitize:er,sanitizeWith:hn,createUi:Fn,getValue:Nn},va=function(){return va=Object.assign||function(pn){for(var _n,or=1,Mr=arguments.length;or<Mr;or++){_n=arguments[or];for(var Ea in _n)Object.prototype.hasOwnProperty.call(_n,Ea)&&(pn[Ea]=_n[Ea])}return pn},va.apply(this,arguments)},tn=Object.keys,Mn=Object.hasOwnProperty,Rr=function(Tt,pn){for(var _n=tn(Tt),or=0,Mr=_n.length;or<Mr;or++){var Ea=_n[or],Ro=Tt[Ea];pn(Ro,Ea)}},Yr=function(Tt){return function(pn,_n){Tt[_n]=pn}},oa=function(Tt,pn,_n,or){var Mr={};return Rr(Tt,function(Ea,Ro){(pn(Ea,Ro)?_n:or)(Ea,Ro)}),Mr},pa=function(Tt,pn){var _n={};return oa(Tt,pn,Yr(_n),x),_n},Ga=function(Tt,pn){return Mn.call(Tt,pn)},fo=function(Tt,pn){return Ga(Tt,pn)&&Tt[pn]!==void 0&&Tt[pn]!==null},oo=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),fr=tinymce.util.Tools.resolve("tinymce.util.URI"),sr=function(Tt){return Tt&&Tt.nodeName.toLowerCase()==="a"},mr=function(Tt){return sr(Tt)&&!!dr(Tt)},Tn=function(Tt,pn){if(Tt.collapsed)return[];var _n=Tt.cloneContents(),or=new oo(_n.firstChild,_n),Mr=[],Ea=_n.firstChild;do pn(Ea)&&Mr.push(Ea);while(Ea=or.next());return Mr},Rn=function(Tt){return/^\w+:/i.test(Tt)},dr=function(Tt){var pn=Tt.getAttribute("data-mce-href");return pn||Tt.getAttribute("href")},Pr=function(Tt,pn){var _n=["noopener"],or=Tt?Tt.split(/\s+/):[],Mr=function(so){return en.trim(so.sort().join(" "))},Ea=function(so){return so=Ro(so),so.length>0?so.concat(_n):_n},Ro=function(so){return so.filter(function(ri){return en.inArray(_n,ri)===-1})},Qo=pn?Ea(or):Ro(or);return Qo.length>0?Mr(Qo):""},br=function(Tt){return Tt.replace(/\uFEFF/g,"")},Cn=function(Tt,pn){return pn=pn||Tt.selection.getNode(),sn(pn)?Tt.dom.select("a[href]",pn)[0]:Tt.dom.getParent(pn,"a[href]")},cr=function(Tt,pn){var _n=pn?pn.innerText||pn.textContent:Tt.getContent({format:"text"});return br(_n)},zr=function(Tt){return en.grep(Tt,mr).length>0},Nr=function(Tt){return Tn(Tt,mr).length>0},Ar=function(Tt){var pn=Tt.schema.getTextInlineElements(),_n=function(Mr){return Mr.nodeType===1&&!sr(Mr)&&!Ga(pn,Mr.nodeName.toLowerCase())},or=Tn(Tt.selection.getRng(),_n);return or.length===0},sn=function(Tt){return Tt&&Tt.nodeName==="FIGURE"&&/\bimage\b/i.test(Tt.className)},Un=function(Tt){var pn=["title","rel","class","target"];return ut(pn,function(_n,or){return Tt[or].each(function(Mr){_n[or]=Mr.length>0?Mr:null}),_n},{href:Tt.href})},jn=function(Tt,pn){return(pn==="http"||pn==="https")&&!Rn(Tt)?pn+"://"+Tt:Tt},pr=function(Tt,pn){var _n=va({},pn);if(!(Nt(Tt).length>0)&&dt(Tt)===!1){var or=Pr(_n.rel,_n.target==="_blank");_n.rel=or||null}return at.from(_n.target).isNone()&&_t(Tt)===!1&&(_n.target=nn(Tt)),_n.href=jn(_n.href,$e(Tt)),_n},aa=function(Tt,pn,_n,or){_n.each(function(Mr){Ga(pn,"innerText")?pn.innerText=Mr:pn.textContent=Mr}),Tt.dom.setAttribs(pn,or),Tt.selection.select(pn)},Ua=function(Tt,pn,_n,or){sn(pn)?Ii(Tt,pn,or):_n.fold(function(){Tt.execCommand("mceInsertLink",!1,or)},function(Mr){Tt.insertContent(Tt.dom.createHTML("a",or,Tt.dom.encode(Mr)))})},jo=function(Tt,pn,_n){var or=Tt.selection.getNode(),Mr=Cn(Tt,or),Ea=pr(Tt,Un(_n));Tt.undoManager.transact(function(){_n.href===pn.href&&pn.attach(),Mr?(Tt.focus(),aa(Tt,Mr,_n.text,Ea)):Ua(Tt,or,_n.text,Ea)})},Xa=function(Tt){var pn=Tt.dom,_n=Tt.selection,or=_n.getBookmark(),Mr=_n.getRng().cloneRange(),Ea=pn.getParent(Mr.startContainer,"a[href]",Tt.getBody()),Ro=pn.getParent(Mr.endContainer,"a[href]",Tt.getBody());Ea&&Mr.setStartBefore(Ea),Ro&&Mr.setEndAfter(Ro),_n.setRng(Mr),Tt.execCommand("unlink"),_n.moveToBookmark(or)},Ka=function(Tt){Tt.undoManager.transact(function(){var pn=Tt.selection.getNode();sn(pn)?Si(Tt,pn):Xa(Tt),Tt.focus()})},Yo=function(Tt){var pn=Tt.class,_n=Tt.href,or=Tt.rel,Mr=Tt.target,Ea=Tt.text,Ro=Tt.title;return pa({class:pn.getOrNull(),href:_n,rel:or.getOrNull(),target:Mr.getOrNull(),text:Ea.getOrNull(),title:Ro.getOrNull()},function(Qo,so){return P(Qo)===!1})},Io=function(Tt,pn){var _n=pn.href;return va(va({},pn),{href:fr.isDomSafe(_n,"a",Tt.settings)?_n:""})},pi=function(Tt,pn,_n){var or=Io(Tt,_n);Tt.hasPlugin("rtc",!0)?Tt.execCommand("createlink",!1,Yo(or)):jo(Tt,pn,or)},oi=function(Tt){Tt.hasPlugin("rtc",!0)?Tt.execCommand("unlink"):Ka(Tt)},Si=function(Tt,pn){var _n=Tt.dom.select("img",pn)[0];if(_n){var or=Tt.dom.getParents(_n,"a[href]",pn)[0];or&&(or.parentNode.insertBefore(_n,or),Tt.dom.remove(or))}},Ii=function(Tt,pn,_n){var or=Tt.dom.select("img",pn)[0];if(or){var Mr=Tt.dom.create("a",_n);or.parentNode.insertBefore(Mr,or),Mr.appendChild(or)}},xi=function(Tt){return fo(Tt,"items")},Ei=function(Tt,pn){return an(pn,function(_n){return xi(_n)?Ei(Tt,_n.items):Wn(_n.value===Tt,_n)})},Fo=function(Tt,pn,_n,or){var Mr=or[pn],Ea=Tt.length>0;return Mr!==void 0?Ei(Mr,_n).map(function(Ro){return{url:{value:Ro.value,meta:{text:Ea?Tt:Ro.text,attach:x}},text:Ea?Tt:Ro.text}}):at.none()},wo=function(Tt,pn){return pn==="link"?Tt.link:pn==="anchor"?Tt.anchor:at.none()},ji=function(Tt,pn){var _n={text:Tt.text,title:Tt.title},or=function(so){return Wn(_n.title.length<=0,at.from(so.meta.title).getOr(""))},Mr=function(so){return Wn(_n.text.length<=0,at.from(so.meta.text).getOr(so.value))},Ea=function(so){var ri=Mr(so.url),ci=or(so.url);return ri.isSome()||ci.isSome()?at.some(va(va({},ri.map(function(Ps){return{text:Ps}}).getOr({})),ci.map(function(Ps){return{title:Ps}}).getOr({}))):at.none()},Ro=function(so,ri){var ci=wo(pn,ri.name).getOr([]);return Fo(_n.text,ri.name,ci,so)},Qo=function(so,ri){var ci=ri.name;return ci==="url"?Ea(so()):xt(["anchor","link"],ci)?Ro(so(),ri):((ci==="text"||ci==="title")&&(_n[ci]=so()[ci]),at.none())};return{onChange:Qo}},Ca={init:ji,getDelta:Fo},Hu=tinymce.util.Tools.resolve("tinymce.util.Delay"),Fi=tinymce.util.Tools.resolve("tinymce.util.Promise"),lu=function(Tt,pn,_n){var or=Tt.selection.getRng();Hu.setEditorTimeout(Tt,function(){Tt.windowManager.confirm(pn,function(Mr){Tt.selection.setRng(or),_n(Mr)})})},Xu=function(Tt){var pn=Tt.href,_n=pn.indexOf("@")>0&&pn.indexOf("/")===-1&&pn.indexOf("mailto:")===-1;return _n?at.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(or){return va(va({},or),{href:"mailto:"+pn})}}):at.none()},nu=function(Tt,pn){return function(_n){var or=_n.href,Mr=Tt===1&&!Rn(or)||Tt===0&&/^\s*www(\.|\d\.)/i.test(or);return Mr?at.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+pn+":// prefix?",preprocess:function(Ea){return va(va({},Ea),{href:pn+"://"+or})}}):at.none()}},hu=function(Tt,pn){return an([Xu,nu($e(Tt),dn(Tt))],function(_n){return _n(pn)}).fold(function(){return Fi.resolve(pn)},function(_n){return new Fi(function(or){lu(Tt,_n.message,function(Mr){or(Mr?_n.preprocess(pn):pn)})})})},Yu={preprocess:hu},Ss=function(Tt){var pn=Tt.dom.select("a:not([href])"),_n=Ht(pn,function(or){var Mr=or.name||or.id;return Mr?[{text:Mr,value:"#"+Mr}]:[]});return _n.length>0?at.some([{text:"None",value:""}].concat(_n)):at.none()},qt={getAnchors:Ss},xn=function(Tt){var pn=ln(Tt);return pn.length>0?Gn.sanitize(pn):at.none()},Gt={getClasses:xn},Pn=tinymce.util.Tools.resolve("tinymce.util.XHR"),Br=function(Tt){try{return at.some(JSON.parse(Tt))}catch(pn){return at.none()}},ta=function(Tt){var pn=function(or){return Tt.convertURL(or.value||or.url,"href")},_n=vt(Tt);return new Fi(function(or){Xe(_n)?Pn.send({url:_n,success:function(Mr){return or(Br(Mr))},error:function(Mr){return or(at.none())}}):j(_n)?_n(function(Mr){return or(at.some(Mr))}):or(at.from(_n))}).then(function(or){return or.bind(Gn.sanitizeWith(pn)).map(function(Mr){if(Mr.length>0){var Ea=[{text:"None",value:""}];return Ea.concat(Mr)}else return Mr})})},$t={getLinks:ta},Zt=function(Tt,pn){var _n=Nt(Tt);if(_n.length>0){var or=Mt(pn,"_blank"),Mr=dt(Tt)===!1,Ea=function(Qo){return Pr(Gn.getValue(Qo),or)},Ro=Mr?Gn.sanitizeWith(Ea):Gn.sanitize;return Ro(_n)}return at.none()},In={getRels:Zt},Qn=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],mt=function(Tt){var pn=_t(Tt);return Ve(pn)?Gn.sanitize(pn).orThunk(function(){return at.some(Qn)}):pn===!1?at.none():at.some(Qn)},Rt={getTargets:mt},Jt=function(Tt,pn,_n){var or=Tt.getAttrib(pn,_n);return or!==null&&or.length>0?at.some(or):at.none()},gn=function(Tt,pn){var _n=Tt.dom,or=Ar(Tt),Mr=or?at.some(cr(Tt.selection,pn)):at.none(),Ea=pn?at.some(_n.getAttrib(pn,"href")):at.none(),Ro=pn?at.from(_n.getAttrib(pn,"target")):at.none(),Qo=Jt(_n,pn,"rel"),so=Jt(_n,pn,"class"),ri=Jt(_n,pn,"title");return{url:Ea,text:Mr,title:ri,target:Ro,rel:Qo,linkClass:so}},Dn=function(Tt,pn){return $t.getLinks(Tt).then(function(_n){var or=gn(Tt,pn);return{anchor:or,catalogs:{targets:Rt.getTargets(Tt),rels:In.getRels(Tt,or.target),classes:Gt.getClasses(Tt),anchor:qt.getAnchors(Tt),link:_n},optNode:at.from(pn),flags:{titleEnabled:on(Tt)}}})},Bn={collect:Dn},rr=function(Tt,pn){return function(_n){var or=_n.getData();if(!or.url.value){oi(Tt),_n.close();return}var Mr=function(Qo){return at.from(or[Qo]).filter(function(so){return!Mt(pn.anchor[Qo],so)})},Ea={href:or.url.value,text:Mr("text"),target:Mr("target"),rel:Mr("rel"),class:Mr("linkClass"),title:Mr("title")},Ro={href:or.url.value,attach:or.url.meta!==void 0&&or.url.meta.attach?or.url.meta.attach:x};Yu.preprocess(Tt,Ea).then(function(Qo){pi(Tt,Ro,Qo)}),_n.close()}},Qr=function(Tt){var pn=Cn(Tt);return Bn.collect(Tt,pn)},La=function(Tt,pn){var _n=Tt.anchor,or=_n.url.getOr("");return{url:{value:or,meta:{original:{value:or}}},text:_n.text.getOr(""),title:_n.title.getOr(""),anchor:or,link:or,rel:_n.rel.getOr(""),target:_n.target.or(pn).getOr(""),linkClass:_n.linkClass.getOr("")}},Fa=function(Tt,pn,_n){var or=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],Mr=Tt.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),Ea=Tt.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Ro=at.from(nn(_n)),Qo=La(Tt,Ro),so=Tt.catalogs,ri=Ca.init(Qo,so),ci={type:"panel",items:Et([or,Mr,Ea,vn([so.anchor.map(Gn.createUi("anchor","Anchors")),so.rels.map(Gn.createUi("rel","Rel")),so.targets.map(Gn.createUi("target","Open link in...")),so.link.map(Gn.createUi("link","Link list")),so.classes.map(Gn.createUi("linkClass","Class"))])])};return{title:"Insert/Edit Link",size:"normal",body:ci,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Qo,onChange:function(Ps,bc){var yc=bc.name;ri.onChange(Ps.getData,{name:yc}).each(function(Ra){Ps.setData(Ra)})},onSubmit:pn}},Ha=function(Tt){var pn=Qr(Tt);pn.then(function(_n){var or=rr(Tt,_n);return Fa(_n,or,Tt)}).then(function(_n){Tt.windowManager.open(_n)})},Ya=function(Tt,pn){document.body.appendChild(Tt),Tt.dispatchEvent(pn),document.body.removeChild(Tt)},Lo=function(Tt){var pn=document.createElement("a");pn.target="_blank",pn.href=Tt,pn.rel="noreferrer noopener";var _n=document.createEvent("MouseEvents");_n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Ya(pn,_n)},ki=function(Tt,pn){return Tt.dom.getParent(pn,"a[href]")},Du=function(Tt){return ki(Tt,Tt.selection.getStart())},is=function(Tt){return Tt.altKey===!0&&Tt.shiftKey===!1&&Tt.ctrlKey===!1&&Tt.metaKey===!1},Qu=function(Tt,pn){if(pn){var _n=dr(pn);if(/^#/.test(_n)){var or=Tt.$(_n);or.length&&Tt.selection.scrollIntoView(or[0],!0)}else Lo(pn.href)}},Ai=function(Tt){return function(){Ha(Tt)}},dl=function(Tt){return function(){Qu(Tt,Du(Tt))}},Ls=function(Tt){Tt.on("click",function(pn){var _n=ki(Tt,pn.target);_n&&y.metaKeyPressed(pn)&&(pn.preventDefault(),Qu(Tt,_n))}),Tt.on("keydown",function(pn){var _n=Du(Tt);_n&&pn.keyCode===13&&is(pn)&&(pn.preventDefault(),Qu(Tt,_n))})},zu=function(Tt,pn){return Tt.on("NodeChange",pn),function(){return Tt.off("NodeChange",pn)}},Wi=function(Tt){return function(pn){var _n=function(){return pn.setActive(!Tt.mode.isReadOnly()&&Cn(Tt,Tt.selection.getNode())!==null)};return _n(),zu(Tt,_n)}},Rs=function(Tt){return function(pn){var _n=function(){return pn.setDisabled(Cn(Tt,Tt.selection.getNode())===null)};return _n(),zu(Tt,_n)}},xs=function(Tt){return function(pn){var _n=function(Mr){return zr(Mr)||Nr(Tt.selection.getRng())},or=Tt.dom.getParents(Tt.selection.getStart());return pn.setDisabled(!_n(or)),zu(Tt,function(Mr){return pn.setDisabled(!_n(Mr.parents))})}},Nu=function(Tt){Tt.addCommand("mceLink",function(){ur(Tt)?Tt.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):Ai(Tt)()})},Bs=function(Tt){Tt.addShortcut("Meta+K","",function(){Tt.execCommand("mceLink")})},Ju=function(Tt){Tt.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Ai(Tt),onSetup:Wi(Tt)}),Tt.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:dl(Tt),onSetup:Rs(Tt)}),Tt.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return oi(Tt)},onSetup:xs(Tt)})},us=function(Tt){Tt.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:dl(Tt),onSetup:Rs(Tt)}),Tt.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Ai(Tt)}),Tt.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return oi(Tt)},onSetup:xs(Tt)})},Ql=function(Tt){var pn="link unlink openlink",_n="link";Tt.ui.registry.addContextMenu("link",{update:function(or){return zr(Tt.dom.getParents(or,"a"))?pn:_n}})},vl=function(Tt){var pn=function(Mr){Mr.selection.collapse(!1)},_n=function(Mr){var Ea=Tt.selection.getNode();return Mr.setDisabled(!Cn(Tt,Ea)),x},or=function(Mr){var Ea=Cn(Tt),Ro=Ar(Tt);if(!Ea&&Ro){var Qo=cr(Tt.selection,Ea);return at.some(Qo.length>0?Qo:Mr)}else return at.none()};Tt.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Wi(Tt)},label:"Link",predicate:function(Mr){return!!Cn(Tt,Mr)&&Dt(Tt)},initValue:function(){var Mr=Cn(Tt);return Mr?dr(Mr):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(Mr){var Ea=Tt.selection.getNode();return Mr.setActive(!!Cn(Tt,Ea)),Wi(Tt)(Mr)},onAction:function(Mr){var Ea=Mr.getValue(),Ro=or(Ea),Qo={href:Ea,attach:x};pi(Tt,Qo,{href:Ea,text:Ro,title:at.none(),rel:at.none(),target:at.none(),class:at.none()}),pn(Tt),Mr.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:_n,onAction:function(Mr){oi(Tt),Mr.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:_n,onAction:function(Mr){dl(Tt)(),Mr.hide()}}]})};function Dl(){v.add("link",function(Tt){Ju(Tt),us(Tt),Ql(Tt),vl(Tt),Ls(Tt),Nu(Tt),Bs(Tt)})}Dl()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(Ze){var gt=typeof Ze;return Ze===null?"null":gt==="object"&&(Array.prototype.isPrototypeOf(Ze)||Ze.constructor&&Ze.constructor.name==="Array")?"array":gt==="object"&&(String.prototype.isPrototypeOf(Ze)||Ze.constructor&&Ze.constructor.name==="String")?"string":gt},C=function(Ze){return function(gt){return y(gt)===Ze}},A=function(Ze){return function(gt){return typeof gt===Ze}},We=C("string"),Ge=C("object"),Xe=C("array"),Ve=A("boolean"),P=A("function"),Te=A("number"),j=function(){},x=function(Ze){return function(){return Ze}},qe=function(Ze){return Ze},Be=function(Ze,gt){return Ze===gt},De=function(Ze){return function(gt){return!Ze(gt)}},He=x(!1),Ye=x(!0),st=function(){return rt},rt=function(){var Ze=function(Kt){return Kt()},gt=qe,kt={fold:function(Kt,An){return Kt()},isSome:He,isNone:Ye,getOr:gt,getOrThunk:Ze,getOrDie:function(Kt){throw new Error(Kt||"error: getOrDie called on none.")},getOrNull:x(null),getOrUndefined:x(void 0),or:gt,orThunk:Ze,map:st,each:j,bind:st,exists:He,forall:Ye,filter:function(){return st()},toArray:function(){return[]},toString:x("none()")};return kt}(),Ke=function(Ze){var gt=x(Ze),kt=function(){return An},Kt=function(nr){return nr(Ze)},An={fold:function(nr,Ma){return Ma(Ze)},isSome:Ye,isNone:He,getOr:gt,getOrThunk:gt,getOrDie:gt,getOrNull:gt,getOrUndefined:gt,or:kt,orThunk:kt,map:function(nr){return Ke(nr(Ze))},each:function(nr){nr(Ze)},bind:Kt,exists:Kt,forall:Kt,filter:function(nr){return nr(Ze)?An:rt},toArray:function(){return[Ze]},toString:function(){return"some("+Ze+")"}};return An},tt=function(Ze){return Ze==null?rt:Ke(Ze)},at={some:Ke,none:st,from:tt},et=Array.prototype.slice,Ot=Array.prototype.push,wt=function(Ze,gt){for(var kt=Ze.length,Kt=new Array(kt),An=0;An<kt;An++){var nr=Ze[An];Kt[An]=gt(nr,An)}return Kt},xt=function(Ze,gt){for(var kt=0,Kt=Ze.length;kt<Kt;kt++){var An=Ze[kt];gt(An,kt)}},it=function(Ze,gt){for(var kt=[],Kt=0,An=Ze.length;Kt<An;Kt++){var nr=Ze[Kt];gt(nr,Kt)&&kt.push(nr)}return kt},yt=function(Ze,gt){if(Ze.length===0)return[];for(var kt=gt(Ze[0]),Kt=[],An=[],nr=0,Ma=Ze.length;nr<Ma;nr++){var ao=Ze[nr],Po=gt(ao);Po!==kt&&(Kt.push(An),An=[]),kt=Po,An.push(ao)}return An.length!==0&&Kt.push(An),Kt},ut=function(Ze,gt,kt){return xt(Ze,function(Kt,An){kt=gt(kt,Kt,An)}),kt},Et=function(Ze,gt,kt){for(var Kt=0,An=Ze.length;Kt<An;Kt++){var nr=Ze[Kt];if(gt(nr,Kt))return at.some(nr);if(kt(nr,Kt))break}return at.none()},Ht=function(Ze,gt){return Et(Ze,gt,He)},an=function(Ze){for(var gt=[],kt=0,Kt=Ze.length;kt<Kt;++kt){if(!Xe(Ze[kt]))throw new Error("Arr.flatten item "+kt+" was not an array, input: "+Ze);Ot.apply(gt,Ze[kt])}return gt},Mt=function(Ze,gt){return an(wt(Ze,gt))},vn=function(Ze){var gt=et.call(Ze,0);return gt.reverse(),gt},Wn=function(Ze,gt){return gt>=0&&gt<Ze.length?at.some(Ze[gt]):at.none()},$e=function(Ze){return Wn(Ze,0)},Dt=function(Ze){return Wn(Ze,Ze.length-1)},vt=function(Ze,gt){for(var kt=0;kt<Ze.length;kt++){var Kt=gt(Ze[kt],kt);if(Kt.isSome())return Kt}return at.none()},nn=function(){return nn=Object.assign||function(gt){for(var kt,Kt=1,An=arguments.length;Kt<An;Kt++){kt=arguments[Kt];for(var nr in kt)Object.prototype.hasOwnProperty.call(kt,nr)&&(gt[nr]=kt[nr])}return gt},nn.apply(this,arguments)};function _t(Ze,gt,kt){if(kt||arguments.length===2)for(var Kt=0,An=gt.length,nr;Kt<An;Kt++)(nr||!(Kt in gt))&&(nr||(nr=Array.prototype.slice.call(gt,0,Kt)),nr[Kt]=gt[Kt]);return Ze.concat(nr||Array.prototype.slice.call(gt))}var Nt=function(Ze){var gt=!1,kt;return function(){for(var Kt=[],An=0;An<arguments.length;An++)Kt[An]=arguments[An];return gt||(gt=!0,kt=Ze.apply(null,Kt)),kt}},ln=function(Ze,gt,kt,Kt){var An=Ze.isiOS()&&/ipad/i.test(kt)===!0,nr=Ze.isiOS()&&!An,Ma=Ze.isiOS()||Ze.isAndroid(),ao=Ma||Kt("(pointer:coarse)"),Po=An||!nr&&Ma&&Kt("(min-device-width:768px)"),_o=nr||Ma&&!Po,_i=gt.isSafari()&&Ze.isiOS()&&/safari/i.test(kt)===!1,Ts=!_o&&!Po&&!_i;return{isiPad:x(An),isiPhone:x(nr),isTablet:x(Po),isPhone:x(_o),isTouch:x(ao),isAndroid:Ze.isAndroid,isiOS:Ze.isiOS,isWebView:x(_i),isDesktop:x(Ts)}},on=function(Ze,gt){for(var kt=0;kt<Ze.length;kt++){var Kt=Ze[kt];if(Kt.test(gt))return Kt}},dt=function(Ze,gt){var kt=on(Ze,gt);if(!kt)return{major:0,minor:0};var Kt=function(An){return Number(gt.replace(kt,"$"+An))};return en(Kt(1),Kt(2))},ur=function(Ze,gt){var kt=String(gt).toLowerCase();return Ze.length===0?dn():dt(Ze,kt)},dn=function(){return en(0,0)},en=function(Ze,gt){return{major:Ze,minor:gt}},Nn={nu:en,detect:ur,unknown:dn},fn=function(Ze,gt){return vt(gt.brands,function(kt){var Kt=kt.brand.toLowerCase();return Ht(Ze,function(An){var nr;return Kt===((nr=An.brand)===null||nr===void 0?void 0:nr.toLowerCase())}).map(function(An){return{current:An.name,version:Nn.nu(parseInt(kt.version,10),0)}})})},cn=function(Ze,gt){var kt=String(gt).toLowerCase();return Ht(Ze,function(Kt){return Kt.search(kt)})},hn=function(Ze,gt){return cn(Ze,gt).map(function(kt){var Kt=Nn.detect(kt.versionRegexes,gt);return{current:kt.name,version:Kt}})},er=function(Ze,gt){return cn(Ze,gt).map(function(kt){var Kt=Nn.detect(kt.versionRegexes,gt);return{current:kt.name,version:Kt}})},Fn=function(Ze,gt){return Ze.indexOf(gt)!==-1},Gn=function(Ze){return function(gt){return gt.replace(Ze,"")}},va=Gn(/^\s+|\s+$/g),tn=function(Ze){return Ze.length>0},Mn=function(Ze){return!tn(Ze)},Rr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Yr=function(Ze){return function(gt){return Fn(gt,Ze)}},oa=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(Ze){return Fn(Ze,"edge/")&&Fn(Ze,"chrome")&&Fn(Ze,"safari")&&Fn(Ze,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Rr],search:function(Ze){return Fn(Ze,"chrome")&&!Fn(Ze,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(Ze){return Fn(Ze,"msie")||Fn(Ze,"trident")}},{name:"Opera",versionRegexes:[Rr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Yr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Yr("firefox")},{name:"Safari",versionRegexes:[Rr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(Ze){return(Fn(Ze,"safari")||Fn(Ze,"mobile/"))&&Fn(Ze,"applewebkit")}}],pa=[{name:"Windows",search:Yr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(Ze){return Fn(Ze,"iphone")||Fn(Ze,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Yr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Yr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Yr("linux"),versionRegexes:[]},{name:"Solaris",search:Yr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Yr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Yr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ga={browsers:x(oa),oses:x(pa)},fo="Edge",oo="Chrome",fr="IE",sr="Opera",mr="Firefox",Tn="Safari",Rn=function(){return dr({current:void 0,version:Nn.unknown()})},dr=function(Ze){var gt=Ze.current,kt=Ze.version,Kt=function(An){return function(){return gt===An}};return{current:gt,version:kt,isEdge:Kt(fo),isChrome:Kt(oo),isIE:Kt(fr),isOpera:Kt(sr),isFirefox:Kt(mr),isSafari:Kt(Tn)}},Pr={unknown:Rn,nu:dr,edge:x(fo),chrome:x(oo),ie:x(fr),opera:x(sr),firefox:x(mr),safari:x(Tn)},br="Windows",Cn="iOS",cr="Android",zr="Linux",Nr="OSX",Ar="Solaris",sn="FreeBSD",Un="ChromeOS",jn=function(){return pr({current:void 0,version:Nn.unknown()})},pr=function(Ze){var gt=Ze.current,kt=Ze.version,Kt=function(An){return function(){return gt===An}};return{current:gt,version:kt,isWindows:Kt(br),isiOS:Kt(Cn),isAndroid:Kt(cr),isOSX:Kt(Nr),isLinux:Kt(zr),isSolaris:Kt(Ar),isFreeBSD:Kt(sn),isChromeOS:Kt(Un)}},aa={unknown:jn,nu:pr,windows:x(br),ios:x(Cn),android:x(cr),linux:x(zr),osx:x(Nr),solaris:x(Ar),freebsd:x(sn),chromeos:x(Un)},Ua=function(Ze,gt,kt){var Kt=Ga.browsers(),An=Ga.oses(),nr=gt.bind(function(Po){return fn(Kt,Po)}).orThunk(function(){return hn(Kt,Ze)}).fold(Pr.unknown,Pr.nu),Ma=er(An,Ze).fold(aa.unknown,aa.nu),ao=ln(Ma,nr,Ze,kt);return{browser:nr,os:Ma,deviceType:ao}},jo={detect:Ua},Xa=function(Ze){return window.matchMedia(Ze).matches},Ka=Nt(function(){return jo.detect(navigator.userAgent,at.from(navigator.userAgentData),Xa)}),Yo=function(){return Ka()},Io=function(Ze,gt,kt){return(Ze.compareDocumentPosition(gt)&kt)!==0},pi=function(Ze,gt){return Io(Ze,gt,Node.DOCUMENT_POSITION_CONTAINED_BY)},oi=1,Si=function(Ze,gt){var kt=gt||document,Kt=kt.createElement("div");if(Kt.innerHTML=Ze,!Kt.hasChildNodes()||Kt.childNodes.length>1)throw new Error("HTML must have a single root node");return Ei(Kt.childNodes[0])},Ii=function(Ze,gt){var kt=gt||document,Kt=kt.createElement(Ze);return Ei(Kt)},xi=function(Ze,gt){var kt=gt||document,Kt=kt.createTextNode(Ze);return Ei(Kt)},Ei=function(Ze){if(Ze==null)throw new Error("Node cannot be null or undefined");return{dom:Ze}},Fo=function(Ze,gt,kt){return at.from(Ze.dom.elementFromPoint(gt,kt)).map(Ei)},wo={fromHtml:Si,fromTag:Ii,fromText:xi,fromDom:Ei,fromPoint:Fo},ji=function(Ze,gt){var kt=Ze.dom;if(kt.nodeType!==oi)return!1;var Kt=kt;if(Kt.matches!==void 0)return Kt.matches(gt);if(Kt.msMatchesSelector!==void 0)return Kt.msMatchesSelector(gt);if(Kt.webkitMatchesSelector!==void 0)return Kt.webkitMatchesSelector(gt);if(Kt.mozMatchesSelector!==void 0)return Kt.mozMatchesSelector(gt);throw new Error("Browser lacks native selectors")},Ca=function(Ze,gt){return Ze.dom===gt.dom},Hu=function(Ze,gt){var kt=Ze.dom,Kt=gt.dom;return kt===Kt?!1:kt.contains(Kt)},Fi=function(Ze,gt){return pi(Ze.dom,gt.dom)},lu=function(Ze,gt){return Yo().browser.isIE()?Fi(Ze,gt):Hu(Ze,gt)},Xu=ji,nu=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),hu=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Yu=tinymce.util.Tools.resolve("tinymce.util.VK"),Ss=Object.keys,qt=function(Ze,gt){for(var kt=Ss(Ze),Kt=0,An=kt.length;Kt<An;Kt++){var nr=kt[Kt],Ma=Ze[nr];gt(Ma,nr)}},xn=function(Ze){return function(gt,kt){Ze[kt]=gt}},Gt=function(Ze,gt,kt,Kt){var An={};return qt(Ze,function(nr,Ma){(gt(nr,Ma)?kt:Kt)(nr,Ma)}),An},Pn=function(Ze,gt){var kt={};return Gt(Ze,gt,xn(kt),j),kt};typeof window!="undefined"||Function("return this;")();var Br=function(Ze){var gt=Ze.dom.nodeName;return gt.toLowerCase()},ta=function(Ze){return Ze.dom.nodeType},$t=function(Ze){return function(gt){return ta(gt)===Ze}},Zt=$t(oi),In=function(Ze){return function(gt){return Zt(gt)&&Br(gt)===Ze}},Qn=function(Ze,gt,kt){if(We(kt)||Ve(kt)||Te(kt))Ze.setAttribute(gt,kt+"");else throw new Error("Attribute value was not simple")},mt=function(Ze,gt){var kt=Ze.dom;qt(gt,function(Kt,An){Qn(kt,An,Kt)})},Rt=function(Ze){return ut(Ze.dom.attributes,function(gt,kt){return gt[kt.name]=kt.value,gt},{})},Jt=function(Ze){return at.from(Ze.dom.parentNode).map(wo.fromDom)},gn=function(Ze){return wt(Ze.dom.childNodes,wo.fromDom)},Dn=function(Ze,gt){var kt=Ze.dom.childNodes;return at.from(kt[gt]).map(wo.fromDom)},Bn=function(Ze){return Dn(Ze,0)},rr=function(Ze){return Dn(Ze,Ze.dom.childNodes.length-1)},Qr=function(Ze,gt){var kt=Jt(Ze);kt.each(function(Kt){Kt.dom.insertBefore(gt.dom,Ze.dom)})},La=function(Ze,gt){Ze.dom.appendChild(gt.dom)},Fa=function(Ze,gt){xt(gt,function(kt){Qr(Ze,kt)})},Ha=function(Ze,gt){xt(gt,function(kt){La(Ze,kt)})},Ya=function(Ze){var gt=Ze.dom;gt.parentNode!==null&&gt.parentNode.removeChild(gt)},Lo=function(Ze,gt){return wo.fromDom(Ze.dom.cloneNode(gt))},ki=function(Ze){return Lo(Ze,!0)},Du=function(Ze,gt){var kt=wo.fromTag(gt),Kt=Rt(Ze);return mt(kt,Kt),kt},is=function(Ze,gt){var kt=Du(Ze,gt);Qr(Ze,kt);var Kt=gn(Ze);return Ha(kt,Kt),Ya(Ze),kt},Qu=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ai=tinymce.util.Tools.resolve("tinymce.util.Tools"),dl=function(Ze){return function(gt){return gt&&gt.nodeName.toLowerCase()===Ze}},Ls=function(Ze){return function(gt){return gt&&Ze.test(gt.nodeName)}},zu=function(Ze){return Ze&&Ze.nodeType===3},Wi=Ls(/^(OL|UL|DL)$/),Rs=Ls(/^(OL|UL)$/),xs=dl("ol"),Nu=Ls(/^(LI|DT|DD)$/),Bs=Ls(/^(DT|DD)$/),Ju=Ls(/^(TH|TD)$/),us=dl("br"),Ql=function(Ze){return Ze.parentNode.firstChild===Ze},vl=function(Ze,gt){return gt&&!!Ze.schema.getTextBlockElements()[gt.nodeName]},Dl=function(Ze,gt){return Ze&&Ze.nodeName in gt},Tt=function(Ze,gt){return us(gt)?Ze.isBlock(gt.nextSibling)&&!us(gt.previousSibling):!1},pn=function(Ze,gt,kt){var Kt=Ze.isEmpty(gt);return kt&&Ze.select("span[data-mce-type=bookmark]",gt).length>0?!1:Kt},_n=function(Ze,gt){return Ze.isChildOf(gt,Ze.getRoot())},or=function(Ze){return Ze.getParam("lists_indent_on_tab",!0)},Mr=function(Ze){var gt=Ze.getParam("forced_root_block","p");return gt===!1?"":gt===!0?"p":gt},Ea=function(Ze){return Ze.getParam("forced_root_block_attrs",{})},Ro=function(Ze,gt){var kt=Ze.dom,Kt=Ze.schema.getBlockElements(),An=kt.createFragment(),nr=Mr(Ze),Ma,ao,Po;if(nr&&(ao=kt.create(nr),ao.tagName===nr.toUpperCase()&&kt.setAttribs(ao,Ea(Ze)),Dl(gt.firstChild,Kt)||An.appendChild(ao)),gt)for(;Ma=gt.firstChild;){var _o=Ma.nodeName;!Po&&(_o!=="SPAN"||Ma.getAttribute("data-mce-type")!=="bookmark")&&(Po=!0),Dl(Ma,Kt)?(An.appendChild(Ma),ao=null):nr?(ao||(ao=kt.create(nr),An.appendChild(ao)),ao.appendChild(Ma)):An.appendChild(Ma)}return nr?Po||ao.appendChild(kt.create("br",{"data-mce-bogus":"1"})):An.appendChild(kt.create("br")),An},Qo=Qu.DOM,so=function(Ze,gt,kt){var Kt=function(_o){Ai.each(An,function(_i){_o.parentNode.insertBefore(_i,kt.parentNode)}),Qo.remove(_o)},An=Qo.select('span[data-mce-type="bookmark"]',gt),nr=Ro(Ze,kt),Ma=Qo.createRng();Ma.setStartAfter(kt),Ma.setEndAfter(gt);for(var ao=Ma.extractContents(),Po=ao.firstChild;Po;Po=Po.firstChild)if(Po.nodeName==="LI"&&Ze.dom.isEmpty(Po)){Qo.remove(Po);break}Ze.dom.isEmpty(ao)||Qo.insertAfter(ao,gt),Qo.insertAfter(nr,gt),pn(Ze.dom,kt.parentNode)&&Kt(kt.parentNode),Qo.remove(kt),pn(Ze.dom,gt)&&Qo.remove(gt)},ri=In("dd"),ci=In("dt"),Ps=function(Ze,gt){ri(gt)?is(gt,"dt"):ci(gt)&&Jt(gt).each(function(kt){return so(Ze,kt.dom,gt.dom)})},bc=function(Ze){ci(Ze)&&is(Ze,"dd")},yc=function(Ze,gt,kt){gt==="Indent"?xt(kt,bc):xt(kt,function(Kt){return Ps(Ze,Kt)})},Ra=function(Ze,gt){if(zu(Ze))return{container:Ze,offset:gt};var kt=nu.getNode(Ze,gt);return zu(kt)?{container:kt,offset:gt>=Ze.childNodes.length?kt.data.length:0}:kt.previousSibling&&zu(kt.previousSibling)?{container:kt.previousSibling,offset:kt.previousSibling.data.length}:kt.nextSibling&&zu(kt.nextSibling)?{container:kt.nextSibling,offset:0}:{container:Ze,offset:gt}},Zs=function(Ze){var gt=Ze.cloneRange(),kt=Ra(Ze.startContainer,Ze.startOffset);gt.setStart(kt.container,kt.offset);var Kt=Ra(Ze.endContainer,Ze.endOffset);return gt.setEnd(Kt.container,Kt.offset),gt},zc=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Es=function(Ze,gt){var kt=gt||Ze.selection.getStart(!0);return Ze.dom.getParent(kt,"OL,UL,DL",ss(Ze,kt))},$c=function(Ze,gt){return Ze&&gt.length===1&&gt[0]===Ze},td=function(Ze){return it(Ze.querySelectorAll("ol,ul,dl"),Wi)},Mf=function(Ze){var gt=Es(Ze),kt=Ze.selection.getSelectedBlocks();return $c(gt,kt)?td(gt):it(kt,function(Kt){return Wi(Kt)&&gt!==Kt})},bi=function(Ze,gt){var kt=Ai.map(gt,function(Kt){var An=Ze.dom.getParent(Kt,"li,dd,dt",ss(Ze,Kt));return An||Kt});return zc.unique(kt)},Jl=function(Ze){var gt=Ze.selection.getSelectedBlocks();return it(bi(Ze,gt),Nu)},nd=function(Ze){return it(Jl(Ze),Bs)},ss=function(Ze,gt){var kt=Ze.dom.getParents(gt,"TD,TH");return kt.length>0?kt[0]:Ze.getBody()},$u=function(Ze,gt){var kt=Ze.dom.getParents(gt,"ol,ul",ss(Ze,gt));return Dt(kt)},wc=function(Ze){var gt=$u(Ze,Ze.selection.getStart()),kt=it(Ze.selection.getSelectedBlocks(),Rs);return gt.toArray().concat(kt)},Zn=function(Ze){var gt=wc(Ze);return Zl(Ze,gt)},Zl=function(Ze,gt){var kt=wt(gt,function(Kt){return $u(Ze,Kt).getOr(Kt)});return zc.unique(kt)},ru=function(Ze,gt,kt){return kt===void 0&&(kt=Be),Ze.exists(function(Kt){return kt(Kt,gt)})},Vc=function(Ze,gt,kt){return Ze.isSome()&&gt.isSome()?at.some(kt(Ze.getOrDie(),gt.getOrDie())):at.none()},ml=function(Ze,gt){var kt=gt||document,Kt=kt.createDocumentFragment();return xt(Ze,function(An){Kt.appendChild(An.dom)}),wo.fromDom(Kt)},ec=function(Ze,gt,kt){return Ze.fire("ListMutation",{action:gt,element:kt})},lt=function(Ze){return Ze.style!==void 0&&P(Ze.style.getPropertyValue)},Je=function(Ze,gt,kt){if(!We(kt))throw new Error("CSS value must be a string: "+kt);lt(Ze)&&Ze.style.setProperty(gt,kt)},ht=function(Ze,gt,kt){var Kt=Ze.dom;Je(Kt,gt,kt)},Lt=function(Ze,gt){La(Ze.item,gt.list)},un=function(Ze){for(var gt=1;gt<Ze.length;gt++)Lt(Ze[gt-1],Ze[gt])},Hn=function(Ze,gt){Vc(Dt(Ze),$e(gt),Lt)},Er=function(Ze,gt){var kt={list:wo.fromTag(gt,Ze),item:wo.fromTag("li",Ze)};return La(kt.list,kt.item),kt},Aa=function(Ze,gt,kt){for(var Kt=[],An=0;An<kt;An++)Kt.push(Er(Ze,gt.listType));return Kt},ja=function(Ze,gt){for(var kt=0;kt<Ze.length-1;kt++)ht(Ze[kt].item,"list-style-type","none");Dt(Ze).each(function(Kt){mt(Kt.list,gt.listAttributes),mt(Kt.item,gt.itemAttributes),Ha(Kt.item,gt.content)})},Kr=function(Ze,gt){Br(Ze.list)!==gt.listType&&(Ze.list=is(Ze.list,gt.listType)),mt(Ze.list,gt.listAttributes)},Sa=function(Ze,gt,kt){var Kt=wo.fromTag("li",Ze);return mt(Kt,gt),Ha(Kt,kt),Kt},ro=function(Ze,gt){La(Ze.list,gt),Ze.item=gt},Co=function(Ze,gt,kt){var Kt=gt.slice(0,kt.depth);return Dt(Kt).each(function(An){var nr=Sa(Ze,kt.itemAttributes,kt.content);ro(An,nr),Kr(An,kt)}),Kt},Wa=function(Ze,gt,kt){var Kt=Aa(Ze,kt,kt.depth-gt.length);return un(Kt),ja(Kt,kt),Hn(gt,Kt),gt.concat(Kt)},fi=function(Ze,gt){var kt=ut(gt,function(Kt,An){return An.depth>Kt.length?Wa(Ze,Kt,An):Co(Ze,Kt,An)},[]);return $e(kt).map(function(Kt){return Kt.list})},Ja=function(Ze){return Xu(Ze,"OL,UL")},ei=function(Ze){return Bn(Ze).exists(Ja)},Jo=function(Ze){return rr(Ze).exists(Ja)},Vu=function(Ze){return Ze.depth>0},ho=function(Ze){return Ze.isSelected},Ed=function(Ze){var gt=gn(Ze),kt=Jo(Ze)?gt.slice(0,-1):gt;return wt(kt,ki)},Ti=function(Ze,gt,kt){return Jt(Ze).filter(Zt).map(function(Kt){return{depth:gt,dirty:!1,isSelected:kt,content:Ed(Ze),itemAttributes:Rt(Ze),listAttributes:Rt(Kt),listType:Br(Kt)}})},qi=function(Ze,gt){switch(Ze){case"Indent":gt.depth++;break;case"Outdent":gt.depth--;break;case"Flatten":gt.depth=0}gt.dirty=!0},Mm=function(Ze,gt){Ze.listType=gt.listType,Ze.listAttributes=nn({},gt.listAttributes)},gu=function(Ze){Ze.listAttributes=Pn(Ze.listAttributes,function(gt,kt){return kt!=="start"})},Av=function(Ze,gt){var kt=Ze[gt].depth,Kt=function(nr){return nr.depth===kt&&!nr.dirty},An=function(nr){return nr.depth<kt};return Et(vn(Ze.slice(0,gt)),Kt,An).orThunk(function(){return Et(Ze.slice(gt+1),Kt,An)})},kd=function(Ze){return xt(Ze,function(gt,kt){Av(Ze,kt).fold(function(){gt.dirty&&gu(gt)},function(Kt){return Mm(gt,Kt)})}),Ze},Qa=function(Ze){var gt=Ze,kt=function(){return gt},Kt=function(An){gt=An};return{get:kt,set:Kt}},tc=function(Ze,gt,kt,Kt){return Bn(Kt).filter(Ja).fold(function(){gt.each(function(Ma){Ca(Ma.start,Kt)&&kt.set(!0)});var An=Ti(Kt,Ze,kt.get());gt.each(function(Ma){Ca(Ma.end,Kt)&&kt.set(!1)});var nr=rr(Kt).filter(Ja).map(function(Ma){return Cc(Ze,gt,kt,Ma)}).getOr([]);return An.toArray().concat(nr)},function(An){return Cc(Ze,gt,kt,An)})},Cc=function(Ze,gt,kt,Kt){return Mt(gn(Kt),function(An){var nr=Ja(An)?Cc:tc,Ma=Ze+1;return nr(Ma,gt,kt,An)})},Hi=function(Ze,gt){var kt=Qa(!1),Kt=0;return wt(Ze,function(An){return{sourceList:An,entries:Cc(Kt,gt,kt,An)}})},Dm=function(Ze,gt){var kt=kd(gt);return wt(kt,function(Kt){var An=ml(Kt.content);return wo.fromDom(Ro(Ze,An.dom))})},bu=function(Ze,gt){var kt=kd(gt);return fi(Ze.contentDocument,kt).toArray()},Uc=function(Ze,gt){return Mt(yt(gt,Vu),function(kt){var Kt=$e(kt).exists(Vu);return Kt?bu(Ze,kt):Dm(Ze,kt)})},p=function(Ze,gt){xt(it(Ze,ho),function(kt){return qi(gt,kt)})},g=function(Ze){var gt=wt(Jl(Ze),wo.fromDom);return Vc(Ht(gt,De(ei)),Ht(vn(gt),De(ei)),function(kt,Kt){return{start:kt,end:Kt}})},w=function(Ze,gt,kt){var Kt=Hi(gt,g(Ze));xt(Kt,function(An){p(An.entries,kt);var nr=Uc(Ze,An.entries);xt(nr,function(Ma){ec(Ze,kt==="Indent"?"IndentList":"OutdentList",Ma.dom)}),Fa(An.sourceList,nr),Ya(An.sourceList)})},I=function(Ze,gt){var kt=wt(Zn(Ze),wo.fromDom),Kt=wt(nd(Ze),wo.fromDom),An=!1;if(kt.length||Kt.length){var nr=Ze.selection.getBookmark();w(Ze,kt,gt),yc(Ze,gt,Kt),Ze.selection.moveToBookmark(nr),Ze.selection.setRng(Zs(Ze.selection.getRng())),Ze.nodeChanged(),An=!0}return An},k=function(Ze){return I(Ze,"Indent")},Ue=function(Ze){return I(Ze,"Outdent")},ft=function(Ze){return I(Ze,"Flatten")},Bt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Xt=Qu.DOM,Ut=function(Ze){var gt={},kt=function(Kt){var An=Ze[Kt?"startContainer":"endContainer"],nr=Ze[Kt?"startOffset":"endOffset"];if(An.nodeType===1){var Ma=Xt.create("span",{"data-mce-type":"bookmark"});An.hasChildNodes()?(nr=Math.min(nr,An.childNodes.length-1),Kt?An.insertBefore(Ma,An.childNodes[nr]):Xt.insertAfter(Ma,An.childNodes[nr])):An.appendChild(Ma),An=Ma,nr=0}gt[Kt?"startContainer":"endContainer"]=An,gt[Kt?"startOffset":"endOffset"]=nr};return kt(!0),Ze.collapsed||kt(),gt},Wt=function(Ze){var gt=function(Kt){var An,nr=function(Po){for(var _o=Po.parentNode.firstChild,_i=0;_o;){if(_o===Po)return _i;(_o.nodeType!==1||_o.getAttribute("data-mce-type")!=="bookmark")&&_i++,_o=_o.nextSibling}return-1},Ma=An=Ze[Kt?"startContainer":"endContainer"],ao=Ze[Kt?"startOffset":"endOffset"];Ma&&(Ma.nodeType===1&&(ao=nr(Ma),Ma=Ma.parentNode,Xt.remove(An),!Ma.hasChildNodes()&&Xt.isBlock(Ma)&&Ma.appendChild(Xt.create("br"))),Ze[Kt?"startContainer":"endContainer"]=Ma,Ze[Kt?"startOffset":"endOffset"]=ao)};gt(!0),gt();var kt=Xt.createRng();return kt.setStart(Ze.startContainer,Ze.startOffset),Ze.endContainer&&kt.setEnd(Ze.endContainer,Ze.endOffset),Zs(kt)},tr=function(Ze){switch(Ze){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Vr=function(Ze){return/\btox\-/.test(Ze.className)},ba=function(Ze,gt,kt){var Kt=function(nr){var Ma=Et(nr.parents,Wi,Ju).filter(function(ao){return ao.nodeName===gt&&!Vr(ao)}).isSome();kt(Ma)},An=Ze.dom.getParents(Ze.selection.getNode());return Kt({parents:An}),Ze.on("NodeChange",Kt),function(){return Ze.off("NodeChange",Kt)}},Vn=function(Ze,gt,kt){var Kt=kt["list-style-type"]?kt["list-style-type"]:null;Ze.setStyle(gt,"list-style-type",Kt)},ha=function(Ze,gt){Ai.each(gt,function(kt,Kt){Ze.setAttribute(Kt,kt)})},na=function(Ze,gt,kt){ha(gt,kt["list-attributes"]),Ai.each(Ze.select("li",gt),function(Kt){ha(Kt,kt["list-item-attributes"])})},Gr=function(Ze,gt,kt){Vn(Ze,gt,kt),na(Ze,gt,kt)},sa=function(Ze,gt,kt){Ai.each(kt,function(Kt){var An;return Ze.setStyle(gt,(An={},An[Kt]="",An))})},la=function(Ze,gt,kt,Kt){var An=gt[kt?"startContainer":"endContainer"],nr=gt[kt?"startOffset":"endOffset"];for(An.nodeType===1&&(An=An.childNodes[Math.min(nr,An.childNodes.length-1)]||An),!kt&&us(An.nextSibling)&&(An=An.nextSibling);An.parentNode!==Kt;){if(vl(Ze,An)||/^(TD|TH)$/.test(An.parentNode.nodeName))return An;An=An.parentNode}return An},$r=function(Ze,gt,kt){for(var Kt=[],An=Ze.dom,nr=la(Ze,gt,!0,kt),Ma=la(Ze,gt,!1,kt),ao,Po=[],_o=nr;_o&&(Po.push(_o),_o!==Ma);_o=_o.nextSibling);return Ai.each(Po,function(_i){if(vl(Ze,_i)){Kt.push(_i),ao=null;return}if(An.isBlock(_i)||us(_i)){us(_i)&&An.remove(_i),ao=null;return}var Ts=_i.nextSibling;if(Bt.isBookmarkNode(_i)&&(Wi(Ts)||vl(Ze,Ts)||!Ts&&_i.parentNode===kt)){ao=null;return}ao||(ao=An.create("p"),_i.parentNode.insertBefore(ao,_i),Kt.push(ao)),ao.appendChild(_i)}),Kt},xa=function(Ze,gt,kt){var Kt=Ze.getStyle(gt,"list-style-type"),An=kt?kt["list-style-type"]:"";return An=An===null?"":An,Kt===An},vo=function(Ze,gt,kt){var Kt=Ze.selection.getRng(),An="LI",nr=ss(Ze,Ze.selection.getStart(!0)),Ma=Ze.dom;if(Ma.getContentEditable(Ze.selection.getNode())!=="false"){gt=gt.toUpperCase(),gt==="DL"&&(An="DT");var ao=Ut(Kt),Po=$r(Ze,Kt,nr);Ai.each(Po,function(_o){var _i,Ts=_o.previousSibling,ob=_o.parentNode;Nu(ob)||(Ts&&Wi(Ts)&&Ts.nodeName===gt&&xa(Ma,Ts,kt)?(_i=Ts,_o=Ma.rename(_o,An),Ts.appendChild(_o)):(_i=Ma.create(gt),_o.parentNode.insertBefore(_i,_o),_i.appendChild(_o),_o=Ma.rename(_o,An)),sa(Ma,_o,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Gr(Ma,_i,kt),To(Ze.dom,_i))}),Ze.selection.setRng(Wt(ao))}},io=function(Ze,gt){return Ze&&gt&&Wi(Ze)&&Ze.nodeName===gt.nodeName},lo=function(Ze,gt,kt){var Kt=Ze.getStyle(gt,"list-style-type",!0),An=Ze.getStyle(kt,"list-style-type",!0);return Kt===An},co=function(Ze,gt){return Ze.className===gt.className},ca=function(Ze,gt,kt){return io(gt,kt)&&lo(Ze,gt,kt)&&co(gt,kt)},To=function(Ze,gt){var kt,Kt;if(kt=gt.nextSibling,ca(Ze,gt,kt)){for(;Kt=kt.firstChild;)gt.appendChild(Kt);Ze.remove(kt)}if(kt=gt.previousSibling,ca(Ze,gt,kt)){for(;Kt=kt.lastChild;)gt.insertBefore(Kt,gt.firstChild);Ze.remove(kt)}},di=function(Ze,gt,kt,Kt){if(gt.nodeName!==kt){var An=Ze.dom.rename(gt,kt);Gr(Ze.dom,An,Kt),ec(Ze,tr(kt),An)}else Gr(Ze.dom,gt,Kt),ec(Ze,tr(kt),gt)},Wo=function(Ze,gt,kt,Kt,An){var nr=Wi(gt);if(nr&&gt.nodeName===Kt&&!ls(An))ft(Ze);else{vo(Ze,Kt,An);var Ma=Ut(Ze.selection.getRng()),ao=nr?_t([gt],kt,!0):kt;Ai.each(ao,function(Po){di(Ze,Po,Kt,An)}),Ze.selection.setRng(Wt(Ma))}},ls=function(Ze){return"list-style-type"in Ze},ks=function(Ze,gt,kt,Kt){if(gt!==Ze.getBody())if(gt)if(gt.nodeName===kt&&!ls(Kt)&&!Vr(gt))ft(Ze);else{var An=Ut(Ze.selection.getRng());Gr(Ze.dom,gt,Kt);var nr=Ze.dom.rename(gt,kt);To(Ze.dom,nr),Ze.selection.setRng(Wt(An)),vo(Ze,kt,Kt),ec(Ze,tr(kt),nr)}else vo(Ze,kt,Kt),ec(Ze,tr(kt),gt)},yu=function(Ze,gt,kt){var Kt=Es(Ze),An=Mf(Ze),nr=Ge(kt)?kt:{};An.length>0?Wo(Ze,Kt,An,gt,nr):ks(Ze,Kt,gt,nr)},Ki=Qu.DOM,Uu=function(Ze,gt){var kt=gt.parentNode;if(kt.nodeName==="LI"&&kt.firstChild===gt){var Kt=kt.previousSibling;Kt&&Kt.nodeName==="LI"?(Kt.appendChild(gt),pn(Ze,kt)&&Ki.remove(kt)):Ki.setStyle(kt,"listStyleType","none")}if(Wi(kt)){var Kt=kt.previousSibling;Kt&&Kt.nodeName==="LI"&&Kt.appendChild(gt)}},Df=function(Ze,gt){var kt=Ai.grep(Ze.select("ol,ul",gt));Ai.each(kt,function(Kt){Uu(Ze,Kt)})},Ji=function(Ze,gt,kt,Kt){var An=gt.startContainer,nr=gt.startOffset;if(zu(An)&&(kt?nr<An.data.length:nr>0))return An;var Ma=Ze.schema.getNonEmptyElements();An.nodeType===1&&(An=nu.getNode(An,nr));var ao=new hu(An,Kt);for(kt&&Tt(Ze.dom,An)&&ao.next();An=ao[kt?"next":"prev2"]();)if(An.nodeName==="LI"&&!An.hasChildNodes()||Ma[An.nodeName]||zu(An)&&An.data.length>0)return An},Sc=function(Ze,gt){var kt=gt.childNodes;return kt.length===1&&!Wi(kt[0])&&Ze.isBlock(kt[0])},el=function(Ze,gt){Sc(Ze,gt)&&Ze.remove(gt.firstChild,!0)},Nl=function(Ze,gt,kt){var Kt,An=Sc(Ze,kt)?kt.firstChild:kt;if(el(Ze,gt),!pn(Ze,gt,!0))for(;Kt=gt.firstChild;)An.appendChild(Kt)},Ll=function(Ze,gt,kt){var Kt,An=gt.parentNode;if(!(!_n(Ze,gt)||!_n(Ze,kt))){Wi(kt.lastChild)&&(Kt=kt.lastChild),An===kt.lastChild&&us(An.previousSibling)&&Ze.remove(An.previousSibling);var nr=kt.lastChild;nr&&us(nr)&&gt.hasChildNodes()&&Ze.remove(nr),pn(Ze,kt,!0)&&Ze.$(kt).empty(),Nl(Ze,gt,kt),Kt&&kt.appendChild(Kt);var Ma=lu(wo.fromDom(kt),wo.fromDom(gt)),ao=Ma?Ze.getParents(gt,Wi,kt):[];Ze.remove(gt),xt(ao,function(Po){pn(Ze,Po)&&Po!==Ze.getRoot()&&Ze.remove(Po)})}},jc=function(Ze,gt,kt){Ze.dom.$(kt).empty(),Ll(Ze.dom,gt,kt),Ze.selection.setCursorLocation(kt,0)},Ta=function(Ze,gt,kt,Kt){var An=Ze.dom;if(An.isEmpty(Kt))jc(Ze,kt,Kt);else{var nr=Ut(gt);Ll(An,kt,Kt),Ze.selection.setRng(Wt(nr))}},ma=function(Ze,gt,kt,Kt){var An=Ut(gt);Ll(Ze.dom,kt,Kt);var nr=Wt(An);Ze.selection.setRng(nr)},Lu=function(Ze,gt){var kt=Ze.dom,Kt=Ze.selection,An=Kt.getStart(),nr=ss(Ze,An),Ma=kt.getParent(Kt.getStart(),"LI",nr);if(Ma){var ao=Ma.parentNode;if(ao===Ze.getBody()&&pn(kt,ao))return!0;var Po=Zs(Kt.getRng()),_o=kt.getParent(Ji(Ze,Po,gt,nr),"LI",nr);if(_o&&_o!==Ma)return Ze.undoManager.transact(function(){gt?Ta(Ze,Po,_o,Ma):Ql(Ma)?Ue(Ze):ma(Ze,Po,Ma,_o)}),!0;if(!_o&&!gt&&Po.startOffset===0&&Po.endOffset===0)return Ze.undoManager.transact(function(){ft(Ze)}),!0}return!1},tl=function(Ze,gt,kt){var Kt=Ze.getParent(gt.parentNode,Ze.isBlock,kt);Ze.remove(gt),Kt&&Ze.isEmpty(Kt)&&Ze.remove(Kt)},rd=function(Ze,gt){var kt=Ze.dom,Kt=Ze.selection.getStart(),An=ss(Ze,Kt),nr=kt.getParent(Kt,kt.isBlock,An);if(nr&&kt.isEmpty(nr)){var Ma=Zs(Ze.selection.getRng()),ao=kt.getParent(Ji(Ze,Ma,gt,An),"LI",An);if(ao)return Ze.undoManager.transact(function(){tl(kt,nr,An),To(kt,ao.parentNode),Ze.selection.select(ao,!0),Ze.selection.collapse(gt)}),!0}return!1},Nf=function(Ze,gt){return Lu(Ze,gt)||rd(Ze,gt)},xc=function(Ze){var gt=Ze.selection.getStart(),kt=ss(Ze,gt),Kt=Ze.dom.getParent(gt,"LI,DT,DD",kt);return Kt||Jl(Ze).length>0?(Ze.undoManager.transact(function(){Ze.execCommand("Delete"),Df(Ze.dom,Ze.getBody())}),!0):!1},Zi=function(Ze,gt){return Ze.selection.isCollapsed()?Nf(Ze,gt):xc(Ze)},au=function(Ze){Ze.on("keydown",function(gt){gt.keyCode===Yu.BACKSPACE?Zi(Ze,!1)&&gt.preventDefault():gt.keyCode===Yu.DELETE&&Zi(Ze,!0)&&gt.preventDefault()})},Rl=function(Ze){return{backspaceDelete:function(gt){Zi(Ze,gt)}}},ju=function(Ze,gt){var kt=Es(Ze);Ze.undoManager.transact(function(){Ge(gt.styles)&&Ze.dom.setStyles(kt,gt.styles),Ge(gt.attrs)&&qt(gt.attrs,function(Kt,An){return Ze.dom.setAttrib(kt,An,Kt)})})},ia=function(Ze){var gt=vn(va(Ze).split("")),kt=wt(gt,function(Kt,An){var nr=Kt.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,An)*nr});return ut(kt,function(Kt,An){return Kt+An},0)},ad=function(Ze){if(Ze--,Ze<0)return"";var gt=Ze%26,kt=Math.floor(Ze/26),Kt=ad(kt),An=String.fromCharCode("A".charCodeAt(0)+gt);return Kt+An},bh=function(Ze){return/^[A-Z]+$/.test(Ze)},So=function(Ze){return/^[a-z]+$/.test(Ze)},ui=function(Ze){return/^[0-9]+$/.test(Ze)},yh=function(Ze){return ui(Ze)?2:bh(Ze)?0:So(Ze)?1:Mn(Ze)?3:4},Ec=function(Ze){switch(yh(Ze)){case 2:return at.some({listStyleType:at.none(),start:Ze});case 0:return at.some({listStyleType:at.some("upper-alpha"),start:ia(Ze).toString()});case 1:return at.some({listStyleType:at.some("lower-alpha"),start:ia(Ze).toString()});case 3:return at.some({listStyleType:at.none(),start:""});case 4:return at.none()}},Mi=function(Ze){var gt=parseInt(Ze.start,10);return ru(Ze.listStyleType,"upper-alpha")?ad(gt):ru(Ze.listStyleType,"lower-alpha")?ad(gt).toLowerCase():Ze.start},Nm=function(Ze){var gt=Es(Ze);xs(gt)&&Ze.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Mi({start:Ze.dom.getAttrib(gt,"start","1"),listStyleType:at.some(Ze.dom.getStyle(gt,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(kt){var Kt=kt.getData();Ec(Kt.start).each(function(An){Ze.execCommand("mceListUpdate",!1,{attrs:{start:An.start==="1"?"":An.start},styles:{"list-style-type":An.listStyleType.getOr("")}})}),kt.close()}})},nl=function(Ze,gt){return function(){var kt=Es(Ze);return kt&&kt.nodeName===gt}},Tv=function(Ze){Ze.addCommand("mceListProps",function(){Nm(Ze)})},ab=function(Ze){Ze.on("BeforeExecCommand",function(gt){var kt=gt.command.toLowerCase();kt==="indent"?k(Ze):kt==="outdent"&&Ue(Ze)}),Ze.addCommand("InsertUnorderedList",function(gt,kt){yu(Ze,"UL",kt)}),Ze.addCommand("InsertOrderedList",function(gt,kt){yu(Ze,"OL",kt)}),Ze.addCommand("InsertDefinitionList",function(gt,kt){yu(Ze,"DL",kt)}),Ze.addCommand("RemoveList",function(){ft(Ze)}),Tv(Ze),Ze.addCommand("mceListUpdate",function(gt,kt){Ge(kt)&&ju(Ze,kt)}),Ze.addQueryStateHandler("InsertUnorderedList",nl(Ze,"UL")),Ze.addQueryStateHandler("InsertOrderedList",nl(Ze,"OL")),Ze.addQueryStateHandler("InsertDefinitionList",nl(Ze,"DL"))},As=function(Ze){Ze.on("keydown",function(gt){gt.keyCode!==Yu.TAB||Yu.metaKeyPressed(gt)||Ze.undoManager.transact(function(){(gt.shiftKey?Ue(Ze):k(Ze))&&gt.preventDefault()})})},Ny=function(Ze){or(Ze)&&As(Ze),au(Ze)},Ly=function(Ze){var gt=function(kt){return function(){return Ze.execCommand(kt)}};Ze.hasPlugin("advlist")||(Ze.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:gt("InsertOrderedList"),onSetup:function(kt){return ba(Ze,"OL",kt.setActive)}}),Ze.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:gt("InsertUnorderedList"),onSetup:function(kt){return ba(Ze,"UL",kt.setActive)}}))},Li=function(Ze){var gt={text:"List properties...",icon:"ordered-list",onAction:function(){return Ze.execCommand("mceListProps")},onSetup:function(kt){return ba(Ze,"OL",function(Kt){return kt.setDisabled(!Kt)})}};Ze.ui.registry.addMenuItem("listprops",gt),Ze.ui.registry.addContextMenu("lists",{update:function(kt){var Kt=Es(Ze,kt);return xs(Kt)?["listprops"]:[]}})};function wh(){v.add("lists",function(Ze){return Ze.hasPlugin("rtc",!0)===!1?(Ny(Ze),ab(Ze)):Tv(Ze),Ly(Ze),Li(Ze),Rl(Ze)})}wh()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(){return y=Object.assign||function(xn){for(var Gt,Pn=1,Br=arguments.length;Pn<Br;Pn++){Gt=arguments[Pn];for(var ta in Gt)Object.prototype.hasOwnProperty.call(Gt,ta)&&(xn[ta]=Gt[ta])}return xn},y.apply(this,arguments)},C=function(qt){var xn=typeof qt;return qt===null?"null":xn==="object"&&(Array.prototype.isPrototypeOf(qt)||qt.constructor&&qt.constructor.name==="Array")?"array":xn==="object"&&(String.prototype.isPrototypeOf(qt)||qt.constructor&&qt.constructor.name==="String")?"string":xn},A=function(qt){return function(xn){return C(xn)===qt}},We=A("string"),Ge=A("object"),Xe=A("array"),Ve=function(qt){return qt==null},P=function(qt){return!Ve(qt)},Te=function(){},j=function(qt){return function(){return qt}},x=function(qt){return qt},qe=j(!1),Be=j(!0),De=function(){return He},He=function(){var qt=function(Pn){return Pn()},xn=x,Gt={fold:function(Pn,Br){return Pn()},isSome:qe,isNone:Be,getOr:xn,getOrThunk:qt,getOrDie:function(Pn){throw new Error(Pn||"error: getOrDie called on none.")},getOrNull:j(null),getOrUndefined:j(void 0),or:xn,orThunk:qt,map:De,each:Te,bind:De,exists:qe,forall:Be,filter:function(){return De()},toArray:function(){return[]},toString:j("none()")};return Gt}(),Ye=function(qt){var xn=j(qt),Gt=function(){return Br},Pn=function(ta){return ta(qt)},Br={fold:function(ta,$t){return $t(qt)},isSome:Be,isNone:qe,getOr:xn,getOrThunk:xn,getOrDie:xn,getOrNull:xn,getOrUndefined:xn,or:Gt,orThunk:Gt,map:function(ta){return Ye(ta(qt))},each:function(ta){ta(qt)},bind:Pn,exists:Pn,forall:Pn,filter:function(ta){return ta(qt)?Br:He},toArray:function(){return[qt]},toString:function(){return"some("+qt+")"}};return Br},st=function(qt){return qt==null?He:Ye(qt)},rt={some:Ye,none:De,from:st},Ke=Array.prototype.push,tt=function(qt,xn){for(var Gt=0,Pn=qt.length;Gt<Pn;Gt++){var Br=qt[Gt];xn(Br,Gt)}},at=function(qt){for(var xn=[],Gt=0,Pn=qt.length;Gt<Pn;++Gt){if(!Xe(qt[Gt]))throw new Error("Arr.flatten item "+Gt+" was not an array, input: "+qt);Ke.apply(xn,qt[Gt])}return xn},et=function(qt){var xn=qt,Gt=function(){return xn},Pn=function(Br){xn=Br};return{get:Gt,set:Pn}},Ot=Object.keys,wt=Object.hasOwnProperty,xt=function(qt,xn){for(var Gt=Ot(qt),Pn=0,Br=Gt.length;Pn<Br;Pn++){var ta=Gt[Pn],$t=qt[ta];xn($t,ta)}},it=function(qt,xn){return yt(qt,xn)?rt.from(qt[xn]):rt.none()},yt=function(qt,xn){return wt.call(qt,xn)},ut=function(qt){return qt.getParam("media_scripts")},Et=function(qt){return qt.getParam("audio_template_callback")},Ht=function(qt){return qt.getParam("video_template_callback")},an=function(qt){return qt.getParam("media_live_embeds",!0)},Mt=function(qt){return qt.getParam("media_filter_html",!0)},vn=function(qt){return qt.getParam("media_url_resolver")},Wn=function(qt){return qt.getParam("media_alt_source",!0)},$e=function(qt){return qt.getParam("media_poster",!0)},Dt=function(qt){return qt.getParam("media_dimensions",!0)},vt=tinymce.util.Tools.resolve("tinymce.util.Tools"),nn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),_t=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),Nt=function(qt,xn){if(qt){for(var Gt=0;Gt<qt.length;Gt++)if(xn.indexOf(qt[Gt].filter)!==-1)return qt[Gt]}},ln=nn.DOM,on=function(qt){return qt.replace(/px$/,"")},dt=function(qt){var xn=qt.map.style,Gt=xn?ln.parseStyle(xn):{};return{type:"ephox-embed-iri",source:qt.map["data-ephox-embed-iri"],altsource:"",poster:"",width:it(Gt,"max-width").map(on).getOr(""),height:it(Gt,"max-height").map(on).getOr("")}},ur=function(qt,xn){var Gt=et(!1),Pn={};return _t({validate:!1,allow_conditional_comments:!0,start:function(Br,ta){if(!Gt.get())if(yt(ta.map,"data-ephox-embed-iri"))Gt.set(!0),Pn=dt(ta);else{if(!Pn.source&&Br==="param"&&(Pn.source=ta.map.movie),(Br==="iframe"||Br==="object"||Br==="embed"||Br==="video"||Br==="audio")&&(Pn.type||(Pn.type=Br),Pn=vt.extend(ta.map,Pn)),Br==="script"){var $t=Nt(qt,ta.map.src);if(!$t)return;Pn={type:"script",source:ta.map.src,width:String($t.width),height:String($t.height)}}Br==="source"&&(Pn.source?Pn.altsource||(Pn.altsource=ta.map.src):Pn.source=ta.map.src),Br==="img"&&!Pn.poster&&(Pn.poster=ta.map.src)}}}).parse(xn),Pn.source=Pn.source||Pn.src||Pn.data,Pn.altsource=Pn.altsource||"",Pn.poster=Pn.poster||"",Pn},dn=function(qt){var xn={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Gt=qt.toLowerCase().split(".").pop(),Pn=xn[Gt];return Pn||""},en=tinymce.util.Tools.resolve("tinymce.html.Schema"),Nn=tinymce.util.Tools.resolve("tinymce.html.Writer"),fn=nn.DOM,cn=function(qt){return/^[0-9.]+$/.test(qt)?qt+"px":qt},hn=function(qt,xn){xt(xn,function(Gt,Pn){var Br=""+Gt;if(qt.map[Pn])for(var ta=qt.length;ta--;){var $t=qt[ta];$t.name===Pn&&(Br?(qt.map[Pn]=Br,$t.value=Br):(delete qt.map[Pn],qt.splice(ta,1)))}else Br&&(qt.push({name:Pn,value:Br}),qt.map[Pn]=Br)})},er=function(qt,xn){var Gt=xn.map.style,Pn=Gt?fn.parseStyle(Gt):{};Pn["max-width"]=cn(qt.width),Pn["max-height"]=cn(qt.height),hn(xn,{style:fn.serializeStyle(Pn)})},Fn=["source","altsource"],Gn=function(qt,xn,Gt){var Pn=Nn(),Br=et(!1),ta=0,$t;return _t({validate:!1,allow_conditional_comments:!0,comment:function(Zt){Pn.comment(Zt)},cdata:function(Zt){Pn.cdata(Zt)},text:function(Zt,In){Pn.text(Zt,In)},start:function(Zt,In,Qn){if(!Br.get())if(yt(In.map,"data-ephox-embed-iri"))Br.set(!0),er(xn,In);else{switch(Zt){case"video":case"object":case"embed":case"img":case"iframe":xn.height!==void 0&&xn.width!==void 0&&hn(In,{width:xn.width,height:xn.height});break}if(Gt)switch(Zt){case"video":hn(In,{poster:xn.poster,src:""}),xn.altsource&&hn(In,{src:""});break;case"iframe":hn(In,{src:xn.source});break;case"source":if(ta<2&&(hn(In,{src:xn[Fn[ta]],type:xn[Fn[ta]+"mime"]}),!xn[Fn[ta]]))return;ta++;break;case"img":if(!xn.poster)return;$t=!0;break}}Pn.start(Zt,In,Qn)},end:function(Zt){if(!Br.get()){if(Zt==="video"&&Gt){for(var In=0;In<2;In++)if(xn[Fn[In]]){var Qn=[];Qn.map={},ta<=In&&(hn(Qn,{src:xn[Fn[In]],type:xn[Fn[In]+"mime"]}),Pn.start("source",Qn,!0))}}if(xn.poster&&Zt==="object"&&Gt&&!$t){var mt=[];mt.map={},hn(mt,{src:xn.poster,width:xn.width,height:xn.height}),Pn.start("img",mt,!0)}}Pn.end(Zt)}},en({})).parse(qt),Pn.getContent()},va=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],tn=function(qt){var xn=qt.match(/^(https?:\/\/|www\.)(.+)$/i);return xn&&xn.length>1?xn[1]==="www."?"https://":xn[1]:"https://"},Mn=function(qt,xn){for(var Gt=tn(xn),Pn=qt.regex.exec(xn),Br=Gt+qt.url,ta=function(Zt){Br=Br.replace("$"+Zt,function(){return Pn[Zt]?Pn[Zt]:""})},$t=0;$t<Pn.length;$t++)ta($t);return Br.replace(/\?$/,"")},Rr=function(qt){var xn=va.filter(function(Gt){return Gt.regex.test(qt)});return xn.length>0?vt.extend({},xn[0],{url:Mn(xn[0],qt)}):null},Yr=function(qt){var xn=qt.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+qt.source+'" width="'+qt.width+'" height="'+qt.height+'"'+xn+"></iframe>"},oa=function(qt){var xn='<object data="'+qt.source+'" width="'+qt.width+'" height="'+qt.height+'" type="application/x-shockwave-flash">';return qt.poster&&(xn+='<img src="'+qt.poster+'" width="'+qt.width+'" height="'+qt.height+'" />'),xn+="</object>",xn},pa=function(qt,xn){return xn?xn(qt):'<audio controls="controls" src="'+qt.source+'">'+(qt.altsource?`
<source src="`+qt.altsource+'"'+(qt.altsourcemime?' type="'+qt.altsourcemime+'"':"")+` />
`:"")+"</audio>"},Ga=function(qt,xn){return xn?xn(qt):'<video width="'+qt.width+'" height="'+qt.height+'"'+(qt.poster?' poster="'+qt.poster+'"':"")+` controls="controls">
<source src="`+qt.source+'"'+(qt.sourcemime?' type="'+qt.sourcemime+'"':"")+` />
`+(qt.altsource?'<source src="'+qt.altsource+'"'+(qt.altsourcemime?' type="'+qt.altsourcemime+'"':"")+` />
`:"")+"</video>"},fo=function(qt){return'<script src="'+qt.source+'"><\/script>'},oo=function(qt,xn){var Gt=vt.extend({},xn);if(!Gt.source&&(vt.extend(Gt,ur(ut(qt),Gt.embed)),!Gt.source))return"";Gt.altsource||(Gt.altsource=""),Gt.poster||(Gt.poster=""),Gt.source=qt.convertURL(Gt.source,"source"),Gt.altsource=qt.convertURL(Gt.altsource,"source"),Gt.sourcemime=dn(Gt.source),Gt.altsourcemime=dn(Gt.altsource),Gt.poster=qt.convertURL(Gt.poster,"poster");var Pn=Rr(Gt.source);if(Pn&&(Gt.source=Pn.url,Gt.type=Pn.type,Gt.allowfullscreen=Pn.allowFullscreen,Gt.width=Gt.width||String(Pn.w),Gt.height=Gt.height||String(Pn.h)),Gt.embed)return Gn(Gt.embed,Gt,!0);var Br=Nt(ut(qt),Gt.source);Br&&(Gt.type="script",Gt.width=String(Br.width),Gt.height=String(Br.height));var ta=Et(qt),$t=Ht(qt);return Gt.width=Gt.width||"300",Gt.height=Gt.height||"150",vt.each(Gt,function(Zt,In){Gt[In]=qt.dom.encode(""+Zt)}),Gt.type==="iframe"?Yr(Gt):Gt.sourcemime==="application/x-shockwave-flash"?oa(Gt):Gt.sourcemime.indexOf("audio")!==-1?pa(Gt,ta):Gt.type==="script"?fo(Gt):Ga(Gt,$t)},fr=function(qt){return qt.hasAttribute("data-mce-object")||qt.hasAttribute("data-ephox-embed-iri")},sr=function(qt){qt.on("click keyup touchend",function(){var xn=qt.selection.getNode();xn&&qt.dom.hasClass(xn,"mce-preview-object")&&qt.dom.getAttrib(xn,"data-mce-selected")&&xn.setAttribute("data-mce-selected","2")}),qt.on("ObjectSelected",function(xn){var Gt=xn.target.getAttribute("data-mce-object");Gt==="script"&&xn.preventDefault()}),qt.on("ObjectResized",function(xn){var Gt=xn.target;if(Gt.getAttribute("data-mce-object")){var Pn=Gt.getAttribute("data-mce-html");Pn&&(Pn=unescape(Pn),Gt.setAttribute("data-mce-html",escape(Gn(Pn,{width:String(xn.width),height:String(xn.height)}))))}})},mr=tinymce.util.Tools.resolve("tinymce.util.Promise"),Tn={},Rn=function(qt,xn,Gt){return new mr(function(Pn,Br){var ta=function($t){return $t.html&&(Tn[qt.source]=$t),Pn({url:qt.source,html:$t.html?$t.html:xn(qt)})};Tn[qt.source]?ta(Tn[qt.source]):Gt({url:qt.source},ta,Br)})},dr=function(qt,xn){return mr.resolve({html:xn(qt),url:qt.source})},Pr=function(qt){return function(xn){return oo(qt,xn)}},br=function(qt,xn){var Gt=vn(qt);return Gt?Rn(xn,Pr(qt),Gt):dr(xn,Pr(qt))},Cn=function(qt){return yt(Tn,qt)},cr=function(qt,xn){return it(xn,qt).bind(function(Gt){return it(Gt,"meta")})},zr=function(qt,xn,Gt){return function(Pn){var Br,ta=function(){return it(qt,Pn)},$t=function(){return it(xn,Pn)},Zt=function(mt){return it(mt,"value").bind(function(Rt){return Rt.length>0?rt.some(Rt):rt.none()})},In=function(){return ta().bind(function(mt){return Ge(mt)?Zt(mt).orThunk($t):$t().orThunk(function(){return rt.from(mt)})})},Qn=function(){return $t().orThunk(function(){return ta().bind(function(mt){return Ge(mt)?Zt(mt):rt.from(mt)})})};return Br={},Br[Pn]=(Pn===Gt?In():Qn()).getOr(""),Br}},Nr=function(qt,xn){var Gt={};return it(qt,"dimensions").each(function(Pn){tt(["width","height"],function(Br){it(xn,Br).orThunk(function(){return it(Pn,Br)}).each(function(ta){return Gt[Br]=ta})})}),Gt},Ar=function(qt,xn){var Gt=xn?cr(xn,qt).getOr({}):{},Pn=zr(qt,Gt,xn);return y(y(y(y(y({},Pn("source")),Pn("altsource")),Pn("poster")),Pn("embed")),Nr(qt,Gt))},sn=function(qt){var xn=y(y({},qt),{source:{value:it(qt,"source").getOr("")},altsource:{value:it(qt,"altsource").getOr("")},poster:{value:it(qt,"poster").getOr("")}});return tt(["width","height"],function(Gt){it(qt,Gt).each(function(Pn){var Br=xn.dimensions||{};Br[Gt]=Pn,xn.dimensions=Br})}),xn},Un=function(qt){return function(xn){var Gt=xn&&xn.msg?"Media embed handler error: "+xn.msg:"Media embed handler threw unknown error.";qt.notificationManager.open({type:"error",text:Gt})}},jn=function(qt,xn){return ur(ut(qt),xn)},pr=function(qt){var xn=qt.selection.getNode(),Gt=fr(xn)?qt.serializer.serialize(xn,{selection:!0}):"";return y({embed:Gt},ur(ut(qt),Gt))},aa=function(qt,xn){return function(Gt){if(We(Gt.url)&&Gt.url.trim().length>0){var Pn=Gt.html,Br=jn(xn,Pn),ta=y(y({},Br),{source:Gt.url,embed:Pn});qt.setData(sn(ta))}}},Ua=function(qt,xn){for(var Gt=qt.dom.select("*[data-mce-object]"),Pn=0;Pn<xn.length;Pn++)for(var Br=Gt.length-1;Br>=0;Br--)xn[Pn]===Gt[Br]&&Gt.splice(Br,1);qt.selection.select(Gt[0])},jo=function(qt,xn){var Gt=qt.dom.select("*[data-mce-object]");qt.insertContent(xn),Ua(qt,Gt),qt.nodeChanged()},Xa=function(qt,xn,Gt){xn.embed=Gn(xn.embed,xn),xn.embed&&(qt.source===xn.source||Cn(xn.source))?jo(Gt,xn.embed):br(Gt,xn).then(function(Pn){jo(Gt,Pn.html)}).catch(Un(Gt))},Ka=function(qt){var xn=pr(qt),Gt=et(xn),Pn=sn(xn),Br=function(Qr,La){var Fa=Ar(La.getData(),"source");Qr.source!==Fa.source&&(aa(rr,qt)({url:Fa.source,html:""}),br(qt,Fa).then(aa(rr,qt)).catch(Un(qt)))},ta=function(Qr){var La=Ar(Qr.getData()),Fa=jn(qt,La.embed);Qr.setData(sn(Fa))},$t=function(Qr,La){var Fa=Ar(Qr.getData(),La),Ha=oo(qt,Fa);Qr.setData(sn(y(y({},Fa),{embed:Ha})))},Zt=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],In=Dt(qt)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Qn={title:"General",name:"general",items:at([Zt,In])},mt={type:"textarea",name:"embed",label:"Paste your embed code below:"},Rt={title:"Embed",items:[mt]},Jt=[];Wn(qt)&&Jt.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),$e(qt)&&Jt.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var gn={title:"Advanced",name:"advanced",items:Jt},Dn=[Qn,Rt];Jt.length>0&&Dn.push(gn);var Bn={type:"tabpanel",tabs:Dn},rr=qt.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Bn,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(Qr){var La=Ar(Qr.getData());Xa(Gt.get(),La,qt),Qr.close()},onChange:function(Qr,La){switch(La.name){case"source":Br(Gt.get(),Qr);break;case"embed":ta(Qr);break;case"dimensions":case"altsource":case"poster":$t(Qr,La.name);break}Gt.set(Ar(Qr.getData()))},initialData:Pn})},Yo=function(qt){var xn=function(){Ka(qt)};return{showDialog:xn}},Io=function(qt){var xn=function(){Ka(qt)};qt.addCommand("mceMedia",xn)},pi=tinymce.util.Tools.resolve("tinymce.html.Node"),oi=tinymce.util.Tools.resolve("tinymce.Env"),Si=tinymce.util.Tools.resolve("tinymce.html.DomParser"),Ii=function(qt,xn){if(Mt(qt)===!1)return xn;var Gt=Nn(),Pn;return _t({validate:!1,allow_conditional_comments:!1,comment:function(Br){Pn||Gt.comment(Br)},cdata:function(Br){Pn||Gt.cdata(Br)},text:function(Br,ta){Pn||Gt.text(Br,ta)},start:function(Br,ta,$t){if(Pn=!0,!(Br==="script"||Br==="noscript"||Br==="svg")){for(var Zt=ta.length-1;Zt>=0;Zt--){var In=ta[Zt].name;In.indexOf("on")===0&&(delete ta.map[In],ta.splice(Zt,1)),In==="style"&&(ta[Zt].value=qt.dom.serializeStyle(qt.dom.parseStyle(ta[Zt].value),Br))}Gt.start(Br,ta,$t),Pn=!1}},end:function(Br){Pn||Gt.end(Br)}},en({})).parse(xn),Gt.getContent()},xi=function(qt){var xn=qt.name;return xn==="iframe"||xn==="video"||xn==="audio"},Ei=function(qt,xn,Gt,Pn){Pn===void 0&&(Pn=null);var Br=qt.attr(Gt);return P(Br)?Br:yt(xn,Gt)?null:Pn},Fo=function(qt,xn,Gt){var Pn=xn.name==="img"||qt.name==="video",Br=Pn?"300":null,ta=qt.name==="audio"?"30":"150",$t=Pn?ta:null;xn.attr({width:Ei(qt,Gt,"width",Br),height:Ei(qt,Gt,"height",$t)})},wo=function(qt,xn,Gt,Pn){for(var Br=Si({forced_root_block:!1,validate:!1},qt.schema).parse(Pn,{context:xn});Br.firstChild;)Gt.append(Br.firstChild)},ji=function(qt,xn){var Gt=xn.name,Pn=new pi("img",1);return Pn.shortEnded=!0,Hu(qt,xn,Pn),Fo(xn,Pn,{}),Pn.attr({style:xn.attr("style"),src:oi.transparentSrc,"data-mce-object":Gt,class:"mce-object mce-object-"+Gt}),Pn},Ca=function(qt,xn){var Gt=xn.name,Pn=new pi("span",1);Pn.attr({contentEditable:"false",style:xn.attr("style"),"data-mce-object":Gt,class:"mce-preview-object mce-object-"+Gt}),Hu(qt,xn,Pn);var Br=qt.dom.parseStyle(xn.attr("style")),ta=new pi(Gt,1);if(Fo(xn,ta,Br),ta.attr({src:xn.attr("src"),style:xn.attr("style"),class:xn.attr("class")}),Gt==="iframe")ta.attr({allowfullscreen:xn.attr("allowfullscreen"),frameborder:"0"});else{var $t=["controls","crossorigin","currentTime","loop","muted","poster","preload"];tt($t,function(Qn){ta.attr(Qn,xn.attr(Qn))});var Zt=Pn.attr("data-mce-html");P(Zt)&&wo(qt,Gt,ta,unescape(Zt))}var In=new pi("span",1);return In.attr("class","mce-shim"),Pn.append(ta),Pn.append(In),Pn},Hu=function(qt,xn,Gt){for(var Pn=xn.attributes,Br=Pn.length;Br--;){var ta=Pn[Br].name,$t=Pn[Br].value;ta!=="width"&&ta!=="height"&&ta!=="style"&&((ta==="data"||ta==="src")&&($t=qt.convertURL($t,ta)),Gt.attr("data-mce-p-"+ta,$t))}var Zt=xn.firstChild&&xn.firstChild.value;Zt&&(Gt.attr("data-mce-html",escape(Ii(qt,Zt))),Gt.firstChild=null)},Fi=function(qt){var xn=qt.attr("class");return xn&&/\btiny-pageembed\b/.test(xn)},lu=function(qt){for(;qt=qt.parent;)if(qt.attr("data-ephox-embed-iri")||Fi(qt))return!0;return!1},Xu=function(qt){return function(xn){for(var Gt=xn.length,Pn,Br;Gt--;)Pn=xn[Gt],Pn.parent&&(Pn.parent.attr("data-mce-object")||Pn.name==="script"&&(Br=Nt(ut(qt),Pn.attr("src")),!Br)||(Br&&(Br.width&&Pn.attr("width",Br.width.toString()),Br.height&&Pn.attr("height",Br.height.toString())),xi(Pn)&&an(qt)&&oi.ceFalse?lu(Pn)||Pn.replace(Ca(qt,Pn)):lu(Pn)||Pn.replace(ji(qt,Pn))))}},nu=function(qt){qt.on("preInit",function(){var xn=qt.schema.getSpecialElements();vt.each("video audio iframe object".split(" "),function(Pn){xn[Pn]=new RegExp("</"+Pn+"[^>]*>","gi")});var Gt=qt.schema.getBoolAttrs();vt.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(Pn){Gt[Pn]={}}),qt.parser.addNodeFilter("iframe,video,audio,object,embed,script",Xu(qt)),qt.serializer.addAttributeFilter("data-mce-object",function(Pn,Br){for(var ta=Pn.length,$t,Zt,In,Qn,mt,Rt,Jt,gn;ta--;)if($t=Pn[ta],!!$t.parent){for(Jt=$t.attr(Br),Zt=new pi(Jt,1),Jt!=="audio"&&Jt!=="script"&&(gn=$t.attr("class"),gn&&gn.indexOf("mce-preview-object")!==-1?Zt.attr({width:$t.firstChild.attr("width"),height:$t.firstChild.attr("height")}):Zt.attr({width:$t.attr("width"),height:$t.attr("height")})),Zt.attr({style:$t.attr("style")}),Qn=$t.attributes,In=Qn.length;In--;){var Dn=Qn[In].name;Dn.indexOf("data-mce-p-")===0&&Zt.attr(Dn.substr(11),Qn[In].value)}Jt==="script"&&Zt.attr("type","text/javascript"),mt=$t.attr("data-mce-html"),mt&&(Rt=new pi("#text",3),Rt.raw=!0,Rt.value=Ii(qt,unescape(mt)),Zt.append(Rt)),$t.replace(Zt)}})}),qt.on("SetContent",function(){qt.$("span.mce-preview-object").each(function(xn,Gt){var Pn=qt.$(Gt);Pn.find("span.mce-shim").length===0&&Pn.append('<span class="mce-shim"></span>')})})},hu=function(qt){qt.on("ResolveName",function(xn){var Gt;xn.target.nodeType===1&&(Gt=xn.target.getAttribute("data-mce-object"))&&(xn.name=Gt)})},Yu=function(qt){var xn=function(){return qt.execCommand("mceMedia")};qt.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:xn,onSetup:function(Gt){var Pn=qt.selection;return Gt.setActive(fr(Pn.getNode())),Pn.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Gt.setActive).unbind}}),qt.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:xn})};function Ss(){v.add("media",function(qt){return Io(qt),Yu(qt),hu(qt),nu(qt),sr(qt),Yo(qt)})}Ss()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(x){var qe=x.getParam("nonbreaking_force_tab",0);return typeof qe=="boolean"?qe===!0?3:0:qe},C=function(x){return x.getParam("nonbreaking_wrap",!0,"boolean")},A=function(x,qe){for(var Be="",De=0;De<qe;De++)Be+=x;return Be},We=function(x){return x.plugins.visualchars?x.plugins.visualchars.isEnabled():!1},Ge=function(x,qe){var Be=function(){return We(x)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"},De=function(){return'<span class="'+Be()+'" contenteditable="false">'+A("&nbsp;",qe)+"</span>"},He=C(x),Ye=He||x.plugins.visualchars?De():A("&nbsp;",qe);x.undoManager.transact(function(){return x.insertContent(Ye)})},Xe=function(x){x.addCommand("mceNonBreaking",function(){Ge(x,1)})},Ve=tinymce.util.Tools.resolve("tinymce.util.VK"),P=function(x){var qe=y(x);qe>0&&x.on("keydown",function(Be){if(Be.keyCode===Ve.TAB&&!Be.isDefaultPrevented()){if(Be.shiftKey)return;Be.preventDefault(),Be.stopImmediatePropagation(),Ge(x,qe)}})},Te=function(x){var qe=function(){return x.execCommand("mceNonBreaking")};x.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:qe}),x.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:qe})};function j(){v.add("nonbreaking",function(x){Xe(x),Te(x),P(x)})}j()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=tinymce.util.Tools.resolve("tinymce.util.Tools"),C=function(j){return j.getParam("noneditable_noneditable_class","mceNonEditable")},A=function(j){return j.getParam("noneditable_editable_class","mceEditable")},We=function(j){var x=j.getParam("noneditable_regexp",[]);return x&&x.constructor===RegExp?[x]:x},Ge=function(j){return function(x){return(" "+x.attr("class")+" ").indexOf(j)!==-1}},Xe=function(j,x,qe){return function(Be){var De=arguments,He=De[De.length-2],Ye=He>0?x.charAt(He-1):"";if(Ye==='"')return Be;if(Ye===">"){var st=x.lastIndexOf("<",He);if(st!==-1){var rt=x.substring(st,He);if(rt.indexOf('contenteditable="false"')!==-1)return Be}}return'<span class="'+qe+'" data-mce-content="'+j.dom.encode(De[0])+'">'+j.dom.encode(typeof De[1]=="string"?De[1]:De[0])+"</span>"}},Ve=function(j,x,qe){var Be=x.length,De=qe.content;if(qe.format!=="raw"){for(;Be--;)De=De.replace(x[Be],Xe(j,De,C(j)));qe.content=De}},P=function(j){var x="contenteditable",qe=" "+y.trim(A(j))+" ",Be=" "+y.trim(C(j))+" ",De=Ge(qe),He=Ge(Be),Ye=We(j);j.on("PreInit",function(){Ye.length>0&&j.on("BeforeSetContent",function(st){Ve(j,Ye,st)}),j.parser.addAttributeFilter("class",function(st){for(var rt=st.length,Ke;rt--;)Ke=st[rt],De(Ke)?Ke.attr(x,"true"):He(Ke)&&Ke.attr(x,"false")}),j.serializer.addAttributeFilter(x,function(st){for(var rt=st.length,Ke;rt--;)Ke=st[rt],!(!De(Ke)&&!He(Ke))&&(Ye.length>0&&Ke.attr("data-mce-content")?(Ke.name="#text",Ke.type=3,Ke.raw=!0,Ke.value=Ke.attr("data-mce-content")):Ke.attr(x,null))})})};function Te(){v.add("noneditable",function(j){P(j)})}Te()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=tinymce.util.Tools.resolve("tinymce.Env"),C=function(x){return x.getParam("pagebreak_separator","<!-- pagebreak -->")},A=function(x){return x.getParam("pagebreak_split_block",!1)},We="mce-pagebreak",Ge=function(x){var qe='<img src="'+y.transparentSrc+'" class="'+We+'" data-mce-resize="false" data-mce-placeholder />';return x?"<p>"+qe+"</p>":qe},Xe=function(x){var qe=C(x),Be=function(){return A(x)},De=new RegExp(qe.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(He){return"\\"+He}),"gi");x.on("BeforeSetContent",function(He){He.content=He.content.replace(De,Ge(Be()))}),x.on("PreInit",function(){x.serializer.addNodeFilter("img",function(He){for(var Ye=He.length,st,rt;Ye--;)if(st=He[Ye],rt=st.attr("class"),rt&&rt.indexOf(We)!==-1){var Ke=st.parent;if(x.schema.getBlockElements()[Ke.name]&&Be()){Ke.type=3,Ke.value=qe,Ke.raw=!0,st.remove();continue}st.type=3,st.value=qe,st.raw=!0}})})},Ve=function(x){x.addCommand("mcePageBreak",function(){x.insertContent(Ge(A(x)))})},P=function(x){x.on("ResolveName",function(qe){qe.target.nodeName==="IMG"&&x.dom.hasClass(qe.target,We)&&(qe.name="pagebreak")})},Te=function(x){var qe=function(){return x.execCommand("mcePageBreak")};x.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:qe}),x.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:qe})};function j(){v.add("pagebreak",function(x){Ve(x),Te(x),Xe(x),P(x)})}j()})();(function(){var v=function(Je){var ht=Je,Lt=function(){return ht},un=function(Hn){ht=Hn};return{get:Lt,set:un}},y=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=function(Je){return Je.hasPlugin("powerpaste",!0)?(typeof window.console!="undefined"&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0):!1},A=function(Je){return{clipboard:Je}},We=function(Je){var ht=typeof Je;return Je===null?"null":ht==="object"&&(Array.prototype.isPrototypeOf(Je)||Je.constructor&&Je.constructor.name==="Array")?"array":ht==="object"&&(String.prototype.isPrototypeOf(Je)||Je.constructor&&Je.constructor.name==="String")?"string":ht},Ge=function(Je){return function(ht){return We(ht)===Je}},Xe=function(Je){return function(ht){return typeof ht===Je}},Ve=Ge("array"),P=function(Je){return Je==null},Te=function(Je){return!P(Je)},j=Xe("function"),x=function(){},qe=function(Je){return function(){return Je}},Be=function(Je){return Je},De=qe(!1),He=qe(!0),Ye=function(){return st},st=function(){var Je=function(un){return un()},ht=Be,Lt={fold:function(un,Hn){return un()},isSome:De,isNone:He,getOr:ht,getOrThunk:Je,getOrDie:function(un){throw new Error(un||"error: getOrDie called on none.")},getOrNull:qe(null),getOrUndefined:qe(void 0),or:ht,orThunk:Je,map:Ye,each:x,bind:Ye,exists:De,forall:He,filter:function(){return Ye()},toArray:function(){return[]},toString:qe("none()")};return Lt}(),rt=function(Je){var ht=qe(Je),Lt=function(){return Hn},un=function(Er){return Er(Je)},Hn={fold:function(Er,Aa){return Aa(Je)},isSome:He,isNone:De,getOr:ht,getOrThunk:ht,getOrDie:ht,getOrNull:ht,getOrUndefined:ht,or:Lt,orThunk:Lt,map:function(Er){return rt(Er(Je))},each:function(Er){Er(Je)},bind:un,exists:un,forall:un,filter:function(Er){return Er(Je)?Hn:st},toArray:function(){return[Je]},toString:function(){return"some("+Je+")"}};return Hn},Ke=function(Je){return Je==null?st:rt(Je)},tt={some:rt,none:Ye,from:Ke},at=Array.prototype.slice,et=Array.prototype.push,Ot=function(Je,ht){for(var Lt=0,un=Je.length;Lt<un;Lt++){var Hn=Je[Lt];if(ht(Hn,Lt))return!0}return!1},wt=function(Je,ht){for(var Lt=Je.length,un=new Array(Lt),Hn=0;Hn<Lt;Hn++){var Er=Je[Hn];un[Hn]=ht(Er,Hn)}return un},xt=function(Je,ht){for(var Lt=0,un=Je.length;Lt<un;Lt++){var Hn=Je[Lt];ht(Hn,Lt)}},it=function(Je,ht){for(var Lt=[],un=0,Hn=Je.length;un<Hn;un++){var Er=Je[un];ht(Er,un)&&Lt.push(Er)}return Lt},yt=function(Je,ht,Lt){return xt(Je,function(un,Hn){Lt=ht(Lt,un,Hn)}),Lt},ut=function(Je){for(var ht=[],Lt=0,un=Je.length;Lt<un;++Lt){if(!Ve(Je[Lt]))throw new Error("Arr.flatten item "+Lt+" was not an array, input: "+Je);et.apply(ht,Je[Lt])}return ht},Et=function(Je,ht){return ut(wt(Je,ht))},Ht=j(Array.from)?Array.from:function(Je){return at.call(Je)},an=function(){return an=Object.assign||function(ht){for(var Lt,un=1,Hn=arguments.length;un<Hn;un++){Lt=arguments[un];for(var Er in Lt)Object.prototype.hasOwnProperty.call(Lt,Er)&&(ht[Er]=Lt[Er])}return ht},an.apply(this,arguments)},Mt=function(Je){var ht=v(tt.none()),Lt=function(){return ht.get().each(Je)},un=function(){Lt(),ht.set(tt.none())},Hn=function(){return ht.get().isSome()},Er=function(){return ht.get()},Aa=function(ja){Lt(),ht.set(tt.some(ja))};return{clear:un,isSet:Hn,get:Er,set:Aa}},vn=function(){var Je=Mt(x),ht=function(Lt){return Je.get().each(Lt)};return an(an({},Je),{on:ht})},Wn=function(Je,ht,Lt){return ht===""||Je.length>=ht.length&&Je.substr(Lt,Lt+ht.length)===ht},$e=function(Je,ht){return Wn(Je,ht,0)},Dt=function(Je,ht){return Wn(Je,ht,Je.length-ht.length)},vt=function(Je,ht){return ht<=0?"":new Array(ht+1).join(Je)},nn=tinymce.util.Tools.resolve("tinymce.Env"),_t=tinymce.util.Tools.resolve("tinymce.util.Delay"),Nt=tinymce.util.Tools.resolve("tinymce.util.Promise"),ln=tinymce.util.Tools.resolve("tinymce.util.VK"),on=function(Je,ht,Lt,un){return Je.fire("PastePreProcess",{content:ht,internal:Lt,wordContent:un})},dt=function(Je,ht,Lt,un){return Je.fire("PastePostProcess",{node:ht,internal:Lt,wordContent:un})},ur=function(Je,ht){return Je.fire("PastePlainTextToggle",{state:ht})},dn=function(Je,ht){return Je.fire("paste",{ieFake:ht})},en=tinymce.util.Tools.resolve("tinymce.util.Tools"),Nn=function(Je){return Je.getParam("paste_block_drop",!1)},fn=function(Je){return Je.getParam("paste_data_images",!1)},cn=function(Je){return Je.getParam("paste_filter_drop",!0)},hn=function(Je){return Je.getParam("paste_preprocess")},er=function(Je){return Je.getParam("paste_postprocess")},Fn=function(Je){return Je.getParam("paste_webkit_styles")},Gn=function(Je){return Je.getParam("paste_remove_styles_if_webkit",!0)},va=function(Je){return Je.getParam("paste_merge_formats",!0)},tn=function(Je){return Je.getParam("smart_paste",!0)},Mn=function(Je){return Je.getParam("paste_as_text",!1)},Rr=function(Je){return Je.getParam("paste_retain_style_properties")},Yr=function(Je){var ht="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";return Je.getParam("paste_word_valid_elements",ht)},oa=function(Je){return Je.getParam("paste_convert_word_fake_lists",!0)},pa=function(Je){return Je.getParam("paste_enable_default_filters",!0)},Ga=function(Je){return Je.getParam("validate")},fo=function(Je){return Je.getParam("allow_html_data_urls",!1,"boolean")},oo=function(Je){return Je.getParam("paste_data_images",!1,"boolean")},fr=function(Je){return Je.getParam("images_dataimg_filter")},sr=function(Je){return Je.getParam("images_reuse_filename")},mr=function(Je){return Je.getParam("forced_root_block")},Tn=function(Je){return Je.getParam("forced_root_block_attrs")},Rn=function(Je){return Je.getParam("paste_tab_spaces",4,"number")},dr=function(Je){var ht="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp";return en.explode(Je.getParam("images_file_types",ht,"string"))},Pr="x-tinymce/html",br="<!-- "+Pr+" -->",Cn=function(Je){return br+Je},cr=function(Je){return Je.replace(br,"")},zr=function(Je){return Je.indexOf(br)!==-1},Nr=qe(Pr),Ar=Object.hasOwnProperty,sn=function(Je,ht){return Ar.call(Je,ht)},Un=tinymce.util.Tools.resolve("tinymce.html.Entities"),jn=function(Je){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(Je)},pr=function(Je){return Je.replace(/\r?\n/g,"<br>")},aa=function(Je,ht){var Lt=[],un="<"+Je;if(typeof ht=="object"){for(var Hn in ht)sn(ht,Hn)&&Lt.push(Hn+'="'+Un.encodeAllRaw(ht[Hn])+'"');Lt.length&&(un+=" "+Lt.join(" "))}return un+">"},Ua=function(Je,ht,Lt){var un=Je.split(/\n\n/),Hn=aa(ht,Lt),Er="</"+ht+">",Aa=en.map(un,function(Kr){return Kr.split(/\n/).join("<br />")}),ja=function(Kr){return Hn+Kr+Er};return Aa.length===1?Aa[0]:en.map(Aa,ja).join("")},jo=function(Je,ht,Lt){return ht?Ua(Je,ht===!0?"p":ht,Lt):pr(Je)},Xa=tinymce.util.Tools.resolve("tinymce.html.DomParser"),Ka=tinymce.util.Tools.resolve("tinymce.html.Serializer"),Yo=" ",Io=tinymce.util.Tools.resolve("tinymce.html.Node"),pi=tinymce.util.Tools.resolve("tinymce.html.Schema"),oi=function(Je){return Je.constructor===RegExp},Si=function(Je,ht){return en.each(ht,function(Lt){oi(Lt)?Je=Je.replace(Lt,""):Je=Je.replace(Lt[0],Lt[1])}),Je},Ii=function(Je){var ht=pi(),Lt=Xa({},ht),un="",Hn=ht.getShortEndedElements(),Er=en.makeMap("script noscript style textarea video audio iframe object"," "),Aa=ht.getBlockElements(),ja=function(Kr){var Sa=Kr.name,ro=Kr;if(Sa==="br"){un+=`
`;return}if(Sa!=="wbr"){if(Hn[Sa]&&(un+=" "),Er[Sa]){un+=" ";return}if(Kr.type===3&&(un+=Kr.value),!Kr.shortEnded&&(Kr=Kr.firstChild))do ja(Kr);while(Kr=Kr.next);Aa[Sa]&&ro.next&&(un+=`
`,Sa==="p"&&(un+=`
`))}};return Je=Si(Je,[/<!\[[^\]]+\]>/g]),ja(Lt.parse(Je)),un},xi=function(Je){var ht=function(Lt,un,Hn){return!un&&!Hn?" ":Yo};return Je=Si(Je,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,ht],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Je},Ei=function(Je){var ht=0;return function(){return Je+ht++}},Fo=function(Je){var ht=Je.toLowerCase(),Lt={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return en.hasOwn(Lt,ht)?"image/"+Lt[ht]:"image/"+ht},wo=function(Je){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(Je)||/class="OutlineElement/.test(Je)||/id="?docs\-internal\-guid\-/.test(Je)},ji=function(Je){var ht=!1,Lt=[/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];return Je=Je.replace(/^[\u00a0 ]+/,""),en.each(Lt,function(un){if(un.test(Je))return ht=!0,!1}),ht},Ca=function(Je){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(Je)},Hu=function(Je){for(var ht,Lt,un=1,Hn=function(Ja){var ei="";if(Ja.type===3)return Ja.value;if(Ja=Ja.firstChild)do ei+=Hn(Ja);while(Ja=Ja.next);return ei},Er=function(Ja,ei){if(Ja.type===3&&ei.test(Ja.value))return Ja.value=Ja.value.replace(ei,""),!1;if(Ja=Ja.firstChild)do if(!Er(Ja,ei))return!1;while(Ja=Ja.next);return!0},Aa=function(Ja){if(Ja._listIgnore){Ja.remove();return}if(Ja=Ja.firstChild)do Aa(Ja);while(Ja=Ja.next)},ja=function(Ja,ei,Jo){var Vu=Ja._listLevel||un;Vu!==un&&(Vu<un?ht&&(ht=ht.parent.parent):(Lt=ht,ht=null)),!ht||ht.name!==ei?(Lt=Lt||ht,ht=new Io(ei,1),Jo>1&&ht.attr("start",""+Jo),Ja.wrap(ht)):ht.append(Ja),Ja.name="li",Vu>un&&Lt&&Lt.lastChild.append(ht),un=Vu,Aa(Ja),Er(Ja,/^\u00a0+/),Er(Ja,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),Er(Ja,/^\u00a0+/)},Kr=[],Sa=Je.firstChild;typeof Sa!="undefined"&&Sa!==null;)if(Kr.push(Sa),Sa=Sa.walk(),Sa!==null)for(;typeof Sa!="undefined"&&Sa.parent!==Je;)Sa=Sa.walk();for(var ro=0;ro<Kr.length;ro++)if(Je=Kr[ro],Je.name==="p"&&Je.firstChild){var Co=Hn(Je);if(Ca(Co)){ja(Je,"ul");continue}if(ji(Co)){var Wa=/([0-9]+)\./.exec(Co),fi=1;Wa&&(fi=parseInt(Wa[1],10)),ja(Je,"ol",fi);continue}if(Je._listLevel){ja(Je,"ul",1);continue}ht=null}else Lt=ht,ht=null},Fi=function(Je,ht,Lt,un){var Hn={},Er=Je.dom.parseStyle(un);en.each(Er,function(ja,Kr){switch(Kr){case"mso-list":var Sa=/\w+ \w+([0-9]+)/i.exec(un);Sa&&(Lt._listLevel=parseInt(Sa[1],10)),/Ignore/i.test(ja)&&Lt.firstChild&&(Lt._listIgnore=!0,Lt.firstChild._listIgnore=!0);break;case"horiz-align":Kr="text-align";break;case"vert-align":Kr="vertical-align";break;case"font-color":case"mso-foreground":Kr="color";break;case"mso-background":case"mso-highlight":Kr="background";break;case"font-weight":case"font-style":ja!=="normal"&&(Hn[Kr]=ja);return;case"mso-element":if(/^(comment|comment-list)$/i.test(ja)){Lt.remove();return}break}if(Kr.indexOf("mso-comment")===0){Lt.remove();return}Kr.indexOf("mso-")!==0&&(Rr(Je)==="all"||ht&&ht[Kr])&&(Hn[Kr]=ja)}),/(bold)/i.test(Hn["font-weight"])&&(delete Hn["font-weight"],Lt.wrap(new Io("b",1))),/(italic)/i.test(Hn["font-style"])&&(delete Hn["font-style"],Lt.wrap(new Io("i",1)));var Aa=Je.dom.serializeStyle(Hn,Lt.name);return Aa||null},lu=function(Je,ht){var Lt,un=Rr(Je);un&&(Lt=en.makeMap(un.split(/[, ]/))),ht=Si(ht,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,Yo],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(Kr,Sa){return Sa.length>0?Sa.replace(/./," ").slice(Math.floor(Sa.length/2)).split("").join(Yo):""}]]);var Hn=Yr(Je),Er=pi({valid_elements:Hn,valid_children:"-li[p]"});en.each(Er.elements,function(Kr){Kr.attributes.class||(Kr.attributes.class={},Kr.attributesOrder.push("class")),Kr.attributes.style||(Kr.attributes.style={},Kr.attributesOrder.push("style"))});var Aa=Xa({},Er);Aa.addAttributeFilter("style",function(Kr){for(var Sa=Kr.length,ro;Sa--;)ro=Kr[Sa],ro.attr("style",Fi(Je,Lt,ro,ro.attr("style"))),ro.name==="span"&&ro.parent&&!ro.attributes.length&&ro.unwrap()}),Aa.addAttributeFilter("class",function(Kr){for(var Sa=Kr.length,ro,Co;Sa--;)ro=Kr[Sa],Co=ro.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(Co)&&ro.remove(),ro.attr("class",null)}),Aa.addNodeFilter("del",function(Kr){for(var Sa=Kr.length;Sa--;)Kr[Sa].remove()}),Aa.addNodeFilter("a",function(Kr){for(var Sa=Kr.length,ro,Co,Wa;Sa--;){if(ro=Kr[Sa],Co=ro.attr("href"),Wa=ro.attr("name"),Co&&Co.indexOf("#_msocom_")!==-1){ro.remove();continue}if(Co&&Co.indexOf("file://")===0&&(Co=Co.split("#")[1],Co&&(Co="#"+Co)),!Co&&!Wa)ro.unwrap();else{if(Wa&&!/^_?(?:toc|edn|ftn)/i.test(Wa)){ro.unwrap();continue}ro.attr({href:Co,name:Wa})}}});var ja=Aa.parse(ht);return oa(Je)&&Hu(ja),ht=Ka({validate:Ga(Je)},Er).serialize(ja),ht},Xu=function(Je,ht){return pa(Je)?lu(Je,ht):ht},nu=function(Je,ht){var Lt=Xa({},Je.schema);Lt.addNodeFilter("meta",function(Hn){en.each(Hn,function(Er){Er.remove()})});var un=Lt.parse(ht,{forced_root_block:!1,isRootContent:!0});return Ka({validate:Ga(Je)},Je.schema).serialize(un)},hu=function(Je,ht){return{content:Je,cancelled:ht}},Yu=function(Je,ht,Lt,un){var Hn=Je.dom.create("div",{style:"display:none"},ht),Er=dt(Je,Hn,Lt,un);return hu(Er.node.innerHTML,Er.isDefaultPrevented())},Ss=function(Je,ht,Lt,un){var Hn=on(Je,ht,Lt,un),Er=nu(Je,Hn.content);return Je.hasEventListeners("PastePostProcess")&&!Hn.isDefaultPrevented()?Yu(Je,Er,Lt,un):hu(Er,Hn.isDefaultPrevented())},qt=function(Je,ht,Lt){var un=wo(ht),Hn=un?Xu(Je,ht):ht;return Ss(Je,Hn,Lt,un)},xn=function(Je,ht){return Je.insertContent(ht,{merge:va(Je),paste:!0}),!0},Gt=function(Je){return/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(Je)},Pn=function(Je,ht){return Gt(ht)&&Ot(dr(Je),function(Lt){return Dt(ht.toLowerCase(),"."+Lt.toLowerCase())})},Br=function(Je,ht,Lt){return Je.undoManager.extra(function(){Lt(Je,ht)},function(){Je.insertContent('<img src="'+ht+'">')}),!0},ta=function(Je,ht,Lt){return Je.undoManager.extra(function(){Lt(Je,ht)},function(){Je.execCommand("mceInsertLink",!1,ht)}),!0},$t=function(Je,ht,Lt){return Je.selection.isCollapsed()===!1&&Gt(ht)?ta(Je,ht,Lt):!1},Zt=function(Je,ht,Lt){return Pn(Je,ht)?Br(Je,ht,Lt):!1},In=function(Je,ht){en.each([$t,Zt,xn],function(Lt){return Lt(Je,ht,xn)!==!0})},Qn=function(Je,ht,Lt){Lt||tn(Je)===!1?xn(Je,ht):In(Je,ht)},mt=function(Je){return" \f	\v".indexOf(Je)!==-1},Rt=function(Je){return Je===`
`||Je==="\r"},Jt=function(Je,ht){return ht<Je.length&&ht>=0?Rt(Je[ht]):!1},gn=function(Je,ht){var Lt=vt(" ",Rn(Je)),un=ht.replace(/\t/g,Lt),Hn=yt(un,function(Er,Aa){return mt(Aa)||Aa===Yo?Er.pcIsSpace||Er.str===""||Er.str.length===un.length-1||Jt(un,Er.str.length+1)?{pcIsSpace:!1,str:Er.str+Yo}:{pcIsSpace:!0,str:Er.str+" "}:{pcIsSpace:Rt(Aa),str:Er.str+Aa}},{pcIsSpace:!1,str:""});return Hn.str},Dn=function(Je,ht,Lt,un){var Hn=qt(Je,ht,Lt);Hn.cancelled===!1&&Qn(Je,Hn.content,un)},Bn=function(Je,ht,Lt){var un=Lt||zr(ht);Dn(Je,cr(ht),un,!1)},rr=function(Je,ht){var Lt=Je.dom.encode(ht).replace(/\r\n/g,`
`),un=gn(Je,Lt),Hn=jo(un,mr(Je),Tn(Je));Dn(Je,Hn,!1,!0)},Qr=function(Je){var ht={},Lt="data:text/mce-internal,";if(Je){if(Je.getData){var un=Je.getData("Text");un&&un.length>0&&un.indexOf(Lt)===-1&&(ht["text/plain"]=un)}if(Je.types)for(var Hn=0;Hn<Je.types.length;Hn++){var Er=Je.types[Hn];try{ht[Er]=Je.getData(Er)}catch(Aa){ht[Er]=""}}}return ht},La=function(Je,ht){return Qr(ht.clipboardData||Je.getDoc().dataTransfer)},Fa=function(Je,ht){return ht in Je&&Je[ht].length>0},Ha=function(Je){return Fa(Je,"text/html")||Fa(Je,"text/plain")},Ya=function(Je){var ht=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(Je);return ht?{type:ht[1],data:decodeURIComponent(ht[2])}:{type:null,data:null}},Lo=function(Je,ht){var Lt=fr(Je);return Lt?Lt(ht):!0},ki=function(Je,ht){var Lt=ht.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Te(Lt)?Je.dom.encode(Lt[1]):null},Du=Ei("mceclip"),is=function(Je,ht){var Lt=Ya(ht.uri),un=Lt.data,Hn=Lt.type,Er=Du(),Aa=ht.blob,ja=new Image;if(ja.src=ht.uri,Lo(Je,ja)){var Kr=Je.editorUpload.blobCache,Sa=void 0,ro=Kr.getByData(un,Hn);if(ro)Sa=ro;else{var Co=sr(Je)&&Te(Aa.name),Wa=Co?ki(Je,Aa.name):Er,fi=Co?Aa.name:void 0;Sa=Kr.create(Er,Aa,un,Wa,fi),Kr.add(Sa)}Bn(Je,'<img src="'+Sa.blobUri()+'">',!1)}else Bn(Je,'<img src="'+ht.uri+'">',!1)},Qu=function(Je){return Je.type==="paste"},Ai=function(Je){return Te(Je.getAsFile)},dl=function(Je){return Nt.all(wt(Je,function(ht){return new Nt(function(Lt){var un=Ai(ht)?ht.getAsFile():ht,Hn=new window.FileReader;Hn.onload=function(){Lt({blob:un,uri:Hn.result})},Hn.readAsDataURL(un)})}))},Ls=function(Je){var ht=dr(Je);return function(Lt){return $e(Lt.type,"image/")&&Ot(ht,function(un){return Fo(un)===Lt.type})}},zu=function(Je,ht){var Lt=ht.items?Et(Ht(ht.items),function(Hn){return Hn.kind==="file"?[Hn.getAsFile()]:[]}):[],un=ht.files?Ht(ht.files):[];return it(Lt.length>0?Lt:un,Ls(Je))},Wi=function(Je,ht,Lt){var un=Qu(ht)?ht.clipboardData:ht.dataTransfer;if(oo(Je)&&un){var Hn=zu(Je,un);if(Hn.length>0)return ht.preventDefault(),dl(Hn).then(function(Er){Lt&&Je.selection.setRng(Lt),xt(Er,function(Aa){is(Je,Aa)})}),!0}return!1},Rs=function(Je){var ht=Je.clipboardData;return navigator.userAgent.indexOf("Android")!==-1&&ht&&ht.items&&ht.items.length===0},xs=function(Je){return ln.metaKeyPressed(Je)&&Je.keyCode===86||Je.shiftKey&&Je.keyCode===45},Nu=function(Je,ht,Lt){var un=vn(),Hn=vn(),Er;Je.on("keyup",Hn.clear),Je.on("keydown",function(Kr){var Sa=function(ro){xs(ro)&&!ro.isDefaultPrevented()&&ht.remove()};if(xs(Kr)&&!Kr.isDefaultPrevented()){if(Er=Kr.shiftKey&&Kr.keyCode===86,Er&&nn.webkit&&navigator.userAgent.indexOf("Version/")!==-1)return;if(Kr.stopImmediatePropagation(),un.set(Kr),Hn.set(!0),nn.ie&&Er){Kr.preventDefault(),dn(Je,!0);return}ht.remove(),ht.create(),Je.once("keyup",Sa),Je.once("paste",function(){Je.off("keyup",Sa)})}});var Aa=function(Kr,Sa,ro,Co,Wa){var fi;Fa(Sa,"text/html")?fi=Sa["text/html"]:(fi=ht.getHtml(),Wa=Wa||zr(fi),ht.isDefaultContent(fi)&&(Co=!0)),fi=xi(fi),ht.remove();var Ja=Wa===!1&&jn(fi),ei=Gt(fi);if((!fi.length||Ja&&!ei)&&(Co=!0),(Co||ei)&&(Fa(Sa,"text/plain")&&Ja?fi=Sa["text/plain"]:fi=Ii(fi)),ht.isDefaultContent(fi)){ro||Kr.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.");return}Co?rr(Kr,fi):Bn(Kr,fi,Wa)},ja=function(){return ht.getLastRng()||Je.selection.getRng()};Je.on("paste",function(Kr){var Sa=un.isSet()||Hn.isSet();Sa&&un.clear();var ro=La(Je,Kr),Co=Lt.get()==="text"||Er,Wa=Fa(ro,Nr());if(Er=!1,Kr.isDefaultPrevented()||Rs(Kr)){ht.remove();return}if(!Ha(ro)&&Wi(Je,Kr,ja())){ht.remove();return}Sa||Kr.preventDefault(),nn.ie&&(!Sa||Kr.ieFake)&&!Fa(ro,"text/html")&&(ht.create(),Je.dom.bind(ht.getEl(),"paste",function(fi){fi.stopPropagation()}),Je.getDoc().execCommand("Paste",!1,null),ro["text/html"]=ht.getHtml()),Fa(ro,"text/html")?(Kr.preventDefault(),Wa||(Wa=zr(ro["text/html"])),Aa(Je,ro,Sa,Co,Wa)):_t.setEditorTimeout(Je,function(){Aa(Je,ro,Sa,Co,Wa)},0)})},Bs=function(Je,ht,Lt){Nu(Je,ht,Lt);var un;Je.parser.addNodeFilter("img",function(Hn,Er,Aa){var ja=function(Wa){return Wa.data&&Wa.data.paste===!0},Kr=function(Wa){!Wa.attr("data-mce-object")&&un!==nn.transparentSrc&&Wa.remove()},Sa=function(Wa){return Wa.indexOf("webkit-fake-url")===0},ro=function(Wa){return Wa.indexOf("data:")===0};if(!oo(Je)&&ja(Aa))for(var Co=Hn.length;Co--;)un=Hn[Co].attr("src"),un&&(Sa(un)||!fo(Je)&&ro(un))&&Kr(Hn[Co])})},Ju=function(Je){return nn.ie&&Je.inline?document.body:Je.getBody()},us=function(Je){return Ju(Je)!==Je.getBody()},Ql=function(Je,ht,Lt){us(Je)&&Je.dom.bind(ht,"paste keyup",function(un){Mr(Je,Lt)||Je.fire("paste")})},vl=function(Je,ht,Lt){var un=Je.dom,Hn=Je.getBody();ht.set(Je.selection.getRng());var Er=Je.dom.add(Ju(Je),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Lt);(nn.ie||nn.gecko)&&un.setStyle(Er,"left",un.getStyle(Hn,"direction",!0)==="rtl"?65535:-65535),un.bind(Er,"beforedeactivate focusin focusout",function(Aa){Aa.stopPropagation()}),Ql(Je,Er,Lt),Er.focus(),Je.selection.select(Er,!0)},Dl=function(Je,ht){if(Tt(Je)){for(var Lt=void 0,un=ht.get();Lt=Je.dom.get("mcepastebin");)Je.dom.remove(Lt),Je.dom.unbind(Lt);un&&Je.selection.setRng(un)}ht.set(null)},Tt=function(Je){return Je.dom.get("mcepastebin")},pn=function(Je){var ht=function(ja,Kr){ja.appendChild(Kr),Je.dom.remove(Kr,!0)},Lt=en.grep(Ju(Je).childNodes,function(ja){return ja.id==="mcepastebin"}),un=Lt.shift();en.each(Lt,function(ja){ht(un,ja)});for(var Hn=Je.dom.select("div[id=mcepastebin]",un),Er=Hn.length-1;Er>=0;Er--){var Aa=Je.dom.create("div");un.insertBefore(Aa,Hn[Er]),ht(Aa,Hn[Er])}return un?un.innerHTML:""},_n=function(Je,ht){return ht===Je},or=function(Je){return Je&&Je.id==="mcepastebin"},Mr=function(Je,ht){var Lt=Tt(Je);return or(Lt)&&_n(ht,Lt.innerHTML)},Ea=function(Je){var ht=v(null),Lt="%MCEPASTEBIN%";return{create:function(){return vl(Je,ht,Lt)},remove:function(){return Dl(Je,ht)},getEl:function(){return Tt(Je)},getHtml:function(){return pn(Je)},getLastRng:ht.get,isDefault:function(){return Mr(Je,Lt)},isDefaultContent:function(un){return _n(Lt,un)}}},Ro=function(Je,ht){var Lt=Ea(Je);return Je.on("PreInit",function(){return Bs(Je,Lt,ht)}),{pasteFormat:ht,pasteHtml:function(un,Hn){return Bn(Je,un,Hn)},pasteText:function(un){return rr(Je,un)},pasteImageData:function(un,Hn){return Wi(Je,un,Hn)},getDataTransferItems:Qr,hasHtmlOrText:Ha,hasContentType:Fa}},Qo=function(Je,ht){ht.pasteFormat.get()==="text"?(ht.pasteFormat.set("html"),ur(Je,!1)):(ht.pasteFormat.set("text"),ur(Je,!0)),Je.focus()},so=function(Je,ht){Je.addCommand("mceTogglePlainTextPaste",function(){Qo(Je,ht)}),Je.addCommand("mceInsertClipboardContent",function(Lt,un){un.content&&ht.pasteHtml(un.content,un.internal),un.text&&ht.pasteText(un.text)})},ri=function(Je){return nn.iOS===!1&&typeof(Je==null?void 0:Je.setData)=="function"},ci=function(Je,ht,Lt){if(ri(Je))try{return Je.clearData(),Je.setData("text/html",ht),Je.setData("text/plain",Lt),Je.setData(Nr(),ht),!0}catch(un){return!1}else return!1},Ps=function(Je,ht,Lt,un){ci(Je.clipboardData,ht.html,ht.text)?(Je.preventDefault(),un()):Lt(ht.html,un)},bc=function(Je){return function(ht,Lt){var un=Cn(ht),Hn=Je.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),Er=Je.dom.create("div",{contenteditable:"true"},un);Je.dom.setStyles(Hn,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),Hn.appendChild(Er),Je.dom.add(Je.getBody(),Hn);var Aa=Je.selection.getRng();Er.focus();var ja=Je.dom.createRng();ja.selectNodeContents(Er),Je.selection.setRng(ja),_t.setTimeout(function(){Je.selection.setRng(Aa),Hn.parentNode.removeChild(Hn),Lt()},0)}},yc=function(Je){return{html:Je.selection.getContent({contextual:!0}),text:Je.selection.getContent({format:"text"})}},Ra=function(Je){return!!Je.dom.getParent(Je.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",Je.getBody())},Zs=function(Je){return!Je.selection.isCollapsed()||Ra(Je)},zc=function(Je){return function(ht){Zs(Je)&&Ps(ht,yc(Je),bc(Je),function(){if(nn.browser.isChrome()||nn.browser.isFirefox()){var Lt=Je.selection.getRng();_t.setEditorTimeout(Je,function(){Je.selection.setRng(Lt),Je.execCommand("Delete")},0)}else Je.execCommand("Delete")})}},Es=function(Je){return function(ht){Zs(Je)&&Ps(ht,yc(Je),bc(Je),x)}},$c=function(Je){Je.on("cut",zc(Je)),Je.on("copy",Es(Je))},td=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Mf=function(Je,ht){return td.getCaretRangeFromPoint(ht.clientX,ht.clientY,Je.getDoc())},bi=function(Je){var ht=Je["text/plain"];return ht?ht.indexOf("file://")===0:!1},Jl=function(Je,ht){Je.focus(),Je.selection.setRng(ht)},nd=function(Je,ht,Lt){Nn(Je)&&Je.on("dragend dragover draggesture dragdrop drop drag",function(un){un.preventDefault(),un.stopPropagation()}),fn(Je)||Je.on("drop",function(un){var Hn=un.dataTransfer;Hn&&Hn.files&&Hn.files.length>0&&un.preventDefault()}),Je.on("drop",function(un){var Hn=Mf(Je,un);if(!(un.isDefaultPrevented()||Lt.get())){var Er=ht.getDataTransferItems(un.dataTransfer),Aa=ht.hasContentType(Er,Nr());if(!((!ht.hasHtmlOrText(Er)||bi(Er))&&ht.pasteImageData(un,Hn))&&Hn&&cn(Je)){var ja=Er["mce-internal"]||Er["text/html"]||Er["text/plain"];ja&&(un.preventDefault(),_t.setEditorTimeout(Je,function(){Je.undoManager.transact(function(){Er["mce-internal"]&&Je.execCommand("Delete"),Jl(Je,Hn),ja=xi(ja),Er["text/html"]?ht.pasteHtml(ja,Aa):ht.pasteText(ja)})}))}}}),Je.on("dragstart",function(un){Lt.set(!0)}),Je.on("dragover dragend",function(un){fn(Je)&&Lt.get()===!1&&(un.preventDefault(),Jl(Je,Mf(Je,un))),un.type==="dragend"&&Lt.set(!1)})},ss=function(Je){var ht=Je.plugins.paste,Lt=hn(Je);Lt&&Je.on("PastePreProcess",function(Hn){Lt.call(ht,ht,Hn)});var un=er(Je);un&&Je.on("PastePostProcess",function(Hn){un.call(ht,ht,Hn)})},$u=function(Je,ht){Je.on("PastePreProcess",function(Lt){Lt.content=ht(Je,Lt.content,Lt.internal,Lt.wordContent)})},wc=function(Je,ht){Je.on("PastePostProcess",function(Lt){ht(Je,Lt.node)})},Zn=function(Je,ht){if(!wo(ht))return ht;var Lt=[];en.each(Je.schema.getBlockElements(),function(Hn,Er){Lt.push(Er)});var un=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+Lt.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return ht=Si(ht,[[un,"$1"]]),ht=Si(ht,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]),ht},Zl=function(Je,ht,Lt,un){if(un||Lt)return ht;var Hn=Fn(Je),Er;if(Gn(Je)===!1||Hn==="all")return ht;if(Hn&&(Er=Hn.split(/[, ]/)),Er){var Aa=Je.dom,ja=Je.selection.getNode();ht=ht.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(Kr,Sa,ro,Co){var Wa=Aa.parseStyle(Aa.decode(ro)),fi={};if(Er==="none")return Sa+Co;for(var Ja=0;Ja<Er.length;Ja++){var ei=Wa[Er[Ja]],Jo=Aa.getStyle(ja,Er[Ja],!0);/color/.test(Er[Ja])&&(ei=Aa.toHex(ei),Jo=Aa.toHex(Jo)),Jo!==ei&&(fi[Er[Ja]]=ei)}var Vu=Aa.serializeStyle(fi,"span");return Vu?Sa+' style="'+Vu+'"'+Co:Sa+Co})}else ht=ht.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return ht=ht.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(Kr,Sa,ro,Co){return Sa+' style="'+ro+'"'+Co}),ht},ru=function(Je,ht){Je.$("a",ht).find("font,u").each(function(Lt,un){Je.dom.remove(un,!0)})},Vc=function(Je){nn.webkit&&$u(Je,Zl),nn.ie&&($u(Je,Zn),wc(Je,ru))},ml=function(Je,ht){return function(Lt){Lt.setActive(ht.pasteFormat.get()==="text");var un=function(Hn){return Lt.setActive(Hn.state)};return Je.on("PastePlainTextToggle",un),function(){return Je.off("PastePlainTextToggle",un)}}},ec=function(Je,ht){var Lt=function(){return Je.execCommand("mceTogglePlainTextPaste")};Je.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:Lt,onSetup:ml(Je,ht)}),Je.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:Lt,onSetup:ml(Je,ht)})};function lt(){y.add("paste",function(Je){if(C(Je)===!1){var ht=v(!1),Lt=v(Mn(Je)?"text":"html"),un=Ro(Je,Lt);return Vc(Je),ec(Je,un),so(Je,un),ss(Je),$c(Je),nd(Je,un,ht),A(un)}})}lt()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=tinymce.util.Tools.resolve("tinymce.Env"),C=tinymce.util.Tools.resolve("tinymce.util.Tools"),A=function(De){return De.getParam("content_style","","string")},We=function(De){return De.getParam("content_css_cors",!1,"boolean")},Ge=function(De){var He=De.getParam("body_class","","hash");return He[De.id]||""},Xe=function(De){var He=De.getParam("body_class","","string");return He.indexOf("=")===-1?He:Ge(De)},Ve=function(De){var He=De.getParam("body_id","","hash");return He[De.id]||He},P=function(De){var He=De.getParam("body_id","tinymce","string");return He.indexOf("=")===-1?He:Ve(De)},Te=function(De){var He="",Ye=De.dom.encode,st=A(De);He+='<base href="'+Ye(De.documentBaseURI.getURI())+'">';var rt=We(De)?' crossorigin="anonymous"':"";C.each(De.contentCSS,function(it){He+='<link type="text/css" rel="stylesheet" href="'+Ye(De.documentBaseURI.toAbsolute(it))+'"'+rt+">"}),st&&(He+='<style type="text/css">'+st+"</style>");var Ke=P(De),tt=Xe(De),at=y.mac?"e.metaKey":"e.ctrlKey && !e.altKey",et='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+at+")) {e.preventDefault();}}}, false);<\/script> ",Ot=De.getBody().dir,wt=Ot?' dir="'+Ye(Ot)+'"':"",xt="<!DOCTYPE html><html><head>"+He+'</head><body id="'+Ye(Ke)+'" class="mce-content-body '+Ye(tt)+'"'+wt+">"+De.getContent()+et+"</body></html>";return xt},j=function(De){var He=Te(De),Ye=De.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:He}});Ye.focus("close")},x=function(De){De.addCommand("mcePreview",function(){j(De)})},qe=function(De){var He=function(){return De.execCommand("mcePreview")};De.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:He}),De.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:He})};function Be(){v.add("preview",function(De){x(De),qe(De)})}Be()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=tinymce.util.Tools.resolve("tinymce.Env"),C=function(Ge){Ge.addCommand("mcePrint",function(){y.browser.isIE()?Ge.getDoc().execCommand("print",!1,null):Ge.getWin().print()})},A=function(Ge){var Xe=function(){return Ge.execCommand("mcePrint")};Ge.ui.registry.addButton("print",{icon:"print",tooltip:"Print",onAction:Xe}),Ge.ui.registry.addMenuItem("print",{text:"Print...",icon:"print",onAction:Xe})};function We(){v.add("print",function(Ge){C(Ge),A(Ge),Ge.addShortcut("Meta+P","","mcePrint")})}We()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),C=tinymce.util.Tools.resolve("tinymce.util.Tools"),A=function(Be){return Be.getParam("save_enablewhendirty",!0)},We=function(Be){return!!Be.getParam("save_onsavecallback")},Ge=function(Be){return!!Be.getParam("save_oncancelcallback")},Xe=function(Be,De){Be.notificationManager.open({text:De,type:"error"})},Ve=function(Be){var De=y.DOM.getParent(Be.id,"form");if(!(A(Be)&&!Be.isDirty())){if(Be.save(),We(Be)){Be.execCallback("save_onsavecallback",Be),Be.nodeChanged();return}De?(Be.setDirty(!1),(!De.onsubmit||De.onsubmit())&&(typeof De.submit=="function"?De.submit():Xe(Be,"Error: Form submit field collision.")),Be.nodeChanged()):Xe(Be,"Error: No form element found.")}},P=function(Be){var De=C.trim(Be.startContent);if(Ge(Be)){Be.execCallback("save_oncancelcallback",Be);return}Be.resetContent(De)},Te=function(Be){Be.addCommand("mceSave",function(){Ve(Be)}),Be.addCommand("mceCancel",function(){P(Be)})},j=function(Be){return function(De){var He=function(){De.setDisabled(A(Be)&&!Be.isDirty())};return He(),Be.on("NodeChange dirty",He),function(){return Be.off("NodeChange dirty",He)}}},x=function(Be){Be.ui.registry.addButton("save",{icon:"save",tooltip:"Save",disabled:!0,onAction:function(){return Be.execCommand("mceSave")},onSetup:j(Be)}),Be.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",disabled:!0,onAction:function(){return Be.execCommand("mceCancel")},onSetup:j(Be)}),Be.addShortcut("Meta+S","","mceSave")};function qe(){v.add("save",function(Be){x(Be),Te(Be)})}qe()})();(function(){var v=function($t){var Zt=$t,In=function(){return Zt},Qn=function(mt){Zt=mt};return{get:In,set:Qn}},y=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=function(){return C=Object.assign||function(Zt){for(var In,Qn=1,mt=arguments.length;Qn<mt;Qn++){In=arguments[Qn];for(var Rt in In)Object.prototype.hasOwnProperty.call(In,Rt)&&(Zt[Rt]=In[Rt])}return Zt},C.apply(this,arguments)},A=function($t){var Zt=typeof $t;return $t===null?"null":Zt==="object"&&(Array.prototype.isPrototypeOf($t)||$t.constructor&&$t.constructor.name==="Array")?"array":Zt==="object"&&(String.prototype.isPrototypeOf($t)||$t.constructor&&$t.constructor.name==="String")?"string":Zt},We=function($t){return function(Zt){return A(Zt)===$t}},Ge=function($t){return function(Zt){return typeof Zt===$t}},Xe=We("string"),Ve=We("array"),P=Ge("boolean"),Te=Ge("number"),j=function(){},x=function($t){return function(){return $t}},qe=function($t){return $t},Be=x(!1),De=x(!0),He="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",Ye=x(He),st=function(){return rt},rt=function(){var $t=function(Qn){return Qn()},Zt=qe,In={fold:function(Qn,mt){return Qn()},isSome:Be,isNone:De,getOr:Zt,getOrThunk:$t,getOrDie:function(Qn){throw new Error(Qn||"error: getOrDie called on none.")},getOrNull:x(null),getOrUndefined:x(void 0),or:Zt,orThunk:$t,map:st,each:j,bind:st,exists:Be,forall:De,filter:function(){return st()},toArray:function(){return[]},toString:x("none()")};return In}(),Ke=function($t){var Zt=x($t),In=function(){return mt},Qn=function(Rt){return Rt($t)},mt={fold:function(Rt,Jt){return Jt($t)},isSome:De,isNone:Be,getOr:Zt,getOrThunk:Zt,getOrDie:Zt,getOrNull:Zt,getOrUndefined:Zt,or:In,orThunk:In,map:function(Rt){return Ke(Rt($t))},each:function(Rt){Rt($t)},bind:Qn,exists:Qn,forall:Qn,filter:function(Rt){return Rt($t)?mt:rt},toArray:function(){return[$t]},toString:function(){return"some("+$t+")"}};return mt},tt=function($t){return $t==null?rt:Ke($t)},at={some:Ke,none:st,from:tt},et=Ye,Ot=tinymce.util.Tools.resolve("tinymce.Env"),wt=tinymce.util.Tools.resolve("tinymce.util.Tools"),xt=Array.prototype.slice,it=Array.prototype.push,yt=function($t,Zt){for(var In=$t.length,Qn=new Array(In),mt=0;mt<In;mt++){var Rt=$t[mt];Qn[mt]=Zt(Rt,mt)}return Qn},ut=function($t,Zt){for(var In=0,Qn=$t.length;In<Qn;In++){var mt=$t[In];Zt(mt,In)}},Et=function($t,Zt){for(var In=$t.length-1;In>=0;In--){var Qn=$t[In];Zt(Qn,In)}},Ht=function($t,Zt){if($t.length===0)return[];for(var In=Zt($t[0]),Qn=[],mt=[],Rt=0,Jt=$t.length;Rt<Jt;Rt++){var gn=$t[Rt],Dn=Zt(gn);Dn!==In&&(Qn.push(mt),mt=[]),In=Dn,mt.push(gn)}return mt.length!==0&&Qn.push(mt),Qn},an=function($t,Zt,In){return ut($t,function(Qn,mt){In=Zt(In,Qn,mt)}),In},Mt=function($t){for(var Zt=[],In=0,Qn=$t.length;In<Qn;++In){if(!Ve($t[In]))throw new Error("Arr.flatten item "+In+" was not an array, input: "+$t);it.apply(Zt,$t[In])}return Zt},vn=function($t,Zt){return Mt(yt($t,Zt))},Wn=function($t,Zt){var In=xt.call($t,0);return In.sort(Zt),In},$e=Object.hasOwnProperty,Dt=function($t,Zt){return $e.call($t,Zt)};typeof window!="undefined"||Function("return this;")();var vt=9,nn=11,_t=1,Nt=3,ln=function($t){return $t.dom.nodeType},on=function($t){return function(Zt){return ln(Zt)===$t}},dt=on(Nt),ur=function($t,Zt,In){if(Xe(In)||P(In)||Te(In))$t.setAttribute(Zt,In+"");else throw new Error("Attribute value was not simple")},dn=function($t,Zt,In){ur($t.dom,Zt,In)},en=function($t,Zt,In){return($t.compareDocumentPosition(Zt)&In)!==0},Nn=function($t,Zt){return en($t,Zt,Node.DOCUMENT_POSITION_PRECEDING)},fn=function($t,Zt){var In=Zt||document,Qn=In.createElement("div");if(Qn.innerHTML=$t,!Qn.hasChildNodes()||Qn.childNodes.length>1)throw new Error("HTML must have a single root node");return er(Qn.childNodes[0])},cn=function($t,Zt){var In=Zt||document,Qn=In.createElement($t);return er(Qn)},hn=function($t,Zt){var In=Zt||document,Qn=In.createTextNode($t);return er(Qn)},er=function($t){if($t==null)throw new Error("Node cannot be null or undefined");return{dom:$t}},Fn=function($t,Zt,In){return at.from($t.dom.elementFromPoint(Zt,In)).map(er)},Gn={fromHtml:fn,fromTag:cn,fromText:hn,fromDom:er,fromPoint:Fn},va=function($t){return $t.nodeType!==_t&&$t.nodeType!==vt&&$t.nodeType!==nn||$t.childElementCount===0},tn=function($t,Zt){var In=Zt===void 0?document:Zt.dom;return va(In)?[]:yt(In.querySelectorAll($t),Gn.fromDom)},Mn=function($t){return at.from($t.dom.parentNode).map(Gn.fromDom)},Rr=function($t){return yt($t.dom.childNodes,Gn.fromDom)},Yr=function($t,Zt){return{element:$t,offset:Zt}},oa=function($t,Zt){var In=Rr($t);return In.length>0&&Zt<In.length?Yr(In[Zt],0):Yr($t,Zt)},pa=function($t,Zt){var In=Mn($t);In.each(function(Qn){Qn.dom.insertBefore(Zt.dom,$t.dom)})},Ga=function($t,Zt){$t.dom.appendChild(Zt.dom)},fo=function($t,Zt){pa($t,Zt),Ga(Zt,$t)},oo=function($t,Zt){var In=function(Rt){if(!$t(Rt))throw new Error("Can only get "+Zt+" value of a "+Zt+" node");return Qn(Rt).getOr("")},Qn=function(Rt){return $t(Rt)?at.from(Rt.dom.nodeValue):at.none()},mt=function(Rt,Jt){if(!$t(Rt))throw new Error("Can only set raw "+Zt+" value of a "+Zt+" node");Rt.dom.nodeValue=Jt};return{get:In,getOption:Qn,set:mt}},fr=oo(dt,"text"),sr=function($t){return fr.get($t)},mr=function($t,Zt){return tn(Zt,$t)},Tn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Rn=function($t,Zt){return $t.isBlock(Zt)||Dt($t.schema.getShortEndedElements(),Zt.nodeName)},dr=function($t,Zt){return $t.getContentEditable(Zt)==="false"},Pr=function($t,Zt){return $t.getContentEditable(Zt)==="true"&&$t.getContentEditableParent(Zt.parentNode)==="false"},br=function($t,Zt){return!$t.isBlock(Zt)&&Dt($t.schema.getWhiteSpaceElements(),Zt.nodeName)},Cn=function($t,Zt){return Rn($t,Zt)||dr($t,Zt)||br($t,Zt)||Pr($t,Zt)},cr=function($t){return $t.nodeType===3},zr=function(){return{sOffset:0,fOffset:0,elements:[]}},Nr=function($t,Zt){return oa(Gn.fromDom($t),Zt)},Ar=function($t,Zt,In,Qn,mt,Rt){Rt===void 0&&(Rt=!0);for(var Jt=Rt?Zt(!1):In;Jt;){var gn=dr($t,Jt);if(gn||br($t,Jt)){var Dn=gn?Qn.cef(Jt):Qn.boundary(Jt);if(Dn)break;Jt=Zt(!0);continue}else if(Rn($t,Jt)){if(Qn.boundary(Jt))break}else cr(Jt)&&Qn.text(Jt);if(Jt===mt)break;Jt=Zt(!1)}},sn=function($t,Zt,In,Qn,mt){if(!Cn($t,In)){var Rt=$t.getParent(Qn,$t.isBlock),Jt=new Tn(In,Rt),gn=mt?Jt.next.bind(Jt):Jt.prev.bind(Jt);Ar($t,gn,In,{boundary:De,cef:De,text:function(Dn){mt?Zt.fOffset+=Dn.length:Zt.sOffset+=Dn.length,Zt.elements.push(Gn.fromDom(Dn))}})}},Un=function($t,Zt,In,Qn,mt,Rt){Rt===void 0&&(Rt=!0);var Jt=new Tn(In,Zt),gn=[],Dn=zr();sn($t,Dn,In,Zt,!1);var Bn=function(){return Dn.elements.length>0&&(gn.push(Dn),Dn=zr()),!1};return Ar($t,Jt.next.bind(Jt),In,{boundary:Bn,cef:function(rr){return Bn(),mt&&gn.push.apply(gn,mt.cef(rr)),!1},text:function(rr){Dn.elements.push(Gn.fromDom(rr)),mt&&mt.text(rr,Dn)}},Qn,Rt),Qn&&sn($t,Dn,Qn,Zt,!0),Bn(),gn},jn=function($t,Zt){var In=Nr(Zt.startContainer,Zt.startOffset),Qn=In.element.dom,mt=Nr(Zt.endContainer,Zt.endOffset),Rt=mt.element.dom;return Un($t,Zt.commonAncestorContainer,Qn,Rt,{text:function(Jt,gn){Jt===Rt?gn.fOffset+=Jt.length-mt.offset:Jt===Qn&&(gn.sOffset+=In.offset)},cef:function(Jt){var gn=vn(mr(Gn.fromDom(Jt),"*[contenteditable=true]"),function(Dn){var Bn=Dn.dom;return Un($t,Bn,Bn)});return Wn(gn,function(Dn,Bn){return Nn(Dn.elements[0].dom,Bn.elements[0].dom)?1:-1})}},!1)},pr=function($t,Zt){return Zt.collapsed?[]:jn($t,Zt)},aa=function($t,Zt){var In=$t.createRng();return In.selectNode(Zt),pr($t,In)},Ua=function($t,Zt){return vn(Zt,function(In){return aa($t,In)})},jo=function($t,Zt,In,Qn){In===void 0&&(In=0),Qn===void 0&&(Qn=$t.length);var mt=Zt.regex;mt.lastIndex=In;for(var Rt=[],Jt;Jt=mt.exec($t);){var gn=Jt[Zt.matchIndex],Dn=Jt.index+Jt[0].indexOf(gn),Bn=Dn+gn.length;if(Bn>Qn)break;Rt.push({start:Dn,finish:Bn}),mt.lastIndex=Bn}return Rt},Xa=function($t,Zt){var In=an($t,function(Qn,mt){var Rt=sr(mt),Jt=Qn.last,gn=Jt+Rt.length,Dn=vn(Zt,function(Bn,rr){return Bn.start<gn&&Bn.finish>Jt?[{element:mt,start:Math.max(Jt,Bn.start)-Jt,finish:Math.min(gn,Bn.finish)-Jt,matchId:rr}]:[]});return{results:Qn.results.concat(Dn),last:gn}},{results:[],last:0}).results;return Ht(In,function(Qn){return Qn.matchId})},Ka=function($t,Zt){return vn(Zt,function(In){var Qn=In.elements,mt=yt(Qn,sr).join(""),Rt=jo(mt,$t,In.sOffset,mt.length-In.fOffset);return Xa(Qn,Rt)})},Yo=function($t,Zt){Et($t,function(In,Qn){Et(In,function(mt){var Rt=Gn.fromDom(Zt.cloneNode(!1));dn(Rt,"data-mce-index",Qn);var Jt=mt.element.dom;if(Jt.length===mt.finish&&mt.start===0)fo(mt.element,Rt);else{Jt.length!==mt.finish&&Jt.splitText(mt.finish);var gn=Jt.splitText(mt.start);fo(Gn.fromDom(gn),Rt)}})})},Io=function($t,Zt,In,Qn){var mt=aa($t,In),Rt=Ka(Zt,mt);return Yo(Rt,Qn),Rt.length},pi=function($t,Zt,In,Qn){var mt=In.getBookmark(),Rt=$t.select("td[data-mce-selected],th[data-mce-selected]"),Jt=Rt.length>0?Ua($t,Rt):pr($t,In.getRng()),gn=Ka(Zt,Jt);return Yo(gn,Qn),In.moveToBookmark(mt),gn.length},oi=function($t){var Zt=$t.getAttribute("data-mce-index");return typeof Zt=="number"?""+Zt:Zt},Si=function($t,Zt,In,Qn){var mt=$t.dom.create("span",{"data-mce-bogus":1});mt.className="mce-match-marker";var Rt=$t.getBody();return Xu($t,Zt,!1),Qn?pi($t.dom,In,$t.selection,mt):Io($t.dom,In,Rt,mt)},Ii=function($t){var Zt=$t.parentNode;$t.firstChild&&Zt.insertBefore($t.firstChild,$t),$t.parentNode.removeChild($t)},xi=function($t,Zt){var In=[],Qn=wt.toArray($t.getBody().getElementsByTagName("span"));if(Qn.length)for(var mt=0;mt<Qn.length;mt++){var Rt=oi(Qn[mt]);Rt===null||!Rt.length||Rt===Zt.toString()&&In.push(Qn[mt])}return In},Ei=function($t,Zt,In){var Qn=Zt.get(),mt=Qn.index,Rt=$t.dom;In=In!==!1,In?mt+1===Qn.count?mt=0:mt++:mt-1===-1?mt=Qn.count-1:mt--,Rt.removeClass(xi($t,Qn.index),"mce-match-marker-selected");var Jt=xi($t,mt);return Jt.length?(Rt.addClass(xi($t,mt),"mce-match-marker-selected"),$t.selection.scrollIntoView(Jt[0]),mt):-1},Fo=function($t,Zt){var In=Zt.parentNode;$t.remove(Zt),$t.isEmpty(In)&&$t.remove(In)},wo=function($t,Zt){var In=$t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]"),Qn="("+In+")";return Zt?"(?:^|\\s|"+et()+")"+Qn+("(?=$|\\s|"+et()+")"):Qn},ji=function($t,Zt,In,Qn,mt,Rt){var Jt=$t.selection,gn=wo(In,mt),Dn=Jt.isForward(),Bn={regex:new RegExp(gn,Qn?"g":"gi"),matchIndex:1},rr=Si($t,Zt,Bn,Rt);if(Ot.browser.isSafari()&&Jt.setRng(Jt.getRng(),Dn),rr){var Qr=Ei($t,Zt,!0);Zt.set({index:Qr,count:rr,text:In,matchCase:Qn,wholeWord:mt,inSelection:Rt})}return rr},Ca=function($t,Zt){var In=Ei($t,Zt,!0);Zt.set(C(C({},Zt.get()),{index:In}))},Hu=function($t,Zt){var In=Ei($t,Zt,!1);Zt.set(C(C({},Zt.get()),{index:In}))},Fi=function($t){var Zt=oi($t);return Zt!==null&&Zt.length>0},lu=function($t,Zt,In,Qn,mt){var Rt=Zt.get(),Jt=Rt.index,gn,Dn=Jt;Qn=Qn!==!1;for(var Bn=$t.getBody(),rr=wt.grep(wt.toArray(Bn.getElementsByTagName("span")),Fi),Qr=0;Qr<rr.length;Qr++){var La=oi(rr[Qr]),Fa=gn=parseInt(La,10);if(mt||Fa===Rt.index){for(In.length?(rr[Qr].firstChild.nodeValue=In,Ii(rr[Qr])):Fo($t.dom,rr[Qr]);rr[++Qr];)if(Fa=parseInt(oi(rr[Qr]),10),Fa===gn)Fo($t.dom,rr[Qr]);else{Qr--;break}Qn&&Dn--}else gn>Jt&&rr[Qr].setAttribute("data-mce-index",String(gn-1))}return Zt.set(C(C({},Rt),{count:mt?0:Rt.count-1,index:Dn})),Qn?Ca($t,Zt):Hu($t,Zt),!mt&&Zt.get().count>0},Xu=function($t,Zt,In){for(var Qn,mt,Rt=Zt.get(),Jt=wt.toArray($t.getBody().getElementsByTagName("span")),gn=0;gn<Jt.length;gn++){var Dn=oi(Jt[gn]);Dn!==null&&Dn.length&&(Dn===Rt.index.toString()&&(Qn||(Qn=Jt[gn].firstChild),mt=Jt[gn].firstChild),Ii(Jt[gn]))}if(Zt.set(C(C({},Rt),{index:-1,count:0,text:""})),Qn&&mt){var Bn=$t.dom.createRng();return Bn.setStart(Qn,0),Bn.setEnd(mt,mt.data.length),In!==!1&&$t.selection.setRng(Bn),Bn}},nu=function($t,Zt){return Zt.get().count>1},hu=function($t,Zt){return Zt.get().count>1},Yu=function($t,Zt){var In=function(gn){return Xu($t,Zt,gn)},Qn=function(gn,Dn,Bn,rr){return rr===void 0&&(rr=!1),ji($t,Zt,gn,Dn,Bn,rr)},mt=function(){return Ca($t,Zt)},Rt=function(){return Hu($t,Zt)},Jt=function(gn,Dn,Bn){return lu($t,Zt,gn,Dn,Bn)};return{done:In,find:Qn,next:mt,prev:Rt,replace:Jt}},Ss=function($t){var Zt=v(at.none()),In=function(){return Zt.get().each($t)},Qn=function(){In(),Zt.set(at.none())},mt=function(){return Zt.get().isSome()},Rt=function(){return Zt.get()},Jt=function(gn){In(),Zt.set(at.some(gn))};return{clear:Qn,isSet:mt,get:Rt,set:Jt}},qt=function(){var $t=Ss(j),Zt=function(In){return $t.get().each(In)};return C(C({},$t),{on:Zt})},xn=function($t,Zt){var In=qt();$t.undoManager.add();var Qn=wt.trim($t.selection.getContent({format:"text"})),mt=function(Ha){var Ya=nu($t,Zt)?Ha.enable:Ha.disable;Ya("next");var Lo=hu($t,Zt)?Ha.enable:Ha.disable;Lo("prev")},Rt=function(Ha){var Ya=Ha.getData(),Lo=Zt.get();Zt.set(C(C({},Lo),{matchCase:Ya.matchcase,wholeWord:Ya.wholewords,inSelection:Ya.inselection}))},Jt=function(Ha,Ya){var Lo=["replace","replaceall","prev","next"],ki=Ya?Ha.disable:Ha.enable;ut(Lo,ki)},gn=function(Ha){$t.windowManager.alert("Could not find the specified string.",function(){Ha.focus("findtext")})},Dn=function(Ha,Ya){Ot.browser.isSafari()&&Ot.deviceType.isTouch()&&(Ya==="find"||Ya==="replace"||Ya==="replaceall")&&Ha.focus(Ya)},Bn=function(Ha){Xu($t,Zt,!1),Jt(Ha,!0),mt(Ha)},rr=function(Ha){var Ya=Ha.getData(),Lo=Zt.get();if(!Ya.findtext.length){Bn(Ha);return}if(Lo.text===Ya.findtext&&Lo.matchCase===Ya.matchcase&&Lo.wholeWord===Ya.wholewords)Ca($t,Zt);else{var ki=ji($t,Zt,Ya.findtext,Ya.matchcase,Ya.wholewords,Ya.inselection);ki<=0&&gn(Ha),Jt(Ha,ki===0)}mt(Ha)},Qr=Zt.get(),La={findtext:Qn,replacetext:"",wholewords:Qr.wholeWord,matchcase:Qr.matchCase,inselection:Qr.inSelection},Fa={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace all",disabled:!0}],initialData:La,onChange:function(Ha,Ya){Ya.name==="findtext"&&Zt.get().count>0&&Bn(Ha)},onAction:function(Ha,Ya){var Lo=Ha.getData();switch(Ya.name){case"find":rr(Ha);break;case"replace":lu($t,Zt,Lo.replacetext)?mt(Ha):Bn(Ha);break;case"replaceall":lu($t,Zt,Lo.replacetext,!0,!0),Bn(Ha);break;case"prev":Hu($t,Zt),mt(Ha);break;case"next":Ca($t,Zt),mt(Ha);break;case"matchcase":case"wholewords":case"inselection":Rt(Ha),Bn(Ha);break}Dn(Ha,Ya.name)},onSubmit:function(Ha){rr(Ha),Dn(Ha,"find")},onClose:function(){$t.focus(),Xu($t,Zt),$t.undoManager.add()}};In.set($t.windowManager.open(Fa,{inline:"toolbar"}))},Gt=function($t,Zt){$t.addCommand("SearchReplace",function(){xn($t,Zt)})},Pn=function($t,Zt){return function(){xn($t,Zt)}},Br=function($t,Zt){$t.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Pn($t,Zt),icon:"search"}),$t.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Pn($t,Zt),icon:"search"}),$t.shortcuts.add("Meta+F","",Pn($t,Zt))};function ta(){y.add("searchreplace",function($t){var Zt=v({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return Gt($t,Zt),Br($t,Zt),Yu($t,Zt)})}ta()})();(function(){var v=function(_t){var Nt=_t,ln=function(){return Nt},on=function(dt){Nt=dt};return{get:ln,set:on}},y=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=function(_t){return _t.hasPlugin("tinymcespellchecker",!0)?(typeof window.console!="undefined"&&window.console.log&&window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),!0):!1},A=Object.hasOwnProperty,We=function(_t){for(var Nt in _t)if(A.call(_t,Nt))return!1;return!0},Ge=tinymce.util.Tools.resolve("tinymce.util.Tools"),Xe=tinymce.util.Tools.resolve("tinymce.util.URI"),Ve=tinymce.util.Tools.resolve("tinymce.util.XHR"),P=function(_t){return _t.fire("SpellcheckStart")},Te=function(_t){return _t.fire("SpellcheckEnd")},j=function(_t){var Nt="English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv";return _t.getParam("spellchecker_languages",Nt)},x=function(_t){var Nt=_t.getParam("language","en");return _t.getParam("spellchecker_language",Nt)},qe=function(_t){return _t.getParam("spellchecker_rpc_url")},Be=function(_t){return _t.getParam("spellchecker_callback")},De=function(_t){var Nt=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„    ]+',"g");return _t.getParam("spellchecker_wordchar_pattern",Nt)},He=function(_t){return _t&&_t.nodeType===1&&_t.contentEditable==="false"},Ye=function(_t,Nt){var ln,on=[],dt=Nt.dom,ur=Nt.schema.getBlockElements(),dn=Nt.schema.getWhiteSpaceElements(),en=Nt.schema.getShortEndedElements(),Nn=function(Tn,Rn){if(!Tn[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return{start:Tn.index,end:Tn.index+Tn[0].length,text:Tn[0],data:Rn}},fn=function(Tn){if(Tn.nodeType===3)return Tn.data;if(dn[Tn.nodeName]&&!ur[Tn.nodeName])return"";if(He(Tn))return`
`;var Rn="";if((ur[Tn.nodeName]||en[Tn.nodeName])&&(Rn+=`
`),Tn=Tn.firstChild)do Rn+=fn(Tn);while(Tn=Tn.nextSibling);return Rn},cn=function(Tn,Rn,dr){var Pr,br,Cn,cr,zr=[],Nr=0,Ar=Tn,sn,Un=0;Rn=Rn.slice(0),Rn.sort(function(jn,pr){return jn.start-pr.start}),sn=Rn.shift();e:for(;;){if((ur[Ar.nodeName]||en[Ar.nodeName]||He(Ar))&&Nr++,Ar.nodeType===3&&(!br&&Ar.length+Nr>=sn.end?(br=Ar,cr=sn.end-Nr):Pr&&zr.push(Ar),!Pr&&Ar.length+Nr>sn.start&&(Pr=Ar,Cn=sn.start-Nr),Nr+=Ar.length),Pr&&br){if(Ar=dr({startNode:Pr,startNodeIndex:Cn,endNode:br,endNodeIndex:cr,innerNodes:zr,match:sn.text,matchIndex:Un}),Nr-=br.length-cr,Pr=null,br=null,zr=[],sn=Rn.shift(),Un++,!sn)break}else if((!dn[Ar.nodeName]||ur[Ar.nodeName])&&Ar.firstChild){if(!He(Ar)){Ar=Ar.firstChild;continue}}else if(Ar.nextSibling){Ar=Ar.nextSibling;continue}for(;;)if(Ar.nextSibling){Ar=Ar.nextSibling;break}else if(Ar.parentNode!==Tn)Ar=Ar.parentNode;else break e}},hn=function(Tn){var Rn=function(dr,Pr){var br=on[Pr];br.stencil||(br.stencil=Tn(br));var Cn=br.stencil.cloneNode(!1);return Cn.setAttribute("data-mce-index",""+Pr),dr&&Cn.appendChild(dt.doc.createTextNode(dr)),Cn};return function(dr){var Pr,br,Cn,cr=dr.startNode,zr=dr.endNode,Nr=dr.matchIndex,Ar=dt.doc;if(cr===zr){var sn=cr;Cn=sn.parentNode,dr.startNodeIndex>0&&(Pr=Ar.createTextNode(sn.data.substring(0,dr.startNodeIndex)),Cn.insertBefore(Pr,sn));var Un=Rn(dr.match,Nr);return Cn.insertBefore(Un,sn),dr.endNodeIndex<sn.length&&(br=Ar.createTextNode(sn.data.substring(dr.endNodeIndex)),Cn.insertBefore(br,sn)),sn.parentNode.removeChild(sn),Un}Pr=Ar.createTextNode(cr.data.substring(0,dr.startNodeIndex)),br=Ar.createTextNode(zr.data.substring(dr.endNodeIndex));for(var jn=Rn(cr.data.substring(dr.startNodeIndex),Nr),pr=0,aa=dr.innerNodes.length;pr<aa;++pr){var Ua=dr.innerNodes[pr],jo=Rn(Ua.data,Nr);Ua.parentNode.replaceChild(jo,Ua)}var Xa=Rn(zr.data.substring(0,dr.endNodeIndex),Nr);return Cn=cr.parentNode,Cn.insertBefore(Pr,cr),Cn.insertBefore(jn,cr),Cn.removeChild(cr),Cn=zr.parentNode,Cn.insertBefore(Xa,zr),Cn.insertBefore(br,zr),Cn.removeChild(zr),Xa}},er=function(Tn){for(var Rn=Tn.parentNode;Tn.childNodes.length>0;)Rn.insertBefore(Tn.childNodes[0],Tn);Rn.removeChild(Tn)},Fn=function(Tn){return Tn.className.indexOf("mce-spellchecker-word")!==-1},Gn=function(Tn){var Rn=_t.getElementsByTagName("*"),dr=[];Tn=typeof Tn=="number"?""+Tn:null;for(var Pr=0;Pr<Rn.length;Pr++){var br=Rn[Pr],Cn=br.getAttribute("data-mce-index");Cn!==null&&Cn.length&&Fn(br)&&(Cn===Tn||Tn===null)&&dr.push(br)}return dr},va=function(Tn){for(var Rn=on.length;Rn--;)if(on[Rn]===Tn)return Rn;return-1};function tn(Tn){var Rn=[];return Mn(function(dr,Pr){Tn(dr,Pr)&&Rn.push(dr)}),on=Rn,this}function Mn(Tn){for(var Rn=0,dr=on.length;Rn<dr&&Tn(on[Rn],Rn)!==!1;Rn++);return this}function Rr(Tn){return on.length&&cn(_t,on,hn(Tn)),this}function Yr(Tn,Rn){if(mr&&Tn.global)for(;ln=Tn.exec(mr);)on.push(Nn(ln,Rn));return this}function oa(Tn){var Rn,dr=Gn(Tn?va(Tn):null);for(Rn=dr.length;Rn--;)er(dr[Rn]);return this}var pa=function(Tn){return on[Tn.getAttribute("data-mce-index")]},Ga=function(Tn){return Gn(va(Tn))[0]};function fo(Tn,Rn,dr){return on.push({start:Tn,end:Tn+Rn,text:mr.substr(Tn,Rn),data:dr}),this}var oo=function(Tn){var Rn=Gn(va(Tn)),dr=Nt.dom.createRng();return dr.setStartBefore(Rn[0]),dr.setEndAfter(Rn[Rn.length-1]),dr},fr=function(Tn,Rn){var dr=oo(Tn);return dr.deleteContents(),Rn.length>0&&dr.insertNode(Nt.dom.doc.createTextNode(Rn)),dr};function sr(){return on.splice(0,on.length),oa(),this}var mr=fn(_t);return{text:mr,matches:on,each:Mn,filter:tn,reset:sr,matchFromElement:pa,elementFromMatch:Ga,find:Yr,add:fo,wrap:Rr,unwrap:oa,replace:fr,rangeFromMatch:oo,indexOf:va}},st=function(_t,Nt){if(!Nt.get()){var ln=Ye(_t.getBody(),_t);Nt.set(ln)}return Nt.get()},rt=function(_t,Nt,ln){return function(on,dt,ur,dn){var en={method:on,lang:ln.get()},Nn="";en[on==="addToDictionary"?"word":"text"]=dt,Ge.each(en,function(fn,cn){Nn&&(Nn+="&"),Nn+=cn+"="+encodeURIComponent(fn)}),Ve.send({url:new Xe(Nt).toAbsolute(qe(_t)),type:"post",content_type:"application/x-www-form-urlencoded",data:Nn,success:function(fn){var cn=JSON.parse(fn);if(cn)cn.error?dn(cn.error):ur(cn);else{var hn=_t.translate("Server response wasn't proper JSON.");dn(hn)}},error:function(){var fn=_t.translate("The spelling service was not found: (")+qe(_t)+_t.translate(")");dn(fn)}})}},Ke=function(_t,Nt,ln,on,dt,ur,dn){var en=Be(_t),Nn=en||rt(_t,Nt,ln);Nn.call(_t.plugins.spellchecker,on,dt,ur,dn)},tt=function(_t,Nt,ln,on,dt,ur){if(!wt(_t,ln,on)){var dn=function(Nn){_t.notificationManager.open({text:Nn,type:"error"}),_t.setProgressState(!1),wt(_t,ln,on)},en=function(Nn){yt(_t,ln,on,dt,Nn)};_t.setProgressState(!0),Ke(_t,Nt,ur,"spellcheck",st(_t,on).text,en,dn),_t.focus()}},at=function(_t,Nt,ln){_t.dom.select("span.mce-spellchecker-word").length||wt(_t,Nt,ln)},et=function(_t,Nt,ln,on,dt,ur,dn){_t.setProgressState(!0),Ke(_t,Nt,dt,"addToDictionary",ur,function(){_t.setProgressState(!1),_t.dom.remove(dn,!0),at(_t,ln,on)},function(en){_t.notificationManager.open({text:en,type:"error"}),_t.setProgressState(!1)})},Ot=function(_t,Nt,ln,on,dt,ur){_t.selection.collapse(),ur?Ge.each(_t.dom.select("span.mce-spellchecker-word"),function(dn){dn.getAttribute("data-mce-word")===on&&_t.dom.remove(dn,!0)}):_t.dom.remove(dt,!0),at(_t,Nt,ln)},wt=function(_t,Nt,ln){var on=_t.selection.getBookmark();if(st(_t,ln).reset(),_t.selection.moveToBookmark(on),ln.set(null),Nt.get())return Nt.set(!1),Te(_t),!0},xt=function(_t){var Nt=_t.getAttribute("data-mce-index");return typeof Nt=="number"?""+Nt:Nt},it=function(_t,Nt){var ln=[],on=Ge.toArray(_t.getBody().getElementsByTagName("span"));if(on.length)for(var dt=0;dt<on.length;dt++){var ur=xt(on[dt]);ur===null||!ur.length||ur===Nt.toString()&&ln.push(on[dt])}return ln},yt=function(_t,Nt,ln,on,dt){var ur=!!dt.dictionary,dn=dt.words;if(_t.setProgressState(!1),We(dn)){var en=_t.translate("No misspellings found.");_t.notificationManager.open({text:en,type:"info"}),Nt.set(!1);return}on.set({suggestions:dn,hasDictionarySupport:ur});var Nn=_t.selection.getBookmark();st(_t,ln).find(De(_t)).filter(function(fn){return!!dn[fn.text]}).wrap(function(fn){return _t.dom.create("span",{class:"mce-spellchecker-word","aria-invalid":"spelling","data-mce-bogus":1,"data-mce-word":fn.text})}),_t.selection.moveToBookmark(Nn),Nt.set(!0),P(_t)},ut=function(_t,Nt,ln,on,dt){var ur=function(){return De(_t)},dn=function(en){yt(_t,Nt,on,ln,en)};return{getTextMatcher:on.get,getWordCharPattern:ur,markErrors:dn,getLanguage:dt.get}},Et=function(_t,Nt,ln,on,dt,ur){_t.addCommand("mceSpellCheck",function(){tt(_t,Nt,ln,on,dt,ur)})},Ht=function(){return Ht=Object.assign||function(Nt){for(var ln,on=1,dt=arguments.length;on<dt;on++){ln=arguments[on];for(var ur in ln)Object.prototype.hasOwnProperty.call(ln,ur)&&(Nt[ur]=ln[ur])}return Nt},Ht.apply(this,arguments)},an="SpellcheckStart SpellcheckEnd",Mt=function(_t,Nt){var ln=[];return Ge.each(Nt,function(on){ln.push({selectable:!0,text:on.name,data:on.value})}),ln},vn=function(_t){return Ge.map(j(_t).split(","),function(Nt){var ln=Nt.split("=");return{name:ln[0],value:ln[1]}})},Wn=function(_t,Nt,ln,on,dt,ur){var dn=Mt("Language",vn(_t)),en=function(){tt(_t,Nt,ln,on,ur,dt)},Nn={tooltip:"Spellcheck",onAction:en,icon:"spell-check",onSetup:function(cn){var hn=function(){cn.setActive(ln.get())};return _t.on(an,hn),function(){_t.off(an,hn)}}},fn=Ht(Ht({},Nn),{type:"splitbutton",select:function(cn){return cn===dt.get()},fetch:function(cn){var hn=Ge.map(dn,function(er){return{type:"choiceitem",value:er.data,text:er.text}});cn(hn)},onItemAction:function(cn,hn){dt.set(hn)}});dn.length>1?_t.ui.registry.addSplitButton("spellchecker",fn):_t.ui.registry.addToggleButton("spellchecker",Nn),_t.ui.registry.addToggleMenuItem("spellchecker",{text:"Spellcheck",icon:"spell-check",onSetup:function(cn){cn.setActive(ln.get());var hn=function(){cn.setActive(ln.get())};return _t.on(an,hn),function(){_t.off(an,hn)}},onAction:en})},$e=!0,Dt=function(_t,Nt,ln,on,dt,ur,dn,en){var Nn=[],fn=ln.get().suggestions[dn];Ge.each(fn,function(hn){Nn.push({text:hn,onAction:function(){_t.insertContent(_t.dom.encode(hn)),_t.dom.remove(en),at(_t,on,dt)}})});var cn=ln.get().hasDictionarySupport;return cn&&(Nn.push({type:"separator"}),Nn.push({text:"Add to dictionary",onAction:function(){et(_t,Nt,on,dt,ur,dn,en)}})),Nn.push.apply(Nn,[{type:"separator"},{text:"Ignore",onAction:function(){Ot(_t,on,dt,dn,en)}},{text:"Ignore all",onAction:function(){Ot(_t,on,dt,dn,en,$e)}}]),Nn},vt=function(_t,Nt,ln,on,dt,ur){var dn=function(en){var Nn=en;if(Nn.className==="mce-spellchecker-word"){var fn=it(_t,xt(Nn));if(fn.length>0){var cn=_t.dom.createRng();return cn.setStartBefore(fn[0]),cn.setEndAfter(fn[fn.length-1]),_t.selection.setRng(cn),Dt(_t,Nt,ln,on,dt,ur,Nn.getAttribute("data-mce-word"),fn)}}else return[]};_t.ui.registry.addContextMenu("spellchecker",{update:dn})};function nn(){y.add("spellchecker",function(_t,Nt){if(C(_t)===!1){var ln=v(!1),on=v(x(_t)),dt=v(null),ur=v(null);return Wn(_t,Nt,ln,dt,on,ur),vt(_t,Nt,ur,ln,dt,on),Et(_t,Nt,ln,dt,ur,on),ut(_t,ln,ur,dt,on)}})}nn()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),C=tinymce.util.Tools.resolve("tinymce.EditorManager"),A=tinymce.util.Tools.resolve("tinymce.Env"),We=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ge=tinymce.util.Tools.resolve("tinymce.util.Tools"),Xe=tinymce.util.Tools.resolve("tinymce.util.VK"),Ve=function(Be){return Be.getParam("tabfocus_elements",":prev,:next")},P=function(Be){return Be.getParam("tab_focus",Ve(Be))},Te=y.DOM,j=function(Be){Be.keyCode===Xe.TAB&&!Be.ctrlKey&&!Be.altKey&&!Be.metaKey&&Be.preventDefault()},x=function(Be){var De=function(He){var Ye;if(!(He.keyCode!==Xe.TAB||He.ctrlKey||He.altKey||He.metaKey||He.isDefaultPrevented())){var st=function(at){var et=Te.select(":input:enabled,*[tabindex]:not(iframe)"),Ot=function(it){var yt=it;return it.nodeName==="BODY"||yt.type!=="hidden"&&yt.style.display!=="none"&&yt.style.visibility!=="hidden"&&Ot(it.parentNode)},wt=function(it){return/INPUT|TEXTAREA|BUTTON/.test(it.tagName)&&C.get(He.id)&&it.tabIndex!==-1&&Ot(it)};if(Ge.each(et,function(it,yt){if(it.id===Be.id)return Ye=yt,!1}),at>0){for(var xt=Ye+1;xt<et.length;xt++)if(wt(et[xt]))return et[xt]}else for(var xt=Ye-1;xt>=0;xt--)if(wt(et[xt]))return et[xt];return null},rt=Ge.explode(P(Be));rt.length===1&&(rt[1]=rt[0],rt[0]=":prev");var Ke;if(He.shiftKey?rt[0]===":prev"?Ke=st(-1):Ke=Te.get(rt[0]):rt[1]===":next"?Ke=st(1):Ke=Te.get(rt[1]),Ke){var tt=C.get(Ke.id||Ke.name);Ke.id&&tt?tt.focus():We.setTimeout(function(){A.webkit||window.focus(),Ke.focus()},10),He.preventDefault()}}};Be.on("init",function(){Be.inline&&Te.setAttrib(Be.getBody(),"tabIndex",null),Be.on("keyup",j),A.gecko?Be.on("keypress keydown",De):Be.on("keydown",De)})};function qe(){v.add("tabfocus",function(Be){x(Be)})}qe()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(tn){var Mn=typeof tn;return tn===null?"null":Mn==="object"&&(Array.prototype.isPrototypeOf(tn)||tn.constructor&&tn.constructor.name==="Array")?"array":Mn==="object"&&(String.prototype.isPrototypeOf(tn)||tn.constructor&&tn.constructor.name==="String")?"string":Mn},C=function(tn){return function(Mn){return y(Mn)===tn}},A=function(tn){return function(Mn){return typeof Mn===tn}},We=C("string"),Ge=A("function"),Xe=function(){},Ve=function(tn){return function(){return tn}},P=function(tn){return tn};function Te(tn){for(var Mn=[],Rr=1;Rr<arguments.length;Rr++)Mn[Rr-1]=arguments[Rr];return function(){for(var Yr=[],oa=0;oa<arguments.length;oa++)Yr[oa]=arguments[oa];var pa=Mn.concat(Yr);return tn.apply(null,pa)}}var j=Ve(!1),x=Ve(!0),qe=tinymce.util.Tools.resolve("tinymce.util.Tools"),Be=tinymce.util.Tools.resolve("tinymce.util.XHR"),De=function(tn){return tn.getParam("template_cdate_classes","cdate")},He=function(tn){return tn.getParam("template_mdate_classes","mdate")},Ye=function(tn){return tn.getParam("template_selected_content_classes","selcontent")},st=function(tn){return tn.getParam("template_preview_replace_values")},rt=function(tn){return tn.getParam("content_style","","string")},Ke=function(tn){return tn.getParam("content_css_cors",!1,"boolean")},tt=function(tn){return tn.getParam("template_replace_values")},at=function(tn){return tn.getParam("templates")},et=function(tn){return tn.getParam("template_cdate_format",tn.translate("%Y-%m-%d"))},Ot=function(tn){return tn.getParam("template_mdate_format",tn.translate("%Y-%m-%d"))},wt=function(tn){var Mn=tn.getParam("body_class","","hash");return Mn[tn.id]||""},xt=function(tn){var Mn=tn.getParam("body_class","","string");return Mn.indexOf("=")===-1?Mn:wt(tn)},it=function(tn,Mn){if(tn=""+tn,tn.length<Mn)for(var Rr=0;Rr<Mn-tn.length;Rr++)tn="0"+tn;return tn},yt=function(tn,Mn,Rr){Rr===void 0&&(Rr=new Date);var Yr="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),oa="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),pa="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Ga="January February March April May June July August September October November December".split(" ");return Mn=Mn.replace("%D","%m/%d/%Y"),Mn=Mn.replace("%r","%I:%M:%S %p"),Mn=Mn.replace("%Y",""+Rr.getFullYear()),Mn=Mn.replace("%y",""+Rr.getYear()),Mn=Mn.replace("%m",it(Rr.getMonth()+1,2)),Mn=Mn.replace("%d",it(Rr.getDate(),2)),Mn=Mn.replace("%H",""+it(Rr.getHours(),2)),Mn=Mn.replace("%M",""+it(Rr.getMinutes(),2)),Mn=Mn.replace("%S",""+it(Rr.getSeconds(),2)),Mn=Mn.replace("%I",""+((Rr.getHours()+11)%12+1)),Mn=Mn.replace("%p",Rr.getHours()<12?"AM":"PM"),Mn=Mn.replace("%B",""+tn.translate(Ga[Rr.getMonth()])),Mn=Mn.replace("%b",""+tn.translate(pa[Rr.getMonth()])),Mn=Mn.replace("%A",""+tn.translate(oa[Rr.getDay()])),Mn=Mn.replace("%a",""+tn.translate(Yr[Rr.getDay()])),Mn=Mn.replace("%%","%"),Mn},ut=function(tn,Mn){return function(){var Rr=at(tn);Ge(Rr)?Rr(Mn):We(Rr)?Be.send({url:Rr,success:function(Yr){Mn(JSON.parse(Yr))}}):Mn(Rr)}},Et=function(tn,Mn){return qe.each(Mn,function(Rr,Yr){Ge(Rr)&&(Rr=Rr(Yr)),tn=tn.replace(new RegExp("\\{\\$"+Yr+"\\}","g"),Rr)}),tn},Ht=function(tn,Mn){var Rr=tn.dom,Yr=tt(tn);qe.each(Rr.select("*",Mn),function(oa){qe.each(Yr,function(pa,Ga){Rr.hasClass(oa,Ga)&&Ge(pa)&&pa(oa)})})},an=function(tn,Mn){return new RegExp("\\b"+Mn+"\\b","g").test(tn.className)},Mt=function(tn,Mn,Rr){var Yr=tn.dom,oa=tn.selection.getContent();Rr=Et(Rr,tt(tn));var pa=Yr.create("div",null,Rr),Ga=Yr.select(".mceTmpl",pa);Ga&&Ga.length>0&&(pa=Yr.create("div",null),pa.appendChild(Ga[0].cloneNode(!0))),qe.each(Yr.select("*",pa),function(fo){an(fo,De(tn).replace(/\s+/g,"|"))&&(fo.innerHTML=yt(tn,et(tn))),an(fo,He(tn).replace(/\s+/g,"|"))&&(fo.innerHTML=yt(tn,Ot(tn))),an(fo,Ye(tn).replace(/\s+/g,"|"))&&(fo.innerHTML=oa)}),Ht(tn,pa),tn.execCommand("mceInsertContent",!1,pa.innerHTML),tn.addVisual()},vn=function(){return Wn},Wn=function(){var tn=function(Yr){return Yr()},Mn=P,Rr={fold:function(Yr,oa){return Yr()},isSome:j,isNone:x,getOr:Mn,getOrThunk:tn,getOrDie:function(Yr){throw new Error(Yr||"error: getOrDie called on none.")},getOrNull:Ve(null),getOrUndefined:Ve(void 0),or:Mn,orThunk:tn,map:vn,each:Xe,bind:vn,exists:j,forall:x,filter:function(){return vn()},toArray:function(){return[]},toString:Ve("none()")};return Rr}(),$e=function(tn){var Mn=Ve(tn),Rr=function(){return oa},Yr=function(pa){return pa(tn)},oa={fold:function(pa,Ga){return Ga(tn)},isSome:x,isNone:j,getOr:Mn,getOrThunk:Mn,getOrDie:Mn,getOrNull:Mn,getOrUndefined:Mn,or:Rr,orThunk:Rr,map:function(pa){return $e(pa(tn))},each:function(pa){pa(tn)},bind:Yr,exists:Yr,forall:Yr,filter:function(pa){return pa(tn)?oa:Wn},toArray:function(){return[tn]},toString:function(){return"some("+tn+")"}};return oa},Dt=function(tn){return tn==null?Wn:$e(tn)},vt={some:$e,none:vn,from:Dt},nn=function(tn,Mn){for(var Rr=tn.length,Yr=new Array(Rr),oa=0;oa<Rr;oa++){var pa=tn[oa];Yr[oa]=Mn(pa,oa)}return Yr},_t=function(tn,Mn,Rr){for(var Yr=0,oa=tn.length;Yr<oa;Yr++){var pa=tn[Yr];if(Mn(pa,Yr))return vt.some(pa);if(Rr(pa,Yr))break}return vt.none()},Nt=function(tn,Mn){return _t(tn,Mn,j)},ln=tinymce.util.Tools.resolve("tinymce.Env"),on=tinymce.util.Tools.resolve("tinymce.util.Promise"),dt=Object.hasOwnProperty,ur=function(tn,Mn){return dn(tn,Mn)?vt.from(tn[Mn]):vt.none()},dn=function(tn,Mn){return dt.call(tn,Mn)},en={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},Nn=function(tn){return tn.replace(/["'<>&]/g,function(Mn){return ur(en,Mn).getOr(Mn)})},fn=function(tn,Mn){if(Mn.indexOf("<html>")===-1){var Rr="",Yr=rt(tn),oa=Ke(tn)?' crossorigin="anonymous"':"";qe.each(tn.contentCSS,function(mr){Rr+='<link type="text/css" rel="stylesheet" href="'+tn.documentBaseURI.toAbsolute(mr)+'"'+oa+">"}),Yr&&(Rr+='<style type="text/css">'+Yr+"</style>");var pa=xt(tn),Ga=tn.dom.encode,fo=ln.mac?"e.metaKey":"e.ctrlKey && !e.altKey",oo='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+fo+")) {e.preventDefault();}}}, false);<\/script> ",fr=tn.getBody().dir,sr=fr?' dir="'+Ga(fr)+'"':"";Mn='<!DOCTYPE html><html><head><base href="'+Ga(tn.documentBaseURI.getURI())+'">'+Rr+oo+'</head><body class="'+Ga(pa)+'"'+sr+">"+Mn+"</body></html>"}return Et(Mn,st(tn))},cn=function(tn,Mn){var Rr=function(){if(!Mn||Mn.length===0){var mr=tn.translate("No templates defined.");return tn.notificationManager.open({text:mr,type:"info"}),vt.none()}return vt.from(qe.map(Mn,function(Tn,Rn){var dr=function(Pr){return Pr.url!==void 0};return{selected:Rn===0,text:Tn.title,value:{url:dr(Tn)?vt.from(Tn.url):vt.none(),content:dr(Tn)?vt.none():vt.from(Tn.content),description:Tn.description}}}))},Yr=function(mr){return nn(mr,function(Tn){return{text:Tn.text,value:Tn.text}})},oa=function(mr,Tn){return Nt(mr,function(Rn){return Rn.text===Tn})},pa=function(mr){tn.windowManager.alert("Could not load the specified template.",function(){return mr.focus("template")})},Ga=function(mr){return new on(function(Tn,Rn){mr.value.url.fold(function(){return Tn(mr.value.content.getOr(""))},function(dr){return Be.send({url:dr,success:function(Pr){Tn(Pr)},error:function(Pr){Rn(Pr)}})})})},fo=function(mr,Tn){return function(Rn,dr){if(dr.name==="template"){var Pr=Rn.getData().template;oa(mr,Pr).each(function(br){Rn.block("Loading..."),Ga(br).then(function(Cn){Tn(Rn,br,Cn)}).catch(function(){Tn(Rn,br,""),Rn.disable("save"),pa(Rn)})})}}},oo=function(mr){return function(Tn){var Rn=Tn.getData();oa(mr,Rn.template).each(function(dr){Ga(dr).then(function(Pr){tn.execCommand("mceInsertTemplate",!1,Pr),Tn.close()}).catch(function(){Tn.disable("save"),pa(Tn)})})}},fr=function(mr){var Tn=Yr(mr),Rn=function(br,Cn){return{title:"Insert Template",size:"large",body:{type:"panel",items:br},initialData:Cn,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:oo(mr),onChange:fo(mr,dr)}},dr=function(br,Cn,cr){var zr=fn(tn,cr),Nr=[{type:"selectbox",name:"template",label:"Templates",items:Tn},{type:"htmlpanel",html:'<p aria-live="polite">'+Nn(Cn.value.description)+"</p>"},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1}],Ar={template:Cn.text,preview:zr};br.unblock(),br.redial(Rn(Nr,Ar)),br.focus("template")},Pr=tn.windowManager.open(Rn([],{template:"",preview:""}));Pr.block("Loading..."),Ga(mr[0]).then(function(br){dr(Pr,mr[0],br)}).catch(function(){dr(Pr,mr[0],""),Pr.disable("save"),pa(Pr)})},sr=Rr();sr.each(fr)},hn=function(tn){return function(Mn){cn(tn,Mn)}},er=function(tn){tn.addCommand("mceInsertTemplate",Te(Mt,tn)),tn.addCommand("mceTemplate",ut(tn,hn(tn)))},Fn=function(tn){tn.on("PreProcess",function(Mn){var Rr=tn.dom,Yr=Ot(tn);qe.each(Rr.select("div",Mn.node),function(oa){Rr.hasClass(oa,"mceTmpl")&&(qe.each(Rr.select("*",oa),function(pa){Rr.hasClass(pa,He(tn).replace(/\s+/g,"|"))&&(pa.innerHTML=yt(tn,Yr))}),Ht(tn,oa))})})},Gn=function(tn){var Mn=function(){return tn.execCommand("mceTemplate")};tn.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:Mn}),tn.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:Mn})};function va(){v.add("template",function(tn){Gn(tn),er(tn),Fn(tn)})}va()})();(function(){var v=function(mt){var Rt=mt,Jt=function(){return Rt},gn=function(Dn){Rt=Dn};return{get:Jt,set:gn}},y=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=function(){return C=Object.assign||function(Rt){for(var Jt,gn=1,Dn=arguments.length;gn<Dn;gn++){Jt=arguments[gn];for(var Bn in Jt)Object.prototype.hasOwnProperty.call(Jt,Bn)&&(Rt[Bn]=Jt[Bn])}return Rt},C.apply(this,arguments)};function A(mt,Rt,Jt){if(Jt||arguments.length===2)for(var gn=0,Dn=Rt.length,Bn;gn<Dn;gn++)(Bn||!(gn in Rt))&&(Bn||(Bn=Array.prototype.slice.call(Rt,0,gn)),Bn[gn]=Rt[gn]);return mt.concat(Bn||Array.prototype.slice.call(Rt))}var We=function(mt){var Rt=typeof mt;return mt===null?"null":Rt==="object"&&(Array.prototype.isPrototypeOf(mt)||mt.constructor&&mt.constructor.name==="Array")?"array":Rt==="object"&&(String.prototype.isPrototypeOf(mt)||mt.constructor&&mt.constructor.name==="String")?"string":Rt},Ge=function(mt){return function(Rt){return We(Rt)===mt}},Xe=Ge("string"),Ve=Ge("object"),P=Ge("array"),Te=function(){},j=function(mt){return function(){return mt}},x=function(mt){return mt},qe=function(mt){return function(){throw new Error(mt)}},Be=j(!1),De=j(!0),He=function(){return Ye},Ye=function(){var mt=function(gn){return gn()},Rt=x,Jt={fold:function(gn,Dn){return gn()},isSome:Be,isNone:De,getOr:Rt,getOrThunk:mt,getOrDie:function(gn){throw new Error(gn||"error: getOrDie called on none.")},getOrNull:j(null),getOrUndefined:j(void 0),or:Rt,orThunk:mt,map:He,each:Te,bind:He,exists:Be,forall:De,filter:function(){return He()},toArray:function(){return[]},toString:j("none()")};return Jt}(),st=function(mt){var Rt=j(mt),Jt=function(){return Dn},gn=function(Bn){return Bn(mt)},Dn={fold:function(Bn,rr){return rr(mt)},isSome:De,isNone:Be,getOr:Rt,getOrThunk:Rt,getOrDie:Rt,getOrNull:Rt,getOrUndefined:Rt,or:Jt,orThunk:Jt,map:function(Bn){return st(Bn(mt))},each:function(Bn){Bn(mt)},bind:gn,exists:gn,forall:gn,filter:function(Bn){return Bn(mt)?Dn:Ye},toArray:function(){return[mt]},toString:function(){return"some("+mt+")"}};return Dn},rt=function(mt){return mt==null?Ye:st(mt)},Ke={some:st,none:He,from:rt},tt=Array.prototype.slice,at=Array.prototype.indexOf,et=function(mt,Rt){return at.call(mt,Rt)},Ot=function(mt,Rt){return et(mt,Rt)>-1},wt=function(mt,Rt){for(var Jt=mt.length,gn=new Array(Jt),Dn=0;Dn<Jt;Dn++){var Bn=mt[Dn];gn[Dn]=Rt(Bn,Dn)}return gn},xt=function(mt,Rt){for(var Jt=0,gn=mt.length;Jt<gn;Jt++){var Dn=mt[Jt];Rt(Dn,Jt)}},it=function(mt,Rt){for(var Jt=mt.length-1;Jt>=0;Jt--){var gn=mt[Jt];Rt(gn,Jt)}},yt=function(mt,Rt){for(var Jt=[],gn=0,Dn=mt.length;gn<Dn;gn++){var Bn=mt[gn];Rt(Bn,gn)&&Jt.push(Bn)}return Jt},ut=function(mt,Rt,Jt){return it(mt,function(gn,Dn){Jt=Rt(Jt,gn,Dn)}),Jt},Et=function(mt,Rt,Jt){return xt(mt,function(gn,Dn){Jt=Rt(Jt,gn,Dn)}),Jt},Ht=function(mt,Rt,Jt){for(var gn=0,Dn=mt.length;gn<Dn;gn++){var Bn=mt[gn];if(Rt(Bn,gn))return Ke.some(Bn);if(Jt(Bn,gn))break}return Ke.none()},an=function(mt,Rt){return Ht(mt,Rt,Be)},Mt=function(mt,Rt){for(var Jt=0,gn=mt.length;Jt<gn;++Jt){var Dn=mt[Jt];if(Rt(Dn,Jt)!==!0)return!1}return!0},vn=function(mt,Rt){var Jt=tt.call(mt,0);return Jt.sort(Rt),Jt},Wn=function(mt,Rt){return Rt>=0&&Rt<mt.length?Ke.some(mt[Rt]):Ke.none()},$e=function(mt){return Wn(mt,0)},Dt=Object.keys,vt=Object.hasOwnProperty,nn=function(mt,Rt){return vt.call(mt,Rt)},_t=function(mt){if(!P(mt))throw new Error("cases must be an array");if(mt.length===0)throw new Error("there must be at least one case");var Rt=[],Jt={};return xt(mt,function(gn,Dn){var Bn=Dt(gn);if(Bn.length!==1)throw new Error("one and only one name per case");var rr=Bn[0],Qr=gn[rr];if(Jt[rr]!==void 0)throw new Error("duplicate key detected:"+rr);if(rr==="cata")throw new Error("cannot have a case named cata (sorry)");if(!P(Qr))throw new Error("case arguments must be an array");Rt.push(rr),Jt[rr]=function(){for(var La=[],Fa=0;Fa<arguments.length;Fa++)La[Fa]=arguments[Fa];var Ha=La.length;if(Ha!==Qr.length)throw new Error("Wrong number of arguments to case "+rr+". Expected "+Qr.length+" ("+Qr+"), got "+Ha);var Ya=function(Lo){var ki=Dt(Lo);if(Rt.length!==ki.length)throw new Error("Wrong number of arguments to match. Expected: "+Rt.join(",")+`
Actual: `+ki.join(","));var Du=Mt(Rt,function(is){return Ot(ki,is)});if(!Du)throw new Error("Not all branches were specified when using match. Specified: "+ki.join(", ")+`
Required: `+Rt.join(", "));return Lo[rr].apply(null,La)};return{fold:function(){for(var Lo=[],ki=0;ki<arguments.length;ki++)Lo[ki]=arguments[ki];if(Lo.length!==mt.length)throw new Error("Wrong number of arguments to fold. Expected "+mt.length+", got "+Lo.length);var Du=Lo[Dn];return Du.apply(null,La)},match:Ya,log:function(Lo){}}}}),Jt},Nt={generate:_t};Nt.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var ln=function(mt){var Rt=[],Jt=[];return xt(mt,function(gn){gn.fold(function(Dn){Rt.push(Dn)},function(Dn){Jt.push(Dn)})}),{errors:Rt,values:Jt}},on=function(mt){var Rt=function(Ya){return on(mt)},Jt=function(Ya){return on(mt)},gn=function(Ya){return on(Ya(mt))},Dn=function(Ya){return on(mt)},Bn=function(Ya){Ya(mt)},rr=function(Ya){return Ya(mt)},Qr=function(Ya,Lo){return Lo(mt)},La=function(Ya){return Ya(mt)},Fa=function(Ya){return Ya(mt)},Ha=function(){return Ke.some(mt)};return{isValue:De,isError:Be,getOr:j(mt),getOrThunk:j(mt),getOrDie:j(mt),or:Rt,orThunk:Jt,fold:Qr,map:gn,mapError:Dn,each:Bn,bind:rr,exists:La,forall:Fa,toOptional:Ha}},dt=function(mt){var Rt=function(Fa){return Fa()},Jt=function(){return qe(String(mt))()},gn=x,Dn=function(Fa){return Fa()},Bn=function(Fa){return dt(mt)},rr=function(Fa){return dt(Fa(mt))},Qr=function(Fa){return dt(mt)},La=function(Fa,Ha){return Fa(mt)};return{isValue:Be,isError:De,getOr:x,getOrThunk:Rt,getOrDie:Jt,or:gn,orThunk:Dn,fold:La,map:Bn,mapError:rr,each:Te,bind:Qr,exists:Be,forall:De,toOptional:Ke.none}},ur=function(mt,Rt){return mt.fold(function(){return dt(Rt)},on)},dn={value:on,error:dt,fromOption:ur},en=function(mt){return mt.type==="inline-command"||mt.type==="inline-format"},Nn=function(mt){return mt.type==="block-command"||mt.type==="block-format"},fn=function(mt){return vn(mt,function(Rt,Jt){return Rt.start.length===Jt.start.length?0:Rt.start.length>Jt.start.length?-1:1})},cn=function(mt){var Rt=function(Bn){return dn.error({message:Bn,pattern:mt})},Jt=function(Bn,rr,Qr){if(mt.format!==void 0){var La=void 0;if(P(mt.format)){if(!Mt(mt.format,Xe))return Rt(Bn+" pattern has non-string items in the `format` array");La=mt.format}else if(Xe(mt.format))La=[mt.format];else return Rt(Bn+" pattern has non-string `format` parameter");return dn.value(rr(La))}else return mt.cmd!==void 0?Xe(mt.cmd)?dn.value(Qr(mt.cmd,mt.value)):Rt(Bn+" pattern has non-string `cmd` parameter"):Rt(Bn+" pattern is missing both `format` and `cmd` parameters")};if(!Ve(mt))return Rt("Raw pattern is not an object");if(!Xe(mt.start))return Rt("Raw pattern is missing `start` parameter");if(mt.end!==void 0){if(!Xe(mt.end))return Rt("Inline pattern has non-string `end` parameter");if(mt.start.length===0&&mt.end.length===0)return Rt("Inline pattern has empty `start` and `end` parameters");var gn=mt.start,Dn=mt.end;return Dn.length===0&&(Dn=gn,gn=""),Jt("Inline",function(Bn){return{type:"inline-format",start:gn,end:Dn,format:Bn}},function(Bn,rr){return{type:"inline-command",start:gn,end:Dn,cmd:Bn,value:rr}})}else return mt.replacement!==void 0?Xe(mt.replacement)?mt.start.length===0?Rt("Replacement pattern has empty `start` parameter"):dn.value({type:"inline-command",start:"",end:mt.start,cmd:"mceInsertContent",value:mt.replacement}):Rt("Replacement pattern has non-string `replacement` parameter"):mt.start.length===0?Rt("Block pattern has empty `start` parameter"):Jt("Block",function(Bn){return{type:"block-format",start:mt.start,format:Bn[0]}},function(Bn,rr){return{type:"block-command",start:mt.start,cmd:Bn,value:rr}})},hn=function(mt){if(mt.type==="block-command")return{start:mt.start,cmd:mt.cmd,value:mt.value};if(mt.type==="block-format")return{start:mt.start,format:mt.format};if(mt.type==="inline-command")return mt.cmd==="mceInsertContent"&&mt.start===""?{start:mt.end,replacement:mt.value}:{start:mt.start,end:mt.end,cmd:mt.cmd,value:mt.value};if(mt.type==="inline-format")return{start:mt.start,end:mt.end,format:mt.format.length===1?mt.format[0]:mt.format}},er=function(mt){return{inlinePatterns:yt(mt,en),blockPatterns:fn(yt(mt,Nn))}},Fn=function(mt){var Rt=function(gn){var Dn=ln(wt(gn,cn));if(Dn.errors.length>0){var Bn=Dn.errors[0];throw new Error(Bn.message+`:
`+JSON.stringify(Bn.pattern,null,2))}mt.set(er(Dn.values))},Jt=function(){return A(A([],wt(mt.get().inlinePatterns,hn),!0),wt(mt.get().blockPatterns,hn),!0)};return{setPatterns:Rt,getPatterns:Jt}},Gn=typeof window!="undefined"?window:Function("return this;")(),va=function(){for(var mt=[],Rt=0;Rt<arguments.length;Rt++)mt[Rt]=arguments[Rt];var Jt=Gn.console;Jt&&(Jt.error?Jt.error.apply(Jt,mt):Jt.log.apply(Jt,mt))},tn=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],Mn=function(mt){var Rt=mt.getParam("textpattern_patterns",tn,"array");if(!P(Rt))return va("The setting textpattern_patterns should be an array"),{inlinePatterns:[],blockPatterns:[]};var Jt=ln(wt(Rt,cn));return xt(Jt.errors,function(gn){return va(gn.message,gn.pattern)}),er(Jt.values)},Rr=function(mt){var Rt=mt.getParam("forced_root_block","p");return Rt===!1?"":Rt===!0?"p":Rt},Yr=tinymce.util.Tools.resolve("tinymce.util.Delay"),oa=tinymce.util.Tools.resolve("tinymce.util.VK"),pa="\uFEFF",Ga=" ",fo=tinymce.util.Tools.resolve("tinymce.util.Tools"),oo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),fr=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),sr=function(mt,Rt){return{container:mt,offset:Rt}},mr=function(mt){return mt.nodeType===Node.TEXT_NODE},Tn=function(mt,Rt,Jt){if(Rt&&mt.isEmpty(Rt)&&!Jt(Rt)){var gn=Rt.parentNode;mt.remove(Rt),Tn(mt,gn,Jt)}},Rn=function(mt,Rt,Jt,gn){gn===void 0&&(gn=!0);var Dn=Rt.startContainer.parentNode,Bn=Rt.endContainer.parentNode;Rt.deleteContents(),gn&&!Jt(Rt.startContainer)&&(mr(Rt.startContainer)&&Rt.startContainer.data.length===0&&mt.remove(Rt.startContainer),mr(Rt.endContainer)&&Rt.endContainer.data.length===0&&mt.remove(Rt.endContainer),Tn(mt,Dn,Jt),Dn!==Bn&&Tn(mt,Bn,Jt))},dr=function(mt,Rt){var Jt=Rt.get(mt);return P(Jt)&&$e(Jt).exists(function(gn){return nn(gn,"block")})},Pr=function(mt){return mt.start.length===0},br=function(mt,Rt){var Jt=Ke.from(mt.dom.getParent(Rt.startContainer,mt.dom.isBlock));return Rr(mt)===""?Jt.orThunk(function(){return Ke.some(mt.getBody())}):Jt},Cn=oo.DOM,cr=function(mt){return function(Rt){return mt===Rt?-1:0}},zr=function(mt){return function(Rt){return mt.isBlock(Rt)||Ot(["BR","IMG","HR","INPUT"],Rt.nodeName)||mt.getContentEditable(Rt)==="false"}},Nr=function(mt,Rt,Jt){if(mr(mt)&&Rt>=0)return Ke.some(sr(mt,Rt));var gn=fr(Cn);return Ke.from(gn.backwards(mt,Rt,cr(mt),Jt)).map(function(Dn){return sr(Dn.container,Dn.container.data.length)})},Ar=function(mt,Rt,Jt){if(mr(mt)&&Rt>=mt.length)return Ke.some(sr(mt,Rt));var gn=fr(Cn);return Ke.from(gn.forwards(mt,Rt,cr(mt),Jt)).map(function(Dn){return sr(Dn.container,0)})},sn=function(mt,Rt,Jt){if(!mr(mt))return Ke.none();var gn=mt.textContent;if(Rt>=0&&Rt<=gn.length)return Ke.some(sr(mt,Rt));var Dn=fr(Cn);return Ke.from(Dn.backwards(mt,Rt,cr(mt),Jt)).bind(function(Bn){var rr=Bn.container.data;return sn(Bn.container,Rt+rr.length,Jt)})},Un=function(mt,Rt,Jt){if(!mr(mt))return Ke.none();var gn=mt.textContent;if(Rt<=gn.length)return Ke.some(sr(mt,Rt));var Dn=fr(Cn);return Ke.from(Dn.forwards(mt,Rt,cr(mt),Jt)).bind(function(Bn){return Un(Bn.container,Rt-gn.length,Jt)})},jn=function(mt,Rt,Jt,gn,Dn){var Bn=fr(mt,zr(mt));return Ke.from(Bn.backwards(Rt,Jt,gn,Dn))},pr=function(mt,Rt,Jt){if(mr(Rt)&&(Jt<0||Jt>Rt.data.length))return[];for(var gn=[Jt],Dn=Rt;Dn!==mt&&Dn.parentNode;){for(var Bn=Dn.parentNode,rr=0;rr<Bn.childNodes.length;rr++)if(Bn.childNodes[rr]===Dn){gn.push(rr);break}Dn=Bn}return Dn===mt?gn.reverse():[]},aa=function(mt,Rt,Jt,gn,Dn){var Bn=pr(mt,Rt,Jt),rr=pr(mt,gn,Dn);return{start:Bn,end:rr}},Ua=function(mt,Rt){var Jt=Rt.slice(),gn=Jt.pop(),Dn=Et(Jt,function(Bn,rr){return Bn.bind(function(Qr){return Ke.from(Qr.childNodes[rr])})},Ke.some(mt));return Dn.bind(function(Bn){return mr(Bn)&&(gn<0||gn>Bn.data.length)?Ke.none():Ke.some({node:Bn,offset:gn})})},jo=function(mt,Rt){return Ua(mt,Rt.start).bind(function(Jt){var gn=Jt.node,Dn=Jt.offset;return Ua(mt,Rt.end).map(function(Bn){var rr=Bn.node,Qr=Bn.offset,La=document.createRange();return La.setStart(gn,Dn),La.setEnd(rr,Qr),La})})},Xa=function(mt,Rt){return aa(mt,Rt.startContainer,Rt.startOffset,Rt.endContainer,Rt.endOffset)},Ka=function(mt,Rt,Jt){var gn=Ar(Rt,0,Rt);gn.each(function(Dn){var Bn=Dn.container;Un(Bn,Jt.start.length,Rt).each(function(rr){var Qr=mt.createRng();Qr.setStart(Bn,0),Qr.setEnd(rr.container,rr.offset),Rn(mt,Qr,function(La){return La===Rt})})})},Yo=function(mt,Rt){var Jt=mt.dom,gn=Rt.pattern,Dn=jo(Jt.getRoot(),Rt.range).getOrDie("Unable to resolve path range");return br(mt,Dn).each(function(Bn){gn.type==="block-format"?dr(gn.format,mt.formatter)&&mt.undoManager.transact(function(){Ka(mt.dom,Bn,gn),mt.formatter.apply(gn.format)}):gn.type==="block-command"&&mt.undoManager.transact(function(){Ka(mt.dom,Bn,gn),mt.execCommand(gn.cmd,!1,gn.value)})}),!0},Io=function(mt,Rt){var Jt=Rt.replace(Ga," ");return an(mt,function(gn){return Rt.indexOf(gn.start)===0||Jt.indexOf(gn.start)===0})},pi=function(mt,Rt){var Jt=mt.dom,gn=mt.selection.getRng();return br(mt,gn).filter(function(Dn){var Bn=Rr(mt),rr=Bn===""&&Jt.is(Dn,"body")||Jt.is(Dn,Bn);return Dn!==null&&rr}).bind(function(Dn){var Bn=Dn.textContent,rr=Io(Rt,Bn);return rr.map(function(Qr){return fo.trim(Bn).length===Qr.start.length?[]:[{pattern:Qr,range:aa(Jt.getRoot(),Dn,0,Dn,0)}]})}).getOr([])},oi=function(mt,Rt){if(Rt.length!==0){var Jt=mt.selection.getBookmark();xt(Rt,function(gn){return Yo(mt,gn)}),mt.selection.moveToBookmark(Jt)}},Si=0,Ii=function(mt){var Rt=new Date,Jt=Rt.getTime(),gn=Math.floor(Math.random()*1e9);return Si++,mt+"_"+gn+Si+String(Jt)},xi=function(mt,Rt,Jt){return Rt===""||mt.length>=Rt.length&&mt.substr(Jt,Jt+Rt.length)===Rt},Ei=function(mt,Rt){return xi(mt,Rt,mt.length-Rt.length)},Fo=function(mt,Rt){return mt.create("span",{"data-mce-type":"bookmark",id:Rt})},wo=function(mt,Rt){var Jt=mt.createRng();return Jt.setStartAfter(Rt.start),Jt.setEndBefore(Rt.end),Jt},ji=function(mt,Rt,Jt){var gn=jo(mt.getRoot(),Jt).getOrDie("Unable to resolve path range"),Dn=gn.startContainer,Bn=gn.endContainer,rr=gn.endOffset===0?Bn:Bn.splitText(gn.endOffset),Qr=gn.startOffset===0?Dn:Dn.splitText(gn.startOffset);return{prefix:Rt,end:rr.parentNode.insertBefore(Fo(mt,Rt+"-end"),rr),start:Qr.parentNode.insertBefore(Fo(mt,Rt+"-start"),Qr)}},Ca=function(mt,Rt,Jt){Tn(mt,mt.get(Rt.prefix+"-end"),Jt),Tn(mt,mt.get(Rt.prefix+"-start"),Jt)},Hu=function(mt,Rt,Jt){return function(gn,Dn){var Bn=gn.data,rr=Bn.substring(0,Dn),Qr=rr.lastIndexOf(Jt.charAt(Jt.length-1)),La=rr.lastIndexOf(Jt);return La!==-1?La+Jt.length:Qr!==-1?Qr+1:-1}},Fi=function(mt,Rt,Jt,gn){var Dn=Rt.start,Bn=jn(mt,gn.container,gn.offset,Hu(mt,Jt,Dn),Jt);return Bn.bind(function(rr){if(rr.offset>=Dn.length){var Qr=mt.createRng();return Qr.setStart(rr.container,rr.offset-Dn.length),Qr.setEnd(rr.container,rr.offset),Ke.some(Qr)}else{var La=rr.offset-Dn.length;return sn(rr.container,La,Jt).map(function(Fa){var Ha=mt.createRng();return Ha.setStart(Fa.container,Fa.offset),Ha.setEnd(rr.container,rr.offset),Ha}).filter(function(Fa){return Fa.toString()===Dn}).orThunk(function(){return Fi(mt,Rt,Jt,sr(rr.container,0))})}})},lu=function(mt,Rt,Jt,gn,Dn,Bn){if(Bn===void 0&&(Bn=!1),Rt.start.length===0&&!Bn){var rr=mt.createRng();return rr.setStart(Jt,gn),rr.setEnd(Jt,gn),Ke.some(rr)}return Nr(Jt,gn,Dn).bind(function(Qr){var La=Fi(mt,Rt,Dn,Qr);return La.bind(function(Fa){if(Bn){if(Fa.endContainer===Qr.container&&Fa.endOffset===Qr.offset)return Ke.none();if(Qr.offset===0&&Fa.endContainer.textContent.length===Fa.endOffset)return Ke.none()}return Ke.some(Fa)})})},Xu=function(mt,Rt,Jt){var gn=mt.dom,Dn=gn.getRoot(),Bn=Jt.pattern,rr=Jt.position.container,Qr=Jt.position.offset;return sn(rr,Qr-Jt.pattern.end.length,Rt).bind(function(La){var Fa=aa(Dn,La.container,La.offset,rr,Qr);if(Pr(Bn))return Ke.some({matches:[{pattern:Bn,startRng:Fa,endRng:Fa}],position:La});var Ha=nu(mt,Jt.remainingPatterns,La.container,La.offset,Rt),Ya=Ha.getOr({matches:[],position:La}),Lo=Ya.position,ki=lu(gn,Bn,Lo.container,Lo.offset,Rt,Ha.isNone());return ki.map(function(Du){var is=Xa(Dn,Du);return{matches:Ya.matches.concat([{pattern:Bn,startRng:is,endRng:Fa}]),position:sr(Du.startContainer,Du.startOffset)}})})},nu=function(mt,Rt,Jt,gn,Dn){var Bn=mt.dom;return Nr(Jt,gn,Bn.getRoot()).bind(function(rr){var Qr=Bn.createRng();Qr.setStart(Dn,0),Qr.setEnd(Jt,gn);for(var La=Qr.toString(),Fa=0;Fa<Rt.length;Fa++){var Ha=Rt[Fa];if(Ei(La,Ha.end)){var Ya=Rt.slice();Ya.splice(Fa,1);var Lo=Xu(mt,Dn,{pattern:Ha,remainingPatterns:Ya,position:rr});if(Lo.isSome())return Lo}}return Ke.none()})},hu=function(mt,Rt,Jt){mt.selection.setRng(Jt),Rt.type==="inline-format"?xt(Rt.format,function(gn){mt.formatter.apply(gn)}):mt.execCommand(Rt.cmd,!1,Rt.value)},Yu=function(mt,Rt,Jt,gn){var Dn=wo(mt.dom,Jt);Rn(mt.dom,Dn,gn),hu(mt,Rt,Dn)},Ss=function(mt,Rt,Jt,gn,Dn){var Bn=mt.dom,rr=wo(Bn,gn),Qr=wo(Bn,Jt);Rn(Bn,Qr,Dn),Rn(Bn,rr,Dn);var La={prefix:Jt.prefix,start:Jt.end,end:gn.start},Fa=wo(Bn,La);hu(mt,Rt,Fa)},qt=function(mt,Rt){var Jt=Ii("mce_textpattern"),gn=ut(Rt,function(Dn,Bn){var rr=ji(mt,Jt+("_end"+Dn.length),Bn.endRng);return Dn.concat([C(C({},Bn),{endMarker:rr})])},[]);return ut(gn,function(Dn,Bn){var rr=gn.length-Dn.length-1,Qr=Pr(Bn.pattern)?Bn.endMarker:ji(mt,Jt+("_start"+rr),Bn.startRng);return Dn.concat([C(C({},Bn),{startMarker:Qr})])},[])},xn=function(mt,Rt,Jt){var gn=mt.selection.getRng();return gn.collapsed===!1?[]:br(mt,gn).bind(function(Dn){var Bn=gn.startOffset-(Jt?1:0);return nu(mt,Rt,gn.startContainer,Bn,Dn)}).fold(function(){return[]},function(Dn){return Dn.matches})},Gt=function(mt,Rt){if(Rt.length!==0){var Jt=mt.dom,gn=mt.selection.getBookmark(),Dn=qt(Jt,Rt);xt(Dn,function(Bn){var rr=Jt.getParent(Bn.startMarker.start,Jt.isBlock),Qr=function(La){return La===rr};Pr(Bn.pattern)?Yu(mt,Bn.pattern,Bn.endMarker,Qr):Ss(mt,Bn.pattern,Bn.startMarker,Bn.endMarker,Qr),Ca(Jt,Bn.endMarker,Qr),Ca(Jt,Bn.startMarker,Qr)}),mt.selection.moveToBookmark(gn)}},Pn=function(mt,Rt){if(!mt.selection.isCollapsed())return!1;var Jt=xn(mt,Rt.inlinePatterns,!1),gn=pi(mt,Rt.blockPatterns);return gn.length>0||Jt.length>0?(mt.undoManager.add(),mt.undoManager.extra(function(){mt.execCommand("mceInsertNewLine")},function(){mt.insertContent(pa,{preserve_zwsp:!0}),Gt(mt,Jt),oi(mt,gn);var Dn=mt.selection.getRng(),Bn=Nr(Dn.startContainer,Dn.startOffset,mt.dom.getRoot());mt.execCommand("mceInsertNewLine"),Bn.each(function(rr){var Qr=rr.container;Qr.data.charAt(rr.offset-1)===pa&&(Qr.deleteData(rr.offset-1,1),Tn(mt.dom,Qr.parentNode,function(La){return La===mt.dom.getRoot()}))})}),!0):!1},Br=function(mt,Rt){var Jt=xn(mt,Rt.inlinePatterns,!0);Jt.length>0&&mt.undoManager.transact(function(){Gt(mt,Jt)})},ta=function(mt,Rt,Jt){for(var gn=0;gn<mt.length;gn++)if(Jt(mt[gn],Rt))return!0;return!1},$t=function(mt,Rt){return ta(mt,Rt,function(Jt,gn){return Jt===gn.keyCode&&oa.modifierPressed(gn)===!1})},Zt=function(mt,Rt){return ta(mt,Rt,function(Jt,gn){return Jt.charCodeAt(0)===gn.charCode})},In=function(mt,Rt){var Jt=[",",".",";",":","!","?"],gn=[32];mt.on("keydown",function(Dn){Dn.keyCode===13&&!oa.modifierPressed(Dn)&&Pn(mt,Rt.get())&&Dn.preventDefault()},!0),mt.on("keyup",function(Dn){$t(gn,Dn)&&Br(mt,Rt.get())}),mt.on("keypress",function(Dn){Zt(Jt,Dn)&&Yr.setEditorTimeout(mt,function(){Br(mt,Rt.get())})})};function Qn(){y.add("textpattern",function(mt){var Rt=v(Mn(mt));return In(mt,Rt),Fn(Rt)})}Qn()})();(function(){var v=function(j){var x=j,qe=function(){return x},Be=function(De){x=De};return{get:qe,set:Be}},y=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=function(j,x){j.fire("VisualBlocks",{state:x})},A=function(j,x,qe){var Be=j.dom;Be.toggleClass(j.getBody(),"mce-visualblocks"),qe.set(!qe.get()),C(j,qe.get())},We=function(j,x,qe){j.addCommand("mceVisualBlocks",function(){A(j,x,qe)})},Ge=function(j){return j.getParam("visualblocks_default_state",!1,"boolean")},Xe=function(j,x,qe){j.on("PreviewFormats AfterPreviewFormats",function(Be){qe.get()&&j.dom.toggleClass(j.getBody(),"mce-visualblocks",Be.type==="afterpreviewformats")}),j.on("init",function(){Ge(j)&&A(j,x,qe)})},Ve=function(j,x){return function(qe){qe.setActive(x.get());var Be=function(De){return qe.setActive(De.state)};return j.on("VisualBlocks",Be),function(){return j.off("VisualBlocks",Be)}}},P=function(j,x){var qe=function(){return j.execCommand("mceVisualBlocks")};j.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:qe,onSetup:Ve(j,x)}),j.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:qe,onSetup:Ve(j,x)})};function Te(){y.add("visualblocks",function(j,x){var qe=v(!1);We(j,x,qe),P(j,qe),Xe(j,x,qe)})}Te()})();(function(){var v=function(sn){var Un=sn,jn=function(){return Un},pr=function(aa){Un=aa};return{get:jn,set:pr}},y=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=function(sn){var Un=function(){return sn.get()};return{isEnabled:Un}},A=function(sn,Un){return sn.fire("VisualChars",{state:Un})},We=function(sn){var Un=typeof sn;return sn===null?"null":Un==="object"&&(Array.prototype.isPrototypeOf(sn)||sn.constructor&&sn.constructor.name==="Array")?"array":Un==="object"&&(String.prototype.isPrototypeOf(sn)||sn.constructor&&sn.constructor.name==="String")?"string":Un},Ge=function(sn){return function(Un){return We(Un)===sn}},Xe=function(sn){return function(Un){return typeof Un===sn}},Ve=Ge("string"),P=Xe("boolean"),Te=Xe("number"),j=function(){},x=function(sn){return function(){return sn}},qe=function(sn){return sn},Be=x(!1),De=x(!0),He=function(){return Ye},Ye=function(){var sn=function(pr){return pr()},Un=qe,jn={fold:function(pr,aa){return pr()},isSome:Be,isNone:De,getOr:Un,getOrThunk:sn,getOrDie:function(pr){throw new Error(pr||"error: getOrDie called on none.")},getOrNull:x(null),getOrUndefined:x(void 0),or:Un,orThunk:sn,map:He,each:j,bind:He,exists:Be,forall:De,filter:function(){return He()},toArray:function(){return[]},toString:x("none()")};return jn}(),st=function(sn){var Un=x(sn),jn=function(){return aa},pr=function(Ua){return Ua(sn)},aa={fold:function(Ua,jo){return jo(sn)},isSome:De,isNone:Be,getOr:Un,getOrThunk:Un,getOrDie:Un,getOrNull:Un,getOrUndefined:Un,or:jn,orThunk:jn,map:function(Ua){return st(Ua(sn))},each:function(Ua){Ua(sn)},bind:pr,exists:pr,forall:pr,filter:function(Ua){return Ua(sn)?aa:Ye},toArray:function(){return[sn]},toString:function(){return"some("+sn+")"}};return aa},rt=function(sn){return sn==null?Ye:st(sn)},Ke={some:st,none:He,from:rt},tt=function(sn,Un){for(var jn=sn.length,pr=new Array(jn),aa=0;aa<jn;aa++){var Ua=sn[aa];pr[aa]=Un(Ua,aa)}return pr},at=function(sn,Un){for(var jn=0,pr=sn.length;jn<pr;jn++){var aa=sn[jn];Un(aa,jn)}},et=function(sn,Un){for(var jn=[],pr=0,aa=sn.length;pr<aa;pr++){var Ua=sn[pr];Un(Ua,pr)&&jn.push(Ua)}return jn},Ot=Object.keys,wt=function(sn,Un){for(var jn=Ot(sn),pr=0,aa=jn.length;pr<aa;pr++){var Ua=jn[pr],jo=sn[Ua];Un(jo,Ua)}};typeof window!="undefined"||Function("return this;")();var xt=3,it=function(sn){return sn.dom.nodeType},yt=function(sn){return sn.dom.nodeValue},ut=function(sn){return function(Un){return it(Un)===sn}},Et=ut(xt),Ht=function(sn,Un,jn){if(Ve(jn)||P(jn)||Te(jn))sn.setAttribute(Un,jn+"");else throw new Error("Attribute value was not simple")},an=function(sn,Un,jn){Ht(sn.dom,Un,jn)},Mt=function(sn,Un){var jn=sn.dom.getAttribute(Un);return jn===null?void 0:jn},vn=function(sn,Un){sn.dom.removeAttribute(Un)},Wn=function(sn,Un){var jn=Mt(sn,Un);return jn===void 0||jn===""?[]:jn.split(" ")},$e=function(sn,Un,jn){var pr=Wn(sn,Un),aa=pr.concat([jn]);return an(sn,Un,aa.join(" ")),!0},Dt=function(sn,Un,jn){var pr=et(Wn(sn,Un),function(aa){return aa!==jn});return pr.length>0?an(sn,Un,pr.join(" ")):vn(sn,Un),!1},vt=function(sn){return sn.dom.classList!==void 0},nn=function(sn){return Wn(sn,"class")},_t=function(sn,Un){return $e(sn,"class",Un)},Nt=function(sn,Un){return Dt(sn,"class",Un)},ln=function(sn,Un){vt(sn)?sn.dom.classList.add(Un):_t(sn,Un)},on=function(sn){var Un=vt(sn)?sn.dom.classList:nn(sn);Un.length===0&&vn(sn,"class")},dt=function(sn,Un){if(vt(sn)){var jn=sn.dom.classList;jn.remove(Un)}else Nt(sn,Un);on(sn)},ur=function(sn,Un){var jn=Un||document,pr=jn.createElement("div");if(pr.innerHTML=sn,!pr.hasChildNodes()||pr.childNodes.length>1)throw new Error("HTML must have a single root node");return Nn(pr.childNodes[0])},dn=function(sn,Un){var jn=Un||document,pr=jn.createElement(sn);return Nn(pr)},en=function(sn,Un){var jn=Un||document,pr=jn.createTextNode(sn);return Nn(pr)},Nn=function(sn){if(sn==null)throw new Error("Node cannot be null or undefined");return{dom:sn}},fn=function(sn,Un,jn){return Ke.from(sn.dom.elementFromPoint(Un,jn)).map(Nn)},cn={fromHtml:ur,fromTag:dn,fromText:en,fromDom:Nn,fromPoint:fn},hn={" ":"nbsp","­":"shy"},er=function(sn,Un){var jn="";return wt(sn,function(pr,aa){jn+=aa}),new RegExp("["+jn+"]",Un?"g":"")},Fn=function(sn){var Un="";return wt(sn,function(jn){Un&&(Un+=","),Un+="span.mce-"+jn}),Un},Gn=er(hn),va=er(hn,!0),tn=Fn(hn),Mn="mce-nbsp",Rr=function(sn){return'<span data-mce-bogus="1" class="mce-'+hn[sn]+'">'+sn+"</span>"},Yr=function(sn){var Un=yt(sn);return Et(sn)&&Un!==void 0&&Gn.test(Un)},oa=function(sn,Un){var jn=[],pr=sn.dom,aa=tt(pr.childNodes,cn.fromDom);return at(aa,function(Ua){Un(Ua)&&(jn=jn.concat([Ua])),jn=jn.concat(oa(Ua,Un))}),jn},pa=function(sn,Un){for(;sn.parentNode;){if(sn.parentNode===Un)return sn;sn=sn.parentNode}},Ga=function(sn){return sn.replace(va,Rr)},fo=function(sn){return sn.nodeName.toLowerCase()==="span"&&sn.classList.contains("mce-nbsp-wrap")},oo=function(sn,Un){var jn=oa(cn.fromDom(Un),Yr);at(jn,function(pr){var aa=pr.dom.parentNode;if(fo(aa))ln(cn.fromDom(aa),Mn);else{for(var Ua=Ga(sn.dom.encode(yt(pr))),jo=sn.dom.create("div",null,Ua),Xa=void 0;Xa=jo.lastChild;)sn.dom.insertAfter(Xa,pr.dom);sn.dom.remove(pr.dom)}})},fr=function(sn,Un){var jn=sn.dom.select(tn,Un);at(jn,function(pr){fo(pr)?dt(cn.fromDom(pr),Mn):sn.dom.remove(pr,!0)})},sr=function(sn){var Un=sn.getBody(),jn=sn.selection.getBookmark(),pr=pa(sn.selection.getNode(),Un);pr=pr!==void 0?pr:Un,fr(sn,pr),oo(sn,pr),sn.selection.moveToBookmark(jn)},mr=function(sn,Un){A(sn,Un.get());var jn=sn.getBody();Un.get()===!0?oo(sn,jn):fr(sn,jn)},Tn=function(sn,Un){Un.set(!Un.get());var jn=sn.selection.getBookmark();mr(sn,Un),sn.selection.moveToBookmark(jn)},Rn=function(sn,Un){sn.addCommand("mceVisualChars",function(){Tn(sn,Un)})},dr=function(sn){return sn.getParam("visualchars_default_state",!1)},Pr=function(sn){return sn.getParam("forced_root_block")!==!1},br=function(sn,Un){sn.on("init",function(){mr(sn,Un)})},Cn=tinymce.util.Tools.resolve("tinymce.util.Delay"),cr=function(sn,Un){var jn=Cn.debounce(function(){sr(sn)},300);Pr(sn)&&sn.on("keydown",function(pr){Un.get()===!0&&(pr.keyCode===13?sr(sn):jn())}),sn.on("remove",jn.stop)},zr=function(sn,Un){return function(jn){jn.setActive(Un.get());var pr=function(aa){return jn.setActive(aa.state)};return sn.on("VisualChars",pr),function(){return sn.off("VisualChars",pr)}}},Nr=function(sn,Un){var jn=function(){return sn.execCommand("mceVisualChars")};sn.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:jn,onSetup:zr(sn,Un)}),sn.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:jn,onSetup:zr(sn,Un)})};function Ar(){y.add("visualchars",function(sn){var Un=v(dr(sn));return Rn(sn,Un),Nr(sn,Un),cr(sn,Un),br(sn,Un),C(Un)})}Ar()})();(function(){var v=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(fn){return fn},C=function(){return C=Object.assign||function(cn){for(var hn,er=1,Fn=arguments.length;er<Fn;er++){hn=arguments[er];for(var Gn in hn)Object.prototype.hasOwnProperty.call(hn,Gn)&&(cn[Gn]=hn[Gn])}return cn},C.apply(this,arguments)},A="\uFEFF",We=function(fn){return fn.replace(/\uFEFF/g,"")},Ge=function(fn,cn){for(var hn=fn.length,er=new Array(hn),Fn=0;Fn<hn;Fn++){var Gn=fn[Fn];er[Fn]=cn(Gn,Fn)}return er},Xe="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",Ve={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:Xe},P={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},Te=[new RegExp(Ve.aletter),new RegExp(Ve.midnumlet),new RegExp(Ve.midletter),new RegExp(Ve.midnum),new RegExp(Ve.numeric),new RegExp(Ve.cr),new RegExp(Ve.lf),new RegExp(Ve.newline),new RegExp(Ve.extend),new RegExp(Ve.format),new RegExp(Ve.katakana),new RegExp(Ve.extendnumlet),new RegExp("@")],j="",x=new RegExp("^"+Ve.punctuation+"$"),qe=/^\s+$/,Be=Te,De=P.OTHER,He=function(fn){for(var cn=De,hn=Be.length,er=0;er<hn;++er){var Fn=Be[er];if(Fn&&Fn.test(fn)){cn=er;break}}return cn},Ye=function(fn){var cn={};return function(hn){if(cn[hn])return cn[hn];var er=fn(hn);return cn[hn]=er,er}},st=function(fn){var cn=Ye(He);return Ge(fn,cn)},rt=function(fn,cn){var hn=fn[cn],er=fn[cn+1];if(cn<0||cn>fn.length-1&&cn!==0||hn===P.ALETTER&&er===P.ALETTER)return!1;var Fn=fn[cn+2];if(hn===P.ALETTER&&(er===P.MIDLETTER||er===P.MIDNUMLET||er===P.AT)&&Fn===P.ALETTER)return!1;var Gn=fn[cn-1];return(hn===P.MIDLETTER||hn===P.MIDNUMLET||er===P.AT)&&er===P.ALETTER&&Gn===P.ALETTER||(hn===P.NUMERIC||hn===P.ALETTER)&&(er===P.NUMERIC||er===P.ALETTER)||(hn===P.MIDNUM||hn===P.MIDNUMLET)&&er===P.NUMERIC&&Gn===P.NUMERIC||hn===P.NUMERIC&&(er===P.MIDNUM||er===P.MIDNUMLET)&&Fn===P.NUMERIC||hn===P.EXTEND||hn===P.FORMAT||Gn===P.EXTEND||Gn===P.FORMAT||er===P.EXTEND||er===P.FORMAT||hn===P.CR&&er===P.LF?!1:hn===P.NEWLINE||hn===P.CR||hn===P.LF||er===P.NEWLINE||er===P.CR||er===P.LF?!0:!(hn===P.KATAKANA&&er===P.KATAKANA||er===P.EXTENDNUMLET&&(hn===P.ALETTER||hn===P.NUMERIC||hn===P.KATAKANA||hn===P.EXTENDNUMLET)||hn===P.EXTENDNUMLET&&(er===P.ALETTER||er===P.NUMERIC||er===P.KATAKANA)||hn===P.AT)},Ke=j,tt=qe,at=x,et=function(fn){return fn==="http"||fn==="https"},Ot=function(fn,cn){var hn;for(hn=cn;hn<fn.length&&!tt.test(fn[hn]);hn++);return hn},wt=function(fn,cn){var hn=Ot(fn,cn+1),er=fn.slice(cn+1,hn).join(Ke);return er.substr(0,3)==="://"?hn:cn},xt=function(fn,cn,hn,er){for(var Fn=[],Gn=[],va=0;va<hn.length;++va)if(Gn.push(fn[va]),rt(hn,va)){var tn=cn[va];if((er.includeWhitespace||!tt.test(tn))&&(er.includePunctuation||!at.test(tn))){var Mn=va-Gn.length+1,Rr=va+1,Yr=cn.slice(Mn,Rr).join(Ke);if(et(Yr)){var oa=wt(cn,va),pa=fn.slice(Rr,oa);Array.prototype.push.apply(Gn,pa),va=oa}Fn.push(Gn)}Gn=[]}return Fn},it=function(){return{includeWhitespace:!1,includePunctuation:!1}},yt=function(fn,cn,hn){hn=C(C({},it()),hn);for(var er=[],Fn=[],Gn=0;Gn<fn.length;Gn++){var va=cn(fn[Gn]);va!==A&&(er.push(fn[Gn]),Fn.push(va))}var tn=st(Fn);return xt(er,Fn,tn,hn)},ut=yt,Et=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ht=function(fn,cn){for(var hn=cn.getBlockElements(),er=cn.getShortEndedElements(),Fn=function(Mn){return hn[Mn.nodeName]||er[Mn.nodeName]},Gn=[],va="",tn=new Et(fn,fn);fn=tn.next();)fn.nodeType===3?va+=We(fn.data):Fn(fn)&&va.length&&(Gn.push(va),va="");return va.length&&Gn.push(va),Gn},an=function(fn){return fn.replace(/\u200B/g,"")},Mt=function(fn){return fn.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},vn=function(fn,cn){var hn=an(Ht(fn,cn).join(`
`));return ut(hn.split(""),y).length},Wn=function(fn,cn){var hn=Ht(fn,cn).join("");return Mt(hn)},$e=function(fn,cn){var hn=Ht(fn,cn).join("").replace(/\s/g,"");return Mt(hn)},Dt=function(fn,cn){return function(){return cn(fn.getBody(),fn.schema)}},vt=function(fn,cn){return function(){return cn(fn.selection.getRng().cloneContents(),fn.schema)}},nn=function(fn){return Dt(fn,vn)},_t=function(fn){return{body:{getWordCount:nn(fn),getCharacterCount:Dt(fn,Wn),getCharacterCountWithoutSpaces:Dt(fn,$e)},selection:{getWordCount:vt(fn,vn),getCharacterCount:vt(fn,Wn),getCharacterCountWithoutSpaces:vt(fn,$e)},getCount:nn(fn)}},Nt=function(fn,cn){fn.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(cn.body.getWordCount()),String(cn.selection.getWordCount())],["Characters (no spaces)",String(cn.body.getCharacterCountWithoutSpaces()),String(cn.selection.getCharacterCountWithoutSpaces())],["Characters",String(cn.body.getCharacterCount()),String(cn.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},ln=function(fn,cn){fn.addCommand("mceWordCount",function(){return Nt(fn,cn)})},on=tinymce.util.Tools.resolve("tinymce.util.Delay"),dt=function(fn,cn){fn.fire("wordCountUpdate",{wordCount:{words:cn.body.getWordCount(),characters:cn.body.getCharacterCount(),charactersWithoutSpaces:cn.body.getCharacterCountWithoutSpaces()}})},ur=function(fn,cn){dt(fn,cn)},dn=function(fn,cn,hn){var er=on.debounce(function(){return ur(fn,cn)},hn);fn.on("init",function(){ur(fn,cn),on.setEditorTimeout(fn,function(){fn.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",er)},0)})},en=function(fn){var cn=function(){return fn.execCommand("mceWordCount")};fn.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:cn}),fn.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:cn})};function Nn(fn){fn===void 0&&(fn=300),v.add("wordcount",function(cn){var hn=_t(cn);return ln(cn,hn),en(cn),dn(cn,hn,fn),hn})}Nn()})();const _sfc_main$5=defineComponent({name:"TinymceImageUpload",__name:"ImgUpload",props:ua({fullscreen:{type:Boolean},disabled:{type:Boolean,default:!1}},uploadContainerProps),emits:["uploading","done","error"],setup(v,{emit:y}){const C=v;function A(x){return no(this,null,function*(){var Be;const{api:qe}=C;if(!qe||!isFunction$1(qe))return warn();try{const De=yield(Be=C.api)==null?void 0:Be.call(C,{data:ua({},C.uploadParams||{}),file:x.file,name:C.name,filename:C.filename});x.onSuccess({data:De})}catch(De){x.onError(De)}})}const We=y;let Ge=!1;const{uploadUrl:Xe}=useGlobSetting(),{t:Ve}=useI18n(),{prefixCls:P}=useDesign("tinymce-img-upload"),Te=computed(()=>{const{disabled:x}=C;return{disabled:x}});function j(x){var Ye;const qe=x.file,Be=qe==null?void 0:qe.status,De=(Ye=qe==null?void 0:qe.response)==null?void 0:Ye.data,He=qe==null?void 0:qe.name;Be==="uploading"?Ge||(We("uploading",He),Ge=!0):Be==="done"?(We("done",He,De),Ge=!1):Be==="error"&&(We("error"),Ge=!1)}return(x,qe)=>{const Be=resolveComponent("a-button");return openBlock(),createElementBlock("div",{class:normalizeClass([unref(P),{fullscreen:v.fullscreen}])},[createVNode(unref(Upload),{name:"file",onChange:j,action:unref(Xe),showUploadList:!1,accept:".jpg,.jpeg,.gif,.png,.webp","custom-request":A},{default:withCtx(()=>[createVNode(Be,mergeProps({type:"primary"},ua({},Te.value)),{default:withCtx(()=>[createTextVNode(toDisplayString(unref(Ve)("component.upload.imgUpload")),1)]),_:1},16)]),_:1},8,["action"])],2)}}}),ImgUpload_vue_vue_type_style_index_0_scoped_be02c210_lang="",ImgUpload=_export_sfc(_sfc_main$5,[["__scopeId","data-v-be02c210"]]),plugins=["advlist anchor autolink autosave code codesample  directionality  fullscreen hr insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus  template  textpattern visualblocks visualchars wordcount"],toolbar=["fontsizeselect lineheight searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link  preview anchor pagebreak insertdatetime media  forecolor backcolor fullscreen"],validEvents=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],isValidKey=v=>validEvents.indexOf(v)!==-1,bindHandlers=(v,y,C)=>{Object.keys(y).filter(isValidKey).forEach(A=>{const We=y[A];typeof We=="function"&&(A==="onInit"?We(v,C):C.on(A.substring(2),Ge=>We(Ge,C)))})},_hoisted_1$3=["id"],_sfc_main$4=defineComponent({name:"Tinymce",inheritAttrs:!1,__name:"Editor",props:{options:{type:Object,default:()=>({})},value:{type:String},toolbar:{type:Array,default:toolbar},plugins:{type:Array,default:plugins},modelValue:{type:String},height:{type:[Number,String],required:!1,default:400},width:{type:[Number,String],required:!1,default:"auto"},showImageUpload:{type:Boolean,default:!0}},emits:["change","update:modelValue","inited","init-error"],setup(v,{emit:y}){const C=v,A=y,We=useAttrs$1(),Ge=ref(null),Xe=ref(!1),Ve=ref(buildShortUUID("tiny-vue")),P=ref(null),{prefixCls:Te}=useDesign("tinymce-container"),j=useAppStore(),x=computed(()=>{const wt=C.width;return isNumber$1(wt)?`${wt}px`:wt}),qe=computed(()=>j.getDarkMode==="light"?"oxide":"oxide-dark"),Be=computed(()=>{const wt=useLocale().getLocale.value;return["zh_CN","en"].includes(wt)?wt:"zh_CN"}),De=computed(()=>{const{height:wt,options:xt,toolbar:it,plugins:yt}=C,ut={}.VITE_PUBLIC_PATH||"";return Mu(ua({selector:`#${unref(Ve)}`,height:wt,toolbar:it,menubar:"file edit insert view format table",plugins:yt,language_url:ut+"/resource/tinymce/langs/"+Be.value+".js",language:Be.value,branding:!1,default_link_target:"_blank",link_title:!1,object_resizing:!1,auto_focus:!0,skin:qe.value,skin_url:ut+"/resource/tinymce/skins/ui/"+qe.value,content_css:ut+"/resource/tinymce/skins/ui/"+qe.value+"/content.min.css"},xt),{setup:Et=>{Ge.value=Et,Et.on("init",Ht=>rt(Ht))}})}),He=computed(()=>{const{options:wt}=C,xt=wt&&Reflect.get(wt,"readonly"),it=unref(Ge);return it&&it.setMode(xt?"readonly":"design"),xt!=null?xt:!1});watch(()=>We.disabled,()=>{const wt=unref(Ge);wt&&wt.setMode(We.disabled?"readonly":"design")}),onMountedOrActivated(()=>{De.value.inline||(Ve.value=buildShortUUID("tiny-vue")),nextTick(()=>{setTimeout(()=>{st()},30)})}),onBeforeUnmount(()=>{Ye()}),onDeactivated(()=>{Ye()});function Ye(){var wt;tinymce$1!==null&&((wt=tinymce$1==null?void 0:tinymce$1.remove)==null||wt.call(tinymce$1,unref(De).selector))}function st(){const wt=unref(P);wt&&(wt.style.visibility=""),tinymce$1.init(unref(De)).then(xt=>{A("inited",xt)}).catch(xt=>{A("init-error",xt)})}function rt(wt){const xt=unref(Ge);if(!xt)return;const it=C.modelValue||"";xt.setContent(it),tt(xt),bindHandlers(wt,We,unref(Ge))}function Ke(wt,xt,it){wt&&typeof xt=="string"&&xt!==it&&xt!==wt.getContent({format:We.outputFormat})&&wt.setContent(xt)}function tt(wt){const xt=We.modelEvents?We.modelEvents:null,it=Array.isArray(xt)?xt.join(" "):xt;watch(()=>C.modelValue,(yt,ut)=>{Ke(wt,yt,ut)}),watch(()=>C.value,(yt,ut)=>{Ke(wt,yt,ut)},{immediate:!0}),wt.on(it||"change keyup undo redo",()=>{const yt=wt.getContent({format:We.outputFormat});A("update:modelValue",yt),A("change",yt)}),wt.on("FullscreenStateChanged",yt=>{Xe.value=yt.state})}function at(wt){var yt;const xt=unref(Ge);if(!xt)return;xt.execCommand("mceInsertContent",!1,Ot(wt));const it=(yt=xt==null?void 0:xt.getContent())!=null?yt:"";Ke(xt,it)}function et(wt,xt){var Et,Ht;const it=unref(Ge);if(!it)return;const yt=(Et=it==null?void 0:it.getContent())!=null?Et:"",ut=(Ht=yt==null?void 0:yt.replace(Ot(wt),`<img src="${xt}" style="max-width: 80%"/>`))!=null?Ht:"";Ke(it,ut)}function Ot(wt){return`[uploading:${wt}]`}return(wt,xt)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(Te)),style:normalizeStyle({width:x.value})},[v.showImageUpload?withDirectives((openBlock(),createBlock(ImgUpload,{key:0,fullscreen:Xe.value,onUploading:at,onDone:et,disabled:He.value,api:unref(uploadApi)},null,8,["fullscreen","disabled","api"])),[[vShow,Ge.value]]):createCommentVNode("",!0),De.value.inline?renderSlot(wt.$slots,"default",{key:2}):(openBlock(),createElementBlock("textarea",{key:1,id:Ve.value,ref_key:"elRef",ref:P,style:{visibility:"hidden"}},null,8,_hoisted_1$3))],6))}}),Editor_vue_vue_type_style_index_0_lang="",Tinymce=withInstall(_sfc_main$4);var index_min={exports:{}};(function(v,y){(function(C,A){v.exports=A()})(commonjsGlobal,()=>(()=>{var C={471:Xe=>{var Ve=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},P=-1;Ve.Diff=function(Te,j){return[Te,j]},Ve.prototype.diff_main=function(Te,j,x,qe){qe===void 0&&(qe=this.Diff_Timeout<=0?Number.MAX_VALUE:new Date().getTime()+1e3*this.Diff_Timeout);var Be=qe;if(Te==null||j==null)throw new Error("Null input. (diff_main)");if(Te==j)return Te?[new Ve.Diff(0,Te)]:[];x===void 0&&(x=!0);var De=x,He=this.diff_commonPrefix(Te,j),Ye=Te.substring(0,He);Te=Te.substring(He),j=j.substring(He),He=this.diff_commonSuffix(Te,j);var st=Te.substring(Te.length-He);Te=Te.substring(0,Te.length-He),j=j.substring(0,j.length-He);var rt=this.diff_compute_(Te,j,De,Be);return Ye&&rt.unshift(new Ve.Diff(0,Ye)),st&&rt.push(new Ve.Diff(0,st)),this.diff_cleanupMerge(rt),rt},Ve.prototype.diff_compute_=function(Te,j,x,qe){var Be;if(!Te)return[new Ve.Diff(1,j)];if(!j)return[new Ve.Diff(P,Te)];var De=Te.length>j.length?Te:j,He=Te.length>j.length?j:Te,Ye=De.indexOf(He);if(Ye!=-1)return Be=[new Ve.Diff(1,De.substring(0,Ye)),new Ve.Diff(0,He),new Ve.Diff(1,De.substring(Ye+He.length))],Te.length>j.length&&(Be[0][0]=Be[2][0]=P),Be;if(He.length==1)return[new Ve.Diff(P,Te),new Ve.Diff(1,j)];var st=this.diff_halfMatch_(Te,j);if(st){var rt=st[0],Ke=st[1],tt=st[2],at=st[3],et=st[4],Ot=this.diff_main(rt,tt,x,qe),wt=this.diff_main(Ke,at,x,qe);return Ot.concat([new Ve.Diff(0,et)],wt)}return x&&Te.length>100&&j.length>100?this.diff_lineMode_(Te,j,qe):this.diff_bisect_(Te,j,qe)},Ve.prototype.diff_lineMode_=function(Te,j,x){var qe=this.diff_linesToChars_(Te,j);Te=qe.chars1,j=qe.chars2;var Be=qe.lineArray,De=this.diff_main(Te,j,!1,x);this.diff_charsToLines_(De,Be),this.diff_cleanupSemantic(De),De.push(new Ve.Diff(0,""));for(var He=0,Ye=0,st=0,rt="",Ke="";He<De.length;){switch(De[He][0]){case 1:st++,Ke+=De[He][1];break;case P:Ye++,rt+=De[He][1];break;case 0:if(Ye>=1&&st>=1){De.splice(He-Ye-st,Ye+st),He=He-Ye-st;for(var tt=this.diff_main(rt,Ke,!1,x),at=tt.length-1;at>=0;at--)De.splice(He,0,tt[at]);He+=tt.length}st=0,Ye=0,rt="",Ke=""}He++}return De.pop(),De},Ve.prototype.diff_bisect_=function(Te,j,x){for(var qe=Te.length,Be=j.length,De=Math.ceil((qe+Be)/2),He=De,Ye=2*De,st=new Array(Ye),rt=new Array(Ye),Ke=0;Ke<Ye;Ke++)st[Ke]=-1,rt[Ke]=-1;st[He+1]=0,rt[He+1]=0;for(var tt=qe-Be,at=tt%2!=0,et=0,Ot=0,wt=0,xt=0,it=0;it<De&&!(new Date().getTime()>x);it++){for(var yt=-it+et;yt<=it-Ot;yt+=2){for(var ut=He+yt,Et=(Wn=yt==-it||yt!=it&&st[ut-1]<st[ut+1]?st[ut+1]:st[ut-1]+1)-yt;Wn<qe&&Et<Be&&Te.charAt(Wn)==j.charAt(Et);)Wn++,Et++;if(st[ut]=Wn,Wn>qe)Ot+=2;else if(Et>Be)et+=2;else if(at&&(Mt=He+tt-yt)>=0&&Mt<Ye&&rt[Mt]!=-1&&Wn>=(an=qe-rt[Mt]))return this.diff_bisectSplit_(Te,j,Wn,Et,x)}for(var Ht=-it+wt;Ht<=it-xt;Ht+=2){for(var an,Mt=He+Ht,vn=(an=Ht==-it||Ht!=it&&rt[Mt-1]<rt[Mt+1]?rt[Mt+1]:rt[Mt-1]+1)-Ht;an<qe&&vn<Be&&Te.charAt(qe-an-1)==j.charAt(Be-vn-1);)an++,vn++;if(rt[Mt]=an,an>qe)xt+=2;else if(vn>Be)wt+=2;else if(!at&&(ut=He+tt-Ht)>=0&&ut<Ye&&st[ut]!=-1){var Wn;if(Et=He+(Wn=st[ut])-ut,Wn>=(an=qe-an))return this.diff_bisectSplit_(Te,j,Wn,Et,x)}}}return[new Ve.Diff(P,Te),new Ve.Diff(1,j)]},Ve.prototype.diff_bisectSplit_=function(Te,j,x,qe,Be){var De=Te.substring(0,x),He=j.substring(0,qe),Ye=Te.substring(x),st=j.substring(qe),rt=this.diff_main(De,He,!1,Be),Ke=this.diff_main(Ye,st,!1,Be);return rt.concat(Ke)},Ve.prototype.diff_linesToChars_=function(Te,j){var x=[],qe={};function Be(Ye){for(var st="",rt=0,Ke=-1,tt=x.length;Ke<Ye.length-1;){(Ke=Ye.indexOf(`
`,rt))==-1&&(Ke=Ye.length-1);var at=Ye.substring(rt,Ke+1);(qe.hasOwnProperty?qe.hasOwnProperty(at):qe[at]!==void 0)?st+=String.fromCharCode(qe[at]):(tt==De&&(at=Ye.substring(rt),Ke=Ye.length),st+=String.fromCharCode(tt),qe[at]=tt,x[tt++]=at),rt=Ke+1}return st}x[0]="";var De=4e4,He=Be(Te);return De=65535,{chars1:He,chars2:Be(j),lineArray:x}},Ve.prototype.diff_charsToLines_=function(Te,j){for(var x=0;x<Te.length;x++){for(var qe=Te[x][1],Be=[],De=0;De<qe.length;De++)Be[De]=j[qe.charCodeAt(De)];Te[x][1]=Be.join("")}},Ve.prototype.diff_commonPrefix=function(Te,j){if(!Te||!j||Te.charAt(0)!=j.charAt(0))return 0;for(var x=0,qe=Math.min(Te.length,j.length),Be=qe,De=0;x<Be;)Te.substring(De,Be)==j.substring(De,Be)?De=x=Be:qe=Be,Be=Math.floor((qe-x)/2+x);return Be},Ve.prototype.diff_commonSuffix=function(Te,j){if(!Te||!j||Te.charAt(Te.length-1)!=j.charAt(j.length-1))return 0;for(var x=0,qe=Math.min(Te.length,j.length),Be=qe,De=0;x<Be;)Te.substring(Te.length-Be,Te.length-De)==j.substring(j.length-Be,j.length-De)?De=x=Be:qe=Be,Be=Math.floor((qe-x)/2+x);return Be},Ve.prototype.diff_commonOverlap_=function(Te,j){var x=Te.length,qe=j.length;if(x==0||qe==0)return 0;x>qe?Te=Te.substring(x-qe):x<qe&&(j=j.substring(0,x));var Be=Math.min(x,qe);if(Te==j)return Be;for(var De=0,He=1;;){var Ye=Te.substring(Be-He),st=j.indexOf(Ye);if(st==-1)return De;He+=st,st!=0&&Te.substring(Be-He)!=j.substring(0,He)||(De=He,He++)}},Ve.prototype.diff_halfMatch_=function(Te,j){if(this.Diff_Timeout<=0)return null;var x=Te.length>j.length?Te:j,qe=Te.length>j.length?j:Te;if(x.length<4||2*qe.length<x.length)return null;var Be=this;function De(et,Ot,wt){for(var xt,it,yt,ut,Et=et.substring(wt,wt+Math.floor(et.length/4)),Ht=-1,an="";(Ht=Ot.indexOf(Et,Ht+1))!=-1;){var Mt=Be.diff_commonPrefix(et.substring(wt),Ot.substring(Ht)),vn=Be.diff_commonSuffix(et.substring(0,wt),Ot.substring(0,Ht));an.length<vn+Mt&&(an=Ot.substring(Ht-vn,Ht)+Ot.substring(Ht,Ht+Mt),xt=et.substring(0,wt-vn),it=et.substring(wt+Mt),yt=Ot.substring(0,Ht-vn),ut=Ot.substring(Ht+Mt))}return 2*an.length>=et.length?[xt,it,yt,ut,an]:null}var He,Ye,st,rt,Ke,tt=De(x,qe,Math.ceil(x.length/4)),at=De(x,qe,Math.ceil(x.length/2));return tt||at?(He=at?tt&&tt[4].length>at[4].length?tt:at:tt,Te.length>j.length?(Ye=He[0],st=He[1],rt=He[2],Ke=He[3]):(rt=He[0],Ke=He[1],Ye=He[2],st=He[3]),[Ye,st,rt,Ke,He[4]]):null},Ve.prototype.diff_cleanupSemantic=function(Te){for(var j=!1,x=[],qe=0,Be=null,De=0,He=0,Ye=0,st=0,rt=0;De<Te.length;)Te[De][0]==0?(x[qe++]=De,He=st,Ye=rt,st=0,rt=0,Be=Te[De][1]):(Te[De][0]==1?st+=Te[De][1].length:rt+=Te[De][1].length,Be&&Be.length<=Math.max(He,Ye)&&Be.length<=Math.max(st,rt)&&(Te.splice(x[qe-1],0,new Ve.Diff(P,Be)),Te[x[qe-1]+1][0]=1,qe--,De=--qe>0?x[qe-1]:-1,He=0,Ye=0,st=0,rt=0,Be=null,j=!0)),De++;for(j&&this.diff_cleanupMerge(Te),this.diff_cleanupSemanticLossless(Te),De=1;De<Te.length;){if(Te[De-1][0]==P&&Te[De][0]==1){var Ke=Te[De-1][1],tt=Te[De][1],at=this.diff_commonOverlap_(Ke,tt),et=this.diff_commonOverlap_(tt,Ke);at>=et?(at>=Ke.length/2||at>=tt.length/2)&&(Te.splice(De,0,new Ve.Diff(0,tt.substring(0,at))),Te[De-1][1]=Ke.substring(0,Ke.length-at),Te[De+1][1]=tt.substring(at),De++):(et>=Ke.length/2||et>=tt.length/2)&&(Te.splice(De,0,new Ve.Diff(0,Ke.substring(0,et))),Te[De-1][0]=1,Te[De-1][1]=tt.substring(0,tt.length-et),Te[De+1][0]=P,Te[De+1][1]=Ke.substring(et),De++),De++}De++}},Ve.prototype.diff_cleanupSemanticLossless=function(Te){function j(et,Ot){if(!et||!Ot)return 6;var wt=et.charAt(et.length-1),xt=Ot.charAt(0),it=wt.match(Ve.nonAlphaNumericRegex_),yt=xt.match(Ve.nonAlphaNumericRegex_),ut=it&&wt.match(Ve.whitespaceRegex_),Et=yt&&xt.match(Ve.whitespaceRegex_),Ht=ut&&wt.match(Ve.linebreakRegex_),an=Et&&xt.match(Ve.linebreakRegex_),Mt=Ht&&et.match(Ve.blanklineEndRegex_),vn=an&&Ot.match(Ve.blanklineStartRegex_);return Mt||vn?5:Ht||an?4:it&&!ut&&Et?3:ut||Et?2:it||yt?1:0}for(var x=1;x<Te.length-1;){if(Te[x-1][0]==0&&Te[x+1][0]==0){var qe=Te[x-1][1],Be=Te[x][1],De=Te[x+1][1],He=this.diff_commonSuffix(qe,Be);if(He){var Ye=Be.substring(Be.length-He);qe=qe.substring(0,qe.length-He),Be=Ye+Be.substring(0,Be.length-He),De=Ye+De}for(var st=qe,rt=Be,Ke=De,tt=j(qe,Be)+j(Be,De);Be.charAt(0)===De.charAt(0);){qe+=Be.charAt(0),Be=Be.substring(1)+De.charAt(0),De=De.substring(1);var at=j(qe,Be)+j(Be,De);at>=tt&&(tt=at,st=qe,rt=Be,Ke=De)}Te[x-1][1]!=st&&(st?Te[x-1][1]=st:(Te.splice(x-1,1),x--),Te[x][1]=rt,Ke?Te[x+1][1]=Ke:(Te.splice(x+1,1),x--))}x++}},Ve.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,Ve.whitespaceRegex_=/\s/,Ve.linebreakRegex_=/[\r\n]/,Ve.blanklineEndRegex_=/\n\r?\n$/,Ve.blanklineStartRegex_=/^\r?\n\r?\n/,Ve.prototype.diff_cleanupEfficiency=function(Te){for(var j=!1,x=[],qe=0,Be=null,De=0,He=!1,Ye=!1,st=!1,rt=!1;De<Te.length;)Te[De][0]==0?(Te[De][1].length<this.Diff_EditCost&&(st||rt)?(x[qe++]=De,He=st,Ye=rt,Be=Te[De][1]):(qe=0,Be=null),st=rt=!1):(Te[De][0]==P?rt=!0:st=!0,Be&&(He&&Ye&&st&&rt||Be.length<this.Diff_EditCost/2&&He+Ye+st+rt==3)&&(Te.splice(x[qe-1],0,new Ve.Diff(P,Be)),Te[x[qe-1]+1][0]=1,qe--,Be=null,He&&Ye?(st=rt=!0,qe=0):(De=--qe>0?x[qe-1]:-1,st=rt=!1),j=!0)),De++;j&&this.diff_cleanupMerge(Te)},Ve.prototype.diff_cleanupMerge=function(Te){Te.push(new Ve.Diff(0,""));for(var j,x=0,qe=0,Be=0,De="",He="";x<Te.length;)switch(Te[x][0]){case 1:Be++,He+=Te[x][1],x++;break;case P:qe++,De+=Te[x][1],x++;break;case 0:qe+Be>1?(qe!==0&&Be!==0&&((j=this.diff_commonPrefix(He,De))!==0&&(x-qe-Be>0&&Te[x-qe-Be-1][0]==0?Te[x-qe-Be-1][1]+=He.substring(0,j):(Te.splice(0,0,new Ve.Diff(0,He.substring(0,j))),x++),He=He.substring(j),De=De.substring(j)),(j=this.diff_commonSuffix(He,De))!==0&&(Te[x][1]=He.substring(He.length-j)+Te[x][1],He=He.substring(0,He.length-j),De=De.substring(0,De.length-j))),x-=qe+Be,Te.splice(x,qe+Be),De.length&&(Te.splice(x,0,new Ve.Diff(P,De)),x++),He.length&&(Te.splice(x,0,new Ve.Diff(1,He)),x++),x++):x!==0&&Te[x-1][0]==0?(Te[x-1][1]+=Te[x][1],Te.splice(x,1)):x++,Be=0,qe=0,De="",He=""}Te[Te.length-1][1]===""&&Te.pop();var Ye=!1;for(x=1;x<Te.length-1;)Te[x-1][0]==0&&Te[x+1][0]==0&&(Te[x][1].substring(Te[x][1].length-Te[x-1][1].length)==Te[x-1][1]?(Te[x][1]=Te[x-1][1]+Te[x][1].substring(0,Te[x][1].length-Te[x-1][1].length),Te[x+1][1]=Te[x-1][1]+Te[x+1][1],Te.splice(x-1,1),Ye=!0):Te[x][1].substring(0,Te[x+1][1].length)==Te[x+1][1]&&(Te[x-1][1]+=Te[x+1][1],Te[x][1]=Te[x][1].substring(Te[x+1][1].length)+Te[x+1][1],Te.splice(x+1,1),Ye=!0)),x++;Ye&&this.diff_cleanupMerge(Te)},Ve.prototype.diff_xIndex=function(Te,j){var x,qe=0,Be=0,De=0,He=0;for(x=0;x<Te.length&&(Te[x][0]!==1&&(qe+=Te[x][1].length),Te[x][0]!==P&&(Be+=Te[x][1].length),!(qe>j));x++)De=qe,He=Be;return Te.length!=x&&Te[x][0]===P?He:He+(j-De)},Ve.prototype.diff_prettyHtml=function(Te){for(var j=[],x=/&/g,qe=/</g,Be=/>/g,De=/\n/g,He=0;He<Te.length;He++){var Ye=Te[He][0],st=Te[He][1].replace(x,"&amp;").replace(qe,"&lt;").replace(Be,"&gt;").replace(De,"&para;<br>");switch(Ye){case 1:j[He]='<ins style="background:#e6ffe6;">'+st+"</ins>";break;case P:j[He]='<del style="background:#ffe6e6;">'+st+"</del>";break;case 0:j[He]="<span>"+st+"</span>"}}return j.join("")},Ve.prototype.diff_text1=function(Te){for(var j=[],x=0;x<Te.length;x++)Te[x][0]!==1&&(j[x]=Te[x][1]);return j.join("")},Ve.prototype.diff_text2=function(Te){for(var j=[],x=0;x<Te.length;x++)Te[x][0]!==P&&(j[x]=Te[x][1]);return j.join("")},Ve.prototype.diff_levenshtein=function(Te){for(var j=0,x=0,qe=0,Be=0;Be<Te.length;Be++){var De=Te[Be][0],He=Te[Be][1];switch(De){case 1:x+=He.length;break;case P:qe+=He.length;break;case 0:j+=Math.max(x,qe),x=0,qe=0}}return j+=Math.max(x,qe)},Ve.prototype.diff_toDelta=function(Te){for(var j=[],x=0;x<Te.length;x++)switch(Te[x][0]){case 1:j[x]="+"+encodeURI(Te[x][1]);break;case P:j[x]="-"+Te[x][1].length;break;case 0:j[x]="="+Te[x][1].length}return j.join("	").replace(/%20/g," ")},Ve.prototype.diff_fromDelta=function(Te,j){for(var x=[],qe=0,Be=0,De=j.split(/\t/g),He=0;He<De.length;He++){var Ye=De[He].substring(1);switch(De[He].charAt(0)){case"+":try{x[qe++]=new Ve.Diff(1,decodeURI(Ye))}catch(Ke){throw new Error("Illegal escape in diff_fromDelta: "+Ye)}break;case"-":case"=":var st=parseInt(Ye,10);if(isNaN(st)||st<0)throw new Error("Invalid number in diff_fromDelta: "+Ye);var rt=Te.substring(Be,Be+=st);De[He].charAt(0)=="="?x[qe++]=new Ve.Diff(0,rt):x[qe++]=new Ve.Diff(P,rt);break;default:if(De[He])throw new Error("Invalid diff operation in diff_fromDelta: "+De[He])}}if(Be!=Te.length)throw new Error("Delta length ("+Be+") does not equal source text length ("+Te.length+").");return x},Ve.prototype.match_main=function(Te,j,x){if(Te==null||j==null||x==null)throw new Error("Null input. (match_main)");return x=Math.max(0,Math.min(x,Te.length)),Te==j?0:Te.length?Te.substring(x,x+j.length)==j?x:this.match_bitap_(Te,j,x):-1},Ve.prototype.match_bitap_=function(Te,j,x){if(j.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var qe=this.match_alphabet_(j),Be=this;function De(Et,Ht){var an=Et/j.length,Mt=Math.abs(x-Ht);return Be.Match_Distance?an+Mt/Be.Match_Distance:Mt?1:an}var He=this.Match_Threshold,Ye=Te.indexOf(j,x);Ye!=-1&&(He=Math.min(De(0,Ye),He),(Ye=Te.lastIndexOf(j,x+j.length))!=-1&&(He=Math.min(De(0,Ye),He)));var st,rt,Ke=1<<j.length-1;Ye=-1;for(var tt,at=j.length+Te.length,et=0;et<j.length;et++){for(st=0,rt=at;st<rt;)De(et,x+rt)<=He?st=rt:at=rt,rt=Math.floor((at-st)/2+st);at=rt;var Ot=Math.max(1,x-rt+1),wt=Math.min(x+rt,Te.length)+j.length,xt=Array(wt+2);xt[wt+1]=(1<<et)-1;for(var it=wt;it>=Ot;it--){var yt=qe[Te.charAt(it-1)];if(xt[it]=et===0?(xt[it+1]<<1|1)&yt:(xt[it+1]<<1|1)&yt|(tt[it+1]|tt[it])<<1|1|tt[it+1],xt[it]&Ke){var ut=De(et,it-1);if(ut<=He){if(He=ut,!((Ye=it-1)>x))break;Ot=Math.max(1,2*x-Ye)}}}if(De(et+1,x)>He)break;tt=xt}return Ye},Ve.prototype.match_alphabet_=function(Te){for(var j={},x=0;x<Te.length;x++)j[Te.charAt(x)]=0;for(x=0;x<Te.length;x++)j[Te.charAt(x)]|=1<<Te.length-x-1;return j},Ve.prototype.patch_addContext_=function(Te,j){if(j.length!=0){if(Te.start2===null)throw Error("patch not initialized");for(var x=j.substring(Te.start2,Te.start2+Te.length1),qe=0;j.indexOf(x)!=j.lastIndexOf(x)&&x.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)qe+=this.Patch_Margin,x=j.substring(Te.start2-qe,Te.start2+Te.length1+qe);qe+=this.Patch_Margin;var Be=j.substring(Te.start2-qe,Te.start2);Be&&Te.diffs.unshift(new Ve.Diff(0,Be));var De=j.substring(Te.start2+Te.length1,Te.start2+Te.length1+qe);De&&Te.diffs.push(new Ve.Diff(0,De)),Te.start1-=Be.length,Te.start2-=Be.length,Te.length1+=Be.length+De.length,Te.length2+=Be.length+De.length}},Ve.prototype.patch_make=function(Te,j,x){var qe,Be;if(typeof Te=="string"&&typeof j=="string"&&x===void 0)qe=Te,(Be=this.diff_main(qe,j,!0)).length>2&&(this.diff_cleanupSemantic(Be),this.diff_cleanupEfficiency(Be));else if(Te&&typeof Te=="object"&&j===void 0&&x===void 0)Be=Te,qe=this.diff_text1(Be);else if(typeof Te=="string"&&j&&typeof j=="object"&&x===void 0)qe=Te,Be=j;else{if(typeof Te!="string"||typeof j!="string"||!x||typeof x!="object")throw new Error("Unknown call format to patch_make.");qe=Te,Be=x}if(Be.length===0)return[];for(var De=[],He=new Ve.patch_obj,Ye=0,st=0,rt=0,Ke=qe,tt=qe,at=0;at<Be.length;at++){var et=Be[at][0],Ot=Be[at][1];switch(Ye||et===0||(He.start1=st,He.start2=rt),et){case 1:He.diffs[Ye++]=Be[at],He.length2+=Ot.length,tt=tt.substring(0,rt)+Ot+tt.substring(rt);break;case P:He.length1+=Ot.length,He.diffs[Ye++]=Be[at],tt=tt.substring(0,rt)+tt.substring(rt+Ot.length);break;case 0:Ot.length<=2*this.Patch_Margin&&Ye&&Be.length!=at+1?(He.diffs[Ye++]=Be[at],He.length1+=Ot.length,He.length2+=Ot.length):Ot.length>=2*this.Patch_Margin&&Ye&&(this.patch_addContext_(He,Ke),De.push(He),He=new Ve.patch_obj,Ye=0,Ke=tt,st=rt)}et!==1&&(st+=Ot.length),et!==P&&(rt+=Ot.length)}return Ye&&(this.patch_addContext_(He,Ke),De.push(He)),De},Ve.prototype.patch_deepCopy=function(Te){for(var j=[],x=0;x<Te.length;x++){var qe=Te[x],Be=new Ve.patch_obj;Be.diffs=[];for(var De=0;De<qe.diffs.length;De++)Be.diffs[De]=new Ve.Diff(qe.diffs[De][0],qe.diffs[De][1]);Be.start1=qe.start1,Be.start2=qe.start2,Be.length1=qe.length1,Be.length2=qe.length2,j[x]=Be}return j},Ve.prototype.patch_apply=function(Te,j){if(Te.length==0)return[j,[]];Te=this.patch_deepCopy(Te);var x=this.patch_addPadding(Te);j=x+j+x,this.patch_splitMax(Te);for(var qe=0,Be=[],De=0;De<Te.length;De++){var He,Ye,st=Te[De].start2+qe,rt=this.diff_text1(Te[De].diffs),Ke=-1;if(rt.length>this.Match_MaxBits?(He=this.match_main(j,rt.substring(0,this.Match_MaxBits),st))!=-1&&((Ke=this.match_main(j,rt.substring(rt.length-this.Match_MaxBits),st+rt.length-this.Match_MaxBits))==-1||He>=Ke)&&(He=-1):He=this.match_main(j,rt,st),He==-1)Be[De]=!1,qe-=Te[De].length2-Te[De].length1;else if(Be[De]=!0,qe=He-st,rt==(Ye=Ke==-1?j.substring(He,He+rt.length):j.substring(He,Ke+this.Match_MaxBits)))j=j.substring(0,He)+this.diff_text2(Te[De].diffs)+j.substring(He+rt.length);else{var tt=this.diff_main(rt,Ye,!1);if(rt.length>this.Match_MaxBits&&this.diff_levenshtein(tt)/rt.length>this.Patch_DeleteThreshold)Be[De]=!1;else{this.diff_cleanupSemanticLossless(tt);for(var at,et=0,Ot=0;Ot<Te[De].diffs.length;Ot++){var wt=Te[De].diffs[Ot];wt[0]!==0&&(at=this.diff_xIndex(tt,et)),wt[0]===1?j=j.substring(0,He+at)+wt[1]+j.substring(He+at):wt[0]===P&&(j=j.substring(0,He+at)+j.substring(He+this.diff_xIndex(tt,et+wt[1].length))),wt[0]!==P&&(et+=wt[1].length)}}}}return[j=j.substring(x.length,j.length-x.length),Be]},Ve.prototype.patch_addPadding=function(Te){for(var j=this.Patch_Margin,x="",qe=1;qe<=j;qe++)x+=String.fromCharCode(qe);for(qe=0;qe<Te.length;qe++)Te[qe].start1+=j,Te[qe].start2+=j;var Be=Te[0],De=Be.diffs;if(De.length==0||De[0][0]!=0)De.unshift(new Ve.Diff(0,x)),Be.start1-=j,Be.start2-=j,Be.length1+=j,Be.length2+=j;else if(j>De[0][1].length){var He=j-De[0][1].length;De[0][1]=x.substring(De[0][1].length)+De[0][1],Be.start1-=He,Be.start2-=He,Be.length1+=He,Be.length2+=He}return(De=(Be=Te[Te.length-1]).diffs).length==0||De[De.length-1][0]!=0?(De.push(new Ve.Diff(0,x)),Be.length1+=j,Be.length2+=j):j>De[De.length-1][1].length&&(He=j-De[De.length-1][1].length,De[De.length-1][1]+=x.substring(0,He),Be.length1+=He,Be.length2+=He),x},Ve.prototype.patch_splitMax=function(Te){for(var j=this.Match_MaxBits,x=0;x<Te.length;x++)if(!(Te[x].length1<=j)){var qe=Te[x];Te.splice(x--,1);for(var Be=qe.start1,De=qe.start2,He="";qe.diffs.length!==0;){var Ye=new Ve.patch_obj,st=!0;for(Ye.start1=Be-He.length,Ye.start2=De-He.length,He!==""&&(Ye.length1=Ye.length2=He.length,Ye.diffs.push(new Ve.Diff(0,He)));qe.diffs.length!==0&&Ye.length1<j-this.Patch_Margin;){var rt=qe.diffs[0][0],Ke=qe.diffs[0][1];rt===1?(Ye.length2+=Ke.length,De+=Ke.length,Ye.diffs.push(qe.diffs.shift()),st=!1):rt===P&&Ye.diffs.length==1&&Ye.diffs[0][0]==0&&Ke.length>2*j?(Ye.length1+=Ke.length,Be+=Ke.length,st=!1,Ye.diffs.push(new Ve.Diff(rt,Ke)),qe.diffs.shift()):(Ke=Ke.substring(0,j-Ye.length1-this.Patch_Margin),Ye.length1+=Ke.length,Be+=Ke.length,rt===0?(Ye.length2+=Ke.length,De+=Ke.length):st=!1,Ye.diffs.push(new Ve.Diff(rt,Ke)),Ke==qe.diffs[0][1]?qe.diffs.shift():qe.diffs[0][1]=qe.diffs[0][1].substring(Ke.length))}He=(He=this.diff_text2(Ye.diffs)).substring(He.length-this.Patch_Margin);var tt=this.diff_text1(qe.diffs).substring(0,this.Patch_Margin);tt!==""&&(Ye.length1+=tt.length,Ye.length2+=tt.length,Ye.diffs.length!==0&&Ye.diffs[Ye.diffs.length-1][0]===0?Ye.diffs[Ye.diffs.length-1][1]+=tt:Ye.diffs.push(new Ve.Diff(0,tt))),st||Te.splice(++x,0,Ye)}}},Ve.prototype.patch_toText=function(Te){for(var j=[],x=0;x<Te.length;x++)j[x]=Te[x];return j.join("")},Ve.prototype.patch_fromText=function(Te){var j=[];if(!Te)return j;for(var x=Te.split(`
`),qe=0,Be=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;qe<x.length;){var De=x[qe].match(Be);if(!De)throw new Error("Invalid patch string: "+x[qe]);var He=new Ve.patch_obj;for(j.push(He),He.start1=parseInt(De[1],10),De[2]===""?(He.start1--,He.length1=1):De[2]=="0"?He.length1=0:(He.start1--,He.length1=parseInt(De[2],10)),He.start2=parseInt(De[3],10),De[4]===""?(He.start2--,He.length2=1):De[4]=="0"?He.length2=0:(He.start2--,He.length2=parseInt(De[4],10)),qe++;qe<x.length;){var Ye=x[qe].charAt(0);try{var st=decodeURI(x[qe].substring(1))}catch(rt){throw new Error("Illegal escape in patch_fromText: "+st)}if(Ye=="-")He.diffs.push(new Ve.Diff(P,st));else if(Ye=="+")He.diffs.push(new Ve.Diff(1,st));else if(Ye==" ")He.diffs.push(new Ve.Diff(0,st));else{if(Ye=="@")break;if(Ye!=="")throw new Error('Invalid patch mode "'+Ye+'" in: '+st)}qe++}}return j},(Ve.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var Te,j=["@@ -"+(this.length1===0?this.start1+",0":this.length1==1?this.start1+1:this.start1+1+","+this.length1)+" +"+(this.length2===0?this.start2+",0":this.length2==1?this.start2+1:this.start2+1+","+this.length2)+` @@
`],x=0;x<this.diffs.length;x++){switch(this.diffs[x][0]){case 1:Te="+";break;case P:Te="-";break;case 0:Te=" "}j[x+1]=Te+encodeURI(this.diffs[x][1])+`
`}return j.join("").replace(/%20/g," ")},Xe.exports=Ve,Xe.exports.diff_match_patch=Ve,Xe.exports.DIFF_DELETE=P,Xe.exports.DIFF_INSERT=1,Xe.exports.DIFF_EQUAL=0},872:(Xe,Ve,P)=>{P.d(Ve,{default:()=>_t});var Te=P(478),j=P(156),x=P(314),qe=P(730),Be=P(66),De=P(218),He=P(702),Ye=function(Nt){Nt===void 0&&(Nt=document);var ln=function(on){var dt=document.createElement("img");dt.src=on.getAttribute("data-src"),dt.addEventListener("load",function(){on.getAttribute("style")||on.getAttribute("class")||on.getAttribute("width")||on.getAttribute("height")||dt.naturalHeight>dt.naturalWidth&&dt.naturalWidth/dt.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&dt.naturalHeight>window.innerHeight-40&&(on.style.height=window.innerHeight-40+"px"),on.src=dt.src}),on.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return Nt.querySelectorAll("img").forEach(function(on){on.getAttribute("data-src")&&ln(on)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),Nt.querySelectorAll("img").forEach(function(on){window.vditorImageIntersectionObserver.observe(on)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(on){on.forEach(function(dt){(dt.isIntersecting===void 0?dt.intersectionRatio!==0:dt.isIntersecting)&&dt.target.getAttribute("data-src")&&ln(dt.target)})}),Nt.querySelectorAll("img").forEach(function(on){window.vditorImageIntersectionObserver.observe(on)}))},st=P(466),rt=P(554),Ke=P(40),tt=P(563),at=P(749),et=P(818),Ot=P(408),wt=P(54),xt=P(227),it=P(526),yt=P(827),ut=P(640),Et=P(895),Ht=P(393),an=function(Nt,ln){if(ln===void 0&&(ln="zh_CN"),typeof speechSynthesis!="undefined"&&typeof SpeechSynthesisUtterance!="undefined"){var on=function(){var fn,cn;return speechSynthesis.getVoices().forEach(function(hn){hn.lang===ln.replace("_","-")&&(fn=hn),hn.default&&(cn=hn)}),fn||(fn=cn),fn},dt='<svg><use xlink:href="#vditor-icon-play"></use></svg>',ur='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';document.getElementById("vditorIconScript")||(dt='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',ur='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>');var dn=document.querySelector(".vditor-speech");dn||((dn=document.createElement("button")).className="vditor-speech",Nt.insertAdjacentElement("beforeend",dn),speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=on));var en=on(),Nn=new SpeechSynthesisUtterance;Nn.voice=en,Nn.onend=Nn.onerror=function(){dn.style.display="none",speechSynthesis.cancel(),dn.classList.remove("vditor-speech--current"),dn.innerHTML=dt},Nt.addEventListener(window.ontouchstart!==void 0?"touchend":"click",function(fn){var cn=fn.target;if(cn.classList.contains("vditor-speech")||cn.parentElement.classList.contains("vditor-speech"))return dn.classList.contains("vditor-speech--current")?speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),dn.innerHTML=ur):(speechSynthesis.pause(),dn.innerHTML=dt)):(Nn.text=dn.getAttribute("data-text"),speechSynthesis.speak(Nn),dn.classList.add("vditor-speech--current"),dn.innerHTML=ur),(0,Ht.Hc)(window.vditorSpeechRange),void Nt.focus();if(dn.style.display="none",speechSynthesis.cancel(),dn.classList.remove("vditor-speech--current"),dn.innerHTML=dt,getSelection().rangeCount!==0){var hn=getSelection().getRangeAt(0),er=hn.toString().trim();if(er){window.vditorSpeechRange=hn.cloneRange();var Fn=hn.getBoundingClientRect();dn.innerHTML=dt,dn.style.display="block",dn.style.top=Fn.top+Fn.height+document.querySelector("html").scrollTop-20+"px",window.ontouchstart!==void 0?dn.style.left=fn.changedTouches[fn.changedTouches.length-1].pageX+2+"px":dn.style.left=fn.clientX+2+"px",dn.setAttribute("data-text",er)}}})}},Mt=function(Nt,ln,on,dt){return new(on||(on=Promise))(function(ur,dn){function en(cn){try{fn(dt.next(cn))}catch(hn){dn(hn)}}function Nn(cn){try{fn(dt.throw(cn))}catch(hn){dn(hn)}}function fn(cn){var hn;cn.done?ur(cn.value):(hn=cn.value,hn instanceof on?hn:new on(function(er){er(hn)})).then(en,Nn)}fn((dt=dt.apply(Nt,ln||[])).next())})},vn=function(Nt,ln){var on,dt,ur,dn,en={label:0,sent:function(){if(1&ur[0])throw ur[1];return ur[1]},trys:[],ops:[]};return dn={next:Nn(0),throw:Nn(1),return:Nn(2)},typeof Symbol=="function"&&(dn[Symbol.iterator]=function(){return this}),dn;function Nn(fn){return function(cn){return function(hn){if(on)throw new TypeError("Generator is already executing.");for(;en;)try{if(on=1,dt&&(ur=2&hn[0]?dt.return:hn[0]?dt.throw||((ur=dt.return)&&ur.call(dt),0):dt.next)&&!(ur=ur.call(dt,hn[1])).done)return ur;switch(dt=0,ur&&(hn=[2&hn[0],ur.value]),hn[0]){case 0:case 1:ur=hn;break;case 4:return en.label++,{value:hn[1],done:!1};case 5:en.label++,dt=hn[1],hn=[0];continue;case 7:hn=en.ops.pop(),en.trys.pop();continue;default:if(ur=en.trys,!((ur=ur.length>0&&ur[ur.length-1])||hn[0]!==6&&hn[0]!==2)){en=0;continue}if(hn[0]===3&&(!ur||hn[1]>ur[0]&&hn[1]<ur[3])){en.label=hn[1];break}if(hn[0]===6&&en.label<ur[1]){en.label=ur[1],ur=hn;break}if(ur&&en.label<ur[2]){en.label=ur[2],en.ops.push(hn);break}ur[2]&&en.ops.pop(),en.trys.pop();continue}hn=ln.call(Nt,en)}catch(er){hn=[6,er],dt=0}finally{on=ur=0}if(5&hn[0])throw hn[1];return{value:hn[0]?hn[1]:void 0,done:!0}}([fn,cn])}}},Wn=function(Nt){var ln,on={anchor:0,cdn:wt.g.CDN,customEmoji:{},emojiPath:wt.g.CDN+"/dist/images/emoji",hljs:wt.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:wt.g.MARKDOWN_OPTIONS,math:wt.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},render:{media:{enable:!0}},theme:wt.g.THEME_OPTIONS};return Nt.cdn&&(!((ln=Nt.theme)===null||ln===void 0)&&ln.path||(on.theme.path=Nt.cdn+"/dist/css/content-theme"),Nt.emojiPath||(on.emojiPath=Nt.cdn+"/dist/images/emoji")),(0,ut.T)(on,Nt)},$e=function(Nt,ln){var on=Wn(ln);return(0,it.G)(on.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then(function(){var dt=(0,Et.X)({autoSpace:on.markdown.autoSpace,gfmAutoLink:on.markdown.gfmAutoLink,codeBlockPreview:on.markdown.codeBlockPreview,emojiSite:on.emojiPath,emojis:on.customEmoji,fixTermTypo:on.markdown.fixTermTypo,footnotes:on.markdown.footnotes,headingAnchor:on.anchor!==0,inlineMathDigit:on.math.inlineDigit,lazyLoadImage:on.lazyLoadImage,linkBase:on.markdown.linkBase,linkPrefix:on.markdown.linkPrefix,listStyle:on.markdown.listStyle,mark:on.markdown.mark,mathBlockPreview:on.markdown.mathBlockPreview,paragraphBeginningSpace:on.markdown.paragraphBeginningSpace,sanitize:on.markdown.sanitize,toc:on.markdown.toc});return ln!=null&&ln.renderers&&dt.SetJSRenderers({renderers:{Md2HTML:ln.renderers}}),dt.SetHeadingID(!0),dt.Md2HTML(Nt)})},Dt=function(Nt,ln,on){return Mt(void 0,void 0,void 0,function(){var dt,ur,dn;return vn(this,function(en){switch(en.label){case 0:return dt=Wn(on),[4,$e(ln,dt)];case 1:if(ur=en.sent(),dt.transform&&(ur=dt.transform(ur)),Nt.innerHTML=ur,Nt.classList.add("vditor-reset"),dt.i18n)return[3,5];if(["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(dt.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return dn="vditorI18nScript"+dt.lang,document.querySelectorAll('head script[id^="vditorI18nScript"]').forEach(function(fn){fn.id!==dn&&document.head.removeChild(fn)}),[4,(0,it.G)(dt.cdn+"/dist/js/i18n/"+dt.lang+".js",dn)];case 3:en.sent(),en.label=4;case 4:return[3,6];case 5:window.VditorI18n=dt.i18n,en.label=6;case 6:return dt.icon?[4,(0,it.G)(dt.cdn+"/dist/js/icons/"+dt.icon+".js","vditorIconScript")]:[3,8];case 7:en.sent(),en.label=8;case 8:return(0,xt.Z)(dt.theme.current,dt.theme.path),dt.anchor===1&&Nt.classList.add("vditor-reset--anchor"),(0,qe.O)(Nt,dt.hljs),(0,He.s)(dt.hljs,Nt,dt.cdn),(0,st.H)(Nt,{cdn:dt.cdn,math:dt.math}),(0,Ke.i)(Nt,dt.cdn,dt.mode),(0,tt.K)(Nt,dt.cdn,dt.mode),(0,Be.P)(Nt,dt.cdn),(0,De.v)(Nt,dt.cdn),(0,x.p)(Nt,dt.cdn,dt.mode),(0,at.P)(Nt,dt.cdn,dt.mode),(0,Ot.B)(Nt,dt.cdn),(0,Te.Q)(Nt,dt.cdn),dt.render.media.enable&&(0,rt.Y)(Nt),dt.speech.enable&&an(Nt),dt.anchor!==0&&(Nn=dt.anchor,document.querySelectorAll(".vditor-anchor").forEach(function(fn){Nn===1&&fn.classList.add("vditor-anchor--left"),fn.onclick=function(){var cn=fn.getAttribute("href").substr(1),hn=document.getElementById("vditorAnchor-"+cn).offsetTop;document.querySelector("html").scrollTop=hn}}),window.onhashchange=function(){var fn=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));fn&&(document.querySelector("html").scrollTop=fn.offsetTop)}),dt.after&&dt.after(),dt.lazyLoadImage&&Ye(Nt),Nt.addEventListener("click",function(fn){var cn=(0,yt.lG)(fn.target,"SPAN");if(cn&&(0,yt.fb)(cn,"vditor-toc")){var hn=Nt.querySelector("#"+cn.getAttribute("data-target-id"));hn&&window.scrollTo(window.scrollX,hn.offsetTop)}}),[2]}var Nn})})},vt=P(863),nn=P(312);const _t=function(){function Nt(){}return Nt.adapterRender=j,Nt.previewImage=vt.E,Nt.codeRender=qe.O,Nt.graphvizRender=De.v,Nt.highlightRender=He.s,Nt.mathRender=st.H,Nt.mermaidRender=Ke.i,Nt.markmapRender=tt.K,Nt.flowchartRender=Be.P,Nt.chartRender=x.p,Nt.abcRender=Te.Q,Nt.mindmapRender=at.P,Nt.plantumlRender=Ot.B,Nt.outlineRender=et.k,Nt.mediaRender=rt.Y,Nt.speechRender=an,Nt.lazyLoadImageRender=Ye,Nt.md2html=$e,Nt.preview=Dt,Nt.setCodeTheme=nn.Y,Nt.setContentTheme=xt.Z,Nt}()},54:(Xe,Ve,P)=>{P.d(Ve,{H:()=>Te,g:()=>j});var Te="3.10.4",j=function(){function x(){}return x.ZWSP="​",x.DROP_EDITOR="application/editor",x.MOBILE_WIDTH=520,x.CLASS_MENU_DISABLED="vditor-menu--disabled",x.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],x.CODE_THEME=["abap","algol","algol_nu","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode","ant-design"],x.CODE_LANGUAGES=["mermaid","echarts","mindmap","plantuml","abc","graphviz","flowchart","apache","js","ts","html","markmap","properties","apache","bash","c","csharp","cpp","css","coffeescript","diff","go","xml","http","json","java","javascript","kotlin","less","lua","makefile","markdown","nginx","objectivec","php","php-template","perl","plaintext","python","python-repl","r","ruby","rust","scss","sql","shell","swift","ini","typescript","vbnet","yaml","ada","clojure","dart","erb","fortran","gradle","haskell","julia","julia-repl","lisp","matlab","pgsql","powershell","sql_more","stata","cmake","mathematica","solidity","yul"],x.CDN="https://unpkg.com/vditor@3.10.4",x.MARKDOWN_OPTIONS={autoSpace:!1,gfmAutoLink:!0,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},x.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},x.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},x.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:x.CDN+"/dist/css/content-theme"},x}()},478:(Xe,Ve,P)=>{P.d(Ve,{Q:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De){Be===void 0&&(Be=document),De===void 0&&(De=Te.g.CDN);var He=x.abcRenderAdapter.getElements(Be);He.length>0&&(0,j.G)(De+"/dist/js/abcjs/abcjs_basic.min.js","vditorAbcjsScript").then(function(){He.forEach(function(Ye){Ye.parentElement.classList.contains("vditor-wysiwyg__pre")||Ye.parentElement.classList.contains("vditor-ir__marker--pre")||Ye.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(Ye,x.abcRenderAdapter.getCode(Ye).trim()),Ye.style.overflowX="auto",Ye.setAttribute("data-processed","true"))})})}},156:(Xe,Ve,P)=>{P.r(Ve),P.d(Ve,{abcRenderAdapter:()=>De,chartRenderAdapter:()=>Be,flowchartRenderAdapter:()=>Ye,graphvizRenderAdapter:()=>He,markmapRenderAdapter:()=>x,mathRenderAdapter:()=>Te,mermaidRenderAdapter:()=>j,mindmapRenderAdapter:()=>qe,plantumlRenderAdapter:()=>st});var Te={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-math")}},j={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-mermaid")}},x={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-markmap")}},qe={getCode:function(rt){return rt.getAttribute("data-code")},getElements:function(rt){return rt.querySelectorAll(".language-mindmap")}},Be={getCode:function(rt){return rt.innerText},getElements:function(rt){return rt.querySelectorAll(".language-echarts")}},De={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-abc")}},He={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-graphviz")}},Ye={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-flowchart")}},st={getCode:function(rt){return rt.textContent},getElements:function(rt){return rt.querySelectorAll(".language-plantuml")}}},314:(Xe,Ve,P)=>{P.d(Ve,{p:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De,He){Be===void 0&&(Be=document),De===void 0&&(De=Te.g.CDN);var Ye=x.chartRenderAdapter.getElements(Be);Ye.length>0&&(0,j.G)(De+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){Ye.forEach(function(st){if(!st.parentElement.classList.contains("vditor-wysiwyg__pre")&&!st.parentElement.classList.contains("vditor-ir__marker--pre")){var rt=x.chartRenderAdapter.getCode(st).trim();if(rt)try{if(st.getAttribute("data-processed")==="true")return;var Ke=JSON.parse(rt);echarts.init(st,He==="dark"?"dark":void 0).setOption(Ke),st.setAttribute("data-processed","true")}catch(tt){st.className="vditor-reset--error",st.innerHTML="echarts render error: <br>"+tt}}})})}},730:(Xe,Ve,P)=>{P.d(Ve,{O:()=>x});var Te=P(51),j=P(54),x=function(qe,Be){Array.from(qe.querySelectorAll("pre > code")).filter(function(De,He){return!De.parentElement.classList.contains("vditor-wysiwyg__pre")&&!De.parentElement.classList.contains("vditor-ir__marker--pre")&&!(De.classList.contains("language-mermaid")||De.classList.contains("language-flowchart")||De.classList.contains("language-echarts")||De.classList.contains("language-mindmap")||De.classList.contains("language-plantuml")||De.classList.contains("language-markmap")||De.classList.contains("language-abc")||De.classList.contains("language-graphviz")||De.classList.contains("language-math"))&&!(De.style.maxHeight.indexOf("px")>-1)&&!(qe.classList.contains("vditor-preview")&&He>5)}).forEach(function(De){var He,Ye,st,rt=De.innerText;if(De.classList.contains("highlight-chroma")){var Ke=De.cloneNode(!0);Ke.querySelectorAll(".highlight-ln").forEach(function(Ot){Ot.remove()}),rt=Ke.innerText}else rt.endsWith(`
`)&&(rt=rt.substr(0,rt.length-1));var tt='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';document.getElementById("vditorIconScript")||(tt='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>');var at=document.createElement("div");at.className="vditor-copy",at.innerHTML='<span aria-label="'+(((He=window.VditorI18n)===null||He===void 0?void 0:He.copy)||"复制")+`"
onmouseover="this.setAttribute('aria-label', '`+(((Ye=window.VditorI18n)===null||Ye===void 0?void 0:Ye.copy)||"复制")+`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`+(((st=window.VditorI18n)===null||st===void 0?void 0:st.copied)||"已复制")+`');this.previousElementSibling.blur()">`+tt+"</span>";var et=document.createElement("textarea");et.value=(0,Te.X)(rt),at.insertAdjacentElement("afterbegin",et),Be&&Be.renderMenu&&Be.renderMenu(De,at),De.before(at),De.style.maxHeight=window.outerHeight-40+"px",De.insertAdjacentHTML("afterend",'<span style="position: absolute">'+j.g.ZWSP+"</span>")})}},66:(Xe,Ve,P)=>{P.d(Ve,{P:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De){De===void 0&&(De=Te.g.CDN);var He=x.flowchartRenderAdapter.getElements(Be);He.length!==0&&(0,j.G)(De+"/dist/js/flowchart.js/flowchart.min.js","vditorFlowchartScript").then(function(){He.forEach(function(Ye){if(Ye.getAttribute("data-processed")!=="true"){var st=flowchart.parse(x.flowchartRenderAdapter.getCode(Ye));Ye.innerHTML="",st.drawSVG(Ye),Ye.setAttribute("data-processed","true")}})})}},218:(Xe,Ve,P)=>{P.d(Ve,{v:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De){De===void 0&&(De=Te.g.CDN);var He=x.graphvizRenderAdapter.getElements(Be);He.length!==0&&(0,j.G)(De+"/dist/js/graphviz/viz.js","vditorGraphVizScript").then(function(){He.forEach(function(Ye){var st=x.graphvizRenderAdapter.getCode(Ye);if(!Ye.parentElement.classList.contains("vditor-wysiwyg__pre")&&!Ye.parentElement.classList.contains("vditor-ir__marker--pre")&&Ye.getAttribute("data-processed")!=="true"&&st.trim()!==""){try{var rt=new Blob(["importScripts('"+document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js")+"');"],{type:"application/javascript"}),Ke=(window.URL||window.webkitURL).createObjectURL(rt),tt=new Worker(Ke);new Viz({worker:tt}).renderSVGElement(st).then(function(at){Ye.innerHTML=at.outerHTML}).catch(function(at){Ye.innerHTML="graphviz render error: <br>"+at,Ye.className="vditor-reset--error"})}catch(at){}Ye.setAttribute("data-processed","true")}})})}},702:(Xe,Ve,P)=>{P.d(Ve,{s:()=>qe});var Te=P(54),j=P(526),x=P(578),qe=function(Be,De,He){De===void 0&&(De=document),He===void 0&&(He=Te.g.CDN);var Ye=Be.style;Te.g.CODE_THEME.includes(Ye)||(Ye="github");var st=document.getElementById("vditorHljsStyle"),rt=He+"/dist/js/highlight.js/styles/"+Ye+".css";st&&st.getAttribute("href")!==rt&&st.remove(),(0,x.c)(He+"/dist/js/highlight.js/styles/"+Ye+".css","vditorHljsStyle"),Be.enable!==!1&&De.querySelectorAll("pre > code").length!==0&&(0,j.G)(He+"/dist/js/highlight.js/highlight.pack.js","vditorHljsScript").then(function(){(0,j.G)(He+"/dist/js/highlight.js/solidity.min.js","vditorHljsSolidityScript").then(function(){(0,j.G)(He+"/dist/js/highlight.js/yul.min.js","vditorHljsYulScript").then(function(){De.querySelectorAll("pre > code").forEach(function(Ke){if(!Ke.parentElement.classList.contains("vditor-ir__marker--pre")&&!Ke.parentElement.classList.contains("vditor-wysiwyg__pre")&&!(Ke.classList.contains("language-mermaid")||Ke.classList.contains("language-flowchart")||Ke.classList.contains("language-echarts")||Ke.classList.contains("language-mindmap")||Ke.classList.contains("language-plantuml")||Ke.classList.contains("language-abc")||Ke.classList.contains("language-graphviz")||Ke.classList.contains("language-math"))&&(Be.defaultLang!==""&&Ke.className.indexOf("language-")===-1&&Ke.classList.add("language-"+Be.defaultLang),hljs.highlightElement(Ke),Be.lineNumber)){Ke.classList.add("vditor-linenumber");var tt=Ke.querySelector(".vditor-linenumber__temp");tt||((tt=document.createElement("div")).className="vditor-linenumber__temp",Ke.insertAdjacentElement("beforeend",tt));var at=getComputedStyle(Ke).whiteSpace,et=!1;at!=="pre-wrap"&&at!=="pre-line"||(et=!0);var Ot="",wt=Ke.textContent.split(/\r\n|\r|\n/g);wt.pop(),wt.map(function(xt){var it="";et&&(tt.textContent=xt||`
`,it=' style="height:'+tt.getBoundingClientRect().height+'px"'),Ot+="<span"+it+"></span>"}),tt.style.display="none",Ot='<span class="vditor-linenumber__rows">'+Ot+"</span>",Ke.insertAdjacentHTML("beforeend",Ot)}})})})})}},563:(Xe,Ve,P)=>{P.d(Ve,{K:()=>De});var Te=P(54),j=P(526),x=P(156),qe={},Be=function(He,Ye){var st=window.markmap,rt=st.Transformer,Ke=st.Markmap,tt=st.deriveOptions,at=(st.globalCSS,new rt);He.innerHTML='<svg style="width:100%"></svg>';var et=He.firstChild,Ot=Ke.create(et,null),wt=function(ut,Et){var Ht=ut.transform(Et),an=Object.keys(Ht.features).filter(function(Dt){return!qe[Dt]});an.forEach(function(Dt){qe[Dt]=!0});var Mt=ut.getAssets(an),vn=Mt.styles,Wn=Mt.scripts,$e=window.markmap;return vn&&$e.loadCSS(vn),Wn&&$e.loadJS(Wn),Ht}(at,Ye),xt=wt.root,it=wt.frontmatter,yt=tt(it==null?void 0:it.markmap);Ot.setData(xt,yt),Ot.fit()},De=function(He,Ye,st){Ye===void 0&&(Ye=Te.g.CDN);var rt=x.markmapRenderAdapter.getElements(He);rt.length!==0&&(0,j.G)(Ye+"/dist/js/markmap/markmap.min.js","vditorMermaidScript").then(function(){rt.forEach(function(Ke){var tt=x.markmapRenderAdapter.getCode(Ke);if(Ke.getAttribute("data-processed")!=="true"&&tt.trim()!==""){var at=document.createElement("div");at.className="language-markmap",Ke.parentNode.appendChild(at),Be(at,tt),Ke.parentNode.childNodes[0].nodeName=="CODE"&&Ke.parentNode.removeChild(Ke.parentNode.childNodes[0])}})})}},466:(Xe,Ve,P)=>{P.d(Ve,{H:()=>De});var Te=P(54),j=P(526),x=P(578),qe=P(51),Be=P(156),De=function(He,Ye){var st=Be.mathRenderAdapter.getElements(He);if(st.length!==0){var rt={cdn:Te.g.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(Ye&&Ye.math&&(Ye.math=Object.assign({},rt.math,Ye.math)),(Ye=Object.assign({},rt,Ye)).math.engine==="KaTeX")(0,x.c)(Ye.cdn+"/dist/js/katex/katex.min.css?v=0.16.9","vditorKatexStyle"),(0,j.G)(Ye.cdn+"/dist/js/katex/katex.min.js?v=0.16.9","vditorKatexScript").then(function(){(0,j.G)(Ye.cdn+"/dist/js/katex/mhchem.min.js?v=0.16.9","vditorKatexChemScript").then(function(){st.forEach(function(tt){if(!tt.parentElement.classList.contains("vditor-wysiwyg__pre")&&!tt.parentElement.classList.contains("vditor-ir__marker--pre")&&!tt.getAttribute("data-math")){var at=(0,qe.X)(Be.mathRenderAdapter.getCode(tt));tt.setAttribute("data-math",at);try{tt.innerHTML=katex.renderToString(at,{displayMode:tt.tagName==="DIV",output:"html",macros:Ye.math.macros})}catch(et){tt.innerHTML=et.message,tt.className="language-math vditor-reset--error"}tt.addEventListener("copy",function(et){et.stopPropagation(),et.preventDefault();var Ot=et.currentTarget.closest(".language-math");et.clipboardData.setData("text/html",Ot.innerHTML),et.clipboardData.setData("text/plain",Ot.getAttribute("data-math"))})}})})});else if(Ye.math.engine==="MathJax"){window.MathJax||(window.MathJax={loader:{paths:{mathjax:Ye.cdn+"/dist/js/mathjax"}},startup:{typeset:!1},tex:{macros:Ye.math.macros}},Object.assign(window.MathJax,Ye.math.mathJaxOptions)),(0,j.J)(Ye.cdn+"/dist/js/mathjax/tex-svg-full.js","protyleMathJaxScript");var Ke=function(tt,at){var et=(0,qe.X)(tt.textContent).trim(),Ot=window.MathJax.getMetricsFor(tt);Ot.display=tt.tagName==="DIV",window.MathJax.tex2svgPromise(et,Ot).then(function(wt){tt.innerHTML="",tt.setAttribute("data-math",et),tt.append(wt),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var xt=wt.querySelector('[data-mml-node="merror"]');xt&&xt.textContent.trim()!==""&&(tt.innerHTML=xt.textContent.trim(),tt.className="vditor-reset--error"),at&&at()})};window.MathJax.startup.promise.then(function(){for(var tt=[],at=function(Ot){var wt=st[Ot];wt.parentElement.classList.contains("vditor-wysiwyg__pre")||wt.parentElement.classList.contains("vditor-ir__marker--pre")||wt.getAttribute("data-math")||!(0,qe.X)(wt.textContent).trim()||tt.push(function(xt){Ot===st.length-1?Ke(wt):Ke(wt,xt)})},et=0;et<st.length;et++)at(et);(function(Ot){if(Ot.length!==0){var wt=0,xt=Ot[Ot.length-1],it=function(){var yt=Ot[wt++];yt===xt?yt():yt(it)};it()}})(tt)})}}}},554:(Xe,Ve,P)=>{P.d(Ve,{Y:()=>j});var Te=P(835),j=function(x){x&&x.querySelectorAll("a").forEach(function(qe){var Be=qe.getAttribute("href");Be&&(Be.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?function(De,He){De.insertAdjacentHTML("afterend",'<video controls="controls" src="'+He+'"></video>'),De.remove()}(qe,Be):Be.match(/^.+.(mp3|wav|flac)$/)?function(De,He){De.insertAdjacentHTML("afterend",'<audio controls="controls" src="'+He+'"></audio>'),De.remove()}(qe,Be):function(De,He){var Ye=He.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),st=He.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),rt=He.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),Ke=He.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),tt=He.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),at=He.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),et=He.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),Ot=He.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);if(Ye&&Ye[1].length===11)De.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'+Ye[1]+(Ye[2]?"?start="+Ye[2]:"")+'"></iframe>'),De.remove();else if(st&&st[1])De.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'+st[1]+'"></iframe>'),De.remove();else if(rt&&rt[1])De.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='+rt[1]+'"></iframe>'),De.remove();else if(Ke&&Ke[1])De.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`+Ke[1]+'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>'),De.remove();else if(tt&&tt[0])De.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`+encodeURIComponent(tt[0])+'"></iframe>'),De.remove();else if(at&&at[2])De.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`+at[2]+'"></iframe>'),De.remove();else if(He.indexOf("bilibili.com")>-1&&(He.indexOf("bvid=")>-1||et&&et[1])){var wt={bvid:(0,Te.o)("bvid",He)||et&&et[1],page:"1",high_quality:"1",as_wide:"1",allowfullscreen:"true",autoplay:"0"};new URL(He.startsWith("http")?He:"https:"+He).search.split("&").forEach(function(yt,ut){if(yt){ut===0&&(yt=yt.substr(1));var Et=yt.split("=");wt[Et[0]]=Et[1]}});var xt="https://player.bilibili.com/player.html?",it=Object.keys(wt);it.forEach(function(yt,ut){xt+=yt+"="+wt[yt],ut<it.length-1&&(xt+="&")}),De.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="'+xt+'"></iframe>'),De.remove()}else Ot&&Ot[1]&&(De.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'+Ot[1]+'"></iframe>'),De.remove())}(qe,Be))})}},40:(Xe,Ve,P)=>{P.d(Ve,{i:()=>He});var Te=P(54),j=P(526),x=P(156),qe=P(835),Be=function(Ye,st,rt,Ke){return new(rt||(rt=Promise))(function(tt,at){function et(xt){try{wt(Ke.next(xt))}catch(it){at(it)}}function Ot(xt){try{wt(Ke.throw(xt))}catch(it){at(it)}}function wt(xt){var it;xt.done?tt(xt.value):(it=xt.value,it instanceof rt?it:new rt(function(yt){yt(it)})).then(et,Ot)}wt((Ke=Ke.apply(Ye,st||[])).next())})},De=function(Ye,st){var rt,Ke,tt,at,et={label:0,sent:function(){if(1&tt[0])throw tt[1];return tt[1]},trys:[],ops:[]};return at={next:Ot(0),throw:Ot(1),return:Ot(2)},typeof Symbol=="function"&&(at[Symbol.iterator]=function(){return this}),at;function Ot(wt){return function(xt){return function(it){if(rt)throw new TypeError("Generator is already executing.");for(;et;)try{if(rt=1,Ke&&(tt=2&it[0]?Ke.return:it[0]?Ke.throw||((tt=Ke.return)&&tt.call(Ke),0):Ke.next)&&!(tt=tt.call(Ke,it[1])).done)return tt;switch(Ke=0,tt&&(it=[2&it[0],tt.value]),it[0]){case 0:case 1:tt=it;break;case 4:return et.label++,{value:it[1],done:!1};case 5:et.label++,Ke=it[1],it=[0];continue;case 7:it=et.ops.pop(),et.trys.pop();continue;default:if(tt=et.trys,!((tt=tt.length>0&&tt[tt.length-1])||it[0]!==6&&it[0]!==2)){et=0;continue}if(it[0]===3&&(!tt||it[1]>tt[0]&&it[1]<tt[3])){et.label=it[1];break}if(it[0]===6&&et.label<tt[1]){et.label=tt[1],tt=it;break}if(tt&&et.label<tt[2]){et.label=tt[2],et.ops.push(it);break}tt[2]&&et.ops.pop(),et.trys.pop();continue}it=st.call(Ye,et)}catch(yt){it=[6,yt],Ke=0}finally{rt=tt=0}if(5&it[0])throw it[1];return{value:it[0]?it[1]:void 0,done:!0}}([wt,xt])}}},He=function(Ye,st,rt){st===void 0&&(st=Te.g.CDN);var Ke=x.mermaidRenderAdapter.getElements(Ye);Ke.length!==0&&(0,j.G)(st+"/dist/js/mermaid/mermaid.min.js","vditorMermaidScript").then(function(){var tt={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8,showSequenceNumbers:!0},gantt:{leftPadding:75,rightPadding:20}};rt==="dark"&&(tt.theme="dark"),mermaid.initialize(tt),Ke.forEach(function(at){return Be(void 0,void 0,void 0,function(){var et,Ot,wt,xt,it;return De(this,function(yt){switch(yt.label){case 0:if(et=x.mermaidRenderAdapter.getCode(at),at.getAttribute("data-processed")==="true"||et.trim()==="")return[2];Ot="mermaid"+(0,qe.W)(),yt.label=1;case 1:return yt.trys.push([1,3,,4]),[4,mermaid.render(Ot,at.textContent)];case 2:return wt=yt.sent(),at.innerHTML=wt.svg,[3,4];case 3:return xt=yt.sent(),it=document.querySelector("#"+Ot),at.innerHTML=it.outerHTML+`<br>
<div style="text-align: left"><small>`+xt.message.replace(/\n/,"<br>")+"</small></div>",it.parentElement.remove(),[3,4];case 4:return at.setAttribute("data-processed","true"),[2]}})})})})}},749:(Xe,Ve,P)=>{P.d(Ve,{P:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De,He){Be===void 0&&(Be=document),De===void 0&&(De=Te.g.CDN);var Ye=x.mindmapRenderAdapter.getElements(Be);Ye.length>0&&(0,j.G)(De+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){Ye.forEach(function(st){if(!st.parentElement.classList.contains("vditor-wysiwyg__pre")&&!st.parentElement.classList.contains("vditor-ir__marker--pre")){var rt=x.mindmapRenderAdapter.getCode(st);if(rt)try{if(st.getAttribute("data-processed")==="true")return;echarts.init(st,He==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(rt))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(Ke,tt){var at;return!((at=tt==null?void 0:tt.data)===null||at===void 0)&&at.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),st.setAttribute("data-processed","true")}catch(Ke){st.className="vditor-reset--error",st.innerHTML="mindmap render error: <br>"+Ke}}})})}},818:(Xe,Ve,P)=>{P.d(Ve,{k:()=>x});var Te=P(64),j=P(466),x=function(qe,Be,De){var He="",Ye=[];if(Array.from(qe.children).forEach(function(tt,at){if((0,Te.W)(tt)){if(De){var et=tt.id.lastIndexOf("_");tt.id=tt.id.substring(0,et===-1?void 0:et)+"_"+at}Ye.push(tt.id),He+=tt.outerHTML.replace("<wbr>","")}}),He==="")return Be.innerHTML="","";var st=document.createElement("div");if(De)De.lute.SetToC(!0),De.currentMode!=="wysiwyg"||De.preview.element.contains(qe)?De.currentMode!=="ir"||De.preview.element.contains(qe)?st.innerHTML=De.lute.HTML2VditorDOM("<p>[ToC]</p>"+He):st.innerHTML=De.lute.SpinVditorIRDOM("<p>[ToC]</p>"+He):st.innerHTML=De.lute.SpinVditorDOM("<p>[ToC]</p>"+He),De.lute.SetToC(De.options.preview.markdown.toc);else{Be.classList.add("vditor-outline");var rt=Lute.New();rt.SetToC(!0),st.innerHTML=rt.HTML2VditorDOM("<p>[ToC]</p>"+He)}var Ke=st.firstElementChild.querySelectorAll("li > span[data-target-id]");return Ke.forEach(function(tt,at){if(tt.nextElementSibling&&tt.nextElementSibling.tagName==="UL"){var et="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";document.getElementById("vditorIconScript")||(et='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),tt.innerHTML=et+"<span>"+tt.innerHTML+"</span>"}else tt.innerHTML="<svg></svg><span>"+tt.innerHTML+"</span>";tt.setAttribute("data-target-id",Ye[at])}),He=st.firstElementChild.innerHTML,Ke.length===0?(Be.innerHTML="",He):(Be.innerHTML=He,De&&(0,j.H)(Be,{cdn:De.options.cdn,math:De.options.preview.math}),Be.firstElementChild.addEventListener("click",function(tt){for(var at=tt.target;at&&!at.isEqualNode(Be);){if(at.classList.contains("vditor-outline__action")){at.classList.contains("vditor-outline__action--close")?(at.classList.remove("vditor-outline__action--close"),at.parentElement.nextElementSibling.setAttribute("style","display:block")):(at.classList.add("vditor-outline__action--close"),at.parentElement.nextElementSibling.setAttribute("style","display:none")),tt.preventDefault(),tt.stopPropagation();break}if(at.getAttribute("data-target-id")){tt.preventDefault(),tt.stopPropagation();var et=document.getElementById(at.getAttribute("data-target-id"));if(!et)return;if(De)if(De.options.height==="auto"){var Ot=et.offsetTop+De.element.offsetTop;De.options.toolbarConfig.pin||(Ot+=De.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,Ot)}else De.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,De.element.offsetTop),De.preview.element.contains(qe)?qe.parentElement.scrollTop=et.offsetTop:qe.scrollTop=et.offsetTop;else window.scrollTo(window.scrollX,et.offsetTop);break}at=at.parentElement}}),He)}},408:(Xe,Ve,P)=>{P.d(Ve,{B:()=>qe});var Te=P(54),j=P(526),x=P(156),qe=function(Be,De){Be===void 0&&(Be=document),De===void 0&&(De=Te.g.CDN);var He=x.plantumlRenderAdapter.getElements(Be);He.length!==0&&(0,j.G)(De+"/dist/js/plantuml/plantuml-encoder.min.js","vditorPlantumlScript").then(function(){He.forEach(function(Ye){if(!Ye.parentElement.classList.contains("vditor-wysiwyg__pre")&&!Ye.parentElement.classList.contains("vditor-ir__marker--pre")){var st=x.plantumlRenderAdapter.getCode(Ye).trim();if(st)try{Ye.innerHTML='<object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/~1'+plantumlEncoder.encode(st)+'"/>'}catch(rt){Ye.className="vditor-reset--error",Ye.innerHTML="plantuml render error: <br>"+rt}}})})}},895:(Xe,Ve,P)=>{P.d(Ve,{X:()=>Te});var Te=function(j){var x=Lute.New();return x.PutEmojis(j.emojis),x.SetEmojiSite(j.emojiSite),x.SetHeadingAnchor(j.headingAnchor),x.SetInlineMathAllowDigitAfterOpenMarker(j.inlineMathDigit),x.SetAutoSpace(j.autoSpace),x.SetToC(j.toc),x.SetFootnotes(j.footnotes),x.SetFixTermTypo(j.fixTermTypo),x.SetVditorCodeBlockPreview(j.codeBlockPreview),x.SetVditorMathBlockPreview(j.mathBlockPreview),x.SetSanitize(j.sanitize),x.SetChineseParagraphBeginningSpace(j.paragraphBeginningSpace),x.SetRenderListStyle(j.listStyle),x.SetLinkBase(j.linkBase),x.SetLinkPrefix(j.linkPrefix),x.SetMark(j.mark),x.SetGFMAutoLink(j.gfmAutoLink),j.lazyLoadImage&&x.SetImageLazyLoading(j.lazyLoadImage),x}},863:(Xe,Ve,P)=>{P.d(Ve,{E:()=>Te});var Te=function(j,x,qe){qe===void 0&&(qe="classic");var Be=j.getBoundingClientRect();document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'+(qe==="dark"?" vditor--dark":"")+`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `+window.VditorI18n.spin+`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`+window.VditorI18n.close+`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `+j.width+"px;height:"+j.height+"px;transform: translate3d("+Be.left+"px, "+(Be.top-36)+'px, 0)" src="'+j.getAttribute("src")+`">
    </div>
</div>`),document.body.style.overflow="hidden";var De=document.querySelector(".vditor-img img"),He="translate3d("+Math.max(0,window.innerWidth-j.naturalWidth)/2+"px, "+Math.max(0,window.innerHeight-36-j.naturalHeight)/2+"px, 0)";setTimeout(function(){De.setAttribute("style","transition: transform .3s ease-in-out;transform: "+He),setTimeout(function(){De.parentElement.scrollTo((De.parentElement.scrollWidth-De.parentElement.clientWidth)/2,(De.parentElement.scrollHeight-De.parentElement.clientHeight)/2)},400)});var Ye=document.querySelector(".vditor-img__btn");Ye.addEventListener("click",function(){var st=parseInt(Ye.getAttribute("data-deg"),10)+90;st/90%2==1&&j.naturalWidth>De.parentElement.clientHeight?De.style.transform="translate3d("+Math.max(0,window.innerWidth-j.naturalWidth)/2+"px, "+(j.naturalWidth/2-j.naturalHeight/2)+"px, 0) rotateZ("+st+"deg)":De.style.transform=He+" rotateZ("+st+"deg)",Ye.setAttribute("data-deg",st.toString()),setTimeout(function(){De.parentElement.scrollTo((De.parentElement.scrollWidth-De.parentElement.clientWidth)/2,(De.parentElement.scrollHeight-De.parentElement.clientHeight)/2)},400)})}},312:(Xe,Ve,P)=>{P.d(Ve,{Y:()=>x});var Te=P(54),j=P(578),x=function(qe,Be){Be===void 0&&(Be=Te.g.CDN),Te.g.CODE_THEME.includes(qe)||(qe="github");var De=document.getElementById("vditorHljsStyle"),He=Be+"/dist/js/highlight.js/styles/"+qe+".css";De?De.getAttribute("href")!==He&&(De.remove(),(0,j.c)(He,"vditorHljsStyle")):(0,j.c)(He,"vditorHljsStyle")}},227:(Xe,Ve,P)=>{P.d(Ve,{Z:()=>j});var Te=P(578),j=function(x,qe){if(x&&qe){var Be=document.getElementById("vditorContentTheme"),De=qe+"/"+x+".css";Be?Be.getAttribute("href")!==De&&(Be.remove(),(0,Te.c)(De,"vditorContentTheme")):(0,Te.c)(De,"vditorContentTheme")}}},526:(Xe,Ve,P)=>{P.d(Ve,{G:()=>j,J:()=>Te});var Te=function(x,qe){if(document.getElementById(qe))return!1;var Be=new XMLHttpRequest;Be.open("GET",x,!1),Be.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),Be.send("");var De=document.createElement("script");De.type="text/javascript",De.text=Be.responseText,De.id=qe,document.head.appendChild(De)},j=function(x,qe){return new Promise(function(Be,De){if(document.getElementById(qe))return Be(),!1;var He=document.createElement("script");He.src=x,He.async=!0,document.head.appendChild(He),He.onerror=function(Ye){De(Ye)},He.onload=function(){if(document.getElementById(qe))return He.remove(),Be(),!1;He.id=qe,Be()}})}},578:(Xe,Ve,P)=>{P.d(Ve,{c:()=>Te});var Te=function(j,x){if(!document.getElementById(x)){var qe=document.createElement("link");qe.id=x,qe.rel="stylesheet",qe.type="text/css",qe.href=j,document.getElementsByTagName("head")[0].appendChild(qe)}}},51:(Xe,Ve,P)=>{P.d(Ve,{X:()=>Te});var Te=function(j){return j.replace(/\u00a0/g," ")}},794:(Xe,Ve,P)=>{P.d(Ve,{G6:()=>Te,Le:()=>qe,i7:()=>He,ns:()=>De,pK:()=>x,vU:()=>j,yl:()=>Be});var Te=function(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1},j=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},x=function(){try{return typeof localStorage!="undefined"}catch(Ye){return!1}},qe=function(){return navigator.userAgent.indexOf("iPhone")>-1?"touchstart":"click"},Be=function(Ye){return navigator.platform.toUpperCase().indexOf("MAC")>=0?!(!Ye.metaKey||Ye.ctrlKey):!(Ye.metaKey||!Ye.ctrlKey)},De=function(Ye){return/Mac/.test(navigator.platform)||navigator.platform==="iPhone"?Ye.indexOf("⇧")>-1&&j()&&(Ye=Ye.replace(";",":").replace("=","+").replace("-","_")):(Ye=(Ye=Ye.startsWith("⌘")?Ye.replace("⌘","⌘+"):Ye.startsWith("⌥")&&Ye.substr(1,1)!=="⌘"?Ye.replace("⌥","⌥+"):Ye.replace("⇧⌘","⌘+⇧+").replace("⌥⌘","⌥+⌘+")).replace("⌘","Ctrl").replace("⇧","Shift").replace("⌥","Alt")).indexOf("Shift")>-1&&(Ye=Ye.replace(";",":").replace("=","+").replace("-","_")),Ye},He=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}},835:(Xe,Ve,P)=>{P.d(Ve,{W:()=>Te,o:()=>j});var Te=function(){return([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(x){return(parseInt(x,10)^window.crypto.getRandomValues(new Uint32Array(1))[0]&15>>parseInt(x,10)/4).toString(16)})},j=function(x,qe){qe===void 0&&(qe=window.location.search);var Be=qe.substring(qe.indexOf("?")),De=Be.indexOf("#");return new URLSearchParams(Be.substring(0,De>=0?De:void 0)).get(x)}},827:(Xe,Ve,P)=>{P.d(Ve,{DX:()=>st,E2:()=>x,F9:()=>De,JQ:()=>j,O9:()=>qe,a1:()=>Be,fb:()=>Ye,lG:()=>He});var Te=P(64),j=function(rt,Ke){for(var tt=Ye(rt,Ke),at=!1,et=!1;tt&&!tt.classList.contains("vditor-reset")&&!et;)(at=Ye(tt.parentElement,Ke))?tt=at:et=!0;return tt||!1},x=function(rt,Ke){for(var tt=(0,Te.S)(rt,Ke),at=!1,et=!1;tt&&!tt.classList.contains("vditor-reset")&&!et;)(at=(0,Te.S)(tt.parentElement,Ke))?tt=at:et=!0;return tt||!1},qe=function(rt){var Ke=x(rt,"UL"),tt=x(rt,"OL"),at=Ke;return tt&&(!Ke||Ke&&tt.contains(Ke))&&(at=tt),at},Be=function(rt,Ke,tt){if(!rt)return!1;rt.nodeType===3&&(rt=rt.parentElement);for(var at=rt,et=!1;at&&!et&&!at.classList.contains("vditor-reset");)at.getAttribute(Ke)===tt?et=!0:at=at.parentElement;return et&&at},De=function(rt){if(!rt)return!1;rt.nodeType===3&&(rt=rt.parentElement);var Ke=rt,tt=!1,at=Be(rt,"data-block","0");if(at)return at;for(;Ke&&!tt&&!Ke.classList.contains("vditor-reset");)Ke.tagName==="H1"||Ke.tagName==="H2"||Ke.tagName==="H3"||Ke.tagName==="H4"||Ke.tagName==="H5"||Ke.tagName==="H6"||Ke.tagName==="P"||Ke.tagName==="BLOCKQUOTE"||Ke.tagName==="OL"||Ke.tagName==="UL"?tt=!0:Ke=Ke.parentElement;return tt&&Ke},He=function(rt,Ke){if(!rt)return!1;rt.nodeType===3&&(rt=rt.parentElement);for(var tt=rt,at=!1;tt&&!at&&!tt.classList.contains("vditor-reset");)tt.nodeName===Ke?at=!0:tt=tt.parentElement;return at&&tt},Ye=function(rt,Ke){if(!rt)return!1;rt.nodeType===3&&(rt=rt.parentElement);for(var tt=rt,at=!1;tt&&!at&&!tt.classList.contains("vditor-reset");)tt.classList.contains(Ke)?at=!0:tt=tt.parentElement;return at&&tt},st=function(rt){for(;rt&&rt.lastChild;)rt=rt.lastChild;return rt}},64:(Xe,Ve,P)=>{P.d(Ve,{S:()=>Te,W:()=>j});var Te=function(x,qe){if(!x)return!1;x.nodeType===3&&(x=x.parentElement);for(var Be=x,De=!1;Be&&!De&&!Be.classList.contains("vditor-reset");)Be.nodeName.indexOf(qe)===0?De=!0:Be=Be.parentElement;return De&&Be},j=function(x){var qe=Te(x,"H");return!(!qe||qe.tagName.length!==2||qe.tagName==="HR")&&qe}},640:(Xe,Ve,P)=>{P.d(Ve,{T:()=>Te});var Te=function(){for(var j=[],x=0;x<arguments.length;x++)j[x]=arguments[x];for(var qe={},Be=function(He){for(var Ye in He)He.hasOwnProperty(Ye)&&(Object.prototype.toString.call(He[Ye])==="[object Object]"?qe[Ye]=Te(qe[Ye],He[Ye]):qe[Ye]=He[Ye])},De=0;De<j.length;De++)Be(j[De]);return qe}},393:(Xe,Ve,P)=>{P.d(Ve,{$j:()=>st,Gb:()=>De,Hc:()=>He,Ny:()=>Be,ib:()=>rt,im:()=>Ye,oC:()=>Ke,zh:()=>qe});var Te=P(54),j=P(794),x=P(827),qe=function(tt){var at,et=tt[tt.currentMode].element;return getSelection().rangeCount>0&&(at=getSelection().getRangeAt(0),et.isEqualNode(at.startContainer)||et.contains(at.startContainer))?at:tt[tt.currentMode].range?tt[tt.currentMode].range:(et.focus(),(at=et.ownerDocument.createRange()).setStart(et,0),at.collapse(!0),at)},Be=function(tt){var at=window.getSelection().getRangeAt(0);if(!tt.contains(at.startContainer)&&!(0,x.fb)(at.startContainer,"vditor-panel--none"))return{left:0,top:0};var et,Ot=tt.parentElement.getBoundingClientRect();if(at.getClientRects().length===0)if(at.startContainer.nodeType===3){var wt=at.startContainer.parentElement;if(!(wt&&wt.getClientRects().length>0))return{left:0,top:0};et=wt.getClientRects()[0]}else{var xt=at.startContainer.children;if(xt[at.startOffset]&&xt[at.startOffset].getClientRects().length>0)et=xt[at.startOffset].getClientRects()[0];else if(at.startContainer.childNodes.length>0){var it=at.cloneRange();at.selectNode(at.startContainer.childNodes[Math.max(0,at.startOffset-1)]),et=at.getClientRects()[0],at.setEnd(it.endContainer,it.endOffset),at.setStart(it.startContainer,it.startOffset)}else et=at.startContainer.getClientRects()[0];if(!et){for(var yt=at.startContainer.childNodes[at.startOffset];!yt.getClientRects||yt.getClientRects&&yt.getClientRects().length===0;)yt=yt.parentElement;et=yt.getClientRects()[0]}}else et=at.getClientRects()[0];return{left:et.left-Ot.left,top:et.top-Ot.top}},De=function(tt,at){if(!at){if(getSelection().rangeCount===0)return!1;at=getSelection().getRangeAt(0)}var et=at.commonAncestorContainer;return tt.isEqualNode(et)||tt.contains(et)},He=function(tt){var at=window.getSelection();at.removeAllRanges(),at.addRange(tt)},Ye=function(tt,at,et){var Ot={end:0,start:0};if(!et){if(getSelection().rangeCount===0)return Ot;et=window.getSelection().getRangeAt(0)}if(De(at,et)){var wt=et.cloneRange();tt.childNodes[0]&&tt.childNodes[0].childNodes[0]?wt.setStart(tt.childNodes[0].childNodes[0],0):wt.selectNodeContents(tt),wt.setEnd(et.startContainer,et.startOffset),Ot.start=wt.toString().length,Ot.end=Ot.start+et.toString().length}return Ot},st=function(tt,at,et){var Ot=0,wt=0,xt=et.childNodes[wt],it=!1,yt=!1;tt=Math.max(0,tt),at=Math.max(0,at);var ut=et.ownerDocument.createRange();for(ut.setStart(xt||et,0),ut.collapse(!0);!yt&&xt;){var Et=Ot+xt.textContent.length;if(!it&&tt>=Ot&&tt<=Et&&(tt===0?ut.setStart(xt,0):xt.childNodes[0].nodeType===3?ut.setStart(xt.childNodes[0],tt-Ot):xt.nextSibling?ut.setStartBefore(xt.nextSibling):ut.setStartAfter(xt),it=!0,tt===at)){yt=!0;break}it&&at>=Ot&&at<=Et&&(at===0?ut.setEnd(xt,0):xt.childNodes[0].nodeType===3?ut.setEnd(xt.childNodes[0],at-Ot):xt.nextSibling?ut.setEndBefore(xt.nextSibling):ut.setEndAfter(xt),yt=!0),Ot=Et,xt=et.childNodes[++wt]}return!yt&&et.childNodes[wt-1]&&ut.setStartBefore(et.childNodes[wt-1]),He(ut),ut},rt=function(tt,at){var et=tt.querySelector("wbr");if(et){if(et.previousElementSibling)if(et.previousElementSibling.isSameNode(et.previousSibling)){if(et.previousElementSibling.lastChild)return at.setStartBefore(et),at.collapse(!0),He(at),!(0,j.i7)()||et.previousElementSibling.tagName!=="EM"&&et.previousElementSibling.tagName!=="STRONG"&&et.previousElementSibling.tagName!=="S"||(at.insertNode(document.createTextNode(Te.g.ZWSP)),at.collapse(!1)),void et.remove();at.setStartAfter(et.previousElementSibling)}else at.setStart(et.previousSibling,et.previousSibling.textContent.length);else et.previousSibling?at.setStart(et.previousSibling,et.previousSibling.textContent.length):et.nextSibling?et.nextSibling.nodeType===3?at.setStart(et.nextSibling,0):at.setStartBefore(et.nextSibling):at.setStart(et.parentElement,0);at.collapse(!0),et.remove(),He(at)}},Ke=function(tt,at){var et=document.createElement("div");et.innerHTML=tt;var Ot=et.querySelectorAll("p");Ot.length===1&&!Ot[0].previousSibling&&!Ot[0].nextSibling&&at[at.currentMode].element.children.length>0&&et.firstElementChild.tagName==="P"&&(tt=Ot[0].innerHTML.trim());var wt=document.createElement("div");wt.innerHTML=tt;var xt=qe(at);if(xt.toString()!==""&&(at[at.currentMode].preventInput=!0,document.execCommand("delete",!1,"")),wt.firstElementChild&&wt.firstElementChild.getAttribute("data-block")==="0"){wt.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var it=(0,x.F9)(xt.startContainer);it?it.insertAdjacentHTML("afterend",wt.innerHTML):at[at.currentMode].element.insertAdjacentHTML("beforeend",wt.innerHTML),rt(at[at.currentMode].element,xt)}else{var yt=document.createElement("template");yt.innerHTML=tt,xt.insertNode(yt.content.cloneNode(!0)),xt.collapse(!1),He(xt)}}}},A={};function We(Xe){var Ve=A[Xe];if(Ve!==void 0)return Ve.exports;var P=A[Xe]={exports:{}};return C[Xe](P,P.exports,We),P.exports}We.d=(Xe,Ve)=>{for(var P in Ve)We.o(Ve,P)&&!We.o(Xe,P)&&Object.defineProperty(Xe,P,{enumerable:!0,get:Ve[P]})},We.o=(Xe,Ve)=>Object.prototype.hasOwnProperty.call(Xe,Ve),We.r=Xe=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(Xe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Xe,"__esModule",{value:!0})};var Ge={};return(()=>{We.d(Ge,{default:()=>Uc});var Xe,Ve=We(872),P=We(54),Te=We(51),j=function(p){return p.currentMode==="sv"?(0,Te.X)((p.sv.element.textContent+`
`).replace(/\n\n$/,`
`)):p.currentMode==="wysiwyg"?p.lute.VditorDOM2Md(p.wysiwyg.element.innerHTML):p.currentMode==="ir"?p.lute.VditorIRDOM2Md(p.ir.element.innerHTML):""},x=We(526),qe=function(){function p(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return p.prototype.renderEchart=function(g){var w=this;g.devtools.element.style.display==="block"&&(0,x.G)(g.options.cdn+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){w.ASTChart||(w.ASTChart=echarts.init(g.devtools.element.lastElementChild));try{w.element.lastElementChild.style.display="block",w.element.firstElementChild.innerHTML="",w.ASTChart.setOption({series:[{data:JSON.parse(g.lute.RenderEChartsJSON(j(g))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),w.ASTChart.resize()}catch(I){w.element.lastElementChild.style.display="none",w.element.firstElementChild.innerHTML=I}})},p}(),Be=We(794),De=function(p,g){g.forEach(function(w){if(p[w]){var I=p[w].children[0];I&&I.classList.contains("vditor-menu--current")&&I.classList.remove("vditor-menu--current")}})},He=function(p,g){g.forEach(function(w){if(p[w]){var I=p[w].children[0];I&&!I.classList.contains("vditor-menu--current")&&I.classList.add("vditor-menu--current")}})},Ye=function(p,g){g.forEach(function(w){if(p[w]){var I=p[w].children[0];I&&I.classList.contains(P.g.CLASS_MENU_DISABLED)&&I.classList.remove(P.g.CLASS_MENU_DISABLED)}})},st=function(p,g){g.forEach(function(w){if(p[w]){var I=p[w].children[0];I&&!I.classList.contains(P.g.CLASS_MENU_DISABLED)&&I.classList.add(P.g.CLASS_MENU_DISABLED)}})},rt=function(p,g){g.forEach(function(w){p[w]&&p[w]&&(p[w].style.display="none")})},Ke=function(p,g){g.forEach(function(w){p[w]&&p[w]&&(p[w].style.display="block")})},tt=function(p,g,w){g.includes("subToolbar")&&(p.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(I){w&&I.isEqualNode(w)||(I.style.display="none")}),p.toolbar.elements.emoji&&(p.toolbar.elements.emoji.lastElementChild.style.display="none")),g.includes("hint")&&(p.hint.element.style.display="none"),p.wysiwyg.popover&&g.includes("popover")&&(p.wysiwyg.popover.style.display="none")},at=function(p,g,w,I){w.addEventListener((0,Be.Le)(),function(k){k.preventDefault(),k.stopPropagation(),w.classList.contains(P.g.CLASS_MENU_DISABLED)||(p.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(Ue){Ue.classList.remove("vditor-hint--current")}),g.style.display==="block"?g.style.display="none":(tt(p,["subToolbar","hint","popover"],w.parentElement.parentElement),w.classList.contains("vditor-tooltipped")||w.classList.add("vditor-hint--current"),g.style.display="block",p.toolbar.element.getBoundingClientRect().right-w.getBoundingClientRect().right<250?g.classList.add("vditor-panel--left"):g.classList.remove("vditor-panel--left")))})},et=We(827),Ot=We(64),wt=function(p,g,w,I){},xt=We(478),it=We(314),yt=We(730),ut=We(66),Et=We(218),Ht=We(702),an=We(466),Mt=We(40),vn=We(563),Wn=We(749),$e=We(408),Dt=function(p,g){if(p)if(p.parentElement.getAttribute("data-type")!=="html-block"){var w=p.firstElementChild.className.replace("language-","");w==="abc"?(0,xt.Q)(p,g.options.cdn):w==="mermaid"?(0,Mt.i)(p,g.options.cdn,g.options.theme):w==="markmap"?(0,vn.K)(p,g.options.cdn,g.options.theme):w==="flowchart"?(0,ut.P)(p,g.options.cdn):w==="echarts"?(0,it.p)(p,g.options.cdn,g.options.theme):w==="mindmap"?(0,Wn.P)(p,g.options.cdn,g.options.theme):w==="plantuml"?(0,$e.B)(p,g.options.cdn):w==="graphviz"?(0,Et.v)(p,g.options.cdn):w==="math"?(0,an.H)(p,{cdn:g.options.cdn,math:g.options.preview.math}):g.options.customRenders.find(function(I){if(I.language===w)return I.render(p,g),!0})||((0,Ht.s)(Object.assign({},g.options.preview.hljs),p,g.options.cdn),(0,yt.O)(p,g.options.preview.hljs)),p.setAttribute("data-render","1")}else p.setAttribute("data-render","1")},vt=We(393),nn=function(p){if(p.currentMode!=="sv"){var g=p[p.currentMode].element,w=p.outline.render(p);w===""&&(w="[ToC]"),g.querySelectorAll('[data-type="toc-block"]').forEach(function(I){I.innerHTML=w,(0,an.H)(I,{cdn:p.options.cdn,math:p.options.preview.math})})}},_t=function(p,g){var w=(0,et.lG)(p.target,"SPAN");if(w&&(0,et.fb)(w,"vditor-toc")){var I=g[g.currentMode].element.querySelector("#"+w.getAttribute("data-target-id"));if(I)if(g.options.height==="auto"){var k=I.offsetTop+g.element.offsetTop;g.options.toolbarConfig.pin||(k+=g.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,k)}else g.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,g.element.offsetTop),g[g.currentMode].element.scrollTop=I.offsetTop}},Nt=function(p,g,w,I){if(p.previousElementSibling&&p.previousElementSibling.classList.contains("vditor-toc")){if(w.key==="Backspace"&&(0,vt.im)(p,g[g.currentMode].element,I).start===0)return p.previousElementSibling.remove(),rr(g),!0;if(Qn(g,w,I,p,p.previousElementSibling))return!0}if(p.nextElementSibling&&p.nextElementSibling.classList.contains("vditor-toc")){if(w.key==="Delete"&&(0,vt.im)(p,g[g.currentMode].element,I).start>=p.textContent.trimRight().length)return p.nextElementSibling.remove(),rr(g),!0;if(In(g,w,I,p,p.nextElementSibling))return!0}if(w.key==="Backspace"||w.key==="Delete"){var k=(0,et.fb)(I.startContainer,"vditor-toc");if(k)return k.remove(),rr(g),!0}},ln=function(p,g,w,I){w===void 0&&(w=!1);var k=(0,et.F9)(g.startContainer);if(k&&!w&&k.getAttribute("data-type")!=="code-block"){if(Dn(k.innerHTML)&&k.previousElementSibling||Bn(k.innerHTML))return;for(var Ue=(0,vt.im)(k,p.ir.element,g).start,ft=!0,Bt=Ue-1;Bt>k.textContent.substr(0,Ue).lastIndexOf(`
`);Bt--)if(k.textContent.charAt(Bt)!==" "&&k.textContent.charAt(Bt)!=="	"){ft=!1;break}Ue===0&&(ft=!1);var Xt=!0;for(Bt=Ue-1;Bt<k.textContent.length;Bt++)if(k.textContent.charAt(Bt)!==" "&&k.textContent.charAt(Bt)!==`
`){Xt=!1;break}if(ft)return void(typeof p.options.input=="function"&&p.options.input(j(p)));if(Xt&&!(0,et.fb)(g.startContainer,"vditor-ir__marker")){var Ut=g.startContainer.previousSibling;return Ut&&Ut.nodeType!==3&&Ut.classList.contains("vditor-ir__node--expand")&&Ut.classList.remove("vditor-ir__node--expand"),void(typeof p.options.input=="function"&&p.options.input(j(p)))}}if(p.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(ca){ca.classList.remove("vditor-ir__node--expand")}),k||(k=p.ir.element),!k.querySelector("wbr")){var Wt=(0,et.fb)(g.startContainer,"vditor-ir__preview");Wt?Wt.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>"):g.insertNode(document.createElement("wbr"))}k.querySelectorAll("[style]").forEach(function(ca){ca.removeAttribute("style")}),k.getAttribute("data-type")==="link-ref-defs-block"&&(k=p.ir.element);var tr,Vr=k.isEqualNode(p.ir.element),ba=(0,et.a1)(k,"data-type","footnotes-block"),Vn="";if(Vr)Vn=k.innerHTML;else{var ha=(0,Ot.S)(g.startContainer,"BLOCKQUOTE"),na=(0,et.O9)(g.startContainer);if(na&&(k=na),ha&&(!na||na&&!ha.contains(na))&&(k=ha),ba&&(k=ba),Vn=k.outerHTML,k.tagName==="UL"||k.tagName==="OL"){var Gr=k.previousElementSibling,sa=k.nextElementSibling;!Gr||Gr.tagName!=="UL"&&Gr.tagName!=="OL"||(Vn=Gr.outerHTML+Vn,Gr.remove()),!sa||sa.tagName!=="UL"&&sa.tagName!=="OL"||(Vn+=sa.outerHTML,sa.remove()),Vn=Vn.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else k.previousElementSibling&&k.previousElementSibling.textContent.replace(P.g.ZWSP,"")!==""&&I&&I.inputType==="insertParagraph"&&(Vn=k.previousElementSibling.outerHTML+Vn,k.previousElementSibling.remove());k.innerText.startsWith("```")||(p.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(ca){ca&&!k.isEqualNode(ca)&&(Vn+=ca.outerHTML,ca.remove())}),p.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(ca){ca&&!k.isEqualNode(ca)&&(Vn+=ca.outerHTML,ca.remove())}))}if(wt("SpinVditorIRDOM",Vn,"argument",p.options.debugger),Vn=p.lute.SpinVditorIRDOM(Vn),wt("SpinVditorIRDOM",Vn,"result",p.options.debugger),Vr)k.innerHTML=Vn;else if(k.outerHTML=Vn,ba){var la=(0,et.a1)(p.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(la){var $r=la.textContent,xa=$r.substring(1,$r.indexOf("]:")),vo=p.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+xa+'"]');vo&&vo.setAttribute("aria-label",$r.substr(xa.length+3).trim().substr(0,24))}}var io,lo=p.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");lo.forEach(function(ca,To){To===0?tr=ca:(tr.insertAdjacentHTML("beforeend",ca.innerHTML),ca.remove())}),lo.length>0&&p.ir.element.insertAdjacentElement("beforeend",lo[0]);var co=p.ir.element.querySelectorAll("[data-type='footnotes-block']");co.forEach(function(ca,To){To===0?io=ca:(io.insertAdjacentHTML("beforeend",ca.innerHTML),ca.remove())}),co.length>0&&p.ir.element.insertAdjacentElement("beforeend",co[0]),(0,vt.ib)(p.ir.element,g),p.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(ca){Dt(ca,p)}),nn(p),Nu(p,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},on=function(p,g){if(p==="")return!1;if(p.indexOf("⇧")===-1&&p.indexOf("⌘")===-1&&p.indexOf("⌥")===-1)return!((0,Be.yl)(g)||g.altKey||g.shiftKey||g.code!==p);if(p==="⇧Tab")return!((0,Be.yl)(g)||g.altKey||!g.shiftKey||g.code!=="Tab");var w=p.split("");if(p.startsWith("⌥")){var I=w.length===3?w[2]:w[1];return!((w.length===3?!(0,Be.yl)(g):(0,Be.yl)(g))||!g.altKey||g.shiftKey||g.code!==(/^[0-9]$/.test(I)?"Digit":"Key")+I)}p==="⌘Enter"&&(w=["⌘","Enter"]);var k=w.length>2&&w[0]==="⇧",Ue=k?w[2]:w[1];return!k||!(0,Be.vU)()&&/Mac/.test(navigator.platform)||(Ue==="-"?Ue="_":Ue==="="&&(Ue="+")),!(!(0,Be.yl)(g)||g.key.toLowerCase()!==Ue.toLowerCase()||g.altKey||!(!k&&!g.shiftKey||k&&g.shiftKey))},dt=function(p,g){g.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(ft){ft.classList.remove("vditor-ir__node--expand")});var w=(0,et.JQ)(p.startContainer,"vditor-ir__node"),I=!p.collapsed&&(0,et.JQ)(p.endContainer,"vditor-ir__node");if(p.collapsed||w&&w===I){w&&(w.classList.add("vditor-ir__node--expand"),w.classList.remove("vditor-ir__node--hidden"),(0,vt.Hc)(p));var k=function(ft){var Bt=ft.startContainer;if(Bt.nodeType===3&&Bt.nodeValue.length!==ft.startOffset)return!1;for(var Xt=Bt.nextSibling;Xt&&Xt.textContent==="";)Xt=Xt.nextSibling;if(!Xt){var Ut=(0,et.fb)(Bt,"vditor-ir__marker");if(Ut&&!Ut.nextSibling){var Wt=Bt.parentElement.parentElement.nextSibling;if(Wt&&Wt.nodeType!==3&&Wt.classList.contains("vditor-ir__node"))return Wt}return!1}return!(!Xt||Xt.nodeType===3||!Xt.classList.contains("vditor-ir__node")||Xt.getAttribute("data-block"))&&Xt}(p);if(k)return k.classList.add("vditor-ir__node--expand"),void k.classList.remove("vditor-ir__node--hidden");var Ue=function(ft){var Bt=ft.startContainer,Xt=Bt.previousSibling;return!(Bt.nodeType!==3||ft.startOffset!==0||!Xt||Xt.nodeType===3||!Xt.classList.contains("vditor-ir__node")||Xt.getAttribute("data-block"))&&Xt}(p);return Ue?(Ue.classList.add("vditor-ir__node--expand"),void Ue.classList.remove("vditor-ir__node--hidden")):void 0}},ur=We(863),dn=function(p,g){p.querySelectorAll("[data-type=footnotes-link]").forEach(function(w){for(var I=w.parentElement,k=I.nextSibling;k&&k.textContent.startsWith("    ");){var Ue=k;Ue.childNodes.forEach(function(ft){I.append(ft.cloneNode(!0))}),k=k.nextSibling,Ue.remove()}g&&g(I)})},en=function(p,g){var w,I=getSelection().getRangeAt(0).cloneRange(),k=I.startContainer;I.startContainer.nodeType!==3&&I.startContainer.tagName==="DIV"&&(k=I.startContainer.childNodes[I.startOffset-1]);var Ue=(0,et.a1)(k,"data-block","0");if(Ue&&g&&(g.inputType==="deleteContentBackward"||g.data===" ")){for(var ft=(0,vt.im)(Ue,p.sv.element,I).start,Bt=!0,Xt=ft-1;Xt>Ue.textContent.substr(0,ft).lastIndexOf(`
`);Xt--)if(Ue.textContent.charAt(Xt)!==" "&&Ue.textContent.charAt(Xt)!=="	"){Bt=!1;break}if(ft===0&&(Bt=!1),Bt)return void Fo(p);if(g.inputType==="deleteContentBackward"){var Ut=(0,et.a1)(k,"data-type","code-block-open-marker")||(0,et.a1)(k,"data-type","code-block-close-marker");if(Ut){var Wt;if(Ut.getAttribute("data-type")==="code-block-close-marker"&&(Wt=Ii(k,"code-block-open-marker"))||Ut.getAttribute("data-type")==="code-block-open-marker"&&(Wt=Ii(k,"code-block-close-marker",!1)))return Wt.textContent=Ut.textContent,void Fo(p)}var tr=(0,et.a1)(k,"data-type","math-block-open-marker");if(tr){var Vr=tr.nextElementSibling.nextElementSibling;return void(Vr&&Vr.getAttribute("data-type")==="math-block-close-marker"&&(Vr.remove(),Fo(p)))}Ue.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(Gr){Gr.textContent.length===1&&Gr.remove()}),Ue.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(Gr){Gr.textContent.length===1&&Gr.remove()});var ba=(0,et.a1)(k,"data-type","heading-marker");if(ba&&ba.textContent.indexOf("#")===-1)return void Fo(p)}if((g.data===" "||g.inputType==="deleteContentBackward")&&((0,et.a1)(k,"data-type","padding")||(0,et.a1)(k,"data-type","li-marker")||(0,et.a1)(k,"data-type","task-marker")||(0,et.a1)(k,"data-type","blockquote-marker")))return void Fo(p)}if(Ue&&Ue.textContent.trimRight()==="$$")Fo(p);else{Ue||(Ue=p.sv.element),((w=Ue.firstElementChild)===null||w===void 0?void 0:w.getAttribute("data-type"))==="link-ref-defs-block"&&(Ue=p.sv.element),(0,et.a1)(k,"data-type","footnotes-link")&&(Ue=p.sv.element),Ue.textContent.indexOf(Lute.Caret)===-1&&I.insertNode(document.createTextNode(Lute.Caret)),Ue.querySelectorAll("[style]").forEach(function(Gr){Gr.removeAttribute("style")}),Ue.querySelectorAll("font").forEach(function(Gr){Gr.outerHTML=Gr.innerHTML});var Vn=Ue.textContent,ha=Ue.isEqualNode(p.sv.element);if(ha)Vn=Ue.textContent;else{Ue.previousElementSibling&&(Vn=Ue.previousElementSibling.textContent+Vn,Ue.previousElementSibling.remove()),Ue.previousElementSibling&&Vn.indexOf(`---
`)===0&&(Vn=Ue.previousElementSibling.textContent+Vn,Ue.previousElementSibling.remove());var na="";p.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(Gr,sa){Gr&&!Ue.isEqualNode(Gr.parentElement)&&(na+=Gr.parentElement.textContent+`
`,Gr.parentElement.remove())}),p.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(Gr,sa){Gr&&!Ue.isEqualNode(Gr.parentElement)&&(na+=Gr.parentElement.textContent+`
`,Gr.parentElement.remove())}),Vn=na+Vn}Vn=xi(Vn,p),ha?Ue.innerHTML=Vn:Ue.outerHTML=Vn,p.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(Gr){p.sv.element.insertAdjacentElement("beforeend",Gr.parentElement)}),dn(p.sv.element,function(Gr){p.sv.element.insertAdjacentElement("beforeend",Gr)}),(0,vt.ib)(p.sv.element,I),Io(p),Fo(p,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})}},Nn=We(227),fn=function(p){p.options.theme==="dark"?p.element.classList.add("vditor--dark"):p.element.classList.remove("vditor--dark")},cn=function(p){var g=window.innerWidth<=P.g.MOBILE_WIDTH?10:35;if(p.wysiwyg.element.parentElement.style.display!=="none"){var w=(p.wysiwyg.element.parentElement.clientWidth-p.options.preview.maxWidth)/2;p.wysiwyg.element.style.padding="10px "+Math.max(g,w)+"px"}p.ir.element.parentElement.style.display!=="none"&&(w=(p.ir.element.parentElement.clientWidth-p.options.preview.maxWidth)/2,p.ir.element.style.padding="10px "+Math.max(g,w)+"px"),p.preview.element.style.display!=="block"?p.toolbar.element.style.paddingLeft=Math.max(5,parseInt(p[p.currentMode].element.style.paddingLeft||"0",10)+(p.options.outline.position==="left"?p.outline.element.offsetWidth:0))+"px":p.toolbar.element.style.paddingLeft=5+(p.options.outline.position==="left"?p.outline.element.offsetWidth:0)+"px"},hn=function(p){if(p.options.typewriterMode){var g=window.innerHeight;typeof p.options.height=="number"?(g=p.options.height,typeof p.options.minHeight=="number"&&(g=Math.max(g,p.options.minHeight)),g=Math.min(window.innerHeight,g)):g=p.element.clientHeight,p.element.classList.contains("vditor--fullscreen")&&(g=window.innerHeight),p[p.currentMode].element.style.setProperty("--editor-bottom",(g-p.toolbar.element.offsetHeight)/2+"px")}};function er(){window.removeEventListener("resize",Xe)}var Fn,Gn,va=function(p){hn(p),er(),window.addEventListener("resize",Xe=function(){cn(p),hn(p)});var g=(0,Be.pK)()&&localStorage.getItem(p.options.cache.id);return p.options.cache.enable&&g||(p.options.value?g=p.options.value:p.originalInnerHTML?g=p.lute.HTML2Md(p.originalInnerHTML):p.options.cache.enable||(g="")),g||""},tn=function(p){clearTimeout(p[p.currentMode].hlToolbarTimeoutId),p[p.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){if(p[p.currentMode].element.getAttribute("contenteditable")!=="false"&&(0,vt.Gb)(p[p.currentMode].element)){De(p.toolbar.elements,P.g.EDIT_TOOLBARS),Ye(p.toolbar.elements,P.g.EDIT_TOOLBARS);var g=(0,vt.zh)(p),w=g.startContainer;g.startContainer.nodeType===3&&(w=g.startContainer.parentElement),w.classList.contains("vditor-reset")&&(w=w.childNodes[g.startOffset]),(p.currentMode==="sv"?(0,et.a1)(w,"data-type","heading"):(0,Ot.W)(w))&&He(p.toolbar.elements,["headings"]),(p.currentMode==="sv"?(0,et.a1)(w,"data-type","blockquote"):(0,et.lG)(w,"BLOCKQUOTE"))&&He(p.toolbar.elements,["quote"]),(0,et.a1)(w,"data-type","strong")&&He(p.toolbar.elements,["bold"]),(0,et.a1)(w,"data-type","em")&&He(p.toolbar.elements,["italic"]),(0,et.a1)(w,"data-type","s")&&He(p.toolbar.elements,["strike"]),(0,et.a1)(w,"data-type","a")&&He(p.toolbar.elements,["link"]);var I=(0,et.lG)(w,"LI");I?(I.classList.contains("vditor-task")?He(p.toolbar.elements,["check"]):I.parentElement.tagName==="OL"?He(p.toolbar.elements,["ordered-list"]):I.parentElement.tagName==="UL"&&He(p.toolbar.elements,["list"]),Ye(p.toolbar.elements,["outdent","indent"])):st(p.toolbar.elements,["outdent","indent"]),(0,et.a1)(w,"data-type","code-block")&&(st(p.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),He(p.toolbar.elements,["code"])),(0,et.a1)(w,"data-type","code")&&(st(p.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),He(p.toolbar.elements,["inline-code"])),(0,et.a1)(w,"data-type","table")&&st(p.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])}},200)},Mn=function(p,g){g===void 0&&(g={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),g.enableHint&&p.hint.render(p),clearTimeout(p.wysiwyg.afterRenderTimeoutId),p.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){if(!p.wysiwyg.composingLock){var w=j(p);typeof p.options.input=="function"&&g.enableInput&&p.options.input(w),p.options.counter.enable&&p.counter.render(p,w),p.options.cache.enable&&(0,Be.pK)()&&(localStorage.setItem(p.options.cache.id,w),p.options.cache.after&&p.options.cache.after(w)),p.devtools&&p.devtools.renderEchart(p),g.enableAddUndoStack&&p.undo.addToUndoStack(p)}},p.options.undoDelay)},Rr=function(p){for(var g="",w=p.nextSibling;w;)w.nodeType===3?g+=w.textContent:g+=w.outerHTML,w=w.nextSibling;return g},Yr=function(p){for(var g="",w=p.previousSibling;w;)g=w.nodeType===3?w.textContent+g:w.outerHTML+g,w=w.previousSibling;return g},oa=function(p,g){Array.from(p.wysiwyg.element.childNodes).find(function(w){if(w.nodeType===3){var I=document.createElement("p");I.setAttribute("data-block","0"),I.textContent=w.textContent;var k=g.startContainer.nodeType===3?g.startOffset:w.textContent.length;return w.parentNode.insertBefore(I,w),w.remove(),g.setStart(I.firstChild,Math.min(I.firstChild.textContent.length,k)),g.collapse(!0),(0,vt.Hc)(g),!0}if(!w.getAttribute("data-block"))return w.tagName==="P"?w.remove():(w.tagName==="DIV"?(g.insertNode(document.createElement("wbr")),w.outerHTML='<p data-block="0">'+w.innerHTML+"</p>"):w.tagName==="BR"?w.outerHTML='<p data-block="0">'+w.outerHTML+"<wbr></p>":(g.insertNode(document.createElement("wbr")),w.outerHTML='<p data-block="0">'+w.outerHTML+"</p>"),(0,vt.ib)(p.wysiwyg.element,g),g=getSelection().getRangeAt(0)),!0})},pa=function(p,g){var w=(0,vt.zh)(p),I=(0,et.F9)(w.startContainer);I||(I=w.startContainer.childNodes[w.startOffset]),I||p.wysiwyg.element.children.length!==0||(I=p.wysiwyg.element),I&&!I.classList.contains("vditor-wysiwyg__block")&&(w.insertNode(document.createElement("wbr")),I.innerHTML.trim()==="<wbr>"&&(I.innerHTML="<wbr><br>"),I.tagName==="BLOCKQUOTE"||I.classList.contains("vditor-reset")?I.innerHTML="<"+g+' data-block="0">'+I.innerHTML.trim()+"</"+g+">":I.outerHTML="<"+g+' data-block="0">'+I.innerHTML.trim()+"</"+g+">",(0,vt.ib)(p.wysiwyg.element,w),nn(p))},Ga=function(p){var g=getSelection().getRangeAt(0),w=(0,et.F9)(g.startContainer);w||(w=g.startContainer.childNodes[g.startOffset]),w&&(g.insertNode(document.createElement("wbr")),w.outerHTML='<p data-block="0">'+w.innerHTML+"</p>",(0,vt.ib)(p.wysiwyg.element,g)),p.wysiwyg.popover.style.display="none"},fo=function(p,g,w){w===void 0&&(w=!0);var I=p.previousElementSibling,k=I.ownerDocument.createRange();I.tagName==="CODE"?(I.style.display="inline-block",w?k.setStart(I.firstChild,1):k.selectNodeContents(I)):(I.style.display="block",I.firstChild.firstChild||I.firstChild.appendChild(document.createTextNode("")),k.selectNodeContents(I.firstChild)),w?k.collapse(!0):k.collapse(!1),(0,vt.Hc)(k),p.firstElementChild.classList.contains("language-mindmap")||Io(g)},oo=function(p,g){if(on("⇧⌘X",g)){var w=p.wysiwyg.popover.querySelector('[data-type="remove"]');return w&&w.click(),g.preventDefault(),!0}},fr=function(p){clearTimeout(p.wysiwyg.hlToolbarTimeoutId),p.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){if(p.wysiwyg.element.getAttribute("contenteditable")!=="false"&&(0,vt.Gb)(p.wysiwyg.element)){De(p.toolbar.elements,P.g.EDIT_TOOLBARS),Ye(p.toolbar.elements,P.g.EDIT_TOOLBARS);var g=getSelection().getRangeAt(0),w=g.startContainer;w=g.startContainer.nodeType===3?g.startContainer.parentElement:w.childNodes[g.startOffset>=w.childNodes.length?w.childNodes.length-1:g.startOffset];var I=(0,et.a1)(w,"data-type","footnotes-block");if(I)return p.wysiwyg.popover.innerHTML="",dr(I,p),void sr(p,I);var k=(0,et.lG)(w,"LI");k?(k.classList.contains("vditor-task")?He(p.toolbar.elements,["check"]):k.parentElement.tagName==="OL"?He(p.toolbar.elements,["ordered-list"]):k.parentElement.tagName==="UL"&&He(p.toolbar.elements,["list"]),Ye(p.toolbar.elements,["outdent","indent"])):st(p.toolbar.elements,["outdent","indent"]),(0,et.lG)(w,"BLOCKQUOTE")&&He(p.toolbar.elements,["quote"]),((0,et.lG)(w,"B")||(0,et.lG)(w,"STRONG"))&&He(p.toolbar.elements,["bold"]),((0,et.lG)(w,"I")||(0,et.lG)(w,"EM"))&&He(p.toolbar.elements,["italic"]),((0,et.lG)(w,"STRIKE")||(0,et.lG)(w,"S"))&&He(p.toolbar.elements,["strike"]),p.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(Ta){Ta.classList.remove("vditor-comment--focus")});var Ue=(0,et.fb)(w,"vditor-comment");if(Ue){var ft=Ue.getAttribute("data-cmtids").split(" ");if(ft.length>1&&Ue.nextSibling.isSameNode(Ue.nextElementSibling)){var Bt=Ue.nextElementSibling.getAttribute("data-cmtids").split(" ");ft.find(function(Ta){if(Bt.includes(Ta))return ft=[Ta],!0})}p.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(Ta){Ta.getAttribute("data-cmtids").indexOf(ft[0])>-1&&Ta.classList.add("vditor-comment--focus")})}var Xt=(0,et.lG)(w,"A");Xt&&He(p.toolbar.elements,["link"]);var Ut=(0,et.lG)(w,"TABLE"),Wt=(0,Ot.W)(w);(0,et.lG)(w,"CODE")?(0,et.lG)(w,"PRE")?(st(p.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),He(p.toolbar.elements,["code"])):(st(p.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),He(p.toolbar.elements,["inline-code"])):Wt?(st(p.toolbar.elements,["bold"]),He(p.toolbar.elements,["headings"])):Ut&&st(p.toolbar.elements,["table"]);var tr=(0,et.fb)(w,"vditor-toc");if(tr)return p.wysiwyg.popover.innerHTML="",dr(tr,p),void sr(p,tr);var Vr=(0,Ot.S)(w,"BLOCKQUOTE");if(Vr&&(p.wysiwyg.popover.innerHTML="",Tn(g,Vr,p),Rn(g,Vr,p),dr(Vr,p),sr(p,Vr)),k&&(p.wysiwyg.popover.innerHTML="",Tn(g,k,p),Rn(g,k,p),dr(k,p),sr(p,k)),Ut){p.options.lang,p.options,p.wysiwyg.popover.innerHTML="";var ba=function(){var Ta=Ut.rows.length,ma=Ut.rows[0].cells.length,Lu=parseInt(To.value,10)||Ta,tl=parseInt(Wo.value,10)||ma;if(Lu!==Ta||ma!==tl){if(ma!==tl)for(var rd=tl-ma,Nf=0;Nf<Ut.rows.length;Nf++)if(rd>0)for(var xc=0;xc<rd;xc++)Nf===0?Ut.rows[Nf].lastElementChild.insertAdjacentHTML("afterend","<th> </th>"):Ut.rows[Nf].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var Zi=ma-1;Zi>=tl;Zi--)Ut.rows[Nf].cells[Zi].remove();if(Ta!==Lu){var au=Lu-Ta;if(au>0){for(var Rl="<tr>",ju=0;ju<tl;ju++)Rl+="<td> </td>";for(var ia=0;ia<au;ia++)Ut.querySelector("tbody")?Ut.querySelector("tbody").insertAdjacentHTML("beforeend",Rl):Ut.querySelector("thead").insertAdjacentHTML("afterend",Rl+"</tr>")}else for(ju=Ta-1;ju>=Lu;ju--)Ut.rows[ju].remove(),Ut.rows.length===1&&Ut.querySelector("tbody").remove()}typeof p.options.input=="function"&&p.options.input(j(p))}},Vn=function(Ta){gn(Ut,Ta),Ta==="right"?(sa.classList.remove("vditor-icon--current"),la.classList.remove("vditor-icon--current"),$r.classList.add("vditor-icon--current")):Ta==="center"?(sa.classList.remove("vditor-icon--current"),$r.classList.remove("vditor-icon--current"),la.classList.add("vditor-icon--current")):(la.classList.remove("vditor-icon--current"),$r.classList.remove("vditor-icon--current"),sa.classList.add("vditor-icon--current")),(0,vt.Hc)(g),Mn(p)},ha=(0,et.lG)(w,"TD"),na=(0,et.lG)(w,"TH"),Gr="left";ha?Gr=ha.getAttribute("align")||"left":na&&(Gr=na.getAttribute("align")||"center");var sa=document.createElement("button");sa.setAttribute("type","button"),sa.setAttribute("aria-label",window.VditorI18n.alignLeft+"<"+(0,Be.ns)("⇧⌘L")+">"),sa.setAttribute("data-type","left"),sa.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',sa.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(Gr==="left"?" vditor-icon--current":""),sa.onclick=function(){Vn("left")};var la=document.createElement("button");la.setAttribute("type","button"),la.setAttribute("aria-label",window.VditorI18n.alignCenter+"<"+(0,Be.ns)("⇧⌘C")+">"),la.setAttribute("data-type","center"),la.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',la.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(Gr==="center"?" vditor-icon--current":""),la.onclick=function(){Vn("center")};var $r=document.createElement("button");$r.setAttribute("type","button"),$r.setAttribute("aria-label",window.VditorI18n.alignRight+"<"+(0,Be.ns)("⇧⌘R")+">"),$r.setAttribute("data-type","right"),$r.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',$r.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(Gr==="right"?" vditor-icon--current":""),$r.onclick=function(){Vn("right")};var xa=document.createElement("button");xa.setAttribute("type","button"),xa.setAttribute("aria-label",window.VditorI18n.insertRowBelow+"<"+(0,Be.ns)("⌘=")+">"),xa.setAttribute("data-type","insertRow"),xa.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',xa.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",xa.onclick=function(){var Ta=getSelection().getRangeAt(0).startContainer,ma=(0,et.lG)(Ta,"TD")||(0,et.lG)(Ta,"TH");ma&&Ha(p,g,ma)};var vo=document.createElement("button");vo.setAttribute("type","button"),vo.setAttribute("aria-label",window.VditorI18n.insertRowAbove+"<"+(0,Be.ns)("⇧⌘F")+">"),vo.setAttribute("data-type","insertRow"),vo.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',vo.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",vo.onclick=function(){var Ta=getSelection().getRangeAt(0).startContainer,ma=(0,et.lG)(Ta,"TD")||(0,et.lG)(Ta,"TH");ma&&Ya(p,g,ma)};var io=document.createElement("button");io.setAttribute("type","button"),io.setAttribute("aria-label",window.VditorI18n.insertColumnRight+"<"+(0,Be.ns)("⇧⌘=")+">"),io.setAttribute("data-type","insertColumn"),io.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',io.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",io.onclick=function(){var Ta=getSelection().getRangeAt(0).startContainer,ma=(0,et.lG)(Ta,"TD")||(0,et.lG)(Ta,"TH");ma&&Lo(p,Ut,ma)};var lo=document.createElement("button");lo.setAttribute("type","button"),lo.setAttribute("aria-label",window.VditorI18n.insertColumnLeft+"<"+(0,Be.ns)("⇧⌘G")+">"),lo.setAttribute("data-type","insertColumn"),lo.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',lo.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",lo.onclick=function(){var Ta=getSelection().getRangeAt(0).startContainer,ma=(0,et.lG)(Ta,"TD")||(0,et.lG)(Ta,"TH");ma&&Lo(p,Ut,ma,"beforebegin")};var co=document.createElement("button");co.setAttribute("type","button"),co.setAttribute("aria-label",window.VditorI18n["delete-row"]+"<"+(0,Be.ns)("⌘-")+">"),co.setAttribute("data-type","deleteRow"),co.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',co.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",co.onclick=function(){var Ta=getSelection().getRangeAt(0).startContainer,ma=(0,et.lG)(Ta,"TD")||(0,et.lG)(Ta,"TH");ma&&ki(p,g,ma)};var ca=document.createElement("button");ca.setAttribute("type","button"),ca.setAttribute("aria-label",window.VditorI18n["delete-column"]+"<"+(0,Be.ns)("⇧⌘-")+">"),ca.setAttribute("data-type","deleteColumn"),ca.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',ca.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",ca.onclick=function(){var Ta=getSelection().getRangeAt(0).startContainer,ma=(0,et.lG)(Ta,"TD")||(0,et.lG)(Ta,"TH");ma&&Du(p,g,Ut,ma)},(el=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.row),el.className="vditor-tooltipped vditor-tooltipped__n";var To=document.createElement("input");el.appendChild(To),To.type="number",To.min="1",To.className="vditor-input",To.style.width="42px",To.style.textAlign="center",To.setAttribute("placeholder",window.VditorI18n.row),To.value=Ut.rows.length.toString(),To.oninput=function(){ba()},To.onkeydown=function(Ta){if(!Ta.isComposing)return Ta.key==="Tab"?(Wo.focus(),Wo.select(),void Ta.preventDefault()):void(oo(p,Ta)||Cn(Ta,g))};var di=document.createElement("span");di.setAttribute("aria-label",window.VditorI18n.column),di.className="vditor-tooltipped vditor-tooltipped__n";var Wo=document.createElement("input");di.appendChild(Wo),Wo.type="number",Wo.min="1",Wo.className="vditor-input",Wo.style.width="42px",Wo.style.textAlign="center",Wo.setAttribute("placeholder",window.VditorI18n.column),Wo.value=Ut.rows[0].cells.length.toString(),Wo.oninput=function(){ba()},Wo.onkeydown=function(Ta){if(!Ta.isComposing)return Ta.key==="Tab"?(To.focus(),To.select(),void Ta.preventDefault()):void(oo(p,Ta)||Cn(Ta,g))},Tn(g,Ut,p),Rn(g,Ut,p),dr(Ut,p),p.wysiwyg.popover.insertAdjacentElement("beforeend",sa),p.wysiwyg.popover.insertAdjacentElement("beforeend",la),p.wysiwyg.popover.insertAdjacentElement("beforeend",$r),p.wysiwyg.popover.insertAdjacentElement("beforeend",vo),p.wysiwyg.popover.insertAdjacentElement("beforeend",xa),p.wysiwyg.popover.insertAdjacentElement("beforeend",lo),p.wysiwyg.popover.insertAdjacentElement("beforeend",io),p.wysiwyg.popover.insertAdjacentElement("beforeend",co),p.wysiwyg.popover.insertAdjacentElement("beforeend",ca),p.wysiwyg.popover.insertAdjacentElement("beforeend",el),p.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),p.wysiwyg.popover.insertAdjacentElement("beforeend",di),sr(p,Ut)}var ls=(0,et.a1)(w,"data-type","link-ref");ls&&mr(p,ls,g);var ks=(0,et.a1)(w,"data-type","footnotes-ref");if(ks){p.options.lang,p.options,p.wysiwyg.popover.innerHTML="",(el=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.footnoteRef+"<"+(0,Be.ns)("⌥Enter")+">"),el.className="vditor-tooltipped vditor-tooltipped__n";var yu=document.createElement("input");el.appendChild(yu),yu.className="vditor-input",yu.setAttribute("placeholder",window.VditorI18n.footnoteRef+"<"+(0,Be.ns)("⌥Enter")+">"),yu.style.width="120px",yu.value=ks.getAttribute("data-footnotes-label"),yu.oninput=function(){yu.value.trim()!==""&&ks.setAttribute("data-footnotes-label",yu.value),typeof p.options.input=="function"&&p.options.input(j(p))},yu.onkeydown=function(Ta){Ta.isComposing||oo(p,Ta)||Cn(Ta,g)},dr(ks,p),p.wysiwyg.popover.insertAdjacentElement("beforeend",el),sr(p,ks)}var Ki=(0,et.fb)(w,"vditor-wysiwyg__block"),Uu=!!Ki&&Ki.getAttribute("data-type").indexOf("block")>-1;if(p.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(Ta){(!Ki||Ki&&Uu&&!Ki.contains(Ta))&&(Ta.previousElementSibling.style.display="none")}),Ki&&Uu){if(p.wysiwyg.popover.innerHTML="",Tn(g,Ki,p),Rn(g,Ki,p),dr(Ki,p),Ki.getAttribute("data-type")==="code-block"){var Df=document.createElement("span");Df.setAttribute("aria-label",window.VditorI18n.language+"<"+(0,Be.ns)("⌥Enter")+">"),Df.className="vditor-tooltipped vditor-tooltipped__n";var Ji=document.createElement("input");Df.appendChild(Ji);var Sc=Ki.firstElementChild.firstElementChild;Ji.className="vditor-input",Ji.setAttribute("placeholder",window.VditorI18n.language+"<"+(0,Be.ns)("⌥Enter")+">"),Ji.value=Sc.className.indexOf("language-")>-1?Sc.className.split("-")[1].split(" ")[0]:"",Ji.oninput=function(Ta){Ji.value.trim()!==""?Sc.className="language-"+Ji.value:(Sc.className="",p.hint.recentLanguage=""),Ki.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(Ki.lastElementChild.innerHTML=Ki.firstElementChild.innerHTML,Dt(Ki.lastElementChild,p)),Mn(p),Ta.detail===1&&(g.setStart(Sc.firstChild,0),g.collapse(!0),(0,vt.Hc)(g))},Ji.onkeydown=function(Ta){if(!Ta.isComposing&&!oo(p,Ta)){if(Ta.key==="Escape"&&p.hint.element.style.display==="block")return p.hint.element.style.display="none",void Ta.preventDefault();p.hint.select(Ta,p),Cn(Ta,g)}},Ji.onkeyup=function(Ta){if(!Ta.isComposing&&Ta.key!=="Enter"&&Ta.key!=="ArrowUp"&&Ta.key!=="Escape"&&Ta.key!=="ArrowDown"){var ma=[],Lu=Ji.value.substring(0,Ji.selectionStart);(p.options.preview.hljs.langs||P.g.CODE_LANGUAGES).forEach(function(tl){tl.indexOf(Lu.toLowerCase())>-1&&ma.push({html:tl,value:tl})}),p.hint.genHTML(ma,Lu,p),Ta.preventDefault()}},p.wysiwyg.popover.insertAdjacentElement("beforeend",Df)}sr(p,Ki)}else Ki=void 0;if(Wt){var el;p.wysiwyg.popover.innerHTML="",(el=document.createElement("span")).setAttribute("aria-label","ID<"+(0,Be.ns)("⌥Enter")+">"),el.className="vditor-tooltipped vditor-tooltipped__n";var Nl=document.createElement("input");el.appendChild(Nl),Nl.className="vditor-input",Nl.setAttribute("placeholder","ID<"+(0,Be.ns)("⌥Enter")+">"),Nl.style.width="120px",Nl.value=Wt.getAttribute("data-id")||"",Nl.oninput=function(){Wt.setAttribute("data-id",Nl.value),typeof p.options.input=="function"&&p.options.input(j(p))},Nl.onkeydown=function(Ta){Ta.isComposing||oo(p,Ta)||Cn(Ta,g)},Tn(g,Wt,p),Rn(g,Wt,p),dr(Wt,p),p.wysiwyg.popover.insertAdjacentElement("beforeend",el),sr(p,Wt)}if(Xt&&br(p,Xt,g),!(Vr||k||Ut||Ki||Xt||ls||ks||Wt||tr)){var Ll=(0,et.a1)(w,"data-block","0");Ll&&Ll.parentElement.isEqualNode(p.wysiwyg.element)?(p.wysiwyg.popover.innerHTML="",Tn(g,Ll,p),Rn(g,Ll,p),dr(Ll,p),sr(p,Ll)):p.wysiwyg.popover.style.display="none"}p.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(Ta){Ta.style.display="none"});var jc=(0,et.a1)(g.startContainer,"data-type","backslash");jc&&(jc.querySelector("span").style.display="inline")}},200)},sr=function(p,g){var w=g,I=(0,et.lG)(g,"TABLE");I&&(w=I),p.wysiwyg.popover.style.left="0",p.wysiwyg.popover.style.display="block",p.wysiwyg.popover.style.top=Math.max(-8,w.offsetTop-21-p.wysiwyg.element.scrollTop)+"px",p.wysiwyg.popover.style.left=Math.min(w.offsetLeft,p.wysiwyg.element.clientWidth-p.wysiwyg.popover.clientWidth)+"px",p.wysiwyg.popover.setAttribute("data-top",(w.offsetTop-21).toString())},mr=function(p,g,w){w===void 0&&(w=getSelection().getRangeAt(0)),p.wysiwyg.popover.innerHTML="";var I=function(){Ue.value.trim()!==""&&(g.tagName==="IMG"?g.setAttribute("alt",Ue.value):g.textContent=Ue.value),Bt.value.trim()!==""&&g.setAttribute("data-link-label",Bt.value),typeof p.options.input=="function"&&p.options.input(j(p))},k=document.createElement("span");k.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),k.className="vditor-tooltipped vditor-tooltipped__n";var Ue=document.createElement("input");k.appendChild(Ue),Ue.className="vditor-input",Ue.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),Ue.style.width="120px",Ue.value=g.getAttribute("alt")||g.textContent,Ue.oninput=function(){I()},Ue.onkeydown=function(Xt){oo(p,Xt)||Cn(Xt,w)||Pr(p,g,Xt,Bt)};var ft=document.createElement("span");ft.setAttribute("aria-label",window.VditorI18n.linkRef),ft.className="vditor-tooltipped vditor-tooltipped__n";var Bt=document.createElement("input");ft.appendChild(Bt),Bt.className="vditor-input",Bt.setAttribute("placeholder",window.VditorI18n.linkRef),Bt.value=g.getAttribute("data-link-label"),Bt.oninput=function(){I()},Bt.onkeydown=function(Xt){oo(p,Xt)||Cn(Xt,w)||Pr(p,g,Xt,Ue)},dr(g,p),p.wysiwyg.popover.insertAdjacentElement("beforeend",k),p.wysiwyg.popover.insertAdjacentElement("beforeend",ft),sr(p,g)},Tn=function(p,g,w){var I=g.previousElementSibling;if(I&&(g.parentElement.isEqualNode(w.wysiwyg.element)||g.tagName==="LI")){var k=document.createElement("button");k.setAttribute("type","button"),k.setAttribute("data-type","up"),k.setAttribute("aria-label",window.VditorI18n.up+"<"+(0,Be.ns)("⇧⌘U")+">"),k.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',k.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",k.onclick=function(){p.insertNode(document.createElement("wbr")),I.insertAdjacentElement("beforebegin",g),(0,vt.ib)(w.wysiwyg.element,p),Mn(w),fr(w),Io(w)},w.wysiwyg.popover.insertAdjacentElement("beforeend",k)}},Rn=function(p,g,w){var I=g.nextElementSibling;if(I&&(g.parentElement.isEqualNode(w.wysiwyg.element)||g.tagName==="LI")){var k=document.createElement("button");k.setAttribute("type","button"),k.setAttribute("data-type","down"),k.setAttribute("aria-label",window.VditorI18n.down+"<"+(0,Be.ns)("⇧⌘D")+">"),k.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',k.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",k.onclick=function(){p.insertNode(document.createElement("wbr")),I.insertAdjacentElement("afterend",g),(0,vt.ib)(w.wysiwyg.element,p),Mn(w),fr(w),Io(w)},w.wysiwyg.popover.insertAdjacentElement("beforeend",k)}},dr=function(p,g){var w=document.createElement("button");w.setAttribute("type","button"),w.setAttribute("data-type","remove"),w.setAttribute("aria-label",window.VditorI18n.remove+"<"+(0,Be.ns)("⇧⌘X")+">"),w.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',w.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",w.onclick=function(){var I=(0,vt.zh)(g);I.setStartAfter(p),(0,vt.Hc)(I),p.remove(),Mn(g),fr(g),["H1","H2","H3","H4","H5","H6"].includes(p.tagName)&&nn(g)},g.wysiwyg.popover.insertAdjacentElement("beforeend",w)},Pr=function(p,g,w,I){if(!w.isComposing){if(w.key==="Tab")return I.focus(),I.select(),void w.preventDefault();if(!(0,Be.yl)(w)&&!w.shiftKey&&w.altKey&&w.key==="Enter"){var k=(0,vt.zh)(p);g.insertAdjacentHTML("afterend",P.g.ZWSP),k.setStartAfter(g.nextSibling),k.collapse(!0),(0,vt.Hc)(k),w.preventDefault()}}},br=function(p,g,w){p.wysiwyg.popover.innerHTML="";var I=function(){Ue.value.trim()!==""&&(g.innerHTML=Ue.value),g.setAttribute("href",Bt.value),g.setAttribute("title",Ut.value),Mn(p)};g.querySelectorAll("[data-marker]").forEach(function(Wt){Wt.removeAttribute("data-marker")});var k=document.createElement("span");k.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),k.className="vditor-tooltipped vditor-tooltipped__n";var Ue=document.createElement("input");k.appendChild(Ue),Ue.className="vditor-input",Ue.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),Ue.style.width="120px",Ue.value=g.innerHTML||"",Ue.oninput=function(){I()},Ue.onkeydown=function(Wt){oo(p,Wt)||Cn(Wt,w)||Pr(p,g,Wt,Bt)};var ft=document.createElement("span");ft.setAttribute("aria-label",window.VditorI18n.link),ft.className="vditor-tooltipped vditor-tooltipped__n";var Bt=document.createElement("input");ft.appendChild(Bt),Bt.className="vditor-input",Bt.setAttribute("placeholder",window.VditorI18n.link),Bt.value=g.getAttribute("href")||"",Bt.oninput=function(){I()},Bt.onkeydown=function(Wt){oo(p,Wt)||Cn(Wt,w)||Pr(p,g,Wt,Ut)};var Xt=document.createElement("span");Xt.setAttribute("aria-label",window.VditorI18n.tooltipText),Xt.className="vditor-tooltipped vditor-tooltipped__n";var Ut=document.createElement("input");Xt.appendChild(Ut),Ut.className="vditor-input",Ut.setAttribute("placeholder",window.VditorI18n.tooltipText),Ut.style.width="60px",Ut.value=g.getAttribute("title")||"",Ut.oninput=function(){I()},Ut.onkeydown=function(Wt){oo(p,Wt)||Cn(Wt,w)||Pr(p,g,Wt,Ue)},dr(g,p),p.wysiwyg.popover.insertAdjacentElement("beforeend",k),p.wysiwyg.popover.insertAdjacentElement("beforeend",ft),p.wysiwyg.popover.insertAdjacentElement("beforeend",Xt),sr(p,g)},Cn=function(p,g){if(!(0,Be.yl)(p)&&!p.shiftKey&&p.key==="Enter"||p.key==="Escape")return g&&(0,vt.Hc)(g),p.preventDefault(),p.stopPropagation(),!0},cr=function(p){p.currentMode==="wysiwyg"?fr(p):p.currentMode==="ir"&&tn(p)},zr=function(p,g,w){w===void 0&&(w={enableAddUndoStack:!0,enableHint:!1,enableInput:!0});var I=p.wysiwyg.element;I.innerHTML=p.lute.Md2VditorDOM(g),I.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(k){Dt(k,p),k.previousElementSibling.setAttribute("style","display:none")}),Mn(p,w)},Nr=function(p,g,w){for(var I=p.startContainer.parentElement,k=!1,Ue="",ft="",Bt=function(Vn){var ha=Yr(Vn.startContainer),na=Rr(Vn.startContainer),Gr=Vn.startContainer.textContent,sa=Vn.startOffset,la="",$r="";return(Gr.substr(0,sa)!==""&&Gr.substr(0,sa)!==P.g.ZWSP||ha)&&(la=""+ha+Gr.substr(0,sa)),(Gr.substr(sa)!==""&&Gr.substr(sa)!==P.g.ZWSP||na)&&($r=""+Gr.substr(sa)+na),{afterHTML:$r,beforeHTML:la}}(p),Xt=Bt.beforeHTML,Ut=Bt.afterHTML;I&&!k;){var Wt=I.tagName;if(Wt==="STRIKE"&&(Wt="S"),Wt==="I"&&(Wt="EM"),Wt==="B"&&(Wt="STRONG"),Wt==="S"||Wt==="STRONG"||Wt==="EM"){var tr="",Vr="",ba="";I.parentElement.getAttribute("data-block")!=="0"&&(Vr=Yr(I),ba=Rr(I)),(Xt||Vr)&&(Xt=tr=Vr+"<"+Wt+">"+Xt+"</"+Wt+">"),(w==="bold"&&Wt==="STRONG"||w==="italic"&&Wt==="EM"||w==="strikeThrough"&&Wt==="S")&&(tr+=""+Ue+P.g.ZWSP+"<wbr>"+ft,k=!0),(Ut||ba)&&(tr+=Ut="<"+Wt+">"+Ut+"</"+Wt+">"+ba),I.parentElement.getAttribute("data-block")!=="0"?(I=I.parentElement).innerHTML=tr:(I.outerHTML=tr,I=I.parentElement),Ue="<"+Wt+">"+Ue,ft="</"+Wt+">"+ft}else k=!0}(0,vt.ib)(g.wysiwyg.element,p)},Ar=function(p,g){var w,I=this;this.element=document.createElement("div"),g.className&&(w=this.element.classList).add.apply(w,g.className.split(" "));var k=g.hotkey?" <"+(0,Be.ns)(g.hotkey)+">":"";g.level===2&&(k=g.hotkey?" &lt;"+(0,Be.ns)(g.hotkey)+"&gt;":"");var Ue=g.tip?g.tip+k:""+window.VditorI18n[g.name]+k,ft=g.name==="upload"?"div":"button";if(g.level===2)this.element.innerHTML="<"+ft+' data-type="'+g.name+'">'+Ue+"</"+ft+">";else{this.element.classList.add("vditor-toolbar__item");var Bt=document.createElement(ft);Bt.setAttribute("data-type",g.name),Bt.className="vditor-tooltipped vditor-tooltipped__"+g.tipPosition,Bt.setAttribute("aria-label",Ue),Bt.innerHTML=g.icon,this.element.appendChild(Bt)}g.prefix&&this.element.children[0].addEventListener((0,Be.Le)(),function(Xt){Xt.preventDefault(),I.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)||(p.currentMode==="wysiwyg"?function(Ut,Wt,tr){if(!(Ut.wysiwyg.composingLock&&tr instanceof CustomEvent)){var Vr=!0,ba=!0;Ut.wysiwyg.element.querySelector("wbr")&&Ut.wysiwyg.element.querySelector("wbr").remove();var Vn=(0,vt.zh)(Ut),ha=Wt.getAttribute("data-type");if(Wt.classList.contains("vditor-menu--current"))if(ha==="strike"&&(ha="strikeThrough"),ha==="quote"){var na=(0,et.lG)(Vn.startContainer,"BLOCKQUOTE");na||(na=Vn.startContainer.childNodes[Vn.startOffset]),na&&(Vr=!1,Wt.classList.remove("vditor-menu--current"),Vn.insertNode(document.createElement("wbr")),na.outerHTML=na.innerHTML.trim()===""?'<p data-block="0">'+na.innerHTML+"</p>":na.innerHTML,(0,vt.ib)(Ut.wysiwyg.element,Vn))}else if(ha==="inline-code"){var Gr=(0,et.lG)(Vn.startContainer,"CODE");Gr||(Gr=Vn.startContainer.childNodes[Vn.startOffset]),Gr&&(Gr.outerHTML=Gr.innerHTML.replace(P.g.ZWSP,"")+"<wbr>",(0,vt.ib)(Ut.wysiwyg.element,Vn))}else ha==="link"?(Vn.collapsed&&Vn.selectNode(Vn.startContainer.parentElement),document.execCommand("unlink",!1,"")):ha==="check"||ha==="list"||ha==="ordered-list"?(mt(Ut,Vn,ha),(0,vt.ib)(Ut.wysiwyg.element,Vn),Vr=!1,Wt.classList.remove("vditor-menu--current")):(Vr=!1,Wt.classList.remove("vditor-menu--current"),Vn.toString()===""?Nr(Vn,Ut,ha):document.execCommand(ha,!1,""));else{Ut.wysiwyg.element.childNodes.length===0&&(Ut.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',(0,vt.ib)(Ut.wysiwyg.element,Vn));var sa=(0,et.F9)(Vn.startContainer);if(ha==="quote"){if(sa||(sa=Vn.startContainer.childNodes[Vn.startOffset]),sa){Vr=!1,Wt.classList.add("vditor-menu--current"),Vn.insertNode(document.createElement("wbr"));var la=(0,et.lG)(Vn.startContainer,"LI");la&&sa.contains(la)?la.innerHTML='<blockquote data-block="0">'+la.innerHTML+"</blockquote>":sa.outerHTML='<blockquote data-block="0">'+sa.outerHTML+"</blockquote>",(0,vt.ib)(Ut.wysiwyg.element,Vn)}}else if(ha==="check"||ha==="list"||ha==="ordered-list")mt(Ut,Vn,ha,!1),(0,vt.ib)(Ut.wysiwyg.element,Vn),Vr=!1,De(Ut.toolbar.elements,["check","list","ordered-list"]),Wt.classList.add("vditor-menu--current");else if(ha==="inline-code"){if(Vn.toString()==="")($r=document.createElement("code")).textContent=P.g.ZWSP,Vn.insertNode($r),Vn.setStart($r.firstChild,1),Vn.collapse(!0),(0,vt.Hc)(Vn);else if(Vn.startContainer.nodeType===3){var $r=document.createElement("code");Vn.surroundContents($r),Vn.insertNode($r),(0,vt.Hc)(Vn)}Wt.classList.add("vditor-menu--current")}else if(ha==="code")($r=document.createElement("div")).className="vditor-wysiwyg__block",$r.setAttribute("data-type","code-block"),$r.setAttribute("data-block","0"),$r.setAttribute("data-marker","```"),Vn.toString()===""?$r.innerHTML=`<pre><code><wbr>
</code></pre>`:($r.innerHTML="<pre><code>"+Vn.toString()+"<wbr></code></pre>",Vn.deleteContents()),Vn.insertNode($r),sa&&(sa.outerHTML=Ut.lute.SpinVditorDOM(sa.outerHTML)),(0,vt.ib)(Ut.wysiwyg.element,Vn),Ut.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(Wo){Dt(Wo,Ut)}),Wt.classList.add("vditor-menu--disabled");else if(ha==="link"){if(Vn.toString()===""){var xa=document.createElement("a");xa.innerText=P.g.ZWSP,Vn.insertNode(xa),Vn.setStart(xa.firstChild,1),Vn.collapse(!0),br(Ut,xa,Vn);var vo=Ut.wysiwyg.popover.querySelector("input");vo.value="",vo.focus(),ba=!1}else{($r=document.createElement("a")).setAttribute("href",""),$r.innerHTML=Vn.toString(),Vn.surroundContents($r),Vn.insertNode($r),(0,vt.Hc)(Vn),br(Ut,$r,Vn);var io=Ut.wysiwyg.popover.querySelectorAll("input");io[0].value=$r.innerText,io[1].focus()}Vr=!1,Wt.classList.add("vditor-menu--current")}else if(ha==="table"){var lo='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(Vn.toString().trim()==="")sa&&sa.innerHTML.trim().replace(P.g.ZWSP,"")===""?sa.outerHTML=lo:document.execCommand("insertHTML",!1,lo),Vn.selectNode(Ut.wysiwyg.element.querySelector("wbr").previousSibling),Ut.wysiwyg.element.querySelector("wbr").remove(),(0,vt.Hc)(Vn);else{lo='<table data-block="0"><thead><tr>';var co=Vn.toString().split(`
`),ca=co[0].split(",").length>co[0].split("	").length?",":"	";co.forEach(function(Wo,ls){ls===0?(Wo.split(ca).forEach(function(ks,yu){lo+=yu===0?"<th>"+ks+"<wbr></th>":"<th>"+ks+"</th>"}),lo+="</tr></thead>"):(lo+=ls===1?"<tbody><tr>":"<tr>",Wo.split(ca).forEach(function(ks){lo+="<td>"+ks+"</td>"}),lo+="</tr>")}),lo+="</tbody></table>",document.execCommand("insertHTML",!1,lo),(0,vt.ib)(Ut.wysiwyg.element,Vn)}Vr=!1,Wt.classList.add("vditor-menu--disabled")}else if(ha==="line"){if(sa){var To=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;sa.innerHTML.trim()===""?sa.outerHTML=To:sa.insertAdjacentHTML("afterend",To),(0,vt.ib)(Ut.wysiwyg.element,Vn)}}else if(Vr=!1,Wt.classList.add("vditor-menu--current"),ha==="strike"&&(ha="strikeThrough"),Vn.toString()!==""||ha!=="bold"&&ha!=="italic"&&ha!=="strikeThrough")document.execCommand(ha,!1,"");else{var di="strong";ha==="italic"?di="em":ha==="strikeThrough"&&(di="s"),($r=document.createElement(di)).textContent=P.g.ZWSP,Vn.insertNode($r),$r.previousSibling&&$r.previousSibling.textContent===P.g.ZWSP&&($r.previousSibling.textContent=""),Vn.setStart($r.firstChild,1),Vn.collapse(!0),(0,vt.Hc)(Vn)}}Vr&&fr(Ut),ba&&Mn(Ut)}}(p,I.element.children[0],Xt):p.currentMode==="ir"?us(p,I.element.children[0],g.prefix||"",g.suffix||""):ji(p,I.element.children[0],g.prefix||"",g.suffix||""))})},sn=(Fn=function(p,g){return Fn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,I){w.__proto__=I}||function(w,I){for(var k in I)I.hasOwnProperty(k)&&(w[k]=I[k])},Fn(p,g)},function(p,g){function w(){this.constructor=p}Fn(p,g),p.prototype=g===null?Object.create(g):(w.prototype=g.prototype,new w)}),Un=function(p,g,w){var I;if(typeof w!="string"?(tt(p,["subToolbar","hint"]),w.preventDefault(),I=j(p)):I=w,p.currentMode!==g||typeof w=="string"){if(p.devtools&&p.devtools.renderEchart(p),p.options.preview.mode==="both"&&g==="sv"?p.preview.element.style.display="block":p.preview.element.style.display="none",Ye(p.toolbar.elements,P.g.EDIT_TOOLBARS),De(p.toolbar.elements,P.g.EDIT_TOOLBARS),st(p.toolbar.elements,["outdent","indent"]),g==="ir")rt(p.toolbar.elements,["both"]),Ke(p.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),p.sv.element.style.display="none",p.wysiwyg.element.parentElement.style.display="none",p.ir.element.parentElement.style.display="block",p.lute.SetVditorIR(!0),p.lute.SetVditorWYSIWYG(!1),p.lute.SetVditorSV(!1),p.currentMode="ir",p.ir.element.innerHTML=p.lute.Md2VditorIRDOM(I),Nu(p,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),cn(p),p.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(Ue){Dt(Ue,p)}),p.ir.element.querySelectorAll(".vditor-toc").forEach(function(Ue){(0,an.H)(Ue,{cdn:p.options.cdn,math:p.options.preview.math})});else if(g==="wysiwyg")rt(p.toolbar.elements,["both"]),Ke(p.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),p.sv.element.style.display="none",p.wysiwyg.element.parentElement.style.display="block",p.ir.element.parentElement.style.display="none",p.lute.SetVditorIR(!1),p.lute.SetVditorWYSIWYG(!0),p.lute.SetVditorSV(!1),p.currentMode="wysiwyg",cn(p),zr(p,I,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),p.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(Ue){(0,an.H)(Ue,{cdn:p.options.cdn,math:p.options.preview.math})}),p.wysiwyg.popover.style.display="none";else if(g==="sv"){Ke(p.toolbar.elements,["both"]),rt(p.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),p.wysiwyg.element.parentElement.style.display="none",p.ir.element.parentElement.style.display="none",(p.options.preview.mode==="both"||p.options.preview.mode==="editor")&&(p.sv.element.style.display="block"),p.lute.SetVditorIR(!1),p.lute.SetVditorWYSIWYG(!1),p.lute.SetVditorSV(!0),p.currentMode="sv";var k=xi(I,p);k==="<div data-block='0'></div>"&&(k=""),p.sv.element.innerHTML=k,dn(p.sv.element),Fo(p,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),cn(p)}p.undo.resetIcon(p),typeof w!="string"&&(p[p.currentMode].element.focus(),cr(p)),nn(p),hn(p),p.toolbar.elements["edit-mode"]&&(p.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(Ue){Ue.classList.remove("vditor-menu--current")}),p.toolbar.elements["edit-mode"].querySelector('button[data-mode="'+p.currentMode+'"]').classList.add("vditor-menu--current")),p.outline.toggle(p,p.currentMode!=="sv"&&p.options.outline.enable,typeof w!="string")}},jn=function(p){function g(w,I){var k=p.call(this,w,I)||this,Ue=document.createElement("div");return Ue.className="vditor-hint"+(I.level===2?"":" vditor-panel--arrow"),Ue.innerHTML='<button data-mode="wysiwyg">'+window.VditorI18n.wysiwyg+" &lt;"+(0,Be.ns)("⌥⌘7")+`></button>
<button data-mode="ir">`+window.VditorI18n.instantRendering+" &lt;"+(0,Be.ns)("⌥⌘8")+`></button>
<button data-mode="sv">`+window.VditorI18n.splitView+" &lt;"+(0,Be.ns)("⌥⌘9")+"></button>",k.element.appendChild(Ue),k._bindEvent(w,Ue,I),k}return sn(g,p),g.prototype._bindEvent=function(w,I,k){var Ue=this.element.children[0];at(w,I,Ue,k.level),I.children.item(0).addEventListener((0,Be.Le)(),function(ft){Un(w,"wysiwyg",ft),ft.preventDefault(),ft.stopPropagation()}),I.children.item(1).addEventListener((0,Be.Le)(),function(ft){Un(w,"ir",ft),ft.preventDefault(),ft.stopPropagation()}),I.children.item(2).addEventListener((0,Be.Le)(),function(ft){Un(w,"sv",ft),ft.preventDefault(),ft.stopPropagation()})},g}(Ar),pr=function(p,g){return(0,vt.Gb)(p,g)?getSelection().toString():""},aa=function(p,g){g.addEventListener("focus",function(){p.options.focus&&p.options.focus(j(p)),tt(p,["subToolbar","hint"])})},Ua=function(p,g){g.addEventListener("dblclick",function(w){w.target.tagName==="IMG"&&(p.options.image.preview?p.options.image.preview(w.target):p.options.image.isPreview&&(0,ur.E)(w.target,p.options.lang,p.options.theme))})},jo=function(p,g){g.addEventListener("blur",function(w){if(p.currentMode==="ir"){var I=p.ir.element.querySelector(".vditor-ir__node--expand");I&&I.classList.remove("vditor-ir__node--expand")}else p.currentMode!=="wysiwyg"||p.wysiwyg.selectPopover.contains(w.relatedTarget)||p.wysiwyg.hideComment();p[p.currentMode].range=(0,vt.zh)(p),p.options.blur&&p.options.blur(j(p))})},Xa=function(p,g){g.addEventListener("dragstart",function(w){w.dataTransfer.setData(P.g.DROP_EDITOR,P.g.DROP_EDITOR)}),g.addEventListener("drop",function(w){w.dataTransfer.getData(P.g.DROP_EDITOR)?rr(p):(w.dataTransfer.types.includes("Files")||w.dataTransfer.types.includes("text/html"))&&Rs(p,w,{pasteCode:function(I){document.execCommand("insertHTML",!1,I)}})})},Ka=function(p,g,w){g.addEventListener("copy",function(I){return w(I,p)})},Yo=function(p,g,w){g.addEventListener("cut",function(I){w(I,p),p.options.comment.enable&&p.currentMode==="wysiwyg"&&p.wysiwyg.getComments(p),document.execCommand("delete")})},Io=function(p){if(p.currentMode==="wysiwyg"&&p.options.comment.enable&&p.options.comment.adjustTop(p.wysiwyg.getComments(p,!0)),p.options.typewriterMode){var g=p[p.currentMode].element,w=(0,vt.Ny)(g).top;p.options.height!=="auto"||p.element.classList.contains("vditor--fullscreen")||window.scrollTo(window.scrollX,w+p.element.offsetTop+p.toolbar.element.offsetHeight-window.innerHeight/2+10),(p.options.height!=="auto"||p.element.classList.contains("vditor--fullscreen"))&&(g.scrollTop=w+g.scrollTop-g.clientHeight/2+10)}},pi=function(p,g){g.addEventListener("keydown",function(w){if(!w.isComposing&&p.options.keydown&&p.options.keydown(w),!(p.options.hint.extend.length>1||p.toolbar.elements.emoji)||!p.hint.select(w,p)){if(p.options.comment.enable&&p.currentMode==="wysiwyg"&&(w.key==="Backspace"||on("⌘X",w))&&p.wysiwyg.getComments(p),p.currentMode==="sv"){if(function(k,Ue){var ft,Bt,Xt,Ut,Wt;if(k.sv.composingLock=Ue.isComposing,Ue.isComposing||(Ue.key.indexOf("Arrow")!==-1||Ue.key==="Meta"||Ue.key==="Control"||Ue.key==="Alt"||Ue.key==="Shift"||Ue.key==="CapsLock"||Ue.key==="Escape"||/^F\d{1,2}$/.test(Ue.key)||k.undo.recordFirstPosition(k,Ue),Ue.key!=="Enter"&&Ue.key!=="Tab"&&Ue.key!=="Backspace"&&Ue.key.indexOf("Arrow")===-1&&!(0,Be.yl)(Ue)&&Ue.key!=="Escape"))return!1;var tr=(0,vt.zh)(k),Vr=tr.startContainer;tr.startContainer.nodeType!==3&&tr.startContainer.tagName==="DIV"&&(Vr=tr.startContainer.childNodes[tr.startOffset-1]);var ba=(0,et.a1)(Vr,"data-type","text"),Vn=(0,et.a1)(Vr,"data-type","blockquote-marker");if(!Vn&&tr.startOffset===0&&ba&&ba.previousElementSibling&&ba.previousElementSibling.getAttribute("data-type")==="blockquote-marker"&&(Vn=ba.previousElementSibling),Vn&&Ue.key==="Enter"&&!(0,Be.yl)(Ue)&&!Ue.altKey&&Vn.nextElementSibling.textContent.trim()===""&&(0,vt.im)(Vn,k.sv.element,tr).start===Vn.textContent.length)return((ft=Vn.previousElementSibling)===null||ft===void 0?void 0:ft.getAttribute("data-type"))==="padding"&&Vn.previousElementSibling.setAttribute("data-action","enter-remove"),Vn.remove(),Fo(k),Ue.preventDefault(),!0;var ha=(0,et.a1)(Vr,"data-type","li-marker"),na=(0,et.a1)(Vr,"data-type","task-marker"),Gr=ha;if(Gr||na&&na.nextElementSibling.getAttribute("data-type")!=="task-marker"&&(Gr=na),Gr||tr.startOffset!==0||!ba||!ba.previousElementSibling||ba.previousElementSibling.getAttribute("data-type")!=="li-marker"&&ba.previousElementSibling.getAttribute("data-type")!=="task-marker"||(Gr=ba.previousElementSibling),Gr){var sa=(0,vt.im)(Gr,k.sv.element,tr).start,la=Gr.getAttribute("data-type")==="task-marker",$r=Gr;if(la&&($r=Gr.previousElementSibling.previousElementSibling.previousElementSibling),sa===Gr.textContent.length){if(Ue.key==="Enter"&&!(0,Be.yl)(Ue)&&!Ue.altKey&&!Ue.shiftKey&&Gr.nextElementSibling.textContent.trim()==="")return((Bt=$r.previousElementSibling)===null||Bt===void 0?void 0:Bt.getAttribute("data-type"))==="padding"?($r.previousElementSibling.remove(),en(k)):(la&&($r.remove(),Gr.previousElementSibling.previousElementSibling.remove(),Gr.previousElementSibling.remove()),Gr.nextElementSibling.remove(),Gr.remove(),Fo(k)),Ue.preventDefault(),!0;if(Ue.key==="Tab")return $r.insertAdjacentHTML("beforebegin",'<span data-type="padding">'+$r.textContent.replace(/\S/g," ")+"</span>"),/^\d/.test($r.textContent)&&($r.textContent=$r.textContent.replace(/^\d{1,}/,"1"),tr.selectNodeContents(Gr.firstChild),tr.collapse(!1)),en(k),Ue.preventDefault(),!0}}if(La(k,tr,Ue))return!0;var xa=(0,et.a1)(Vr,"data-block","0"),vo=(0,Ot.S)(Vr,"SPAN");if(Ue.key==="Enter"&&!(0,Be.yl)(Ue)&&!Ue.altKey&&!Ue.shiftKey&&xa){var io=!1,lo=xa.textContent.match(/^\n+/);(0,vt.im)(xa,k.sv.element).start<=(lo?lo[0].length:0)&&(io=!0);var co=`
`;if(vo){if(((Xt=vo.previousElementSibling)===null||Xt===void 0?void 0:Xt.getAttribute("data-action"))==="enter-remove")return vo.previousElementSibling.remove(),Fo(k),Ue.preventDefault(),!0;co+=Ei(vo)}return tr.insertNode(document.createTextNode(co)),tr.collapse(!1),xa&&xa.textContent.trim()!==""&&!io?en(k):Fo(k),Ue.preventDefault(),!0}if(Ue.key==="Backspace"&&!(0,Be.yl)(Ue)&&!Ue.altKey&&!Ue.shiftKey){if(vo&&((Ut=vo.previousElementSibling)===null||Ut===void 0?void 0:Ut.getAttribute("data-type"))==="newline"&&(0,vt.im)(vo,k.sv.element,tr).start===1&&vo.getAttribute("data-type").indexOf("code-block-")===-1)return tr.setStart(vo,0),tr.extractContents(),vo.textContent.trim()!==""?en(k):Fo(k),Ue.preventDefault(),!0;if(xa&&(0,vt.im)(xa,k.sv.element,tr).start===0&&xa.previousElementSibling){tr.extractContents();var ca=xa.previousElementSibling.lastElementChild;return ca.getAttribute("data-type")==="newline"&&(ca.remove(),ca=xa.previousElementSibling.lastElementChild),ca.getAttribute("data-type")!=="newline"&&(ca.insertAdjacentHTML("afterend",xa.innerHTML),xa.remove()),xa.textContent.trim()===""||!((Wt=xa.previousElementSibling)===null||Wt===void 0)&&Wt.querySelector('[data-type="code-block-open-marker"]')?(ca.getAttribute("data-type")!=="newline"&&(tr.selectNodeContents(ca.lastChild),tr.collapse(!1)),Fo(k)):en(k),Ue.preventDefault(),!0}}return!1}(p,w))return}else if(p.currentMode==="wysiwyg"){if(function(k,Ue){if(k.wysiwyg.composingLock=Ue.isComposing,Ue.isComposing)return!1;Ue.key.indexOf("Arrow")!==-1||Ue.key==="Meta"||Ue.key==="Control"||Ue.key==="Alt"||Ue.key==="Shift"||Ue.key==="CapsLock"||Ue.key==="Escape"||/^F\d{1,2}$/.test(Ue.key)||k.undo.recordFirstPosition(k,Ue);var ft=(0,vt.zh)(k),Bt=ft.startContainer;if(!xn(Ue,k,Bt)||(Gt(ft,k,Ue),zu(ft),Ue.key!=="Enter"&&Ue.key!=="Tab"&&Ue.key!=="Backspace"&&Ue.key.indexOf("Arrow")===-1&&!(0,Be.yl)(Ue)&&Ue.key!=="Escape"&&Ue.key!=="Delete"))return!1;var Xt=(0,et.F9)(Bt),Ut=(0,et.lG)(Bt,"P");if(Fa(Ue,k,Ut,ft)||Qr(ft,k,Ut,Ue)||is(k,Ue,ft))return!0;var Wt=(0,et.fb)(Bt,"vditor-wysiwyg__block");if(Wt){if(Ue.key==="Escape"&&Wt.children.length===2)return k.wysiwyg.popover.style.display="none",Wt.firstElementChild.style.display="none",k.wysiwyg.element.blur(),Ue.preventDefault(),!0;if(!(0,Be.yl)(Ue)&&!Ue.shiftKey&&Ue.altKey&&Ue.key==="Enter"&&Wt.getAttribute("data-type")==="code-block"){var tr=k.wysiwyg.popover.querySelector(".vditor-input");return tr.focus(),tr.select(),Ue.preventDefault(),!0}if(Wt.getAttribute("data-block")==="0"&&(Qu(k,Ue,Wt.firstElementChild,ft)||In(k,Ue,ft,Wt.firstElementChild,Wt)||Wt.getAttribute("data-type")!=="yaml-front-matter"&&Qn(k,Ue,ft,Wt.firstElementChild,Wt)))return!0}if(Ai(k,ft,Ue,Ut))return!0;var Vr=(0,et.E2)(Bt,"BLOCKQUOTE");if(Vr&&!Ue.shiftKey&&Ue.altKey&&Ue.key==="Enter"){(0,Be.yl)(Ue)?ft.setStartBefore(Vr):ft.setStartAfter(Vr),(0,vt.Hc)(ft);var ba=document.createElement("p");return ba.setAttribute("data-block","0"),ba.innerHTML=`
`,ft.insertNode(ba),ft.collapse(!0),(0,vt.Hc)(ft),Mn(k),Io(k),Ue.preventDefault(),!0}var Vn,ha=(0,Ot.W)(Bt);if(ha){if(ha.tagName==="H6"&&Bt.textContent.length===ft.startOffset&&!(0,Be.yl)(Ue)&&!Ue.shiftKey&&!Ue.altKey&&Ue.key==="Enter"){var na=document.createElement("p");return na.textContent=`
`,na.setAttribute("data-block","0"),Bt.parentElement.insertAdjacentElement("afterend",na),ft.setStart(na,0),(0,vt.Hc)(ft),Mn(k),Io(k),Ue.preventDefault(),!0}var Gr;if(on("⌘=",Ue))return(Gr=parseInt(ha.tagName.substr(1),10)-1)>0&&(pa(k,"h"+Gr),Mn(k)),Ue.preventDefault(),!0;if(on("⌘-",Ue))return(Gr=parseInt(ha.tagName.substr(1),10)+1)<7&&(pa(k,"h"+Gr),Mn(k)),Ue.preventDefault(),!0;Ue.key!=="Backspace"||(0,Be.yl)(Ue)||Ue.shiftKey||Ue.altKey||ha.textContent.length!==1||Ga(k)}if(dl(k,ft,Ue))return!0;if(Ue.altKey&&Ue.key==="Enter"&&!(0,Be.yl)(Ue)&&!Ue.shiftKey){var sa=(0,et.lG)(Bt,"A"),la=(0,et.a1)(Bt,"data-type","link-ref"),$r=(0,et.a1)(Bt,"data-type","footnotes-ref");if(sa||la||$r||ha&&ha.tagName.length===2){var xa=k.wysiwyg.popover.querySelector("input");xa.focus(),xa.select()}}if(oo(k,Ue))return!0;if(on("⇧⌘U",Ue)&&(Vn=k.wysiwyg.popover.querySelector('[data-type="up"]'))||on("⇧⌘D",Ue)&&(Vn=k.wysiwyg.popover.querySelector('[data-type="down"]')))return Vn.click(),Ue.preventDefault(),!0;if(La(k,ft,Ue))return!0;if(!(0,Be.yl)(Ue)&&Ue.shiftKey&&!Ue.altKey&&Ue.key==="Enter"&&Bt.parentElement.tagName!=="LI"&&Bt.parentElement.tagName!=="P")return["STRONG","STRIKE","S","I","EM","B"].includes(Bt.parentElement.tagName)?ft.insertNode(document.createTextNode(`
`+P.g.ZWSP)):ft.insertNode(document.createTextNode(`
`)),ft.collapse(!1),(0,vt.Hc)(ft),Mn(k),Io(k),Ue.preventDefault(),!0;if(Ue.key==="Backspace"&&!(0,Be.yl)(Ue)&&!Ue.shiftKey&&!Ue.altKey&&ft.toString()===""){if(Ls(k,ft,Ue,Ut))return!0;if(Xt){if(Xt.previousElementSibling&&Xt.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&Xt.previousElementSibling.getAttribute("data-block")==="0"&&Xt.tagName!=="UL"&&Xt.tagName!=="OL"){var vo=(0,vt.im)(Xt,k.wysiwyg.element,ft).start;if(vo===0&&ft.startOffset===0||vo===1&&Xt.innerText.startsWith(P.g.ZWSP))return fo(Xt.previousElementSibling.lastElementChild,k,!1),Xt.innerHTML.trim().replace(P.g.ZWSP,"")===""&&(Xt.remove(),Mn(k)),Ue.preventDefault(),!0}var io=ft.startOffset;if(ft.toString()===""&&Bt.nodeType===3&&Bt.textContent.charAt(io-2)===`
`&&Bt.textContent.charAt(io-1)!==P.g.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(Bt.parentElement.tagName))return Bt.textContent=Bt.textContent.substring(0,io-1)+P.g.ZWSP,ft.setStart(Bt,io),ft.collapse(!0),Mn(k),Ue.preventDefault(),!0;Bt.textContent===P.g.ZWSP&&ft.startOffset===1&&!Bt.previousSibling&&function(co){for(var ca=co.startContainer.nextSibling;ca&&ca.textContent==="";)ca=ca.nextSibling;return!(!ca||ca.nodeType===3||ca.tagName!=="CODE"&&ca.getAttribute("data-type")!=="math-inline"&&ca.getAttribute("data-type")!=="html-entity"&&ca.getAttribute("data-type")!=="html-inline")}(ft)&&(Bt.textContent=""),Xt.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(co){co.firstElementChild.style.display="inline",co.lastElementChild.style.display="none"}),Xt.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(co){co.firstElementChild.style.display="inline",co.lastElementChild.style.display="none"})}}if((0,Be.vU)()&&ft.startOffset===1&&Bt.textContent.indexOf(P.g.ZWSP)>-1&&Bt.previousSibling&&Bt.previousSibling.nodeType!==3&&Bt.previousSibling.tagName==="CODE"&&(Ue.key==="Backspace"||Ue.key==="ArrowLeft"))return ft.selectNodeContents(Bt.previousSibling),ft.collapse(!1),Ue.preventDefault(),!0;if(Wi(Ue,Xt,ft))return Ue.preventDefault(),!0;if(Pn(ft,Ue.key),Ue.key==="ArrowDown"){var lo=Bt.nextSibling;lo&&lo.nodeType!==3&&lo.getAttribute("data-type")==="math-inline"&&ft.setStartAfter(lo)}return!(!Xt||!Nt(Xt,k,Ue,ft)||(Ue.preventDefault(),0))}(p,w))return}else if(p.currentMode==="ir"&&function(k,Ue){if(k.ir.composingLock=Ue.isComposing,Ue.isComposing)return!1;Ue.key.indexOf("Arrow")!==-1||Ue.key==="Meta"||Ue.key==="Control"||Ue.key==="Alt"||Ue.key==="Shift"||Ue.key==="CapsLock"||Ue.key==="Escape"||/^F\d{1,2}$/.test(Ue.key)||k.undo.recordFirstPosition(k,Ue);var ft=(0,vt.zh)(k),Bt=ft.startContainer;if(!xn(Ue,k,Bt)||(Gt(ft,k,Ue),zu(ft),Ue.key!=="Enter"&&Ue.key!=="Tab"&&Ue.key!=="Backspace"&&Ue.key.indexOf("Arrow")===-1&&!(0,Be.yl)(Ue)&&Ue.key!=="Escape"&&Ue.key!=="Delete"))return!1;var Xt=(0,et.a1)(Bt,"data-newline","1");if(!(0,Be.yl)(Ue)&&!Ue.altKey&&!Ue.shiftKey&&Ue.key==="Enter"&&Xt&&ft.startOffset<Xt.textContent.length){var Ut=Xt.previousElementSibling;Ut&&(ft.insertNode(document.createTextNode(Ut.textContent)),ft.collapse(!1));var Wt=Xt.nextSibling;Wt&&(ft.insertNode(document.createTextNode(Wt.textContent)),ft.collapse(!0))}var tr=(0,et.lG)(Bt,"P");if(Fa(Ue,k,tr,ft)||Qr(ft,k,tr,Ue)||Ai(k,ft,Ue,tr))return!0;var Vr=(0,et.fb)(Bt,"vditor-ir__marker--pre");if(Vr&&Vr.tagName==="PRE"){var ba=Vr.firstChild;if(Qu(k,Ue,Vr,ft)||(ba.getAttribute("data-type")==="math-block"||ba.getAttribute("data-type")==="html-block")&&Qn(k,Ue,ft,ba,Vr.parentElement)||In(k,Ue,ft,ba,Vr.parentElement))return!0}var Vn=(0,et.a1)(Bt,"data-type","code-block-info");if(Vn){if(Ue.key==="Enter"||Ue.key==="Tab")return ft.selectNodeContents(Vn.nextElementSibling.firstChild),ft.collapse(!0),Ue.preventDefault(),tt(k,["hint"]),!0;if(Ue.key==="Backspace"){var ha=(0,vt.im)(Vn,k.ir.element).start;ha===1&&ft.setStart(Bt,0),ha===2&&(k.hint.recentLanguage="")}if(Qn(k,Ue,ft,Vn,Vn.parentElement))return tt(k,["hint"]),!0}var na=(0,et.lG)(Bt,"TD")||(0,et.lG)(Bt,"TH");if(Ue.key.indexOf("Arrow")>-1&&na){var Gr=ta(na);if(Gr&&Qn(k,Ue,ft,na,Gr))return!0;var sa=$t(na);if(sa&&In(k,Ue,ft,na,sa))return!0}if(is(k,Ue,ft)||dl(k,ft,Ue)||La(k,ft,Ue))return!0;var la=(0,Ot.W)(Bt);if(la){var $r;if(on("⌘=",Ue))return($r=la.querySelector(".vditor-ir__marker--heading"))&&$r.textContent.trim().length>1&&Bs(k,$r.textContent.substr(1)),Ue.preventDefault(),!0;if(on("⌘-",Ue))return($r=la.querySelector(".vditor-ir__marker--heading"))&&$r.textContent.trim().length<6&&Bs(k,$r.textContent.trim()+"# "),Ue.preventDefault(),!0}var xa=(0,et.F9)(Bt);if(Ue.key==="Backspace"&&!(0,Be.yl)(Ue)&&!Ue.shiftKey&&!Ue.altKey&&ft.toString()===""){if(Ls(k,ft,Ue,tr))return!0;if(xa&&xa.previousElementSibling&&xa.tagName!=="UL"&&xa.tagName!=="OL"&&(xa.previousElementSibling.getAttribute("data-type")==="code-block"||xa.previousElementSibling.getAttribute("data-type")==="math-block")){var vo=(0,vt.im)(xa,k.ir.element,ft).start;if(vo===0||vo===1&&xa.innerText.startsWith(P.g.ZWSP))return ft.selectNodeContents(xa.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),ft.collapse(!1),dt(ft,k),xa.textContent.trim().replace(P.g.ZWSP,"")===""&&(xa.remove(),Nu(k)),Ue.preventDefault(),!0}if(la){var io=la.firstElementChild.textContent.length;(0,vt.im)(la,k.ir.element).start===io&&(ft.setStart(la.firstElementChild.firstChild,io-1),ft.collapse(!0),(0,vt.Hc)(ft))}}return!((Ue.key!=="ArrowUp"&&Ue.key!=="ArrowDown"||!xa||(xa.querySelectorAll(".vditor-ir__node").forEach(function(lo){lo.contains(Bt)||lo.classList.add("vditor-ir__node--hidden")}),!Wi(Ue,xa,ft)))&&(Pn(ft,Ue.key),!xa||!Nt(xa,k,Ue,ft)||(Ue.preventDefault(),0)))}(p,w))return;if(p.options.ctrlEnter&&on("⌘Enter",w))return p.options.ctrlEnter(j(p)),void w.preventDefault();if(on("⌘Z",w)&&!p.toolbar.elements.undo)return p.undo.undo(p),void w.preventDefault();if(on("⌘Y",w)&&!p.toolbar.elements.redo)return p.undo.redo(p),void w.preventDefault();if(w.key==="Escape")return p.hint.element.style.display==="block"?p.hint.element.style.display="none":p.options.esc&&!w.isComposing&&p.options.esc(j(p)),void w.preventDefault();if((0,Be.yl)(w)&&w.altKey&&!w.shiftKey&&/^Digit[1-6]$/.test(w.code)){if(p.currentMode==="wysiwyg"){var I=w.code.replace("Digit","H");(0,et.lG)(getSelection().getRangeAt(0).startContainer,I)?Ga(p):pa(p,I),Mn(p)}else p.currentMode==="sv"?wo(p,"#".repeat(parseInt(w.code.replace("Digit",""),10))+" "):p.currentMode==="ir"&&Bs(p,"#".repeat(parseInt(w.code.replace("Digit",""),10))+" ");return w.preventDefault(),!0}if((0,Be.yl)(w)&&w.altKey&&!w.shiftKey&&/^Digit[7-9]$/.test(w.code))return w.code==="Digit7"?Un(p,"wysiwyg",w):w.code==="Digit8"?Un(p,"ir",w):w.code==="Digit9"&&Un(p,"sv",w),!0;p.options.toolbar.find(function(k){return!k.hotkey||k.toolbar?!!k.toolbar&&!!k.toolbar.find(function(Ue){return!!Ue.hotkey&&(on(Ue.hotkey,w)?(p.toolbar.elements[Ue.name].children[0].dispatchEvent(new CustomEvent((0,Be.Le)())),w.preventDefault(),!0):void 0)}):on(k.hotkey,w)?(p.toolbar.elements[k.name].children[0].dispatchEvent(new CustomEvent((0,Be.Le)())),w.preventDefault(),!0):void 0})}})},oi=function(p,g){g.addEventListener("selectstart",function(w){g.onmouseup=function(){setTimeout(function(){var I=pr(p[p.currentMode].element);I.trim()?(p.currentMode==="wysiwyg"&&p.options.comment.enable&&((0,et.a1)(w.target,"data-type","footnotes-block")||(0,et.a1)(w.target,"data-type","link-ref-defs-block")?p.wysiwyg.hideComment():p.wysiwyg.showComment()),p.options.select&&p.options.select(I)):p.currentMode==="wysiwyg"&&p.options.comment.enable&&p.wysiwyg.hideComment()})}})},Si=function(p,g){var w=(0,vt.zh)(p);w.extractContents(),w.insertNode(document.createTextNode(Lute.Caret)),w.insertNode(document.createTextNode(g));var I=(0,et.a1)(w.startContainer,"data-block","0");I||(I=p.sv.element);var k=p.lute.SpinVditorSVDOM(I.textContent);k="<div data-block='0'>"+k.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",I.isEqualNode(p.sv.element)?I.innerHTML=k:I.outerHTML=k,dn(p.sv.element),(0,vt.ib)(p.sv.element,w),Io(p)},Ii=function(p,g,w){w===void 0&&(w=!0);var I=p;for(I.nodeType===3&&(I=I.parentElement);I;){if(I.getAttribute("data-type")===g)return I;I=w?I.previousElementSibling:I.nextElementSibling}return!1},xi=function(p,g){return wt("SpinVditorSVDOM",p,"argument",g.options.debugger),p="<div data-block='0'>"+g.lute.SpinVditorSVDOM(p).replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",wt("SpinVditorSVDOM",p,"result",g.options.debugger),p},Ei=function(p){var g=p.getAttribute("data-type"),w=p.previousElementSibling,I=g&&g!=="text"&&g!=="table"&&g!=="heading-marker"&&g!=="newline"&&g!=="yaml-front-matter-open-marker"&&g!=="yaml-front-matter-close-marker"&&g!=="code-block-info"&&g!=="code-block-close-marker"&&g!=="code-block-open-marker"?p.textContent:"",k=!1;for(g==="newline"&&(k=!0);w&&!k;){var Ue=w.getAttribute("data-type");if(Ue==="li-marker"||Ue==="blockquote-marker"||Ue==="task-marker"||Ue==="padding"){var ft=w.textContent;if(Ue!=="li-marker"||g!=="code-block-open-marker"&&g!=="code-block-info")if(g==="code-block-close-marker"&&w.nextElementSibling.isSameNode(p)){var Bt=Ii(p,"code-block-open-marker");Bt&&Bt.previousElementSibling&&(w=Bt.previousElementSibling,I=ft+I)}else I=ft+I;else I=ft.replace(/\S/g," ")+I}else Ue==="newline"&&(k=!0);w=w.previousElementSibling}return I},Fo=function(p,g){g===void 0&&(g={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),g.enableHint&&p.hint.render(p),p.preview.render(p);var w=j(p);typeof p.options.input=="function"&&g.enableInput&&p.options.input(w),p.options.counter.enable&&p.counter.render(p,w),p.options.cache.enable&&(0,Be.pK)()&&(localStorage.setItem(p.options.cache.id,w),p.options.cache.after&&p.options.cache.after(w)),p.devtools&&p.devtools.renderEchart(p),clearTimeout(p.sv.processTimeoutId),p.sv.processTimeoutId=window.setTimeout(function(){g.enableAddUndoStack&&!p.sv.composingLock&&p.undo.addToUndoStack(p)},p.options.undoDelay)},wo=function(p,g){var w=(0,vt.zh)(p),I=(0,Ot.S)(w.startContainer,"SPAN");I&&I.textContent.trim()!==""&&(g=`
`+g),w.collapse(!0),document.execCommand("insertHTML",!1,g)},ji=function(p,g,w,I){var k=(0,vt.zh)(p),Ue=g.getAttribute("data-type");p.sv.element.childNodes.length===0&&(p.sv.element.innerHTML=`<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">
</span></span>`,(0,vt.ib)(p.sv.element,k));var ft=(0,et.F9)(k.startContainer),Bt=(0,Ot.S)(k.startContainer,"SPAN");if(ft){if(Ue==="link"){var Xt=void 0;return Xt=k.toString()===""?""+w+Lute.Caret+I:""+w+k.toString()+I.replace(")",Lute.Caret+")"),void document.execCommand("insertHTML",!1,Xt)}if(Ue==="italic"||Ue==="bold"||Ue==="strike"||Ue==="inline-code"||Ue==="code"||Ue==="table"||Ue==="line")return Xt=void 0,Xt=k.toString()===""?""+w+Lute.Caret+(Ue==="code"?"":I):""+w+k.toString()+Lute.Caret+(Ue==="code"?"":I),Ue==="table"||Ue==="code"&&Bt&&Bt.textContent!==""?Xt=`

`+Xt:Ue==="line"&&(Xt=`

`+w+`
`+Lute.Caret),void document.execCommand("insertHTML",!1,Xt);if((Ue==="check"||Ue==="list"||Ue==="ordered-list"||Ue==="quote")&&Bt){var Ut="* ";Ue==="check"?Ut="* [ ] ":Ue==="ordered-list"?Ut="1. ":Ue==="quote"&&(Ut="> ");var Wt=Ii(Bt,"newline");return Wt?Wt.insertAdjacentText("afterend",Ut):ft.insertAdjacentText("afterbegin",Ut),void en(p)}(0,vt.ib)(p.sv.element,k),Fo(p)}},Ca=function(p){switch(p.currentMode){case"ir":return p.ir.element;case"wysiwyg":return p.wysiwyg.element;case"sv":return p.sv.element}},Hu=function(p,g){p.options.upload.setHeaders&&(p.options.upload.headers=p.options.upload.setHeaders()),p.options.upload.headers&&Object.keys(p.options.upload.headers).forEach(function(w){g.setRequestHeader(w,p.options.upload.headers[w])})},Fi=function(p,g,w,I){return new(w||(w=Promise))(function(k,Ue){function ft(Ut){try{Xt(I.next(Ut))}catch(Wt){Ue(Wt)}}function Bt(Ut){try{Xt(I.throw(Ut))}catch(Wt){Ue(Wt)}}function Xt(Ut){var Wt;Ut.done?k(Ut.value):(Wt=Ut.value,Wt instanceof w?Wt:new w(function(tr){tr(Wt)})).then(ft,Bt)}Xt((I=I.apply(p,g||[])).next())})},lu=function(p,g){var w,I,k,Ue,ft={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return Ue={next:Bt(0),throw:Bt(1),return:Bt(2)},typeof Symbol=="function"&&(Ue[Symbol.iterator]=function(){return this}),Ue;function Bt(Xt){return function(Ut){return function(Wt){if(w)throw new TypeError("Generator is already executing.");for(;ft;)try{if(w=1,I&&(k=2&Wt[0]?I.return:Wt[0]?I.throw||((k=I.return)&&k.call(I),0):I.next)&&!(k=k.call(I,Wt[1])).done)return k;switch(I=0,k&&(Wt=[2&Wt[0],k.value]),Wt[0]){case 0:case 1:k=Wt;break;case 4:return ft.label++,{value:Wt[1],done:!1};case 5:ft.label++,I=Wt[1],Wt=[0];continue;case 7:Wt=ft.ops.pop(),ft.trys.pop();continue;default:if(k=ft.trys,!((k=k.length>0&&k[k.length-1])||Wt[0]!==6&&Wt[0]!==2)){ft=0;continue}if(Wt[0]===3&&(!k||Wt[1]>k[0]&&Wt[1]<k[3])){ft.label=Wt[1];break}if(Wt[0]===6&&ft.label<k[1]){ft.label=k[1],k=Wt;break}if(k&&ft.label<k[2]){ft.label=k[2],ft.ops.push(Wt);break}k[2]&&ft.ops.pop(),ft.trys.pop();continue}Wt=g.call(p,ft)}catch(tr){Wt=[6,tr],I=0}finally{w=k=0}if(5&Wt[0])throw Wt[1];return{value:Wt[0]?Wt[1]:void 0,done:!0}}([Xt,Ut])}}},Xu=function(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"},nu=function(p,g,w){return Fi(void 0,void 0,void 0,function(){var I,k,Ue,ft,Bt,Xt,Ut,Wt,tr,Vr,ba,Vn,ha,na;return lu(this,function(Gr){switch(Gr.label){case 0:for(I=[],k=p.options.upload.multiple===!0?g.length:1,Vn=0;Vn<k;Vn++)(Ue=g[Vn])instanceof DataTransferItem&&(Ue=Ue.getAsFile()),I.push(Ue);return p.options.upload.handler?[4,p.options.upload.handler(I)]:[3,2];case 1:return ft=Gr.sent(),w&&(w.value=""),typeof ft=="string"?(p.tip.show(ft),[2]):[2];case 2:return p.options.upload.url&&p.upload?p.options.upload.file?[4,p.options.upload.file(I)]:[3,4]:(w&&(w.value=""),p.tip.show("please config: options.upload.url"),[2]);case 3:I=Gr.sent(),Gr.label=4;case 4:if(p.options.upload.validate&&typeof(ft=p.options.upload.validate(I))=="string")return p.tip.show(ft),[2];if(Bt=Ca(p),p.upload.range=(0,vt.zh)(p),Xt=function(sa,la){sa.tip.hide();for(var $r=[],xa="",vo="",io=(sa.options.lang,sa.options,function(ca,To){var di=la[To],Wo=!0;di.name||(xa+="<li>"+window.VditorI18n.nameEmpty+"</li>",Wo=!1),di.size>sa.options.upload.max&&(xa+="<li>"+di.name+" "+window.VditorI18n.over+" "+sa.options.upload.max/1024/1024+"M</li>",Wo=!1);var ls=di.name.lastIndexOf("."),ks=di.name.substr(ls),yu=sa.options.upload.filename(di.name.substr(0,ls))+ks;sa.options.upload.accept&&(sa.options.upload.accept.split(",").some(function(Ki){var Uu=Ki.trim();if(Uu.indexOf(".")===0){if(ks.toLowerCase()===Uu.toLowerCase())return!0}else if(di.type.split("/")[0]===Uu.split("/")[0])return!0;return!1})||(xa+="<li>"+di.name+" "+window.VditorI18n.fileTypeError+"</li>",Wo=!1)),Wo&&($r.push(di),vo+="<li>"+yu+" "+window.VditorI18n.uploading+"</li>")}),lo=la.length,co=0;co<lo;co++)io(0,co);return sa.tip.show("<ul>"+xa+vo+"</ul>"),$r}(p,I),Xt.length===0)return w&&(w.value=""),[2];for(Ut=new FormData,Wt=p.options.upload.extraData,tr=0,Vr=Object.keys(Wt);tr<Vr.length;tr++)ba=Vr[tr],Ut.append(ba,Wt[ba]);for(Vn=0,ha=Xt.length;Vn<ha;Vn++)Ut.append(p.options.upload.fieldName,Xt[Vn]);return(na=new XMLHttpRequest).open("POST",p.options.upload.url),p.options.upload.token&&na.setRequestHeader("X-Upload-Token",p.options.upload.token),p.options.upload.withCredentials&&(na.withCredentials=!0),Hu(p,na),p.upload.isUploading=!0,Bt.setAttribute("contenteditable","false"),na.onreadystatechange=function(){if(na.readyState===XMLHttpRequest.DONE){if(p.upload.isUploading=!1,Bt.setAttribute("contenteditable","true"),na.status>=200&&na.status<300)if(p.options.upload.success)p.options.upload.success(Bt,na.responseText);else{var sa=na.responseText;p.options.upload.format&&(sa=p.options.upload.format(g,na.responseText)),function(la,$r){Ca($r).focus();var xa=JSON.parse(la),vo="";xa.code===1&&(vo=""+xa.msg),xa.data.errFiles&&xa.data.errFiles.length>0&&(vo="<ul><li>"+vo+"</li>",xa.data.errFiles.forEach(function(lo){var co=lo.lastIndexOf("."),ca=$r.options.upload.filename(lo.substr(0,co))+lo.substr(co);vo+="<li>"+ca+" "+window.VditorI18n.uploadError+"</li>"}),vo+="</ul>"),vo?$r.tip.show(vo):$r.tip.hide();var io="";Object.keys(xa.data.succMap).forEach(function(lo){var co=xa.data.succMap[lo],ca=lo.lastIndexOf("."),To=lo.substr(ca),di=$r.options.upload.filename(lo.substr(0,ca))+To;(To=To.toLowerCase()).indexOf(".wav")===0||To.indexOf(".mp3")===0||To.indexOf(".ogg")===0?$r.currentMode==="wysiwyg"?io+=`<div class="vditor-wysiwyg__block" data-type="html-block"
 data-block="0"><pre><code>&lt;audio controls="controls" src="`+co+'"&gt;&lt;/audio&gt;</code></pre><pre class="vditor-wysiwyg__preview" data-render="1"><audio controls="controls" src="'+co+`"></audio></pre></div>
`:$r.currentMode==="ir"?io+='<audio controls="controls" src="'+co+`"></audio>
`:io+="["+di+"]("+co+`)
`:To.indexOf(".apng")===0||To.indexOf(".bmp")===0||To.indexOf(".gif")===0||To.indexOf(".ico")===0||To.indexOf(".cur")===0||To.indexOf(".jpg")===0||To.indexOf(".jpeg")===0||To.indexOf(".jfif")===0||To.indexOf(".pjp")===0||To.indexOf(".pjpeg")===0||To.indexOf(".png")===0||To.indexOf(".svg")===0||To.indexOf(".webp")===0?$r.currentMode==="wysiwyg"?io+='<img alt="'+di+'" src="'+co+`">
`:io+="!["+di+"]("+co+`)
`:$r.currentMode==="wysiwyg"?io+='<a href="'+co+'">'+di+`</a>
`:io+="["+di+"]("+co+`)
`}),(0,vt.Hc)($r.upload.range),document.execCommand("insertHTML",!1,io),$r.upload.range=getSelection().getRangeAt(0).cloneRange()}(sa,p)}else p.options.upload.error?p.options.upload.error(na.responseText):p.tip.show(na.responseText);w&&(w.value=""),p.upload.element.style.display="none"}},na.upload.onprogress=function(sa){if(sa.lengthComputable){var la=sa.loaded/sa.total*100;p.upload.element.style.display="block",p.upload.element.style.width=la+"%"}},na.send(Ut),[2]}})})},hu=function(p,g,w){var I,k=(0,et.F9)(g.startContainer);if(k||(k=p.wysiwyg.element),w&&w.inputType!=="formatItalic"&&w.inputType!=="deleteByDrag"&&w.inputType!=="insertFromDrop"&&w.inputType!=="formatBold"&&w.inputType!=="formatRemove"&&w.inputType!=="formatStrikeThrough"&&w.inputType!=="insertUnorderedList"&&w.inputType!=="insertOrderedList"&&w.inputType!=="formatOutdent"&&w.inputType!=="formatIndent"&&w.inputType!==""||!w){var Ue=function(la){for(var $r=la.previousSibling;$r;){if($r.nodeType!==3&&$r.tagName==="A"&&!$r.previousSibling&&$r.innerHTML.replace(P.g.ZWSP,"")===""&&$r.nextSibling)return $r;$r=$r.previousSibling}return!1}(g.startContainer);Ue&&Ue.remove(),p.wysiwyg.element.querySelectorAll("wbr").forEach(function(la){la.remove()}),g.insertNode(document.createElement("wbr")),k.querySelectorAll("[style]").forEach(function(la){la.removeAttribute("style")}),k.querySelectorAll(".vditor-comment").forEach(function(la){la.textContent.trim()===""&&(la.classList.remove("vditor-comment","vditor-comment--focus"),la.removeAttribute("data-cmtids"))}),(I=k.previousElementSibling)===null||I===void 0||I.querySelectorAll(".vditor-comment").forEach(function(la){la.textContent.trim()===""&&(la.classList.remove("vditor-comment","vditor-comment--focus"),la.removeAttribute("data-cmtids"))});var ft="";k.getAttribute("data-type")==="link-ref-defs-block"&&(k=p.wysiwyg.element);var Bt,Xt=k.isEqualNode(p.wysiwyg.element),Ut=(0,et.a1)(k,"data-type","footnotes-block");if(Xt)ft=k.innerHTML;else{var Wt=(0,et.O9)(g.startContainer);if(Wt&&!Ut){var tr=(0,Ot.S)(g.startContainer,"BLOCKQUOTE");k=tr?(0,et.F9)(g.startContainer)||k:Wt}if(Ut&&(k=Ut),ft=k.outerHTML,k.tagName==="UL"||k.tagName==="OL"){var Vr=k.previousElementSibling,ba=k.nextElementSibling;!Vr||Vr.tagName!=="UL"&&Vr.tagName!=="OL"||(ft=Vr.outerHTML+ft,Vr.remove()),!ba||ba.tagName!=="UL"&&ba.tagName!=="OL"||(ft+=ba.outerHTML,ba.remove()),ft=ft.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}k.innerText.startsWith("```")||(p.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(la){la&&!k.isEqualNode(la)&&(ft+=la.outerHTML,la.remove())}),p.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(la){la&&!k.isEqualNode(la)&&(ft+=la.outerHTML,la.remove())}))}if((ft=ft.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""))==='<p data-block="0">```<wbr></p>'&&p.hint.recentLanguage&&(ft='<p data-block="0">```<wbr></p>'.replace("```","```"+p.hint.recentLanguage)),wt("SpinVditorDOM",ft,"argument",p.options.debugger),ft=p.lute.SpinVditorDOM(ft),wt("SpinVditorDOM",ft,"result",p.options.debugger),Xt)k.innerHTML=ft;else if(k.outerHTML=ft,Ut){var Vn=(0,et.E2)(p.wysiwyg.element.querySelector("wbr"),"LI");if(Vn){var ha=p.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+Vn.getAttribute("data-marker")+'"]');ha&&ha.setAttribute("aria-label",Vn.textContent.trim().substr(0,24))}}var na,Gr=p.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");Gr.forEach(function(la,$r){$r===0?Bt=la:(Bt.insertAdjacentHTML("beforeend",la.innerHTML),la.remove())}),Gr.length>0&&p.wysiwyg.element.insertAdjacentElement("beforeend",Gr[0]);var sa=p.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");sa.forEach(function(la,$r){$r===0?na=la:(na.insertAdjacentHTML("beforeend",la.innerHTML),la.remove())}),sa.length>0&&p.wysiwyg.element.insertAdjacentElement("beforeend",sa[0]),(0,vt.ib)(p.wysiwyg.element,g),p.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(la){Dt(la,p)}),w&&(w.inputType==="deleteContentBackward"||w.inputType==="deleteContentForward")&&p.options.comment.enable&&(p.wysiwyg.triggerRemoveComment(p),p.options.comment.adjustTop(p.wysiwyg.getComments(p,!0)))}nn(p),Mn(p,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},Yu=function(p,g){return Object.defineProperty?Object.defineProperty(p,"raw",{value:g}):p.raw=g,p},Ss=function(p,g,w,I){return new(w||(w=Promise))(function(k,Ue){function ft(Ut){try{Xt(I.next(Ut))}catch(Wt){Ue(Wt)}}function Bt(Ut){try{Xt(I.throw(Ut))}catch(Wt){Ue(Wt)}}function Xt(Ut){var Wt;Ut.done?k(Ut.value):(Wt=Ut.value,Wt instanceof w?Wt:new w(function(tr){tr(Wt)})).then(ft,Bt)}Xt((I=I.apply(p,g||[])).next())})},qt=function(p,g){var w,I,k,Ue,ft={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return Ue={next:Bt(0),throw:Bt(1),return:Bt(2)},typeof Symbol=="function"&&(Ue[Symbol.iterator]=function(){return this}),Ue;function Bt(Xt){return function(Ut){return function(Wt){if(w)throw new TypeError("Generator is already executing.");for(;ft;)try{if(w=1,I&&(k=2&Wt[0]?I.return:Wt[0]?I.throw||((k=I.return)&&k.call(I),0):I.next)&&!(k=k.call(I,Wt[1])).done)return k;switch(I=0,k&&(Wt=[2&Wt[0],k.value]),Wt[0]){case 0:case 1:k=Wt;break;case 4:return ft.label++,{value:Wt[1],done:!1};case 5:ft.label++,I=Wt[1],Wt=[0];continue;case 7:Wt=ft.ops.pop(),ft.trys.pop();continue;default:if(k=ft.trys,!((k=k.length>0&&k[k.length-1])||Wt[0]!==6&&Wt[0]!==2)){ft=0;continue}if(Wt[0]===3&&(!k||Wt[1]>k[0]&&Wt[1]<k[3])){ft.label=Wt[1];break}if(Wt[0]===6&&ft.label<k[1]){ft.label=k[1],k=Wt;break}if(k&&ft.label<k[2]){ft.label=k[2],ft.ops.push(Wt);break}k[2]&&ft.ops.pop(),ft.trys.pop();continue}Wt=g.call(p,ft)}catch(tr){Wt=[6,tr],I=0}finally{w=k=0}if(5&Wt[0])throw Wt[1];return{value:Wt[0]?Wt[1]:void 0,done:!0}}([Xt,Ut])}}},xn=function(p,g,w){if(p.keyCode===229&&p.code===""&&p.key==="Unidentified"&&g.currentMode!=="sv"){var I=(0,et.F9)(w);if(I&&I.textContent.trim()==="")return g[g.currentMode].composingLock=!0,!1}return!0},Gt=function(p,g,w){if(!(w.key==="Enter"||w.key==="Tab"||w.key==="Backspace"||w.key.indexOf("Arrow")>-1||(0,Be.yl)(w)||w.key==="Escape"||w.shiftKey||w.altKey)){var I=(0,et.lG)(p.startContainer,"P")||(0,et.lG)(p.startContainer,"LI");if(I&&(0,vt.im)(I,g[g.currentMode].element,p).start===0){I.nodeValue&&(I.nodeValue=I.nodeValue.replace(/\u2006/g,""));var k=document.createTextNode(P.g.ZWSP);p.insertNode(k),p.setStartAfter(k)}}},Pn=function(p,g){if(g==="ArrowDown"||g==="ArrowUp"){var w=(0,et.a1)(p.startContainer,"data-type","math-inline")||(0,et.a1)(p.startContainer,"data-type","html-entity")||(0,et.a1)(p.startContainer,"data-type","html-inline");w&&(g==="ArrowDown"&&p.setStartAfter(w.parentElement),g==="ArrowUp"&&p.setStartBefore(w.parentElement))}},Br=function(p,g){var w=(0,vt.zh)(p),I=(0,et.F9)(w.startContainer);I&&(I.insertAdjacentHTML(g,'<p data-block="0">'+P.g.ZWSP+`<wbr>
</p>`),(0,vt.ib)(p[p.currentMode].element,w),cr(p),rr(p))},ta=function(p){var g=(0,et.lG)(p,"TABLE");return!(!g||!g.rows[0].cells[0].isSameNode(p))&&g},$t=function(p){var g=(0,et.lG)(p,"TABLE");return!(!g||!g.lastElementChild.lastElementChild.lastElementChild.isSameNode(p))&&g},Zt=function(p,g,w){w===void 0&&(w=!0);var I=p.previousElementSibling;return I||(I=p.parentElement.previousElementSibling?p.parentElement.previousElementSibling.lastElementChild:p.parentElement.parentElement.tagName==="TBODY"&&p.parentElement.parentElement.previousElementSibling?p.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild:null),I&&(g.selectNodeContents(I),w||g.collapse(!1),(0,vt.Hc)(g)),I},In=function(p,g,w,I,k){var Ue=(0,vt.im)(I,p[p.currentMode].element,w);if(g.key==="ArrowDown"&&I.textContent.trimRight().substr(Ue.start).indexOf(`
`)===-1||g.key==="ArrowRight"&&Ue.start>=I.textContent.trimRight().length){var ft=k.nextElementSibling;return!ft||ft&&(ft.tagName==="TABLE"||ft.getAttribute("data-type"))?(k.insertAdjacentHTML("afterend",'<p data-block="0">'+P.g.ZWSP+"<wbr></p>"),(0,vt.ib)(p[p.currentMode].element,w)):(w.selectNodeContents(ft),w.collapse(!0),(0,vt.Hc)(w)),g.preventDefault(),!0}return!1},Qn=function(p,g,w,I,k){var Ue=(0,vt.im)(I,p[p.currentMode].element,w);if(g.key==="ArrowUp"&&I.textContent.substr(0,Ue.start).indexOf(`
`)===-1||(g.key==="ArrowLeft"||g.key==="Backspace"&&w.toString()==="")&&Ue.start===0){var ft=k.previousElementSibling;return!ft||ft&&(ft.tagName==="TABLE"||ft.getAttribute("data-type"))?(k.insertAdjacentHTML("beforebegin",'<p data-block="0">'+P.g.ZWSP+"<wbr></p>"),(0,vt.ib)(p[p.currentMode].element,w)):(w.selectNodeContents(ft),w.collapse(!1),(0,vt.Hc)(w)),g.preventDefault(),!0}return!1},mt=function(p,g,w,I){I===void 0&&(I=!0);var k=(0,et.lG)(g.startContainer,"LI");if(p[p.currentMode].element.querySelectorAll("wbr").forEach(function(Wt){Wt.remove()}),g.insertNode(document.createElement("wbr")),I&&k){for(var Ue="",ft=0;ft<k.parentElement.childElementCount;ft++){var Bt=k.parentElement.children[ft].querySelector("input");Bt&&Bt.remove(),Ue+='<p data-block="0">'+k.parentElement.children[ft].innerHTML.trimLeft()+"</p>"}k.parentElement.insertAdjacentHTML("beforebegin",Ue),k.parentElement.remove()}else if(k)if(w==="check")k.parentElement.querySelectorAll("li").forEach(function(Wt){Wt.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'+(Wt.textContent.indexOf(" ")===0?"":" ")),Wt.classList.add("vditor-task")});else{k.querySelector("input")&&k.parentElement.querySelectorAll("li").forEach(function(Wt){Wt.querySelector("input").remove(),Wt.classList.remove("vditor-task")});var Xt=void 0;w==="list"?(Xt=document.createElement("ul")).setAttribute("data-marker","*"):(Xt=document.createElement("ol")).setAttribute("data-marker","1."),Xt.setAttribute("data-block","0"),Xt.setAttribute("data-tight",k.parentElement.getAttribute("data-tight")),Xt.innerHTML=k.parentElement.innerHTML,k.parentElement.parentNode.replaceChild(Xt,k.parentElement)}else{var Ut=(0,et.a1)(g.startContainer,"data-block","0");Ut||(p[p.currentMode].element.querySelector("wbr").remove(),(Ut=p[p.currentMode].element.querySelector("p")).innerHTML="<wbr>"),w==="check"?(Ut.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '+Ut.innerHTML+"</li></ul>"),Ut.remove()):w==="list"?(Ut.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'+Ut.innerHTML+"</li></ul>"),Ut.remove()):w==="ordered-list"&&(Ut.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'+Ut.innerHTML+"</li></ol>"),Ut.remove())}},Rt=function(p,g,w){var I=g.previousElementSibling;if(g&&I){var k=[g];Array.from(w.cloneContents().children).forEach(function(Xt,Ut){Xt.nodeType!==3&&g&&Xt.textContent.trim()!==""&&g.getAttribute("data-node-id")===Xt.getAttribute("data-node-id")&&(Ut!==0&&k.push(g),g=g.nextElementSibling)}),p[p.currentMode].element.querySelectorAll("wbr").forEach(function(Xt){Xt.remove()}),w.insertNode(document.createElement("wbr"));var Ue=I.parentElement,ft="";k.forEach(function(Xt){var Ut=Xt.getAttribute("data-marker");Ut.length!==1&&(Ut="1"+Ut.slice(-1)),ft+='<li data-node-id="'+Xt.getAttribute("data-node-id")+'" data-marker="'+Ut+'">'+Xt.innerHTML+"</li>",Xt.remove()}),I.insertAdjacentHTML("beforeend","<"+Ue.tagName+' data-block="0">'+ft+"</"+Ue.tagName+">"),p.currentMode==="wysiwyg"?Ue.outerHTML=p.lute.SpinVditorDOM(Ue.outerHTML):Ue.outerHTML=p.lute.SpinVditorIRDOM(Ue.outerHTML),(0,vt.ib)(p[p.currentMode].element,w);var Bt=(0,et.O9)(w.startContainer);Bt&&Bt.querySelectorAll(".vditor-"+p.currentMode+"__preview[data-render='2']").forEach(function(Xt){Dt(Xt,p),p.currentMode==="wysiwyg"&&Xt.previousElementSibling.setAttribute("style","display:none")}),rr(p),cr(p)}else p[p.currentMode].element.focus()},Jt=function(p,g,w,I){var k=(0,et.lG)(g.parentElement,"LI");if(k){p[p.currentMode].element.querySelectorAll("wbr").forEach(function(tr){tr.remove()}),w.insertNode(document.createElement("wbr"));var Ue=g.parentElement,ft=Ue.cloneNode(),Bt=[g];Array.from(w.cloneContents().children).forEach(function(tr,Vr){tr.nodeType!==3&&g&&tr.textContent.trim()!==""&&g.getAttribute("data-node-id")===tr.getAttribute("data-node-id")&&(Vr!==0&&Bt.push(g),g=g.nextElementSibling)});var Xt=!1,Ut="";Ue.querySelectorAll("li").forEach(function(tr){Xt&&(Ut+=tr.outerHTML,tr.nextElementSibling||tr.previousElementSibling?tr.remove():tr.parentElement.remove()),tr.isSameNode(Bt[Bt.length-1])&&(Xt=!0)}),Bt.reverse().forEach(function(tr){k.insertAdjacentElement("afterend",tr)}),Ut&&(ft.innerHTML=Ut,Bt[0].insertAdjacentElement("beforeend",ft)),p.currentMode==="wysiwyg"?I.outerHTML=p.lute.SpinVditorDOM(I.outerHTML):I.outerHTML=p.lute.SpinVditorIRDOM(I.outerHTML),(0,vt.ib)(p[p.currentMode].element,w);var Wt=(0,et.O9)(w.startContainer);Wt&&Wt.querySelectorAll(".vditor-"+p.currentMode+"__preview[data-render='2']").forEach(function(tr){Dt(tr,p),p.currentMode==="wysiwyg"&&tr.previousElementSibling.setAttribute("style","display:none")}),rr(p),cr(p)}else p[p.currentMode].element.focus()},gn=function(p,g){for(var w=getSelection().getRangeAt(0).startContainer.parentElement,I=p.rows[0].cells.length,k=p.rows.length,Ue=0,ft=0;ft<k;ft++)for(var Bt=0;Bt<I;Bt++)if(p.rows[ft].cells[Bt].isSameNode(w)){Ue=Bt;break}for(var Xt=0;Xt<k;Xt++)p.rows[Xt].cells[Ue].setAttribute("align",g)},Dn=function(p){var g=p.trimRight().split(`
`).pop();return g!==""&&(g.replace(/ |-/g,"")===""||g.replace(/ |_/g,"")===""||g.replace(/ |\*/g,"")==="")&&g.replace(/ /g,"").length>2&&!(g.indexOf("-")>-1&&g.trimLeft().indexOf(" ")===-1&&p.trimRight().split(`
`).length>1)&&g.indexOf("    ")!==0&&g.indexOf("	")!==0},Bn=function(p){var g=p.trimRight().split(`
`);return(p=g.pop()).indexOf("    ")!==0&&p.indexOf("	")!==0&&(p=p.trimLeft())!==""&&g.length!==0&&(p.replace(/-/g,"")===""||p.replace(/=/g,"")==="")},rr=function(p,g){g===void 0&&(g={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),p.currentMode==="wysiwyg"?Mn(p,g):p.currentMode==="ir"?Nu(p,g):p.currentMode==="sv"&&Fo(p,g)},Qr=function(p,g,w,I){var k,Ue=p.startContainer,ft=(0,et.lG)(Ue,"LI");if(ft){if(!(0,Be.yl)(I)&&!I.altKey&&I.key==="Enter"&&!I.shiftKey&&w&&ft.contains(w)&&w.nextElementSibling)return ft&&!ft.textContent.endsWith(`
`)&&ft.insertAdjacentText("beforeend",`
`),p.insertNode(document.createTextNode(`

`)),p.collapse(!1),rr(g),I.preventDefault(),!0;if(!((0,Be.yl)(I)||I.shiftKey||I.altKey||I.key!=="Backspace"||ft.previousElementSibling||p.toString()!==""||(0,vt.im)(ft,g[g.currentMode].element,p).start!==0))return ft.nextElementSibling?(ft.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+ft.innerHTML+"</p>"),ft.remove()):ft.parentElement.outerHTML='<p data-block="0"><wbr>'+ft.innerHTML+"</p>",(0,vt.ib)(g[g.currentMode].element,p),rr(g),I.preventDefault(),!0;if(!(0,Be.yl)(I)&&!I.shiftKey&&!I.altKey&&I.key==="Backspace"&&ft.textContent.trim().replace(P.g.ZWSP,"")===""&&p.toString()===""&&((k=ft.previousElementSibling)===null||k===void 0?void 0:k.tagName)==="LI")return ft.previousElementSibling.insertAdjacentText("beforeend",`

`),p.selectNodeContents(ft.previousElementSibling),p.collapse(!1),ft.remove(),(0,vt.ib)(g[g.currentMode].element,p),rr(g),I.preventDefault(),!0;if(!(0,Be.yl)(I)&&!I.altKey&&I.key==="Tab"){var Bt=!1;if((p.startOffset===0&&(Ue.nodeType===3&&!Ue.previousSibling||Ue.nodeType!==3&&Ue.nodeName==="LI")||ft.classList.contains("vditor-task")&&p.startOffset===1&&Ue.previousSibling.nodeType!==3&&Ue.previousSibling.tagName==="INPUT")&&(Bt=!0),Bt||p.toString()!=="")return I.shiftKey?Jt(g,ft,p,ft.parentElement):Rt(g,ft,p),I.preventDefault(),!0}}return!1},La=function(p,g,w){if(p.options.tab&&w.key==="Tab")return w.shiftKey||(g.toString()===""?(g.insertNode(document.createTextNode(p.options.tab)),g.collapse(!1)):(g.extractContents(),g.insertNode(document.createTextNode(p.options.tab)),g.collapse(!1))),(0,vt.Hc)(g),rr(p),w.preventDefault(),!0},Fa=function(p,g,w,I){if(w){if(!(0,Be.yl)(p)&&!p.altKey&&p.key==="Enter"){var k=String.raw(Gn||(Gn=Yu(["",""],["",""])),w.textContent).replace(/\\\|/g,"").trim(),Ue=k.split("|");if(k.startsWith("|")&&k.endsWith("|")&&Ue.length>3){var ft=Ue.map(function(){return"---"}).join("|");return ft=w.textContent+`
`+ft.substring(3,ft.length-3)+`
|<wbr>`,w.outerHTML=g.lute.SpinVditorDOM(ft),(0,vt.ib)(g[g.currentMode].element,I),rr(g),Io(g),p.preventDefault(),!0}if(Dn(w.innerHTML)&&w.previousElementSibling){var Bt="",Xt=w.innerHTML.trimRight().split(`
`);return Xt.length>1&&(Xt.pop(),Bt='<p data-block="0">'+Xt.join(`
`)+"</p>"),w.insertAdjacentHTML("afterend",Bt+`<hr data-block="0"><p data-block="0"><wbr>
</p>`),w.remove(),(0,vt.ib)(g[g.currentMode].element,I),rr(g),Io(g),p.preventDefault(),!0}if(Bn(w.innerHTML))return g.currentMode==="wysiwyg"?w.outerHTML=g.lute.SpinVditorDOM(w.innerHTML+`<p data-block="0"><wbr>
</p>`):w.outerHTML=g.lute.SpinVditorIRDOM(w.innerHTML+`<p data-block="0"><wbr>
</p>`),(0,vt.ib)(g[g.currentMode].element,I),rr(g),Io(g),p.preventDefault(),!0}if(I.collapsed&&w.previousElementSibling&&p.key==="Backspace"&&!(0,Be.yl)(p)&&!p.altKey&&!p.shiftKey&&w.textContent.trimRight().split(`
`).length>1&&(0,vt.im)(w,g[g.currentMode].element,I).start===0){var Ut=(0,et.DX)(w.previousElementSibling);return Ut.textContent.endsWith(`
`)||(Ut.textContent=Ut.textContent+`
`),Ut.parentElement.insertAdjacentHTML("beforeend","<wbr>"+w.innerHTML),w.remove(),(0,vt.ib)(g[g.currentMode].element,I),!1}return!1}},Ha=function(p,g,w){for(var I="",k=0;k<w.parentElement.childElementCount;k++)I+='<td align="'+w.parentElement.children[k].getAttribute("align")+'"> </td>';w.tagName==="TH"?w.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>"+I+"</tr></tbody>"):w.parentElement.insertAdjacentHTML("afterend","<tr>"+I+"</tr>"),rr(p)},Ya=function(p,g,w){for(var I="",k=0;k<w.parentElement.childElementCount;k++)w.tagName==="TH"?I+='<th align="'+w.parentElement.children[k].getAttribute("align")+'"> </th>':I+='<td align="'+w.parentElement.children[k].getAttribute("align")+'"> </td>';if(w.tagName==="TH"){w.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>"+I+"</tr></thead>"),g.insertNode(document.createElement("wbr"));var Ue=w.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>");w.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",Ue),w.parentElement.parentElement.remove(),(0,vt.ib)(p.ir.element,g)}else w.parentElement.insertAdjacentHTML("beforebegin","<tr>"+I+"</tr>");rr(p)},Lo=function(p,g,w,I){I===void 0&&(I="afterend");for(var k=0,Ue=w.previousElementSibling;Ue;)k++,Ue=Ue.previousElementSibling;for(var ft=0;ft<g.rows.length;ft++)ft===0?g.rows[ft].cells[k].insertAdjacentHTML(I,"<th> </th>"):g.rows[ft].cells[k].insertAdjacentHTML(I,"<td> </td>");rr(p)},ki=function(p,g,w){if(w.tagName==="TD"){var I=w.parentElement.parentElement;w.parentElement.previousElementSibling?g.selectNodeContents(w.parentElement.previousElementSibling.lastElementChild):g.selectNodeContents(I.previousElementSibling.lastElementChild.lastElementChild),I.childElementCount===1?I.remove():w.parentElement.remove(),g.collapse(!1),(0,vt.Hc)(g),rr(p)}},Du=function(p,g,w,I){for(var k=0,Ue=I.previousElementSibling;Ue;)k++,Ue=Ue.previousElementSibling;(I.previousElementSibling||I.nextElementSibling)&&(g.selectNodeContents(I.previousElementSibling||I.nextElementSibling),g.collapse(!0));for(var ft=0;ft<w.rows.length;ft++){var Bt=w.rows[ft].cells;if(Bt.length===1){w.remove(),cr(p);break}Bt[k].remove()}(0,vt.Hc)(g),rr(p)},is=function(p,g,w){var I=w.startContainer,k=(0,et.lG)(I,"TD")||(0,et.lG)(I,"TH");if(k){if(!(0,Be.yl)(g)&&!g.altKey&&g.key==="Enter"){k.lastElementChild&&(!k.lastElementChild||k.lastElementChild.isSameNode(k.lastChild)&&k.lastElementChild.tagName==="BR")||k.insertAdjacentHTML("beforeend","<br>");var Ue=document.createElement("br");return w.insertNode(Ue),w.setStartAfter(Ue),rr(p),Io(p),g.preventDefault(),!0}if(g.key==="Tab")return g.shiftKey?(Zt(k,w),g.preventDefault(),!0):((Wt=k.nextElementSibling)||(Wt=k.parentElement.nextElementSibling?k.parentElement.nextElementSibling.firstElementChild:k.parentElement.parentElement.tagName==="THEAD"&&k.parentElement.parentElement.nextElementSibling?k.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild:null),Wt&&(w.selectNodeContents(Wt),(0,vt.Hc)(w)),g.preventDefault(),!0);var ft=k.parentElement.parentElement.parentElement;if(g.key==="ArrowUp"){if(g.preventDefault(),k.tagName==="TH")return ft.previousElementSibling?(w.selectNodeContents(ft.previousElementSibling),w.collapse(!1),(0,vt.Hc)(w)):Br(p,"beforebegin"),!0;for(var Bt=0,Xt=k.parentElement;Bt<Xt.cells.length&&!Xt.cells[Bt].isSameNode(k);Bt++);var Ut=Xt.previousElementSibling;return Ut||(Ut=Xt.parentElement.previousElementSibling.firstChild),w.selectNodeContents(Ut.cells[Bt]),w.collapse(!1),(0,vt.Hc)(w),!0}if(g.key==="ArrowDown"){var Wt;if(g.preventDefault(),!(Xt=k.parentElement).nextElementSibling&&k.tagName==="TD")return ft.nextElementSibling?(w.selectNodeContents(ft.nextElementSibling),w.collapse(!0),(0,vt.Hc)(w)):Br(p,"afterend"),!0;for(Bt=0;Bt<Xt.cells.length&&!Xt.cells[Bt].isSameNode(k);Bt++);return(Wt=Xt.nextElementSibling)||(Wt=Xt.parentElement.nextElementSibling.firstChild),w.selectNodeContents(Wt.cells[Bt]),w.collapse(!0),(0,vt.Hc)(w),!0}if(p.currentMode==="wysiwyg"&&!(0,Be.yl)(g)&&g.key==="Enter"&&!g.shiftKey&&g.altKey){var tr=p.wysiwyg.popover.querySelector(".vditor-input");return tr.focus(),tr.select(),g.preventDefault(),!0}if(!(0,Be.yl)(g)&&!g.shiftKey&&!g.altKey&&g.key==="Backspace"&&w.startOffset===0&&w.toString()==="")return!Zt(k,w,!1)&&ft&&(ft.textContent.trim()===""?(ft.outerHTML=`<p data-block="0"><wbr>
</p>`,(0,vt.ib)(p[p.currentMode].element,w)):(w.setStartBefore(ft),w.collapse(!0)),rr(p)),g.preventDefault(),!0;if(on("⇧⌘F",g))return Ya(p,w,k),g.preventDefault(),!0;if(on("⌘=",g))return Ha(p,w,k),g.preventDefault(),!0;if(on("⇧⌘G",g))return Lo(p,ft,k,"beforebegin"),g.preventDefault(),!0;if(on("⇧⌘=",g))return Lo(p,ft,k),g.preventDefault(),!0;if(on("⌘-",g))return ki(p,w,k),g.preventDefault(),!0;if(on("⇧⌘-",g))return Du(p,w,ft,k),g.preventDefault(),!0;if(on("⇧⌘L",g)){if(p.currentMode==="ir")return gn(ft,"left"),rr(p),g.preventDefault(),!0;if(Vr=p.wysiwyg.popover.querySelector('[data-type="left"]'))return Vr.click(),g.preventDefault(),!0}if(on("⇧⌘C",g)){if(p.currentMode==="ir")return gn(ft,"center"),rr(p),g.preventDefault(),!0;if(Vr=p.wysiwyg.popover.querySelector('[data-type="center"]'))return Vr.click(),g.preventDefault(),!0}if(on("⇧⌘R",g)){if(p.currentMode==="ir")return gn(ft,"right"),rr(p),g.preventDefault(),!0;var Vr;if(Vr=p.wysiwyg.popover.querySelector('[data-type="right"]'))return Vr.click(),g.preventDefault(),!0}}return!1},Qu=function(p,g,w,I){if(w.tagName==="PRE"&&on("⌘A",g))return I.selectNodeContents(w.firstElementChild),g.preventDefault(),!0;if(p.options.tab&&g.key==="Tab"&&!g.shiftKey&&I.toString()==="")return I.insertNode(document.createTextNode(p.options.tab)),I.collapse(!1),rr(p),g.preventDefault(),!0;if(g.key==="Backspace"&&!(0,Be.yl)(g)&&!g.shiftKey&&!g.altKey){var k=(0,vt.im)(w,p[p.currentMode].element,I);if((k.start===0||k.start===1&&w.innerText===`
`)&&I.toString()==="")return w.parentElement.outerHTML='<p data-block="0"><wbr>'+w.firstElementChild.innerHTML+"</p>",(0,vt.ib)(p[p.currentMode].element,I),rr(p),g.preventDefault(),!0}return!(0,Be.yl)(g)&&!g.altKey&&g.key==="Enter"&&(w.firstElementChild.textContent.endsWith(`
`)||w.firstElementChild.insertAdjacentText("beforeend",`
`),I.extractContents(),I.insertNode(document.createTextNode(`
`)),I.collapse(!1),(0,vt.Hc)(I),(0,Be.vU)()||(p.currentMode==="wysiwyg"?hu(p,I):ln(p,I)),Io(p),g.preventDefault(),!0)},Ai=function(p,g,w,I){var k=g.startContainer,Ue=(0,et.lG)(k,"BLOCKQUOTE");if(Ue&&g.toString()===""){if(w.key==="Backspace"&&!(0,Be.yl)(w)&&!w.shiftKey&&!w.altKey&&(0,vt.im)(Ue,p[p.currentMode].element,g).start===0)return g.insertNode(document.createElement("wbr")),Ue.outerHTML=Ue.innerHTML,(0,vt.ib)(p[p.currentMode].element,g),rr(p),w.preventDefault(),!0;if(I&&w.key==="Enter"&&!(0,Be.yl)(w)&&!w.shiftKey&&!w.altKey&&I.parentElement.tagName==="BLOCKQUOTE"){var ft=!1;if(I.innerHTML.replace(P.g.ZWSP,"")===`
`||I.innerHTML.replace(P.g.ZWSP,"")===""?(ft=!0,I.remove()):I.innerHTML.endsWith(`

`)&&(0,vt.im)(I,p[p.currentMode].element,g).start===I.textContent.length-1&&(I.innerHTML=I.innerHTML.substr(0,I.innerHTML.length-2),ft=!0),ft)return Ue.insertAdjacentHTML("afterend",'<p data-block="0">'+P.g.ZWSP+`<wbr>
</p>`),(0,vt.ib)(p[p.currentMode].element,g),rr(p),w.preventDefault(),!0}var Bt=(0,et.F9)(k);if(p.currentMode==="wysiwyg"&&Bt&&on("⇧⌘;",w))return g.insertNode(document.createElement("wbr")),Bt.outerHTML='<blockquote data-block="0">'+Bt.outerHTML+"</blockquote>",(0,vt.ib)(p.wysiwyg.element,g),Mn(p),w.preventDefault(),!0;if(In(p,w,g,Ue,Ue)||Qn(p,w,g,Ue,Ue))return!0}return!1},dl=function(p,g,w){var I=g.startContainer,k=(0,et.fb)(I,"vditor-task");if(k){if(on("⇧⌘J",w)){var Ue=k.firstElementChild;return Ue.checked?Ue.removeAttribute("checked"):Ue.setAttribute("checked","checked"),rr(p),w.preventDefault(),!0}if(w.key==="Backspace"&&!(0,Be.yl)(w)&&!w.shiftKey&&!w.altKey&&g.toString()===""&&g.startOffset===1&&(I.nodeType===3&&I.previousSibling&&I.previousSibling.tagName==="INPUT"||I.nodeType!==3)){var ft=k.previousElementSibling;return k.querySelector("input").remove(),ft?((0,et.DX)(ft).parentElement.insertAdjacentHTML("beforeend","<wbr>"+k.innerHTML.trim()),k.remove()):(k.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+(k.innerHTML.trim()||`
`)+"</p>"),k.nextElementSibling?k.remove():k.parentElement.remove()),(0,vt.ib)(p[p.currentMode].element,g),rr(p),w.preventDefault(),!0}if(w.key==="Enter"&&!(0,Be.yl)(w)&&!w.shiftKey&&!w.altKey){if(k.textContent.trim()==="")if((0,et.fb)(k.parentElement,"vditor-task")){var Bt=(0,et.O9)(I);Bt&&Jt(p,k,g,Bt)}else if(k.nextElementSibling){var Xt="",Ut="",Wt=!1;Array.from(k.parentElement.children).forEach(function(Vn){k.isSameNode(Vn)?Wt=!0:Wt?Xt+=Vn.outerHTML:Ut+=Vn.outerHTML});var tr=k.parentElement.tagName,Vr=k.parentElement.tagName==="OL"?"":' data-marker="'+k.parentElement.getAttribute("data-marker")+'"',ba="";Ut&&(ba=k.parentElement.tagName==="UL"?"":' start="1"',Ut="<"+tr+' data-tight="true"'+Vr+' data-block="0">'+Ut+"</"+tr+">"),k.parentElement.outerHTML=Ut+`<p data-block="0"><wbr>
</p><`+tr+`
 data-tight="true"`+Vr+' data-block="0"'+ba+">"+Xt+"</"+tr+">"}else k.parentElement.insertAdjacentHTML("afterend",`<p data-block="0"><wbr>
</p>`),k.parentElement.querySelectorAll("li").length===1?k.parentElement.remove():k.remove();else I.nodeType!==3&&g.startOffset===0&&I.firstChild.tagName==="INPUT"?g.setStart(I.childNodes[1],1):(g.setEndAfter(k.lastChild),k.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'+k.getAttribute("data-marker")+'"><input type="checkbox"> <wbr></li>'),document.querySelector("wbr").after(g.extractContents()));return(0,vt.ib)(p[p.currentMode].element,g),rr(p),Io(p),w.preventDefault(),!0}}return!1},Ls=function(p,g,w,I){if(g.startContainer.nodeType!==3){var k=g.startContainer.children[g.startOffset];if(k&&k.tagName==="HR")return g.selectNodeContents(k.previousElementSibling),g.collapse(!1),w.preventDefault(),!0}if(I){var Ue=I.previousElementSibling;if(Ue&&(0,vt.im)(I,p[p.currentMode].element,g).start===0&&((0,Be.vU)()&&Ue.tagName==="HR"||Ue.tagName==="TABLE")){if(Ue.tagName==="TABLE"){var ft=Ue.lastElementChild.lastElementChild.lastElementChild;ft.innerHTML=ft.innerHTML.trimLeft()+"<wbr>"+I.textContent.trim(),I.remove()}else Ue.remove();return(0,vt.ib)(p[p.currentMode].element,g),rr(p),w.preventDefault(),!0}}return!1},zu=function(p){(0,Be.vU)()&&p.startContainer.nodeType!==3&&p.startContainer.tagName==="HR"&&p.setStartBefore(p.startContainer)},Wi=function(p,g,w){var I,k;if(!(0,Be.vU)())return!1;if(p.key==="ArrowUp"&&g&&((I=g.previousElementSibling)===null||I===void 0?void 0:I.tagName)==="TABLE"){var Ue=g.previousElementSibling;return w.selectNodeContents(Ue.rows[Ue.rows.length-1].lastElementChild),w.collapse(!1),p.preventDefault(),!0}return!(p.key!=="ArrowDown"||!g||((k=g.nextElementSibling)===null||k===void 0?void 0:k.tagName)!=="TABLE")&&(w.selectNodeContents(g.nextElementSibling.rows[0].cells[0]),w.collapse(!0),p.preventDefault(),!0)},Rs=function(p,g,w){return Ss(void 0,void 0,void 0,function(){var I,k,Ue,ft,Bt,Xt,Ut,Wt,tr,Vr,ba,Vn,ha,na,Gr,sa;return qt(this,function(la){switch(la.label){case 0:return p[p.currentMode].element.getAttribute("contenteditable")!=="true"?[2]:(g.stopPropagation(),g.preventDefault(),"clipboardData"in g?(I=g.clipboardData.getData("text/html"),k=g.clipboardData.getData("text/plain"),Ue=g.clipboardData.files):(I=g.dataTransfer.getData("text/html"),k=g.dataTransfer.getData("text/plain"),g.dataTransfer.types.includes("Files")&&(Ue=g.dataTransfer.items)),ft={},Bt=function($r,xa){if(!xa)return["",Lute.WalkContinue];var vo=$r.TokensStr();if($r.__internal_object__.Parent.Type===34&&vo&&vo.indexOf("file://")===-1&&p.options.upload.linkToImgUrl){var io=new XMLHttpRequest;io.open("POST",p.options.upload.linkToImgUrl),p.options.upload.token&&io.setRequestHeader("X-Upload-Token",p.options.upload.token),p.options.upload.withCredentials&&(io.withCredentials=!0),Hu(p,io),io.setRequestHeader("Content-Type","application/json; charset=utf-8"),io.onreadystatechange=function(){if(io.readyState===XMLHttpRequest.DONE){if(io.status===200){var lo=io.responseText;p.options.upload.linkToImgFormat&&(lo=p.options.upload.linkToImgFormat(io.responseText));var co=JSON.parse(lo);if(co.code!==0)return void p.tip.show(co.msg);var ca=co.data.originalURL;if(p.currentMode==="sv")p.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(di){di.textContent===ca&&(di.textContent=co.data.url)});else{var To=p[p.currentMode].element.querySelector('img[src="'+ca+'"]');To.src=co.data.url,p.currentMode==="ir"&&(To.previousElementSibling.previousElementSibling.innerHTML=co.data.url)}rr(p)}else p.tip.show(io.responseText);p.options.upload.linkToImgCallback&&p.options.upload.linkToImgCallback(io.responseText)}},io.send(JSON.stringify({url:vo}))}return p.currentMode==="ir"?['<span class="vditor-ir__marker vditor-ir__marker--link">'+Lute.EscapeHTMLStr(vo)+"</span>",Lute.WalkContinue]:p.currentMode==="wysiwyg"?["",Lute.WalkContinue]:['<span class="vditor-sv__marker--link">'+Lute.EscapeHTMLStr(vo)+"</span>",Lute.WalkContinue]},I.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='<a href="'+k+'">'+k+"</a>"&&I.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='<!--StartFragment--><a href="'+k+'">'+k+"</a><!--EndFragment-->"||(I=""),(Xt=new DOMParser().parseFromString(I,"text/html")).body&&(I=Xt.body.innerHTML),I=Lute.Sanitize(I),p.wysiwyg.getComments(p),Ut=p[p.currentMode].element.scrollHeight,Wt=function($r,xa,vo){vo===void 0&&(vo="sv");var io=document.createElement("div");io.innerHTML=$r;var lo=!1;io.childElementCount===1&&io.lastElementChild.style.fontFamily.indexOf("monospace")>-1&&(lo=!0);var co=io.querySelectorAll("pre");if(io.childElementCount===1&&co.length===1&&co[0].className!=="vditor-wysiwyg"&&co[0].className!=="vditor-sv"&&(lo=!0),$r.indexOf(`
<p class="p1">`)===0&&(lo=!0),io.childElementCount===1&&io.firstElementChild.tagName==="TABLE"&&io.querySelector(".line-number")&&io.querySelector(".line-content")&&(lo=!0),lo){var ca=xa||$r;return/\n/.test(ca)||co.length===1?vo==="wysiwyg"?'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'+ca.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"<wbr></code></pre></div>":"\n```\n"+ca.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```":vo==="wysiwyg"?"<code>"+ca.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"</code><wbr>":"`"+ca+"`"}return!1}(I,k,p.currentMode),(tr=p.currentMode==="sv"?(0,et.a1)(g.target,"data-type","code-block"):(0,et.lG)(g.target,"CODE"))?(p.currentMode==="sv"?document.execCommand("insertHTML",!1,k.replace(/&/g,"&amp;").replace(/</g,"&lt;")):(Vr=(0,vt.im)(g.target,p[p.currentMode].element),tr.parentElement.tagName!=="PRE"&&(k+=P.g.ZWSP),tr.textContent=tr.textContent.substring(0,Vr.start)+k+tr.textContent.substring(Vr.end),(0,vt.$j)(Vr.start+k.length,Vr.start+k.length,tr.parentElement),!((sa=tr.parentElement)===null||sa===void 0)&&sa.nextElementSibling.classList.contains("vditor-"+p.currentMode+"__preview")&&(tr.parentElement.nextElementSibling.innerHTML=tr.outerHTML,Dt(tr.parentElement.nextElementSibling,p))),[3,8]):[3,1]);case 1:return Wt?(w.pasteCode(Wt),[3,8]):[3,2];case 2:return I.trim()===""?[3,3]:((ba=document.createElement("div")).innerHTML=I,ba.querySelectorAll("[style]").forEach(function($r){$r.removeAttribute("style")}),ba.querySelectorAll(".vditor-copy").forEach(function($r){$r.remove()}),p.currentMode==="ir"?(ft.HTML2VditorIRDOM={renderLinkDest:Bt},p.lute.SetJSRenderers({renderers:ft}),(0,vt.oC)(p.lute.HTML2VditorIRDOM(ba.innerHTML),p)):p.currentMode==="wysiwyg"?(ft.HTML2VditorDOM={renderLinkDest:Bt},p.lute.SetJSRenderers({renderers:ft}),(0,vt.oC)(p.lute.HTML2VditorDOM(ba.innerHTML),p)):(ft.Md2VditorSVDOM={renderLinkDest:Bt},p.lute.SetJSRenderers({renderers:ft}),Si(p,p.lute.HTML2Md(ba.innerHTML).trimRight())),p.outline.render(p),[3,8]);case 3:return Ue.length>0?p.options.upload.url||p.options.upload.handler?[4,nu(p,Ue)]:[3,5]:[3,7];case 4:return la.sent(),[3,6];case 5:Vn=new FileReader,"clipboardData"in g?(Ue=g.clipboardData.files,ha=Ue[0]):g.dataTransfer.types.includes("Files")&&(Ue=g.dataTransfer.items,ha=Ue[0].getAsFile()),ha&&ha.type.startsWith("image")&&(Vn.readAsDataURL(ha),Vn.onload=function(){var $r="";p.currentMode==="wysiwyg"?$r+='<img alt="'+ha.name+'" src="'+Vn.result.toString()+`">
`:$r+="!["+ha.name+"]("+Vn.result.toString()+`)
`,document.execCommand("insertHTML",!1,$r)}),la.label=6;case 6:return[3,8];case 7:k.trim()!==""&&Ue.length===0&&((Gr=(0,vt.zh)(p)).toString()!==""&&p.lute.IsValidLinkDest(k)&&(k="["+Gr.toString()+"]("+k+")"),p.currentMode==="ir"?(ft.Md2VditorIRDOM={renderLinkDest:Bt},p.lute.SetJSRenderers({renderers:ft}),(0,vt.oC)(p.lute.Md2VditorIRDOM(k),p)):p.currentMode==="wysiwyg"?(ft.Md2VditorDOM={renderLinkDest:Bt},p.lute.SetJSRenderers({renderers:ft}),(0,vt.oC)(p.lute.Md2VditorDOM(k),p)):(ft.Md2VditorSVDOM={renderLinkDest:Bt},p.lute.SetJSRenderers({renderers:ft}),Si(p,k)),p.outline.render(p)),la.label=8;case 8:return p.currentMode!=="sv"&&((na=(0,et.F9)((0,vt.zh)(p).startContainer))&&(Gr=(0,vt.zh)(p),p[p.currentMode].element.querySelectorAll("wbr").forEach(function($r){$r.remove()}),Gr.insertNode(document.createElement("wbr")),p.currentMode==="wysiwyg"?na.outerHTML=p.lute.SpinVditorDOM(na.outerHTML):na.outerHTML=p.lute.SpinVditorIRDOM(na.outerHTML),(0,vt.ib)(p[p.currentMode].element,Gr)),p[p.currentMode].element.querySelectorAll(".vditor-"+p.currentMode+"__preview[data-render='2']").forEach(function($r){Dt($r,p)})),p.wysiwyg.triggerRemoveComment(p),rr(p),p[p.currentMode].element.scrollHeight-Ut>Math.min(p[p.currentMode].element.clientHeight,window.innerHeight)/2&&Io(p),[2]}})})},xs=function(p){p.hint.render(p);var g=(0,vt.zh)(p).startContainer,w=(0,et.a1)(g,"data-type","code-block-info");if(w)if(w.textContent.replace(P.g.ZWSP,"")===""&&p.hint.recentLanguage)w.textContent=P.g.ZWSP+p.hint.recentLanguage,(0,vt.zh)(p).selectNodeContents(w);else{var I=[],k=w.textContent.substring(0,(0,vt.im)(w,p.ir.element).start).replace(P.g.ZWSP,"");(p.options.preview.hljs.langs||P.g.CODE_LANGUAGES).forEach(function(Ue){Ue.indexOf(k.toLowerCase())>-1&&I.push({html:Ue,value:Ue})}),p.hint.genHTML(I,k,p)}},Nu=function(p,g){g===void 0&&(g={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),g.enableHint&&xs(p),clearTimeout(p.ir.processTimeoutId),p.ir.processTimeoutId=window.setTimeout(function(){if(!p.ir.composingLock){var w=j(p);typeof p.options.input=="function"&&g.enableInput&&p.options.input(w),p.options.counter.enable&&p.counter.render(p,w),p.options.cache.enable&&(0,Be.pK)()&&(localStorage.setItem(p.options.cache.id,w),p.options.cache.after&&p.options.cache.after(w)),p.devtools&&p.devtools.renderEchart(p),g.enableAddUndoStack&&p.undo.addToUndoStack(p)}},p.options.undoDelay)},Bs=function(p,g){var w=(0,vt.zh)(p),I=(0,et.F9)(w.startContainer)||w.startContainer;if(I){var k=I.querySelector(".vditor-ir__marker--heading");k?k.innerHTML=g:(I.insertAdjacentText("afterbegin",g),w.selectNodeContents(I),w.collapse(!1)),ln(p,w.cloneRange()),tn(p)}},Ju=function(p,g,w){var I=(0,et.a1)(p.startContainer,"data-type",w);if(I){I.firstElementChild.remove(),I.lastElementChild.remove(),p.insertNode(document.createElement("wbr"));var k=document.createElement("div");k.innerHTML=g.lute.SpinVditorIRDOM(I.outerHTML),I.outerHTML=k.firstElementChild.innerHTML.trim()}},us=function(p,g,w,I){var k=(0,vt.zh)(p),Ue=g.getAttribute("data-type"),ft=k.startContainer;ft.nodeType===3&&(ft=ft.parentElement);var Bt=!0;if(g.classList.contains("vditor-menu--current"))if(Ue==="quote"){var Xt=(0,et.lG)(ft,"BLOCKQUOTE");Xt&&(k.insertNode(document.createElement("wbr")),Xt.outerHTML=Xt.innerHTML.trim()===""?'<p data-block="0">'+Xt.innerHTML+"</p>":Xt.innerHTML)}else if(Ue==="link"){var Ut=(0,et.a1)(k.startContainer,"data-type","a");if(Ut){var Wt=(0,et.fb)(k.startContainer,"vditor-ir__link");Wt?(k.insertNode(document.createElement("wbr")),Ut.outerHTML=Wt.innerHTML):Ut.outerHTML=Ut.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else Ue==="italic"?Ju(k,p,"em"):Ue==="bold"?Ju(k,p,"strong"):Ue==="strike"?Ju(k,p,"s"):Ue==="inline-code"?Ju(k,p,"code"):Ue!=="check"&&Ue!=="list"&&Ue!=="ordered-list"||(mt(p,k,Ue),Bt=!1,g.classList.remove("vditor-menu--current"));else{p.ir.element.childNodes.length===0&&(p.ir.element.innerHTML='<p data-block="0"><wbr></p>',(0,vt.ib)(p.ir.element,k));var tr=(0,et.F9)(k.startContainer);if(Ue==="line"){if(tr){var Vr=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;tr.innerHTML.trim()===""?tr.outerHTML=Vr:tr.insertAdjacentHTML("afterend",Vr)}}else if(Ue==="quote")tr&&(k.insertNode(document.createElement("wbr")),tr.outerHTML='<blockquote data-block="0">'+tr.outerHTML+"</blockquote>",Bt=!1,g.classList.add("vditor-menu--current"));else if(Ue==="link"){var ba=void 0;ba=k.toString()===""?w+"<wbr>"+I:""+w+k.toString()+I.replace(")","<wbr>)"),document.execCommand("insertHTML",!1,ba),Bt=!1,g.classList.add("vditor-menu--current")}else if(Ue==="italic"||Ue==="bold"||Ue==="strike"||Ue==="inline-code"||Ue==="code"||Ue==="table"){ba=void 0,k.toString()===""?ba=w+"<wbr>"+I:(ba=Ue==="code"?w+`
`+k.toString()+"<wbr>"+I:Ue==="table"?""+w+k.toString()+"<wbr>"+I:""+w+k.toString()+I+"<wbr>",k.deleteContents()),Ue!=="table"&&Ue!=="code"||(ba=`
`+ba+`

`);var Vn=document.createElement("span");Vn.innerHTML=ba,k.insertNode(Vn),ln(p,k),Ue==="table"&&(k.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),(0,vt.Hc)(k))}else Ue!=="check"&&Ue!=="list"&&Ue!=="ordered-list"||(mt(p,k,Ue,!1),Bt=!1,De(p.toolbar.elements,["check","list","ordered-list"]),g.classList.add("vditor-menu--current"))}(0,vt.ib)(p.ir.element,k),Nu(p),Bt&&tn(p)},Ql=function(p,g,w,I){return new(w||(w=Promise))(function(k,Ue){function ft(Ut){try{Xt(I.next(Ut))}catch(Wt){Ue(Wt)}}function Bt(Ut){try{Xt(I.throw(Ut))}catch(Wt){Ue(Wt)}}function Xt(Ut){var Wt;Ut.done?k(Ut.value):(Wt=Ut.value,Wt instanceof w?Wt:new w(function(tr){tr(Wt)})).then(ft,Bt)}Xt((I=I.apply(p,g||[])).next())})},vl=function(p,g){var w,I,k,Ue,ft={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return Ue={next:Bt(0),throw:Bt(1),return:Bt(2)},typeof Symbol=="function"&&(Ue[Symbol.iterator]=function(){return this}),Ue;function Bt(Xt){return function(Ut){return function(Wt){if(w)throw new TypeError("Generator is already executing.");for(;ft;)try{if(w=1,I&&(k=2&Wt[0]?I.return:Wt[0]?I.throw||((k=I.return)&&k.call(I),0):I.next)&&!(k=k.call(I,Wt[1])).done)return k;switch(I=0,k&&(Wt=[2&Wt[0],k.value]),Wt[0]){case 0:case 1:k=Wt;break;case 4:return ft.label++,{value:Wt[1],done:!1};case 5:ft.label++,I=Wt[1],Wt=[0];continue;case 7:Wt=ft.ops.pop(),ft.trys.pop();continue;default:if(k=ft.trys,!((k=k.length>0&&k[k.length-1])||Wt[0]!==6&&Wt[0]!==2)){ft=0;continue}if(Wt[0]===3&&(!k||Wt[1]>k[0]&&Wt[1]<k[3])){ft.label=Wt[1];break}if(Wt[0]===6&&ft.label<k[1]){ft.label=k[1],k=Wt;break}if(k&&ft.label<k[2]){ft.label=k[2],ft.ops.push(Wt);break}k[2]&&ft.ops.pop(),ft.trys.pop();continue}Wt=g.call(p,ft)}catch(tr){Wt=[6,tr],I=0}finally{w=k=0}if(5&Wt[0])throw Wt[1];return{value:Wt[0]?Wt[1]:void 0,done:!0}}([Xt,Ut])}}},Dl=function(){function p(g){var w=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(I,k){w.element.style.display="none";var Ue=decodeURIComponent(I.getAttribute("data-value")),ft=window.getSelection().getRangeAt(0);if(k.currentMode==="ir"){var Bt=(0,et.a1)(ft.startContainer,"data-type","code-block-info");if(Bt)return Bt.textContent=P.g.ZWSP+Ue.trimRight(),ft.selectNodeContents(Bt),ft.collapse(!1),Nu(k),Bt.parentElement.querySelectorAll("code").forEach(function(tr){tr.className="language-"+Ue.trimRight()}),Dt(Bt.parentElement.querySelector(".vditor-ir__preview"),k),void(w.recentLanguage=Ue.trimRight())}if(k.currentMode==="wysiwyg"&&ft.startContainer.nodeType!==3){var Xt=ft.startContainer,Ut=void 0;if((Ut=Xt.classList.contains("vditor-input")?Xt:Xt.firstElementChild)&&Ut.classList.contains("vditor-input"))return Ut.value=Ue.trimRight(),ft.selectNodeContents(Ut),ft.collapse(!1),Ut.dispatchEvent(new CustomEvent("input",{detail:1})),void(w.recentLanguage=Ue.trimRight())}if(ft.setStart(ft.startContainer,w.lastIndex),ft.deleteContents(),k.options.hint.parse?k.currentMode==="sv"?(0,vt.oC)(k.lute.SpinVditorSVDOM(Ue),k):k.currentMode==="wysiwyg"?(0,vt.oC)(k.lute.SpinVditorDOM(Ue),k):(0,vt.oC)(k.lute.SpinVditorIRDOM(Ue),k):(0,vt.oC)(Ue,k),w.splitChar===":"&&Ue.indexOf(":")>-1&&k.currentMode!=="sv"&&ft.insertNode(document.createTextNode(" ")),ft.collapse(!1),(0,vt.Hc)(ft),k.currentMode==="wysiwyg")(Wt=(0,et.fb)(ft.startContainer,"vditor-wysiwyg__block"))&&Wt.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(Wt.lastElementChild.innerHTML=Wt.firstElementChild.innerHTML,Dt(Wt.lastElementChild,k));else if(k.currentMode==="ir"){var Wt;(Wt=(0,et.fb)(ft.startContainer,"vditor-ir__marker--pre"))&&Wt.nextElementSibling.classList.contains("vditor-ir__preview")&&(Wt.nextElementSibling.innerHTML=Wt.innerHTML,Dt(Wt.nextElementSibling,k))}rr(k)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",g.push({key:":"})}return p.prototype.render=function(g){var w=this;if(window.getSelection().focusNode){var I,k=getSelection().getRangeAt(0);I=k.startContainer.textContent.substring(0,k.startOffset)||"";var Ue=this.getKey(I,g.options.hint.extend);if(Ue===void 0)this.element.style.display="none",clearTimeout(this.timeId);else if(this.splitChar===":"){var ft=Ue===""?g.options.hint.emoji:g.lute.GetEmojis(),Bt=[];Object.keys(ft).forEach(function(Xt){Xt.indexOf(Ue.toLowerCase())===0&&(ft[Xt].indexOf(".")>-1?Bt.push({html:'<img src="'+ft[Xt]+'" title=":'+Xt+':"/> :'+Xt+":",value:":"+Xt+":"}):Bt.push({html:'<span class="vditor-hint__emoji">'+ft[Xt]+"</span>"+Xt,value:ft[Xt]}))}),this.genHTML(Bt,Ue,g)}else g.options.hint.extend.forEach(function(Xt){Xt.key===w.splitChar&&(clearTimeout(w.timeId),w.timeId=window.setTimeout(function(){return Ql(w,void 0,void 0,function(){var Ut;return vl(this,function(Wt){switch(Wt.label){case 0:return Ut=this.genHTML,[4,Xt.hint(Ue)];case 1:return Ut.apply(this,[Wt.sent(),Ue,g]),[2]}})})},g.options.hint.delay))})}},p.prototype.genHTML=function(g,w,I){var k=this;if(g.length!==0){var Ue=I[I.currentMode].element,ft=(0,vt.Ny)(Ue),Bt=ft.left+(I.options.outline.position==="left"?I.outline.element.offsetWidth:0),Xt=ft.top,Ut="";g.forEach(function(tr,Vr){if(!(Vr>7)){var ba=tr.html;if(w!==""){var Vn=ba.lastIndexOf(">")+1,ha=ba.substr(Vn),na=ha.toLowerCase().indexOf(w.toLowerCase());na>-1&&(ha=ha.substring(0,na)+"<b>"+ha.substring(na,na+w.length)+"</b>"+ha.substring(na+w.length),ba=ba.substr(0,Vn)+ha)}Ut+='<button type="button" data-value="'+encodeURIComponent(tr.value)+` "
`+(Vr===0?"class='vditor-hint--current'":"")+"> "+ba+"</button>"}}),this.element.innerHTML=Ut;var Wt=parseInt(document.defaultView.getComputedStyle(Ue,null).getPropertyValue("line-height"),10);this.element.style.top=Xt+(Wt||22)+"px",this.element.style.left=Bt+"px",this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(tr){tr.addEventListener("click",function(Vr){k.fillEmoji(tr,I),Vr.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight&&(this.element.style.top=Xt-this.element.offsetHeight+"px"),this.element.getBoundingClientRect().right>window.innerWidth&&(this.element.style.left="auto",this.element.style.right="0")}else this.element.style.display="none"},p.prototype.select=function(g,w){if(this.element.querySelectorAll("button").length===0||this.element.style.display==="none")return!1;var I=this.element.querySelector(".vditor-hint--current");if(g.key==="ArrowDown")return g.preventDefault(),g.stopPropagation(),I.removeAttribute("class"),I.nextElementSibling?I.nextElementSibling.className="vditor-hint--current":this.element.children[0].className="vditor-hint--current",!0;if(g.key==="ArrowUp"){if(g.preventDefault(),g.stopPropagation(),I.removeAttribute("class"),I.previousElementSibling)I.previousElementSibling.className="vditor-hint--current";else{var k=this.element.children.length;this.element.children[k-1].className="vditor-hint--current"}return!0}return!((0,Be.yl)(g)||g.shiftKey||g.altKey||g.key!=="Enter"||g.isComposing)&&(g.preventDefault(),g.stopPropagation(),this.fillEmoji(I,w),!0)},p.prototype.getKey=function(g,w){var I,k=this;if(this.lastIndex=-1,this.splitChar="",w.forEach(function(Xt){var Ut=g.lastIndexOf(Xt.key);k.lastIndex<Ut&&(k.splitChar=Xt.key,k.lastIndex=Ut)}),this.lastIndex===-1)return I;var Ue=g.split(this.splitChar),ft=Ue[Ue.length-1];if(Ue.length>1&&ft.trim()===ft)if(Ue.length===2&&Ue[0]===""&&Ue[1].length<32)I=Ue[1];else{var Bt=Ue[Ue.length-2].slice(-1);(0,Te.X)(Bt)===" "&&ft.length<32&&(I=ft)}return I},p}(),Tt=function(){function p(g){this.composingLock=!1;var w=document.createElement("div");w.className="vditor-ir",w.innerHTML='<pre class="vditor-reset" placeholder="'+g.options.placeholder+`"
 contenteditable="true" spellcheck="false"></pre>`,this.element=w.firstElementChild,this.bindEvent(g),aa(g,this.element),Ua(g,this.element),jo(g,this.element),pi(g,this.element),oi(g,this.element),Xa(g,this.element),Ka(g,this.element,this.copy),Yo(g,this.element,this.copy)}return p.prototype.copy=function(g,w){var I=getSelection().getRangeAt(0);if(I.toString()!==""){g.stopPropagation(),g.preventDefault();var k=document.createElement("div");k.appendChild(I.cloneContents()),g.clipboardData.setData("text/plain",w.lute.VditorIRDOM2Md(k.innerHTML).trim()),g.clipboardData.setData("text/html","")}},p.prototype.bindEvent=function(g){var w=this;this.element.addEventListener("paste",function(I){Rs(g,I,{pasteCode:function(k){document.execCommand("insertHTML",!1,k)}})}),this.element.addEventListener("scroll",function(){tt(g,["hint"])}),this.element.addEventListener("compositionstart",function(I){w.composingLock=!0}),this.element.addEventListener("compositionend",function(I){(0,Be.vU)()||ln(g,getSelection().getRangeAt(0).cloneRange()),w.composingLock=!1}),this.element.addEventListener("input",function(I){if(I.inputType!=="deleteByDrag"&&I.inputType!=="insertFromDrop")return w.preventInput?(w.preventInput=!1,void Nu(g,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})):void(w.composingLock||I.data==="‘"||I.data==="“"||I.data==="《"||ln(g,getSelection().getRangeAt(0).cloneRange(),!1,I))}),this.element.addEventListener("click",function(I){if(I.target.tagName==="INPUT")return I.target.checked?I.target.setAttribute("checked","checked"):I.target.removeAttribute("checked"),w.preventInput=!0,void Nu(g);var k=(0,vt.zh)(g),Ue=(0,et.fb)(I.target,"vditor-ir__preview");if(Ue||(Ue=(0,et.fb)(k.startContainer,"vditor-ir__preview")),Ue&&(Ue.previousElementSibling.firstElementChild?k.selectNodeContents(Ue.previousElementSibling.firstElementChild):k.selectNodeContents(Ue.previousElementSibling),k.collapse(!0),(0,vt.Hc)(k),Io(g)),I.target.tagName==="IMG"){var ft=I.target.parentElement.querySelector(".vditor-ir__marker--link");ft&&(k.selectNode(ft),(0,vt.Hc)(k))}var Bt=(0,et.a1)(I.target,"data-type","a");if(!Bt||Bt.classList.contains("vditor-ir__node--expand")){if(I.target.isEqualNode(w.element)&&w.element.lastElementChild&&k.collapsed){var Xt=w.element.lastElementChild.getBoundingClientRect();I.y>Xt.top+Xt.height&&(w.element.lastElementChild.tagName==="P"&&w.element.lastElementChild.textContent.trim().replace(P.g.ZWSP,"")===""?(k.selectNodeContents(w.element.lastElementChild),k.collapse(!1)):(w.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+P.g.ZWSP+"<wbr></p>"),(0,vt.ib)(w.element,k)))}k.toString()===""?dt(k,g):setTimeout(function(){dt((0,vt.zh)(g),g)}),_t(I,g),tn(g)}else g.options.link.click?g.options.link.click(Bt.querySelector(":scope > .vditor-ir__marker--link")):g.options.link.isOpen&&window.open(Bt.querySelector(":scope > .vditor-ir__marker--link").textContent)}),this.element.addEventListener("keyup",function(I){if(!I.isComposing&&!(0,Be.yl)(I))if(I.key==="Enter"&&Io(g),tn(g),I.key!=="Backspace"&&I.key!=="Delete"||g.ir.element.innerHTML===""||g.ir.element.childNodes.length!==1||!g.ir.element.firstElementChild||g.ir.element.firstElementChild.tagName!=="P"||g.ir.element.firstElementChild.childElementCount!==0||g.ir.element.textContent!==""&&g.ir.element.textContent!==`
`){var k=(0,vt.zh)(g);I.key==="Backspace"?((0,Be.vU)()&&k.startContainer.textContent===`
`&&k.startOffset===1&&(k.startContainer.textContent="",dt(k,g)),w.element.querySelectorAll(".language-math").forEach(function(ft){var Bt=ft.querySelector("br");Bt&&Bt.remove()})):I.key.indexOf("Arrow")>-1?(I.key!=="ArrowLeft"&&I.key!=="ArrowRight"||xs(g),dt(k,g)):I.keyCode===229&&I.code===""&&I.key==="Unidentified"&&dt(k,g);var Ue=(0,et.fb)(k.startContainer,"vditor-ir__preview");if(Ue){if(I.key==="ArrowUp"||I.key==="ArrowLeft")return Ue.previousElementSibling.firstElementChild?k.selectNodeContents(Ue.previousElementSibling.firstElementChild):k.selectNodeContents(Ue.previousElementSibling),k.collapse(!1),I.preventDefault(),!0;if(Ue.tagName==="SPAN"&&(I.key==="ArrowDown"||I.key==="ArrowRight"))return Ue.parentElement.getAttribute("data-type")==="html-entity"?(Ue.parentElement.insertAdjacentText("afterend",P.g.ZWSP),k.setStart(Ue.parentElement.nextSibling,1)):k.selectNodeContents(Ue.parentElement.lastElementChild),k.collapse(!1),I.preventDefault(),!0}}else g.ir.element.innerHTML=""})},p}(),pn=function(p){return p.currentMode==="sv"?p.lute.Md2HTML(j(p)):p.currentMode==="wysiwyg"?p.lute.VditorDOM2HTML(p.wysiwyg.element.innerHTML):p.currentMode==="ir"?p.lute.VditorIRDOM2HTML(p.ir.element.innerHTML):void 0},_n=We(895),or=We(818),Mr=function(){function p(g){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'+g+`</div>
<div class="vditor-outline__content"></div>`}return p.prototype.render=function(g){return g.preview.element.style.display==="block"?(0,or.k)(g.preview.previewElement,this.element.lastElementChild,g):(0,or.k)(g[g.currentMode].element,this.element.lastElementChild,g)},p.prototype.toggle=function(g,w,I){var k;w===void 0&&(w=!0),I===void 0&&(I=!0);var Ue=(k=g.toolbar.elements.outline)===null||k===void 0?void 0:k.firstElementChild;if(w&&window.innerWidth>=P.g.MOBILE_WIDTH?(this.element.style.display="block",this.render(g),Ue==null||Ue.classList.add("vditor-menu--current")):(this.element.style.display="none",Ue==null||Ue.classList.remove("vditor-menu--current")),I&&getSelection().rangeCount>0){var ft=getSelection().getRangeAt(0);g[g.currentMode].element.contains(ft.startContainer)&&(0,vt.Hc)(ft)}cn(g)},p}(),Ea=We(554),Ro=function(){function p(g){var w=this;this.element=document.createElement("div"),this.element.className="vditor-preview",this.previewElement=document.createElement("div"),this.previewElement.className="vditor-reset",g.options.classes.preview&&this.previewElement.classList.add(g.options.classes.preview),this.previewElement.style.maxWidth=g.options.preview.maxWidth+"px",this.previewElement.addEventListener("copy",function(Xt){if(Xt.target.tagName!=="TEXTAREA"){var Ut=document.createElement("div");Ut.className="vditor-reset",Ut.appendChild(getSelection().getRangeAt(0).cloneContents()),w.copyToX(g,Ut,"default"),Xt.preventDefault()}}),this.previewElement.addEventListener("click",function(Xt){var Ut=(0,et.lG)(Xt.target,"SPAN");if(Ut&&(0,et.fb)(Ut,"vditor-toc")){var Wt=w.previewElement.querySelector("#"+Ut.getAttribute("data-target-id"));Wt&&(w.element.scrollTop=Wt.offsetTop)}else{if(Xt.target.tagName==="A")return g.options.link.click?g.options.link.click(Xt.target):g.options.link.isOpen&&window.open(Xt.target.getAttribute("href")),void Xt.preventDefault();Xt.target.tagName==="IMG"&&(g.options.image.preview?g.options.image.preview(Xt.target):g.options.image.isPreview&&(0,ur.E)(Xt.target,g.options.lang,g.options.theme))}}),this.element.appendChild(this.previewElement);var I=g.options.preview.actions;if(I.length!==0){var k=document.createElement("div");k.className="vditor-preview__action";for(var Ue=[],ft=0;ft<I.length;ft++){var Bt=I[ft];if(typeof Bt!="object")switch(Bt){case"desktop":Ue.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":Ue.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":Ue.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":Ue.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到公众号"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":Ue.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到知乎"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>')}else Ue.push('<button type="button" data-type="'+Bt.key+'" class="'+Bt.className+'"'+(Bt.tooltip?' aria-label="'+Bt.tooltip+'"':"")+'">'+Bt.text+"</button>")}k.innerHTML=Ue.join(""),k.addEventListener((0,Be.Le)(),function(Xt){var Ut=(0,Ot.S)(Xt.target,"BUTTON");if(Ut){var Wt=Ut.getAttribute("data-type"),tr=I.find(function(Vr){return(Vr==null?void 0:Vr.key)===Wt});tr?tr.click(Wt):Wt!=="mp-wechat"&&Wt!=="zhihu"?(w.previewElement.style.width=Wt==="desktop"?"auto":Wt==="tablet"?"780px":"360px",w.previewElement.scrollWidth>w.previewElement.parentElement.clientWidth&&(w.previewElement.style.width="auto"),w.render(g),k.querySelectorAll("button").forEach(function(Vr){Vr.classList.remove("vditor-preview__action--current")}),Ut.classList.add("vditor-preview__action--current")):w.copyToX(g,w.previewElement.cloneNode(!0),Wt)}}),this.element.insertBefore(k,this.previewElement)}}return p.prototype.render=function(g,w){var I=this;if(clearTimeout(this.mdTimeoutId),this.element.style.display!=="none")if(w)this.previewElement.innerHTML=w;else if(j(g).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")!==""){var k=new Date().getTime(),Ue=j(g);this.mdTimeoutId=window.setTimeout(function(){if(g.options.preview.url){var ft=new XMLHttpRequest;ft.open("POST",g.options.preview.url),ft.setRequestHeader("Content-Type","application/json;charset=UTF-8"),ft.onreadystatechange=function(){if(ft.readyState===XMLHttpRequest.DONE)if(ft.status===200){var Xt=JSON.parse(ft.responseText);if(Xt.code!==0)return void g.tip.show(Xt.msg);g.options.preview.transform&&(Xt.data=g.options.preview.transform(Xt.data)),I.previewElement.innerHTML=Xt.data,I.afterRender(g,k)}else{var Ut=g.lute.Md2HTML(Ue);g.options.preview.transform&&(Ut=g.options.preview.transform(Ut)),I.previewElement.innerHTML=Ut,I.afterRender(g,k)}},ft.send(JSON.stringify({markdownText:Ue}))}else{var Bt=g.lute.Md2HTML(Ue);g.options.preview.transform&&(Bt=g.options.preview.transform(Bt)),I.previewElement.innerHTML=Bt,I.afterRender(g,k)}},g.options.preview.delay)}else this.previewElement.innerHTML="";else this.element.getAttribute("data-type")==="renderPerformance"&&g.tip.hide()},p.prototype.afterRender=function(g,w){g.options.preview.parse&&g.options.preview.parse(this.element);var I=new Date().getTime()-w;new Date().getTime()-w>2600?(g.tip.show(window.VditorI18n.performanceTip.replace("${x}",I.toString())),g.preview.element.setAttribute("data-type","renderPerformance")):g.preview.element.getAttribute("data-type")==="renderPerformance"&&(g.tip.hide(),g.preview.element.removeAttribute("data-type"));var k=g.preview.element.querySelector(".vditor-comment--focus");k&&k.classList.remove("vditor-comment--focus"),(0,yt.O)(g.preview.previewElement,g.options.preview.hljs),(0,Ht.s)(g.options.preview.hljs,g.preview.previewElement,g.options.cdn),(0,Mt.i)(g.preview.previewElement,g.options.cdn,g.options.theme),(0,vn.K)(g.preview.previewElement,g.options.cdn,g.options.theme),(0,ut.P)(g.preview.previewElement,g.options.cdn),(0,Et.v)(g.preview.previewElement,g.options.cdn),(0,it.p)(g.preview.previewElement,g.options.cdn,g.options.theme),(0,Wn.P)(g.preview.previewElement,g.options.cdn,g.options.theme),(0,$e.B)(g.preview.previewElement,g.options.cdn),(0,xt.Q)(g.preview.previewElement,g.options.cdn),g.options.preview.render.media.enable&&(0,Ea.Y)(g.preview.previewElement),g.options.customRenders.forEach(function(Bt){Bt.render(g.preview.previewElement,g)});var Ue=g.preview.element,ft=g.outline.render(g);ft===""&&(ft="[ToC]"),Ue.querySelectorAll('[data-type="toc-block"]').forEach(function(Bt){Bt.innerHTML=ft,(0,an.H)(Bt,{cdn:g.options.cdn,math:g.options.preview.math})}),(0,an.H)(g.preview.previewElement,{cdn:g.options.cdn,math:g.options.preview.math})},p.prototype.copyToX=function(g,w,I){I===void 0&&(I="mp-wechat"),I!=="zhihu"?w.querySelectorAll(".katex-html .base").forEach(function(Ue){Ue.style.display="initial"}):w.querySelectorAll(".language-math").forEach(function(Ue){Ue.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'+Ue.getAttribute("data-math")+'\\" style="display: block; margin: 0 auto; max-width: 100%;">'}),w.style.backgroundColor="#fff",w.querySelectorAll("code").forEach(function(Ue){Ue.style.backgroundImage="none"}),this.element.append(w);var k=w.ownerDocument.createRange();k.selectNode(w),(0,vt.Hc)(k),document.execCommand("copy"),w.remove(),g.tip.show(["zhihu","mp-wechat"].includes(I)?"已复制，可到"+(I==="zhihu"?"知乎":"微信公众号平台")+"进行粘贴":"已复制到剪切板")},p}(),Qo=function(){function p(g){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--"+g.options.resize.position,this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(g)}return p.prototype.bindEvent=function(g){var w=this;this.element.addEventListener("mousedown",function(I){var k=document,Ue=I.clientY,ft=g.element.offsetHeight,Bt=63+g.element.querySelector(".vditor-toolbar").clientHeight;k.ondragstart=function(){return!1},window.captureEvents&&window.captureEvents(),w.element.classList.add("vditor-resize--selected"),k.onmousemove=function(Xt){g.options.resize.position==="top"?g.element.style.height=Math.max(Bt,ft+(Ue-Xt.clientY))+"px":g.element.style.height=Math.max(Bt,ft+(Xt.clientY-Ue))+"px",g.options.typewriterMode&&(g.sv.element.style.paddingBottom=g.sv.element.parentElement.offsetHeight/2+"px")},k.onmouseup=function(){g.options.resize.after&&g.options.resize.after(g.element.offsetHeight-ft),window.captureEvents&&window.captureEvents(),k.onmousemove=null,k.onmouseup=null,k.ondragstart=null,k.onselectstart=null,k.onselect=null,w.element.classList.remove("vditor-resize--selected")}})},p}(),so=function(){function p(g){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",g.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(g),aa(g,this.element),jo(g,this.element),pi(g,this.element),oi(g,this.element),Xa(g,this.element),Ka(g,this.element,this.copy),Yo(g,this.element,this.copy)}return p.prototype.copy=function(g,w){g.stopPropagation(),g.preventDefault(),g.clipboardData.setData("text/plain",pr(w[w.currentMode].element))},p.prototype.bindEvent=function(g){var w=this;this.element.addEventListener("paste",function(I){Rs(g,I,{pasteCode:function(k){document.execCommand("insertHTML",!1,k)}})}),this.element.addEventListener("scroll",function(){if(g.preview.element.style.display==="block"){var I=w.element.scrollTop,k=w.element.clientHeight,Ue=w.element.scrollHeight-parseFloat(w.element.style.paddingBottom||"0"),ft=g.preview.element;ft.scrollTop=I/k>.5?(I+k)*ft.scrollHeight/Ue-k:I*ft.scrollHeight/Ue}}),this.element.addEventListener("compositionstart",function(I){w.composingLock=!0}),this.element.addEventListener("compositionend",function(I){(0,Be.vU)()||en(g,I),w.composingLock=!1}),this.element.addEventListener("input",function(I){if(I.inputType!=="deleteByDrag"&&I.inputType!=="insertFromDrop"&&!w.composingLock&&I.data!=="‘"&&I.data!=="“"&&I.data!=="《")return w.preventInput?(w.preventInput=!1,void Fo(g,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})):void en(g,I)}),this.element.addEventListener("keyup",function(I){I.isComposing||(0,Be.yl)(I)||(I.key!=="Backspace"&&I.key!=="Delete"||g.sv.element.innerHTML===""||g.sv.element.childNodes.length!==1||!g.sv.element.firstElementChild||g.sv.element.firstElementChild.tagName!=="DIV"||g.sv.element.firstElementChild.childElementCount!==2||g.sv.element.firstElementChild.textContent!==""&&g.sv.element.textContent!==`
`?I.key==="Enter"&&Io(g):g.sv.element.innerHTML="")})},p}(),ri=function(){function p(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return p.prototype.show=function(g,w){var I=this;w===void 0&&(w=6e3),this.element.className="vditor-tip vditor-tip--show",w===0?(this.element.innerHTML='<div class="vditor-tip__content">'+g+`
<div class="vditor-tip__close">X</div></div>`,this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){I.hide()})):(this.element.innerHTML='<div class="vditor-tip__content">'+g+"</div>",setTimeout(function(){I.hide()},w)),this.element.removeAttribute("style"),setTimeout(function(){I.element.getBoundingClientRect().top<46&&(I.element.style.position="fixed",I.element.style.top="46px")},150)},p.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},p}(),ci=function(p,g){if(g.options.preview.mode!==p){switch(g.options.preview.mode=p,p){case"both":g.sv.element.style.display="block",g.preview.element.style.display="block",g.preview.render(g),He(g.toolbar.elements,["both"]);break;case"editor":g.sv.element.style.display="block",g.preview.element.style.display="none",De(g.toolbar.elements,["both"])}g.devtools&&g.devtools.renderEchart(g)}},Ps=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),bc=function(p){function g(w,I){var k=p.call(this,w,I)||this;return w.options.preview.mode==="both"&&k.element.children[0].classList.add("vditor-menu--current"),k.element.children[0].addEventListener((0,Be.Le)(),function(Ue){k.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)||(Ue.preventDefault(),w.currentMode==="sv"&&(w.options.preview.mode==="both"?ci("editor",w):ci("both",w)))}),k}return Ps(g,p),g}(Ar),yc=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"},Ra=We(312),Zs=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),zc=function(p){function g(w,I){var k=p.call(this,w,I)||this,Ue=k.element.children[0],ft=document.createElement("div");ft.className="vditor-hint"+(I.level===2?"":" vditor-panel--arrow");var Bt="";return P.g.CODE_THEME.forEach(function(Xt){Bt+="<button>"+Xt+"</button>"}),ft.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+Bt+"</div>",ft.addEventListener((0,Be.Le)(),function(Xt){Xt.target.tagName==="BUTTON"&&(tt(w,["subToolbar"]),w.options.preview.hljs.style=Xt.target.textContent,(0,Ra.Y)(Xt.target.textContent,w.options.cdn),Xt.preventDefault(),Xt.stopPropagation())}),k.element.appendChild(ft),at(w,ft,Ue,I.level),k}return Zs(g,p),g}(Ar),Es=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),$c=function(p){function g(w,I){var k=p.call(this,w,I)||this,Ue=k.element.children[0],ft=document.createElement("div");ft.className="vditor-hint"+(I.level===2?"":" vditor-panel--arrow");var Bt="";return Object.keys(w.options.preview.theme.list).forEach(function(Xt){Bt+='<button data-type="'+Xt+'">'+w.options.preview.theme.list[Xt]+"</button>"}),ft.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+Bt+"</div>",ft.addEventListener((0,Be.Le)(),function(Xt){Xt.target.tagName==="BUTTON"&&(tt(w,["subToolbar"]),w.options.preview.theme.current=Xt.target.getAttribute("data-type"),(0,Nn.Z)(w.options.preview.theme.current,w.options.preview.theme.path),Xt.preventDefault(),Xt.stopPropagation())}),k.element.appendChild(ft),at(w,ft,Ue,I.level),k}return Es(g,p),g}(Ar),td=function(){function p(g){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(g,"")}return p.prototype.render=function(g,w){var I=w.endsWith(`
`)?w.length-1:w.length;if(g.options.counter.type==="text"&&g[g.currentMode]){var k=g[g.currentMode].element.cloneNode(!0);k.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(Ue){Ue.remove()}),I=k.textContent.length}typeof g.options.counter.max=="number"?(I>g.options.counter.max?this.element.className="vditor-counter vditor-counter--error":this.element.className="vditor-counter",this.element.innerHTML=I+"/"+g.options.counter.max):this.element.innerHTML=""+I,this.element.setAttribute("aria-label",g.options.counter.type),g.options.counter.after&&g.options.counter.after(I,{enable:g.options.counter.enable,max:g.options.counter.max,type:g.options.counter.type})},p}(),Mf=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),bi=function(p){function g(w,I){var k=p.call(this,w,I)||this;return k.element.children[0].innerHTML=I.icon,k.element.children[0].addEventListener((0,Be.Le)(),function(Ue){Ue.preventDefault(),Ue.currentTarget.classList.contains(P.g.CLASS_MENU_DISABLED)||I.click(Ue,w)}),k}return Mf(g,p),g}(Ar),Jl=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),nd=function(p){function g(w,I){var k=p.call(this,w,I)||this;return k.element.firstElementChild.addEventListener((0,Be.Le)(),function(Ue){var ft=k.element.firstElementChild;ft.classList.contains(P.g.CLASS_MENU_DISABLED)||(Ue.preventDefault(),ft.classList.contains("vditor-menu--current")?(ft.classList.remove("vditor-menu--current"),w.devtools.element.style.display="none",cn(w)):(ft.classList.add("vditor-menu--current"),w.devtools.element.style.display="block",cn(w),w.devtools.renderEchart(w)))}),k}return Jl(g,p),g}(Ar),ss=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"},$u=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),wc=function(p){function g(w,I){var k=p.call(this,w,I)||this,Ue=document.createElement("div");Ue.className="vditor-panel vditor-panel--arrow";var ft="";return Object.keys(w.options.hint.emoji).forEach(function(Bt){var Xt=w.options.hint.emoji[Bt];Xt.indexOf(".")>-1?ft+='<button data-value=":'+Bt+': " data-key=":'+Bt+`:"><img
data-value=":`+Bt+': " data-key=":'+Bt+':" class="vditor-emojis__icon" src="'+Xt+'"/></button>':ft+='<button data-value="'+Xt+` "
 data-key="`+Bt+'"><span class="vditor-emojis__icon">'+Xt+"</span></button>"}),Ue.innerHTML='<div class="vditor-emojis" style="max-height: '+(w.options.height==="auto"?"auto":w.options.height-80)+'px">'+ft+`</div><div class="vditor-emojis__tail">
    <span class="vditor-emojis__tip"></span><span>`+(w.options.hint.emojiTail||"")+`</span>
</div>`,k.element.appendChild(Ue),at(w,Ue,k.element.firstElementChild,I.level),k.bindEvent(w),k}return $u(g,p),g.prototype.bindEvent=function(w){var I=this;this.element.lastElementChild.addEventListener((0,Be.Le)(),function(k){var Ue=(0,Ot.S)(k.target,"BUTTON");if(Ue){k.preventDefault();var ft=Ue.getAttribute("data-value"),Bt=(0,vt.zh)(w),Xt=ft;if(w.currentMode==="wysiwyg"?Xt=w.lute.SpinVditorDOM(ft):w.currentMode==="ir"&&(Xt=w.lute.SpinVditorIRDOM(ft)),ft.indexOf(":")>-1&&w.currentMode!=="sv"){var Ut=document.createElement("div");Ut.innerHTML=Xt,Xt=Ut.firstElementChild.firstElementChild.outerHTML+" ",(0,vt.oC)(Xt,w)}else Bt.extractContents(),Bt.insertNode(document.createTextNode(ft));Bt.collapse(!1),(0,vt.Hc)(Bt),I.element.lastElementChild.style.display="none",rr(w)}}),this.element.lastElementChild.addEventListener("mouseover",function(k){var Ue=(0,Ot.S)(k.target,"BUTTON");Ue&&(I.element.querySelector(".vditor-emojis__tip").innerHTML=Ue.getAttribute("data-key"))})},g}(Ar),Zn=function(p,g,w){var I=document.createElement("a");"download"in I?(I.download=w,I.style.display="none",I.href=URL.createObjectURL(new Blob([g])),document.body.appendChild(I),I.click(),I.remove()):p.tip.show(window.VditorI18n.downloadTip,0)},Zl=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),ru=function(p){function g(w,I){var k=p.call(this,w,I)||this,Ue=k.element.children[0],ft=document.createElement("div");return ft.className="vditor-hint"+(I.level===2?"":" vditor-panel--arrow"),ft.innerHTML=`<button data-type="markdown">Markdown</button>
<button data-type="pdf">PDF</button>
<button data-type="html">HTML</button>`,ft.addEventListener((0,Be.Le)(),function(Bt){var Xt=Bt.target;if(Xt.tagName==="BUTTON"){switch(Xt.getAttribute("data-type")){case"markdown":(function(Ut){var Wt=j(Ut);Zn(Ut,Wt,Wt.substr(0,10)+".md")})(w);break;case"pdf":(function(Ut){Ut.tip.show(window.VditorI18n.generate,3800);var Wt=document.querySelector("#vditorExportIframe");Wt.contentDocument.open(),Wt.contentDocument.write('<link rel="stylesheet" href="'+Ut.options.cdn+`/dist/index.css"/>
<script src="`+Ut.options.cdn+`/dist/method.min.js"><\/script>
<div id="preview" style="width: 800px"></div>
<script>
window.addEventListener("message", (e) => {
  if(!e.data) {
    return;
  }
  Vditor.preview(document.getElementById('preview'), e.data, {
    cdn: "`+Ut.options.cdn+`",
    markdown: {
      theme: `+JSON.stringify(Ut.options.preview.theme)+`
    },
    hljs: {
      style: "`+Ut.options.preview.hljs.style+`"
    }
  });
  setTimeout(() => {
        window.print();
    }, 3600);
}, false);
<\/script>`),Wt.contentDocument.close(),setTimeout(function(){Wt.contentWindow.postMessage(j(Ut),"*")},200)})(w);break;case"html":(function(Ut){var Wt=pn(Ut),tr='<html><head><link rel="stylesheet" type="text/css" href="'+Ut.options.cdn+`/dist/index.css"/>
<script src="`+Ut.options.cdn+"/dist/js/i18n/"+Ut.options.lang+`.js"><\/script>
<script src="`+Ut.options.cdn+`/dist/method.min.js"><\/script></head>
<body><div class="vditor-reset" id="preview">`+Wt+`</div>
<script>
    const previewElement = document.getElementById('preview')
    Vditor.setContentTheme('`+Ut.options.preview.theme.current+"', '"+Ut.options.preview.theme.path+`');
    Vditor.codeRender(previewElement);
    Vditor.highlightRender(`+JSON.stringify(Ut.options.preview.hljs)+", previewElement, '"+Ut.options.cdn+`');
    Vditor.mathRender(previewElement, {
        cdn: '`+Ut.options.cdn+`',
        math: `+JSON.stringify(Ut.options.preview.math)+`,
    });
    Vditor.mermaidRender(previewElement, '`+Ut.options.cdn+"', '"+Ut.options.theme+`');
    Vditor.markmapRender(previewElement, '`+Ut.options.cdn+"', '"+Ut.options.theme+`');
    Vditor.flowchartRender(previewElement, '`+Ut.options.cdn+`');
    Vditor.graphvizRender(previewElement, '`+Ut.options.cdn+`');
    Vditor.chartRender(previewElement, '`+Ut.options.cdn+"', '"+Ut.options.theme+`');
    Vditor.mindmapRender(previewElement, '`+Ut.options.cdn+"', '"+Ut.options.theme+`');
    Vditor.abcRender(previewElement, '`+Ut.options.cdn+`');
    `+(Ut.options.preview.render.media.enable?"Vditor.mediaRender(previewElement);":"")+`
    Vditor.speechRender(previewElement);
<\/script>
<script src="`+Ut.options.cdn+"/dist/js/icons/"+Ut.options.icon+'.js"><\/script></body></html>';Zn(Ut,tr,Wt.substr(0,10)+".html")})(w)}tt(w,["subToolbar"]),Bt.preventDefault(),Bt.stopPropagation()}}),k.element.appendChild(ft),at(w,ft,Ue,I.level),k}return Zl(g,p),g}(Ar),Vc=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),ml=function(p){function g(w,I){var k=p.call(this,w,I)||this;return k._bindEvent(w,I),k}return Vc(g,p),g.prototype._bindEvent=function(w,I){this.element.children[0].addEventListener((0,Be.Le)(),function(k){k.preventDefault(),w.element.className.includes("vditor--fullscreen")?(I.level||(this.innerHTML=I.icon),w.element.style.zIndex="",document.body.style.overflow="",w.element.classList.remove("vditor--fullscreen"),Object.keys(w.toolbar.elements).forEach(function(Ue){var ft=w.toolbar.elements[Ue].firstChild;ft&&(ft.className=ft.className.replace("__s","__n"),w.options.toolbar.forEach(function(Bt){typeof Bt!="string"&&Bt.tipPosition&&Bt.name===ft.dataset.type&&(ft.className="vditor-tooltipped vditor-tooltipped__"+Bt.tipPosition)}))}),w.counter&&(w.counter.element.className=w.counter.element.className.replace("__s","__n"))):(I.level||(this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>'),w.element.style.zIndex=w.options.fullscreen.index.toString(),document.body.style.overflow="hidden",w.element.classList.add("vditor--fullscreen"),Object.keys(w.toolbar.elements).forEach(function(Ue){var ft=w.toolbar.elements[Ue].firstChild;ft&&(ft.className=ft.className.replace("__n","__s"))}),w.counter&&(w.counter.element.className=w.counter.element.className.replace("__n","__s"))),w.devtools&&w.devtools.renderEchart(w),I.click&&I.click(k,w),cn(w),hn(w)})},g}(Ar),ec=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),lt=function(p){function g(w,I){var k=p.call(this,w,I)||this,Ue=document.createElement("div");return Ue.className="vditor-hint vditor-panel--arrow",Ue.innerHTML='<button data-tag="h1" data-value="# ">'+window.VditorI18n.heading1+" "+(0,Be.ns)("&lt;⌥⌘1>")+`</button>
<button data-tag="h2" data-value="## ">`+window.VditorI18n.heading2+" &lt;"+(0,Be.ns)("⌥⌘2")+`></button>
<button data-tag="h3" data-value="### ">`+window.VditorI18n.heading3+" &lt;"+(0,Be.ns)("⌥⌘3")+`></button>
<button data-tag="h4" data-value="#### ">`+window.VditorI18n.heading4+" &lt;"+(0,Be.ns)("⌥⌘4")+`></button>
<button data-tag="h5" data-value="##### ">`+window.VditorI18n.heading5+" &lt;"+(0,Be.ns)("⌥⌘5")+`></button>
<button data-tag="h6" data-value="###### ">`+window.VditorI18n.heading6+" &lt;"+(0,Be.ns)("⌥⌘6")+"></button>",k.element.appendChild(Ue),k._bindEvent(w,Ue),k}return ec(g,p),g.prototype._bindEvent=function(w,I){var k=this.element.children[0];k.addEventListener((0,Be.Le)(),function(ft){ft.preventDefault(),clearTimeout(w.wysiwyg.afterRenderTimeoutId),clearTimeout(w.ir.processTimeoutId),clearTimeout(w.sv.processTimeoutId),k.classList.contains(P.g.CLASS_MENU_DISABLED)||(k.blur(),k.classList.contains("vditor-menu--current")?(w.currentMode==="wysiwyg"?(Ga(w),Mn(w)):w.currentMode==="ir"&&Bs(w,""),k.classList.remove("vditor-menu--current")):(tt(w,["subToolbar"]),I.style.display="block"))});for(var Ue=0;Ue<6;Ue++)I.children.item(Ue).addEventListener((0,Be.Le)(),function(ft){ft.preventDefault(),w.currentMode==="wysiwyg"?(pa(w,ft.target.getAttribute("data-tag")),Mn(w),k.classList.add("vditor-menu--current")):w.currentMode==="ir"?(Bs(w,ft.target.getAttribute("data-value")),k.classList.add("vditor-menu--current")):wo(w,ft.target.getAttribute("data-value")),I.style.display="none"})},g}(Ar),Je=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),ht=function(p){function g(w,I){var k=p.call(this,w,I)||this;return k.element.children[0].addEventListener((0,Be.Le)(),function(Ue){Ue.preventDefault(),w.tip.show(`<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">
<div style="margin-top: 14px;flex: 1">
    <div>Markdown 使用指南</div>
    <ul style="list-style: none">
        <li><a href="https://ld246.com/article/1583308420519" target="_blank">语法速查手册</a></li>
        <li><a href="https://ld246.com/article/1583129520165" target="_blank">基础语法</a></li>
        <li><a href="https://ld246.com/article/1583305480675" target="_blank">扩展语法</a></li>
        <li><a href="https://ld246.com/article/1582778815353" target="_blank">键盘快捷键</a></li>
    </ul>
</div>
<div style="margin-top: 14px;flex: 1">
    <div>Vditor 支持</div>
    <ul style="list-style: none">
        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>
        <li><a href="https://ld246.com/tag/vditor" target="_blank">官方讨论区</a></li>
        <li><a href="https://ld246.com/article/1549638745630" target="_blank">开发手册</a></li>
        <li><a href="https://ld246.com/guide/markdown" target="_blank">演示地址</a></li>
    </ul>
</div></div>`,0)}),k}return Je(g,p),g}(Ar),Lt=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),un=function(p){function g(w,I){var k=p.call(this,w,I)||this;return k.element.children[0].addEventListener((0,Be.Le)(),function(Ue){if(Ue.preventDefault(),!k.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)&&w.currentMode!=="sv"){var ft=(0,vt.zh)(w),Bt=(0,et.lG)(ft.startContainer,"LI");Bt&&Rt(w,Bt,ft)}}),k}return Lt(g,p),g}(Ar),Hn=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),Er=function(p){function g(w,I){var k=p.call(this,w,I)||this;return k.element.children[0].addEventListener((0,Be.Le)(),function(Ue){Ue.preventDefault(),w.tip.show(`<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">
<p style="text-align: center;margin: 14px 0">
    <em>下一代的 Markdown 编辑器，为未来而构建</em>
</p>
<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">
    <img src="https://unpkg.com/vditor/dist/images/logo.png" style="margin: 0 auto;height: 68px"/>
    <div>&nbsp;&nbsp;</div>
    <div style="flex: 1;min-width: 250px">
        Vditor 是一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。
        它使用 TypeScript 实现，支持原生 JavaScript 以及 Vue、React、Angular 和 Svelte 等框架。
    </div>
</div>
<div style="display: flex;flex-wrap: wrap;">
    <ul style="list-style: none;flex: 1;min-width:148px">
        <li>
        项目地址：<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>
        </li>
        <li>
        开源协议：MIT
        </li>
    </ul>
    <ul style="list-style: none;margin-right: 18px">
        <li>
        组件版本：Vditor v`+P.H+" / Lute v"+Lute.Version+`
        </li>
        <li>
        赞助捐赠：<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>
        </li>
    </ul>
</div>
</div>`,0)}),k}return Hn(g,p),g}(Ar),Aa=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),ja=function(p){function g(w,I){var k=p.call(this,w,I)||this;return k.element.children[0].addEventListener((0,Be.Le)(),function(Ue){Ue.preventDefault(),k.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)||w.currentMode==="sv"||Br(w,"afterend")}),k}return Aa(g,p),g}(Ar),Kr=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),Sa=function(p){function g(w,I){var k=p.call(this,w,I)||this;return k.element.children[0].addEventListener((0,Be.Le)(),function(Ue){Ue.preventDefault(),k.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)||w.currentMode==="sv"||Br(w,"beforebegin")}),k}return Kr(g,p),g}(Ar),ro=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),Co=function(p){function g(w,I){var k=p.call(this,w,I)||this;return k.element.children[0].addEventListener((0,Be.Le)(),function(Ue){if(Ue.preventDefault(),!k.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)&&w.currentMode!=="sv"){var ft=(0,vt.zh)(w),Bt=(0,et.lG)(ft.startContainer,"LI");Bt&&Jt(w,Bt,ft,Bt.parentElement)}}),k}return ro(g,p),g}(Ar),Wa=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),fi=function(p){function g(w,I){var k=p.call(this,w,I)||this;return w.options.outline&&k.element.firstElementChild.classList.add("vditor-menu--current"),k.element.children[0].addEventListener((0,Be.Le)(),function(Ue){Ue.preventDefault(),w.toolbar.elements.outline.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)||(w.options.outline.enable=!k.element.firstElementChild.classList.contains("vditor-menu--current"),w.outline.toggle(w,w.options.outline.enable))}),k}return Wa(g,p),g}(Ar),Ja=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),ei=function(p){function g(w,I){var k=p.call(this,w,I)||this;return k._bindEvent(w),k}return Ja(g,p),g.prototype._bindEvent=function(w){var I=this;this.element.children[0].addEventListener((0,Be.Le)(),function(k){k.preventDefault();var Ue=I.element.firstElementChild;if(!Ue.classList.contains(P.g.CLASS_MENU_DISABLED)){var ft=P.g.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);Ue.classList.contains("vditor-menu--current")?(Ue.classList.remove("vditor-menu--current"),w.currentMode==="sv"?(w.sv.element.style.display="block",w.options.preview.mode==="both"?w.preview.element.style.display="block":w.preview.element.style.display="none"):(w[w.currentMode].element.parentElement.style.display="block",w.preview.element.style.display="none"),Ye(w.toolbar.elements,ft),w.outline.render(w)):(st(w.toolbar.elements,ft),w.preview.element.style.display="block",w.currentMode==="sv"?w.sv.element.style.display="none":w[w.currentMode].element.parentElement.style.display="none",w.preview.render(w),Ue.classList.add("vditor-menu--current"),tt(w,["subToolbar","hint","popover"]),setTimeout(function(){w.outline.render(w)},w.options.preview.delay+10)),cn(w)}})},g}(Ar),Jo=function(){function p(g){var w;if(this.SAMPLE_RATE=5e3,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0,typeof AudioContext!="undefined")w=new AudioContext;else{if(!webkitAudioContext)return;w=new webkitAudioContext}this.DEFAULT_SAMPLE_RATE=w.sampleRate;var I=w.createGain();w.createMediaStreamSource(g).connect(I),this.recorder=w.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,I.connect(this.recorder),this.recorder.connect(w.destination),this.readyFlag=!0}return p.prototype.cloneChannelData=function(g,w){this.leftChannel.push(new Float32Array(g)),this.rightChannel.push(new Float32Array(w)),this.recordingLength+=2048},p.prototype.startRecordingNewWavFile=function(){this.readyFlag&&(this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0)},p.prototype.stopRecording=function(){this.isRecording=!1},p.prototype.buildWavFileBlob=function(){for(var g=this.mergeBuffers(this.leftChannel),w=this.mergeBuffers(this.rightChannel),I=new Float32Array(g.length),k=0;k<g.length;++k)I[k]=.5*(g[k]+w[k]);this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE&&(I=this.downSampleBuffer(I,this.SAMPLE_RATE));var Ue=44+2*I.length,ft=new ArrayBuffer(Ue),Bt=new DataView(ft);this.writeUTFBytes(Bt,0,"RIFF"),Bt.setUint32(4,Ue,!0),this.writeUTFBytes(Bt,8,"WAVE"),this.writeUTFBytes(Bt,12,"fmt "),Bt.setUint32(16,16,!0),Bt.setUint16(20,1,!0),Bt.setUint16(22,1,!0),Bt.setUint32(24,this.SAMPLE_RATE,!0),Bt.setUint32(28,2*this.SAMPLE_RATE,!0),Bt.setUint16(32,2,!0),Bt.setUint16(34,16,!0);var Xt=2*I.length;this.writeUTFBytes(Bt,36,"data"),Bt.setUint32(40,Xt,!0);for(var Ut=I.length,Wt=44,tr=0;tr<Ut;tr++)Bt.setInt16(Wt,32767*I[tr],!0),Wt+=2;return new Blob([Bt],{type:"audio/wav"})},p.prototype.downSampleBuffer=function(g,w){if(w===this.DEFAULT_SAMPLE_RATE||w>this.DEFAULT_SAMPLE_RATE)return g;for(var I=this.DEFAULT_SAMPLE_RATE/w,k=Math.round(g.length/I),Ue=new Float32Array(k),ft=0,Bt=0;ft<Ue.length;){for(var Xt=Math.round((ft+1)*I),Ut=0,Wt=0,tr=Bt;tr<Xt&&tr<g.length;tr++)Ut+=g[tr],Wt++;Ue[ft]=Ut/Wt,ft++,Bt=Xt}return Ue},p.prototype.mergeBuffers=function(g){for(var w=new Float32Array(this.recordingLength),I=0,k=g.length,Ue=0;Ue<k;++Ue){var ft=g[Ue];w.set(ft,I),I+=ft.length}return w},p.prototype.writeUTFBytes=function(g,w,I){for(var k=I.length,Ue=0;Ue<k;Ue++)g.setUint8(w+Ue,I.charCodeAt(Ue))},p}(),Vu=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),ho=function(p){function g(w,I){var k=p.call(this,w,I)||this;return k._bindEvent(w),k}return Vu(g,p),g.prototype._bindEvent=function(w){var I,k=this;this.element.children[0].addEventListener((0,Be.Le)(),function(Ue){if(Ue.preventDefault(),!k.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)){var ft=w[w.currentMode].element;if(I)if(I.isRecording){I.stopRecording(),w.tip.hide();var Bt=new File([I.buildWavFileBlob()],"record"+new Date().getTime()+".wav",{type:"video/webm"});nu(w,[Bt]),k.element.children[0].classList.remove("vditor-menu--current")}else w.tip.show(window.VditorI18n.recording),ft.setAttribute("contenteditable","false"),I.startRecordingNewWavFile(),k.element.children[0].classList.add("vditor-menu--current");else navigator.mediaDevices.getUserMedia({audio:!0}).then(function(Xt){(I=new Jo(Xt)).recorder.onaudioprocess=function(Ut){if(I.isRecording){var Wt=Ut.inputBuffer.getChannelData(0),tr=Ut.inputBuffer.getChannelData(1);I.cloneChannelData(Wt,tr)}},I.startRecordingNewWavFile(),w.tip.show(window.VditorI18n.recording),ft.setAttribute("contenteditable","false"),k.element.children[0].classList.add("vditor-menu--current")}).catch(function(){w.tip.show(window.VditorI18n["record-tip"])})}})},g}(Ar),Ed=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),Ti=function(p){function g(w,I){var k=p.call(this,w,I)||this;return st({redo:k.element},["redo"]),k.element.children[0].addEventListener((0,Be.Le)(),function(Ue){Ue.preventDefault(),k.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)||w.undo.redo(w)}),k}return Ed(g,p),g}(Ar),qi=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),Mm=function(p){function g(w,I){var k=p.call(this,w,I)||this;return st({undo:k.element},["undo"]),k.element.children[0].addEventListener((0,Be.Le)(),function(Ue){Ue.preventDefault(),k.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED)||w.undo.undo(w)}),k}return qi(g,p),g}(Ar),gu=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}(),Av=function(p){function g(w,I){var k=p.call(this,w,I)||this,Ue='<input type="file"';return w.options.upload.multiple&&(Ue+=' multiple="multiple"'),w.options.upload.accept&&(Ue+=' accept="'+w.options.upload.accept+'"'),k.element.children[0].innerHTML=""+(I.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>')+Ue+">",k._bindEvent(w),k}return gu(g,p),g.prototype._bindEvent=function(w){var I=this;this.element.children[0].addEventListener((0,Be.Le)(),function(k){if(I.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED))return k.stopPropagation(),void k.preventDefault()}),this.element.querySelector("input").addEventListener("change",function(k){if(I.element.firstElementChild.classList.contains(P.g.CLASS_MENU_DISABLED))return k.stopPropagation(),void k.preventDefault();k.target.files.length!==0&&nu(w,k.target.files,k.target)})},g}(Ar),kd=function(){function p(g){var w=this,I=g.options;this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",I.toolbar.forEach(function(k,Ue){var ft=w.genItem(g,k,Ue);if(w.element.appendChild(ft),k.toolbar){var Bt=document.createElement("div");Bt.className="vditor-hint vditor-panel--arrow",Bt.addEventListener((0,Be.Le)(),function(Xt){Bt.style.display="none"}),k.toolbar.forEach(function(Xt,Ut){Xt.level=2,Bt.appendChild(w.genItem(g,Xt,Ue+Ut))}),ft.appendChild(Bt),at(g,Bt,ft.children[0])}}),g.options.toolbarConfig.hide&&this.element.classList.add("vditor-toolbar--hide"),g.options.toolbarConfig.pin&&this.element.classList.add("vditor-toolbar--pin"),g.options.counter.enable&&(g.counter=new td(g),this.element.appendChild(g.counter.element))}return p.prototype.genItem=function(g,w,I){var k;switch(w.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":k=new Ar(g,w);break;case"emoji":k=new wc(g,w);break;case"headings":k=new lt(g,w);break;case"|":k=new ss;break;case"br":k=new yc;break;case"undo":k=new Mm(g,w);break;case"redo":k=new Ti(g,w);break;case"help":k=new ht(g,w);break;case"both":k=new bc(g,w);break;case"preview":k=new ei(g,w);break;case"fullscreen":k=new ml(g,w);break;case"upload":k=new Av(g,w);break;case"record":k=new ho(g,w);break;case"info":k=new Er(g,w);break;case"edit-mode":k=new jn(g,w);break;case"devtools":k=new nd(g,w);break;case"outdent":k=new Co(g,w);break;case"indent":k=new un(g,w);break;case"outline":k=new fi(g,w);break;case"insert-after":k=new ja(g,w);break;case"insert-before":k=new Sa(g,w);break;case"code-theme":k=new zc(g,w);break;case"content-theme":k=new $c(g,w);break;case"export":k=new ru(g,w);break;default:k=new bi(g,w)}if(k){var Ue=w.name;return Ue!=="br"&&Ue!=="|"||(Ue+=I),this.elements[Ue]=k.element,k.element}},p}(),Qa=We(471),tc=function(){function p(){this.stackSize=50,this.resetStack(),this.dmp=new Qa}return p.prototype.clearStack=function(g){this.resetStack(),this.resetIcon(g)},p.prototype.resetIcon=function(g){g.toolbar&&(this[g.currentMode].undoStack.length>1?Ye(g.toolbar.elements,["undo"]):st(g.toolbar.elements,["undo"]),this[g.currentMode].redoStack.length!==0?Ye(g.toolbar.elements,["redo"]):st(g.toolbar.elements,["redo"]))},p.prototype.undo=function(g){if(g[g.currentMode].element.getAttribute("contenteditable")!=="false"&&!(this[g.currentMode].undoStack.length<2)){var w=this[g.currentMode].undoStack.pop();w&&(this[g.currentMode].redoStack.push(w),this.renderDiff(w,g),this[g.currentMode].hasUndo=!0,tt(g,["hint"]))}},p.prototype.redo=function(g){if(g[g.currentMode].element.getAttribute("contenteditable")!=="false"){var w=this[g.currentMode].redoStack.pop();w&&(this[g.currentMode].undoStack.push(w),this.renderDiff(w,g,!0))}},p.prototype.recordFirstPosition=function(g,w){if(getSelection().rangeCount!==0&&!(this[g.currentMode].undoStack.length!==1||this[g.currentMode].undoStack[0].length===0||this[g.currentMode].redoStack.length>0||(0,Be.vU)()&&w.key==="Backspace"||(0,Be.G6)())){var I=this.addCaret(g);I.replace("<wbr>","").replace(" vditor-ir__node--expand","")===this[g.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>","")&&(this[g.currentMode].undoStack[0][0].diffs[0][1]=I,this[g.currentMode].lastText=I)}},p.prototype.addToUndoStack=function(g){var w=this.addCaret(g,!0),I=this.dmp.diff_main(w,this[g.currentMode].lastText,!0),k=this.dmp.patch_make(w,this[g.currentMode].lastText,I);k.length===0&&this[g.currentMode].undoStack.length>0||(this[g.currentMode].lastText=w,this[g.currentMode].undoStack.push(k),this[g.currentMode].undoStack.length>this.stackSize&&this[g.currentMode].undoStack.shift(),this[g.currentMode].hasUndo&&(this[g.currentMode].redoStack=[],this[g.currentMode].hasUndo=!1,st(g.toolbar.elements,["redo"])),this[g.currentMode].undoStack.length>1&&Ye(g.toolbar.elements,["undo"]))},p.prototype.renderDiff=function(g,w,I){var k;if(I===void 0&&(I=!1),I){var Ue=this.dmp.patch_deepCopy(g).reverse();Ue.forEach(function(Bt){Bt.diffs.forEach(function(Xt){Xt[0]=-Xt[0]})}),k=this.dmp.patch_apply(Ue,this[w.currentMode].lastText)[0]}else k=this.dmp.patch_apply(g,this[w.currentMode].lastText)[0];if(this[w.currentMode].lastText=k,w[w.currentMode].element.innerHTML=k,w.currentMode!=="sv"&&w[w.currentMode].element.querySelectorAll(".vditor-"+w.currentMode+"__preview[data-render='2']").forEach(function(Bt){Dt(Bt,w)}),w[w.currentMode].element.querySelector("wbr"))(0,vt.ib)(w[w.currentMode].element,w[w.currentMode].element.ownerDocument.createRange()),Io(w);else{var ft=getSelection().getRangeAt(0);ft.setEndBefore(w[w.currentMode].element),ft.collapse(!1)}nn(w),rr(w,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),cr(w),w[w.currentMode].element.querySelectorAll(".vditor-"+w.currentMode+"__preview[data-render='2']").forEach(function(Bt){Dt(Bt,w)}),this[w.currentMode].undoStack.length>1?Ye(w.toolbar.elements,["undo"]):st(w.toolbar.elements,["undo"]),this[w.currentMode].redoStack.length!==0?Ye(w.toolbar.elements,["redo"]):st(w.toolbar.elements,["redo"])},p.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},p.prototype.addCaret=function(g,w){var I;if(w===void 0&&(w=!1),getSelection().rangeCount!==0&&!g[g.currentMode].element.querySelector("wbr")){var k=getSelection().getRangeAt(0);if(g[g.currentMode].element.contains(k.startContainer)){I=k.cloneRange();var Ue=document.createElement("span");Ue.className="vditor-wbr",k.insertNode(Ue)}}g.ir.element.cloneNode(!0).querySelectorAll(".vditor-"+g.currentMode+"__preview[data-render='1']").forEach(function(Bt){Bt.firstElementChild&&(Bt.firstElementChild.classList.contains("language-echarts")||Bt.firstElementChild.classList.contains("language-plantuml")||Bt.firstElementChild.classList.contains("language-mindmap")?(Bt.firstElementChild.removeAttribute("_echarts_instance_"),Bt.firstElementChild.removeAttribute("data-processed"),Bt.firstElementChild.innerHTML=Bt.previousElementSibling.firstElementChild.innerHTML,Bt.setAttribute("data-render","2")):Bt.firstElementChild.classList.contains("language-math")&&(Bt.setAttribute("data-render","2"),Bt.firstElementChild.textContent=Bt.firstElementChild.getAttribute("data-math"),Bt.firstElementChild.removeAttribute("data-math")))});var ft=g[g.currentMode].element.innerHTML;return g[g.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(Bt){Bt.remove()}),w&&I&&(0,vt.Hc)(I),ft.replace('<span class="vditor-wbr"></span>',"<wbr>")},p}(),Cc=We(640),Hi=function(){function p(g){this.defaultOptions={rtl:!1,after:void 0,cache:{enable:!0},cdn:P.g.CDN,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},customRenders:[],debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"👍","-1":"👎",confused:"😕",eyes:"👀️",heart:"❤️",rocket:"🚀️",smile:"😄",tada:"🎉️"},emojiPath:P.g.CDN+"/dist/images/emoji",extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1e3,hljs:P.g.HLJS_OPTIONS,markdown:P.g.MARKDOWN_OPTIONS,math:P.g.MATH_OPTIONS,maxWidth:800,mode:"both",theme:P.g.THEME_OPTIONS,render:{media:{enable:!0}}},link:{isOpen:!0},image:{isPreview:!0},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(w){return w.replace(/\W/g,"")},linkToImgUrl:"",max:10485760,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=g}return p.prototype.merge=function(){var g,w,I,k,Ue,ft,Bt,Xt,Ut;this.options&&(this.options.toolbar?this.options.toolbar=this.mergeToolbar(this.options.toolbar):this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar),!((w=(g=this.options.preview)===null||g===void 0?void 0:g.theme)===null||w===void 0)&&w.list&&(this.defaultOptions.preview.theme.list=this.options.preview.theme.list),!((Ue=(k=(I=this.options.preview)===null||I===void 0?void 0:I.render)===null||k===void 0?void 0:k.media)===null||Ue===void 0)&&Ue.enable&&(this.defaultOptions.preview.render.media.enable=this.options.preview.render.media.enable),!((ft=this.options.hint)===null||ft===void 0)&&ft.emoji&&(this.defaultOptions.hint.emoji=this.options.hint.emoji),this.options.comment&&(this.defaultOptions.comment=this.options.comment),this.options.cdn&&(!((Xt=(Bt=this.options.preview)===null||Bt===void 0?void 0:Bt.theme)===null||Xt===void 0)&&Xt.path||(this.defaultOptions.preview.theme.path=this.options.cdn+"/dist/css/content-theme"),!((Ut=this.options.hint)===null||Ut===void 0)&&Ut.emojiPath||(this.defaultOptions.hint.emojiPath=this.options.cdn+"/dist/images/emoji")));var Wt=(0,Cc.T)(this.defaultOptions,this.options);if(Wt.cache.enable&&!Wt.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return Wt},p.prototype.mergeToolbar=function(g){var w=this,I=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"⌘E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"⌘H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"⌘B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"⌘I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"⌘D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"⌘K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"⌘L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"⌘O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"⌘J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"⇧⌘I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"⇧⌘O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"⌘;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"⇧⌘H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"⌘U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"⌘G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"⇧⌘B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"⇧⌘E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"⌘M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:` | col2 | col3 |
| --- | --- | --- |
|  |  |  |
|  |  |  |`,tipPosition:"n"},{name:"|"},{hotkey:"⌘Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"⌘Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"⌘'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"⌘P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],k=[];return g.forEach(function(Ue){var ft=Ue;I.forEach(function(Bt){typeof Ue=="string"&&Bt.name===Ue&&(ft=Bt),typeof Ue=="object"&&Bt.name===Ue.name&&(ft=Object.assign({},Bt,Ue))}),Ue.toolbar&&(ft.toolbar=w.mergeToolbar(Ue.toolbar)),k.push(ft)}),k},p}(),Dm=function(){function p(g){var w=this;this.composingLock=!1,this.commentIds=[];var I=document.createElement("div");I.className="vditor-wysiwyg",I.innerHTML='<pre class="vditor-reset" placeholder="'+g.options.placeholder+`"
 contenteditable="true" spellcheck="false"></pre>
<div class="vditor-panel vditor-panel--none"></div>
<div class="vditor-panel vditor-panel--none">
    <button type="button" aria-label="`+window.VditorI18n.comment+`" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">
        <svg><use xlink:href="#vditor-icon-comment"></use></svg>
    </button>
</div>`,this.element=I.firstElementChild,this.popover=I.firstElementChild.nextElementSibling,this.selectPopover=I.lastElementChild,this.bindEvent(g),aa(g,this.element),Ua(g,this.element),jo(g,this.element),pi(g,this.element),oi(g,this.element),Xa(g,this.element),Ka(g,this.element,this.copy),Yo(g,this.element,this.copy),g.options.comment.enable&&(this.selectPopover.querySelector("button").onclick=function(){var k,Ue,ft=Lute.NewNodeID(),Bt=getSelection().getRangeAt(0),Xt=Bt.cloneRange(),Ut=Bt.extractContents(),Wt=!1,tr=!1;Ut.childNodes.forEach(function(Vn,ha){var na=!1;if(Vn.nodeType===3?na=!0:Vn.classList.contains("vditor-comment")?Vn.classList.contains("vditor-comment")&&Vn.setAttribute("data-cmtids",Vn.getAttribute("data-cmtids")+" "+ft):na=!0,na)if(Vn.nodeType!==3&&Vn.getAttribute("data-block")==="0"&&ha===0&&Xt.startOffset>0)Vn.innerHTML='<span class="vditor-comment" data-cmtids="'+ft+'">'+Vn.innerHTML+"</span>",k=Vn;else if(Vn.nodeType!==3&&Vn.getAttribute("data-block")==="0"&&ha===Ut.childNodes.length-1&&Xt.endOffset<Xt.endContainer.textContent.length)Vn.innerHTML='<span class="vditor-comment" data-cmtids="'+ft+'">'+Vn.innerHTML+"</span>",Ue=Vn;else if(Vn.nodeType!==3&&Vn.getAttribute("data-block")==="0")ha===0?Wt=!0:ha===Ut.childNodes.length-1&&(tr=!0),Vn.innerHTML='<span class="vditor-comment" data-cmtids="'+ft+'">'+Vn.innerHTML+"</span>";else{var Gr=document.createElement("span");Gr.classList.add("vditor-comment"),Gr.setAttribute("data-cmtids",ft),Vn.parentNode.insertBefore(Gr,Vn),Gr.appendChild(Vn)}});var Vr=(0,et.F9)(Xt.startContainer);Vr&&(k?(Vr.insertAdjacentHTML("beforeend",k.innerHTML),k.remove()):Vr.textContent.trim().replace(P.g.ZWSP,"")===""&&Wt&&Vr.remove());var ba=(0,et.F9)(Xt.endContainer);ba&&(Ue?(ba.insertAdjacentHTML("afterbegin",Ue.innerHTML),Ue.remove()):ba.textContent.trim().replace(P.g.ZWSP,"")===""&&tr&&ba.remove()),Bt.insertNode(Ut),g.options.comment.add(ft,Bt.toString(),w.getComments(g,!0)),Mn(g,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),w.hideComment()})}return p.prototype.getComments=function(g,w){var I=this;if(w===void 0&&(w=!1),g.currentMode!=="wysiwyg"||!g.options.comment.enable)return[];this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(Ue){I.commentIds=I.commentIds.concat(Ue.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var k=[];return w?(this.commentIds.forEach(function(Ue){k.push({id:Ue,top:I.element.querySelector('.vditor-comment[data-cmtids="'+Ue+'"]').offsetTop})}),k):void 0},p.prototype.triggerRemoveComment=function(g){var w,I,k;if(g.currentMode==="wysiwyg"&&g.options.comment.enable&&g.wysiwyg.commentIds.length>0){var Ue=JSON.parse(JSON.stringify(this.commentIds));this.getComments(g);var ft=(w=Ue,I=this.commentIds,k=new Set(I),w.filter(function(Bt){return!k.has(Bt)}));ft.length>0&&g.options.comment.remove(ft)}},p.prototype.showComment=function(){var g=(0,vt.Ny)(this.element);this.selectPopover.setAttribute("style","left:"+g.left+"px;display:block;top:"+Math.max(-8,g.top-21)+"px")},p.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},p.prototype.unbindListener=function(){window.removeEventListener("scroll",this.scrollListener)},p.prototype.copy=function(g,w){var I=getSelection().getRangeAt(0);if(I.toString()!==""){g.stopPropagation(),g.preventDefault();var k=(0,et.lG)(I.startContainer,"CODE"),Ue=(0,et.lG)(I.endContainer,"CODE");if(k&&Ue&&Ue.isSameNode(k)){var ft="";return ft=k.parentElement.tagName==="PRE"?I.toString():"`"+I.toString()+"`",g.clipboardData.setData("text/plain",ft),void g.clipboardData.setData("text/html","")}var Bt=(0,et.lG)(I.startContainer,"A"),Xt=(0,et.lG)(I.endContainer,"A");if(Bt&&Xt&&Xt.isSameNode(Bt)){var Ut=Bt.getAttribute("title")||"";return Ut&&(Ut=' "'+Ut+'"'),g.clipboardData.setData("text/plain","["+I.toString()+"]("+Bt.getAttribute("href")+Ut+")"),void g.clipboardData.setData("text/html","")}var Wt=document.createElement("div");Wt.appendChild(I.cloneContents()),g.clipboardData.setData("text/plain",w.lute.VditorDOM2Md(Wt.innerHTML).trim()),g.clipboardData.setData("text/html","")}},p.prototype.bindEvent=function(g){var w=this;this.unbindListener(),window.addEventListener("scroll",this.scrollListener=function(){if(tt(g,["hint"]),w.popover.style.display==="block"&&w.selectPopover.style.display==="block"){var I=parseInt(w.popover.getAttribute("data-top"),10);if(g.options.height==="auto"){if(g.options.toolbarConfig.pin){var k=Math.max(I,window.scrollY-g.element.offsetTop-8)+"px";w.popover.style.display==="block"&&(w.popover.style.top=k),w.selectPopover.style.display==="block"&&(w.selectPopover.style.top=k)}}else if(g.options.toolbarConfig.pin&&g.toolbar.element.getBoundingClientRect().top===0){var Ue=Math.max(window.scrollY-g.element.offsetTop-8,Math.min(I-g.wysiwyg.element.scrollTop,w.element.clientHeight-21))+"px";w.popover.style.display==="block"&&(w.popover.style.top=Ue),w.selectPopover.style.display==="block"&&(w.selectPopover.style.top=Ue)}}}),this.element.addEventListener("scroll",function(){if(tt(g,["hint"]),g.options.comment&&g.options.comment.enable&&g.options.comment.scroll&&g.options.comment.scroll(g.wysiwyg.element.scrollTop),w.popover.style.display==="block"){var I=parseInt(w.popover.getAttribute("data-top"),10)-g.wysiwyg.element.scrollTop,k=-8;g.options.toolbarConfig.pin&&g.toolbar.element.getBoundingClientRect().top===0&&(k=window.scrollY-g.element.offsetTop+k);var Ue=Math.max(k,Math.min(I,w.element.clientHeight-21))+"px";w.popover.style.top=Ue,w.selectPopover.style.top=Ue}}),this.element.addEventListener("paste",function(I){Rs(g,I,{pasteCode:function(k){var Ue=(0,vt.zh)(g),ft=document.createElement("template");ft.innerHTML=k,Ue.insertNode(ft.content.cloneNode(!0));var Bt=(0,et.a1)(Ue.startContainer,"data-block","0");Bt?Bt.outerHTML=g.lute.SpinVditorDOM(Bt.outerHTML):g.wysiwyg.element.innerHTML=g.lute.SpinVditorDOM(g.wysiwyg.element.innerHTML),(0,vt.ib)(g.wysiwyg.element,Ue)}})}),this.element.addEventListener("compositionstart",function(){w.composingLock=!0}),this.element.addEventListener("compositionend",function(I){var k=(0,Ot.W)(getSelection().getRangeAt(0).startContainer);k&&k.textContent===""?nn(g):((0,Be.vU)()||hu(g,getSelection().getRangeAt(0).cloneRange(),I),w.composingLock=!1)}),this.element.addEventListener("input",function(I){if(I.inputType!=="deleteByDrag"&&I.inputType!=="insertFromDrop"){if(w.preventInput)return w.preventInput=!1,void Mn(g);if(w.composingLock||I.data==="‘"||I.data==="“"||I.data==="《")Mn(g);else{var k=getSelection().getRangeAt(0),Ue=(0,et.F9)(k.startContainer);if(Ue||(oa(g,k),Ue=(0,et.F9)(k.startContainer)),Ue){for(var ft=(0,vt.im)(Ue,g.wysiwyg.element,k).start,Bt=!0,Xt=ft-1;Xt>Ue.textContent.substr(0,ft).lastIndexOf(`
`);Xt--)if(Ue.textContent.charAt(Xt)!==" "&&Ue.textContent.charAt(Xt)!=="	"){Bt=!1;break}ft===0&&(Bt=!1);var Ut=!0;for(Xt=ft-1;Xt<Ue.textContent.length;Xt++)if(Ue.textContent.charAt(Xt)!==" "&&Ue.textContent.charAt(Xt)!==`
`){Ut=!1;break}var Wt=(0,Ot.W)(getSelection().getRangeAt(0).startContainer);Wt&&Wt.textContent===""&&(nn(g),Wt.remove()),Bt&&Ue.getAttribute("data-type")!=="code-block"||Ut||Bn(Ue.innerHTML)||Dn(Ue.innerHTML)&&Ue.previousElementSibling?typeof g.options.input=="function"&&g.options.input(j(g)):(I.inputType==="insertParagraph"&&w.element.innerHTML==="<p><br></p><p><br></p>"&&Ue.previousElementSibling.remove(),hu(g,k,I))}}}}),this.element.addEventListener("click",function(I){if(I.target.tagName==="INPUT"){var k=I.target;return k.checked?k.setAttribute("checked","checked"):k.removeAttribute("checked"),w.preventInput=!0,void Mn(g)}if(I.target.tagName!=="IMG"||I.target.parentElement.classList.contains("vditor-wysiwyg__preview")){var Ue=(0,et.lG)(I.target,"A");if(Ue)return g.options.link.click?g.options.link.click(Ue):g.options.link.isOpen&&window.open(Ue.getAttribute("href")),void I.preventDefault();var ft=(0,vt.zh)(g);if(I.target.isEqualNode(w.element)&&w.element.lastElementChild&&ft.collapsed){var Bt=w.element.lastElementChild.getBoundingClientRect();I.y>Bt.top+Bt.height&&(w.element.lastElementChild.tagName==="P"&&w.element.lastElementChild.textContent.trim().replace(P.g.ZWSP,"")===""?(ft.selectNodeContents(w.element.lastElementChild),ft.collapse(!1)):(w.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+P.g.ZWSP+"<wbr></p>"),(0,vt.ib)(w.element,ft)))}fr(g);var Xt=(0,et.fb)(I.target,"vditor-wysiwyg__preview");Xt||(Xt=(0,et.fb)((0,vt.zh)(g).startContainer,"vditor-wysiwyg__preview")),Xt&&fo(Xt,g),_t(I,g)}else I.target.getAttribute("data-type")==="link-ref"?mr(g,I.target):function(Ut,Wt){var tr=Ut.target;Wt.wysiwyg.popover.innerHTML="";var Vr=function(){tr.setAttribute("src",Vn.value),tr.setAttribute("alt",na.value),tr.setAttribute("title",sa.value),typeof Wt.options.input=="function"&&Wt.options.input(j(Wt))},ba=document.createElement("span");ba.setAttribute("aria-label",window.VditorI18n.imageURL),ba.className="vditor-tooltipped vditor-tooltipped__n";var Vn=document.createElement("input");ba.appendChild(Vn),Vn.className="vditor-input",Vn.setAttribute("placeholder",window.VditorI18n.imageURL),Vn.value=tr.getAttribute("src")||"",Vn.oninput=function(){Vr()},Vn.onkeydown=function(la){oo(Wt,la)};var ha=document.createElement("span");ha.setAttribute("aria-label",window.VditorI18n.alternateText),ha.className="vditor-tooltipped vditor-tooltipped__n";var na=document.createElement("input");ha.appendChild(na),na.className="vditor-input",na.setAttribute("placeholder",window.VditorI18n.alternateText),na.style.width="52px",na.value=tr.getAttribute("alt")||"",na.oninput=function(){Vr()},na.onkeydown=function(la){oo(Wt,la)};var Gr=document.createElement("span");Gr.setAttribute("aria-label",window.VditorI18n.title),Gr.className="vditor-tooltipped vditor-tooltipped__n";var sa=document.createElement("input");Gr.appendChild(sa),sa.className="vditor-input",sa.setAttribute("placeholder",window.VditorI18n.title),sa.value=tr.getAttribute("title")||"",sa.oninput=function(){Vr()},sa.onkeydown=function(la){oo(Wt,la)},dr(tr,Wt),Wt.wysiwyg.popover.insertAdjacentElement("beforeend",ba),Wt.wysiwyg.popover.insertAdjacentElement("beforeend",ha),Wt.wysiwyg.popover.insertAdjacentElement("beforeend",Gr),sr(Wt,tr)}(I,g)}),this.element.addEventListener("keyup",function(I){if(!I.isComposing&&!(0,Be.yl)(I)){I.key==="Enter"&&Io(g),I.key!=="Backspace"&&I.key!=="Delete"||g.wysiwyg.element.innerHTML===""||g.wysiwyg.element.childNodes.length!==1||!g.wysiwyg.element.firstElementChild||g.wysiwyg.element.firstElementChild.tagName!=="P"||g.wysiwyg.element.firstElementChild.childElementCount!==0||g.wysiwyg.element.textContent!==""&&g.wysiwyg.element.textContent!==`
`||(g.wysiwyg.element.innerHTML="");var k=(0,vt.zh)(g);if(I.key==="Backspace"&&(0,Be.vU)()&&k.startContainer.textContent===`
`&&k.startOffset===1&&(k.startContainer.textContent=""),oa(g,k),fr(g),I.key==="ArrowDown"||I.key==="ArrowRight"||I.key==="Backspace"||I.key==="ArrowLeft"||I.key==="ArrowUp"){I.key!=="ArrowLeft"&&I.key!=="ArrowRight"||g.hint.render(g);var Ue=(0,et.fb)(k.startContainer,"vditor-wysiwyg__preview");if(!Ue&&k.startContainer.nodeType!==3&&k.startOffset>0&&(Bt=k.startContainer).classList.contains("vditor-wysiwyg__block")&&(Ue=Bt.lastElementChild),Ue)if(Ue.previousElementSibling.style.display!=="none"){var ft=Ue.previousElementSibling;if(ft.tagName==="PRE"&&(ft=ft.firstElementChild),I.key==="ArrowDown"||I.key==="ArrowRight"){var Bt,Xt=function(Wt){for(var tr=Wt;tr&&!tr.nextSibling;)tr=tr.parentElement;return tr.nextSibling}(Bt=Ue.parentElement);if(Xt&&Xt.nodeType!==3){var Ut=Xt.querySelector(".vditor-wysiwyg__preview");if(Ut)return void fo(Ut,g)}if(Xt.nodeType===3){for(;Xt.textContent.length===0&&Xt.nextSibling;)Xt=Xt.nextSibling;k.setStart(Xt,1)}else k.setStart(Xt.firstChild,0)}else k.selectNodeContents(ft),k.collapse(!1)}else I.key==="ArrowDown"||I.key==="ArrowRight"?fo(Ue,g):fo(Ue,g,!1)}}})},p}(),bu=function(){var p=function(g,w){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var Ue in k)k.hasOwnProperty(Ue)&&(I[Ue]=k[Ue])},p(g,w)};return function(g,w){function I(){this.constructor=g}p(g,w),g.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}}();const Uc=function(p){function g(w,I){var k=p.call(this)||this;if(k.version=P.H,typeof w=="string"){if(I?I.cache?I.cache.id||(I.cache.id="vditor"+w):I.cache={id:"vditor"+w}:I={cache:{id:"vditor"+w}},!document.getElementById(w))return k.showErrorTip("Failed to get element by id: "+w),k;w=document.getElementById(w)}var Ue=new Hi(I).merge();if(Ue.i18n)window.VditorI18n=Ue.i18n,k.init(w,Ue);else{if(!["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(Ue.lang))throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");var ft="vditorI18nScript",Bt=ft+Ue.lang;document.querySelectorAll('head script[id^="vditorI18nScript"]').forEach(function(Xt){Xt.id!==Bt&&document.head.removeChild(Xt)}),(0,x.G)(Ue.cdn+"/dist/js/i18n/"+Ue.lang+".js",Bt).then(function(){k.init(w,Ue)}).catch(function(Xt){k.showErrorTip("GET "+Ue.cdn+"/dist/js/i18n/"+Ue.lang+".js net::ERR_ABORTED 404 (Not Found)")})}return k}return bu(g,p),g.prototype.showErrorTip=function(w){var I=new ri;document.body.appendChild(I.element),I.show(w,0)},g.prototype.setTheme=function(w,I,k,Ue){this.vditor.options.theme=w,fn(this.vditor),I&&(this.vditor.options.preview.theme.current=I,(0,Nn.Z)(I,Ue||this.vditor.options.preview.theme.path)),k&&(this.vditor.options.preview.hljs.style=k,(0,Ra.Y)(k,this.vditor.options.cdn))},g.prototype.getValue=function(){return j(this.vditor)},g.prototype.getCurrentMode=function(){return this.vditor.currentMode},g.prototype.focus=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.focus():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.focus():this.vditor.currentMode==="ir"&&this.vditor.ir.element.focus()},g.prototype.blur=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.blur():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.blur():this.vditor.currentMode==="ir"&&this.vditor.ir.element.blur()},g.prototype.disabled=function(){tt(this.vditor,["subToolbar","hint","popover"]),st(this.vditor.toolbar.elements,P.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},g.prototype.enable=function(){Ye(this.vditor.toolbar.elements,P.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},g.prototype.getSelection=function(){return this.vditor.currentMode==="wysiwyg"?pr(this.vditor.wysiwyg.element):this.vditor.currentMode==="sv"?pr(this.vditor.sv.element):this.vditor.currentMode==="ir"?pr(this.vditor.ir.element):void 0},g.prototype.renderPreview=function(w){this.vditor.preview.render(this.vditor,w)},g.prototype.getCursorPosition=function(){return(0,vt.Ny)(this.vditor[this.vditor.currentMode].element)},g.prototype.isUploading=function(){return this.vditor.upload.isUploading},g.prototype.clearCache=function(){localStorage.removeItem(this.vditor.options.cache.id)},g.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},g.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},g.prototype.html2md=function(w){return this.vditor.lute.HTML2Md(w)},g.prototype.exportJSON=function(w){return this.vditor.lute.RenderJSON(w)},g.prototype.getHTML=function(){return pn(this.vditor)},g.prototype.tip=function(w,I){this.vditor.tip.show(w,I)},g.prototype.setPreviewMode=function(w){ci(w,this.vditor)},g.prototype.deleteValue=function(){window.getSelection().isCollapsed||document.execCommand("delete",!1)},g.prototype.updateValue=function(w){document.execCommand("insertHTML",!1,w)},g.prototype.insertValue=function(w,I){I===void 0&&(I=!0);var k=(0,vt.zh)(this.vditor);k.collapse(!0);var Ue=document.createElement("template");Ue.innerHTML=w,k.insertNode(Ue.content.cloneNode(!0)),k.collapse(!1),this.vditor.currentMode==="sv"?(this.vditor.sv.preventInput=!0,I&&en(this.vditor)):this.vditor.currentMode==="wysiwyg"?I&&hu(this.vditor,getSelection().getRangeAt(0)):this.vditor.currentMode==="ir"&&(this.vditor.ir.preventInput=!0,I&&ln(this.vditor,getSelection().getRangeAt(0),!0))},g.prototype.setValue=function(w,I){var k=this;I===void 0&&(I=!1),this.vditor.currentMode==="sv"?(this.vditor.sv.element.innerHTML="<div data-block='0'>"+this.vditor.lute.SpinVditorSVDOM(w)+"</div>",Fo(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})):this.vditor.currentMode==="wysiwyg"?zr(this.vditor,w,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}):(this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(w),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(Ue){Dt(Ue,k.vditor)}),Nu(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})),this.vditor.outline.render(this.vditor),w||(tt(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover&&(this.vditor.wysiwyg.popover.style.display="none"),this.clearCache()),I&&this.clearStack()},g.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},g.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style");var w=document.getElementById("vditorIconScript");w&&w.remove(),this.clearCache(),er(),this.vditor.wysiwyg.unbindListener()},g.prototype.getCommentIds=function(){return this.vditor.currentMode!=="wysiwyg"?[]:this.vditor.wysiwyg.getComments(this.vditor,!0)},g.prototype.hlCommentIds=function(w){if(this.vditor.currentMode==="wysiwyg"){var I=function(k){k.classList.remove("vditor-comment--hover"),w.forEach(function(Ue){k.getAttribute("data-cmtids").indexOf(Ue)>-1&&k.classList.add("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(k){I(k)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(k){I(k)})}},g.prototype.unHlCommentIds=function(w){if(this.vditor.currentMode==="wysiwyg"){var I=function(k){w.forEach(function(Ue){k.getAttribute("data-cmtids").indexOf(Ue)>-1&&k.classList.remove("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(k){I(k)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(k){I(k)})}},g.prototype.removeCommentIds=function(w){var I=this;if(this.vditor.currentMode==="wysiwyg"){var k=function(Ue,ft){var Bt=Ue.getAttribute("data-cmtids").split(" ");Bt.find(function(Xt,Ut){if(Xt===ft)return Bt.splice(Ut,1),!0}),Bt.length===0?(Ue.outerHTML=Ue.innerHTML,(0,vt.zh)(I.vditor).collapse(!0)):Ue.setAttribute("data-cmtids",Bt.join(" "))};w.forEach(function(Ue){I.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(ft){k(ft,Ue)}),I.vditor.preview.element.style.display!=="none"&&I.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(ft){k(ft,Ue)})}),Mn(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})}},g.prototype.init=function(w,I){var k=this;this.vditor={currentMode:I.mode,element:w,hint:new Dl(I.hint.extend),lute:void 0,options:I,originalInnerHTML:w.innerHTML,outline:new Mr(window.VditorI18n.outline),tip:new ri},this.vditor.sv=new so(this.vditor),this.vditor.undo=new tc,this.vditor.wysiwyg=new Dm(this.vditor),this.vditor.ir=new Tt(this.vditor),this.vditor.toolbar=new kd(this.vditor),I.resize.enable&&(this.vditor.resize=new Qo(this.vditor)),this.vditor.toolbar.elements.devtools&&(this.vditor.devtools=new qe),(I.upload.url||I.upload.handler)&&(this.vditor.upload=new Xu),(0,x.G)(I._lutePath||I.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then(function(){k.vditor.lute=(0,_n.X)({autoSpace:k.vditor.options.preview.markdown.autoSpace,gfmAutoLink:k.vditor.options.preview.markdown.gfmAutoLink,codeBlockPreview:k.vditor.options.preview.markdown.codeBlockPreview,emojiSite:k.vditor.options.hint.emojiPath,emojis:k.vditor.options.hint.emoji,fixTermTypo:k.vditor.options.preview.markdown.fixTermTypo,footnotes:k.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:k.vditor.options.preview.math.inlineDigit,linkBase:k.vditor.options.preview.markdown.linkBase,linkPrefix:k.vditor.options.preview.markdown.linkPrefix,listStyle:k.vditor.options.preview.markdown.listStyle,mark:k.vditor.options.preview.markdown.mark,mathBlockPreview:k.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:k.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:k.vditor.options.preview.markdown.sanitize,toc:k.vditor.options.preview.markdown.toc}),k.vditor.preview=new Ro(k.vditor),function(Ue){Ue.element.innerHTML="",Ue.element.classList.add("vditor"),Ue.options.rtl&&Ue.element.setAttribute("dir","rtl"),fn(Ue),(0,Nn.Z)(Ue.options.preview.theme.current,Ue.options.preview.theme.path),typeof Ue.options.height=="number"?Ue.element.style.height=Ue.options.height+"px":Ue.element.style.height=Ue.options.height,typeof Ue.options.minHeight=="number"&&(Ue.element.style.minHeight=Ue.options.minHeight+"px"),typeof Ue.options.width=="number"?Ue.element.style.width=Ue.options.width+"px":Ue.element.style.width=Ue.options.width,Ue.element.appendChild(Ue.toolbar.element);var ft=document.createElement("div");if(ft.className="vditor-content",Ue.options.outline.position==="left"&&ft.appendChild(Ue.outline.element),ft.appendChild(Ue.wysiwyg.element.parentElement),ft.appendChild(Ue.sv.element),ft.appendChild(Ue.ir.element.parentElement),ft.appendChild(Ue.preview.element),Ue.toolbar.elements.devtools&&ft.appendChild(Ue.devtools.element),Ue.options.outline.position==="right"&&(Ue.outline.element.classList.add("vditor-outline--right"),ft.appendChild(Ue.outline.element)),Ue.upload&&ft.appendChild(Ue.upload.element),Ue.options.resize.enable&&ft.appendChild(Ue.resize.element),ft.appendChild(Ue.hint.element),ft.appendChild(Ue.tip.element),Ue.element.appendChild(ft),ft.addEventListener("click",function(){tt(Ue,["subToolbar"])}),Ue.toolbar.elements.export&&Ue.element.insertAdjacentHTML("beforeend",'<iframe id="vditorExportIframe" style="width: 100%;height: 0;border: 0"></iframe>'),Un(Ue,Ue.options.mode,va(Ue)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&window.visualViewport!==void 0){var Bt=!1,Xt=function(Ut){Bt||(Bt=!0,requestAnimationFrame(function(){Bt=!1;var Wt=Ue.toolbar.element;Wt.style.transform="none",Wt.getBoundingClientRect().top<0&&(Wt.style.transform="translate(0, "+-Wt.getBoundingClientRect().top+"px)")}))};window.visualViewport.addEventListener("scroll",Xt),window.visualViewport.addEventListener("resize",Xt)}}(k.vditor),I.after&&I.after(),I.icon&&(0,x.J)(I.cdn+"/dist/js/icons/"+I.icon+".js","vditorIconScript")})},g}(Ve.default)})(),Ge=Ge.default})())})(index_min);var index_minExports=index_min.exports;const Vditor=getDefaultExportFromCjs(index_minExports),index="",_sfc_main$3=defineComponent({inheritAttrs:!1,__name:"Markdown",props:{height:{type:Number,default:360},value:{type:String,default:""}},emits:["change","get","update:value"],setup(v,{emit:y}){const C=v,A=y,We=useAttrs$1(),Ge=ref(null),Xe=ref(null),Ve=ref(!1),P=useModalContext(),{getLocale:Te}=useLocale(),{getDarkMode:j}=useRootSetting(),x=ref(C.value||"");watch([()=>j.value,()=>Ve.value],([Ye,st])=>{var rt;st&&((rt=De.getVditor())==null||rt.setTheme(getTheme(Ye),getTheme(Ye,"content"),getTheme(Ye,"code")))},{immediate:!0,flush:"post"}),watch(()=>C.value,Ye=>{var st;Ye!==x.value&&((st=De.getVditor())==null||st.setValue(Ye)),x.value=Ye});const qe=computed(()=>{let Ye;switch(unref(Te)){case"en":Ye="en_US";break;case"ja":Ye="ja_JP";break;case"ko":Ye="ko_KR";break;default:Ye="zh_CN"}return Ye});function Be(){const Ye=unref(Ge);if(!Ye)return;const st=ua(ua({},We),C),rt=getToken(),{apiUrl:Ke}=useGlobSetting(),tt=new Vditor(Ye,Mu(ua({theme:getTheme(j.value),lang:unref(qe),mode:"sv",fullscreen:{index:520},preview:{theme:{current:getTheme(j.value,"content")},hljs:{style:getTheme(j.value,"code")},actions:[]},input:at=>{x.value=at,A("update:value",at),A("change",at)},after:()=>{nextTick(()=>{var at;(at=P==null?void 0:P.redoModalHeight)==null||at.call(P),tt.setValue(x.value),Xe.value=tt,Ve.value=!0,A("get",De)})},blur:()=>{}},st),{cache:{enable:!1},upload:{url:`${Ke}${Api.upload}`,multiple:!1,fieldName:"file",headers:{"anno-token":rt},format(at,et){var Ot=JSON.parse(et);const wt={};return wt[`${at[0].name}`]=`${Ot.data}`,JSON.stringify({msg:"",code:0,data:{succMap:wt}})}}}))}const De={getVditor:()=>Xe.value};function He(){var st;const Ye=unref(Xe);if(Ye){try{(st=Ye==null?void 0:Ye.destroy)==null||st.call(Ye)}catch(rt){}Xe.value=null,Ve.value=!1}}return onMountedOrActivated(Be),onBeforeUnmount(He),onDeactivated(He),(Ye,st)=>(openBlock(),createElementBlock("div",{ref_key:"wrapRef",ref:Ge},null,512))}}),MarkDown=withInstall(_sfc_main$3);withInstall(_sfc_main$r);/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function ownKeys(v,y){var C=Object.keys(v);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(v);y&&(A=A.filter(function(We){return Object.getOwnPropertyDescriptor(v,We).enumerable})),C.push.apply(C,A)}return C}function _objectSpread2(v){for(var y=1;y<arguments.length;y++){var C=arguments[y]!=null?arguments[y]:{};y%2?ownKeys(Object(C),!0).forEach(function(A){_defineProperty(v,A,C[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(C)):ownKeys(Object(C)).forEach(function(A){Object.defineProperty(v,A,Object.getOwnPropertyDescriptor(C,A))})}return v}function _toPrimitive(v,y){if(typeof v!="object"||!v)return v;var C=v[Symbol.toPrimitive];if(C!==void 0){var A=C.call(v,y||"default");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(v)}function _toPropertyKey(v){var y=_toPrimitive(v,"string");return typeof y=="symbol"?y:y+""}function _typeof(v){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},_typeof(v)}function _classCallCheck(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function _defineProperties(v,y){for(var C=0;C<y.length;C++){var A=y[C];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(v,_toPropertyKey(A.key),A)}}function _createClass(v,y,C){return y&&_defineProperties(v.prototype,y),C&&_defineProperties(v,C),Object.defineProperty(v,"prototype",{writable:!1}),v}function _defineProperty(v,y,C){return y=_toPropertyKey(y),y in v?Object.defineProperty(v,y,{value:C,enumerable:!0,configurable:!0,writable:!0}):v[y]=C,v}function _toConsumableArray(v){return _arrayWithoutHoles(v)||_iterableToArray(v)||_unsupportedIterableToArray(v)||_nonIterableSpread()}function _arrayWithoutHoles(v){if(Array.isArray(v))return _arrayLikeToArray(v)}function _iterableToArray(v){if(typeof Symbol!="undefined"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function _unsupportedIterableToArray(v,y){if(v){if(typeof v=="string")return _arrayLikeToArray(v,y);var C=Object.prototype.toString.call(v).slice(8,-1);if(C==="Object"&&v.constructor&&(C=v.constructor.name),C==="Map"||C==="Set")return Array.from(v);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return _arrayLikeToArray(v,y)}}function _arrayLikeToArray(v,y){(y==null||y>v.length)&&(y=v.length);for(var C=0,A=new Array(y);C<y;C++)A[C]=v[C];return A}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var IS_BROWSER=typeof window!="undefined"&&typeof window.document!="undefined",WINDOW=IS_BROWSER?window:{},IS_TOUCH_DEVICE=IS_BROWSER&&WINDOW.document.documentElement?"ontouchstart"in WINDOW.document.documentElement:!1,HAS_POINTER_EVENT=IS_BROWSER?"PointerEvent"in WINDOW:!1,NAMESPACE="cropper",ACTION_ALL="all",ACTION_CROP="crop",ACTION_MOVE="move",ACTION_ZOOM="zoom",ACTION_EAST="e",ACTION_WEST="w",ACTION_SOUTH="s",ACTION_NORTH="n",ACTION_NORTH_EAST="ne",ACTION_NORTH_WEST="nw",ACTION_SOUTH_EAST="se",ACTION_SOUTH_WEST="sw",CLASS_CROP="".concat(NAMESPACE,"-crop"),CLASS_DISABLED="".concat(NAMESPACE,"-disabled"),CLASS_HIDDEN="".concat(NAMESPACE,"-hidden"),CLASS_HIDE="".concat(NAMESPACE,"-hide"),CLASS_INVISIBLE="".concat(NAMESPACE,"-invisible"),CLASS_MODAL="".concat(NAMESPACE,"-modal"),CLASS_MOVE="".concat(NAMESPACE,"-move"),DATA_ACTION="".concat(NAMESPACE,"Action"),DATA_PREVIEW="".concat(NAMESPACE,"Preview"),DRAG_MODE_CROP="crop",DRAG_MODE_MOVE="move",DRAG_MODE_NONE="none",EVENT_CROP="crop",EVENT_CROP_END="cropend",EVENT_CROP_MOVE="cropmove",EVENT_CROP_START="cropstart",EVENT_DBLCLICK="dblclick",EVENT_TOUCH_START=IS_TOUCH_DEVICE?"touchstart":"mousedown",EVENT_TOUCH_MOVE=IS_TOUCH_DEVICE?"touchmove":"mousemove",EVENT_TOUCH_END=IS_TOUCH_DEVICE?"touchend touchcancel":"mouseup",EVENT_POINTER_DOWN=HAS_POINTER_EVENT?"pointerdown":EVENT_TOUCH_START,EVENT_POINTER_MOVE=HAS_POINTER_EVENT?"pointermove":EVENT_TOUCH_MOVE,EVENT_POINTER_UP=HAS_POINTER_EVENT?"pointerup pointercancel":EVENT_TOUCH_END,EVENT_READY="ready",EVENT_RESIZE="resize",EVENT_WHEEL="wheel",EVENT_ZOOM="zoom",MIME_TYPE_JPEG="image/jpeg",REGEXP_ACTIONS=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,REGEXP_DATA_URL=/^data:/,REGEXP_DATA_URL_JPEG=/^data:image\/jpeg;base64,/,REGEXP_TAG_NAME=/^img|canvas$/i,MIN_CONTAINER_WIDTH=200,MIN_CONTAINER_HEIGHT=100,DEFAULTS={viewMode:0,dragMode:DRAG_MODE_CROP,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:MIN_CONTAINER_WIDTH,minContainerHeight:MIN_CONTAINER_HEIGHT,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},TEMPLATE='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',isNaN$1=Number.isNaN||WINDOW.isNaN;function isNumber(v){return typeof v=="number"&&!isNaN$1(v)}var isPositiveNumber=function v(y){return y>0&&y<1/0};function isUndefined(v){return typeof v=="undefined"}function isObject(v){return _typeof(v)==="object"&&v!==null}var hasOwnProperty=Object.prototype.hasOwnProperty;function isPlainObject(v){if(!isObject(v))return!1;try{var y=v.constructor,C=y.prototype;return y&&C&&hasOwnProperty.call(C,"isPrototypeOf")}catch(A){return!1}}function isFunction(v){return typeof v=="function"}var slice=Array.prototype.slice;function toArray(v){return Array.from?Array.from(v):slice.call(v)}function forEach(v,y){return v&&isFunction(y)&&(Array.isArray(v)||isNumber(v.length)?toArray(v).forEach(function(C,A){y.call(v,C,A,v)}):isObject(v)&&Object.keys(v).forEach(function(C){y.call(v,v[C],C,v)})),v}var assign=Object.assign||function v(y){for(var C=arguments.length,A=new Array(C>1?C-1:0),We=1;We<C;We++)A[We-1]=arguments[We];return isObject(y)&&A.length>0&&A.forEach(function(Ge){isObject(Ge)&&Object.keys(Ge).forEach(function(Xe){y[Xe]=Ge[Xe]})}),y},REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(v){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return REGEXP_DECIMALS.test(v)?Math.round(v*y)/y:v}var REGEXP_SUFFIX=/^width|height|left|top|marginLeft|marginTop$/;function setStyle(v,y){var C=v.style;forEach(y,function(A,We){REGEXP_SUFFIX.test(We)&&isNumber(A)&&(A="".concat(A,"px")),C[We]=A})}function hasClass(v,y){return v.classList?v.classList.contains(y):v.className.indexOf(y)>-1}function addClass(v,y){if(y){if(isNumber(v.length)){forEach(v,function(A){addClass(A,y)});return}if(v.classList){v.classList.add(y);return}var C=v.className.trim();C?C.indexOf(y)<0&&(v.className="".concat(C," ").concat(y)):v.className=y}}function removeClass(v,y){if(y){if(isNumber(v.length)){forEach(v,function(C){removeClass(C,y)});return}if(v.classList){v.classList.remove(y);return}v.className.indexOf(y)>=0&&(v.className=v.className.replace(y,""))}}function toggleClass(v,y,C){if(y){if(isNumber(v.length)){forEach(v,function(A){toggleClass(A,y,C)});return}C?addClass(v,y):removeClass(v,y)}}var REGEXP_CAMEL_CASE=/([a-z\d])([A-Z])/g;function toParamCase(v){return v.replace(REGEXP_CAMEL_CASE,"$1-$2").toLowerCase()}function getData(v,y){return isObject(v[y])?v[y]:v.dataset?v.dataset[y]:v.getAttribute("data-".concat(toParamCase(y)))}function setData(v,y,C){isObject(C)?v[y]=C:v.dataset?v.dataset[y]=C:v.setAttribute("data-".concat(toParamCase(y)),C)}function removeData(v,y){if(isObject(v[y]))try{delete v[y]}catch(C){v[y]=void 0}else if(v.dataset)try{delete v.dataset[y]}catch(C){v.dataset[y]=void 0}else v.removeAttribute("data-".concat(toParamCase(y)))}var REGEXP_SPACES=/\s\s*/,onceSupported=function(){var v=!1;if(IS_BROWSER){var y=!1,C=function(){},A=Object.defineProperty({},"once",{get:function(){return v=!0,y},set:function(Ge){y=Ge}});WINDOW.addEventListener("test",C,A),WINDOW.removeEventListener("test",C,A)}return v}();function removeListener(v,y,C){var A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},We=C;y.trim().split(REGEXP_SPACES).forEach(function(Ge){if(!onceSupported){var Xe=v.listeners;Xe&&Xe[Ge]&&Xe[Ge][C]&&(We=Xe[Ge][C],delete Xe[Ge][C],Object.keys(Xe[Ge]).length===0&&delete Xe[Ge],Object.keys(Xe).length===0&&delete v.listeners)}v.removeEventListener(Ge,We,A)})}function addListener(v,y,C){var A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},We=C;y.trim().split(REGEXP_SPACES).forEach(function(Ge){if(A.once&&!onceSupported){var Xe=v.listeners,Ve=Xe===void 0?{}:Xe;We=function(){delete Ve[Ge][C],v.removeEventListener(Ge,We,A);for(var Te=arguments.length,j=new Array(Te),x=0;x<Te;x++)j[x]=arguments[x];C.apply(v,j)},Ve[Ge]||(Ve[Ge]={}),Ve[Ge][C]&&v.removeEventListener(Ge,Ve[Ge][C],A),Ve[Ge][C]=We,v.listeners=Ve}v.addEventListener(Ge,We,A)})}function dispatchEvent(v,y,C){var A;return isFunction(Event)&&isFunction(CustomEvent)?A=new CustomEvent(y,{detail:C,bubbles:!0,cancelable:!0}):(A=document.createEvent("CustomEvent"),A.initCustomEvent(y,!0,!0,C)),v.dispatchEvent(A)}function getOffset(v){var y=v.getBoundingClientRect();return{left:y.left+(window.pageXOffset-document.documentElement.clientLeft),top:y.top+(window.pageYOffset-document.documentElement.clientTop)}}var location=WINDOW.location,REGEXP_ORIGINS=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function isCrossOriginURL(v){var y=v.match(REGEXP_ORIGINS);return y!==null&&(y[1]!==location.protocol||y[2]!==location.hostname||y[3]!==location.port)}function addTimestamp(v){var y="timestamp=".concat(new Date().getTime());return v+(v.indexOf("?")===-1?"?":"&")+y}function getTransforms(v){var y=v.rotate,C=v.scaleX,A=v.scaleY,We=v.translateX,Ge=v.translateY,Xe=[];isNumber(We)&&We!==0&&Xe.push("translateX(".concat(We,"px)")),isNumber(Ge)&&Ge!==0&&Xe.push("translateY(".concat(Ge,"px)")),isNumber(y)&&y!==0&&Xe.push("rotate(".concat(y,"deg)")),isNumber(C)&&C!==1&&Xe.push("scaleX(".concat(C,")")),isNumber(A)&&A!==1&&Xe.push("scaleY(".concat(A,")"));var Ve=Xe.length?Xe.join(" "):"none";return{WebkitTransform:Ve,msTransform:Ve,transform:Ve}}function getMaxZoomRatio(v){var y=_objectSpread2({},v),C=0;return forEach(v,function(A,We){delete y[We],forEach(y,function(Ge){var Xe=Math.abs(A.startX-Ge.startX),Ve=Math.abs(A.startY-Ge.startY),P=Math.abs(A.endX-Ge.endX),Te=Math.abs(A.endY-Ge.endY),j=Math.sqrt(Xe*Xe+Ve*Ve),x=Math.sqrt(P*P+Te*Te),qe=(x-j)/j;Math.abs(qe)>Math.abs(C)&&(C=qe)})}),C}function getPointer(v,y){var C=v.pageX,A=v.pageY,We={endX:C,endY:A};return y?We:_objectSpread2({startX:C,startY:A},We)}function getPointersCenter(v){var y=0,C=0,A=0;return forEach(v,function(We){var Ge=We.startX,Xe=We.startY;y+=Ge,C+=Xe,A+=1}),y/=A,C/=A,{pageX:y,pageY:C}}function getAdjustedSizes(v){var y=v.aspectRatio,C=v.height,A=v.width,We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",Ge=isPositiveNumber(A),Xe=isPositiveNumber(C);if(Ge&&Xe){var Ve=C*y;We==="contain"&&Ve>A||We==="cover"&&Ve<A?C=A/y:A=C*y}else Ge?C=A/y:Xe&&(A=C*y);return{width:A,height:C}}function getRotatedSizes(v){var y=v.width,C=v.height,A=v.degree;if(A=Math.abs(A)%180,A===90)return{width:C,height:y};var We=A%90*Math.PI/180,Ge=Math.sin(We),Xe=Math.cos(We),Ve=y*Xe+C*Ge,P=y*Ge+C*Xe;return A>90?{width:P,height:Ve}:{width:Ve,height:P}}function getSourceCanvas(v,y,C,A){var We=y.aspectRatio,Ge=y.naturalWidth,Xe=y.naturalHeight,Ve=y.rotate,P=Ve===void 0?0:Ve,Te=y.scaleX,j=Te===void 0?1:Te,x=y.scaleY,qe=x===void 0?1:x,Be=C.aspectRatio,De=C.naturalWidth,He=C.naturalHeight,Ye=A.fillColor,st=Ye===void 0?"transparent":Ye,rt=A.imageSmoothingEnabled,Ke=rt===void 0?!0:rt,tt=A.imageSmoothingQuality,at=tt===void 0?"low":tt,et=A.maxWidth,Ot=et===void 0?1/0:et,wt=A.maxHeight,xt=wt===void 0?1/0:wt,it=A.minWidth,yt=it===void 0?0:it,ut=A.minHeight,Et=ut===void 0?0:ut,Ht=document.createElement("canvas"),an=Ht.getContext("2d"),Mt=getAdjustedSizes({aspectRatio:Be,width:Ot,height:xt}),vn=getAdjustedSizes({aspectRatio:Be,width:yt,height:Et},"cover"),Wn=Math.min(Mt.width,Math.max(vn.width,De)),$e=Math.min(Mt.height,Math.max(vn.height,He)),Dt=getAdjustedSizes({aspectRatio:We,width:Ot,height:xt}),vt=getAdjustedSizes({aspectRatio:We,width:yt,height:Et},"cover"),nn=Math.min(Dt.width,Math.max(vt.width,Ge)),_t=Math.min(Dt.height,Math.max(vt.height,Xe)),Nt=[-nn/2,-_t/2,nn,_t];return Ht.width=normalizeDecimalNumber(Wn),Ht.height=normalizeDecimalNumber($e),an.fillStyle=st,an.fillRect(0,0,Wn,$e),an.save(),an.translate(Wn/2,$e/2),an.rotate(P*Math.PI/180),an.scale(j,qe),an.imageSmoothingEnabled=Ke,an.imageSmoothingQuality=at,an.drawImage.apply(an,[v].concat(_toConsumableArray(Nt.map(function(ln){return Math.floor(normalizeDecimalNumber(ln))})))),an.restore(),Ht}var fromCharCode=String.fromCharCode;function getStringFromCharCode(v,y,C){var A="";C+=y;for(var We=y;We<C;We+=1)A+=fromCharCode(v.getUint8(We));return A}var REGEXP_DATA_URL_HEAD=/^data:.*,/;function dataURLToArrayBuffer(v){var y=v.replace(REGEXP_DATA_URL_HEAD,""),C=atob(y),A=new ArrayBuffer(C.length),We=new Uint8Array(A);return forEach(We,function(Ge,Xe){We[Xe]=C.charCodeAt(Xe)}),A}function arrayBufferToDataURL(v,y){for(var C=[],A=8192,We=new Uint8Array(v);We.length>0;)C.push(fromCharCode.apply(null,toArray(We.subarray(0,A)))),We=We.subarray(A);return"data:".concat(y,";base64,").concat(btoa(C.join("")))}function resetAndGetOrientation(v){var y=new DataView(v),C;try{var A,We,Ge;if(y.getUint8(0)===255&&y.getUint8(1)===216)for(var Xe=y.byteLength,Ve=2;Ve+1<Xe;){if(y.getUint8(Ve)===255&&y.getUint8(Ve+1)===225){We=Ve;break}Ve+=1}if(We){var P=We+4,Te=We+10;if(getStringFromCharCode(y,P,4)==="Exif"){var j=y.getUint16(Te);if(A=j===18761,(A||j===19789)&&y.getUint16(Te+2,A)===42){var x=y.getUint32(Te+4,A);x>=8&&(Ge=Te+x)}}}if(Ge){var qe=y.getUint16(Ge,A),Be,De;for(De=0;De<qe;De+=1)if(Be=Ge+De*12+2,y.getUint16(Be,A)===274){Be+=8,C=y.getUint16(Be,A),y.setUint16(Be,1,A);break}}}catch(He){C=1}return C}function parseOrientation(v){var y=0,C=1,A=1;switch(v){case 2:C=-1;break;case 3:y=-180;break;case 4:A=-1;break;case 5:y=90,A=-1;break;case 6:y=90;break;case 7:y=90,C=-1;break;case 8:y=-90;break}return{rotate:y,scaleX:C,scaleY:A}}var render={render:function v(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function v(){var y=this.element,C=this.options,A=this.container,We=this.cropper,Ge=Number(C.minContainerWidth),Xe=Number(C.minContainerHeight);addClass(We,CLASS_HIDDEN),removeClass(y,CLASS_HIDDEN);var Ve={width:Math.max(A.offsetWidth,Ge>=0?Ge:MIN_CONTAINER_WIDTH),height:Math.max(A.offsetHeight,Xe>=0?Xe:MIN_CONTAINER_HEIGHT)};this.containerData=Ve,setStyle(We,{width:Ve.width,height:Ve.height}),addClass(y,CLASS_HIDDEN),removeClass(We,CLASS_HIDDEN)},initCanvas:function v(){var y=this.containerData,C=this.imageData,A=this.options.viewMode,We=Math.abs(C.rotate)%180===90,Ge=We?C.naturalHeight:C.naturalWidth,Xe=We?C.naturalWidth:C.naturalHeight,Ve=Ge/Xe,P=y.width,Te=y.height;y.height*Ve>y.width?A===3?P=y.height*Ve:Te=y.width/Ve:A===3?Te=y.width/Ve:P=y.height*Ve;var j={aspectRatio:Ve,naturalWidth:Ge,naturalHeight:Xe,width:P,height:Te};this.canvasData=j,this.limited=A===1||A===2,this.limitCanvas(!0,!0),j.width=Math.min(Math.max(j.width,j.minWidth),j.maxWidth),j.height=Math.min(Math.max(j.height,j.minHeight),j.maxHeight),j.left=(y.width-j.width)/2,j.top=(y.height-j.height)/2,j.oldLeft=j.left,j.oldTop=j.top,this.initialCanvasData=assign({},j)},limitCanvas:function v(y,C){var A=this.options,We=this.containerData,Ge=this.canvasData,Xe=this.cropBoxData,Ve=A.viewMode,P=Ge.aspectRatio,Te=this.cropped&&Xe;if(y){var j=Number(A.minCanvasWidth)||0,x=Number(A.minCanvasHeight)||0;Ve>1?(j=Math.max(j,We.width),x=Math.max(x,We.height),Ve===3&&(x*P>j?j=x*P:x=j/P)):Ve>0&&(j?j=Math.max(j,Te?Xe.width:0):x?x=Math.max(x,Te?Xe.height:0):Te&&(j=Xe.width,x=Xe.height,x*P>j?j=x*P:x=j/P));var qe=getAdjustedSizes({aspectRatio:P,width:j,height:x});j=qe.width,x=qe.height,Ge.minWidth=j,Ge.minHeight=x,Ge.maxWidth=1/0,Ge.maxHeight=1/0}if(C)if(Ve>(Te?0:1)){var Be=We.width-Ge.width,De=We.height-Ge.height;Ge.minLeft=Math.min(0,Be),Ge.minTop=Math.min(0,De),Ge.maxLeft=Math.max(0,Be),Ge.maxTop=Math.max(0,De),Te&&this.limited&&(Ge.minLeft=Math.min(Xe.left,Xe.left+(Xe.width-Ge.width)),Ge.minTop=Math.min(Xe.top,Xe.top+(Xe.height-Ge.height)),Ge.maxLeft=Xe.left,Ge.maxTop=Xe.top,Ve===2&&(Ge.width>=We.width&&(Ge.minLeft=Math.min(0,Be),Ge.maxLeft=Math.max(0,Be)),Ge.height>=We.height&&(Ge.minTop=Math.min(0,De),Ge.maxTop=Math.max(0,De))))}else Ge.minLeft=-Ge.width,Ge.minTop=-Ge.height,Ge.maxLeft=We.width,Ge.maxTop=We.height},renderCanvas:function v(y,C){var A=this.canvasData,We=this.imageData;if(C){var Ge=getRotatedSizes({width:We.naturalWidth*Math.abs(We.scaleX||1),height:We.naturalHeight*Math.abs(We.scaleY||1),degree:We.rotate||0}),Xe=Ge.width,Ve=Ge.height,P=A.width*(Xe/A.naturalWidth),Te=A.height*(Ve/A.naturalHeight);A.left-=(P-A.width)/2,A.top-=(Te-A.height)/2,A.width=P,A.height=Te,A.aspectRatio=Xe/Ve,A.naturalWidth=Xe,A.naturalHeight=Ve,this.limitCanvas(!0,!1)}(A.width>A.maxWidth||A.width<A.minWidth)&&(A.left=A.oldLeft),(A.height>A.maxHeight||A.height<A.minHeight)&&(A.top=A.oldTop),A.width=Math.min(Math.max(A.width,A.minWidth),A.maxWidth),A.height=Math.min(Math.max(A.height,A.minHeight),A.maxHeight),this.limitCanvas(!1,!0),A.left=Math.min(Math.max(A.left,A.minLeft),A.maxLeft),A.top=Math.min(Math.max(A.top,A.minTop),A.maxTop),A.oldLeft=A.left,A.oldTop=A.top,setStyle(this.canvas,assign({width:A.width,height:A.height},getTransforms({translateX:A.left,translateY:A.top}))),this.renderImage(y),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function v(y){var C=this.canvasData,A=this.imageData,We=A.naturalWidth*(C.width/C.naturalWidth),Ge=A.naturalHeight*(C.height/C.naturalHeight);assign(A,{width:We,height:Ge,left:(C.width-We)/2,top:(C.height-Ge)/2}),setStyle(this.image,assign({width:A.width,height:A.height},getTransforms(assign({translateX:A.left,translateY:A.top},A)))),y&&this.output()},initCropBox:function v(){var y=this.options,C=this.canvasData,A=y.aspectRatio||y.initialAspectRatio,We=Number(y.autoCropArea)||.8,Ge={width:C.width,height:C.height};A&&(C.height*A>C.width?Ge.height=Ge.width/A:Ge.width=Ge.height*A),this.cropBoxData=Ge,this.limitCropBox(!0,!0),Ge.width=Math.min(Math.max(Ge.width,Ge.minWidth),Ge.maxWidth),Ge.height=Math.min(Math.max(Ge.height,Ge.minHeight),Ge.maxHeight),Ge.width=Math.max(Ge.minWidth,Ge.width*We),Ge.height=Math.max(Ge.minHeight,Ge.height*We),Ge.left=C.left+(C.width-Ge.width)/2,Ge.top=C.top+(C.height-Ge.height)/2,Ge.oldLeft=Ge.left,Ge.oldTop=Ge.top,this.initialCropBoxData=assign({},Ge)},limitCropBox:function v(y,C){var A=this.options,We=this.containerData,Ge=this.canvasData,Xe=this.cropBoxData,Ve=this.limited,P=A.aspectRatio;if(y){var Te=Number(A.minCropBoxWidth)||0,j=Number(A.minCropBoxHeight)||0,x=Ve?Math.min(We.width,Ge.width,Ge.width+Ge.left,We.width-Ge.left):We.width,qe=Ve?Math.min(We.height,Ge.height,Ge.height+Ge.top,We.height-Ge.top):We.height;Te=Math.min(Te,We.width),j=Math.min(j,We.height),P&&(Te&&j?j*P>Te?j=Te/P:Te=j*P:Te?j=Te/P:j&&(Te=j*P),qe*P>x?qe=x/P:x=qe*P),Xe.minWidth=Math.min(Te,x),Xe.minHeight=Math.min(j,qe),Xe.maxWidth=x,Xe.maxHeight=qe}C&&(Ve?(Xe.minLeft=Math.max(0,Ge.left),Xe.minTop=Math.max(0,Ge.top),Xe.maxLeft=Math.min(We.width,Ge.left+Ge.width)-Xe.width,Xe.maxTop=Math.min(We.height,Ge.top+Ge.height)-Xe.height):(Xe.minLeft=0,Xe.minTop=0,Xe.maxLeft=We.width-Xe.width,Xe.maxTop=We.height-Xe.height))},renderCropBox:function v(){var y=this.options,C=this.containerData,A=this.cropBoxData;(A.width>A.maxWidth||A.width<A.minWidth)&&(A.left=A.oldLeft),(A.height>A.maxHeight||A.height<A.minHeight)&&(A.top=A.oldTop),A.width=Math.min(Math.max(A.width,A.minWidth),A.maxWidth),A.height=Math.min(Math.max(A.height,A.minHeight),A.maxHeight),this.limitCropBox(!1,!0),A.left=Math.min(Math.max(A.left,A.minLeft),A.maxLeft),A.top=Math.min(Math.max(A.top,A.minTop),A.maxTop),A.oldLeft=A.left,A.oldTop=A.top,y.movable&&y.cropBoxMovable&&setData(this.face,DATA_ACTION,A.width>=C.width&&A.height>=C.height?ACTION_MOVE:ACTION_ALL),setStyle(this.cropBox,assign({width:A.width,height:A.height},getTransforms({translateX:A.left,translateY:A.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function v(){this.preview(),dispatchEvent(this.element,EVENT_CROP,this.getData())}},preview={initPreview:function v(){var y=this.element,C=this.crossOrigin,A=this.options.preview,We=C?this.crossOriginUrl:this.url,Ge=y.alt||"The image to preview",Xe=document.createElement("img");if(C&&(Xe.crossOrigin=C),Xe.src=We,Xe.alt=Ge,this.viewBox.appendChild(Xe),this.viewBoxImage=Xe,!!A){var Ve=A;typeof A=="string"?Ve=y.ownerDocument.querySelectorAll(A):A.querySelector&&(Ve=[A]),this.previews=Ve,forEach(Ve,function(P){var Te=document.createElement("img");setData(P,DATA_PREVIEW,{width:P.offsetWidth,height:P.offsetHeight,html:P.innerHTML}),C&&(Te.crossOrigin=C),Te.src=We,Te.alt=Ge,Te.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',P.innerHTML="",P.appendChild(Te)})}},resetPreview:function v(){forEach(this.previews,function(y){var C=getData(y,DATA_PREVIEW);setStyle(y,{width:C.width,height:C.height}),y.innerHTML=C.html,removeData(y,DATA_PREVIEW)})},preview:function v(){var y=this.imageData,C=this.canvasData,A=this.cropBoxData,We=A.width,Ge=A.height,Xe=y.width,Ve=y.height,P=A.left-C.left-y.left,Te=A.top-C.top-y.top;!this.cropped||this.disabled||(setStyle(this.viewBoxImage,assign({width:Xe,height:Ve},getTransforms(assign({translateX:-P,translateY:-Te},y)))),forEach(this.previews,function(j){var x=getData(j,DATA_PREVIEW),qe=x.width,Be=x.height,De=qe,He=Be,Ye=1;We&&(Ye=qe/We,He=Ge*Ye),Ge&&He>Be&&(Ye=Be/Ge,De=We*Ye,He=Be),setStyle(j,{width:De,height:He}),setStyle(j.getElementsByTagName("img")[0],assign({width:Xe*Ye,height:Ve*Ye},getTransforms(assign({translateX:-P*Ye,translateY:-Te*Ye},y))))}))}},events={bind:function v(){var y=this.element,C=this.options,A=this.cropper;isFunction(C.cropstart)&&addListener(y,EVENT_CROP_START,C.cropstart),isFunction(C.cropmove)&&addListener(y,EVENT_CROP_MOVE,C.cropmove),isFunction(C.cropend)&&addListener(y,EVENT_CROP_END,C.cropend),isFunction(C.crop)&&addListener(y,EVENT_CROP,C.crop),isFunction(C.zoom)&&addListener(y,EVENT_ZOOM,C.zoom),addListener(A,EVENT_POINTER_DOWN,this.onCropStart=this.cropStart.bind(this)),C.zoomable&&C.zoomOnWheel&&addListener(A,EVENT_WHEEL,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),C.toggleDragModeOnDblclick&&addListener(A,EVENT_DBLCLICK,this.onDblclick=this.dblclick.bind(this)),addListener(y.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove=this.cropMove.bind(this)),addListener(y.ownerDocument,EVENT_POINTER_UP,this.onCropEnd=this.cropEnd.bind(this)),C.responsive&&addListener(window,EVENT_RESIZE,this.onResize=this.resize.bind(this))},unbind:function v(){var y=this.element,C=this.options,A=this.cropper;isFunction(C.cropstart)&&removeListener(y,EVENT_CROP_START,C.cropstart),isFunction(C.cropmove)&&removeListener(y,EVENT_CROP_MOVE,C.cropmove),isFunction(C.cropend)&&removeListener(y,EVENT_CROP_END,C.cropend),isFunction(C.crop)&&removeListener(y,EVENT_CROP,C.crop),isFunction(C.zoom)&&removeListener(y,EVENT_ZOOM,C.zoom),removeListener(A,EVENT_POINTER_DOWN,this.onCropStart),C.zoomable&&C.zoomOnWheel&&removeListener(A,EVENT_WHEEL,this.onWheel,{passive:!1,capture:!0}),C.toggleDragModeOnDblclick&&removeListener(A,EVENT_DBLCLICK,this.onDblclick),removeListener(y.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove),removeListener(y.ownerDocument,EVENT_POINTER_UP,this.onCropEnd),C.responsive&&removeListener(window,EVENT_RESIZE,this.onResize)}},handlers={resize:function v(){if(!this.disabled){var y=this.options,C=this.container,A=this.containerData,We=C.offsetWidth/A.width,Ge=C.offsetHeight/A.height,Xe=Math.abs(We-1)>Math.abs(Ge-1)?We:Ge;if(Xe!==1){var Ve,P;y.restore&&(Ve=this.getCanvasData(),P=this.getCropBoxData()),this.render(),y.restore&&(this.setCanvasData(forEach(Ve,function(Te,j){Ve[j]=Te*Xe})),this.setCropBoxData(forEach(P,function(Te,j){P[j]=Te*Xe})))}}},dblclick:function v(){this.disabled||this.options.dragMode===DRAG_MODE_NONE||this.setDragMode(hasClass(this.dragBox,CLASS_CROP)?DRAG_MODE_MOVE:DRAG_MODE_CROP)},wheel:function v(y){var C=this,A=Number(this.options.wheelZoomRatio)||.1,We=1;this.disabled||(y.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){C.wheeling=!1},50),y.deltaY?We=y.deltaY>0?1:-1:y.wheelDelta?We=-y.wheelDelta/120:y.detail&&(We=y.detail>0?1:-1),this.zoom(-We*A,y)))},cropStart:function v(y){var C=y.buttons,A=y.button;if(!(this.disabled||(y.type==="mousedown"||y.type==="pointerdown"&&y.pointerType==="mouse")&&(isNumber(C)&&C!==1||isNumber(A)&&A!==0||y.ctrlKey))){var We=this.options,Ge=this.pointers,Xe;y.changedTouches?forEach(y.changedTouches,function(Ve){Ge[Ve.identifier]=getPointer(Ve)}):Ge[y.pointerId||0]=getPointer(y),Object.keys(Ge).length>1&&We.zoomable&&We.zoomOnTouch?Xe=ACTION_ZOOM:Xe=getData(y.target,DATA_ACTION),REGEXP_ACTIONS.test(Xe)&&dispatchEvent(this.element,EVENT_CROP_START,{originalEvent:y,action:Xe})!==!1&&(y.preventDefault(),this.action=Xe,this.cropping=!1,Xe===ACTION_CROP&&(this.cropping=!0,addClass(this.dragBox,CLASS_MODAL)))}},cropMove:function v(y){var C=this.action;if(!(this.disabled||!C)){var A=this.pointers;y.preventDefault(),dispatchEvent(this.element,EVENT_CROP_MOVE,{originalEvent:y,action:C})!==!1&&(y.changedTouches?forEach(y.changedTouches,function(We){assign(A[We.identifier]||{},getPointer(We,!0))}):assign(A[y.pointerId||0]||{},getPointer(y,!0)),this.change(y))}},cropEnd:function v(y){if(!this.disabled){var C=this.action,A=this.pointers;y.changedTouches?forEach(y.changedTouches,function(We){delete A[We.identifier]}):delete A[y.pointerId||0],C&&(y.preventDefault(),Object.keys(A).length||(this.action=""),this.cropping&&(this.cropping=!1,toggleClass(this.dragBox,CLASS_MODAL,this.cropped&&this.options.modal)),dispatchEvent(this.element,EVENT_CROP_END,{originalEvent:y,action:C}))}}},change={change:function v(y){var C=this.options,A=this.canvasData,We=this.containerData,Ge=this.cropBoxData,Xe=this.pointers,Ve=this.action,P=C.aspectRatio,Te=Ge.left,j=Ge.top,x=Ge.width,qe=Ge.height,Be=Te+x,De=j+qe,He=0,Ye=0,st=We.width,rt=We.height,Ke=!0,tt;!P&&y.shiftKey&&(P=x&&qe?x/qe:1),this.limited&&(He=Ge.minLeft,Ye=Ge.minTop,st=He+Math.min(We.width,A.width,A.left+A.width),rt=Ye+Math.min(We.height,A.height,A.top+A.height));var at=Xe[Object.keys(Xe)[0]],et={x:at.endX-at.startX,y:at.endY-at.startY},Ot=function(xt){switch(xt){case ACTION_EAST:Be+et.x>st&&(et.x=st-Be);break;case ACTION_WEST:Te+et.x<He&&(et.x=He-Te);break;case ACTION_NORTH:j+et.y<Ye&&(et.y=Ye-j);break;case ACTION_SOUTH:De+et.y>rt&&(et.y=rt-De);break}};switch(Ve){case ACTION_ALL:Te+=et.x,j+=et.y;break;case ACTION_EAST:if(et.x>=0&&(Be>=st||P&&(j<=Ye||De>=rt))){Ke=!1;break}Ot(ACTION_EAST),x+=et.x,x<0&&(Ve=ACTION_WEST,x=-x,Te-=x),P&&(qe=x/P,j+=(Ge.height-qe)/2);break;case ACTION_NORTH:if(et.y<=0&&(j<=Ye||P&&(Te<=He||Be>=st))){Ke=!1;break}Ot(ACTION_NORTH),qe-=et.y,j+=et.y,qe<0&&(Ve=ACTION_SOUTH,qe=-qe,j-=qe),P&&(x=qe*P,Te+=(Ge.width-x)/2);break;case ACTION_WEST:if(et.x<=0&&(Te<=He||P&&(j<=Ye||De>=rt))){Ke=!1;break}Ot(ACTION_WEST),x-=et.x,Te+=et.x,x<0&&(Ve=ACTION_EAST,x=-x,Te-=x),P&&(qe=x/P,j+=(Ge.height-qe)/2);break;case ACTION_SOUTH:if(et.y>=0&&(De>=rt||P&&(Te<=He||Be>=st))){Ke=!1;break}Ot(ACTION_SOUTH),qe+=et.y,qe<0&&(Ve=ACTION_NORTH,qe=-qe,j-=qe),P&&(x=qe*P,Te+=(Ge.width-x)/2);break;case ACTION_NORTH_EAST:if(P){if(et.y<=0&&(j<=Ye||Be>=st)){Ke=!1;break}Ot(ACTION_NORTH),qe-=et.y,j+=et.y,x=qe*P}else Ot(ACTION_NORTH),Ot(ACTION_EAST),et.x>=0?Be<st?x+=et.x:et.y<=0&&j<=Ye&&(Ke=!1):x+=et.x,et.y<=0?j>Ye&&(qe-=et.y,j+=et.y):(qe-=et.y,j+=et.y);x<0&&qe<0?(Ve=ACTION_SOUTH_WEST,qe=-qe,x=-x,j-=qe,Te-=x):x<0?(Ve=ACTION_NORTH_WEST,x=-x,Te-=x):qe<0&&(Ve=ACTION_SOUTH_EAST,qe=-qe,j-=qe);break;case ACTION_NORTH_WEST:if(P){if(et.y<=0&&(j<=Ye||Te<=He)){Ke=!1;break}Ot(ACTION_NORTH),qe-=et.y,j+=et.y,x=qe*P,Te+=Ge.width-x}else Ot(ACTION_NORTH),Ot(ACTION_WEST),et.x<=0?Te>He?(x-=et.x,Te+=et.x):et.y<=0&&j<=Ye&&(Ke=!1):(x-=et.x,Te+=et.x),et.y<=0?j>Ye&&(qe-=et.y,j+=et.y):(qe-=et.y,j+=et.y);x<0&&qe<0?(Ve=ACTION_SOUTH_EAST,qe=-qe,x=-x,j-=qe,Te-=x):x<0?(Ve=ACTION_NORTH_EAST,x=-x,Te-=x):qe<0&&(Ve=ACTION_SOUTH_WEST,qe=-qe,j-=qe);break;case ACTION_SOUTH_WEST:if(P){if(et.x<=0&&(Te<=He||De>=rt)){Ke=!1;break}Ot(ACTION_WEST),x-=et.x,Te+=et.x,qe=x/P}else Ot(ACTION_SOUTH),Ot(ACTION_WEST),et.x<=0?Te>He?(x-=et.x,Te+=et.x):et.y>=0&&De>=rt&&(Ke=!1):(x-=et.x,Te+=et.x),et.y>=0?De<rt&&(qe+=et.y):qe+=et.y;x<0&&qe<0?(Ve=ACTION_NORTH_EAST,qe=-qe,x=-x,j-=qe,Te-=x):x<0?(Ve=ACTION_SOUTH_EAST,x=-x,Te-=x):qe<0&&(Ve=ACTION_NORTH_WEST,qe=-qe,j-=qe);break;case ACTION_SOUTH_EAST:if(P){if(et.x>=0&&(Be>=st||De>=rt)){Ke=!1;break}Ot(ACTION_EAST),x+=et.x,qe=x/P}else Ot(ACTION_SOUTH),Ot(ACTION_EAST),et.x>=0?Be<st?x+=et.x:et.y>=0&&De>=rt&&(Ke=!1):x+=et.x,et.y>=0?De<rt&&(qe+=et.y):qe+=et.y;x<0&&qe<0?(Ve=ACTION_NORTH_WEST,qe=-qe,x=-x,j-=qe,Te-=x):x<0?(Ve=ACTION_SOUTH_WEST,x=-x,Te-=x):qe<0&&(Ve=ACTION_NORTH_EAST,qe=-qe,j-=qe);break;case ACTION_MOVE:this.move(et.x,et.y),Ke=!1;break;case ACTION_ZOOM:this.zoom(getMaxZoomRatio(Xe),y),Ke=!1;break;case ACTION_CROP:if(!et.x||!et.y){Ke=!1;break}tt=getOffset(this.cropper),Te=at.startX-tt.left,j=at.startY-tt.top,x=Ge.minWidth,qe=Ge.minHeight,et.x>0?Ve=et.y>0?ACTION_SOUTH_EAST:ACTION_NORTH_EAST:et.x<0&&(Te-=x,Ve=et.y>0?ACTION_SOUTH_WEST:ACTION_NORTH_WEST),et.y<0&&(j-=qe),this.cropped||(removeClass(this.cropBox,CLASS_HIDDEN),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}Ke&&(Ge.width=x,Ge.height=qe,Ge.left=Te,Ge.top=j,this.action=Ve,this.renderCropBox()),forEach(Xe,function(wt){wt.startX=wt.endX,wt.startY=wt.endY})}},methods={crop:function v(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&addClass(this.dragBox,CLASS_MODAL),removeClass(this.cropBox,CLASS_HIDDEN),this.setCropBoxData(this.initialCropBoxData)),this},reset:function v(){return this.ready&&!this.disabled&&(this.imageData=assign({},this.initialImageData),this.canvasData=assign({},this.initialCanvasData),this.cropBoxData=assign({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function v(){return this.cropped&&!this.disabled&&(assign(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),removeClass(this.dragBox,CLASS_MODAL),addClass(this.cropBox,CLASS_HIDDEN)),this},replace:function v(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&y&&(this.isImg&&(this.element.src=y),C?(this.url=y,this.image.src=y,this.ready&&(this.viewBoxImage.src=y,forEach(this.previews,function(A){A.getElementsByTagName("img")[0].src=y}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(y))),this},enable:function v(){return this.ready&&this.disabled&&(this.disabled=!1,removeClass(this.cropper,CLASS_DISABLED)),this},disable:function v(){return this.ready&&!this.disabled&&(this.disabled=!0,addClass(this.cropper,CLASS_DISABLED)),this},destroy:function v(){var y=this.element;return y[NAMESPACE]?(y[NAMESPACE]=void 0,this.isImg&&this.replaced&&(y.src=this.originalUrl),this.uncreate(),this):this},move:function v(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y,A=this.canvasData,We=A.left,Ge=A.top;return this.moveTo(isUndefined(y)?y:We+Number(y),isUndefined(C)?C:Ge+Number(C))},moveTo:function v(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y,A=this.canvasData,We=!1;return y=Number(y),C=Number(C),this.ready&&!this.disabled&&this.options.movable&&(isNumber(y)&&(A.left=y,We=!0),isNumber(C)&&(A.top=C,We=!0),We&&this.renderCanvas(!0)),this},zoom:function v(y,C){var A=this.canvasData;return y=Number(y),y<0?y=1/(1-y):y=1+y,this.zoomTo(A.width*y/A.naturalWidth,null,C)},zoomTo:function v(y,C,A){var We=this.options,Ge=this.canvasData,Xe=Ge.width,Ve=Ge.height,P=Ge.naturalWidth,Te=Ge.naturalHeight;if(y=Number(y),y>=0&&this.ready&&!this.disabled&&We.zoomable){var j=P*y,x=Te*y;if(dispatchEvent(this.element,EVENT_ZOOM,{ratio:y,oldRatio:Xe/P,originalEvent:A})===!1)return this;if(A){var qe=this.pointers,Be=getOffset(this.cropper),De=qe&&Object.keys(qe).length?getPointersCenter(qe):{pageX:A.pageX,pageY:A.pageY};Ge.left-=(j-Xe)*((De.pageX-Be.left-Ge.left)/Xe),Ge.top-=(x-Ve)*((De.pageY-Be.top-Ge.top)/Ve)}else isPlainObject(C)&&isNumber(C.x)&&isNumber(C.y)?(Ge.left-=(j-Xe)*((C.x-Ge.left)/Xe),Ge.top-=(x-Ve)*((C.y-Ge.top)/Ve)):(Ge.left-=(j-Xe)/2,Ge.top-=(x-Ve)/2);Ge.width=j,Ge.height=x,this.renderCanvas(!0)}return this},rotate:function v(y){return this.rotateTo((this.imageData.rotate||0)+Number(y))},rotateTo:function v(y){return y=Number(y),isNumber(y)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=y%360,this.renderCanvas(!0,!0)),this},scaleX:function v(y){var C=this.imageData.scaleY;return this.scale(y,isNumber(C)?C:1)},scaleY:function v(y){var C=this.imageData.scaleX;return this.scale(isNumber(C)?C:1,y)},scale:function v(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y,A=this.imageData,We=!1;return y=Number(y),C=Number(C),this.ready&&!this.disabled&&this.options.scalable&&(isNumber(y)&&(A.scaleX=y,We=!0),isNumber(C)&&(A.scaleY=C,We=!0),We&&this.renderCanvas(!0,!0)),this},getData:function v(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=this.options,A=this.imageData,We=this.canvasData,Ge=this.cropBoxData,Xe;if(this.ready&&this.cropped){Xe={x:Ge.left-We.left,y:Ge.top-We.top,width:Ge.width,height:Ge.height};var Ve=A.width/A.naturalWidth;if(forEach(Xe,function(j,x){Xe[x]=j/Ve}),y){var P=Math.round(Xe.y+Xe.height),Te=Math.round(Xe.x+Xe.width);Xe.x=Math.round(Xe.x),Xe.y=Math.round(Xe.y),Xe.width=Te-Xe.x,Xe.height=P-Xe.y}}else Xe={x:0,y:0,width:0,height:0};return C.rotatable&&(Xe.rotate=A.rotate||0),C.scalable&&(Xe.scaleX=A.scaleX||1,Xe.scaleY=A.scaleY||1),Xe},setData:function v(y){var C=this.options,A=this.imageData,We=this.canvasData,Ge={};if(this.ready&&!this.disabled&&isPlainObject(y)){var Xe=!1;C.rotatable&&isNumber(y.rotate)&&y.rotate!==A.rotate&&(A.rotate=y.rotate,Xe=!0),C.scalable&&(isNumber(y.scaleX)&&y.scaleX!==A.scaleX&&(A.scaleX=y.scaleX,Xe=!0),isNumber(y.scaleY)&&y.scaleY!==A.scaleY&&(A.scaleY=y.scaleY,Xe=!0)),Xe&&this.renderCanvas(!0,!0);var Ve=A.width/A.naturalWidth;isNumber(y.x)&&(Ge.left=y.x*Ve+We.left),isNumber(y.y)&&(Ge.top=y.y*Ve+We.top),isNumber(y.width)&&(Ge.width=y.width*Ve),isNumber(y.height)&&(Ge.height=y.height*Ve),this.setCropBoxData(Ge)}return this},getContainerData:function v(){return this.ready?assign({},this.containerData):{}},getImageData:function v(){return this.sized?assign({},this.imageData):{}},getCanvasData:function v(){var y=this.canvasData,C={};return this.ready&&forEach(["left","top","width","height","naturalWidth","naturalHeight"],function(A){C[A]=y[A]}),C},setCanvasData:function v(y){var C=this.canvasData,A=C.aspectRatio;return this.ready&&!this.disabled&&isPlainObject(y)&&(isNumber(y.left)&&(C.left=y.left),isNumber(y.top)&&(C.top=y.top),isNumber(y.width)?(C.width=y.width,C.height=y.width/A):isNumber(y.height)&&(C.height=y.height,C.width=y.height*A),this.renderCanvas(!0)),this},getCropBoxData:function v(){var y=this.cropBoxData,C;return this.ready&&this.cropped&&(C={left:y.left,top:y.top,width:y.width,height:y.height}),C||{}},setCropBoxData:function v(y){var C=this.cropBoxData,A=this.options.aspectRatio,We,Ge;return this.ready&&this.cropped&&!this.disabled&&isPlainObject(y)&&(isNumber(y.left)&&(C.left=y.left),isNumber(y.top)&&(C.top=y.top),isNumber(y.width)&&y.width!==C.width&&(We=!0,C.width=y.width),isNumber(y.height)&&y.height!==C.height&&(Ge=!0,C.height=y.height),A&&(We?C.height=C.width/A:Ge&&(C.width=C.height*A)),this.renderCropBox()),this},getCroppedCanvas:function v(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var C=this.canvasData,A=getSourceCanvas(this.image,this.imageData,C,y);if(!this.cropped)return A;var We=this.getData(y.rounded),Ge=We.x,Xe=We.y,Ve=We.width,P=We.height,Te=A.width/Math.floor(C.naturalWidth);Te!==1&&(Ge*=Te,Xe*=Te,Ve*=Te,P*=Te);var j=Ve/P,x=getAdjustedSizes({aspectRatio:j,width:y.maxWidth||1/0,height:y.maxHeight||1/0}),qe=getAdjustedSizes({aspectRatio:j,width:y.minWidth||0,height:y.minHeight||0},"cover"),Be=getAdjustedSizes({aspectRatio:j,width:y.width||(Te!==1?A.width:Ve),height:y.height||(Te!==1?A.height:P)}),De=Be.width,He=Be.height;De=Math.min(x.width,Math.max(qe.width,De)),He=Math.min(x.height,Math.max(qe.height,He));var Ye=document.createElement("canvas"),st=Ye.getContext("2d");Ye.width=normalizeDecimalNumber(De),Ye.height=normalizeDecimalNumber(He),st.fillStyle=y.fillColor||"transparent",st.fillRect(0,0,De,He);var rt=y.imageSmoothingEnabled,Ke=rt===void 0?!0:rt,tt=y.imageSmoothingQuality;st.imageSmoothingEnabled=Ke,tt&&(st.imageSmoothingQuality=tt);var at=A.width,et=A.height,Ot=Ge,wt=Xe,xt,it,yt,ut,Et,Ht;Ot<=-Ve||Ot>at?(Ot=0,xt=0,yt=0,Et=0):Ot<=0?(yt=-Ot,Ot=0,xt=Math.min(at,Ve+Ot),Et=xt):Ot<=at&&(yt=0,xt=Math.min(Ve,at-Ot),Et=xt),xt<=0||wt<=-P||wt>et?(wt=0,it=0,ut=0,Ht=0):wt<=0?(ut=-wt,wt=0,it=Math.min(et,P+wt),Ht=it):wt<=et&&(ut=0,it=Math.min(P,et-wt),Ht=it);var an=[Ot,wt,xt,it];if(Et>0&&Ht>0){var Mt=De/Ve;an.push(yt*Mt,ut*Mt,Et*Mt,Ht*Mt)}return st.drawImage.apply(st,[A].concat(_toConsumableArray(an.map(function(vn){return Math.floor(normalizeDecimalNumber(vn))})))),Ye},setAspectRatio:function v(y){var C=this.options;return!this.disabled&&!isUndefined(y)&&(C.aspectRatio=Math.max(0,y)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function v(y){var C=this.options,A=this.dragBox,We=this.face;if(this.ready&&!this.disabled){var Ge=y===DRAG_MODE_CROP,Xe=C.movable&&y===DRAG_MODE_MOVE;y=Ge||Xe?y:DRAG_MODE_NONE,C.dragMode=y,setData(A,DATA_ACTION,y),toggleClass(A,CLASS_CROP,Ge),toggleClass(A,CLASS_MOVE,Xe),C.cropBoxMovable||(setData(We,DATA_ACTION,y),toggleClass(We,CLASS_CROP,Ge),toggleClass(We,CLASS_MOVE,Xe))}return this}},AnotherCropper=WINDOW.Cropper,Cropper=function(){function v(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_classCallCheck(this,v),!y||!REGEXP_TAG_NAME.test(y.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=y,this.options=assign({},DEFAULTS,isPlainObject(C)&&C),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return _createClass(v,[{key:"init",value:function(){var C=this.element,A=C.tagName.toLowerCase(),We;if(!C[NAMESPACE]){if(C[NAMESPACE]=this,A==="img"){if(this.isImg=!0,We=C.getAttribute("src")||"",this.originalUrl=We,!We)return;We=C.src}else A==="canvas"&&window.HTMLCanvasElement&&(We=C.toDataURL());this.load(We)}}},{key:"load",value:function(C){var A=this;if(C){this.url=C,this.imageData={};var We=this.element,Ge=this.options;if(!Ge.rotatable&&!Ge.scalable&&(Ge.checkOrientation=!1),!Ge.checkOrientation||!window.ArrayBuffer){this.clone();return}if(REGEXP_DATA_URL.test(C)){REGEXP_DATA_URL_JPEG.test(C)?this.read(dataURLToArrayBuffer(C)):this.clone();return}var Xe=new XMLHttpRequest,Ve=this.clone.bind(this);this.reloading=!0,this.xhr=Xe,Xe.onabort=Ve,Xe.onerror=Ve,Xe.ontimeout=Ve,Xe.onprogress=function(){Xe.getResponseHeader("content-type")!==MIME_TYPE_JPEG&&Xe.abort()},Xe.onload=function(){A.read(Xe.response)},Xe.onloadend=function(){A.reloading=!1,A.xhr=null},Ge.checkCrossOrigin&&isCrossOriginURL(C)&&We.crossOrigin&&(C=addTimestamp(C)),Xe.open("GET",C,!0),Xe.responseType="arraybuffer",Xe.withCredentials=We.crossOrigin==="use-credentials",Xe.send()}}},{key:"read",value:function(C){var A=this.options,We=this.imageData,Ge=resetAndGetOrientation(C),Xe=0,Ve=1,P=1;if(Ge>1){this.url=arrayBufferToDataURL(C,MIME_TYPE_JPEG);var Te=parseOrientation(Ge);Xe=Te.rotate,Ve=Te.scaleX,P=Te.scaleY}A.rotatable&&(We.rotate=Xe),A.scalable&&(We.scaleX=Ve,We.scaleY=P),this.clone()}},{key:"clone",value:function(){var C=this.element,A=this.url,We=C.crossOrigin,Ge=A;this.options.checkCrossOrigin&&isCrossOriginURL(A)&&(We||(We="anonymous"),Ge=addTimestamp(A)),this.crossOrigin=We,this.crossOriginUrl=Ge;var Xe=document.createElement("img");We&&(Xe.crossOrigin=We),Xe.src=Ge||A,Xe.alt=C.alt||"The image to crop",this.image=Xe,Xe.onload=this.start.bind(this),Xe.onerror=this.stop.bind(this),addClass(Xe,CLASS_HIDE),C.parentNode.insertBefore(Xe,C.nextSibling)}},{key:"start",value:function(){var C=this,A=this.image;A.onload=null,A.onerror=null,this.sizing=!0;var We=WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent),Ge=function(Te,j){assign(C.imageData,{naturalWidth:Te,naturalHeight:j,aspectRatio:Te/j}),C.initialImageData=assign({},C.imageData),C.sizing=!1,C.sized=!0,C.build()};if(A.naturalWidth&&!We){Ge(A.naturalWidth,A.naturalHeight);return}var Xe=document.createElement("img"),Ve=document.body||document.documentElement;this.sizingImage=Xe,Xe.onload=function(){Ge(Xe.width,Xe.height),We||Ve.removeChild(Xe)},Xe.src=A.src,We||(Xe.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",Ve.appendChild(Xe))}},{key:"stop",value:function(){var C=this.image;C.onload=null,C.onerror=null,C.parentNode.removeChild(C),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var C=this.element,A=this.options,We=this.image,Ge=C.parentNode,Xe=document.createElement("div");Xe.innerHTML=TEMPLATE;var Ve=Xe.querySelector(".".concat(NAMESPACE,"-container")),P=Ve.querySelector(".".concat(NAMESPACE,"-canvas")),Te=Ve.querySelector(".".concat(NAMESPACE,"-drag-box")),j=Ve.querySelector(".".concat(NAMESPACE,"-crop-box")),x=j.querySelector(".".concat(NAMESPACE,"-face"));this.container=Ge,this.cropper=Ve,this.canvas=P,this.dragBox=Te,this.cropBox=j,this.viewBox=Ve.querySelector(".".concat(NAMESPACE,"-view-box")),this.face=x,P.appendChild(We),addClass(C,CLASS_HIDDEN),Ge.insertBefore(Ve,C.nextSibling),removeClass(We,CLASS_HIDE),this.initPreview(),this.bind(),A.initialAspectRatio=Math.max(0,A.initialAspectRatio)||NaN,A.aspectRatio=Math.max(0,A.aspectRatio)||NaN,A.viewMode=Math.max(0,Math.min(3,Math.round(A.viewMode)))||0,addClass(j,CLASS_HIDDEN),A.guides||addClass(j.getElementsByClassName("".concat(NAMESPACE,"-dashed")),CLASS_HIDDEN),A.center||addClass(j.getElementsByClassName("".concat(NAMESPACE,"-center")),CLASS_HIDDEN),A.background&&addClass(Ve,"".concat(NAMESPACE,"-bg")),A.highlight||addClass(x,CLASS_INVISIBLE),A.cropBoxMovable&&(addClass(x,CLASS_MOVE),setData(x,DATA_ACTION,ACTION_ALL)),A.cropBoxResizable||(addClass(j.getElementsByClassName("".concat(NAMESPACE,"-line")),CLASS_HIDDEN),addClass(j.getElementsByClassName("".concat(NAMESPACE,"-point")),CLASS_HIDDEN)),this.render(),this.ready=!0,this.setDragMode(A.dragMode),A.autoCrop&&this.crop(),this.setData(A.data),isFunction(A.ready)&&addListener(C,EVENT_READY,A.ready,{once:!0}),dispatchEvent(C,EVENT_READY)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var C=this.cropper.parentNode;C&&C.removeChild(this.cropper),removeClass(this.element,CLASS_HIDDEN)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=AnotherCropper,v}},{key:"setDefaults",value:function(C){assign(DEFAULTS,isPlainObject(C)&&C)}}])}();assign(Cropper.prototype,render,preview,events,handlers,change,methods);const cropper="",_hoisted_1$2=["src","alt","crossorigin"],_sfc_main$2=defineComponent({name:"CropperImage",__name:"Cropper",props:{src:{type:String,required:!0},alt:{type:String},circled:{type:Boolean,default:!1},realTimePreview:{type:Boolean,default:!0},height:{type:[String,Number],default:"360px"},crossorigin:{type:String,default:void 0},imageStyle:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})}},emits:["cropend","ready","cropendError"],setup(v,{emit:y}){const C={aspectRatio:1,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,autoCrop:!0,background:!0,highlight:!0,center:!0,responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,scalable:!0,modal:!0,guides:!0,movable:!0,rotatable:!0},A=v,We=y,Ge=useAttrs(),Xe=ref(),Ve=ref(),P=ref(!1),{prefixCls:Te}=useDesign("cropper-image"),j=useDebounceFn(He,80),x=computed(()=>ua({height:A.height,maxWidth:"100%"},A.imageStyle)),qe=computed(()=>[Te,Ge.class,{[`${Te}--circled`]:A.circled}]),Be=computed(()=>({height:`${A.height}`.replace(/px/,"")+"px"}));onMounted(De),onUnmounted(()=>{var rt;(rt=Ve.value)==null||rt.destroy()});function De(){return no(this,null,function*(){const rt=unref(Xe);rt&&(Ve.value=new Cropper(rt,ua(Mu(ua({},C),{ready:()=>{P.value=!0,He(),We("ready",Ve.value)},crop(){j()},zoom(){j()},cropmove(){j()}}),A.options)))})}function He(){A.realTimePreview&&Ye()}function Ye(){if(!Ve.value)return;let rt=Ve.value.getData();(A.circled?st():Ve.value.getCroppedCanvas()).toBlob(tt=>{if(!tt)return;let at=new FileReader;at.readAsDataURL(tt),at.onloadend=et=>{var Ot,wt;We("cropend",{imgBase64:(wt=(Ot=et.target)==null?void 0:Ot.result)!=null?wt:"",imgInfo:rt})},at.onerror=()=>{We("cropendError")}},"image/png")}function st(){const rt=Ve.value.getCroppedCanvas(),Ke=document.createElement("canvas"),tt=Ke.getContext("2d"),at=rt.width,et=rt.height;return Ke.width=at,Ke.height=et,tt.imageSmoothingEnabled=!0,tt.drawImage(rt,0,0,at,et),tt.globalCompositeOperation="destination-in",tt.beginPath(),tt.arc(at/2,et/2,Math.min(at,et)/2,0,2*Math.PI,!0),tt.fill(),Ke}return(rt,Ke)=>(openBlock(),createElementBlock("div",{class:normalizeClass(qe.value),style:normalizeStyle(Be.value)},[withDirectives(createBaseVNode("img",{ref_key:"imgElRef",ref:Xe,src:v.src,alt:v.alt,crossorigin:v.crossorigin,style:normalizeStyle(x.value)},null,12,_hoisted_1$2),[[vShow,P.value]])],6))}}),Cropper_vue_vue_type_style_index_0_lang="",_hoisted_1$1=["src","alt"],_sfc_main$1=defineComponent({name:"CropperModal",__name:"CropperModal",props:{circled:{type:Boolean,default:!0},uploadApi:{type:Function},src:{type:String},size:{type:Number}},emits:["uploadSuccess","uploadError","register"],setup(v,{emit:y}){const C=v,A=y;let We="";const Ge=ref(C.src||""),Xe=ref(""),Ve=ref();let P=1,Te=1;const{prefixCls:j}=useDesign("cropper-am"),[x,{closeModal:qe,setModalProps:Be}]=useModalInner(),{t:De}=useI18n();function He(tt){if(C.size&&tt.size>1024*1024*C.size){A("uploadError",{msg:De("component.cropper.imageTooBig")});return}const at=new FileReader;return at.readAsDataURL(tt),Ge.value="",Xe.value="",at.onload=function(et){var Ot,wt;Ge.value=(wt=(Ot=et.target)==null?void 0:Ot.result)!=null?wt:"",We=tt.name},!1}function Ye({imgBase64:tt}){Xe.value=tt}function st(tt){Ve.value=tt}function rt(tt,at){var et,Ot;tt==="scaleX"&&(P=at=P===-1?1:-1),tt==="scaleY"&&(Te=at=Te===-1?1:-1),(Ot=(et=Ve==null?void 0:Ve.value)==null?void 0:et[tt])==null||Ot.call(et,at)}function Ke(){return no(this,null,function*(){const tt=C.uploadApi;if(tt&&isFunction$1(tt)){const at=dataURLtoBlob(Xe.value);try{Be({confirmLoading:!0});const et=yield tt({name:"file",file:at,filename:We});A("uploadSuccess",{source:Xe.value,data:et}),qe()}finally{Be({confirmLoading:!1})}}})}return(tt,at)=>{const et=resolveComponent("a-button");return openBlock(),createBlock(unref(BasicModal),mergeProps(tt.$attrs,{onRegister:unref(x),title:unref(De)("component.cropper.modalTitle"),width:"800px",canFullscreen:!1,onOk:Ke,okText:unref(De)("component.cropper.okText")}),{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref(j))},[createBaseVNode("div",{class:normalizeClass(`${unref(j)}-left`)},[createBaseVNode("div",{class:normalizeClass(`${unref(j)}-cropper`)},[Ge.value?(openBlock(),createBlock(_sfc_main$2,{key:0,src:Ge.value,height:"300px",circled:v.circled,onCropend:Ye,onReady:st},null,8,["src","circled"])):createCommentVNode("",!0)],2),createBaseVNode("div",{class:normalizeClass(`${unref(j)}-toolbar`)},[createVNode(unref(Upload),{fileList:[],accept:"image/*",beforeUpload:He},{default:withCtx(()=>[createVNode(unref(Tooltip),{title:unref(De)("component.cropper.selectImage"),placement:"bottom"},{default:withCtx(()=>[createVNode(et,{size:"small",preIcon:"ant-design:upload-outlined",type:"primary"})]),_:1},8,["title"])]),_:1}),createVNode(unref(Space),null,{default:withCtx(()=>[createVNode(unref(Tooltip),{title:unref(De)("component.cropper.btn_reset"),placement:"bottom"},{default:withCtx(()=>[createVNode(et,{type:"primary",preIcon:"ant-design:reload-outlined",size:"small",disabled:!Ge.value,onClick:at[0]||(at[0]=Ot=>rt("reset"))},null,8,["disabled"])]),_:1},8,["title"]),createVNode(unref(Tooltip),{title:unref(De)("component.cropper.btn_rotate_left"),placement:"bottom"},{default:withCtx(()=>[createVNode(et,{type:"primary",preIcon:"ant-design:rotate-left-outlined",size:"small",disabled:!Ge.value,onClick:at[1]||(at[1]=Ot=>rt("rotate",-45))},null,8,["disabled"])]),_:1},8,["title"]),createVNode(unref(Tooltip),{title:unref(De)("component.cropper.btn_rotate_right"),placement:"bottom"},{default:withCtx(()=>[createVNode(et,{type:"primary",preIcon:"ant-design:rotate-right-outlined",size:"small",disabled:!Ge.value,onClick:at[2]||(at[2]=Ot=>rt("rotate",45))},null,8,["disabled"])]),_:1},8,["title"]),createVNode(unref(Tooltip),{title:unref(De)("component.cropper.btn_scale_x"),placement:"bottom"},{default:withCtx(()=>[createVNode(et,{type:"primary",preIcon:"vaadin:arrows-long-h",size:"small",disabled:!Ge.value,onClick:at[3]||(at[3]=Ot=>rt("scaleX"))},null,8,["disabled"])]),_:1},8,["title"]),createVNode(unref(Tooltip),{title:unref(De)("component.cropper.btn_scale_y"),placement:"bottom"},{default:withCtx(()=>[createVNode(et,{type:"primary",preIcon:"vaadin:arrows-long-v",size:"small",disabled:!Ge.value,onClick:at[4]||(at[4]=Ot=>rt("scaleY"))},null,8,["disabled"])]),_:1},8,["title"]),createVNode(unref(Tooltip),{title:unref(De)("component.cropper.btn_zoom_in"),placement:"bottom"},{default:withCtx(()=>[createVNode(et,{type:"primary",preIcon:"ant-design:zoom-in-outlined",size:"small",disabled:!Ge.value,onClick:at[5]||(at[5]=Ot=>rt("zoom",.1))},null,8,["disabled"])]),_:1},8,["title"]),createVNode(unref(Tooltip),{title:unref(De)("component.cropper.btn_zoom_out"),placement:"bottom"},{default:withCtx(()=>[createVNode(et,{type:"primary",preIcon:"ant-design:zoom-out-outlined",size:"small",disabled:!Ge.value,onClick:at[6]||(at[6]=Ot=>rt("zoom",-.1))},null,8,["disabled"])]),_:1},8,["title"])]),_:1})],2)],2),createBaseVNode("div",{class:normalizeClass(`${unref(j)}-right`)},[createBaseVNode("div",{class:normalizeClass(`${unref(j)}-preview`)},[Xe.value?(openBlock(),createElementBlock("img",{key:0,src:Xe.value,alt:unref(De)("component.cropper.preview")},null,8,_hoisted_1$1)):createCommentVNode("",!0)],2),Xe.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${unref(j)}-group`)},[createVNode(unref(Avatar),{src:Xe.value,size:"large"},null,8,["src"]),createVNode(unref(Avatar),{src:Xe.value,size:48},null,8,["src"]),createVNode(unref(Avatar),{src:Xe.value,size:64},null,8,["src"]),createVNode(unref(Avatar),{src:Xe.value,size:80},null,8,["src"])],2)):createCommentVNode("",!0)],2)],2)]),_:1},16,["onRegister","title","okText"])}}}),CropperModal_vue_vue_type_style_index_0_lang="",_hoisted_1=["src"],_sfc_main=defineComponent({name:"CropperAvatar",__name:"CropperAvatar",props:{width:{type:[String,Number],default:"200px"},value:{type:String},showBtn:{type:Boolean,default:!0},btnProps:{type:Object},btnText:{type:String,default:""},uploadApi:{type:Function},size:{type:Number,default:5}},emits:["update:value","change"],setup(v,{expose:y,emit:C}){const A=v,We=C,Ge=ref(A.value||""),{prefixCls:Xe}=useDesign("cropper-avatar"),[Ve,{openModal:P,closeModal:Te}]=useModal(),{createMessage:j}=useMessage(),{t:x}=useI18n(),qe=computed(()=>[Xe]),Be=computed(()=>`${A.width}`.replace(/px/,"")+"px"),De=computed(()=>parseInt(`${A.width}`.replace(/px/,""))/2+"px"),He=computed(()=>({width:unref(Be)})),Ye=computed(()=>({width:unref(Be),height:unref(Be)}));watchEffect(()=>{Ge.value=A.value||""}),watch(()=>Ge.value,rt=>{We("update:value",rt)});function st({source:rt,data:Ke}){Ge.value=rt,We("change",Ke),j.success(x("component.cropper.uploadSuccess"))}return y({openModal:P.bind(null,!0),closeModal:Te}),(rt,Ke)=>{const tt=resolveComponent("a-button");return openBlock(),createElementBlock("div",{class:normalizeClass(qe.value),style:normalizeStyle(He.value)},[createBaseVNode("div",{class:normalizeClass(`${unref(Xe)}-image-wrapper`),style:normalizeStyle(Ye.value),onClick:Ke[0]||(Ke[0]=at=>unref(P)())},[createBaseVNode("div",{class:normalizeClass(`${unref(Xe)}-image-mask`),style:normalizeStyle(Ye.value)},[createVNode(_sfc_main$G,{icon:"ant-design:cloud-upload-outlined",size:De.value,style:normalizeStyle(Ye.value),color:"#d6d6d6"},null,8,["size","style"])],6),Ge.value?(openBlock(),createElementBlock("img",{key:0,src:Ge.value,alt:"avatar"},null,8,_hoisted_1)):createCommentVNode("",!0)],6),v.showBtn?(openBlock(),createBlock(tt,mergeProps({key:0,class:`${unref(Xe)}-upload-btn`,onClick:unref(P)},v.btnProps),{default:withCtx(()=>[createTextVNode(toDisplayString(v.btnText?v.btnText:unref(x)("component.cropper.selectImage")),1)]),_:1},16,["class","onClick"])):createCommentVNode("",!0),createVNode(_sfc_main$1,{onRegister:unref(Ve),onUploadSuccess:st,uploadApi:v.uploadApi,src:Ge.value,size:v.size},null,8,["onRegister","uploadApi","src","size"])],6)}}}),CropperAvatar_vue_vue_type_style_index_0_scoped_9c36557a_lang="",avatarCropper=_export_sfc(_sfc_main,[["__scopeId","data-v-9c36557a"]]);withInstall(_sfc_main$2);const CropperAvatar=withInstall(avatarCropper),componentMap=new Map;componentMap.set("ExpertInput",_sfc_main$6);componentMap.set("CodeEditor",CodeEditor);componentMap.set("Tinymce",Tinymce);componentMap.set("ColorPicker",Me);componentMap.set("MarkDown",MarkDown);componentMap.set("CropperAvatar",CropperAvatar);componentMap.set("Input",Input);componentMap.set("InputGroup",Input.Group);componentMap.set("InputPassword",Input.Password);componentMap.set("InputSearch",Input.Search);componentMap.set("InputTextArea",Input.TextArea);componentMap.set("InputNumber",InputNumber);componentMap.set("AutoComplete",AutoComplete);componentMap.set("ImageUpload",ImageUpload);componentMap.set("Select",Select);componentMap.set("ApiSelect",_sfc_main$D);componentMap.set("ApiTree",_sfc_main$C);componentMap.set("TreeSelect",TreeSelect);componentMap.set("ApiTreeSelect",_sfc_main$B);componentMap.set("ApiRadioGroup",_sfc_main$E);componentMap.set("Switch",Switch);componentMap.set("RadioButtonGroup",_sfc_main$I);componentMap.set("RadioGroup",Radio.Group);componentMap.set("Checkbox",Checkbox);componentMap.set("CheckboxGroup",Checkbox.Group);componentMap.set("ApiCascader",_sfc_main$A);componentMap.set("Cascader",Cascader);componentMap.set("Slider",Slider);componentMap.set("Rate",Rate);componentMap.set("ApiTransfer",_sfc_main$z);componentMap.set("DatePicker",DatePicker);componentMap.set("MonthPicker",DatePicker.MonthPicker);componentMap.set("RangePicker",DatePicker.RangePicker);componentMap.set("WeekPicker",DatePicker.WeekPicker);componentMap.set("TimePicker",TimePicker);componentMap.set("TimeRangePicker",TimePicker.TimeRangePicker);componentMap.set("StrengthMeter",StrengthMeter);componentMap.set("IconPicker",_sfc_main$F);componentMap.set("InputCountDown",CountdownInput);componentMap.set("Upload",BasicUpload);componentMap.set("Divider",Divider);function add(v,y){componentMap.set(v,y)}export{_sfc_main$m as _,useTable as a,_sfc_main$y as b,_sfc_main$a as c,getAnnoAddForm as d,getAnnoEditForm as e,getAnnoDescriptionForm as f,getAnnoSearchForm as g,getColumns as h,_sfc_main$q as i,_sfc_main$F as j,componentMap as k,add as l,_sfc_main$n as m,useForm as u};
