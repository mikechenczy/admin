var m=(t,o,e)=>new Promise((n,u)=>{var r=s=>{try{a(e.next(s))}catch(i){u(i)}},l=s=>{try{a(e.throw(s))}catch(i){u(i)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(r,l);a((e=e.apply(t,o)).next())});import{a7 as _,u as I,f as h,aa as v}from"./index.js";import{f,u as c,d as C,c as z,h as F,Z as y,a5 as S,a6 as p,aa as w,G as B,a0 as x,ab as A,a8 as k,a7 as N,ac as $,ah as T,ai as D,k as O}from"./vue-ae6a2213.js";import{B as P,e as j}from"./antd-8e9c6fb8.js";import{u as R}from"./useFormItem-e445be9f.js";function V(t){const o=f(t),e=f(!1);let n;function u(){n&&window.clearInterval(n)}function r(){e.value=!1,u(),n=null}function l(){c(e)||n||(e.value=!0,n=setInterval(()=>{c(o)===1?(r(),o.value=t):o.value-=1},1e3))}function a(){o.value=t,r()}function s(){a(),l()}return _(()=>{a()}),{start:l,reset:a,restart:s,clear:u,stop:r,currentCount:o,isStart:e}}const g=C({name:"CountButton",__name:"CountButton",props:{value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},setup(t){const o=t,{t:e}=I(),n=f(!1),{currentCount:u,isStart:r,start:l,reset:a}=V(o.count),s=z(()=>c(r)?e("component.countdown.sendText",[c(u)]):e("component.countdown.normalText"));F(()=>{o.value===void 0&&a()});function i(){return m(this,null,function*(){const{beforeStartFunc:d}=o;if(d&&j(d)){n.value=!0;try{(yield d())&&l()}finally{n.value=!1}}else l()})}return(d,b)=>(y(),S(c(P),w(d.$attrs,{disabled:c(r),onClick:i,loading:n.value}),{default:p(()=>[B(x(s.value),1)]),_:1},16,["disabled","loading"]))}}),E=C({name:"CountDownInput",inheritAttrs:!1,__name:"CountdownInput",props:{value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},setup(t){const o=t,{prefixCls:e}=h("countdown-input"),[n]=R(o);return(u,r)=>{const l=N("a-input");return y(),S(l,w(u.$attrs,{class:c(e),size:t.size,value:c(n)}),A({addonAfter:p(()=>[O(g,{size:t.size,count:t.count,value:c(n),beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[k(Object.keys(u.$slots).filter(a=>a!=="addonAfter"),a=>({name:a,fn:p(s=>[$(u.$slots,a,T(D(s||{})))])}))]),1040,["class","size","value"])}}});const H=v(E);v(g);export{H as C};
